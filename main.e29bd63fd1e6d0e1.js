(self.webpackChunkpassiveopen=self.webpackChunkpassiveopen||[]).push([[179],{6534:(Et,Ze,ae)=>{"use strict";function ee(n){return"function"==typeof n}function ve(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Be=ve(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ie(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Te{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(ee(i))try{i()}catch(s){e=s instanceof Be?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Je(s)}catch(o){e=e??[],o instanceof Be?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Be(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Je(e);else{if(e instanceof Te){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ie(t,e)}remove(e){const{_finalizers:t}=this;t&&Ie(t,e),e instanceof Te&&e._removeParent(this)}}Te.EMPTY=(()=>{const n=new Te;return n.closed=!0,n})();const _e=Te.EMPTY;function Ve(n){return n instanceof Te||n&&"closed"in n&&ee(n.remove)&&ee(n.add)&&ee(n.unsubscribe)}function Je(n){ee(n)?n():n.unsubscribe()}const ot={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Tt={setTimeout(n,e,...t){const{delegate:i}=Tt;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Tt;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ht(n){Tt.setTimeout(()=>{const{onUnhandledError:e}=ot;if(!e)throw n;e(n)})}function et(){}const ct=Ke("C",void 0,void 0);function Ke(n,e,t){return{kind:n,value:e,error:t}}let j=null;function Y(n){if(ot.useDeprecatedSynchronousErrorHandling){const e=!j;if(e&&(j={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=j;if(j=null,t)throw i}}else n()}class xe extends Te{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ve(e)&&e.add(this)):this.destination=he}static create(e,t,i){return new $(e,t,i)}next(e){this.isStopped?Oe(function Qe(n){return Ke("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Oe(function $t(n){return Ke("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Oe(ct,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const te=Function.prototype.bind;function oe(n,e){return te.call(n,e)}class ce{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){qe(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){qe(i)}else qe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){qe(t)}}}class $ extends xe{constructor(e,t,i){let r;if(super(),ee(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&ot.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&oe(e.next,s),error:e.error&&oe(e.error,s),complete:e.complete&&oe(e.complete,s)}):r=e}this.destination=new ce(r)}}function qe(n){ot.useDeprecatedSynchronousErrorHandling?function Z(n){ot.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=n)}(n):ht(n)}function Oe(n,e){const{onStoppedNotification:t}=ot;t&&Tt.setTimeout(()=>t(n,e))}const he={closed:!0,next:et,error:function He(n){throw n},complete:et},Ot="function"==typeof Symbol&&Symbol.observable||"@@observable";function bt(n){return n}function tt(n){return 0===n.length?bt:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Se=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function me(n){return n&&n instanceof xe||function We(n){return n&&ee(n.next)&&ee(n.error)&&ee(n.complete)}(n)&&Ve(n)}(t)?t:new $(t,i,r);return Y(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Re(i))((r,s)=>{const o=new $({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Ot](){return this}pipe(...t){return tt(t)(this)}toPromise(t){return new(t=Re(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Re(n){var e;return null!==(e=n??ot.Promise)&&void 0!==e?e:Promise}const mt=ve(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $e=(()=>{class n extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Wt(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new mt}next(t){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?_e:(this.currentObservers=null,s.push(t),new Te(()=>{this.currentObservers=null,Ie(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new Se;return t.source=this,t}}return n.create=(e,t)=>new Wt(e,t),n})();class Wt extends $e{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:_e}}function dt(n){return ee(n?.lift)}function sn(n){return e=>{if(dt(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function on(n,e,t,i,r){return new On(n,e,t,i,r)}class On extends xe{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ut(n,e){return sn((t,i)=>{let r=0;t.subscribe(on(i,s=>{i.next(n.call(e,s,r++))}))})}function St(n){return this instanceof St?(this.v=n,this):new St(n)}function Ii(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(p){i[p]&&(r[p]=function(g){return new Promise(function(v,_){s.push([p,g,v,_])>1||a(p,g)})})}function a(p,g){try{!function c(p){p.value instanceof St?Promise.resolve(p.value.v).then(l,u):f(s[0][2],p)}(i[p](g))}catch(v){f(s[0][3],v)}}function l(p){a("next",p)}function u(p){a("throw",p)}function f(p,g){p(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function bn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function ke(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}const qo=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Na(n){return ee(n?.then)}function Hs(n){return ee(n[Ot])}function uc(n){return Symbol.asyncIterator&&ee(n?.[Symbol.asyncIterator])}function aa(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const al=function hn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Tc(n){return ee(n?.[al])}function Vi(n){return Ii(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield St(t.read());if(r)return yield St(void 0);yield yield St(i)}}finally{t.releaseLock()}})}function y2(n){return ee(n?.getReader)}function Bo(n){if(n instanceof Se)return n;if(null!=n){if(Hs(n))return function kl(n){return new Se(e=>{const t=n[Ot]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(qo(n))return function O4(n){return new Se(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Na(n))return function OA(n){return new Se(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ht)})}(n);if(uc(n))return Or(n);if(Tc(n))return function Dd(n){return new Se(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(y2(n))return function N2(n){return Or(Vi(n))}(n)}throw aa(n)}function Or(n){return new Se(e=>{(function N4(n,e){var t,i,r,s;return function it(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(f){o(f)}}function c(u){try{l(i.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=bn(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function qa(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Ri(n,e,t=1/0){return ee(e)?Ri((i,r)=>Ut((s,o)=>e(i,s,r,o))(Bo(n(i,r))),t):("number"==typeof e&&(t=e),sn((i,r)=>function x3(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,f=!1;const p=()=>{f&&!c.length&&!l&&e.complete()},g=_=>l<i?v(_):c.push(_),v=_=>{s&&e.next(_),l++;let w=!1;Bo(t(_,u++)).subscribe(on(e,b=>{r?.(b),s?g(b):e.next(b)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<i;){const b=c.shift();o?qa(e,o,()=>v(b)):v(b)}p()}catch(b){e.error(b)}}))};return n.subscribe(on(e,g,()=>{f=!0,p()})),()=>{a?.()}}(i,r,n,t)))}function v1(n=1/0){return Ri(bt,n)}const Xa=new Se(n=>n.complete());function cu(n){return n&&ee(n.schedule)}function z1(n){return n[n.length-1]}function Uh(n){return ee(z1(n))?n.pop():void 0}function O1(n){return cu(z1(n))?n.pop():void 0}function Uo(n,e=0){return sn((t,i)=>{t.subscribe(on(i,r=>qa(i,n,()=>i.next(r),e),()=>qa(i,n,()=>i.complete(),e),r=>qa(i,n,()=>i.error(r),e)))})}function ko(n,e=0){return sn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function C3(n,e){if(!n)throw new Error("Iterable cannot be null");return new Se(t=>{qa(t,e,()=>{const i=n[Symbol.asyncIterator]();qa(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Es(n,e){return e?function Zc(n,e){if(null!=n){if(Hs(n))return function ef(n,e){return Bo(n).pipe(ko(e),Uo(e))}(n,e);if(qo(n))return function U2(n,e){return new Se(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(Na(n))return function Lc(n,e){return Bo(n).pipe(ko(e),Uo(e))}(n,e);if(uc(n))return C3(n,e);if(Tc(n))return function ca(n,e){return new Se(t=>{let i;return qa(t,e,()=>{i=n[al](),qa(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>ee(i?.return)&&i.return()})}(n,e);if(y2(n))return function cl(n,e){return C3(Vi(n),e)}(n,e)}throw aa(n)}(n,e):Bo(n)}function Jc(...n){const e=O1(n),t=function x8(n,e){return"number"==typeof z1(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Bo(i[0]):v1(t)(Es(i,e)):Xa}function lu(n={}){const{connector:e=(()=>new $e),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,f=!1;const p=()=>{a?.unsubscribe(),a=void 0},g=()=>{p(),o=c=void 0,u=f=!1},v=()=>{const _=o;g(),_?.unsubscribe()};return sn((_,w)=>{l++,!f&&!u&&p();const b=c=c??e();w.add(()=>{l--,0===l&&!f&&!u&&(a=Fl(v,r))}),b.subscribe(w),!o&&l>0&&(o=new $({next:x=>b.next(x),error:x=>{f=!0,p(),a=Fl(g,t,x),b.error(x)},complete:()=>{u=!0,p(),a=Fl(g,i),b.complete()}}),Bo(_).subscribe(o))})(s)}}function Fl(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new $({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function qs(n){for(let e in n)if(n[e]===qs)return e;throw Error("Could not find renamed property on target object.")}function Fo(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Eo(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Eo).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Dc(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Gh=qs({__forward_ref__:qs});function Cr(n){return n.__forward_ref__=Cr,n.toString=function(){return Eo(this())},n}function Dn(n){return N1(n)?n():n}function N1(n){return"function"==typeof n&&n.hasOwnProperty(Gh)&&n.__forward_ref__===Cr}class Jt extends Error{constructor(e,t){super(function ir(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function hr(n){return"string"==typeof n?n:null==n?"":String(n)}function uu(n,e){throw new Jt(-201,!1)}function Ic(n,e){null==n&&function wr(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Rt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}const V4=Rt;function xn(n){return{providers:n.providers||[],imports:n.imports||[]}}function y1(n){return x2(n,Go)||x2(n,mo)}function x2(n,e){return n.hasOwnProperty(e)?n[e]:null}function hu(n){return n&&(n.hasOwnProperty(Fd)||n.hasOwnProperty(ua))?n[Fd]:null}const Go=qs({\u0275prov:qs}),Fd=qs({\u0275inj:qs}),mo=qs({ngInjectableDef:qs}),ua=qs({ngInjectorDef:qs});var Gn=(()=>((Gn=Gn||{})[Gn.Default=0]="Default",Gn[Gn.Host=1]="Host",Gn[Gn.Self=2]="Self",Gn[Gn.SkipSelf=4]="SkipSelf",Gn[Gn.Optional=8]="Optional",Gn))();let Wh;function hc(n){const e=Wh;return Wh=n,e}function C8(n,e,t){const i=y1(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Gn.Optional?null:void 0!==e?e:void uu(Eo(n))}function Ho(n){return{toString:n}.toString()}var Ya=(()=>((Ya=Ya||{})[Ya.OnPush=0]="OnPush",Ya[Ya.Default=1]="Default",Ya))(),ha=(()=>{return(n=ha||(ha={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ha;var n})();const zs=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),U4={},Yr=[],w1=qs({\u0275cmp:qs}),C2=qs({\u0275dir:qs}),E3=qs({\u0275pipe:qs}),jh=qs({\u0275mod:qs}),Nl=qs({\u0275fac:qs}),$h=qs({__NG_ELEMENT_ID__:qs});let Nr=0;function Sn(n){return Ho(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ya.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Yr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ha.Emulated,id:"c"+Nr++,styles:n.styles||Yr,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,o=n.features;return r.inputs=e4(n.inputs,i),r.outputs=e4(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Kh).filter(Rc):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(dc).filter(Rc):null,r})}function Kh(n){return fr(n)||Aa(n)}function Rc(n){return null!==n}function hi(n){return Ho(()=>({type:n.type,bootstrap:n.bootstrap||Yr,declarations:n.declarations||Yr,imports:n.imports||Yr,exports:n.exports||Yr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function e4(n,e){if(null==n)return U4;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const gt=Sn;function b1(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function fr(n){return n[w1]||null}function Aa(n){return n[C2]||null}function dc(n){return n[E3]||null}function Hi(n,e){const t=n[jh]||null;if(!t&&!0===e)throw new Error(`Type ${Eo(n)} does not have '\u0275mod' property.`);return t}function Zs(n){return Array.isArray(n)&&"object"==typeof n[1]}function Xo(n){return Array.isArray(n)&&!0===n[1]}function G1(n){return 0!=(8&n.flags)}function qh(n){return 2==(2&n.flags)}function T3(n){return 1==(1&n.flags)}function Ia(n){return null!==n.template}function Ul(n){return 0!=(256&n[2])}function C1(n,e){return n.hasOwnProperty(Nl)?n[Nl]:null}class W4{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Ir(){return dl}function dl(n){return n.type.prototype.ngOnChanges&&(n.setInput=rg),Yo}function Yo(){const n=M1(this),e=n?.current;if(e){const t=n.previous;if(t===U4)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function rg(n,e,t,i){const r=M1(n)||function mu(n,e){return n[gu]=e}(n,{previous:U4,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],c=o[a];s[a]=new W4(c&&c.currentValue,e,o===U4),n[i]=e}Ir.ngInherit=!0;const gu="__ngSimpleChanges__";function M1(n){return n[gu]||null}function ya(n){for(;Array.isArray(n);)n=n[0];return n}function E2(n,e){return ya(e[n])}function $2(n,e){return ya(e[n.index])}function T8(n,e){return n.data[e]}function Au(n,e){return n[e]}function wa(n,e){const t=e[n];return Zs(t)?t:t[0]}function vu(n){return 64==(64&n[2])}function K2(n,e){return null==e?null:n[e]}function _u(n){n[18]=0}function $4(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Ki={lFrame:Fw(null),bindingsEnabled:!0};function pc(){return Ki.bindingsEnabled}function Ht(){return Ki.lFrame.lView}function Pr(){return Ki.lFrame.tView}function zn(n){return Ki.lFrame.contextLView=n,n[8]}function h(n){return Ki.lFrame.contextLView=null,n}function d(){let n=m();for(;null!==n&&64===n.type;)n=n.parent;return n}function m(){return Ki.lFrame.currentTNode}function C(n,e){const t=Ki.lFrame;t.currentTNode=n,t.isParent=e}function F(){return Ki.lFrame.isParent}function N(){Ki.lFrame.isParent=!1}function vt(){const n=Ki.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function gn(){return Ki.lFrame.bindingIndex}function Pn(){return Ki.lFrame.bindingIndex++}function ri(n){const e=Ki.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function S1(n,e){const t=Ki.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ql(e)}function Ql(n){Ki.lFrame.currentDirectiveIndex=n}function rf(n){const e=Ki.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function sf(){return Ki.lFrame.currentQueryIndex}function UA(n){Ki.lFrame.currentQueryIndex=n}function gD(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function GA(n,e,t){if(t&Gn.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Gn.Host||(r=gD(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Ki.lFrame=kw();return i.currentTNode=e,i.lView=n,!0}function QA(n){const e=kw(),t=n[1];Ki.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function kw(){const n=Ki.lFrame,e=null===n?null:n.child;return null===e?Fw(n):e}function Fw(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Pw(){const n=Ki.lFrame;return Ki.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Hw=Pw;function WA(){const n=Pw();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Js(){return Ki.lFrame.selectedIndex}function e0(n){Ki.lFrame.selectedIndex=n}function o1(){const n=Ki.lFrame;return T8(n.tView,n.selectedIndex)}function eo(){Ki.lFrame.currentNamespace="svg"}function ag(){!function zw(){Ki.lFrame.currentNamespace=null}()}function cg(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),l&&((n.viewHooks||(n.viewHooks=[])).push(t,l),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,l)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function lg(n,e,t){$A(n,e,3,t)}function ug(n,e,t,i){(3&n[2])===t&&$A(n,e,t,i)}function jA(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function $A(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(ui(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function ui(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class D8{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function dg(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];pg(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function n0(n){return 3===n||4===n||6===n}function pg(n){return 64===n.charCodeAt(0)}function zd(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Ow(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Ow(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function qA(n){return-1!==n}function Od(n){return 32767&n}function Nd(n,e){let t=function XA(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let YA=!0;function gg(n){const e=YA;return YA=n,e}let wD=0;const o4={};function B8(n,e){const t=JA(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,ZA(i.data,n),ZA(e,null),ZA(i.blueprint,null));const r=k8(n,e),s=n.injectorIndex;if(qA(r)){const o=Od(r),a=Nd(r,e),c=a[1].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function ZA(n,e){n.push(0,0,0,0,0,0,0,0,e)}function JA(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function k8(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=jw(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function mg(n,e,t){!function Uw(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty($h)&&(i=t[$h]),null==i&&(i=t[$h]=wD++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function Gw(n,e,t){if(t&Gn.Optional||void 0!==n)return n;uu()}function vg(n,e,t,i){if(t&Gn.Optional&&void 0===i&&(i=null),0==(t&(Gn.Self|Gn.Host))){const r=n[9],s=hc(void 0);try{return r?r.get(e,i,t&Gn.Optional):C8(e,i,t&Gn.Optional)}finally{hc(s)}}return Gw(i,0,t)}function _g(n,e,t,i=Gn.Default,r){if(null!==n){if(1024&e[2]){const o=function bD(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=e9(s,o,t,i|Gn.Self,o4);if(a!==o4)return a;let c=s.parent;if(!c){const l=o[21];if(l){const u=l.get(t,o4,i);if(u!==o4)return u}c=jw(o),o=o[15]}s=c}return r}(n,e,t,i,o4);if(o!==o4)return o}const s=e9(n,e,t,i,o4);if(s!==o4)return s}return vg(e,t,i,r)}function e9(n,e,t,i,r){const s=function t9(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty($h)?n[$h]:void 0;return"number"==typeof e?e>=0?255&e:Ww:e}(t);if("function"==typeof s){if(!GA(e,n,i))return i&Gn.Host?Gw(r,0,i):vg(e,t,i,r);try{const o=s(i);if(null!=o||i&Gn.Optional)return o;uu()}finally{Hw()}}else if("number"==typeof s){let o=null,a=JA(n,e),c=-1,l=i&Gn.Host?e[16][6]:null;for((-1===a||i&Gn.SkipSelf)&&(c=-1===a?k8(n,e):e[a+8],-1!==c&&n9(i,!1)?(o=e[1],a=Od(c),e=Nd(c,e)):a=-1);-1!==a;){const u=e[1];if(wg(s,a,u.data)){const f=Qw(a,e,t,o,i,l);if(f!==o4)return f}c=e[a+8],-1!==c&&n9(i,e[1].data[a+8]===l)&&wg(s,a,e)?(o=u,a=Od(c),e=Nd(c,e)):a=-1}}return r}function Qw(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=yg(a,o,t,null==i?qh(a)&&YA:i!=o&&0!=(3&a.type),r&Gn.Host&&s===a);return null!==u?Vd(e,o,u,a):o4}function yg(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,p=r?a+u:n.directiveEnd;for(let g=i?a:a+u;g<p;g++){const v=o[g];if(g<c&&t===v||g>=c&&v.type===t)return g}if(r){const g=o[c];if(g&&Ia(g)&&g.type===t)return c}return null}function Vd(n,e,t,i){let r=n[t];const s=e.data;if(function KA(n){return n instanceof D8}(r)){const o=r;o.resolving&&function Id(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Jt(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Xs(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():hr(n)}(s[t]));const a=gg(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?hc(o.injectImpl):null;GA(n,i,Gn.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function yD(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=dl(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&hc(c),gg(a),o.resolving=!1,Hw()}}return r}function wg(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function n9(n,e){return!(n&Gn.Self||n&Gn.Host&&e)}class af{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return _g(this._tNode,this._lView,e,i,t)}}function Ww(){return new af(d(),Ht())}function Qn(n){return Ho(()=>{const e=n.prototype.constructor,t=e[Nl]||F8(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Nl]||F8(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function F8(n){return N1(n)?()=>{const e=F8(Dn(n));return e&&e()}:C1(n)}function jw(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function D3(n){return function Ag(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(n0(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(d(),n)}const r0="__parameters__";function Gd(n,e,t){return Ho(()=>{const i=function i9(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const f=c.hasOwnProperty(r0)?c[r0]:Object.defineProperty(c,r0,{value:[]})[r0];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class zt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Rt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Wl(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),Wl(i,e)):e!==n&&e.push(i)}return e}function q4(n,e){n.forEach(t=>Array.isArray(t)?q4(t,e):e(t))}function qw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function bg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function z8(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function jl(n,e,t){let i=Qd(n,e);return i>=0?n[1|i]=t:(i=~i,function Yw(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function s9(n,e){const t=Qd(n,e);if(t>=0)return n[1|t]}function Qd(n,e){return function O8(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Wd={},l9="__NG_DI_FLAG__",xg="ngTempTokenPath",jd=/\n/gm,N8="__source";let V8;function $d(n){const e=V8;return V8=n,e}function DD(n,e=Gn.Default){if(void 0===V8)throw new Jt(-203,!1);return null===V8?C8(n,void 0,e):V8.get(n,e&Gn.Optional?null:void 0,e)}function Xe(n,e=Gn.Default){return(function VA(){return Wh}()||DD)(Dn(n),e)}function Os(n,e=Gn.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),Xe(n,e)}function Cg(n){const e=[];for(let t=0;t<n.length;t++){const i=Dn(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Jt(900,!1);let r,s=Gn.Default;for(let o=0;o<i.length;o++){const a=i[o],c=f9(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(Xe(r,s))}else e.push(Xe(i))}return e}function Kd(n,e){return n[l9]=e,n.prototype[l9]=e,n}function f9(n){return n[l9]}const I3=Kd(Gd("Optional"),8),s0=Kd(Gd("SkipSelf"),4);let g9,Eg,Tg;function Yd(n){return function $8(){if(void 0===Eg&&(Eg=null,zs.trustedTypes))try{Eg=zs.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Eg}()?.createHTML(n)||n}function Lg(n){return function K8(){if(void 0===Tg&&(Tg=null,zs.trustedTypes))try{Tg=zs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Tg}()?.createHTML(n)||n}class ff{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class pb extends ff{getTypeName(){return"HTML"}}class PD extends ff{getTypeName(){return"Style"}}class HD extends ff{getTypeName(){return"Script"}}class zD extends ff{getTypeName(){return"URL"}}class OD extends ff{getTypeName(){return"ResourceURL"}}function $l(n){return n instanceof ff?n.changingThisBreaksApplicationSecurity:n}function R3(n,e){const t=function ND(n){return n instanceof ff&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class UD{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Yd(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class vo{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Yd(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=Yd(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const Ig=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Rg(n){return(n=String(n)).match(Ig)?n:"unsafe:"+n}function B3(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function q8(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const X8=B3("area,br,col,hr,img,wbr"),gb=B3("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mb=B3("rp,rt"),v9=q8(X8,q8(gb,B3("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),q8(mb,B3("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),q8(mb,gb)),Bg=B3("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_9=q8(Bg,B3("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),B3("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jD=B3("script,style,template");class vb{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!v9.hasOwnProperty(t))return this.sanitizedSomething=!0,!jD.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!_9.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;Bg[a]&&(c=Rg(c)),this.buf.push(" ",o,'="',_b(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();v9.hasOwnProperty(t)&&!X8.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(_b(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const $D=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,KD=/([^\#-~ |!])/g;function _b(n){return n.replace(/&/g,"&amp;").replace($D,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(KD,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let df;function ql(n,e){let t=null;try{df=df||function Kl(n){const e=new vo(n);return function Ba(){try{return!!(new window.DOMParser).parseFromString(Yd(""),"text/html")}catch{return!1}}()?new UD(e):e}(n);let i=e?String(e):"";t=df.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=df.getInertBodyElement(i)}while(i!==s);return Yd((new vb).sanitizeChildren(kg(t)||t))}finally{if(t){const i=kg(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function kg(n){return"content"in n&&function Fg(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var lo=(()=>((lo=lo||{})[lo.NONE=0]="NONE",lo[lo.HTML=1]="HTML",lo[lo.STYLE=2]="STYLE",lo[lo.SCRIPT=3]="SCRIPT",lo[lo.URL=4]="URL",lo[lo.RESOURCE_URL=5]="RESOURCE_URL",lo))();function k3(n){const e=Z8();return e?Lg(e.sanitize(lo.HTML,n)||""):R3(n,"HTML")?Lg($l(n)):ql(function fb(){return void 0!==g9?g9:typeof document<"u"?document:void 0}(),hr(n))}function E1(n){const e=Z8();return e?e.sanitize(lo.URL,n)||"":R3(n,"URL")?$l(n):Rg(hr(n))}function Z8(){const n=Ht();return n&&n[12]}const w9=new zt("ENVIRONMENT_INITIALIZER"),wb=new zt("INJECTOR",-1),bb=new zt("INJECTOR_DEF_TYPES");class xb{get(e,t=Wd){if(t===Wd){const i=new Error(`NullInjectorError: No provider for ${Eo(e)}!`);throw i.name="NullInjectorError",i}return t}}function JD(...n){return{\u0275providers:Cb(0,n)}}function Cb(n,...e){const t=[],i=new Set;let r;return q4(e,s=>{const o=s;b9(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&Mb(r,t),t}function Mb(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];q4(r,s=>{e.push(s)})}}function b9(n,e,t,i){if(!(n=Dn(n)))return!1;let r=null,s=hu(n);const o=!s&&fr(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=hu(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)b9(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{q4(s.imports,u=>{b9(u,e,t,i)&&(l||(l=[]),l.push(u))})}finally{}void 0!==l&&Mb(l,e)}if(!a){const l=C1(r)||(()=>new r);e.push({provide:r,useFactory:l,deps:Yr},{provide:bb,useValue:r,multi:!0},{provide:w9,useValue:()=>Xe(r),multi:!0})}const c=s.providers;null==c||a||q4(c,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}const eI=qs({provide:String,useValue:qs});function x9(n){return null!==n&&"object"==typeof n&&eI in n}function T(n){return"function"==typeof n}const D=new zt("Set Injector scope."),L={},V={};let W;function se(){return void 0===W&&(W=new xb),W}class Ee{}class De extends Ee{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mi(e,o=>this.processProvider(o)),this.records.set(wb,qn(void 0,this)),r.has("environment")&&this.records.set(Ee,qn(void 0,this));const s=this.records.get(D);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(bb.multi,Yr,Gn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=$d(this),i=hc(void 0);try{return e()}finally{$d(t),hc(i)}}get(e,t=Wd,i=Gn.Default){this.assertNotDestroyed();const r=$d(this),s=hc(void 0);try{if(!(i&Gn.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function Rr(n){return"function"==typeof n||"object"==typeof n&&n instanceof zt}(e)&&y1(e);a=c&&this.injectableDefInScope(c)?qn(rt(e),L):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Gn.Self?se():this.parent).get(e,t=i&Gn.Optional&&t===Wd?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[xg]=o[xg]||[]).unshift(Eo(e)),r)throw o;return function sb(n,e,t,i){const r=n[xg];throw e[N8]&&r.unshift(e[N8]),n.message=function ob(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Eo(e);if(Array.isArray(e))r=e.map(Eo).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Eo(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(jd,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[xg]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{hc(s),$d(r)}}resolveInjectorInitializers(){const e=$d(this),t=hc(void 0);try{const i=this.get(w9.multi,Yr,Gn.Self);for(const r of i)r()}finally{$d(e),hc(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Eo(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Jt(205,!1)}processProvider(e){let t=T(e=Dn(e))?e:Dn(e&&e.provide);const i=function At(n){return x9(n)?qn(void 0,n.useValue):qn(Nt(n),L)}(e);if(T(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=qn(void 0,L,!0),r.factory=()=>Cg(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===L&&(t.value=V,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Xn(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Dn(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function rt(n){const e=y1(n),t=null!==e?e.factory:C1(n);if(null!==t)return t;if(n instanceof zt)throw new Jt(204,!1);if(n instanceof Function)return function ft(n){const e=n.length;if(e>0)throw z8(e,"?"),new Jt(204,!1);const t=function Ol(n){const e=n&&(n[Go]||n[mo]);if(e){const t=function S3(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Jt(204,!1)}function Nt(n,e,t){let i;if(T(n)){const r=Dn(n);return C1(r)||rt(r)}if(x9(n))i=()=>Dn(n.useValue);else if(function Eb(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Cg(n.deps||[]));else if(function Sb(n){return!(!n||!n.useExisting)}(n))i=()=>Xe(Dn(n.useExisting));else{const r=Dn(n&&(n.useClass||n.provide));if(!function Ln(n){return!!n.deps}(n))return C1(r)||rt(r);i=()=>new r(...Cg(n.deps))}return i}function qn(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function xi(n){return!!n.\u0275providers}function mi(n,e){for(const t of n)Array.isArray(t)?mi(t,e):xi(t)?mi(t.\u0275providers,e):e(t)}class Br{}class $s{resolveComponentFactory(e){throw function dr(n){const e=Error(`No component factory found for ${Eo(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Xi=(()=>{class n{}return n.NULL=new $s,n})();function $1(){return gc(d(),Ht())}function gc(n,e){return new mn($2(n,e))}let mn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=$1,n})();function Qo(n){return n instanceof mn?n.nativeElement:n}class F3{}let pa=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function pl(){const n=Ht(),t=wa(d().index,n);return(Zs(t)?t:n)[11]}(),n})(),pf=(()=>{class n{}return n.\u0275prov=Rt({token:n,providedIn:"root",factory:()=>null}),n})();class r2{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const a0=new r2("14.2.2"),Z4={};function iI(n){return n.ngOriginalError}class Af{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&iI(e);for(;t&&iI(t);)t=iI(t);return t||null}}const rI=new Map;let mge=0;const oI="__ngContext__";function gl(n,e){Zs(e)?(n[oI]=e[20],function vge(n){rI.set(n[20],n)}(e)):n[oI]=e}function aI(n){return n.ownerDocument.defaultView}function cI(n){return n.ownerDocument}function vf(n){return n instanceof Function?n():n}var P3=(()=>((P3=P3||{})[P3.Important=1]="Important",P3[P3.DashCase=2]="DashCase",P3))();function uI(n,e){return undefined(n,e)}function M9(n){const e=n[3];return Xo(e)?e[3]:e}function hI(n){return KQ(n[13])}function fI(n){return KQ(n[4])}function KQ(n){for(;null!==n&&!Xo(n);)n=n[4];return n}function Hg(n,e,t,i,r){if(null!=i){let s,o=!1;Xo(i)?s=i:Zs(i)&&(o=!0,i=i[0]);const a=ya(i);0===n&&null!==t?null==r?eW(e,t,a):ep(e,t,a,r||null,!0):1===n&&null!==t?ep(e,t,a,r||null,!0):2===n?function aW(n,e,t){const i=Tb(n,e);i&&function Gge(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function jge(n,e,t,i,r){const s=t[7];s!==ya(t)&&Hg(e,n,i,s,r);for(let a=10;a<t.length;a++){const c=t[a];S9(c[1],c,n,e,i,s)}}(e,n,s,t,r)}}function pI(n,e,t){return n.createElement(e,t)}function XQ(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,$4(r,-1)),t.splice(i,1)}function gI(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&XQ(r,i),e>0&&(n[t-1][4]=i[4]);const s=bg(n,10+e);!function Fge(n,e){S9(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function YQ(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&S9(n,e,t,3,null,null),function zge(n){let e=n[13];if(!e)return mI(n[1],n);for(;e;){let t=null;if(Zs(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Zs(e)&&mI(e[1],e),e=e[3];null===e&&(e=n),Zs(e)&&mI(e[1],e),t=e&&e[4]}e=t}}(e)}}function mI(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function Uge(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof D8)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function Vge(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):ya(e[o]),c=i[r=t[s+2]],l=t[s+3];"boolean"==typeof l?a.removeEventListener(t[s],c,l):l>=0?i[r=l]():i[r=-l].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Xo(e[3])){t!==e[3]&&XQ(t,e);const i=e[19];null!==i&&i.detachView(n)}!function _ge(n){rI.delete(n[20])}(e)}}function ZQ(n,e,t){return function JQ(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===ha.None||r===ha.Emulated)return null}return $2(i,t)}(n,e.parent,t)}function ep(n,e,t,i,r){n.insertBefore(e,t,i,r)}function eW(n,e,t){n.appendChild(e,t)}function tW(n,e,t,i,r){null!==i?ep(n,e,t,i,r):eW(n,e,t)}function Tb(n,e){return n.parentNode(e)}function nW(n,e,t){return rW(n,e,t)}let rW=function iW(n,e,t){return 40&n.type?$2(n,t):null};function Lb(n,e,t,i){const r=ZQ(n,i,e),s=e[11],a=nW(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)tW(s,r,t[c],a,!1);else tW(s,r,t,a,!1)}function Db(n,e){if(null!==e){const t=e.type;if(3&t)return $2(e,n);if(4&t)return vI(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Db(n,i);{const r=n[e.index];return Xo(r)?vI(-1,r):ya(r)}}if(32&t)return uI(e,n)()||ya(n[e.index]);{const i=oW(n,e);return null!==i?Array.isArray(i)?i[0]:Db(M9(n[16]),i):Db(n,e.next)}}return null}function oW(n,e){return null!==e?n[16][6].projection[e.projection]:null}function vI(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Db(i,r)}return e[7]}function _I(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&gl(ya(a),i),t.flags|=4),64!=(64&t.flags))if(8&c)_I(n,e,t.child,i,r,s,!1),Hg(e,n,r,a,s);else if(32&c){const l=uI(t,i);let u;for(;u=l();)Hg(e,n,r,u,s);Hg(e,n,r,a,s)}else 16&c?cW(n,e,i,t,r,s):Hg(e,n,r,a,s);t=o?t.projectionNext:t.next}}function S9(n,e,t,i,r,s){_I(t,i,n.firstChild,e,r,s,!1)}function cW(n,e,t,i,r,s){const o=t[16],c=o[6].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Hg(e,n,r,c[l],s);else _I(n,e,c,o[3],r,s,!0)}function lW(n,e,t){n.setAttribute(e,"style",t)}function yI(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function uW(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const hW="ng-template";function Kge(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==uW(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function fW(n){return 4===n.type&&n.value!==hW}function qge(n,e,t){return e===(4!==n.type||t?n.value:hW)}function Xge(n,e,t){let i=4;const r=n.attrs||[],s=function Jge(n){for(let e=0;e<n.length;e++)if(n0(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!qge(n,c,t)||""===c&&1===e.length){if(th(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!Kge(n.attrs,l,t)){if(th(i))return!1;o=!0}continue}const f=Yge(8&i?"class":c,r,fW(n),t);if(-1===f){if(th(i))return!1;o=!0;continue}if(""!==l){let p;p=f>s?"":r[f+1].toLowerCase();const g=8&i?p:null;if(g&&-1!==uW(g,l,0)||2&i&&l!==p){if(th(i))return!1;o=!0}}}}else{if(!o&&!th(i)&&!th(c))return!1;if(o&&th(c))continue;o=!1,i=c|1&i}}return th(i)||o}function th(n){return 0==(1&n)}function Yge(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function e7e(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function dW(n,e,t=!1){for(let i=0;i<e.length;i++)if(Xge(n,e[i],t))return!0;return!1}function t7e(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function pW(n,e){return n?":not("+e.trim()+")":e}function n7e(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!th(o)&&(e+=pW(s,r),r=""),i=o,s=s||!th(i);t++}return""!==r&&(e+=pW(s,r)),e}const Sr={};function K(n){gW(Pr(),Ht(),Js()+n,!1)}function gW(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&lg(e,s,t)}else{const s=n.preOrderHooks;null!==s&&ug(e,s,0,t)}e0(t)}function _W(n,e=null,t=null,i){const r=yW(n,e,t,i);return r.resolveInjectorInitializers(),r}function yW(n,e=null,t=null,i,r=new Set){const s=[t||Yr,JD(n)];return i=i||("object"==typeof n?void 0:Eo(n)),new De(s,e||se(),i||null,r)}let Oc=(()=>{class n{static create(t,i){if(Array.isArray(t))return _W({name:""},i,t,"");{const r=t.name??"";return _W({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=Wd,n.NULL=new xb,n.\u0275prov=Rt({token:n,providedIn:"any",factory:()=>Xe(wb)}),n.__NG_ELEMENT_ID__=-1,n})();function U(n,e=Gn.Default){const t=Ht();return null===t?Xe(n,e):_g(d(),t,Dn(n),e)}function tp(){throw new Error("invalid")}function Rb(n,e){return n<<17|e<<2}function nh(n){return n>>17&32767}function MI(n){return 2|n}function _f(n){return(131068&n)>>2}function SI(n,e){return-131069&n|e<<2}function EI(n){return 1|n}function HW(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];UA(r),o.contentQueries(2,e[s],s)}}}function Fb(n,e,t,i,r,s,o,a,c,l,u){const f=e.blueprint.slice();return f[0]=r,f[2]=76|i,(null!==u||n&&1024&n[2])&&(f[2]|=1024),_u(f),f[3]=f[15]=n,f[8]=t,f[10]=o||n&&n[10],f[11]=a||n&&n[11],f[12]=c||n&&n[12]||null,f[9]=l||n&&n[9]||null,f[6]=s,f[20]=function Age(){return mge++}(),f[21]=u,f[16]=2==e.type?n[16]:f,f}function Og(n,e,t,i,r){let s=n.data[e];if(null===s)s=function FI(n,e,t,i,r){const s=m(),o=F(),c=n.data[e]=function z7e(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,i,r),function Zr(){return Ki.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function y(){const n=Ki.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return C(s,!0),s}function Ng(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function PI(n,e,t){QA(e);try{const i=n.viewQuery;null!==i&&QI(1,i,t);const r=n.template;null!==r&&zW(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&HW(n,e),n.staticViewQueries&&QI(2,n.viewQuery,t);const s=n.components;null!==s&&function F7e(n,e){for(let t=0;t<e.length;t++)eme(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,WA()}}function Pb(n,e,t,i){const r=e[2];if(128!=(128&r)){QA(e);try{_u(e),function En(n){return Ki.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&zW(n,e,t,2,i);const o=3==(3&r);if(o){const l=n.preOrderCheckHooks;null!==l&&lg(e,l,null)}else{const l=n.preOrderHooks;null!==l&&ug(e,l,0,null),jA(e,0)}if(function Z7e(n){for(let e=hI(n);null!==e;e=fI(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(512&r[2])&&$4(s,1),r[2]|=512}}}(e),function Y7e(n){for(let e=hI(n);null!==e;e=fI(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];vu(i)&&Pb(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&HW(n,e),o){const l=n.contentCheckHooks;null!==l&&lg(e,l)}else{const l=n.contentHooks;null!==l&&ug(e,l,1),jA(e,1)}!function B7e(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)e0(~r);else{const s=r,o=t[++i],a=t[++i];S1(o,s),a(2,e[s])}}}finally{e0(-1)}}(n,e);const a=n.components;null!==a&&function k7e(n,e){for(let t=0;t<e.length;t++)J7e(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&QI(2,c,i),o){const l=n.viewCheckHooks;null!==l&&lg(e,l)}else{const l=n.viewHooks;null!==l&&ug(e,l,2),jA(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,$4(e[3],-1))}finally{WA()}}}function zW(n,e,t,i,r){const s=Js(),o=2&i;try{e0(-1),o&&e.length>22&&gW(n,e,22,!1),t(i,r)}finally{e0(s)}}function OW(n,e,t){if(G1(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function HI(n,e,t){!pc()||(function G7e(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||B8(t,e),gl(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=Ia(c);l&&K7e(e,t,c);const u=Vd(e,n,a,t);gl(u,e),null!==o&&q7e(0,a-r,u,c,0,o),l&&(wa(t.index,e)[8]=u)}}(n,e,t,$2(t,e)),128==(128&t.flags)&&function Q7e(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function Gl(){return Ki.lFrame.currentDirectiveIndex}();try{e0(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];Ql(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&jW(c,l)}}finally{e0(-1),Ql(o)}}(n,e,t))}function zI(n,e,t=$2){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function NW(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=OI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function OI(n,e,t,i,r,s,o,a,c,l){const u=22+i,f=u+r,p=function P7e(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Sr);return t}(u,f),g="function"==typeof l?l():l;return p[1]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1}}function VW(n,e,t,i){const r=YW(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&ZW(n).push(i,r.length-1))}function UW(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function GW(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,c=null;for(let l=e.directiveStart;l<i;l++){const u=r[l],f=u.inputs,p=null===s||fW(e)?null:X7e(f,s);o.push(p),a=UW(f,l,a),c=UW(u.outputs,l,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}function wu(n,e,t,i,r,s,o,a){const c=$2(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(WI(n,t,u,i,r),qh(e)&&QW(t,e.index)):3&e.type&&(i=function O7e(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function QW(n,e){const t=wa(e,n);16&t[2]||(t[2]|=32)}function NI(n,e,t,i){let r=!1;if(pc()){const s=function W7e(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];dW(t,o.selectors,!1)&&(r||(r=[]),mg(B8(t,e),n,o.type),Ia(o)?($W(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,KW(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const f=s[u];f.providersResolver&&f.providersResolver(f)}let a=!1,c=!1,l=Ng(n,e,s.length,null);for(let u=0;u<s.length;u++){const f=s[u];t.mergedAttrs=zd(t.mergedAttrs,f.hostAttrs),qW(n,t,e,l,f),$7e(l,f,o),null!==f.contentQueries&&(t.flags|=8),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=128);const p=f.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),l++}GW(n,t)}o&&function j7e(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Jt(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=zd(t.mergedAttrs,t.attrs),r}function WW(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function U7e(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(i,r,o)}}function jW(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function $W(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function $7e(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ia(e)&&(t[""]=n)}}function KW(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function qW(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=C1(r.type)),o=new D8(s,Ia(r),U);n.blueprint[i]=o,t[i]=o,WW(n,e,0,i,Ng(n,t,r.hostVars,Sr),r)}function K7e(n,e,t){const i=$2(e,n),r=NW(t),s=n[10],o=Hb(n,Fb(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}function l0(n,e,t,i,r,s){const o=$2(n,e);!function VI(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?hr(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function q7e(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const l=o[c++],u=o[c++],f=o[c++];null!==a?i.setInput(t,f,l,u):t[u]=f}}}function X7e(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function XW(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function J7e(n,e){const t=wa(e,n);if(vu(t)){const i=t[1];48&t[2]?Pb(i,t,i.template,t[8]):t[5]>0&&UI(t)}}function UI(n){for(let i=hI(n);null!==i;i=fI(i))for(let r=10;r<i.length;r++){const s=i[r];if(vu(s))if(512&s[2]){const o=s[1];Pb(o,s,o.template,s[8])}else s[5]>0&&UI(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=wa(t[i],n);vu(r)&&r[5]>0&&UI(r)}}function eme(n,e){const t=wa(e,n),i=t[1];(function tme(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),PI(i,t,t[8])}function Hb(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function GI(n){for(;n;){n[2]|=32;const e=M9(n);if(Ul(n)&&!e)return n;n=e}return null}function zb(n,e,t,i=!0){const r=e[10];r.begin&&r.begin();try{Pb(n,e,n.template,t)}catch(o){throw i&&ej(e,o),o}finally{r.end&&r.end()}}function QI(n,e,t){UA(0),e(n,t)}function YW(n){return n[7]||(n[7]=[])}function ZW(n){return n.cleanup||(n.cleanup=[])}function JW(n,e,t){return(null===n||Ia(n))&&(t=function s1(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function ej(n,e){const t=n[9],i=t?t.get(Af,null):null;i&&i.handleError(e)}function WI(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],l=n.data[o];null!==l.setInput?l.setInput(c,r,i,a):c[a]=r}}function yf(n,e,t){const i=E2(e,n);!function qQ(n,e,t){n.setValue(e,t)}(n[11],i,t)}function Ob(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Dc(r,a):2==s&&(i=Dc(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Nb(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(ya(s)),Xo(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1].firstChild;null!==l&&Nb(c[1],c,l,i)}const o=t.type;if(8&o)Nb(n,e,t.child,i);else if(32&o){const a=uI(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=oW(e,t);if(Array.isArray(a))i.push(...a);else{const c=M9(e[16]);Nb(c[1],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class E9{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Nb(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Xo(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(gI(e,i),bg(t,i))}this._attachedToViewContainer=!1}YQ(this._lView[1],this._lView)}onDestroy(e){VW(this._lView[1],this._lView,null,e)}markForCheck(){GI(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){zb(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Jt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Hge(n,e){S9(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Jt(902,!1);this._appRef=e}}class nme extends E9{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;zb(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class jI extends Xi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=fr(e);return new T9(t,this.ngModule)}}function tj(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class rme{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){const r=this.injector.get(e,Z4,i);return r!==Z4||t===Z4?r:this.parentInjector.get(e,t,i)}}class T9 extends Br{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function i7e(n){return n.map(n7e).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return tj(this.componentDef.inputs)}get outputs(){return tj(this.componentDef.outputs)}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof Ee?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new rme(e,s):e,a=o.get(F3,null);if(null===a)throw new Jt(407,!1);const c=o.get(pf,null),l=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",f=i?function H7e(n,e,t){return n.selectRootElement(e,t===ha.ShadowDom)}(l,i,this.componentDef.encapsulation):pI(a.createRenderer(null,this.componentDef),u,function ime(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),p=this.componentDef.onPush?288:272,g=OI(0,null,null,1,0,null,null,null,null,null),v=Fb(null,g,null,p,null,null,a,l,c,o,null);let _,w;QA(v);try{const b=function ame(n,e,t,i,r,s){const o=t[1];t[22]=n;const c=Og(o,22,2,"#host",null),l=c.mergedAttrs=e.hostAttrs;null!==l&&(Ob(c,l,!0),null!==n&&(dg(r,n,l),null!==c.classes&&yI(r,n,c.classes),null!==c.styles&&lW(r,n,c.styles)));const u=i.createRenderer(n,e),f=Fb(t,NW(e),null,e.onPush?32:16,t[22],c,i,u,s||null,null,null);return o.firstCreatePass&&(mg(B8(c,t),o,e.type),$W(o,c),KW(c,t.length,1)),Hb(t,f),t[22]=f}(f,this.componentDef,v,a,l);if(f)if(i)dg(l,f,["ng-version",a0.full]);else{const{attrs:x,classes:M}=function r7e(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!th(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);x&&dg(l,f,x),M&&M.length>0&&yI(l,f,M.join(" "))}if(w=T8(g,22),void 0!==t){const x=w.projection=[];for(let M=0;M<this.ngContentSelectors.length;M++){const E=t[M];x.push(null!=E?Array.from(E):null)}}_=function cme(n,e,t,i){const r=t[1],s=function V7e(n,e,t){const i=d();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),qW(n,i,e,Ng(n,e,1,null),t),GW(n,i));const r=Vd(e,n,i.directiveStart,i);gl(r,e);const s=$2(i,e);return s&&gl(s,e),r}(r,t,e);if(n[8]=t[8]=s,null!==i)for(const a of i)a(s,e);if(e.contentQueries){const a=d();e.contentQueries(1,s,a.directiveStart)}const o=d();return!r.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(e0(o.index),WW(t[1],o,0,o.directiveStart,o.directiveEnd,e),jW(e,s)),s}(b,this.componentDef,v,[lme]),PI(g,v,null)}finally{WA()}return new ome(this.componentType,_,gc(w,v),v,w)}}class ome extends class uo{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new nme(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;WI(s[1],s,r,e,t),QW(s,this._tNode.index)}}get injector(){return new af(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function lme(){const n=d();cg(Ht()[1],n)}function jt(n){let e=function nj(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Ia(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Jt(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=$I(n.inputs),o.declaredInputs=$I(n.declaredInputs),o.outputs=$I(n.outputs);const a=r.hostBindings;a&&dme(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&hme(n,c),l&&fme(n,l),Fo(n.inputs,r.inputs),Fo(n.declaredInputs,r.declaredInputs),Fo(n.outputs,r.outputs),Ia(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===jt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function ume(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=zd(r.hostAttrs,t=zd(t,r.hostAttrs))}}(i)}function $I(n){return n===U4?{}:n===Yr?[]:n}function hme(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function fme(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function dme(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let Vb=null;function np(){if(!Vb){const n=zs.Symbol;if(n&&n.iterator)Vb=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Vb=i)}}}return Vb}function L9(n){return!!KI(n)&&(Array.isArray(n)||!(n instanceof Map)&&np()in n)}function KI(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function u0(n,e,t){return n[e]=t}function ml(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ip(n,e,t,i){const r=ml(n,e,t);return ml(n,e+1,i)||r}function a4(n,e,t,i,r,s){const o=ip(n,e,t,i);return ip(n,e+2,r,s)||o}function Jr(n,e,t,i){const r=Ht();return ml(r,Pn(),e)&&(Pr(),l0(o1(),r,n,e,t,i)),Jr}function Ug(n,e,t,i){return ml(n,Pn(),t)?e+hr(t)+i:Sr}function Gg(n,e,t,i,r,s){const a=ip(n,gn(),t,r);return ri(2),a?e+hr(t)+i+hr(r)+s:Sr}function Qg(n,e,t,i,r,s,o,a){const l=function Ub(n,e,t,i,r){const s=ip(n,e,t,i);return ml(n,e+2,r)||s}(n,gn(),t,r,o);return ri(3),l?e+hr(t)+i+hr(r)+s+hr(o)+a:Sr}function Dt(n,e,t,i,r,s,o,a){const c=Ht(),l=Pr(),u=n+22,f=l.firstCreatePass?function wme(n,e,t,i,r,s,o,a,c){const l=e.consts,u=Og(e,n,4,o||null,K2(l,a));NI(e,t,u,K2(l,c)),cg(e,u);const f=u.tViews=OI(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,u),f.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,r,s,o):l.data[u];C(f,!1);const p=c[11].createComment("");Lb(l,c,p,f),gl(p,c),Hb(c,c[u]=XW(p,c,p,f)),T3(f)&&HI(l,c,f),null!=o&&zI(c,f,a)}function Si(n){return Au(function ye(){return Ki.lFrame.contextLView}(),22+n)}function ge(n,e,t){const i=Ht();return ml(i,Pn(),e)&&wu(Pr(),o1(),i,n,e,i[11],t,!1),ge}function qI(n,e,t,i,r){const o=r?"class":"style";WI(n,t,e.inputs[o],o,i)}function B(n,e,t,i){const r=Ht(),s=Pr(),o=22+n,a=r[11],c=r[o]=pI(a,e,function _D(){return Ki.lFrame.currentNamespace}()),l=s.firstCreatePass?function xme(n,e,t,i,r,s,o){const a=e.consts,l=Og(e,n,2,r,K2(a,s));return NI(e,t,l,K2(a,o)),null!==l.attrs&&Ob(l,l.attrs,!1),null!==l.mergedAttrs&&Ob(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,0,e,t,i):s.data[o];C(l,!0);const u=l.mergedAttrs;null!==u&&dg(a,c,u);const f=l.classes;null!==f&&yI(a,c,f);const p=l.styles;return null!==p&&lW(a,c,p),64!=(64&l.flags)&&Lb(s,r,c,l),0===function q2(){return Ki.lFrame.elementDepthCount}()&&gl(c,r),function Jh(){Ki.lFrame.elementDepthCount++}(),T3(l)&&(HI(s,r,l),OW(s,l,r)),null!==i&&zI(r,l),B}function z(){let n=d();F()?N():(n=n.parent,C(n,!1));const e=n;!function r4(){Ki.lFrame.elementDepthCount--}();const t=Pr();return t.firstCreatePass&&(cg(t,n),G1(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function R8(n){return 0!=(16&n.flags)}(e)&&qI(t,e,Ht(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function fg(n){return 0!=(32&n.flags)}(e)&&qI(t,e,Ht(),e.stylesWithoutHost,!1),z}function Ue(n,e,t,i){return B(n,e,t,i),z(),Ue}function Ls(n,e,t){const i=Ht(),r=Pr(),s=n+22,o=r.firstCreatePass?function Cme(n,e,t,i,r){const s=e.consts,o=K2(s,i),a=Og(e,n,8,"ng-container",o);return null!==o&&Ob(a,o,!0),NI(e,t,a,K2(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];C(o,!0);const a=i[s]=i[11].createComment("");return Lb(r,i,a,o),gl(a,i),T3(o)&&(HI(r,i,o),OW(r,o,i)),null!=t&&zI(i,o),Ls}function Ds(){let n=d();const e=Pr();return F()?N():(n=n.parent,C(n,!1)),e.firstCreatePass&&(cg(e,n),G1(n)&&e.queries.elementEnd(n)),Ds}function s2(n,e,t){return Ls(n,e,t),Ds(),s2}function no(){return Ht()}function I9(n){return!!n&&"function"==typeof n.then}function fj(n){return!!n&&"function"==typeof n.subscribe}const XI=fj;function Kt(n,e,t,i){const r=Ht(),s=Pr(),o=d();return dj(s,r,r[11],o,n,e,0,i),Kt}function YI(n,e){const t=d(),i=Ht(),r=Pr();return dj(r,i,JW(rf(r.data),t,i),t,n,e),YI}function dj(n,e,t,i,r,s,o,a){const c=T3(i),u=n.firstCreatePass&&ZW(n),f=e[8],p=YW(e);let g=!0;if(3&i.type||a){const w=$2(i,e),b=a?a(w):w,x=p.length,M=a?I=>a(ya(I[i.index])):i.index;let E=null;if(!a&&c&&(E=function Mme(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==E)(E.__ngLastListenerFn__||E).__ngNextListenerFn__=s,E.__ngLastListenerFn__=s,g=!1;else{s=gj(i,e,f,s,!1);const I=t.listen(b,r,s);p.push(s,I),u&&u.push(r,M,x,x+1)}}else s=gj(i,e,f,s,!1);const v=i.outputs;let _;if(g&&null!==v&&(_=v[r])){const w=_.length;if(w)for(let b=0;b<w;b+=2){const k=e[_[b]][_[b+1]].subscribe(s),O=p.length;p.push(s,k),u&&u.push(r,i.index,O,-(O+1))}}}function pj(n,e,t,i){try{return!1!==t(i)}catch(r){return ej(n,r),!1}}function gj(n,e,t,i,r){return function s(o){if(o===Function)return i;GI(2&n.flags?wa(n.index,e):e);let c=pj(e,0,i,o),l=s.__ngNextListenerFn__;for(;l;)c=pj(e,0,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function Ft(n=1){return function mD(n){return(Ki.lFrame.contextLView=function AD(n,e){for(;n>0;)e=e[15],n--;return e}(n,Ki.lFrame.contextLView))[8]}(n)}function Sme(n,e){let t=null;const i=function Zge(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?dW(n,s,!0):t7e(i,s))return r}else t=r}return t}function T1(n){const e=Ht()[16][6];if(!e.projection){const i=e.projection=z8(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?Sme(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Do(n,e=0,t){const i=Ht(),r=Pr(),s=Og(r,22+n,16,null,t||null);null===s.projection&&(s.projection=e),N(),64!=(64&s.flags)&&function Wge(n,e,t){cW(e[11],0,e,t,ZQ(n,t,e),nW(t.parent||e[6],t,e))}(r,i,s)}function Yl(n,e,t){return Ur(n,"",e,"",t),Yl}function Ur(n,e,t,i,r){const s=Ht(),o=Ug(s,e,t,i);return o!==Sr&&wu(Pr(),o1(),s,n,o,s[11],r,!1),Ur}function Cj(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?nh(s):_f(s),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];Lme(n[a],e)&&(c=!0,n[a+1]=i?EI(u):MI(u)),a=i?nh(u):_f(u)}c&&(n[t+1]=i?MI(s):EI(s))}function Lme(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Qd(n,e)>=0}const o2={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Mj(n){return n.substring(o2.key,o2.keyEnd)}function Dme(n){return n.substring(o2.value,o2.valueEnd)}function Sj(n,e){const t=o2.textEnd;return t===e?-1:(e=o2.keyEnd=function Bme(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,o2.key=e,t),Xg(n,e,t))}function Ej(n,e){const t=o2.textEnd;let i=o2.key=Xg(n,e,t);return t===i?-1:(i=o2.keyEnd=function kme(n,e,t){let i;for(;e<t&&(45===(i=n.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(n,i,t),i=Lj(n,i,t),i=o2.value=Xg(n,i,t),i=o2.valueEnd=function Fme(n,e,t){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<t;){const c=n.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=Dj(n,c,o,t):e===o-4&&85===s&&82===r&&76===i&&40===c?a=o=Dj(n,41,o,t):c>32&&(a=o),s=r,r=i,i=-33&c}return a}(n,i,t),Lj(n,i,t))}function Tj(n){o2.key=0,o2.keyEnd=0,o2.value=0,o2.valueEnd=0,o2.textEnd=n.length}function Xg(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Lj(n,e,t,i){return(e=Xg(n,e,t))<t&&e++,e}function Dj(n,e,t,i){let r=-1,s=t;for(;s<i;){const o=n.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function H3(n,e,t){return ih(n,e,t,!1),H3}function $r(n,e){return ih(n,e,null,!0),$r}function c4(n){rh(Bj,Pme,n,!1)}function Pme(n,e){for(let t=function Rme(n){return Tj(n),Ej(n,Xg(n,0,o2.textEnd))}(e);t>=0;t=Ej(e,t))Bj(n,Mj(e),Dme(e))}function rp(n){rh(jl,h0,n,!0)}function h0(n,e){for(let t=function Ime(n){return Tj(n),Sj(n,Xg(n,0,o2.textEnd))}(e);t>=0;t=Sj(e,t))jl(n,Mj(e),!0)}function ih(n,e,t,i){const r=Ht(),s=Pr(),o=ri(2);s.firstUpdatePass&&Rj(s,n,o,i),e!==Sr&&ml(r,o,e)&&kj(s,s.data[Js()],r,r[11],n,r[o+1]=function Gme(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Eo($l(n)))),n}(e,t),i,o)}function rh(n,e,t,i){const r=Pr(),s=ri(2);r.firstUpdatePass&&Rj(r,null,s,i);const o=Ht();if(t!==Sr&&ml(o,s,t)){const a=r.data[Js()];if(Pj(a,i)&&!Ij(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=Dc(c,t||"")),qI(r,a,o,t,i)}else!function Ume(n,e,t,i,r,s,o,a){r===Sr&&(r=Yr);let c=0,l=0,u=0<r.length?r[0]:null,f=0<s.length?s[0]:null;for(;null!==u||null!==f;){const p=c<r.length?r[c+1]:void 0,g=l<s.length?s[l+1]:void 0;let _,v=null;u===f?(c+=2,l+=2,p!==g&&(v=f,_=g)):null===f||null!==u&&u<f?(c+=2,v=u):(l+=2,v=f,_=g),null!==v&&kj(n,e,t,i,v,_,o,a),u=c<r.length?r[c]:null,f=l<s.length?s[l]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function Vme(n,e,t){if(null==t||""===t)return Yr;const i=[],r=$l(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function Ij(n,e){return e>=n.expandoStartIndex}function Rj(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Js()],o=Ij(n,t);Pj(s,i)&&null===e&&!o&&(e=!1),e=function Hme(n,e,t,i){const r=rf(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=R9(t=ZI(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=ZI(r,n,e,t,i),null===s){let c=function zme(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==_f(i))return n[nh(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=ZI(null,n,e,c[1],i),c=R9(c,e.attrs,i),function Ome(n,e,t,i){n[nh(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function Nme(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=R9(i,n[s].hostAttrs,t);return R9(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function Eme(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=nh(o),c=_f(o);n[i]=t;let u,l=!1;if(Array.isArray(t)){const f=t;u=f[1],(null===u||Qd(f,u)>0)&&(l=!0)}else u=t;if(r)if(0!==c){const p=nh(n[a+1]);n[i+1]=Rb(p,a),0!==p&&(n[p+1]=SI(n[p+1],i)),n[a+1]=function x7e(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Rb(a,0),0!==a&&(n[a+1]=SI(n[a+1],i)),a=i;else n[i+1]=Rb(c,0),0===a?a=i:n[c+1]=SI(n[c+1],i),c=i;l&&(n[i+1]=MI(n[i+1])),Cj(n,u,i,!0),Cj(n,u,i,!1),function Tme(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Qd(s,e)>=0&&(t[i+1]=EI(t[i+1]))}(e,u,n,i,s),o=Rb(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function ZI(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=R9(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function R9(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),jl(n,o,!!t||e[++s]))}return void 0===n?null:n}function Bj(n,e,t){jl(n,e,$l(t))}function kj(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1];Gb(function LW(n){return 1==(1&n)}(l)?Fj(c,e,t,r,_f(l),o):void 0)||(Gb(s)||function TW(n){return 2==(2&n)}(l)&&(s=Fj(c,null,t,r,a,o)),function $ge(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:P3.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=P3.Important),n.setStyle(t,i,r,s))}}(i,o,E2(Js(),t),r,s))}function Fj(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,f=null===u;let p=t[r+1];p===Sr&&(p=f?Yr:void 0);let g=f?s9(p,i):u===i?p:void 0;if(l&&!Gb(g)&&(g=s9(c,i)),Gb(g)&&(a=g,o))return a;const v=n[r+1];r=o?nh(v):_f(v)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=s9(c,i))}return a}function Gb(n){return void 0!==n}function Pj(n,e){return 0!=(n.flags&(e?16:32))}function H(n,e=""){const t=Ht(),i=Pr(),r=n+22,s=i.firstCreatePass?Og(i,r,1,e,null):i.data[r],o=t[r]=function dI(n,e){return n.createText(e)}(t[11],e);Lb(i,t,o,s),C(s,!1)}function Zl(n){return Nn("",n,""),Zl}function Nn(n,e,t){const i=Ht(),r=Ug(i,n,e,t);return r!==Sr&&yf(i,Js(),r),Nn}function z3(n,e,t,i,r){const s=Ht(),o=Gg(s,n,e,t,i,r);return o!==Sr&&yf(s,Js(),o),z3}function JI(n,e,t,i,r,s,o){const a=Ht(),c=Qg(a,n,e,t,i,r,s,o);return c!==Sr&&yf(a,Js(),c),JI}function B9(n,e,t,i,r,s,o,a,c){const l=Ht(),u=function Wg(n,e,t,i,r,s,o,a,c,l){const f=a4(n,gn(),t,r,o,c);return ri(4),f?e+hr(t)+i+hr(r)+s+hr(o)+a+hr(c)+l:Sr}(l,n,e,t,i,r,s,o,a,c);return u!==Sr&&yf(l,Js(),u),B9}function ka(n,e,t){rh(jl,h0,Ug(Ht(),n,e,t),!0)}function Qb(n,e,t,i,r){rh(jl,h0,Gg(Ht(),n,e,t,i,r),!0)}function Uj(n,e,t,i,r,s,o,a,c,l,u,f,p,g,v,_,w){rh(jl,h0,function qg(n,e,t,i,r,s,o,a,c,l,u,f,p,g,v,_,w,b){const x=gn();let M=a4(n,x,t,r,o,c);return M=a4(n,x+4,u,p,v,w)||M,ri(8),M?e+hr(t)+i+hr(r)+s+hr(o)+a+hr(c)+l+hr(u)+f+hr(p)+g+hr(v)+_+hr(w)+b:Sr}(Ht(),n,e,t,i,r,s,o,a,c,l,u,f,p,g,v,_,w),!0)}function k9(n,e,t,i,r){return ih(n,Ug(Ht(),e,t,i),r,!1),k9}function sp(n,e,t){const i=Ht();return ml(i,Pn(),e)&&wu(Pr(),o1(),i,n,e,i[11],t,!0),sp}function eR(n,e,t){const i=Ht();if(ml(i,Pn(),e)){const s=Pr(),o=o1();wu(s,o,i,n,e,JW(rf(s.data),o,i),t,!0)}return eR}const op=void 0;var oAe=["en",[["a","p"],["AM","PM"],op],[["AM","PM"],op,op],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],op,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],op,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",op,"{1} 'at' {0}",op],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function sAe(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Yg={};function Jl(n){const e=function aAe(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=Zj(e);if(t)return t;const i=e.split("-")[0];if(t=Zj(i),t)return t;if("en"===i)return oAe;throw new Jt(701,!1)}function Zj(n){return n in Yg||(Yg[n]=zs.ng&&zs.ng.common&&zs.ng.common.locales&&zs.ng.common.locales[n]),Yg[n]}var oi=(()=>((oi=oi||{})[oi.LocaleId=0]="LocaleId",oi[oi.DayPeriodsFormat=1]="DayPeriodsFormat",oi[oi.DayPeriodsStandalone=2]="DayPeriodsStandalone",oi[oi.DaysFormat=3]="DaysFormat",oi[oi.DaysStandalone=4]="DaysStandalone",oi[oi.MonthsFormat=5]="MonthsFormat",oi[oi.MonthsStandalone=6]="MonthsStandalone",oi[oi.Eras=7]="Eras",oi[oi.FirstDayOfWeek=8]="FirstDayOfWeek",oi[oi.WeekendRange=9]="WeekendRange",oi[oi.DateFormat=10]="DateFormat",oi[oi.TimeFormat=11]="TimeFormat",oi[oi.DateTimeFormat=12]="DateTimeFormat",oi[oi.NumberSymbols=13]="NumberSymbols",oi[oi.NumberFormats=14]="NumberFormats",oi[oi.CurrencyCode=15]="CurrencyCode",oi[oi.CurrencySymbol=16]="CurrencySymbol",oi[oi.CurrencyName=17]="CurrencyName",oi[oi.Currencies=18]="Currencies",oi[oi.Directionality=19]="Directionality",oi[oi.PluralCase=20]="PluralCase",oi[oi.ExtraData=21]="ExtraData",oi))();const Zg="en-US";let Jj=Zg;function iR(n,e,t,i,r){if(n=Dn(n),Array.isArray(n))for(let s=0;s<n.length;s++)iR(n[s],e,t,i,r);else{const s=Pr(),o=Ht();let a=T(n)?n:Dn(n.provide),c=Nt(n);const l=d(),u=1048575&l.providerIndexes,f=l.directiveStart,p=l.providerIndexes>>20;if(T(n)||!n.multi){const g=new D8(c,r,U),v=sR(a,e,r?u:u+p,f);-1===v?(mg(B8(l,o),s,a),rR(s,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(g),o.push(g)):(t[v]=g,o[v]=g)}else{const g=sR(a,e,u+p,f),v=sR(a,e,u,u+p),_=g>=0&&t[g],w=v>=0&&t[v];if(r&&!w||!r&&!_){mg(B8(l,o),s,a);const b=function r9e(n,e,t,i,r){const s=new D8(n,t,U);return s.multi=[],s.index=e,s.componentProviders=0,C$(s,r,i&&!t),s}(r?i9e:n9e,t.length,r,i,c);!r&&w&&(t[v].providerFactory=b),rR(s,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),t.push(b),o.push(b)}else rR(s,n,g>-1?g:v,C$(t[r?v:g],c,!r&&i));!r&&i&&w&&t[v].componentProviders++}}}function rR(n,e,t,i){const r=T(e),s=function S(n){return!!n.useClass}(e);if(r||s){const c=(s?Dn(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function C$(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function sR(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function n9e(n,e,t,i){return oR(this.multi,[])}function i9e(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Vd(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),oR(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],oR(r,s);return s}function oR(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function rr(n,e=[]){return t=>{t.providersResolver=(i,r)=>function t9e(n,e,t){const i=Pr();if(i.firstCreatePass){const r=Ia(n);iR(t,i.data,i.blueprint,r,!0),iR(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class ap{}class M${}class S$ extends ap{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jI(this);const i=Hi(e);this._bootstrapComponents=vf(i.bootstrap),this._r3Injector=yW(e,t,[{provide:ap,useValue:this},{provide:Xi,useValue:this.componentFactoryResolver}],Eo(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class aR extends M${constructor(e){super(),this.moduleType=e}create(e){return new S$(this.moduleType,e)}}class o9e extends ap{constructor(e,t,i){super(),this.componentFactoryResolver=new jI(this),this.instance=null;const r=new De([...e,{provide:ap,useValue:this},{provide:Xi,useValue:this.componentFactoryResolver}],t||se(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function qb(n,e,t=null){return new o9e(n,e,t).injector}let a9e=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=Cb(0,t.type),r=i.length>0?qb([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Rt({token:n,providedIn:"environment",factory:()=>new n(Xe(Ee))}),n})();function E$(n){n.getStandaloneInjector=e=>e.get(a9e).getOrCreateStandaloneInjector(n)}function bu(n,e,t){const i=vt()+n,r=Ht();return r[i]===Sr?u0(r,i,t?e.call(t):e()):function D9(n,e){return n[e]}(r,i)}function xu(n,e,t,i){return F$(Ht(),vt(),n,e,t,i)}function N9(n,e){const t=n[e];return t===Sr?void 0:t}function F$(n,e,t,i,r,s){const o=e+t;return ml(n,o,r)?u0(n,o+1,s?i.call(s,r):i(r)):N9(n,o+1)}function P$(n,e,t,i,r,s,o){const a=e+t;return ip(n,a,r,s)?u0(n,a+2,o?i.call(o,r,s):i(r,s)):N9(n,a+2)}function zi(n,e){const t=Pr();let i;const r=n+22;t.firstCreatePass?(i=function x9e(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=C1(i.type)),o=hc(U);try{const a=gg(!1),c=s();return gg(a),function bme(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Ht(),r,c),c}finally{hc(o)}}function Er(n,e,t){const i=n+22,r=Ht(),s=Au(r,i);return V9(r,i)?F$(r,vt(),e,s.transform,t,s):s.transform(t)}function O3(n,e,t,i){const r=n+22,s=Ht(),o=Au(s,r);return V9(s,r)?P$(s,vt(),e,o.transform,t,i,o):o.transform(t,i)}function V9(n,e){return n[1].data[e].pure}function lR(n){return e=>{setTimeout(n,void 0,e)}}const sr=class E9e extends $e{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=lR(s),r&&(r=lR(r)),o&&(o=lR(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Te&&e.add(a),a}};function T9e(){return this._results[np()]()}class Jg{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=np(),i=Jg.prototype;i[t]||(i[t]=T9e)}get changes(){return this._changes||(this._changes=new sr)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=Wl(e);(this._changesDetected=!function SD(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let a2=(()=>{class n{}return n.__NG_ELEMENT_ID__=I9e,n})();const L9e=a2,D9e=class extends L9e{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=Fb(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),PI(i,r,e),new E9(r)}};function I9e(){return Xb(d(),Ht())}function Xb(n,e){return 4&n.type?new D9e(e,n,gc(n,e)):null}let Nc=(()=>{class n{}return n.__NG_ELEMENT_ID__=R9e,n})();function R9e(){return U$(d(),Ht())}const B9e=Nc,N$=class extends B9e{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return gc(this._hostTNode,this._hostLView)}get injector(){return new af(this._hostTNode,this._hostLView)}get parentInjector(){const e=k8(this._hostTNode,this._hostLView);if(qA(e)){const t=Nd(e,this._hostLView),i=Od(e);return new af(t[1].data[i+8],t)}return new af(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=V$(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function H8(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const f=t||{};a=f.index,i=f.injector,r=f.projectableNodes,s=f.environmentInjector||f.ngModuleRef}const c=o?e:new T9(fr(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const p=(o?l:this.parentInjector).get(Ee,null);p&&(s=p)}const u=c.create(l,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function L8(n){return Xo(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const f=i[3],p=new N$(f,f[6],f[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function Oge(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],qw(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function Nge(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,o,s);const a=vI(s,o),c=i[11],l=Tb(c,o[7]);return null!==l&&function Pge(n,e,t,i,r,s){i[0]=r,i[6]=e,S9(n,i,t,1,r,s)}(r,o[6],c,i,l,a),e.attachToViewContainerRef(),qw(uR(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=V$(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=gI(this._lContainer,t);i&&(bg(uR(this._lContainer),t),YQ(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=gI(this._lContainer,t);return i&&null!=bg(uR(this._lContainer),t)?new E9(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function V$(n){return n[8]}function uR(n){return n[8]||(n[8]=[])}function U$(n,e){let t;const i=e[n.index];if(Xo(i))t=i;else{let r;if(8&n.type)r=ya(i);else{const s=e[11];r=s.createComment("");const o=$2(n,e);ep(s,Tb(s,o),r,function Qge(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=XW(i,e,r,n),Hb(e,t)}return new N$(t,n,e)}class hR{constructor(e){this.queryList=e,this.matches=null}clone(){return new hR(this.queryList)}setDirty(){this.queryList.setDirty()}}class fR{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new fR(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==$$(e,t).matches&&this.queries[t].setDirty()}}class G${constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class dR{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new dR(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class pR{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new pR(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,P9e(t,s)),this.matchTNodeWithReadOption(e,t,yg(t,e,s,!1,!1))}else i===a2?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,yg(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===mn||r===Nc||r===a2&&4&t.type)this.addMatch(t.index,-2);else{const s=yg(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function P9e(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function z9e(n,e,t,i){return-1===t?function H9e(n,e){return 11&n.type?gc(n,e):4&n.type?Xb(n,e):null}(e,n):-2===t?function O9e(n,e,t){return t===mn?gc(e,n):t===a2?Xb(e,n):t===Nc?U$(e,n):void 0}(n,e,i):Vd(n,n[1],t,e)}function Q$(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:z9e(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function gR(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=Q$(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let f=10;f<u.length;f++){const p=u[f];p[17]===p[3]&&gR(p[1],p,l,i)}if(null!==u[9]){const f=u[9];for(let p=0;p<f.length;p++){const g=f[p];gR(g[1],g,l,i)}}}}}return i}function Gi(n){const e=Ht(),t=Pr(),i=sf();UA(i+1);const r=$$(t,i);if(n.dirty&&function Zh(n){return 4==(4&n[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?gR(t,e,i,[]):Q$(t,e,r,i);n.reset(s,Qo),n.notifyOnChanges()}return!0}return!1}function _o(n,e,t){const i=Pr();i.firstCreatePass&&(j$(i,new G$(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),W$(i,Ht(),e)}function a1(n,e,t,i){const r=Pr();if(r.firstCreatePass){const s=d();j$(r,new G$(e,t,i),s.index),function V9e(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}W$(r,Ht(),t)}function Qi(){return function N9e(n,e){return n[19].queries[e].queryList}(Ht(),sf())}function W$(n,e,t){const i=new Jg(4==(4&t));VW(n,e,i,i.destroy),null===e[19]&&(e[19]=new fR),e[19].queries.push(new hR(i))}function j$(n,e,t){null===n.queries&&(n.queries=new dR),n.queries.track(new pR(e,t))}function $$(n,e){return n.queries.getByIndex(e)}function X2(n,e){return Xb(n,e)}function Zb(...n){}const G9=new zt("Application Initializer");let Jb=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Zb,this.reject=Zb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(I9(s))t.push(s);else if(XI(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Xe(G9,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Q9=new zt("AppId",{providedIn:"root",factory:function fK(){return`${yR()}${yR()}${yR()}`}});function yR(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const dK=new zt("Platform Initializer"),Cu=new zt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ex=new zt("appBootstrapListener"),l4=new zt("AnimationModuleType");let ave=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const f0=new zt("LocaleId",{providedIn:"root",factory:()=>Os(f0,Gn.Optional|Gn.SkipSelf)||function cve(){return typeof $localize<"u"&&$localize.locale||Zg}()});class uve{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let wR=(()=>{class n{compileModuleSync(t){return new aR(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=vf(Hi(t).declarations).reduce((o,a)=>{const c=fr(a);return c&&o.push(new T9(c)),o},[]);return new uve(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dve=(()=>Promise.resolve(0))();function bR(n){typeof Zone>"u"?dve.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class cr{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sr(!1),this.onMicrotaskEmpty=new sr(!1),this.onStable=new sr(!1),this.onError=new sr(!1),typeof Zone>"u")throw new Jt(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function pve(){let n=zs.requestAnimationFrame,e=zs.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Ave(n){const e=()=>{!function mve(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(zs,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,CR(n),n.isCheckStableRunning=!0,xR(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),CR(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return mK(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),AK(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return mK(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),AK(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,CR(n),xR(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cr.isInAngularZone())throw new Jt(909,!1)}static assertNotInAngularZone(){if(cr.isInAngularZone())throw new Jt(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,gve,Zb,Zb);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const gve={};function xR(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function CR(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function mK(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function AK(n){n._nesting--,xR(n)}class vve{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sr,this.onMicrotaskEmpty=new sr,this.onStable=new sr,this.onError=new sr}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const vK=new zt(""),tx=new zt("");let ER,MR=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ER||(function _ve(n){ER=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cr.assertNotInAngularZone(),bR(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bR(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(Xe(cr),Xe(SR),Xe(tx))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),SR=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return ER?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),n6=null;const _K=new zt("AllowMultipleToken"),TR=new zt("PlatformDestroyListeners");class yK{constructor(e,t){this.name=e,this.token=t}}function bK(n,e,t=[]){const i=`Platform: ${e}`,r=new zt(i);return(s=[])=>{let o=LR();if(!o||o.injector.get(_K,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function bve(n){if(n6&&!n6.get(_K,!1))throw new Jt(400,!1);n6=n;const e=n.get(CK);(function wK(n){const e=n.get(dK,null);e&&e.forEach(t=>t())})(n)}(function xK(n=[],e){return Oc.create({name:e,providers:[{provide:D,useValue:"platform"},{provide:TR,useValue:new Set([()=>n6=null])},...n]})}(a,i))}return function Cve(n){const e=LR();if(!e)throw new Jt(401,!1);return e}()}}function LR(){return n6?.get(CK)??null}let CK=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function SK(n,e){let t;return t="noop"===n?new vve:("zone.js"===n?void 0:n)||new cr(e),t}(i?.ngZone,function MK(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:cr,useValue:r}];return r.run(()=>{const o=Oc.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),c=a.injector.get(Af,null);if(!c)throw new Jt(402,!1);return r.runOutsideAngular(()=>{const l=r.onError.subscribe({next:u=>{c.handleError(u)}});a.onDestroy(()=>{nx(this._modules,a),l.unsubscribe()})}),function EK(n,e,t){try{const i=t();return I9(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(c,r,()=>{const l=a.injector.get(Jb);return l.runInitializers(),l.donePromise.then(()=>(function e$(n){Ic(n,"Expected localeId to be defined"),"string"==typeof n&&(Jj=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(f0,Zg)||Zg),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=TK({},i);return function yve(n,e,t){const i=new aR(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(n7);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Jt(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Jt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(TR,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Xe(Oc))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function TK(n,e){return Array.isArray(e)?e.reduce(TK,n):{...n,...e}}let n7=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Se(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Se(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{cr.assertNotInAngularZone(),bR(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{cr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),l.unsubscribe()}});this.isStable=Jc(s,o.pipe(lu()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof Br;if(!this._injector.get(Jb).done)throw!r&&function M2(n){const e=fr(n)||Aa(n)||dc(n);return null!==e&&e.standalone}(t),new Jt(405,false);let o;o=r?t:this._injector.get(Xi).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function wve(n){return n.isBoundToModule}(o)?void 0:this._injector.get(ap),l=o.create(Oc.NULL,[],i||o.selector,a),u=l.location.nativeElement,f=l.injector.get(vK,null);return f?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),nx(this.components,l),f?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Jt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;nx(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ex,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>nx(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Jt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Xe(cr),Xe(Ee),Xe(Af))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let DK=!0,IK=!1;function ix(){return IK=!0,DK}let mc=(()=>{class n{}return n.__NG_ELEMENT_ID__=Eve,n})();function Eve(n){return function Tve(n,e,t){if(qh(n)&&!t){const i=wa(n.index,e);return new E9(i,i)}return 47&n.type?new E9(e[16],e):null}(d(),Ht(),16==(16&n))}class FK{constructor(){}supports(e){return L9(e)}create(e){return new kve(e)}}const Bve=(n,e)=>e;class kve{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Bve}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<HK(i,r,s)?t:i,a=HK(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let p=0;p<l;p++){const g=p<s.length?s[p]:s[p]=0,v=g+p;u<=v&&v<l&&(s[p]=g+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!L9(e))throw new Jt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function vme(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[np()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Fve(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new PK),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new PK),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Fve{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Pve{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class PK{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Pve,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HK(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class zK{constructor(){}supports(e){return e instanceof Map||KI(e)}create(){return new Hve}}class Hve{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||KI(e)))throw new Jt(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new zve(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class zve{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function OK(){return new d0([new FK])}let d0=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||OK()),deps:[[n,new s0,new I3]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Jt(901,!1)}}return n.\u0275prov=Rt({token:n,providedIn:"root",factory:OK}),n})();function NK(){return new lp([new zK])}let lp=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||NK()),deps:[[n,new s0,new I3]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Jt(901,!1)}}return n.\u0275prov=Rt({token:n,providedIn:"root",factory:NK}),n})();const Vve=bK(null,"core",[]);let Uve=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Xe(n7))},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})();function bf(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let ox=null;function p0(){return ox}const Wi=new zt("DocumentToken");let kR=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:function(){return function jve(){return Xe(VK)}()},providedIn:"platform"}),n})();const $ve=new zt("Location Initialized");let VK=(()=>{class n extends kR{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return p0().getBaseHref(this._doc)}onPopState(t){const i=p0().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=p0().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){UK()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){UK()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi))},n.\u0275prov=Rt({token:n,factory:function(){return function Kve(){return new VK(Xe(Wi))}()},providedIn:"platform"}),n})();function UK(){return!!window.history.pushState}function FR(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function GK(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function xf(n){return n&&"?"!==n[0]?"?"+n:n}let up=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:function(){return Os(WK)},providedIn:"root"}),n})();const QK=new zt("appBaseHref");let WK=(()=>{class n extends up{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Os(Wi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return FR(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+xf(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+xf(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+xf(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(kR),Xe(QK,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qve=(()=>{class n extends up{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=FR(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+xf(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+xf(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(kR),Xe(QK,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),W9=(()=>{class n{constructor(t){this._subject=new sr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=GK(jK(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+xf(i))}normalize(t){return n.stripTrailingSlash(function Yve(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,jK(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xf(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xf(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=xf,n.joinWithSlash=FR,n.stripTrailingSlash=GK,n.\u0275fac=function(t){return new(t||n)(Xe(up))},n.\u0275prov=Rt({token:n,factory:function(){return function Xve(){return new W9(Xe(up))}()},providedIn:"root"}),n})();function jK(n){return n.replace(/\/index.html$/,"")}var N3=(()=>((N3=N3||{})[N3.Decimal=0]="Decimal",N3[N3.Percent=1]="Percent",N3[N3.Currency=2]="Currency",N3[N3.Scientific=3]="Scientific",N3))(),Ac=(()=>((Ac=Ac||{})[Ac.Format=0]="Format",Ac[Ac.Standalone=1]="Standalone",Ac))(),Ns=(()=>((Ns=Ns||{})[Ns.Narrow=0]="Narrow",Ns[Ns.Abbreviated=1]="Abbreviated",Ns[Ns.Wide=2]="Wide",Ns[Ns.Short=3]="Short",Ns))(),L1=(()=>((L1=L1||{})[L1.Short=0]="Short",L1[L1.Medium=1]="Medium",L1[L1.Long=2]="Long",L1[L1.Full=3]="Full",L1))(),or=(()=>((or=or||{})[or.Decimal=0]="Decimal",or[or.Group=1]="Group",or[or.List=2]="List",or[or.PercentSign=3]="PercentSign",or[or.PlusSign=4]="PlusSign",or[or.MinusSign=5]="MinusSign",or[or.Exponential=6]="Exponential",or[or.SuperscriptingExponent=7]="SuperscriptingExponent",or[or.PerMille=8]="PerMille",or[or.Infinity=9]="Infinity",or[or.NaN=10]="NaN",or[or.TimeSeparator=11]="TimeSeparator",or[or.CurrencyDecimal=12]="CurrencyDecimal",or[or.CurrencyGroup=13]="CurrencyGroup",or))();function ax(n,e){return h4(Jl(n)[oi.DateFormat],e)}function cx(n,e){return h4(Jl(n)[oi.TimeFormat],e)}function lx(n,e){return h4(Jl(n)[oi.DateTimeFormat],e)}function u4(n,e){const t=Jl(n),i=t[oi.NumberSymbols][e];if(typeof i>"u"){if(e===or.CurrencyDecimal)return t[oi.NumberSymbols][or.Decimal];if(e===or.CurrencyGroup)return t[oi.NumberSymbols][or.Group]}return i}function KK(n){if(!n[oi.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[oi.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function h4(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function HR(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const u_e=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,j9={},h_e=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var c2=(()=>((c2=c2||{})[c2.Short=0]="Short",c2[c2.ShortGMT=1]="ShortGMT",c2[c2.Long=2]="Long",c2[c2.Extended=3]="Extended",c2))(),pr=(()=>((pr=pr||{})[pr.FullYear=0]="FullYear",pr[pr.Month=1]="Month",pr[pr.Date=2]="Date",pr[pr.Hours=3]="Hours",pr[pr.Minutes=4]="Minutes",pr[pr.Seconds=5]="Seconds",pr[pr.FractionalSeconds=6]="FractionalSeconds",pr[pr.Day=7]="Day",pr))(),Gr=(()=>((Gr=Gr||{})[Gr.DayPeriods=0]="DayPeriods",Gr[Gr.Days=1]="Days",Gr[Gr.Months=2]="Months",Gr[Gr.Eras=3]="Eras",Gr))();function f_e(n,e,t,i){let r=function w_e(n){if(YK(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return ux(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(u_e))return function b_e(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,c,l),e}(i)}const e=new Date(n);if(!YK(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Cf(t,e)||e;let a,o=[];for(;e;){if(a=h_e.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let c=r.getTimezoneOffset();i&&(c=XK(i,c),r=function y_e(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function __e(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(XK(e,r)-r))}(r,i,!0));let l="";return o.forEach(u=>{const f=function v_e(n){if(OR[n])return OR[n];let e;switch(n){case"G":case"GG":case"GGG":e=Fa(Gr.Eras,Ns.Abbreviated);break;case"GGGG":e=Fa(Gr.Eras,Ns.Wide);break;case"GGGGG":e=Fa(Gr.Eras,Ns.Narrow);break;case"y":e=Uc(pr.FullYear,1,0,!1,!0);break;case"yy":e=Uc(pr.FullYear,2,0,!0,!0);break;case"yyy":e=Uc(pr.FullYear,3,0,!1,!0);break;case"yyyy":e=Uc(pr.FullYear,4,0,!1,!0);break;case"Y":e=px(1);break;case"YY":e=px(2,!0);break;case"YYY":e=px(3);break;case"YYYY":e=px(4);break;case"M":case"L":e=Uc(pr.Month,1,1);break;case"MM":case"LL":e=Uc(pr.Month,2,1);break;case"MMM":e=Fa(Gr.Months,Ns.Abbreviated);break;case"MMMM":e=Fa(Gr.Months,Ns.Wide);break;case"MMMMM":e=Fa(Gr.Months,Ns.Narrow);break;case"LLL":e=Fa(Gr.Months,Ns.Abbreviated,Ac.Standalone);break;case"LLLL":e=Fa(Gr.Months,Ns.Wide,Ac.Standalone);break;case"LLLLL":e=Fa(Gr.Months,Ns.Narrow,Ac.Standalone);break;case"w":e=zR(1);break;case"ww":e=zR(2);break;case"W":e=zR(1,!0);break;case"d":e=Uc(pr.Date,1);break;case"dd":e=Uc(pr.Date,2);break;case"c":case"cc":e=Uc(pr.Day,1);break;case"ccc":e=Fa(Gr.Days,Ns.Abbreviated,Ac.Standalone);break;case"cccc":e=Fa(Gr.Days,Ns.Wide,Ac.Standalone);break;case"ccccc":e=Fa(Gr.Days,Ns.Narrow,Ac.Standalone);break;case"cccccc":e=Fa(Gr.Days,Ns.Short,Ac.Standalone);break;case"E":case"EE":case"EEE":e=Fa(Gr.Days,Ns.Abbreviated);break;case"EEEE":e=Fa(Gr.Days,Ns.Wide);break;case"EEEEE":e=Fa(Gr.Days,Ns.Narrow);break;case"EEEEEE":e=Fa(Gr.Days,Ns.Short);break;case"a":case"aa":case"aaa":e=Fa(Gr.DayPeriods,Ns.Abbreviated);break;case"aaaa":e=Fa(Gr.DayPeriods,Ns.Wide);break;case"aaaaa":e=Fa(Gr.DayPeriods,Ns.Narrow);break;case"b":case"bb":case"bbb":e=Fa(Gr.DayPeriods,Ns.Abbreviated,Ac.Standalone,!0);break;case"bbbb":e=Fa(Gr.DayPeriods,Ns.Wide,Ac.Standalone,!0);break;case"bbbbb":e=Fa(Gr.DayPeriods,Ns.Narrow,Ac.Standalone,!0);break;case"B":case"BB":case"BBB":e=Fa(Gr.DayPeriods,Ns.Abbreviated,Ac.Format,!0);break;case"BBBB":e=Fa(Gr.DayPeriods,Ns.Wide,Ac.Format,!0);break;case"BBBBB":e=Fa(Gr.DayPeriods,Ns.Narrow,Ac.Format,!0);break;case"h":e=Uc(pr.Hours,1,-12);break;case"hh":e=Uc(pr.Hours,2,-12);break;case"H":e=Uc(pr.Hours,1);break;case"HH":e=Uc(pr.Hours,2);break;case"m":e=Uc(pr.Minutes,1);break;case"mm":e=Uc(pr.Minutes,2);break;case"s":e=Uc(pr.Seconds,1);break;case"ss":e=Uc(pr.Seconds,2);break;case"S":e=Uc(pr.FractionalSeconds,1);break;case"SS":e=Uc(pr.FractionalSeconds,2);break;case"SSS":e=Uc(pr.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=fx(c2.Short);break;case"ZZZZZ":e=fx(c2.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=fx(c2.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=fx(c2.Long);break;default:return null}return OR[n]=e,e}(u);l+=f?f(r,t,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function ux(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function Cf(n,e){const t=function Zve(n){return Jl(n)[oi.LocaleId]}(n);if(j9[t]=j9[t]||{},j9[t][e])return j9[t][e];let i="";switch(e){case"shortDate":i=ax(n,L1.Short);break;case"mediumDate":i=ax(n,L1.Medium);break;case"longDate":i=ax(n,L1.Long);break;case"fullDate":i=ax(n,L1.Full);break;case"shortTime":i=cx(n,L1.Short);break;case"mediumTime":i=cx(n,L1.Medium);break;case"longTime":i=cx(n,L1.Long);break;case"fullTime":i=cx(n,L1.Full);break;case"short":const r=Cf(n,"shortTime"),s=Cf(n,"shortDate");i=hx(lx(n,L1.Short),[r,s]);break;case"medium":const o=Cf(n,"mediumTime"),a=Cf(n,"mediumDate");i=hx(lx(n,L1.Medium),[o,a]);break;case"long":const c=Cf(n,"longTime"),l=Cf(n,"longDate");i=hx(lx(n,L1.Long),[c,l]);break;case"full":const u=Cf(n,"fullTime"),f=Cf(n,"fullDate");i=hx(lx(n,L1.Full),[u,f])}return i&&(j9[t][e]=i),i}function hx(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function oh(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function Uc(n,e,t=0,i=!1,r=!1){return function(s,o){let a=function p_e(n,e){switch(n){case pr.FullYear:return e.getFullYear();case pr.Month:return e.getMonth();case pr.Date:return e.getDate();case pr.Hours:return e.getHours();case pr.Minutes:return e.getMinutes();case pr.Seconds:return e.getSeconds();case pr.FractionalSeconds:return e.getMilliseconds();case pr.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===pr.Hours)0===a&&-12===t&&(a=12);else if(n===pr.FractionalSeconds)return function d_e(n,e){return oh(n,3).substring(0,e)}(a,e);const c=u4(o,or.MinusSign);return oh(a,e,c,i,r)}}function Fa(n,e,t=Ac.Format,i=!1){return function(r,s){return function g_e(n,e,t,i,r,s){switch(t){case Gr.Months:return function t_e(n,e,t){const i=Jl(n),s=h4([i[oi.MonthsFormat],i[oi.MonthsStandalone]],e);return h4(s,t)}(e,r,i)[n.getMonth()];case Gr.Days:return function e_e(n,e,t){const i=Jl(n),s=h4([i[oi.DaysFormat],i[oi.DaysStandalone]],e);return h4(s,t)}(e,r,i)[n.getDay()];case Gr.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const l=function s_e(n){const e=Jl(n);return KK(e),(e[oi.ExtraData][2]||[]).map(i=>"string"==typeof i?HR(i):[HR(i[0]),HR(i[1])])}(e),u=function o_e(n,e,t){const i=Jl(n);KK(i);const s=h4([i[oi.ExtraData][0],i[oi.ExtraData][1]],e)||[];return h4(s,t)||[]}(e,r,i),f=l.findIndex(p=>{if(Array.isArray(p)){const[g,v]=p,_=o>=g.hours&&a>=g.minutes,w=o<v.hours||o===v.hours&&a<v.minutes;if(g.hours<v.hours){if(_&&w)return!0}else if(_||w)return!0}else if(p.hours===o&&p.minutes===a)return!0;return!1});if(-1!==f)return u[f]}return function Jve(n,e,t){const i=Jl(n),s=h4([i[oi.DayPeriodsFormat],i[oi.DayPeriodsStandalone]],e);return h4(s,t)}(e,r,i)[o<12?0:1];case Gr.Eras:return function n_e(n,e){return h4(Jl(n)[oi.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function fx(n){return function(e,t,i){const r=-1*i,s=u4(t,or.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case c2.Short:return(r>=0?"+":"")+oh(o,2,s)+oh(Math.abs(r%60),2,s);case c2.ShortGMT:return"GMT"+(r>=0?"+":"")+oh(o,1,s);case c2.Long:return"GMT"+(r>=0?"+":"")+oh(o,2,s)+":"+oh(Math.abs(r%60),2,s);case c2.Extended:return 0===i?"Z":(r>=0?"+":"")+oh(o,2,s)+":"+oh(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function qK(n){return ux(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function zR(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=qK(t),o=function A_e(n){const e=ux(n,0,1).getDay();return ux(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return oh(r,n,u4(i,or.MinusSign))}}function px(n,e=!1){return function(t,i){return oh(qK(t).getFullYear(),n,u4(i,or.MinusSign),e)}}const OR={};function XK(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function YK(n){return n instanceof Date&&!isNaN(n.valueOf())}const x_e=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function GR(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function tq(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let K9=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(L9(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Eo(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(U(d0),U(lp),U(mn),U(pa))},n.\u0275dir=gt({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class F_e{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let t3=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new F_e(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),rq(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{rq(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(U(Nc),U(a2),U(d0))},n.\u0275dir=gt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function rq(n,e){n.context.$implicit=e.item}let D2=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new H_e,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sq("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sq("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(U(Nc),U(a2))},n.\u0275dir=gt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class H_e{constructor(){this.$implicit=null,this.ngIf=null}}function sq(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Eo(e)}'.`)}class WR{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let mx=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=gt({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),oq=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new WR(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(U(Nc),U(a2),U(mx,9))},n.\u0275dir=gt({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),r6=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:P3.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(lp),U(pa))},n.\u0275dir=gt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),jR=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(U(Nc))},n.\u0275dir=gt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ir]}),n})();function ah(n,e){return new Jt(2100,!1)}class N_e{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class V_e{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const U_e=new V_e,G_e=new N_e;let g0=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(I9(t))return U_e;if(fj(t))return G_e;throw ah()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(U(mc,16))},n.\u0275pipe=b1({name:"async",type:n,pure:!1,standalone:!0}),n})();const K_e=new zt("DATE_PIPE_DEFAULT_TIMEZONE");let $R=(()=>{class n{constructor(t,i){this.locale=t,this.defaultTimezone=i}transform(t,i="mediumDate",r,s){if(null==t||""===t||t!=t)return null;try{return f_e(t,i,s||this.locale,r??this.defaultTimezone??void 0)}catch(o){throw ah()}}}return n.\u0275fac=function(t){return new(t||n)(U(f0,16),U(K_e,24))},n.\u0275pipe=b1({name:"date",type:n,pure:!0,standalone:!0}),n})(),KR=(()=>{class n{constructor(t){this._locale=t}transform(t,i,r){if(!function qR(n){return!(null==n||""===n||n!=n)}(t))return null;r=r||this._locale;try{return function L_e(n,e,t){return function VR(n,e,t,i,r,s,o=!1){let a="",c=!1;if(isFinite(n)){let l=function I_e(n){let i,r,s,o,a,e=Math.abs(n)+"",t=0;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))i=[0],r=1;else{for(a--;"0"===e.charAt(a);)a--;for(r-=s,i=[],o=0;s<=a;s++,o++)i[o]=Number(e.charAt(s))}return r>22&&(i=i.splice(0,21),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}(n);o&&(l=function D_e(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(l));let u=e.minInt,f=e.minFrac,p=e.maxFrac;if(s){const x=s.match(x_e);if(null===x)throw new Error(`${s} is not a valid digit info`);const M=x[1],E=x[3],I=x[5];null!=M&&(u=GR(M)),null!=E&&(f=GR(E)),null!=I?p=GR(I):null!=E&&f>p&&(p=f)}!function R_e(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen;const s=Math.min(Math.max(e,r),t);let o=s+n.integerLen,a=i[o];if(o>0){i.splice(Math.max(n.integerLen,o));for(let f=o;f<i.length;f++)i[f]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,o=s+1),i[0]=0;for(let f=1;f<o;f++)i[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[o-1]++;for(;r<Math.max(0,s);r++)i.push(0);let c=0!==s;const l=e+n.integerLen,u=i.reduceRight(function(f,p,g,v){return v[g]=(p+=f)<10?p:p-10,c&&(0===v[g]&&g>=l?v.pop():c=!1),p>=10?1:0},0);u&&(i.unshift(u),n.integerLen++)}(l,f,p);let g=l.digits,v=l.integerLen;const _=l.exponent;let w=[];for(c=g.every(x=>!x);v<u;v++)g.unshift(0);for(;v<0;v++)g.unshift(0);v>0?w=g.splice(v,g.length):(w=g,g=[0]);const b=[];for(g.length>=e.lgSize&&b.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)b.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&b.unshift(g.join("")),a=b.join(u4(t,i)),w.length&&(a+=u4(t,r)+w.join("")),_&&(a+=u4(t,or.Exponential)+"+"+_)}else a=u4(t,or.Infinity);return a=n<0&&!c?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function UR(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(";"),r=i[0],s=i[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let u=0;u<c.length;u++){const f=c.charAt(u);"0"===f?t.minFrac=t.maxFrac=u+1:"#"===f?t.maxFrac=u+1:t.posSuf+=f}const l=a.split(",");if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){const u=r.length-t.posPre.length-t.posSuf.length,f=s.indexOf("#");t.negPre=s.substring(0,f).replace(/'/g,""),t.negSuf=s.slice(f+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function PR(n,e){return Jl(n)[oi.NumberFormats][e]}(e,N3.Decimal),u4(e,or.MinusSign)),e,or.Group,or.Decimal,t)}(function XR(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),r,i)}catch(s){throw ah()}}}return n.\u0275fac=function(t){return new(t||n)(U(f0,16))},n.\u0275pipe=b1({name:"number",type:n,pure:!0,standalone:!0}),n})();let n3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})();const lq="browser";function s6(n){return n===lq}function r7(n){return"server"===n}let aye=(()=>{class n{}return n.\u0275prov=Rt({token:n,providedIn:"root",factory:()=>new cye(Xe(Wi),window)}),n})();class cye{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function lye(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=uq(this.window.history)||uq(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function uq(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class hq{}class JR extends class Eye extends class Wve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Qve(n){ox||(ox=n)}(new JR)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Tye(){return X9=X9||document.querySelector("base"),X9?X9.getAttribute("href"):null}();return null==t?null:function Lye(n){vx=vx||document.createElement("a"),vx.setAttribute("href",n);const e=vx.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){X9=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tq(document.cookie,e)}}let vx,X9=null;const gq=new zt("TRANSITION_ID"),Iye=[{provide:G9,useFactory:function Dye(n,e,t){return()=>{t.get(Jb).donePromise.then(()=>{const i=p0(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[gq,Wi,Oc],multi:!0}];let Bye=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const _x=new zt("EventManagerPlugins");let yx=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Xe(_x),Xe(cr))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();class mq{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=p0().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Aq=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),Y9=(()=>{class n extends Aq{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(vq),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(vq))}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();function vq(n){p0().remove(n)}const eB={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},tB=/%COMP%/g;function wx(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?wx(n,r,t):(r=r.replace(tB,n),t.push(r))}return t}function wq(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let bx=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new nB(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case ha.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Oye(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case ha.ShadowDom:return new Nye(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=wx(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Xe(yx),Xe(Y9),Xe(Q9))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();class nB{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(eB[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(xq(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(xq(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=eB[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=eB[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(P3.DashCase|P3.Important)?e.style.setProperty(t,i,r&P3.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&P3.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,wq(i)):this.eventManager.addEventListener(e,t,wq(i))}}function xq(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Oye extends nB{constructor(e,t,i,r){super(e),this.component=i;const s=wx(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function Pye(n){return"_ngcontent-%COMP%".replace(tB,n)}(r+"-"+i.id),this.hostAttr=function Hye(n){return"_nghost-%COMP%".replace(tB,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Nye extends nB{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=wx(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Vye=(()=>{class n extends mq{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const Cq=["alt","control","meta","shift"],Uye={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gye={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Qye=(()=>{class n extends mq{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>p0().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),Cq.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=Uye[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Cq.forEach(o=>{o!==r&&(0,Gye[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const Sq=[{provide:Cu,useValue:lq},{provide:dK,useValue:function Wye(){JR.makeCurrent()},multi:!0},{provide:Wi,useFactory:function $ye(){return function BD(n){g9=n}(document),document},deps:[]}],Kye=bK(Vve,"browser",Sq),Eq=new zt(""),Tq=[{provide:tx,useClass:class Rye{addToWindow(e){zs.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},zs.getAllAngularTestabilities=()=>e.getAllTestabilities(),zs.getAllAngularRootElements=()=>e.getAllRootElements(),zs.frameworkStabilizers||(zs.frameworkStabilizers=[]),zs.frameworkStabilizers.push(i=>{const r=zs.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?p0().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:vK,useClass:MR,deps:[cr,SR,tx]},{provide:MR,useClass:MR,deps:[cr,SR,tx]}],Lq=[{provide:D,useValue:"root"},{provide:Af,useFactory:function jye(){return new Af},deps:[]},{provide:_x,useClass:Vye,multi:!0,deps:[Wi,cr,Cu]},{provide:_x,useClass:Qye,multi:!0,deps:[Wi]},{provide:bx,useClass:bx,deps:[yx,Y9,Q9]},{provide:F3,useExisting:bx},{provide:Aq,useExisting:Y9},{provide:Y9,useClass:Y9,deps:[Wi]},{provide:yx,useClass:yx,deps:[_x,cr]},{provide:hq,useClass:Bye,deps:[]},[]];let Dq=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Q9,useValue:t.appId},{provide:gq,useExisting:Q9},Iye]}}}return n.\u0275fac=function(t){return new(t||n)(Xe(Eq,12))},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[...Lq,...Tq],imports:[n3,Uve]}),n})(),Iq=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi))},n.\u0275prov=Rt({token:n,factory:function(t){let i=null;return i=t?new t:function Xye(){return new Iq(Xe(Wi))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let Mf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:function(t){let i=null;return i=t?new(t||n):Xe(kq),i},providedIn:"root"}),n})(),kq=(()=>{class n extends Mf{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case lo.NONE:return i;case lo.HTML:return R3(i,"HTML")?$l(i):ql(this._doc,String(i)).toString();case lo.STYLE:return R3(i,"Style")?$l(i):i;case lo.SCRIPT:if(R3(i,"Script"))return $l(i);throw new Error("unsafe value used in a script context");case lo.URL:return R3(i,"URL")?$l(i):Rg(String(i));case lo.RESOURCE_URL:if(R3(i,"ResourceURL"))return $l(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function A9(n){return new pb(n)}(t)}bypassSecurityTrustStyle(t){return function VD(n){return new PD(n)}(t)}bypassSecurityTrustScript(t){return function ti(n){return new HD(n)}(t)}bypassSecurityTrustUrl(t){return function Zd(n){return new zD(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Dg(n){return new OD(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi))},n.\u0275prov=Rt({token:n,factory:function(t){let i=null;return i=t?new t:function iwe(n){return new kq(n.get(Wi))}(Xe(Oc)),i},providedIn:"root"}),n})();function Hr(n){return null!=n&&"false"!=`${n}`}function ch(n,e=0){return function rwe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function xx(n){return Array.isArray(n)?n:[n]}function Gc(n){return null==n?"":"string"==typeof n?n:`${n}px`}function hp(n){return n instanceof mn?n.nativeElement:n}function di(...n){return Es(n,O1(n))}const{isArray:swe}=Array;function sB(n){return Ut(e=>function owe(n,e){return swe(e)?n(...e):n(e)}(n,e))}const awe=["addListener","removeListener"],cwe=["addEventListener","removeEventListener"],lwe=["on","off"];function xa(n,e,t,i){if(ee(t)&&(i=t,t=void 0),i)return xa(n,e,t).pipe(sB(i));const[r,s]=function fwe(n){return ee(n.addEventListener)&&ee(n.removeEventListener)}(n)?cwe.map(o=>a=>n[o](e,a,t)):function uwe(n){return ee(n.addListener)&&ee(n.removeListener)}(n)?awe.map(Fq(n,e)):function hwe(n){return ee(n.on)&&ee(n.off)}(n)?lwe.map(Fq(n,e)):[];if(!r&&qo(n))return Ri(o=>xa(o,e,t))(Bo(n));if(!r)throw new TypeError("Invalid event target");return new Se(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function Fq(n,e){return t=>i=>n[t](e,i)}class dwe extends Te{constructor(e,t){super()}schedule(e,t=0){return this}}const Cx={setInterval(n,e,...t){const{delegate:i}=Cx;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Cx;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class oB extends dwe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return Cx.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;Cx.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ie(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Z9={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Z9;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new Te(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Z9;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Z9;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},Pq={now:()=>(Pq.delegate||Date).now(),delegate:void 0};class J9{constructor(e,t=J9.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}J9.now=Pq.now;class aB extends J9{constructor(e,t=J9.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}new class gwe extends aB{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class pwe extends oB{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Z9.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(Z9.cancelAnimationFrame(t),e._scheduled=void 0)}});let cB,Awe=1;const Mx={};function Hq(n){return n in Mx&&(delete Mx[n],!0)}const vwe={setImmediate(n){const e=Awe++;return Mx[e]=!0,cB||(cB=Promise.resolve()),cB.then(()=>Hq(e)&&n()),e},clearImmediate(n){Hq(n)}},{setImmediate:_we,clearImmediate:ywe}=vwe,Sx={setImmediate(...n){const{delegate:e}=Sx;return(e?.setImmediate||_we)(...n)},clearImmediate(n){const{delegate:e}=Sx;return(e?.clearImmediate||ywe)(n)},delegate:void 0},lB=new class bwe extends aB{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class wwe extends oB{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Sx.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(Sx.clearImmediate(t),e._scheduled=void 0)}}),ev=new aB(oB),xwe=ev;function uB(n=0,e,t=xwe){let i=-1;return null!=e&&(cu(e)?t=e:i=e),new Se(r=>{let s=function Mwe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function zq(n,e=ev){return function Cwe(n){return sn((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(on(t,l=>{i=!0,r=l,s||Bo(n(l)).subscribe(s=on(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>uB(n,e))}function zo(n,e){return sn((t,i)=>{let r=0;t.subscribe(on(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Ua(n){return sn((e,t)=>{Bo(n).subscribe(on(t,()=>t.complete(),et)),!t.closed&&e.subscribe(t)})}let hB;try{hB=typeof Intl<"u"&&Intl.v8BreakIterator}catch{hB=!1}let tv,Ex,fp,fB,V3=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?s6(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!hB)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Xe(Cu))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function a6(n){return function Swe(){if(null==tv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>tv=!0}))}finally{tv=tv||!1}return tv}()?n:!!n.capture}function Nq(){if(null==fp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return fp=!1,fp;if("scrollBehavior"in document.documentElement.style)fp=!0;else{const n=Element.prototype.scrollTo;fp=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return fp}function nv(){if("object"!=typeof document||!document)return 0;if(null==Ex){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),Ex=0,0===n.scrollLeft&&(n.scrollLeft=1,Ex=0===n.scrollLeft?1:2),n.remove()}return Ex}function Vq(n){if(function Ewe(){if(null==fB){const n=typeof document<"u"?document.head:null;fB=!(!n||!n.createShadowRoot&&!n.attachShadow)}return fB}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function dB(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function dp(n){return n.composedPath?n.composedPath()[0]:n.target}function pB(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Twe=new zt("cdk-dir-doc",{providedIn:"root",factory:function Lwe(){return Os(Wi)}}),Dwe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Sf=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new sr,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function Iwe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Dwe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Xe(Twe,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})(),Uq=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new $e,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Se(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(zq(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):di()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(zo(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=hp(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>xa(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(Xe(cr),Xe(V3),Xe(Wi,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bwe=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new $e,this._elementScrolled=new Se(o=>this.ngZone.runOutsideAngular(()=>xa(this.elementRef.nativeElement,"scroll").pipe(Ua(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=nv()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==nv()?t.left=t.right:1==nv()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;Nq()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&2==nv()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==nv()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(Uq),U(cr),U(Sf,8))},n.\u0275dir=gt({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),Tx=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new $e,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(zq(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Xe(V3),Xe(cr),Xe(Wi,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})(),Lx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[pp,gp,pp,gp]}),n})();class gB{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class iv extends gB{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class Dx extends gB{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Fwe extends gB{constructor(e){super(),this.element=e instanceof mn?e.nativeElement:e}}class mB{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof iv?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Dx?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Fwe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Pwe extends mB{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Oc.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let AB=(()=>{class n extends mB{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new sr,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(U(Xi),U(Nc),U(Wi))},n.\u0275dir=gt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[jt]}),n})(),c6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})();function vc(n){return n<=0?()=>Xa:sn((e,t)=>{let i=0;e.subscribe(on(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}const Gq=Nq();class Hwe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Gc(-this._previousScrollPosition.left),e.style.top=Gc(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Gq&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Gq&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class zwe{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Qq{enable(){}disable(){}attach(){}}function vB(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function Wq(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Owe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();vB(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Nwe=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Qq,this.close=o=>new zwe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Hwe(this._viewportRuler,this._document),this.reposition=o=>new Owe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(Xe(Uq),Xe(Tx),Xe(cr),Xe(Wi))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class _B{constructor(e){if(this.scrollStrategy=new Qq,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class Ix{constructor(e,t,i,r,s){this.offsetX=i,this.offsetY=r,this.panelClass=s,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class Vwe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let jq=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uwe=(()=>{class n extends jq{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi),Xe(cr,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gwe=(()=>{class n extends jq{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=dp(s)},this._clickListener=s=>{const o=dp(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const u=c[l];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const f=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi),Xe(V3),Xe(cr,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rx=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||pB()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),pB()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi),Xe(V3))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rv{constructor(e,t,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new $e,this._attachments=new $e,this._detachments=new $e,this._locationChanges=Te.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new $e,this._outsidePointerEvents=new $e,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(vc(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Gc(this._config.width),e.height=Gc(this._config.height),e.minWidth=Gc(this._config.minWidth),e.minHeight=Gc(this._config.minHeight),e.maxWidth=Gc(this._config.maxWidth),e.maxHeight=Gc(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=xx(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ua(Jc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const $q="cdk-overlay-connected-position-bounding-box",Qwe=/([A-Za-z%]+)$/;class Wwe{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new $e,this._resizeSubscription=Te.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add($q),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(u,l,i)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const l of s){const u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&mp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove($q),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=qq(t);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let p=0-a,g=a+s.height-i.height,v=this._subtractOverflows(s.width,0-o,o+s.width-i.width),_=this._subtractOverflows(s.height,p,g),w=v*_;return{visibleArea:w,isCompletelyWithinViewport:s.width*s.height===w,fitsInViewportVertically:_===s.height,fitsInViewportHorizontally:v==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=Kq(this._overlayRef.getConfig().minHeight),a=Kq(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&l}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=qq(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let u=0,f=0;return u=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,f=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:f},{x:e.x+u,y:e.y+f}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Vwe(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,f,p;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),v=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>v&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-v/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)f=e.x,u=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),v=this._lastBoundingBoxSize.width;u=2*g,f=e.x-g,u>v&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-v/2)}return{top:o,left:f,bottom:a,right:p,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Gc(i.height),r.top=Gc(i.top),r.bottom=Gc(i.bottom),r.width=Gc(i.width),r.left=Gc(i.left),r.right=Gc(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Gc(s)),o&&(r.maxWidth=Gc(o))}this._lastBoundingBoxSize=i,mp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){mp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){mp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();mp(i,this._getExactOverlayY(t,e,u)),mp(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Gc(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Gc(o.maxWidth):s&&(i.maxWidth="")),mp(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Gc(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Gc(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Wq(e,i),isOriginOutsideView:vB(e,i),isOverlayClipped:Wq(t,i),isOverlayOutsideView:vB(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&xx(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof mn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function mp(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Kq(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Qwe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function qq(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Xq="cdk-global-overlay-wrapper";class jwe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Xq),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,f=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let g="",v="",_="";c?_="flex-start":"center"===u?(_="center",p?v=f:g=f):p?"left"===u||"end"===u?(_="flex-end",g=f):("right"===u||"start"===u)&&(_="flex-start",v=f):"left"===u||"start"===u?(_="flex-start",g=f):("right"===u||"end"===u)&&(_="flex-end",v=f),e.position=this._cssPosition,e.marginLeft=c?"0":g,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":v,t.justifyContent=_,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Xq),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let $we=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new jwe}flexibleConnectedTo(t){return new Wwe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Tx),Xe(Wi),Xe(V3),Xe(Rx))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kwe=0,Mu=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f,p,g){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=l,this._directionality=u,this._location=f,this._outsideClickDispatcher=p,this._animationsModuleType=g}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new _B(t);return o.direction=o.direction||this._directionality.value,new rv(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Kwe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(n7)),new Pwe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Nwe),Xe(Rx),Xe(Xi),Xe($we),Xe(Uwe),Xe(Oc),Xe(cr),Xe(Wi),Xe(Sf),Xe(W9),Xe(Gwe),Xe(l4,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const qwe=new zt("cdk-connected-overlay-scroll-strategy");let Xwe=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(U(mn))},n.\u0275dir=gt({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})();const Zwe={provide:qwe,deps:[Mu],useFactory:function Ywe(n){return()=>n.scrollStrategies.reposition()}};let l6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[Mu,Zwe],imports:[pp,c6,Lx,Lx]}),n})();class Vs extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const Bx=ve(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Jwe}=Array,{getPrototypeOf:ebe,prototype:tbe,keys:nbe}=Object;function Yq(n){if(1===n.length){const e=n[0];if(Jwe(e))return{args:e,keys:null};if(function ibe(n){return n&&"object"==typeof n&&ebe(n)===tbe}(e)){const t=nbe(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function Zq(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function kx(...n){const e=O1(n),t=Uh(n),{args:i,keys:r}=Yq(n);if(0===i.length)return Es([],e);const s=new Se(function rbe(n,e,t=bt){return i=>{Jq(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)Jq(e,()=>{const l=Es(n[c],e);let u=!1;l.subscribe(on(i,f=>{s[c]=f,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>Zq(r,o):bt));return t?s.pipe(sB(t)):s}function Jq(n,e,t){n?qa(t,n,e):e()}function sv(...n){return function sbe(){return v1(1)}()(Es(n,O1(n)))}function Fx(n){return new Se(e=>{Bo(n()).subscribe(e)})}function o7(n,e){const t=ee(n)?n:()=>n,i=r=>r.error(t());return new Se(e?r=>e.schedule(i,0,r):i)}function yB(){return sn((n,e)=>{let t=null;n._refCount++;const i=on(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class wB extends Se{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,dt(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Te;const t=this.getSubject();e.add(this.source.subscribe(on(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Te.EMPTY)}return e}refCount(){return yB()(this)}}function f4(n,e){return sn((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(on(i,c=>{r?.unsubscribe();let l=0;const u=s++;Bo(n(c,u)).subscribe(r=on(i,f=>i.next(e?e(c,f,u,l++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function m0(...n){const e=O1(n);return sn((t,i)=>{(e?sv(n,t,e):sv(n,t)).subscribe(i)})}function Px(n){return sn((e,t)=>{let i=!1;e.subscribe(on(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function eX(n=obe){return sn((e,t)=>{let i=!1;e.subscribe(on(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function obe(){return new Bx}function A0(n,e){const t=arguments.length>=2;return i=>i.pipe(n?zo((r,s)=>n(r,s,i)):bt,vc(1),t?Px(e):eX(()=>new Bx))}function u6(n,e){return ee(e)?Ri(n,e,1):Ri(n,1)}function Jo(n,e,t){const i=ee(n)||e||t?{next:n,error:e,complete:t}:n;return i?sn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(on(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):bt}function lh(n){return sn((e,t)=>{let s,i=null,r=!1;i=e.subscribe(on(t,void 0,void 0,o=>{s=Bo(n(o,lh(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function abe(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(on(o,u=>{const f=l++;c=a?n(c,u,f):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function tX(n,e){return sn(abe(n,e,arguments.length>=2,!0))}function bB(n){return n<=0?()=>Xa:sn((e,t)=>{let i=[];e.subscribe(on(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function nX(n,e){const t=arguments.length>=2;return i=>i.pipe(n?zo((r,s)=>n(r,s,i)):bt,bB(1),t?Px(e):eX(()=>new Bx))}function iX(n){return Ut(()=>n)}function Hx(n){return sn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const es="primary",ov=Symbol("RouteTitle");class lbe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function a7(n){return new lbe(n)}function ube(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function v0(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!rX(n[r],e[r]))return!1;return!0}function rX(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function sX(n){return Array.prototype.concat.apply([],n)}function oX(n){return n.length>0?n[n.length-1]:null}function Y2(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function h6(n){return XI(n)?n:I9(n)?Es(Promise.resolve(n)):di(n)}const dbe={exact:function lX(n,e,t){if(!vp(n.segments,e.segments)||!zx(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!lX(n.children[i],e.children[i],t))return!1;return!0},subset:uX},aX={exact:function pbe(n,e){return v0(n,e)},subset:function gbe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rX(n[t],e[t]))},ignored:()=>!0};function cX(n,e,t){return dbe[t.paths](n.root,e.root,t.matrixParams)&&aX[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function uX(n,e,t){return hX(n,e,e.segments,t)}function hX(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!vp(r,t)||e.hasChildren()||!zx(r,t,i))}if(n.segments.length===t.length){if(!vp(n.segments,t)||!zx(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!uX(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(vp(n.segments,r)&&zx(n.segments,r,i)&&n.children[es])&&hX(n.children[es],e,s,i)}}function zx(n,e,t){return e.every((i,r)=>aX[t](n[r].parameters,i.parameters))}class Ap{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=a7(this.queryParams)),this._queryParamMap}toString(){return vbe.serialize(this)}}class Is{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Y2(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ox(this)}}class av{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=a7(this.parameters)),this._parameterMap}toString(){return gX(this)}}function vp(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let fX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:function(){return new CB},providedIn:"root"}),n})();class CB{parse(e){const t=new Ebe(e);return new Ap(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${cv(e.root,!0)}`,i=function wbe(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Nx(t)}=${Nx(r)}`).join("&"):`${Nx(t)}=${Nx(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function _be(n){return encodeURI(n)}(e.fragment)}`:""}`}}const vbe=new CB;function Ox(n){return n.segments.map(e=>gX(e)).join("/")}function cv(n,e){if(!n.hasChildren())return Ox(n);if(e){const t=n.children[es]?cv(n.children[es],!1):"",i=[];return Y2(n.children,(r,s)=>{s!==es&&i.push(`${s}:${cv(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Abe(n,e){let t=[];return Y2(n.children,(i,r)=>{r===es&&(t=t.concat(e(i,r)))}),Y2(n.children,(i,r)=>{r!==es&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===es?[cv(n.children[es],!1)]:[`${r}:${cv(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[es]?`${Ox(n)}/${t[0]}`:`${Ox(n)}/(${t.join("//")})`}}function dX(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nx(n){return dX(n).replace(/%3B/gi,";")}function MB(n){return dX(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vx(n){return decodeURIComponent(n)}function pX(n){return Vx(n.replace(/\+/g,"%20"))}function gX(n){return`${MB(n.path)}${function ybe(n){return Object.keys(n).map(e=>`;${MB(e)}=${MB(n[e])}`).join("")}(n.parameters)}`}const bbe=/^[^\/()?;=#]+/;function Ux(n){const e=n.match(bbe);return e?e[0]:""}const xbe=/^[^=?&#]+/,Mbe=/^[^&#]+/;class Ebe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Is([],{}):new Is([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[es]=new Is(e,t)),i}parseSegment(){const e=Ux(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Jt(4009,!1);return this.capture(e),new av(Vx(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ux(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Ux(this.remaining);r&&(i=r,this.capture(i))}e[Vx(t)]=Vx(i)}parseQueryParam(e){const t=function Cbe(n){const e=n.match(xbe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function Sbe(n){const e=n.match(Mbe);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=pX(t),s=pX(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Ux(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Jt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=es);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[es]:new Is([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Jt(4011,!1)}}function SB(n){return n.segments.length>0?new Is([],{[es]:n}):n}function Gx(n){const e={};for(const i of Object.keys(n.children)){const s=Gx(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Tbe(n){if(1===n.numberOfChildren&&n.children[es]){const e=n.children[es];return new Is(n.segments.concat(e.segments),e.children)}return n}(new Is(n.segments,e))}function _p(n){return n instanceof Ap}function Ibe(n,e,t,i,r){if(0===t.length)return c7(e.root,e.root,e.root,i,r);const s=function vX(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new AX(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Y2(s.outlets,(c,l)=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new AX(t,e,i)}(t);return s.toRoot()?c7(e.root,e.root,new Is([],{}),i,r):function o(c){const l=function Bbe(n,e,t,i){if(n.isAbsolute)return new l7(e.root,!0,0);if(-1===i)return new l7(t,t===e.root,0);return function _X(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Jt(4005,!1);r=i.segments.length}return new l7(i,!1,r-s)}(t,i+(lv(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,c),u=l.processChildren?hv(l.segmentGroup,l.index,s.commands):TB(l.segmentGroup,l.index,s.commands);return c7(e.root,l.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function lv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function uv(n){return"object"==typeof n&&null!=n&&n.outlets}function c7(n,e,t,i,r){let o,s={};i&&Y2(i,(c,l)=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:mX(n,e,t);const a=SB(Gx(o));return new Ap(a,s,r)}function mX(n,e,t){const i={};return Y2(n.children,(r,s)=>{i[s]=r===e?t:mX(r,e,t)}),new Is(n.segments,i)}class AX{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&lv(i[0]))throw new Jt(4003,!1);const r=i.find(uv);if(r&&r!==oX(i))throw new Jt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class l7{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function TB(n,e,t){if(n||(n=new Is([],{})),0===n.segments.length&&n.hasChildren())return hv(n,e,t);const i=function Fbe(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(uv(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!wX(c,l,o))return s;i+=2}else{if(!wX(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Is(n.segments.slice(0,i.pathIndex),{});return s.children[es]=new Is(n.segments.slice(i.pathIndex),n.children),hv(s,0,r)}return i.match&&0===r.length?new Is(n.segments,{}):i.match&&!n.hasChildren()?LB(n,e,t):i.match?hv(n,0,r):LB(n,e,t)}function hv(n,e,t){if(0===t.length)return new Is(n.segments,{});{const i=function kbe(n){return uv(n[0])?n[0].outlets:{[es]:n}}(t),r={};return Y2(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=TB(n.children[o],e,s))}),Y2(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new Is(n.segments,r)}}function LB(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(uv(s)){const c=Pbe(s.outlets);return new Is(i,c)}if(0===r&&lv(t[0])){i.push(new av(n.segments[e].path,yX(t[0]))),r++;continue}const o=uv(s)?s.outlets[es]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&lv(a)?(i.push(new av(o,yX(a))),r+=2):(i.push(new av(o,{})),r++)}return new Is(i,{})}function Pbe(n){const e={};return Y2(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=LB(new Is([],{}),0,t))}),e}function yX(n){const e={};return Y2(n,(t,i)=>e[i]=`${t}`),e}function wX(n,e,t){return n==t.path&&v0(e,t.parameters)}class Ef{constructor(e,t){this.id=e,this.url=t}}class DB extends Ef{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class uh extends Ef{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qx extends Ef{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bX extends Ef{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hbe extends Ef{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zbe extends Ef{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Obe extends Ef{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Nbe extends Ef{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vbe extends Ef{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ube{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gbe{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qbe{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wbe{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jbe{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $be{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xX{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class CX{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=IB(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=IB(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=RB(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return RB(e,this._root).map(t=>t.value)}}function IB(n,e){if(n===e.value)return e;for(const t of e.children){const i=IB(n,t);if(i)return i}return null}function RB(n,e){if(n===e.value)return[e];for(const t of e.children){const i=RB(n,t);if(i.length)return i.unshift(e),i}return[]}class Tf{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function u7(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class MX extends CX{constructor(e,t){super(e),this.snapshot=t,BB(this,e)}toString(){return this.snapshot.toString()}}function SX(n,e){const t=function qbe(n,e){const o=new Wx([],{},{},"",{},es,e,null,n.root,-1,{});return new TX("",new Tf(o,[]))}(n,e),i=new Vs([new av("",{})]),r=new Vs({}),s=new Vs({}),o=new Vs({}),a=new Vs(""),c=new f6(i,r,o,a,s,es,e,t.root);return c.snapshot=t.root,new MX(new Tf(c,[]),t)}class f6{constructor(e,t,i,r,s,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(Ut(l=>l[ov]))??di(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ut(e=>a7(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ut(e=>a7(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function EX(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Xbe(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Wx{constructor(e,t,i,r,s,o,a,c,l,u,f,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[ov],this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=u,this._correctedLastPathIndex=p??u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=a7(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=a7(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class TX extends CX{constructor(e,t){super(t),this.url=e,BB(this,t)}toString(){return LX(this._root)}}function BB(n,e){e.value._routerState=n,e.children.forEach(t=>BB(n,t))}function LX(n){const e=n.children.length>0?` { ${n.children.map(LX).join(", ")} } `:"";return`${n.value}${e}`}function kB(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,v0(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),v0(e.params,t.params)||n.params.next(t.params),function hbe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!v0(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),v0(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function FB(n,e){const t=v0(n.params,e.params)&&function mbe(n,e){return vp(n,e)&&n.every((t,i)=>v0(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||FB(n.parent,e.parent))}function fv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Zbe(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return fv(n,i,r);return fv(n,i)})}(n,e,t);return new Tf(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>fv(n,a)),o}}const i=function Jbe(n){return new f6(new Vs(n.url),new Vs(n.params),new Vs(n.queryParams),new Vs(n.fragment),new Vs(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>fv(n,s));return new Tf(i,r)}}const PB="ngNavigationCancelingError";function DX(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=_p(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=IX(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function IX(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[PB]=!0,i.cancellationCode=e,t&&(i.url=t),i}function RX(n){return BX(n)&&_p(n.url)}function BX(n){return n&&n[PB]}class exe{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new dv,this.attachRef=null}}let dv=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new exe,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jx=!1;let $x=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new sr,this.deactivateEvents=new sr,this.attachEvents=new sr,this.detachEvents=new sr,this.name=r||es,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Jt(4012,jx);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Jt(4012,jx);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Jt(4012,jx);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Jt(4013,jx);this._activatedRoute=t;const r=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new txe(t,a,r.injector);if(i&&function nxe(n){return!!n.resolveComponentFactory}(i)){const l=i.resolveComponentFactory(o);this.activated=r.createComponent(l,r.length,c)}else this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(U(dv),U(Nc),D3("name"),U(mc),U(Ee))},n.\u0275dir=gt({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class txe{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===f6?this.route:e===dv?this.childContexts:this.parent.get(e,t)}}let HB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Sn({type:n,selectors:[["ng-component"]],standalone:!0,features:[E$],decls:1,vars:0,template:function(t,i){1&t&&Ue(0,"router-outlet")},dependencies:[$x],encapsulation:2}),n})();function kX(n,e){return n.providers&&!n._injector&&(n._injector=qb(n.providers,e,`Route: ${n.path}`)),n._injector??e}function OB(n){const e=n.children&&n.children.map(OB),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==es&&(t.component=HB),t}function d4(n){return n.outlet||es}function FX(n,e){const t=n.filter(i=>d4(i)===e);return t.push(...n.filter(i=>d4(i)!==e)),t}function pv(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class axe{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),kB(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=u7(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Y2(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=u7(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=u7(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=u7(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new $be(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Wbe(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(kB(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),kB(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=pv(r.snapshot),c=a?.get(Xi)??null;o.attachRef=null,o.route=r,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class PX{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Kx{constructor(e,t){this.component=e,this.route=t}}function cxe(n,e,t){const i=n._root;return gv(i,e?e._root:null,t,[i.value])}function h7(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function Qh(n){return null!==y1(n)}(n)?e.get(n):n:i}function gv(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=u7(e);return n.children.forEach(o=>{(function uxe(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function hxe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!vp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vp(n.url,e.url)||!v0(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!FB(n,e)||!v0(n.queryParams,e.queryParams);default:return!FB(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new PX(i)):(s.data=o.data,s._resolvedData=o._resolvedData),gv(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Kx(a.outlet.component,o))}else o&&mv(e,a,r),r.canActivateChecks.push(new PX(i)),gv(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Y2(s,(o,a)=>mv(o,t.getContext(a),r)),r}function mv(n,e,t){const i=u7(n),r=n.value;Y2(i,(s,o)=>{mv(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Kx(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Av(n){return"function"==typeof n}function NB(n){return n instanceof Bx||"EmptyError"===n?.name}const qx=Symbol("INITIAL_VALUE");function f7(){return f4(n=>kx(n.map(e=>e.pipe(vc(1),m0(qx)))).pipe(Ut(e=>{for(const t of e)if(!0!==t){if(t===qx)return qx;if(!1===t||t instanceof Ap)return t}return!0}),zo(e=>e!==qx),vc(1)))}function HX(n){return function Le(...n){return tt(n)}(Jo(e=>{if(_p(e))throw DX(0,e)}),Ut(e=>!0===e))}const VB={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zX(n,e,t,i,r){const s=UB(n,e,t);return s.matched?function Txe(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?di(r.map(o=>{const a=h7(o,n);return h6(function Axe(n){return n&&Av(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(f7(),HX()):di(!0)}(i=kX(e,i),e,t).pipe(Ut(o=>!0===o?s:{...VB})):di(s)}function UB(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...VB}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||ube)(t,n,e);if(!r)return{...VB};const s={};Y2(r.posParams,(a,c)=>{s[c]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Xx(n,e,t,i,r="corrected"){if(t.length>0&&function Ixe(n,e,t){return t.some(i=>Yx(n,e,i)&&d4(i)!==es)}(n,t,i)){const o=new Is(e,function Dxe(n,e,t,i){const r={};r[es]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&d4(s)!==es){const o=new Is([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[d4(s)]=o}return r}(n,e,i,new Is(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function Rxe(n,e,t){return t.some(i=>Yx(n,e,i))}(n,t,i)){const o=new Is(n.segments,function Lxe(n,e,t,i,r,s){const o={};for(const a of i)if(Yx(n,t,a)&&!r[d4(a)]){const c=new Is([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[d4(a)]=c}return{...r,...o}}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new Is(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Yx(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function OX(n,e,t,i){return!!(d4(n)===i||i!==es&&Yx(e,t,n))&&("**"===n.path||UB(e,n,t).matched)}function NX(n,e,t){return 0===e.length&&!n.children[t]}const Zx=!1;class Jx{constructor(e){this.segmentGroup=e||null}}class VX{constructor(e){this.urlTree=e}}function vv(n){return o7(new Jx(n))}function UX(n){return o7(new VX(n))}class Pxe{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=Xx(this.urlTree.root,[],[],this.config).segmentGroup,t=new Is(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,es).pipe(Ut(s=>this.createUrlTree(Gx(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(lh(s=>{if(s instanceof VX)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Jx?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,es).pipe(Ut(r=>this.createUrlTree(Gx(r),e.queryParams,e.fragment))).pipe(lh(r=>{throw r instanceof Jx?this.noMatchError(r):r}))}noMatchError(e){return new Jt(4002,Zx)}createUrlTree(e,t,i){const r=SB(e);return new Ap(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Ut(s=>new Is([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Es(r).pipe(u6(s=>{const o=i.children[s],a=FX(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Ut(c=>({segment:c,outlet:s})))}),tX((s,o)=>(s[o.outlet]=o.segment,s),{}),nX())}expandSegment(e,t,i,r,s,o){return Es(i).pipe(u6(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(lh(l=>{if(l instanceof Jx)return di(null);throw l}))),A0(a=>!!a),lh((a,c)=>{if(NB(a))return NX(t,r,s)?di(new Is([],{})):vv(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return OX(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):vv(t):vv(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?UX(s):this.lineralizeSegments(i,s).pipe(Ri(o=>{const a=new Is(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=UB(t,r,s);if(!a)return vv(t);const f=this.applyRedirectCommands(c,r.redirectTo,u);return r.redirectTo.startsWith("/")?UX(f):this.lineralizeSegments(r,f).pipe(Ri(p=>this.expandSegment(e,t,i,p.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=kX(i,e),i.loadChildren?(i._loadedRoutes?di({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(Ut(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new Is(r,{})))):di(new Is(r,{}))):zX(t,i,r,e).pipe(f4(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(Ri(u=>{const f=u.injector??e,p=u.routes,{segmentGroup:g,slicedSegments:v}=Xx(t,a,c,p),_=new Is(g.segments,g.children);if(0===v.length&&_.hasChildren())return this.expandChildren(f,p,_).pipe(Ut(M=>new Is(a,M)));if(0===p.length&&0===v.length)return di(new Is(a,{}));const w=d4(i)===s;return this.expandSegment(f,_,p,v,w?es:s,!0).pipe(Ut(x=>new Is(a.concat(x.segments),x.children)))})):vv(t)))}getChildConfig(e,t,i){return t.children?di({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?di({routes:t._loadedRoutes,injector:t._loadedInjector}):function Exe(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?di(!0):di(r.map(o=>{const a=h7(o,n);return h6(function dxe(n){return n&&Av(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(f7(),HX())}(e,t,i).pipe(Ri(r=>r?this.configLoader.loadChildren(e,t).pipe(Jo(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function kxe(n){return o7(IX(Zx,3))}())):di({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return di(i);if(r.numberOfChildren>1||!r.children[es])return o7(new Jt(4e3,Zx));r=r.children[es]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Ap(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Y2(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Y2(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,r)}),new Is(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Jt(4001,Zx);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class zxe{}class Vxe{constructor(e,t,i,r,s,o,a,c){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=c}recognize(){const e=Xx(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,es).pipe(Ut(t=>{if(null===t)return null;const i=new Wx([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},es,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Tf(i,t),s=new TX(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=EX(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return Es(Object.keys(i.children)).pipe(u6(r=>{const s=i.children[r],o=FX(t,r);return this.processSegmentGroup(e,o,s,r)}),tX((r,s)=>r&&s?(r.push(...s),r):null),function cbe(n,e=!1){return sn((t,i)=>{let r=0;t.subscribe(on(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),Px(null),nX(),Ut(r=>{if(null===r)return null;const s=GX(r);return function Uxe(n){n.sort((e,t)=>e.value.outlet===es?-1:t.value.outlet===es?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return Es(t).pipe(u6(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),A0(o=>!!o),lh(o=>{if(NB(o))return NX(i,r,s)?di([]):di(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!OX(t,i,r,s))return di(null);let o;if("**"===t.path){const a=r.length>0?oX(r).parameters:{},c=WX(i)+r.length;o=di({snapshot:new Wx(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$X(t),d4(t),t.component??t._loadedComponent??null,t,QX(i),c,KX(t),c),consumedSegments:[],remainingSegments:[]})}else o=zX(i,t,r,e).pipe(Ut(({matched:a,consumedSegments:c,remainingSegments:l,parameters:u})=>{if(!a)return null;const f=WX(i)+c.length;return{snapshot:new Wx(c,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$X(t),d4(t),t.component??t._loadedComponent??null,t,QX(i),f,KX(t),f),consumedSegments:c,remainingSegments:l}}));return o.pipe(f4(a=>{if(null===a)return di(null);const{snapshot:c,consumedSegments:l,remainingSegments:u}=a;e=t._injector??e;const f=t._loadedInjector??e,p=function Gxe(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:g,slicedSegments:v}=Xx(i,l,u,p.filter(w=>void 0===w.redirectTo),this.relativeLinkResolution);if(0===v.length&&g.hasChildren())return this.processChildren(f,p,g).pipe(Ut(w=>null===w?null:[new Tf(c,w)]));if(0===p.length&&0===v.length)return di([new Tf(c,[])]);const _=d4(t)===s;return this.processSegment(f,p,g,v,_?es:s).pipe(Ut(w=>null===w?null:[new Tf(c,w)]))}))}}function Qxe(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function GX(n){const e=[],t=new Set;for(const i of n){if(!Qxe(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=GX(i.children);e.push(new Tf(i.value,r))}return e.filter(i=>!t.has(i))}function QX(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function WX(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function $X(n){return n.data||{}}function KX(n){return n.resolve||{}}function qX(n){return"string"==typeof n.title||null===n.title}function GB(n){return f4(e=>{const t=n(e);return t?Es(t).pipe(Ut(()=>e)):di(e)})}let XX=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===es);return i}getResolvedTitleForRoute(t){return t.data[ov]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:function(){return Os(YX)},providedIn:"root"}),n})(),YX=(()=>{class n extends XX{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Iq))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Zxe{}class eCe extends class Jxe{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const tC=new zt("",{providedIn:"root",factory:()=>({})}),QB=new zt("ROUTES");let WB=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return di(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=h6(t.loadComponent()).pipe(Jo(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Hx(()=>{this.componentLoaders.delete(t)})),r=new wB(i,()=>new $e).pipe(yB());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return di({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(Ut(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,l,u=!1;Array.isArray(a)?l=a:(c=a.create(t).injector,l=sX(c.get(QB,[],Gn.Self|Gn.Optional)));return{routes:l.map(OB),injector:c}}),Hx(()=>{this.childrenLoaders.delete(i)})),o=new wB(s,()=>new $e).pipe(yB());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return h6(t()).pipe(Ri(i=>i instanceof M$||Array.isArray(i)?di(i):Es(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(Xe(Oc),Xe(wR))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class nCe{}class iCe{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function rCe(n){throw n}function sCe(n,e,t){return e.parse("/")}const oCe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aCe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function JX(){const n=Os(fX),e=Os(dv),t=Os(W9),i=Os(Oc),r=Os(wR),s=Os(QB,{optional:!0})??[],o=Os(tC,{optional:!0})??{},a=Os(YX),c=Os(XX,{optional:!0}),l=Os(nCe,{optional:!0}),u=Os(Zxe,{optional:!0}),f=new _c(null,n,e,t,i,r,sX(s));return l&&(f.urlHandlingStrategy=l),u&&(f.routeReuseStrategy=u),f.titleStrategy=c??a,function cCe(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,f),f}let _c=(()=>{class n{constructor(t,i,r,s,o,a,c){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new $e,this.errorHandler=rCe,this.malformedUriErrorHandler=sCe,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>di(void 0),this.urlHandlingStrategy=new iCe,this.routeReuseStrategy=new eCe,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(WB),this.configLoader.onLoadEndListener=p=>this.triggerEvent(new Gbe(p)),this.configLoader.onLoadStartListener=p=>this.triggerEvent(new Ube(p)),this.ngModule=o.get(ap),this.console=o.get(ave);const f=o.get(cr);this.isNgZoneEnabled=f instanceof cr&&cr.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function fbe(){return new Ap(new Is([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=SX(this.currentUrlTree,this.rootComponentType),this.transitions=new Vs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(zo(r=>0!==r.id),Ut(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),f4(r=>{let s=!1,o=!1;return di(r).pipe(Jo(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),f4(a=>{const c=this.browserUrlTree.toString(),l=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||l)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return eY(a.source)&&(this.browserUrlTree=a.extractedUrl),di(a).pipe(f4(f=>{const p=this.transitions.getValue();return i.next(new DB(f.id,this.serializeUrl(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions.getValue()?Xa:Promise.resolve(f)}),function Hxe(n,e,t,i){return f4(r=>function Fxe(n,e,t,i,r){return new Pxe(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(Ut(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Jo(f=>{this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects},r.urlAfterRedirects=f.urlAfterRedirects}),function jxe(n,e,t,i,r,s){return Ri(o=>function Nxe(n,e,t,i,r,s,o="emptyOnly",a="legacy"){return new Vxe(n,e,t,i,r,o,a,s).recognize().pipe(f4(c=>null===c?function Oxe(n){return new Se(e=>e.error(n))}(new zxe):di(c)))}(n,e,t,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r,s).pipe(Ut(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Jo(f=>{if(r.targetSnapshot=f.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!f.extras.skipLocationChange){const g=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);this.setBrowserUrl(g,f)}this.browserUrlTree=f.urlAfterRedirects}const p=new Hbe(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);i.next(p)}));if(l&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:p,extractedUrl:g,source:v,restoredState:_,extras:w}=a,b=new DB(p,this.serializeUrl(g),v,_);i.next(b);const x=SX(g,this.rootComponentType).snapshot;return di(r={...a,targetSnapshot:x,urlAfterRedirects:g,extras:{...w,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Xa}),Jo(a=>{const c=new zbe(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),Ut(a=>r={...a,guards:cxe(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function _xe(n,e){return Ri(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?di({...t,guardsResult:!0}):function yxe(n,e,t,i){return Es(n).pipe(Ri(r=>function Sxe(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?di(s.map(a=>{const c=pv(e)??r,l=h7(a,c);return h6(function mxe(n){return n&&Av(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i))).pipe(A0())})).pipe(f7()):di(!0)}(r.component,r.route,t,e,i)),A0(r=>!0!==r,!0))}(o,i,r,n).pipe(Ri(a=>a&&function fxe(n){return"boolean"==typeof n}(a)?function wxe(n,e,t,i){return Es(e).pipe(u6(r=>sv(function xxe(n,e){return null!==n&&e&&e(new Qbe(n)),di(!0)}(r.route.parent,i),function bxe(n,e){return null!==n&&e&&e(new jbe(n)),di(!0)}(r.route,i),function Mxe(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function lxe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Fx(()=>di(o.guards.map(c=>{const l=pv(o.node)??t,u=h7(c,l);return h6(function gxe(n){return n&&Av(n.canActivateChild)}(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n))).pipe(A0())})).pipe(f7())));return di(s).pipe(f7())}(n,r.path,t),function Cxe(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return di(!0);const r=i.map(s=>Fx(()=>{const o=pv(e)??t,a=h7(s,o);return h6(function pxe(n){return n&&Av(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(A0())}));return di(r).pipe(f7())}(n,r.route,t))),A0(r=>!0!==r,!0))}(i,s,n,e):di(a)),Ut(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Jo(a=>{if(r.guardsResult=a.guardsResult,_p(a.guardsResult))throw DX(0,a.guardsResult);const c=new Obe(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),zo(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),GB(a=>{if(a.guards.canActivateChecks.length)return di(a).pipe(Jo(c=>{const l=new Nbe(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}),f4(c=>{let l=!1;return di(c).pipe(function $xe(n,e){return Ri(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return di(t);let s=0;return Es(r).pipe(u6(o=>function Kxe(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!qX(r)&&(s[ov]=r.title),function qxe(n,e,t,i){const r=function Xxe(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return di({});const s={};return Es(r).pipe(Ri(o=>function Yxe(n,e,t,i){const r=pv(e)??i,s=h7(n,r);return h6(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(A0(),Jo(a=>{s[o]=a}))),bB(1),iX(s),lh(o=>NB(o)?Xa:o7(o)))}(s,n,e,i).pipe(Ut(o=>(n._resolvedData=o,n.data=EX(n,t).resolve,r&&qX(r)&&(n.data[ov]=r.title),null)))}(o.route,i,n,e)),Jo(()=>s++),bB(1),Ri(o=>s===r.length?di(t):Xa))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Jo({next:()=>l=!0,complete:()=>{l||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),Jo(c=>{const l=new Vbe(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(l)}))}),GB(a=>{const c=l=>{const u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(Jo(f=>{l.component=f}),Ut(()=>{})));for(const f of l.children)u.push(...c(f));return u};return kx(c(a.targetSnapshot.root)).pipe(Px(),vc(1))}),GB(()=>this.afterPreactivation()),Ut(a=>{const c=function Ybe(n,e,t){const i=fv(n,e._root,t?t._root:void 0);return new MX(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:c}}),Jo(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Ut(i=>(new axe(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Jo({next(){s=!0},complete(){s=!0}}),Hx(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),lh(a=>{if(o=!0,BX(a)){RX(a)||(this.navigated=!0,this.restoreHistory(r,!0));const c=new Qx(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(i.next(c),RX(a)){const l=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||eY(r.source)};this.scheduleNavigation(l,"imperative",null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const c=new bX(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);i.next(c);try{r.resolve(this.errorHandler(a))}catch(l){r.reject(l)}}return Xa}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(OB),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=r||this.routerState.root,u=c?this.currentUrlTree.fragment:o;let f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}return null!==f&&(f=this.removeEmptyProps(f)),Ibe(l,this.currentUrlTree,t,f,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=_p(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function lCe(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new Jt(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...oCe}:!1===i?{...aCe}:i,_p(t))return cX(this.currentUrlTree,t,r);const s=this.parseUrl(t);return cX(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new uh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,g)=>{a=p,c=g});const u=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):f=0,this.setTransition({id:u,targetPageId:f,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i,r){const s=new Qx(t.id,this.serializeUrl(t.extractedUrl),i,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){tp()},n.\u0275prov=Rt({token:n,factory:function(){return JX()},providedIn:"root"}),n})();function eY(n){return"imperative"!==n}let _v=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new $e,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=bf(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=bf(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=bf(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(U(_c),U(f6),D3("tabindex"),U(pa),U(mn))},n.\u0275dir=gt({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&Kt("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Ir]}),n})(),jB=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new $e,this.subscription=t.events.subscribe(s=>{s instanceof uh&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=bf(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=bf(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=bf(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,o){return!!(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(U(_c),U(f6),U(up))},n.\u0275dir=gt({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&Kt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&Jr("target",i.target)("href",i.href,E1)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Ir]}),n})(),tY=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new sr,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof uh&&this.update()})}ngAfterContentInit(){di(this.links.changes,this.linksWithHrefs.changes,di(null)).pipe(v1()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Es(t).pipe(v1()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function uCe(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(U(_c),U(mn),U(pa),U(mc),U(_v,8),U(jB,8))},n.\u0275dir=gt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&(a1(r,_v,5),a1(r,jB,5)),2&t){let s;Gi(s=Qi())&&(i.links=s),Gi(s=Qi())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Ir]}),n})();class nY{}let hCe=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(zo(t=>t instanceof uh),u6(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=qb(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Es(r).pipe(v1())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):di(null);const s=r.pipe(Ri(o=>null===o?di(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?Es([s,this.loader.loadComponent(i)]).pipe(v1()):s})}}return n.\u0275fac=function(t){return new(t||n)(Xe(_c),Xe(wR),Xe(Ee),Xe(nY),Xe(WB))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $B=new zt("");let iY=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof DB?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof uh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xX&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new xX(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){tp()},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();function d7(n,e){return{\u0275kind:n,\u0275providers:e}}function KB(n){return[{provide:QB,multi:!0,useValue:n}]}function sY(){const n=Os(Oc);return e=>{const t=n.get(n7);if(e!==t.components[0])return;const i=n.get(_c),r=n.get(oY);1===n.get(qB)&&i.initialNavigation(),n.get(aY,null,Gn.Optional)?.setUpPreloading(),n.get($B,null,Gn.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.next(),r.complete()}}const oY=new zt("",{factory:()=>new $e}),qB=new zt("",{providedIn:"root",factory:()=>1});const aY=new zt("");function gCe(n){return d7(0,[{provide:aY,useExisting:hCe},{provide:nY,useExisting:n}])}const cY=new zt("ROUTER_FORROOT_GUARD"),mCe=[W9,{provide:fX,useClass:CB},{provide:_c,useFactory:JX},dv,{provide:f6,useFactory:function rY(n){return n.routerState.root},deps:[_c]},WB];function ACe(){return new yK("Router",_c)}let vCe=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[mCe,[],KB(t),{provide:cY,useFactory:bCe,deps:[[_c,new I3,new s0]]},{provide:tC,useValue:i||{}},i?.useHash?{provide:up,useClass:qve}:{provide:up,useClass:WK},{provide:$B,useFactory:()=>{const n=Os(_c),e=Os(aye),t=Os(tC);return t.scrollOffset&&e.setOffset(t.scrollOffset),new iY(n,e,t)}},i?.preloadingStrategy?gCe(i.preloadingStrategy).\u0275providers:[],{provide:yK,multi:!0,useFactory:ACe},i?.initialNavigation?xCe(i):[],[{provide:lY,useFactory:sY},{provide:ex,multi:!0,useExisting:lY}]]}}static forChild(t){return{ngModule:n,providers:[KB(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Xe(cY,8))},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[HB]}),n})();function bCe(n){return"guarded"}function xCe(n){return["disabled"===n.initialNavigation?d7(3,[{provide:G9,multi:!0,useFactory:()=>{const e=Os(_c);return()=>{e.setUpLocationChangeListener()}}},{provide:qB,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?d7(2,[{provide:qB,useValue:0},{provide:G9,multi:!0,deps:[Oc],useFactory:e=>{const t=e.get($ve,Promise.resolve());let i=!1;return()=>t.then(()=>new Promise(s=>{const o=e.get(_c),a=e.get(oY);(function r(s){e.get(_c).events.pipe(zo(a=>a instanceof uh||a instanceof Qx||a instanceof bX),Ut(a=>a instanceof uh||a instanceof Qx&&(0===a.code||1===a.code)&&null),zo(a=>null!==a),vc(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),o.afterPreactivation=()=>(s(!0),i||a.closed?di(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const lY=new zt("");var l2=(()=>{return(n=l2||(l2={})).insulated="insulated",n.orientation="orientation",n.baseDimension="base-dimension",n.extensionToNorth="extension-north",n.extensionToSouth="extension-south",n.extensionToWest="extension-west",n.extensionToEast="extension-east",n.halfCircle="half-circle",n.bendPoint="bend-point",n.roofBoth="roof-both",n.roofCircle="roof-circle",n.roof70="roof-70",n.roofWalls="roof-walls",n.efficiency="efficiency",n.simple="simple",n.greyOut="greyOut",n.amountSteps="amount-steps",n.viewlines="viewlines",n.warmWaterBuffer="warm-water-buffer",n.iJoists="i-joits",n.dampOpen="damp-open",n.airTight="air-tight",n.pipeLayer="pipe-layer",n.woodFiberPlate="wood-fiber-plate",n.noSun="no-sun",n.sun="sun",n.cop="cop",l2;var n})(),Ct=(()=>{return(n=Ct||(Ct={})).mainWelcome="main-welcome",n.mainPassiv="main-passiv",n.mainBasics="main-basics",n.mainExtensions="main-extensions",n.mainTower="main-tower",n.mainEnd="main-end",n.EndOfPageHouse="main-EndOfPageHouse",n.roofBasics="roof-basics",n.roofCircle="roof-circle",n.roofIntermezzo="roof-intermezzo",n.roof70="roof70",n.roofChoice="roof-choice",n.roofEdge="roof-edge",n.stairStart="stair-start",n.stairBasic="stair-basic",n.stairCheck="stair-check",n.stairPlan="stair-plan",n.facadeStart="facade-start",n.facadeWindow="facade-window",n.facadeBrick="facade-Brick",n.facadeDoor="facade-Door",n.constructionWelcome="construction-welcome",n.constructionFoundation="construction-foundation",n.constructionCrawlerSpace="construction-crawler-space",n.constructionGroundFloor="construction-ground-floor",n.constructionWallSole="construction-wall-sole",n.constructionWallJoists="construction-wall-joists",n.constructionWallOSB="construction-wall-osb",n.constructionWallTape="construction-wall-tape",n.constructionFloorLVL="construction-floor-lvl",n.constructionRoofRidge="construction-roof-ridge",n.constructionRoofJoist="construction-roof-joist",n.constructionRoofInside="construction-roof-inside",n.constructionRoofOuterSheet="construction-roof-outerSheet",n.constructionRoofSpace="construction-roof-space",n.constructionRoofTiles="construction-roof-tiles",n.constructionWallInsulation="construction-wall-insulation",n.constructionWallOuterSheet="construction-wall-outer-sheet",n.constructionWallSpace="construction-wall-space",n.constructionWallFacade="construction-wall-facade",n.constructionWallGips="construction-wall-gips",n.constructionWallService="construction-wall-service",n.constructionFloor="construction-floor",n.constructionFloorOSB="construction-floor-osb",n.constructionRoof="construction-roof",n.constructionWallFinish="construction-wall-finish",n.constructionParameters="construction-parameters",n.installationWelcome="installations-welcome",n.installationDrinkWater="installations-drink-water",n.installationGreyWater="installations-grey-water",n.installationHeating="installations-heating",n.installationElectricity="installations-electricity",n.installationVentilation="installations-ventilation",n.installationSmartHome="installations-smartHome",n.wiredWelcome="wired-welcome",n.wiredPower="wired-power",n.wiredEthernet="wired-ethernet",n.wiredSafety="wired-safety",n.wiredExtra="wired-extra",n.wiredLight="wired-light",n.wiredVent="wired-vent",n.wiredWater="wired-water",n.costsWelcome="costs-welcome",n.costsConstruction="costs-construction",n.costsPreparations="costs-preparations",n.costsOpenings="costs-openings",n.costsElectra="costs-electra",n.costsWater="costs-water",n.costsFinishes="costs-finishes",n.costsOuterFinishes="costs-outer-finishes",n.costsTotals="costs-totals",n.planningPreps="planning-preps",n.planningFoundation="planning-foundation",n.planningFraming="planning-framing",n.planningOutside="planning-outside",n.planningInstallations="planning-installations",n.planningFinishing="planning-finishing",n.House3D="House3D",n.energyWelcome="energy-welcome",n.energyUsage="energy-use",n.energyProduction="energy-production",n.energyProductionProblem1="energy-production-problem1",n.energyProductionProblem2="energy-production-problem2",n.energyStorage="energy-storage",n.energyPreserve="energy-preserve",n.energyAlternatives="energy-alternatives",n.rainWelcome="rainWelcome",n.rainSize="rainSize",n.rainFilter="rainFilter",n.rainDrink="rainDrink",n.rainNoRain="rainNoRain",n.rainReadmore="rainReadmore",n.solarStart="solarStart",Ct;var n})(),at=(()=>{return(n=at||(at={})).top="top",n.ground="ground",n.ceiling="ceiling",n.all="all",n.tower="tower",n.none="none",at;var n})(),d6=(()=>{return(n=d6||(d6={})).left="left",n.right="right",n.none="none",d6;var n})(),yo=(()=>{return(n=yo||(yo={})).house2D="house2D",n.cross="cross",n.stairPlan="stairPlan",n.stairCross="stairCross",n.construction="construction",n.House3D="House3D",n.map="map",n.scrollerHeat="scrollerHeat",n.none="none",yo;var n})(),Ye=(()=>{return(n=Ye||(Ye={})).perilex="perilex",n.socket="socket",n.lightBulb="light-bulb",n.lightSwitch="light-switch",n.dlc="dlc",n.dimmer="dimmer",n.poe="poe",n.ethernet="ethernet",n.wifi="wifi",n.camera="camera",n.alarm="alarm",n.smoke="smoke",n.pir="pir",n.blinds="blinds",n.temperature="temperature",n.ventIn="vent-in",n.ventOut="vent-out",n.waterCold="water-cold",n.waterRain="water-rain",n.waterWarm="water-warm",n.drain="drain",n.shower="shower",n.toilet="toilet",Ye;var n})(),Z2=(()=>{return(n=Z2||(Z2={})).doors="doors",n.stats="stats",n.examplePlan="examplePlan",n.theoreticalWalls="theoreticalWalls",n.silhouette="silhouette",n.measure="measure",n.decoration="decoration",n.stramien="stramien",n.towerFootprint="towerFootprint",n.grid="grid",n.walkLine="walkLine",n.minimumHeight="minimumHeight",Z2;var n})(),hh=(()=>{return(n=hh||(hh={})).OutsidePOE="OutsidePOE",n.SharedEthernet="SharedEthernet",hh;var n})(),p6=(()=>{return(n=p6||(p6={})).clipBoxEnabled="clipBoxEnabled",n.clipBoxShow="clipBoxShow",n.mirror="mirror",p6;var n})(),c1=(()=>{return(n=c1||(c1={})).foundation="house3d-foundation",n.groundFloor="house3d-groundFloor",n.topFloor="house3d-topFloor",n.roof="house3d-roof",n.innerWall="house3d-innerWall",n.outerWall="house3d-outerWall",n.studs="house3d-studs",n.lvl="house3d-lvl",n.debug="house3d-debug",n.tower="house3d-tower",c1;var n})(),Oi=(()=>{return(n=Oi||(Oi={})).foundation="A1-construction-foundation",n.crawlerSpace="A2-construction-crawler-space",n.groundFloor="A3-construction-ground-floor",n.sole="A4-construction-sole",n.joists="A5-construction-joists",n.osbWall="A6-construction-osb-wall",n.tapes="A7-construction-tapes",n.floorLVL="B1-construction-floorLVL",n.topFloorJoists="B2-construction-top-floor-joists",n.topFloorOSB="B2-construction-top-floor-osb",n.roofRidge="B3-construction-roof-ridge",n.roofJoists="B4-construction-roof-joists",n.roofOSB="B5-construction-roof-osb",n.insulation="C1-construction-insulation",n.outerSheet="C2-construction-outerSheet",n.roofOuterSheets="C3-construction-roof-outerSheet",n.roofSpace="C4-construction-roof-space",n.roofTiles="C5-construction-roof-tiles",n.space="D1-construction-space",n.facade="D2-construction-facade",n.serviceBeams="E1-construction-serviceBeams",n.serviceInsulation="E2-construction-serviceInsulation",n.gips="E3-construction-gips",Oi;var n})(),ea=(()=>{return(n=ea||(ea={})).red="red",n.green="green",n.blue="blue",n.x="x",n.y="y",n.z="z",ea;var n})();let U3=(()=>{class n{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=s6(this.platformId)}static getCookieRegExp(t){const i=t.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const r=n.getCookieRegExp(t).exec(this.document.cookie);return r[1]?n.safeDecodeURIComponent(r[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},i=this.document;return i.cookie&&""!==i.cookie&&i.cookie.split(";").forEach(r=>{const[s,o]=r.split("=");t[n.safeDecodeURIComponent(s.replace(/^ /,""))]=n.safeDecodeURIComponent(o)}),t}set(t,i,r,s,o,a,c){if(!this.documentIsAccessible)return;if("number"==typeof r||r instanceof Date||s||o||a||c)return void this.set(t,i,{expires:r,path:s,domain:o,secure:a,sameSite:c||"Lax"});let l=encodeURIComponent(t)+"="+encodeURIComponent(i)+";";const u=r||{};u.expires&&(l+="number"==typeof u.expires?"expires="+new Date((new Date).getTime()+1e3*u.expires*60*60*24).toUTCString()+";":"expires="+u.expires.toUTCString()+";"),u.path&&(l+="path="+u.path+";"),u.domain&&(l+="domain="+u.domain+";"),!1===u.secure&&"None"===u.sameSite&&(u.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),u.secure&&(l+="secure;"),u.sameSite||(u.sameSite="Lax"),l+="sameSite="+u.sameSite+";",this.document.cookie=l}delete(t,i,r,s,o="Lax"){if(!this.documentIsAccessible)return;const a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:a,path:i,domain:r,secure:s,sameSite:o})}deleteAll(t,i,r,s="Lax"){if(!this.documentIsAccessible)return;const o=this.getAll();for(const a in o)o.hasOwnProperty(a)&&this.delete(a,t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi),Xe(Cu))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),io=(()=>{class n{constructor(t,i){this.cookieService=t,this.router=i,this.darkMode=!1,this.title="Lindelund",this.discord="https://discord.gg/hrjfzY3yTp",this.github="https://github.com/PassiveOpen/PassiveOpen.github.io",this.youtube="https://www.youtube.com/channel/UCtP_RM2k4-27u40nC0ncpdw",this.patreon="https://www.patreon.com/PassiveOpen",this.instagram="https://www.instagram.com/2_plings/",this.update$=new $e,this.tag$=new Vs(void 0),this.graphic$=new Vs(void 0),this.states$=new Vs({}),this.popupActive$=new Vs(!1),this.fullscreen$=new Vs(!0),this.svgTransform$=new Vs(void 0),this.page$=this.router.events.pipe(zo(r=>r instanceof uh),m0(this.router),Ut(r=>r.url.toLowerCase().split("/")[1])),this.floor$=new Vs(at.ground),this.scroll$=new Vs({scroll:0,percentage:0,section:void 0,graphicSide:void 0,graphic:void 0}),this.getCookies()}setStatesSilent(t,i,r){t.flatMap(s=>this.setState(s,i,r,!1))}hardSetStates(t){const i=this.states$.value;Object.entries(t).forEach(([r,s])=>{i[r]=s}),this.commitState(i)}setState(t,i,r,s=!0){const o=this.states$.value;(t instanceof Array?t:[t]).flatMap(a=>{r&&(o[a]=Boolean(this.cookieService.get("states"))),o[a]=void 0!==i?i:void 0===o[a]||!o[a]}),s?this.commitState(o):this.silentStates=o}commitState(t){this.states$.next(t),this.cookieService.set("states",JSON.stringify(t))}setTransformCookie(t,i){this.svgTransform$.next({[i]:t}),this.cookieService.set("svgTransform",JSON.stringify(this.svgTransform$.value))}getCookies(){let t=this.cookieService.get("floor");""===t&&(t=at.ground),this.floor$.next(t);let i=this.cookieService.get("fullscreen");i=""!==i&&"true"===i,this.fullscreen$.next(i);let r=this.cookieService.get("svgTransform");(""===r||!1===i)&&(r="{}"),this.svgTransform$.next(JSON.parse(r));let s=this.cookieService.get("darkMode");this.setDarkMode(""===s?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches:"true"===s);let o=this.cookieService.get("states");""===o&&(o="{}"),this.states$.next(JSON.parse(o))}setFloor(t){let i;void 0!==t?i=t:(this.floor$.value===at.ground&&(i=at.top),this.floor$.value===at.top&&(i=at.ground)),this.floor$.next(i),this.cookieService.set("floor",i),this.update$.next()}setTag(t){this.tag$.next(t),this.update$.next()}setDarkMode(t,i=!1){document.body.classList.remove("light"),document.body.classList.remove("dark"),this.darkMode=void 0!==t?t:!this.darkMode,this.darkMode?document.body.classList.add("dark"):document.body.classList.add("light"),i&&this.cookieService.set("darkMode",`${this.darkMode}`,.1)}}return n.\u0275fac=function(t){return new(t||n)(Xe(U3),Xe(_c))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yp(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function lC(n,e=ev){return sn((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,i.next(l)}};function c(){const l=o+n,u=e.now();if(u<l)return r=this.schedule(void 0,l-u),void i.add(r);a()}t.subscribe(on(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function YB(n){return zo((e,t)=>n<=t)}function zCe(n,e){return n===e}let gY=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OCe=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=hp(t);return new Se(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new $e,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(Xe(gY))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mY=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new sr,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Hr(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=ch(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(lC(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(U(OCe),U(mn),U(cr))},n.\u0275dir=gt({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),yv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[gY]}),n})();const AY=new Set;let p7,NCe=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):UCe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function VCe(n){if(!AY.has(n))try{p7||(p7=document.createElement("style"),p7.setAttribute("type","text/css"),document.head.appendChild(p7)),p7.sheet&&(p7.sheet.insertRule(`@media ${n} {body{ }}`,0),AY.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(V3))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UCe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let GCe=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new $e}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return vY(xx(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=kx(vY(xx(t)).map(o=>this._registerQuery(o).observable));return s=sv(s.pipe(vc(1)),s.pipe(YB(1),lC(0))),s.pipe(Ut(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new Se(o=>{const a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(m0(i),Ut(({matches:o})=>({query:t,matches:o})),Ua(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(Xe(NCe),Xe(cr))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vY(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class wY extends class jCe{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new $e,this._typeaheadSubscription=Te.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new $e,this.change=new $e,e instanceof Jg&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Jo(t=>this._pressedLetters.push(t)),lC(e),zo(()=>this._pressedLetters.length>0),Ut(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||yp(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Jg?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let uC=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function KCe(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function $Ce(n){try{return n.frameElement}catch{return null}}(function nMe(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===xY(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=xY(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function eMe(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function tMe(n){return!function XCe(n){return function ZCe(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function qCe(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function YCe(n){return function JCe(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||bY(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(Xe(V3))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bY(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function xY(n){if(!bY(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class iMe{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(vc(1)).subscribe(e)}}let ZB=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new iMe(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(Xe(uC),Xe(cr),Xe(Wi))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function JB(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function ek(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const rMe=new zt("cdk-input-modality-detector-options"),sMe={ignoreKeys:[18,17,224,91,16]},g7=a6({passive:!0,capture:!0});let oMe=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Vs(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=dp(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(JB(o)?"keyboard":"mouse"),this._mostRecentTarget=dp(o))},this._onTouchstart=o=>{ek(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=dp(o))},this._options={...sMe,...s},this.modalityDetected=this._modality.pipe(YB(1)),this.modalityChanged=this.modalityDetected.pipe(function HCe(n,e=bt){return n=n??zCe,sn((t,i)=>{let r,s=!0;t.subscribe(on(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,g7),r.addEventListener("mousedown",this._onMousedown,g7),r.addEventListener("touchstart",this._onTouchstart,g7)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,g7),document.removeEventListener("mousedown",this._onMousedown,g7),document.removeEventListener("touchstart",this._onTouchstart,g7))}}return n.\u0275fac=function(t){return new(t||n)(Xe(V3),Xe(cr),Xe(Wi),Xe(rMe,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cMe=new zt("cdk-focus-monitor-default-options"),hC=a6({passive:!0,capture:!0});let p4=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new $e,this._rootNodeFocusAndBlurListener=a=>{for(let l=dp(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=hp(t);if(!this._platform.isBrowser||1!==r.nodeType)return di(null);const s=Vq(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new $e,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=hp(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=hp(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=dp(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,hC),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,hC)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ua(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,hC),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,hC),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(Xe(cr),Xe(V3),Xe(oMe),Xe(Wi,8),Xe(cMe,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const MY="cdk-high-contrast-black-on-white",SY="cdk-high-contrast-white-on-black",tk="cdk-high-contrast-active";let EY=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Os(GCe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(tk,MY,SY),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(tk,MY):2===i&&t.add(tk,SY)}}}return n.\u0275fac=function(t){return new(t||n)(Xe(V3),Xe(Wi))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nk=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(Xe(EY))},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[yv]}),n})();const uMe=new zt("mat-sanity-checks",{providedIn:"root",factory:function lMe(){return!0}});let Yi=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!pB()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Xe(EY),Xe(uMe,8),Xe(Wi))},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[pp,pp]}),n})();function m7(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Hr(e)}}}function wp(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function _0(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Hr(e)}}}function fC(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?ch(t):this.defaultTabIndex}}}let DY=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=gt({type:n,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),n})();function wv(n,e,t){n.nativeElement.classList.toggle(e,t)}let dC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[Yi,Yi]}),n})();class fMe{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const BY={enterDuration:225,exitDuration:150},ik=a6({passive:!0}),kY=["mousedown","touchstart"],FY=["mouseup","mouseleave","touchend","touchcancel"];class pMe{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=hp(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...BY,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function gMe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=c-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);const f=window.getComputedStyle(u),g=f.transitionDuration,v="none"===f.transitionProperty||"0s"===g||"0s, 0s"===g,_=new fMe(this,u,i,v);u.style.transform="scale3d(1, 1, 1)",_.state=0,i.persistent||(this._mostRecentTransientRipple=_);let w=null;return!v&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const b=()=>this._finishRippleTransition(_),x=()=>this._destroyRipple(_);u.addEventListener("transitionend",b),u.addEventListener("transitioncancel",x),w={onTransitionEnd:b,onTransitionCancel:x}}),this._activeRipples.set(_,w),(v||!l)&&this._finishRippleTransition(_),_}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...BY,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=hp(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(kY))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(FY),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=JB(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!ek(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,ik)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(kY.forEach(e=>{this._triggerElement.removeEventListener(e,this,ik)}),this._pointerUpEventsRegistered&&FY.forEach(e=>{this._triggerElement.removeEventListener(e,this,ik)}))}}const mMe=new zt("mat-ripple-global-options");let y0=(()=>{class n{constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new pMe(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(cr),U(V3),U(mMe,8),U(l4,8))},n.\u0275dir=gt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&$r("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),fh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[Yi,Yi]}),n})(),rk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[Yi]}),n})(),PY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[fh,n3,Yi,rk]}),n})();function HY(...n){const e=Uh(n),{args:t,keys:i}=Yq(n),r=new Se(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let f=!1;Bo(t[u]).subscribe(on(s,p=>{f||(f=!0,l--),a[u]=p},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(i?Zq(i,a):a),s.complete())}))}});return e?r.pipe(sB(e)):r}class zY{}class OY{}class Lf{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Lf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Lf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Lf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class vMe{encodeKey(e){return NY(e)}encodeValue(e){return NY(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const yMe=/%(\d[a-f0-9])/gi,wMe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function NY(n){return encodeURIComponent(n).replace(yMe,(e,t)=>wMe[t]??e)}function pC(n){return`${n}`}class g6{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new vMe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function _Me(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(pC):[pC(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new g6({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(pC(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(pC(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class bMe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function VY(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function UY(n){return typeof Blob<"u"&&n instanceof Blob}function GY(n){return typeof FormData<"u"&&n instanceof FormData}class bv{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function xMe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Lf),this.context||(this.context=new bMe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new g6,this.urlWithParams=t}serializeBody(){return null===this.body?null:VY(this.body)||UY(this.body)||GY(this.body)||function CMe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof g6?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||GY(this.body)?null:UY(this.body)?this.body.type||null:VY(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof g6?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),l)),new bv(t,i,s,{params:l,headers:c,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var Qc=(()=>((Qc=Qc||{})[Qc.Sent=0]="Sent",Qc[Qc.UploadProgress=1]="UploadProgress",Qc[Qc.ResponseHeader=2]="ResponseHeader",Qc[Qc.DownloadProgress=3]="DownloadProgress",Qc[Qc.Response=4]="Response",Qc[Qc.User=5]="User",Qc))();class sk{constructor(e,t=200,i="OK"){this.headers=e.headers||new Lf,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ok extends sk{constructor(e={}){super(e),this.type=Qc.ResponseHeader}clone(e={}){return new ok({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gC extends sk{constructor(e={}){super(e),this.type=Qc.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new gC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class QY extends sk{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ak(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let dh=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof bv)s=t;else{let c,l;c=r.headers instanceof Lf?r.headers:new Lf(r.headers),r.params&&(l=r.params instanceof g6?r.params:new g6({fromObject:r.params})),s=new bv(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=di(s).pipe(u6(c=>this.handler.handle(c)));if(t instanceof bv||"events"===r.observe)return o;const a=o.pipe(zo(c=>c instanceof gC));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ut(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Ut(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Ut(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(Ut(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new g6).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,ak(r,i))}post(t,i,r={}){return this.request("POST",t,ak(r,i))}put(t,i,r={}){return this.request("PUT",t,ak(r,i))}}return n.\u0275fac=function(t){return new(t||n)(Xe(zY))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();class WY{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const jY=new zt("HTTP_INTERCEPTORS");let MMe=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const SMe=/^\)\]\}',?\n/;let $Y=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Se(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((g,v)=>r.setRequestHeader(g,v.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&r.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();r.responseType="json"!==g?g:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const g=r.statusText||"OK",v=new Lf(r.getAllResponseHeaders()),_=function EMe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new ok({headers:v,status:r.status,statusText:g,url:_}),o},c=()=>{let{headers:g,status:v,statusText:_,url:w}=a(),b=null;204!==v&&(b=typeof r.response>"u"?r.responseText:r.response),0===v&&(v=b?200:0);let x=v>=200&&v<300;if("json"===t.responseType&&"string"==typeof b){const M=b;b=b.replace(SMe,"");try{b=""!==b?JSON.parse(b):null}catch(E){b=M,x&&(x=!1,b={error:E,text:b})}}x?(i.next(new gC({body:b,headers:g,status:v,statusText:_,url:w||void 0})),i.complete()):i.error(new QY({error:b,headers:g,status:v,statusText:_,url:w||void 0}))},l=g=>{const{url:v}=a(),_=new QY({error:g,status:r.status||0,statusText:r.statusText||"Unknown Error",url:v||void 0});i.error(_)};let u=!1;const f=g=>{u||(i.next(a()),u=!0);let v={type:Qc.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),"text"===t.responseType&&!!r.responseText&&(v.partialText=r.responseText),i.next(v)},p=g=>{let v={type:Qc.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),i.next(v)};return r.addEventListener("load",c),r.addEventListener("error",l),r.addEventListener("timeout",l),r.addEventListener("abort",l),t.reportProgress&&(r.addEventListener("progress",f),null!==s&&r.upload&&r.upload.addEventListener("progress",p)),r.send(s),i.next({type:Qc.Sent}),()=>{r.removeEventListener("error",l),r.removeEventListener("abort",l),r.removeEventListener("load",c),r.removeEventListener("timeout",l),t.reportProgress&&(r.removeEventListener("progress",f),null!==s&&r.upload&&r.upload.removeEventListener("progress",p)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Xe(hq))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const ck=new zt("XSRF_COOKIE_NAME"),lk=new zt("XSRF_HEADER_NAME");class KY{}let TMe=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=tq(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi),Xe(Cu),Xe(ck))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),uk=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(KY),Xe(lk))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),LMe=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(jY,[]);this.chain=i.reduceRight((r,s)=>new WY(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Xe(OY),Xe(Oc))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),DMe=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:uk,useClass:MMe}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:ck,useValue:t.cookieName}:[],t.headerName?{provide:lk,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[uk,{provide:jY,useExisting:uk,multi:!0},{provide:KY,useClass:TMe},{provide:ck,useValue:"XSRF-TOKEN"},{provide:lk,useValue:"X-XSRF-TOKEN"}]}),n})(),IMe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[dh,{provide:zY,useClass:LMe},$Y,{provide:OY,useExisting:$Y}],imports:[DMe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const RMe=["*"];let mC;function xv(n){return function BMe(){if(void 0===mC&&(mC=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(mC=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return mC}()?.createHTML(n)||n}function qY(n){return Error(`Unable to find icon with the name "${n}"`)}function XY(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function YY(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class bp{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let A7=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new bp(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(lo.HTML,r);if(!o)throw YY(r);const a=xv(o);return this._addSvgIconConfig(t,i,new bp("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new bp(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(lo.HTML,i);if(!s)throw YY(i);const o=xv(s);return this._addSvgIconSetConfig(t,new bp("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(lo.RESOURCE_URL,t);if(!i)throw XY(t);const r=this._cachedIconsByUrl.get(i);return r?di(AC(r)):this._loadSvgIconFromConfig(new bp(t,null)).pipe(Jo(s=>this._cachedIconsByUrl.set(i,s)),Ut(s=>AC(s)))}getNamedSvgIcon(t,i=""){const r=ZY(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):o7(qY(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?di(AC(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Ut(i=>AC(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?di(r):HY(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(lh(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(lo.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),di(null)})))).pipe(Ut(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw qY(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Jo(i=>t.svgText=i),Ut(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?di(null):this._fetchIcon(t).pipe(Jo(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(xv("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(xv("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function kMe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(lo.RESOURCE_URL,i);if(!o)throw XY(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Ut(l=>xv(l)),Hx(()=>this._inProgressUrlFetches.delete(o)),lu());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(ZY(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return PMe(s)?new bp(s.url,null,s.options):new bp(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(Xe(dh,8),Xe(Mf),Xe(Wi,8),Xe(Af))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AC(n){return n.cloneNode(!0)}function ZY(n,e){return n+":"+e}function PMe(n){return!(!n.url||!n.options)}const HMe=wp(class{constructor(n){this._elementRef=n}}),zMe=new zt("MAT_ICON_DEFAULT_OPTIONS"),OMe=new zt("mat-icon-location",{providedIn:"root",factory:function NMe(){const n=Os(Wi),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),JY=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],VMe=JY.map(n=>`[${n}]`).join(", "),UMe=/^url\(['"]?#(.*?)['"]?\)$/;let v7=(()=>{class n extends HMe{constructor(t,i,r,s,o,a){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Te.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Hr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(VMe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)JY.forEach(o=>{const a=i[s],c=a.getAttribute(o),l=c?c.match(UMe):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(vc(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(A7),D3("aria-hidden"),U(OMe),U(Af),U(zMe,8))},n.\u0275cmp=Sn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(Jr("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),$r("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[jt],ngContentSelectors:RMe,decls:1,vars:0,template:function(t,i){1&t&&(T1(),Do(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),eZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[Yi,Yi]}),n})();function tZ(n){for(let e in n){let t=n[e]??"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}const hk="inline",vC=["row","column","row-reverse","column-reverse"];function nZ(n){let[e,t,i]=iZ(n);return function QMe(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,i)}function iZ(n){n=n?.toLowerCase()??"";let[e,t,i]=n.split(" ");return vC.find(r=>r===e)||(e=vC[0]),t===hk&&(t=i!==hk?i:"",i=hk),[e,GMe(t),!!i]}function Cv(n){let[e]=iZ(n);return e.indexOf("row")>-1}function GMe(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function Df(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}const jMe={provide:ex,useFactory:function WMe(n,e){return()=>{if(s6(e)){const t=Array.from(n.querySelectorAll(`[class*=${rZ}]`)),i=/\bflex-layout-.+?\b/g;t.forEach(r=>{r.classList.contains(`${rZ}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[Wi,Cu],multi:!0},rZ="flex-layout-";let fk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[jMe]}),n})();class xp{constructor(e=!1,t="all",i="",r="",s=0){this.matches=e,this.mediaQuery=t,this.mqAlias=i,this.suffix=r,this.priority=s,this.property=""}clone(){return new xp(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let $Me=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,i,r){const s=this.stylesheet.get(t);s?s.set(i,r):this.stylesheet.set(t,new Map([[i,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,i){const r=this.stylesheet.get(t);let s="";if(r){const o=r.get(i);("number"==typeof o||"string"==typeof o)&&(s=o+"")}return s}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dk={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},ph=new zt("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>dk}),_7=new zt("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),pk=new zt("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function sZ(n,e){return n=n?.clone()??new xp,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}class q1{constructor(){this.shouldCache=!0}sideEffect(e,t,i){}}let Ga=(()=>{class n{constructor(t,i,r,s){this._serverStylesheet=t,this._serverModuleLoaded=i,this._platformId=r,this.layoutConfig=s}applyStyleToElement(t,i,r=null){let s={};"string"==typeof i&&(s[i]=r,i=s),s=this.layoutConfig.disableVendorPrefixes?i:tZ(i),this._applyMultiValueStyleToElement(s,t)}applyStyleToElements(t,i=[]){const r=this.layoutConfig.disableVendorPrefixes?t:tZ(t);i.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(t){const i="flex-direction";let r=this.lookupStyle(t,i);return[r||"row",this.lookupInlineStyle(t,i)||r7(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,i){return t.getAttribute(i)??""}lookupInlineStyle(t,i){return s6(this._platformId)?t.style.getPropertyValue(i):function KMe(n,e){return oZ(n)[e]??""}(t,i)}lookupStyle(t,i,r=!1){let s="";return t&&((s=this.lookupInlineStyle(t,i))||(s6(this._platformId)?r||(s=getComputedStyle(t).getPropertyValue(i)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(t,i)))),s?s.trim():""}_applyMultiValueStyleToElement(t,i){Object.keys(t).sort().forEach(r=>{const s=t[r],o=Array.isArray(s)?s:[s];o.sort();for(let a of o)a=a?a+"":"",s6(this._platformId)||!this._serverModuleLoaded?s6(this._platformId)?i.style.setProperty(r,a):qMe(i,r,a):this._serverStylesheet.addStyleToElement(i,r,a)})}}return n.\u0275fac=function(t){return new(t||n)(Xe($Me),Xe(_7),Xe(Cu),Xe(ph))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qMe(n,e,t){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=oZ(n);i[e]=t??"",function XMe(n,e){let t="";for(const i in e)e[i]&&(t+=`${i}:${e[i]};`);n.setAttribute("style",t)}(n,i)}function oZ(n){const e={},t=n.getAttribute("style");if(t){const i=t.split(/;+/g);for(let r=0;r<i.length;r++){const s=i[r].trim();if(s.length>0){const o=s.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${s}`);e[s.substr(0,o).trim()]=s.substr(o+1).trim()}}}return e}function Mv(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function YMe(n,e){return(n.priority||0)-(e.priority||0)}let gk=(()=>{class n{constructor(t,i,r){this._zone=t,this._platformId=i,this._document=r,this.source=new Vs(new xp(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((i,r)=>{i.matches&&t.push(r)}),t}isActive(t){return this.registry.get(t)?.matches??this.registerQuery(t).some(r=>r.matches)}observe(t,i=!1){if(t&&t.length){const r=this._observable$.pipe(zo(o=>!i||t.indexOf(o.mediaQuery)>-1));return Jc(new Se(o=>{const a=this.registerQuery(t);if(a.length){const c=a.pop();a.forEach(l=>{o.next(l)}),this.source.next(c)}o.complete()}),r)}return this._observable$}registerQuery(t){const i=Array.isArray(t)?t:[t],r=[];return function ZMe(n,e){const t=n.filter(i=>!aZ[i]);if(t.length>0){const i=t.join(", ");try{const r=e.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),e.head.appendChild(r),t.forEach(s=>aZ[s]=r)}catch(r){console.error(r)}}}(i,this._document),i.forEach(s=>{const o=c=>{this._zone.run(()=>this.source.next(new xp(c.matches,s)))};let a=this.registry.get(s);a||(a=this.buildMQL(s),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(s,a)),a.matches&&r.push(new xp(!0,s))}),r}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function JMe(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,s6(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)(Xe(cr),Xe(Cu),Xe(Wi))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aZ={},eSe=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],cZ="(orientation: portrait) and (max-width: 599.98px)",lZ="(orientation: landscape) and (max-width: 959.98px)",uZ="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",hZ="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",fZ="(orientation: portrait) and (min-width: 840px)",dZ="(orientation: landscape) and (min-width: 1280px)",If={HANDSET:`${cZ}, ${lZ}`,TABLET:`${uZ} , ${hZ}`,WEB:`${fZ}, ${dZ} `,HANDSET_PORTRAIT:`${cZ}`,TABLET_PORTRAIT:`${uZ} `,WEB_PORTRAIT:`${fZ}`,HANDSET_LANDSCAPE:`${lZ}`,TABLET_LANDSCAPE:`${hZ}`,WEB_LANDSCAPE:`${dZ}`},tSe=[{alias:"handset",priority:2e3,mediaQuery:If.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:If.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:If.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:If.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:If.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:If.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:If.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:If.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:If.WEB_PORTRAIT,overlapping:!0}],nSe=/(\.|-|_)/g;function iSe(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}const aSe=new zt("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=Os(pk),e=Os(ph),t=[].concat.apply([],(n||[]).map(r=>Array.isArray(r)?r:[r]));return function oSe(n,e=[]){const t={};return n.forEach(i=>{t[i.alias]=i}),e.forEach(i=>{t[i.alias]?Df(t[i.alias],i):t[i.alias]=i}),function sSe(n){return n.forEach(e=>{e.suffix||(e.suffix=function rSe(n){return n.replace(nSe,"|").split("|").map(iSe).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(i=>t[i]))}((e.disableDefaultBps?[]:eSe).concat(e.addOrientationBps?tSe:[]),t)}});let mk=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort(YMe)}findByAlias(t){return t?this.findWithPredicate(t,i=>i.alias===t):null}findByQuery(t){return this.findWithPredicate(t,i=>i.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t?.suffix??"")}findWithPredicate(t,i){let r=this.findByMap.get(t);return r||(r=this.items.find(i)??null,this.findByMap.set(t,r)),r??null}}return n.\u0275fac=function(t){return new(t||n)(Xe(aSe))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const y7="print",cSe={alias:y7,mediaQuery:y7,priority:1e3};let lSe=(()=>{class n{constructor(t,i,r){this.breakpoints=t,this.layoutConfig=i,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new uSe,this.deactivations=[]}withPrintQuery(t){return[...t,y7]}isPrintEvent(t){return t.mediaQuery.startsWith(y7)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const i=this.breakpoints.findByQuery(t);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(Mv)}updateEvent(t){let i=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(i=this.getEventBreakpoints(t)[0],t.mediaQuery=i?.mediaQuery??""),sZ(t,i)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new xp(!0,y7))),t.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(r)}interceptEvents(t){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(i)),t.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,i)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,i){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const r=this.breakpoints.findByQuery(i.mediaQuery);if(r){const s=this.formerActivations&&this.formerActivations.includes(r),o=!this.formerActivations&&t.activatedBreakpoints.includes(r);(s||o)&&(this.deactivations.push(r),this.deactivations.sort(Mv))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)(Xe(mk),Xe(ph),Xe(Wi))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uSe{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(cSe),e.sort(Mv),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function hSe(n){return n?.mediaQuery.startsWith(y7)??!1}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}let l1=(()=>{class n{constructor(t,i,r){this.matchMedia=t,this.breakpoints=i,this.hook=r,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new $e,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const i=this.findByQuery(t.mediaQuery);if(i){t=sZ(t,i);const r=this.activatedBreakpoints.indexOf(i);t.matches&&-1===r?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(Mv),this.updateStyles()):!t.matches&&-1!==r&&(this._activatedBreakpoints.splice(r,1),this._activatedBreakpoints.sort(Mv),this.updateStyles())}}init(t,i,r,s,o=[]){pZ(this.updateMap,t,i,r),pZ(this.clearMap,t,i,s),this.buildElementKeyMap(t,i),this.watchExtraTriggers(t,i,o)}getValue(t,i,r){const s=this.elementMap.get(t);if(s){const o=void 0!==r?s.get(r):this.getActivatedValues(s,i);if(o)return o.get(i)}}hasValue(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);if(s)return void 0!==s.get(i)||!1}return!1}setValue(t,i,r,s){let o=this.elementMap.get(t);if(o){const c=(o.get(s)??new Map).set(i,r);o.set(s,c),this.elementMap.set(t,o)}else o=(new Map).set(s,(new Map).set(i,r)),this.elementMap.set(t,o);const a=this.getValue(t,i);void 0!==a&&this.updateElement(t,i,a)}trackValue(t,i){return this.subject.asObservable().pipe(zo(r=>r.element===t&&r.key===i))}updateStyles(){this.elementMap.forEach((t,i)=>{const r=new Set(this.elementKeyMap.get(i));let s=this.getActivatedValues(t);s&&s.forEach((o,a)=>{this.updateElement(i,a,o),r.delete(a)}),r.forEach(o=>{if(s=this.getActivatedValues(t,o),s){const a=s.get(o);this.updateElement(i,o,a)}else this.clearElement(i,o)})})}clearElement(t,i){const r=this.clearMap.get(t);if(r){const s=r.get(i);s&&(s(),this.subject.next({element:t,key:i,value:""}))}}updateElement(t,i,r){const s=this.updateMap.get(t);if(s){const o=s.get(i);o&&(o(r),this.subject.next({element:t,key:i,value:r}))}}releaseElement(t){const i=this.watcherMap.get(t);i&&(i.forEach(s=>s.unsubscribe()),this.watcherMap.delete(t));const r=this.elementMap.get(t);r&&(r.forEach((s,o)=>r.delete(o)),this.elementMap.delete(t))}triggerUpdate(t,i){const r=this.elementMap.get(t);if(r){const s=this.getActivatedValues(r,i);s&&(i?this.updateElement(t,i,s.get(i)):s.forEach((o,a)=>this.updateElement(t,a,o)))}}buildElementKeyMap(t,i){let r=this.elementKeyMap.get(t);r||(r=new Set,this.elementKeyMap.set(t,r)),r.add(i)}watchExtraTriggers(t,i,r){if(r&&r.length){let s=this.watcherMap.get(t);if(s||(s=new Map,this.watcherMap.set(t,s)),!s.get(i)){const a=Jc(...r).subscribe(()=>{const c=this.getValue(t,i);this.updateElement(t,i,c)});s.set(i,a)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,i){for(let s=0;s<this.activatedBreakpoints.length;s++){const a=t.get(this.activatedBreakpoints[s].alias);if(a&&(void 0===i||a.has(i)&&null!=a.get(i)))return a}if(!this._useFallbacks)return;const r=t.get("");return void 0===i||r&&r.has(i)?r:void 0}observeActivations(){const t=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(Jo(this.hook.interceptEvents(this)),zo(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)(Xe(gk),Xe(mk),Xe(lSe))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pZ(n,e,t,i){if(void 0!==i){const r=n.get(e)??new Map;r.set(t,i),n.set(e,r)}}let D1=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.styleBuilder=i,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new $e,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split(".").slice(1).join(".");this.setValue(t[i].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,i){const r=this.styleBuilder,s=r.shouldCache;let o=this.styleCache.get(t);(!o||!s)&&(o=r.buildStyles(t,i),s&&this.styleCache.set(t,o)),this.mru={...o},this.applyStyleToElement(o),r.sideEffect(t,o,i)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,i=!1){if(t){const[r,s]=this.styler.getFlowDirection(t);if(!s&&i){const o=nZ(r);this.styler.applyStyleToElements(o,[t])}return r.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,i,r=this.nativeElement){this.styler.applyStyleToElement(r,t,i)}setValue(t,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,i)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(q1),U(Ga),U(l1))},n.\u0275dir=gt({type:n,features:[Ir]}),n})();function gZ(n,e="1",t="1"){let i=[e,t,n],r=n.indexOf("calc");if(r>0){i[2]=mZ(n.substring(r).trim());let s=n.substr(0,r).trim().split(" ");2==s.length&&(i[0]=s[0],i[1]=s[1])}else if(0==r)i[2]=mZ(n.trim());else{let s=n.split(" ");i=3===s.length?s:[e,t,n]}return i}function mZ(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function _C(n,e){if(void 0===e)return n;const t=i=>{const r=+i.slice(0,-"x".length);return n.endsWith("x")&&!isNaN(r)?`${r*e.value}${e.unit}`:n};return n.includes(" ")?n.split(" ").map(t).join(" "):t(n)}let pSe=(()=>{class n extends q1{buildStyles(t,{display:i}){const r=nZ(t);return{...r,display:"none"===i?i:r.display}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gSe=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let mSe=(()=>{class n extends D1{constructor(t,i,r,s,o){super(t,r,i,s),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){const r=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=vZ.get(r)??new Map,vZ.set(r,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:r}),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(Ga),U(pSe),U(l1),U(ph))},n.\u0275dir=gt({type:n,features:[jt]}),n})(),m6=(()=>{class n extends mSe{constructor(){super(...arguments),this.inputs=gSe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[jt]}),n})();const vZ=new Map,_Z={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let ASe=(()=>{class n extends q1{constructor(t,i){super(),this._styler=t,this._config=i}buildStyles(t,i){return t.endsWith(yC)?function MSe(n,e){const[t,i]=n.split(" "),s=l=>`-${l}`;let o="0px",a=s(i??t),c="0px";return"rtl"===e?c=s(t):o=s(t),{margin:`0px ${o} ${a} ${c}`}}(t=_C(t=t.slice(0,t.indexOf(yC)),this._config.multiplier),i.directionality):{}}sideEffect(t,i,r){const s=r.items;if(t.endsWith(yC)){const o=function CSe(n,e){const[t,i]=n.split(" ");let s="0px",a="0px";return"rtl"===e?a=t:s=t,{padding:`0px ${s} ${i??t} ${a}`}}(t=_C(t=t.slice(0,t.indexOf(yC)),this._config.multiplier),r.directionality);this._styler.applyStyleToElements(o,r.items)}else{t=_C(t,this._config.multiplier),t=this.addFallbackUnit(t);const o=s.pop(),a=function SSe(n,e){const t=yZ(e.directionality,e.layout),i={..._Z};return i[t]=n,i}(t,r);this._styler.applyStyleToElements(a,s),this._styler.applyStyleToElements(_Z,[o])}}addFallbackUnit(t){return isNaN(+t)?t:`${t}${this._config.defaultUnit}`}}return n.\u0275fac=function(t){return new(t||n)(Xe(Ga),Xe(ph))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vSe=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let _Se=(()=>{class n extends D1{constructor(t,i,r,s,o,a){super(t,o,s,a),this.zone=i,this.directionality=r,this.styleUtils=s,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new $e;const c=[this.directionality.change,this.observerSubject.asObservable()];this.init(c),this.marshal.trackValue(this.nativeElement,"layout").pipe(Ua(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const t=this.nativeElement.children,i=[];for(let r=t.length;r--;)i[r]=t[r];return i}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(t){const r=t.value.split(" ");this.layout=r[0],vC.find(s=>s===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(t){const i=this.childrenNodes.filter(r=>1===r.nodeType&&this.willDisplay(r)).sort((r,s)=>{const o=+this.styler.lookupStyle(r,"order"),a=+this.styler.lookupStyle(s,"order");return isNaN(o)||isNaN(a)||o===a?0:o>a?1:-1});if(i.length>0){const r=this.directionality.value,s=this.layout;"row"===s&&"rtl"===r?this.styleCache=ySe:"row"===s&&"rtl"!==r?this.styleCache=bSe:"column"===s&&"rtl"===r?this.styleCache=wSe:"column"===s&&"rtl"!==r&&(this.styleCache=xSe),this.addStyles(t,{directionality:r,items:i,layout:s})}}clearStyles(){const t=Object.keys(this.mru).length>0,i=t?"padding":yZ(this.directionality.value,this.layout);t&&super.clearStyles(),this.styleUtils.applyStyleToElements({[i]:""},this.childrenNodes)}willDisplay(t){const i=this.marshal.getValue(t,"show-hide");return!0===i||void 0===i&&"none"!==this.styleUtils.lookupStyle(t,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{typeof MutationObserver<"u"&&(this.observer=new MutationObserver(t=>{t.some(r=>r.addedNodes&&r.addedNodes.length>0||r.removedNodes&&r.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(cr),U(Sf),U(Ga),U(ASe),U(l1))},n.\u0275dir=gt({type:n,features:[jt]}),n})(),Sv=(()=>{class n extends _Se{constructor(){super(...arguments),this.inputs=vSe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[jt]}),n})();const ySe=new Map,wSe=new Map,bSe=new Map,xSe=new Map,yC=" grid";function yZ(n,e){switch(e){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":default:return"rtl"===n?"margin-left":"margin-right";case"row-reverse":return"rtl"===n?"margin-right":"margin-left"}}let ESe=(()=>{class n extends q1{constructor(t){super(),this.layoutConfig=t}buildStyles(t,i){let[r,s,...o]=t.split(" "),a=o.join(" ");const c=i.direction.indexOf("column")>-1?"column":"row",l=Cv(c)?"max-width":"max-height",u=Cv(c)?"min-width":"min-height",f=String(a).indexOf("calc")>-1,p=f||"auto"===a,g=String(a).indexOf("%")>-1&&!f,v=String(a).indexOf("px")>-1||String(a).indexOf("rem")>-1||String(a).indexOf("em")>-1||String(a).indexOf("vw")>-1||String(a).indexOf("vh")>-1;let _=f||v;r="0"==r?0:r,s="0"==s?0:s;const w=!r&&!s;let b={};const x={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(a||""){case"":const M=!1!==this.layoutConfig.useColumnBasisZero;a="row"===c?"0%":M?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,a="auto";break;case"grow":a="100%";break;case"noshrink":s=0,a="auto";break;case"auto":break;case"none":r=0,s=0,a="auto";break;default:!_&&!g&&!isNaN(a)&&(a+="%"),"0%"===a&&(_=!0),"0px"===a&&(a="0%"),b=Df(x,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":_?a:"100%"}:{flex:`${r} ${s} ${_?a:"100%"}`})}return b.flex||b["flex-grow"]||(b=Df(x,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`})),"0%"!==a&&"0px"!==a&&"0.000000001px"!==a&&"auto"!==a&&(b[u]=w||_&&r?a:null,b[l]=w||!p&&s?a:null),b[u]||b[l]?i.hasWrap&&(b[f?"flex-basis":"flex"]=b[l]?f?b[l]:`${r} ${s} ${b[l]}`:f?b[u]:`${r} ${s} ${b[u]}`):b=Df(x,f?{"flex-grow":r,"flex-shrink":s,"flex-basis":a}:{flex:`${r} ${s} ${a}`}),Df(b,{"box-sizing":"border-box"})}}return n.\u0275fac=function(t){return new(t||n)(Xe(ph))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TSe=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let LSe=(()=>{class n extends D1{constructor(t,i,r,s,o){super(t,s,i,o),this.layoutConfig=r,this.marshal=o,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(Ua(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(Ua(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const r=t.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),o=this.wrap;s&&o?this.styleCache=RSe:s&&!o?this.styleCache=DSe:!s&&o?this.styleCache=BSe:!s&&!o&&(this.styleCache=ISe);const c=gZ(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(c.join(" "),{direction:r,hasWrap:o})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const i=gZ(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(Ga),U(ph),U(ESe),U(l1))},n.\u0275dir=gt({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[jt]}),n})(),Ak=(()=>{class n extends LSe{constructor(){super(...arguments),this.inputs=TSe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[jt]}),n})();const DSe=new Map,ISe=new Map,RSe=new Map,BSe=new Map;let nEe=(()=>{class n extends q1{buildStyles(t,i){const r={},[s,o]=t.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return Df(r,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===o?Cv(i.layout)?null:"100%":null,"max-height":"stretch"===o&&Cv(i.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iEe=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let rEe=(()=>{class n extends D1{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Ua(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const i=this.layout||"row",r=this.inline;"row"===i&&r?this.styleCache=lEe:"row"!==i||r?"row-reverse"===i&&r?this.styleCache=hEe:"row-reverse"!==i||r?"column"===i&&r?this.styleCache=uEe:"column"!==i||r?"column-reverse"===i&&r?this.styleCache=fEe:"column-reverse"===i&&!r&&(this.styleCache=cEe):this.styleCache=oEe:this.styleCache=aEe:this.styleCache=sEe,this.addStyles(t,{layout:i,inline:r})}onLayoutChange(t){const i=t.value.split(" ");this.layout=i[0],this.inline=t.value.includes("inline"),vC.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(Ga),U(nEe),U(l1))},n.\u0275dir=gt({type:n,features:[jt]}),n})(),w0=(()=>{class n extends rEe{constructor(){super(...arguments),this.inputs=iEe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[jt]}),n})();const sEe=new Map,oEe=new Map,aEe=new Map,cEe=new Map,lEe=new Map,uEe=new Map,hEe=new Map,fEe=new Map;let wZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[fk,pp]}),n})();var vl=(()=>{return(n=vl||(vl={})).primary="primary",n.accent="accent",n.warn="warn",n.color0="color-0",n.color5="color-5",n.color10="color-10",n.color15="color-15",n.color20="color-20",n.color30="color-30",n.color40="color-40",n.color50="color-50",n.color60="color-60",n.color70="color-70",n.color80="color-80",n.color90="color-90",n.color100="color-100",vl;var n})();let Ev=(()=>{class n{constructor(){this.colors={}}add(t,i){const r=i.replace("rgb(","").replace(")","");this.colors[t]=r.split(", ").map(s=>Number(s))}rgb(t){const[i,r,s]=this.colors[t];return`rgb(${i}, ${r}, ${s})`}rgba(t,i){const[r,s,o]=this.colors[t];return`rgba(${r}, ${s}, ${o}, ${i})`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dEe=["primary"];function pEe(n,e){if(1&n&&(B(0,"div"),H(1),z()),2&n){const t=e.$implicit;c4("background:var(--"+t+")"),ka("mat-button ",t,""),K(1),Nn(" ",t,"")}}let gEe=(()=>{class n{constructor(t,i){this.colorService=t,this.host=i,this.keys=Object.values(vl)}ngAfterViewInit(){this.parseColors()}parseColors(){const t=this.host.nativeElement;this.keys.forEach(i=>{const r=t.querySelector(`.${i}`);if(!r)return;const s=getComputedStyle(r).backgroundColor;this.colorService.add(i,s)})}debug(t,i){console.log(`%c ${t}: ${i}`,`background: ${i}; color: ${this.invertColor(i)}`)}invertColor(t,i=!0){function r(c){return`${c}`.padStart(3,"0")}let[s,o,a]=t.replace(")","").replace("rgb(","").split(", ");return i?.299*s+.587*o+.114*a>186?"#000000":"#FFFFFF":(s=255-s,o=255-o,a=255-a,"#"+r(s)+r(o)+r(a))}}return n.\u0275fac=function(t){return new(t||n)(U(Ev),U(mn))},n.\u0275cmp=Sn({type:n,selectors:[["color"]],viewQuery:function(t,i){if(1&t&&_o(dEe,5),2&t){let r;Gi(r=Qi())&&(i.primary=r.first)}},decls:1,vars:1,consts:[[3,"class","style",4,"ngFor","ngForOf"]],template:function(t,i){1&t&&Dt(0,pEe,2,6,"div",0),2&t&&ge("ngForOf",i.keys)},dependencies:[t3],styles:["[_nghost-%COMP%]{display:none}"]}),n})();const AEe=["mat-button",""],vEe=["*"],yEe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],wEe=wp(m7(_0(class{constructor(n){this._elementRef=n}})));let Tv=(()=>{class n extends wEe{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of yEe)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(p4),U(l4,8))},n.\u0275cmp=Sn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&_o(y0,5),2&t){let r;Gi(r=Qi())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(Jr("disabled",i.disabled||null),$r("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[jt],attrs:AEe,ngContentSelectors:vEe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(T1(),B(0,"span",0),Do(1),z(),Ue(2,"span",1)(3,"span",2)),2&t&&(K(2),$r("mat-button-ripple-round",i.isRoundButton||i.isIconButton),ge("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[y0],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),vk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[fh,Yi,Yi]}),n})();function bZ(n,e){return e?t=>sv(e.pipe(vc(1),function bEe(){return sn((n,e)=>{n.subscribe(on(e,et))})}()),t.pipe(bZ(n))):Ri((t,i)=>n(t,i).pipe(vc(1),iX(t)))}function xZ(n,e=ev){const t=uB(n,e);return bZ(()=>t)}class _k{}const Bf="*";function u2(n,e){return{type:7,name:n,definitions:e,options:{}}}function ho(n,e=null){return{type:4,styles:e,timings:n}}function CZ(n,e=null){return{type:3,steps:n,options:e}}function MZ(n,e=null){return{type:2,steps:n,options:e}}function Bi(n){return{type:6,styles:n,offset:null}}function wo(n,e,t){return{type:0,name:n,styles:e,options:t}}function bo(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function yk(n=null){return{type:9,options:n}}function wk(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function SZ(n){Promise.resolve().then(n)}class Lv{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){SZ(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class EZ{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?SZ(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const MEe=["mat-menu-item",""];function SEe(n,e){1&n&&(eo(),B(0,"svg",2),Ue(1,"polygon",3),z())}const TZ=["*"];function EEe(n,e){if(1&n){const t=no();B(0,"div",0),Kt("keydown",function(r){return zn(t),h(Ft()._handleKeydown(r))})("click",function(){return zn(t),h(Ft().closed.emit("click"))})("@transformMenu.start",function(r){return zn(t),h(Ft()._onAnimationStart(r))})("@transformMenu.done",function(r){return zn(t),h(Ft()._onAnimationDone(r))}),B(1,"div",1),Do(2),z()()}if(2&n){const t=Ft();ge("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),Jr("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const wC={transformMenu:u2("transformMenu",[wo("void",Bi({opacity:0,transform:"scale(0.8)"})),bo("void => enter",ho("120ms cubic-bezier(0, 0, 0.2, 1)",Bi({opacity:1,transform:"scale(1)"}))),bo("* => void",ho("100ms 25ms linear",Bi({opacity:0})))]),fadeInItems:u2("fadeInItems",[wo("showing",Bi({opacity:1})),bo("void => *",[Bi({opacity:0}),ho("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},TEe=new zt("MatMenuContent"),xk=new zt("MAT_MENU_PANEL"),LEe=_0(m7(class{}));let w7=(()=>{class n extends LEe{constructor(t,i,r,s,o){super(),this._elementRef=t,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new $e,this._focused=new $e,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),i=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(Wi),U(p4),U(xk,8),U(mc))},n.\u0275cmp=Sn({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,i){1&t&&Kt("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&t&&(Jr("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),$r("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[jt],attrs:MEe,ngContentSelectors:TZ,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,i){1&t&&(T1(),Do(0),Ue(1,"div",0),Dt(2,SEe,2,0,"svg",1)),2&t&&(K(1),ge("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),K(1),ge("ngIf",i._triggersSubmenu))},dependencies:[D2,y0],encapsulation:2,changeDetection:0}),n})();const LZ=new zt("mat-menu-default-options",{providedIn:"root",factory:function DEe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let IEe=0,Dv=(()=>{class n{constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Jg,this._tabSubscription=Te.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new $e,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new sr,this.close=this.closed,this.panelId="mat-menu-panel-"+IEe++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Hr(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Hr(t)}set panelClass(t){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new wY(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(m0(this._directDescendantItems),f4(t=>Jc(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const i=this._keyManager;if("enter"===this._panelAnimationState&&i.activeItem?._hasFocus()){const r=t.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(m0(this._directDescendantItems),f4(i=>Jc(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const i=t.keyCode,r=this._keyManager;switch(i){case 27:yp(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(vc(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const i=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,i=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===t,r["mat-menu-after"]="after"===t,r["mat-menu-above"]="above"===i,r["mat-menu-below"]="below"===i,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(m0(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(cr),U(LZ),U(mc))},n.\u0275dir=gt({type:n,contentQueries:function(t,i,r){if(1&t&&(a1(r,TEe,5),a1(r,w7,5),a1(r,w7,4)),2&t){let s;Gi(s=Qi())&&(i.lazyContent=s.first),Gi(s=Qi())&&(i._allItems=s),Gi(s=Qi())&&(i.items=s)}},viewQuery:function(t,i){if(1&t&&_o(a2,5),2&t){let r;Gi(r=Qi())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),DZ=(()=>{class n extends Dv{constructor(t,i,r,s){super(t,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(cr),U(LZ),U(mc))},n.\u0275cmp=Sn({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,i){2&t&&Jr("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[rr([{provide:xk,useExisting:n}]),jt],ngContentSelectors:TZ,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,i){1&t&&(T1(),Dt(0,EEe,3,6,"ng-template"))},dependencies:[K9],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[wC.transformMenu,wC.fadeInItems]},changeDetection:0}),n})();const IZ=new zt("mat-menu-scroll-strategy"),BEe={provide:IZ,deps:[Mu],useFactory:function REe(n){return()=>n.scrollStrategies.reposition()}},RZ=a6({passive:!0});let kEe=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u){this._overlay=t,this._element=i,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=c,this._focusMonitor=l,this._ngZone=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Te.EMPTY,this._hoverSubscription=Te.EMPTY,this._menuCloseSubscription=Te.EMPTY,this._handleTouchStart=f=>{ek(f)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new sr,this.onMenuOpen=this.menuOpened,this.menuClosed=new sr,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof Dv?o:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,RZ),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,RZ),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const i=this._createOverlay(t),r=i.getConfig(),s=r.positionStrategy;this._setPosition(t,s),r.hasBackdrop=t.hasBackdrop??!this.triggersSubmenu(),i.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof Dv&&(t._startAnimation(),t._directDescendantItems.changes.pipe(Ua(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof Dv?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(zo(r=>"void"===r.toState),vc(1),Ua(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let i=0,r=t.parentMenu;for(;r;)i++,r=r.parentMenu;t.setElevation(i)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_createOverlay(t){if(!this._overlayRef){const i=this._getOverlayConfig(t);this._subscribeToPositions(t,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new _B({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,i){t.setPositionClasses&&i.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,o)):t.setPositionClasses(s,o)})}_setPosition(t,i){let[r,s]="before"===t.xPosition?["end","start"]:["start","end"],[o,a]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[c,l]=[o,a],[u,f]=[r,s],p=0;if(this.triggersSubmenu()){if(f=r="before"===t.xPosition?"start":"end",s=u="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const g=this._parentMaterialMenu.items.first;this._parentInnerPadding=g?g._getHostElement().offsetTop:0}p="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(c="top"===o?"bottom":"top",l="top"===a?"bottom":"top");i.withPositions([{originX:r,originY:c,overlayX:u,overlayY:o,offsetY:p},{originX:s,originY:c,overlayX:f,overlayY:o,offsetY:p},{originX:r,originY:l,overlayX:u,overlayY:a,offsetY:-p},{originX:s,originY:l,overlayX:f,overlayY:a,offsetY:-p}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),i=this._overlayRef.detachments();return Jc(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:di(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(zo(o=>o!==this._menuItemInstance),zo(()=>this._menuOpen)):di(),i)}_handleMousedown(t){JB(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const i=t.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(zo(t=>t===this._menuItemInstance&&!t.disabled),xZ(0,lB)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Dv&&this.menu._isAnimating?this.menu._animationDone.pipe(vc(1),xZ(0,lB),Ua(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new Dx(t.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(U(Mu),U(mn),U(Nc),U(IZ),U(xk,8),U(w7,10),U(Sf,8),U(p4),U(cr))},n.\u0275dir=gt({type:n,hostVars:3,hostBindings:function(t,i){1&t&&Kt("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&t&&Jr("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),BZ=(()=>{class n extends kEe{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[jt]}),n})(),FEe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[BEe],imports:[n3,Yi,fh,l6,gp,Yi]}),n})();const PEe=["menu"];function HEe(n,e){1&n&&(B(0,"button",44),H(1,"Planning & Costs"),z()),2&n&&(Ft(),ge("matMenuTriggerFor",Si(96)))}function zEe(n,e){1&n&&(B(0,"mat-icon"),H(1,"light_mode"),z())}function OEe(n,e){1&n&&(B(0,"mat-icon"),H(1,"dark_mode"),z())}function NEe(n,e){if(1&n){const t=no();B(0,"button",45,46),Kt("click",function(){return zn(t),h(Ft().click())}),B(2,"mat-icon"),H(3,"garage"),z(),B(4,"span"),H(5,"Garage"),z()()}2&n&&ge("disabled",Si(1).isActive)}function VEe(n,e){if(1&n){const t=no();B(0,"button",47,48),Kt("click",function(){return zn(t),h(Ft().click())}),B(2,"mat-icon"),H(3,"solar_power"),z(),B(4,"span"),H(5,"Solar"),z()()}2&n&&ge("disabled",Si(1).isActive)}function UEe(n,e){if(1&n){const t=no();B(0,"button",49,50),Kt("click",function(){return zn(t),h(Ft().click())}),B(2,"mat-icon"),H(3,"calendar_month"),z(),B(4,"span"),H(5,"Planning Depth"),z()()}2&n&&ge("disabled",Si(1).isActive)}let GEe=(()=>{class n{constructor(t){this.appService=t,this.version="2023.2.0",this.title=this.appService.title,this.private=!1}ngAfterViewInit(){}click(){}get darkMode(){return this.appService.darkMode}set darkMode(t){this.appService.setDarkMode(t,!0)}}return n.\u0275fac=function(t){return new(t||n)(U(io))},n.\u0275cmp=Sn({type:n,selectors:[["app-sidemenu"]],viewQuery:function(t,i){if(1&t&&_o(PEe,5,mn),2&t){let r;Gi(r=Qi())&&(i.menu=r.first)}},decls:110,vars:25,consts:[["mat-button","",3,"matMenuTriggerFor"],["menu",""],[2,"color","var(--color-70)"],["mainMenu","matMenu"],["mat-menu-item","","routerLink","/house",3,"matMenuTriggerFor"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","","style","opacity:0.5;",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","","routerLink","/about","routerLinkActive","active",3,"disabled","click"],["about","routerLinkActive"],["mat-menu-item","",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","16px"],[4,"ngIf"],["house","matMenu"],["mat-menu-item","","routerLink","/house","routerLinkActive","active",3,"disabled","click"],["house2d","routerLinkActive"],[2,"font-family","Material Icons Outlined"],["mat-menu-item","","routerLink","/house3d","routerLinkActive","active",3,"disabled","click"],["house3d","routerLinkActive"],["constructions","matMenu"],["mat-menu-item","","routerLink","/construction","routerLinkActive","active",3,"disabled","click"],["construction","routerLinkActive"],["mat-menu-item","","routerLink","/stairs","routerLinkActive","active",3,"disabled","click"],["stairs","routerLinkActive"],["style","opacity:0.5;","mat-menu-item","","routerLink","/garage","routerLinkActive","active",3,"disabled","click",4,"ngIf"],["situation","matMenu"],["mat-menu-item","","routerLink","/map","routerLinkActive","active",3,"disabled","click"],["map","routerLinkActive"],["installations","matMenu"],["mat-menu-item","","routerLink","/wired","routerLinkActive","active",3,"disabled","click"],["wired","routerLinkActive"],["mat-menu-item","","routerLink","/installations","routerLinkActive","active",3,"disabled","click"],["installation","routerLinkActive"],["style","opacity:0.5;","mat-menu-item","","routerLink","/solar","routerLinkActive","active",3,"disabled","click",4,"ngIf"],["depth","matMenu"],["mat-menu-item","","routerLink","/energy&heat","routerLinkActive","active",3,"disabled","click"],["energyheat","routerLinkActive"],["mat-menu-item","","routerLink","/rain","routerLinkActive","active",3,"disabled","click"],["rain","routerLinkActive"],["planningAndCosts","matMenu"],["mat-menu-item","","routerLink","/costs","routerLinkActive","active",3,"disabled","click"],["costs","routerLinkActive"],["mat-menu-item","","routerLink","/planning","routerLinkActive","active",3,"disabled","click"],["planning","routerLinkActive"],["style","opacity:0.5;","mat-menu-item","","routerLink","/planning_in_depth","routerLinkActive","active",3,"disabled","click",4,"ngIf"],["mat-menu-item","",2,"opacity","0.5",3,"matMenuTriggerFor"],["mat-menu-item","","routerLink","/garage","routerLinkActive","active",2,"opacity","0.5",3,"disabled","click"],["garage","routerLinkActive"],["mat-menu-item","","routerLink","/solar","routerLinkActive","active",2,"opacity","0.5",3,"disabled","click"],["solar","routerLinkActive"],["mat-menu-item","","routerLink","/planning_in_depth","routerLinkActive","active",2,"opacity","0.5",3,"disabled","click"],["planningDepth","routerLinkActive"]],template:function(t,i){if(1&t&&(B(0,"button",0,1)(2,"mat-icon",2),H(3,"menu"),z()(),B(4,"mat-menu",null,3)(6,"button",4),H(7,"The house"),z(),B(8,"button",5),H(9,"Construction"),z(),B(10,"button",5),H(11,"Situation"),z(),B(12,"button",5),H(13,"Installations"),z(),Dt(14,HEe,2,1,"button",6),B(15,"button",7,8),Kt("click",function(){return i.click()}),B(17,"mat-icon"),H(18,"people_outline"),z(),B(19,"span"),H(20,"About us"),z()(),B(21,"button",9),Kt("click",function(){return i.darkMode=!i.darkMode}),B(22,"span",10),Dt(23,zEe,2,0,"mat-icon",11),Dt(24,OEe,2,0,"mat-icon",11),B(25,"span"),H(26),z()()()(),B(27,"mat-menu",null,12)(29,"button",13,14),Kt("click",function(){return i.click()}),B(31,"mat-icon",15),H(32,"home"),z(),B(33,"span"),H(34,"The house 2D"),z()(),B(35,"button",16,17),Kt("click",function(){return i.click()}),B(37,"mat-icon",15),H(38,"gite"),z(),B(39,"span"),H(40,"The house 3D"),z()()(),B(41,"mat-menu",null,18)(43,"button",19,20),Kt("click",function(){return i.click()}),B(45,"mat-icon"),H(46,"handyman"),z(),B(47,"span"),H(48,"Construction"),z()(),B(49,"button",21,22),Kt("click",function(){return i.click()}),B(51,"mat-icon",15),H(52,"stairs"),z(),B(53,"span"),H(54,"Stairs"),z()(),Dt(55,NEe,6,1,"button",23),z(),B(56,"mat-menu",null,24)(58,"button",25,26),Kt("click",function(){return i.click()}),B(60,"mat-icon"),H(61,"pin_drop"),z(),B(62,"span"),H(63,"Map"),z()()(),B(64,"mat-menu",null,27)(66,"button",28,29),Kt("click",function(){return i.click()}),B(68,"mat-icon"),H(69,"bolt"),z(),B(70,"span"),H(71,"Wired"),z()(),B(72,"button",30,31),Kt("click",function(){return i.click()}),B(74,"mat-icon"),H(75,"solar_power"),z(),B(76,"span"),H(77,"Installations"),z()(),Dt(78,VEe,6,1,"button",32),B(79,"button",5),H(80,"More in depth"),z()(),B(81,"mat-menu",null,33)(83,"button",34,35),Kt("click",function(){return i.click()}),B(85,"mat-icon"),H(86,"fireplace"),z(),B(87,"span"),H(88,"Energy & heat"),z()(),B(89,"button",36,37),Kt("click",function(){return i.click()}),B(91,"mat-icon"),H(92,"rainy"),z(),B(93,"span"),H(94,"Rain"),z()()(),B(95,"mat-menu",null,38)(97,"button",39,40),Kt("click",function(){return i.click()}),B(99,"mat-icon",15),H(100,"savings"),z(),B(101,"span"),H(102,"Costs"),z()(),B(103,"button",41,42),Kt("click",function(){return i.click()}),B(105,"mat-icon"),H(106,"calendar_month"),z(),B(107,"span"),H(108,"Planning"),z()(),Dt(109,UEe,6,1,"button",43),z()),2&t){const r=Si(5),s=Si(16),o=Si(28),a=Si(30),c=Si(36),l=Si(42),u=Si(44),f=Si(50),p=Si(57),g=Si(59),v=Si(65),_=Si(67),w=Si(73),b=Si(82),x=Si(84),M=Si(90),E=Si(98),I=Si(104);ge("matMenuTriggerFor",r),K(6),ge("matMenuTriggerFor",o),K(2),ge("matMenuTriggerFor",l),K(2),ge("matMenuTriggerFor",p),K(2),ge("matMenuTriggerFor",v),K(2),ge("ngIf",i.private),K(1),ge("disabled",s.isActive),K(8),ge("ngIf",i.darkMode),K(1),ge("ngIf",!i.darkMode),K(2),Nn("",i.darkMode?"Light":"Dark"," mode"),K(3),ge("disabled",a.isActive),K(6),ge("disabled",c.isActive),K(8),ge("disabled",u.isActive),K(6),ge("disabled",f.isActive),K(6),ge("ngIf",i.private),K(3),ge("disabled",g.isActive),K(8),ge("disabled",_.isActive),K(6),ge("disabled",w.isActive),K(6),ge("ngIf",i.private),K(1),ge("matMenuTriggerFor",b),K(4),ge("disabled",x.isActive),K(6),ge("disabled",M.isActive),K(8),ge("disabled",E.isActive),K(6),ge("disabled",I.isActive),K(6),ge("ngIf",i.private)}},dependencies:[D2,v7,Tv,DZ,w7,BZ,Sv,w0,_v,tY],styles:["[_nghost-%COMP%]{z-index:300;position:fixed;border-right:1px solid var(--color-30);border-bottom:1px solid var(--color-30);background-color:var(--color-0)}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{height:48px;width:48px;min-width:0;padding:0}"]}),n})();function QEe(n,e){if(1&n){const t=no();B(0,"div",3),Kt("click",function(){return zn(t),h(Ft().readMobile=!0)}),B(1,"div",4),H(2," You are using a mobile device."),Ue(3,"br")(4,"br"),H(5," We put a lot of effort in this side, but it near impossible to make it work on mobile devices. "),Ue(6,"br")(7,"br"),H(8,"Please use a desktop or laptop to view this site."),Ue(9,"br")(10,"br")(11,"br"),H(12,"X close "),z()()}}let WEe=(()=>{class n{constructor(t,i,r){this.appService=t,this.router=i,this.iconRegistry=r,this.onStart=!0,this.isMobile=navigator.userAgentData.mobile,this.readMobile=!1,this.iconRegistry.setDefaultFontSetClass("material-symbols-outlined")}ngOnInit(){this.router.events.pipe(zo(t=>t instanceof uh),Ut(t=>t.urlAfterRedirects.split("?")[0]),function MCe(n,e){return sn((t,i)=>{const r=new Set;t.subscribe(on(i,s=>{const o=n?n(s):s;r.has(o)||(r.add(o),i.next(s))})),e?.subscribe(on(i,()=>r.clear(),et))})}()).subscribe(t=>{this.onStart?this.onStart=!1:window.scrollTo(0,0)})}ngAfterViewInit(){}}return n.\u0275fac=function(t){return new(t||n)(U(io),U(_c),U(A7))},n.\u0275cmp=Sn({type:n,selectors:[["app-root"]],decls:7,vars:1,consts:[[1,"mat-button","mat-primary",2,"display","none"],["primary",""],["class","is-mobile",3,"click",4,"ngIf"],[1,"is-mobile",3,"click"],["fxLayoutAlign","center center"]],template:function(t,i){1&t&&(Ue(0,"app-sidemenu")(1,"color")(2,"div",0,1),Dt(4,QEe,13,0,"div",2),B(5,"main"),Ue(6,"router-outlet"),z()),2&t&&(K(4),ge("ngIf",i.isMobile&&!i.readMobile))},dependencies:[D2,w0,$x,gEe,GEe],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}main[_ngcontent-%COMP%]{min-height:calc(100vh - 56px)}.mat-drawer-content[_ngcontent-%COMP%]{overflow-y:hidden}.is-mobile[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;cursor:pointer}.is-mobile[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--color-80);opacity:.5}.is-mobile[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;border-radius:8px;padding:16px 32px;margin:5vh 10vw;background:var(--color-0);box-sizing:border-box;font-size:18px;line-height:18px}']}),n})();function kZ(n){return new Jt(3e3,!1)}function STe(){return typeof window<"u"&&typeof window.document<"u"}function Ck(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function A6(n){switch(n.length){case 0:return new Lv;case 1:return n[0];default:return new EZ(n)}}function FZ(n,e,t,i,r=new Map,s=new Map){const o=[],a=[];let c=-1,l=null;if(i.forEach(u=>{const f=u.get("offset"),p=f==c,g=p&&l||new Map;u.forEach((v,_)=>{let w=_,b=v;if("offset"!==_)switch(w=e.normalizePropertyName(w,o),b){case"!":b=r.get(_);break;case Bf:b=s.get(_);break;default:b=e.normalizeStyleValue(_,w,b,o)}g.set(w,b)}),p||a.push(g),l=g,c=f}),o.length)throw function pTe(n){return new Jt(3502,!1)}();return a}function Mk(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Sk(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Sk(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Sk(t,"destroy",n)))}}function Sk(n,e,t){const s=Ek(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function Ek(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Su(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function PZ(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Tk=(n,e)=>!1,HZ=(n,e,t)=>[],zZ=null;function Lk(n){const e=n.parentNode||n.host;return e===zZ?null:e}(Ck()||typeof Element<"u")&&(STe()?(zZ=(()=>document.documentElement)(),Tk=(n,e)=>{for(;e;){if(e===n)return!0;e=Lk(e)}return!1}):Tk=(n,e)=>n.contains(e),HZ=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Cp=null,OZ=!1;const NZ=Tk,VZ=HZ;let UZ=(()=>{class n{validateStyleProperty(t){return function TTe(n){Cp||(Cp=function LTe(){return typeof document<"u"?document.body:null}()||{},OZ=!!Cp.style&&"WebkitAppearance"in Cp.style);let e=!0;return Cp.style&&!function ETe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Cp.style,!e&&OZ&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Cp.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return NZ(t,i)}getParentElement(t){return Lk(t)}query(t,i,r){return VZ(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],c){return new Lv(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),Dk=(()=>{class n{}return n.NOOP=new UZ,n})();const Ik="ng-enter",bC="ng-leave",xC="ng-trigger",CC=".ng-trigger",QZ="ng-animating",Rk=".ng-animating";function kf(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Bk(parseFloat(e[1]),e[2])}function Bk(n,e){return"s"===e?1e3*n:n}function MC(n,e,t){return n.hasOwnProperty("duration")?n:function RTe(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(kZ()),{duration:0,delay:0,easing:""};r=Bk(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=Bk(parseFloat(c),a[4]));const l=a[5];l&&(o=l)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push(function jEe(){return new Jt(3100,!1)}()),a=!0),s<0&&(e.push(function $Ee(){return new Jt(3101,!1)}()),a=!0),a&&e.splice(c,0,kZ())}return{duration:r,delay:s,easing:o}}(n,e,t)}function Iv(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function WZ(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function v6(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function $Z(n,e,t){return t?e+":"+t+";":""}function KZ(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=$Z(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=$Z(0,PTe(t),n.style[t]));n.setAttribute("style",e)}function b0(n,e,t){n.style&&(e.forEach((i,r)=>{const s=Fk(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),Ck()&&KZ(n))}function Mp(n,e){n.style&&(e.forEach((t,i)=>{const r=Fk(i);n.style[r]=""}),Ck()&&KZ(n))}function Rv(n){return Array.isArray(n)?1==n.length?n[0]:MZ(n):n}const kk=new RegExp("{{\\s*(.+?)\\s*}}","g");function qZ(n){let e=[];if("string"==typeof n){let t;for(;t=kk.exec(n);)e.push(t[1]);kk.lastIndex=0}return e}function Bv(n,e,t){const i=n.toString(),r=i.replace(kk,(s,o)=>{let a=e[o];return null==a&&(t.push(function qEe(n){return new Jt(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function SC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const FTe=/-+([a-z0-9])/g;function Fk(n){return n.replace(FTe,(...e)=>e[1].toUpperCase())}function PTe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Eu(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function XEe(n){return new Jt(3004,!1)}()}}function XZ(n,e){return window.getComputedStyle(n)[e]}function UTe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function GTe(n,e,t){if(":"==n[0]){const c=function QTe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function uTe(n){return new Jt(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function lTe(n){return new Jt(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(YZ(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(YZ(o,r))}(i,t,e)):t.push(n),t}const DC=new Set(["true","1"]),IC=new Set(["false","0"]);function YZ(n,e){const t=DC.has(n)||IC.has(n),i=DC.has(e)||IC.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?DC.has(n):IC.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?DC.has(e):IC.has(e)),o&&a}}const WTe=new RegExp("s*:selfs*,?","g");function Pk(n,e,t,i){return new jTe(n).build(e,t,i)}class jTe{constructor(e){this._driver=e}build(e,t,i){const r=new qTe(t);return this._resetContextStyleTimingState(r),Eu(this,Rv(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function ZEe(){return new Jt(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(1==a.type){const c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push(function JEe(){return new Jt(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{qZ(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&(SC(s.values()),t.errors.push(function eTe(n,e){return new Jt(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Eu(this,Rv(e.animation),t);return{type:1,matchers:UTe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Sp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Eu(this,i,t)),options:Sp(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Eu(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Sp(e.options)}}visitAnimate(e,t){const i=function YTe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Hk(MC(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Hk(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=MC(t,e);return Hk(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Bi({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};i.easing&&(l.easing=i.easing),o=Bi(l)}t.currentTime+=i.duration+i.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Bf?i.push(a):t.errors.push(new Jt(3002,!1)):i.push(WZ(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c);let f=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function nTe(n,e,t,i,r){return new Jt(3010,!1)}()),f=!1),s=u.startTime),f&&l.set(c,{startTime:s,endTime:r}),t.options&&function kTe(n,e,t){const i=e.params||{},r=qZ(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function KEe(n){return new Jt(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function iTe(){return new Jt(3011,!1)}()),i;let s=0;const o=[];let a=!1,c=!1,l=0;const u=e.steps.map(b=>{const x=this._makeStyleAst(b,t);let M=null!=x.offset?x.offset:function XTe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(x.styles),E=0;return null!=M&&(s++,E=x.offset=M),c=c||E<0||E>1,a=a||E<l,l=E,o.push(E),x});c&&t.errors.push(function rTe(){return new Jt(3012,!1)}()),a&&t.errors.push(function sTe(){return new Jt(3200,!1)}());const f=e.steps.length;let p=0;s>0&&s<f?t.errors.push(function oTe(){return new Jt(3202,!1)}()):0==s&&(p=1/(f-1));const g=f-1,v=t.currentTime,_=t.currentAnimateTimings,w=_.duration;return u.forEach((b,x)=>{const M=p>0?x==g?1:p*x:o[x],E=M*w;t.currentTime=v+_.delay+E,_.duration=E,this._validateStyleAst(b,t),b.offset=M,i.styles.push(b)}),i}visitReference(e,t){return{type:8,animation:Eu(this,Rv(e.animation),t),options:Sp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Sp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Sp(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function $Te(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(WTe,"")),n=n.replace(/@\*/g,CC).replace(/@\w+/g,t=>CC+"-"+t.slice(1)).replace(/:animating/g,Rk),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Su(t.collectedStyles,t.currentQuerySelector,new Map);const a=Eu(this,Rv(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Sp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function aTe(){return new Jt(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:MC(e.timings,t.errors,!0);return{type:12,animation:Eu(this,Rv(e.animation),t),timings:i,options:null}}}class qTe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Sp(n){return n?(n=Iv(n)).params&&(n.params=function KTe(n){return n?Iv(n):null}(n.params)):n={},n}function Hk(n,e,t){return{duration:n,delay:e,easing:t}}function zk(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class RC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const eLe=new RegExp(":enter","g"),nLe=new RegExp(":leave","g");function Ok(n,e,t,i,r,s=new Map,o=new Map,a,c,l=[]){return(new iLe).buildKeyframes(n,e,t,i,r,s,o,a,c,l)}class iLe{buildKeyframes(e,t,i,r,s,o,a,c,l,u=[]){l=l||new RC;const f=new Nk(e,t,l,r,s,u,[]);f.options=c;const p=c.delay?kf(c.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([o],null,f.errors,c),Eu(this,i,f);const g=f.timelines.filter(v=>v.containsAnimation());if(g.length&&a.size){let v;for(let _=g.length-1;_>=0;_--){const w=g[_];if(w.element===t){v=w;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,f.errors,c)}return g.length?g.map(v=>v.buildKeyframes()):[zk(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimateRefDelay(e.animation,t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimateRefDelay(e,t,i){const r=e.options?.delay;if(!r)return;let s;s="string"==typeof r?kf(Bv(r,e.options?.params??{},t.errors)):r,i.delayNextStep(s)}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?kf(i.duration):null,a=null!=i.delay?kf(i.delay):null;return 0!==o&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Eu(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=BC);const o=kf(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Eu(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?kf(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Eu(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return MC(t.params?Bv(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?kf(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=BC);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;const f=t.createSubContext(e.options,l);s&&f.delayNextStep(s),l===t.element&&(c=f.currentTimeline),Eu(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime}const u=t.currentTimeline;c&&u.delayNextStep(c);const f=u.currentTime;Eu(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-f+(r.startTime-i.currentTimeline.startTime)}}const BC={};class Nk{constructor(e,t,i,r,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=BC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new kC(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=kf(i.duration)),null!=i.delay&&(r.delay=kf(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Bv(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new Nk(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=BC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new rLe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(eLe,"."+this._enterClassName)).replace(nLe,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=i);0!==i&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!s&&0==a.length&&o.push(function cTe(n){return new Jt(3014,!1)}()),a}}class kC{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new kC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Bf),this._currentKeyframe.set(t,Bf);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function sLe(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,Bf)}else v6(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const l=Bv(c,s,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Bf),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,c)=>{const l=v6(a,new Map,this._backFill);l.forEach((u,f)=>{"!"===u?e.add(f):u===Bf&&t.add(f)}),i||l.set("offset",c/this.duration),r.push(l)});const s=e.size?SC(e.values()):[],o=t.size?SC(t.values()):[];if(i){const a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return zk(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class rLe extends kC{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,c=v6(e[0]);c.set("offset",0),s.push(c);const l=v6(e[0]);l.set("offset",eJ(a)),s.push(l);const u=e.length-1;for(let f=1;f<=u;f++){let p=v6(e[f]);const g=p.get("offset");p.set("offset",eJ((t+g*i)/o)),s.push(p)}i=o,t=0,r="",e=s}return zk(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function eJ(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Vk{}const oLe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class aLe extends Vk{normalizePropertyName(e,t){return Fk(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(oLe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function YEe(n,e){return new Jt(3005,!1)}())}return o+s}}function tJ(n,e,t,i,r,s,o,a,c,l,u,f,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:f,errors:p}}const Uk={};class nJ{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function cLe(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,c,l,u){const f=[],p=this.ast.options&&this.ast.options.params||Uk,v=this.buildStyles(i,a&&a.params||Uk,f),_=c&&c.params||Uk,w=this.buildStyles(r,_,f),b=new Set,x=new Map,M=new Map,E="void"===r,I={params:lLe(_,p),delay:this.ast.options?.delay},k=u?[]:Ok(e,t,this.ast.animation,s,o,v,w,I,l,f);let O=0;if(k.forEach(P=>{O=Math.max(P.duration+P.delay,O)}),f.length)return tJ(t,this._triggerName,i,r,E,v,w,[],[],x,M,O,f);k.forEach(P=>{const Q=P.element,J=Su(x,Q,new Set);P.preStyleProps.forEach(Ae=>J.add(Ae));const Ce=Su(M,Q,new Set);P.postStyleProps.forEach(Ae=>Ce.add(Ae)),Q!==t&&b.add(Q)});const R=SC(b.values());return tJ(t,this._triggerName,i,r,E,v,w,k,R,x,M,O)}}function lLe(n,e){const t=Iv(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class uLe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=Iv(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Bv(o,r,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),i.set(c,o)})}),i}}class fLe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new uLe(r.style,r.options&&r.options.params||{},i))}),iJ(this.states,"true","1"),iJ(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new nJ(e,r,this.states))}),this.fallbackTransition=function dLe(n,e,t){return new nJ(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function iJ(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const pLe=new RC;class gLe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=Pk(this._driver,t,i,[]);if(i.length)throw function gTe(n){return new Jt(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=FZ(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=Ok(this._driver,t,s,Ik,bC,new Map,new Map,i,pLe,r),o.forEach(u=>{const f=Su(a,u.element,new Map);u.postStyleProps.forEach(p=>f.set(p,null))})):(r.push(function mTe(){return new Jt(3300,!1)}()),o=[]),r.length)throw function ATe(n){return new Jt(3504,!1)}();a.forEach((u,f)=>{u.forEach((p,g)=>{u.set(g,this._driver.computeStyle(f,g,Bf))})});const l=A6(o.map(u=>{const f=a.get(u.element);return this._buildPlayer(u,new Map,f)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function vTe(n){return new Jt(3301,!1)}();return t}listen(e,t,i,r){const s=Ek(t,"","","");return Mk(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const rJ="ng-animate-queued",Gk="ng-animate-disabled",yLe=[],sJ={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},wLe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},g4="__ng_removed";class Qk{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function MLe(n){return n??null}(i?e.value:e),i){const s=Iv(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const kv="void",Wk=new Qk(kv);class bLe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,m4(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function _Te(n,e){return new Jt(3302,!1)}();if(null==i||0==i.length)throw function yTe(n){return new Jt(3303,!1)}();if(!function SLe(n){return"start"==n||"done"==n}(i))throw function wTe(n,e){return new Jt(3400,!1)}();const s=Su(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Su(this._engine.statesByElement,e,new Map);return a.has(t)||(m4(e,xC),m4(e,xC+"-"+t),a.set(t,Wk)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function bTe(n){return new Jt(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new jk(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(m4(e,xC),m4(e,xC+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const l=new Qk(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=Wk),l.value!==kv&&c.value===l.value){if(!function LLe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,l.params)){const _=[],w=s.matchStyles(c.value,c.params,_),b=s.matchStyles(l.value,l.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{Mp(e,w),b0(e,b)})}return}const p=Su(this._engine.playersByElement,e,[]);p.forEach(_=>{_.namespaceId==this.id&&_.triggerName==t&&_.queued&&_.destroy()});let g=s.matchTransition(c.value,l.value,e,l.params),v=!1;if(!g){if(!r)return;g=s.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:c,toState:l,player:o,isFallbackTransition:v}),v||(m4(e,rJ),o.onStart(()=>{b7(e,rJ)})),o.onDone(()=>{let _=this.players.indexOf(o);_>=0&&this.players.splice(_,1);const w=this._engine.playersByElement.get(e);if(w){let b=w.indexOf(o);b>=0&&w.splice(b,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,CC,!0);i.forEach(r=>{if(r[g4])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){const u=this.trigger(e,l,kv,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&A6(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const c=this._triggers.get(o).fallbackTransition,l=i.get(o)||Wk,u=new Qk(kv),f=new jk(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:f,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[g4];(!s||s===sJ)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){m4(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const c=Ek(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,Mk(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class xLe{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new bLe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=r.get(a);if(c){const l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(FC(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!FC(t))return;const s=t[g4];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),m4(e,Gk)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),b7(e,Gk))}removeNode(e,t,i,r){if(FC(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[g4]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return FC(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,CC,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Rk,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return A6(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[g4];if(t&&t.setForRemoval){if(e[g4]=sJ,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Gk)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)m4(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?A6(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function xTe(n){return new Jt(3402,!1)}()}_flushAnimations(e,t){const i=new RC,r=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(X=>{u.add(X);const le=this.driver.query(X,".ng-animate-queued",!0);for(let de=0;de<le.length;de++)u.add(le[de])});const f=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=cJ(p,this.collectedEnterElements),v=new Map;let _=0;g.forEach((X,le)=>{const de=Ik+_++;v.set(le,de),X.forEach(pe=>m4(pe,de))});const w=[],b=new Set,x=new Set;for(let X=0;X<this.collectedLeaveElements.length;X++){const le=this.collectedLeaveElements[X],de=le[g4];de&&de.setForRemoval&&(w.push(le),b.add(le),de.hasAnimation?this.driver.query(le,".ng-star-inserted",!0).forEach(pe=>b.add(pe)):x.add(le))}const M=new Map,E=cJ(p,Array.from(b));E.forEach((X,le)=>{const de=bC+_++;M.set(le,de),X.forEach(pe=>m4(pe,de))}),e.push(()=>{g.forEach((X,le)=>{const de=v.get(le);X.forEach(pe=>b7(pe,de))}),E.forEach((X,le)=>{const de=M.get(le);X.forEach(pe=>b7(pe,de))}),w.forEach(X=>{this.processLeaveNode(X)})});const I=[],k=[];for(let X=this._namespaceList.length-1;X>=0;X--)this._namespaceList[X].drainQueuedTransitions(t).forEach(de=>{const pe=de.player,Fe=de.element;if(I.push(pe),this.collectedEnterElements.length){const Xt=Fe[g4];if(Xt&&Xt.setForMove){if(Xt.previousTriggersValues&&Xt.previousTriggersValues.has(de.triggerName)){const un=Xt.previousTriggersValues.get(de.triggerName),_n=this.statesByElement.get(de.element);if(_n&&_n.has(de.triggerName)){const an=_n.get(de.triggerName);an.value=un,_n.set(de.triggerName,an)}}return void pe.destroy()}}const st=!f||!this.driver.containsElement(f,Fe),ze=M.get(Fe),_t=v.get(Fe),pt=this._buildInstruction(de,i,_t,ze,st);if(pt.errors&&pt.errors.length)return void k.push(pt);if(st)return pe.onStart(()=>Mp(Fe,pt.fromStyles)),pe.onDestroy(()=>b0(Fe,pt.toStyles)),void r.push(pe);if(de.isFallbackTransition)return pe.onStart(()=>Mp(Fe,pt.fromStyles)),pe.onDestroy(()=>b0(Fe,pt.toStyles)),void r.push(pe);const kt=[];pt.timelines.forEach(Xt=>{Xt.stretchStartingKeyframe=!0,this.disabledNodes.has(Xt.element)||kt.push(Xt)}),pt.timelines=kt,i.append(Fe,pt.timelines),o.push({instruction:pt,player:pe,element:Fe}),pt.queriedElements.forEach(Xt=>Su(a,Xt,[]).push(pe)),pt.preStyleProps.forEach((Xt,un)=>{if(Xt.size){let _n=c.get(un);_n||c.set(un,_n=new Set),Xt.forEach((an,bi)=>_n.add(bi))}}),pt.postStyleProps.forEach((Xt,un)=>{let _n=l.get(un);_n||l.set(un,_n=new Set),Xt.forEach((an,bi)=>_n.add(bi))})});if(k.length){const X=[];k.forEach(le=>{X.push(function CTe(n,e){return new Jt(3505,!1)}())}),I.forEach(le=>le.destroy()),this.reportError(X)}const O=new Map,R=new Map;o.forEach(X=>{const le=X.element;i.has(le)&&(R.set(le,le),this._beforeAnimationBuild(X.player.namespaceId,X.instruction,O))}),r.forEach(X=>{const le=X.element;this._getPreviousPlayers(le,!1,X.namespaceId,X.triggerName,null).forEach(pe=>{Su(O,le,[]).push(pe),pe.destroy()})});const P=w.filter(X=>uJ(X,c,l)),Q=new Map;aJ(Q,this.driver,x,l,Bf).forEach(X=>{uJ(X,c,l)&&P.push(X)});const Ce=new Map;g.forEach((X,le)=>{aJ(Ce,this.driver,new Set(X),c,"!")}),P.forEach(X=>{const le=Q.get(X),de=Ce.get(X);Q.set(X,new Map([...Array.from(le?.entries()??[]),...Array.from(de?.entries()??[])]))});const Ae=[],G=[],ue={};o.forEach(X=>{const{element:le,player:de,instruction:pe}=X;if(i.has(le)){if(u.has(le))return de.onDestroy(()=>b0(le,pe.toStyles)),de.disabled=!0,de.overrideTotalTime(pe.totalTime),void r.push(de);let Fe=ue;if(R.size>1){let ze=le;const _t=[];for(;ze=ze.parentNode;){const pt=R.get(ze);if(pt){Fe=pt;break}_t.push(ze)}_t.forEach(pt=>R.set(pt,Fe))}const st=this._buildAnimation(de.namespaceId,pe,O,s,Ce,Q);if(de.setRealPlayer(st),Fe===ue)Ae.push(de);else{const ze=this.playersByElement.get(Fe);ze&&ze.length&&(de.parentPlayer=A6(ze)),r.push(de)}}else Mp(le,pe.fromStyles),de.onDestroy(()=>b0(le,pe.toStyles)),G.push(de),u.has(le)&&r.push(de)}),G.forEach(X=>{const le=s.get(X.element);if(le&&le.length){const de=A6(le);X.setRealPlayer(de)}}),r.forEach(X=>{X.parentPlayer?X.syncPlayerEvents(X.parentPlayer):X.destroy()});for(let X=0;X<w.length;X++){const le=w[X],de=le[g4];if(b7(le,bC),de&&de.hasAnimation)continue;let pe=[];if(a.size){let st=a.get(le);st&&st.length&&pe.push(...st);let ze=this.driver.query(le,Rk,!0);for(let _t=0;_t<ze.length;_t++){let pt=a.get(ze[_t]);pt&&pt.length&&pe.push(...pt)}}const Fe=pe.filter(st=>!st.destroyed);Fe.length?ELe(this,le,Fe):this.processLeaveNode(le)}return w.length=0,Ae.forEach(X=>{this.players.push(X),X.onDone(()=>{X.destroy();const le=this.players.indexOf(X);this.players.splice(le,1)}),X.play()}),Ae}elementContainsData(e,t){let i=!1;const r=t[g4];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==kv;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||o.push(l)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,u=l!==s,f=Su(i,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(g=>{const v=g.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),g.destroy(),f.push(g)})}Mp(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,c=t.element,l=[],u=new Set,f=new Set,p=t.timelines.map(v=>{const _=v.element;u.add(_);const w=_[g4];if(w&&w.removedBeforeQueried)return new Lv(v.duration,v.delay);const b=_!==c,x=function TLe(n){const e=[];return lJ(n,e),e}((i.get(_)||yLe).map(O=>O.getRealPlayer())).filter(O=>!!O.element&&O.element===_),M=s.get(_),E=o.get(_),I=FZ(0,this._normalizer,0,v.keyframes,M,E),k=this._buildPlayer(v,I,x);if(v.subTimeline&&r&&f.add(_),b){const O=new jk(e,a,_);O.setRealPlayer(k),l.push(O)}return k});l.forEach(v=>{Su(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function CLe(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,v.element,v))}),u.forEach(v=>m4(v,QZ));const g=A6(p);return g.onDestroy(()=>{u.forEach(v=>b7(v,QZ)),b0(c,t.toStyles)}),f.forEach(v=>{Su(r,v,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Lv(e.duration,e.delay)}}class jk{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Lv,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>Mk(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Su(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function FC(n){return n&&1===n.nodeType}function oJ(n,e){const t=n.style.display;return n.style.display=e??"none",t}function aJ(n,e,t,i,r){const s=[];t.forEach(c=>s.push(oJ(c)));const o=[];i.forEach((c,l)=>{const u=new Map;c.forEach(f=>{const p=e.computeStyle(l,f,r);u.set(f,p),(!p||0==p.length)&&(l[g4]=wLe,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>oJ(c,s[a++])),o}function cJ(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:r.has(l)?1:o(l),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function m4(n,e){n.classList?.add(e)}function b7(n,e){n.classList?.remove(e)}function ELe(n,e,t){A6(t).onDone(()=>n.processLeaveNode(e))}function lJ(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof EZ?lJ(i.players,e):e.push(i)}}function uJ(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class PC{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new xLe(e,t,i),this._timelineEngine=new gLe(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const c=[],u=Pk(this._driver,s,c,[]);if(c.length)throw function dTe(n,e){return new Jt(3404,!1)}();a=function hLe(n,e,t){return new fLe(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=PZ(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=PZ(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ILe=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&b0(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(b0(this._element,this._initialStyles),this._endStyles&&(b0(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Mp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mp(this._element,this._endStyles),this._endStyles=null),b0(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function $k(n){let e=null;return n.forEach((t,i)=>{(function RLe(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class hJ{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:XZ(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class BLe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return NZ(e,t)}getParentElement(e){return Lk(e)}query(e,t,i){return VZ(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const c={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(c.easing=s);const l=new Map,u=o.filter(g=>g instanceof hJ);(function HTe(n,e){return 0===n||0===e})(i,r)&&u.forEach(g=>{g.currentSnapshot.forEach((v,_)=>l.set(_,v))});let f=function BTe(n){return n.length?n[0]instanceof Map?n:n.map(e=>WZ(e)):[]}(t).map(g=>v6(g));f=function zTe(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,XZ(n,a)))}}return e}(e,f,l);const p=function DLe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=$k(e[0]),e.length>1&&(i=$k(e[e.length-1]))):e instanceof Map&&(t=$k(e)),t||i?new ILe(n,t,i):null}(e,f);return new hJ(e,f,c,p)}}let kLe=(()=>{class n extends _k{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:ha.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?MZ(t):t;return fJ(this._renderer,null,i,"register",[r]),new FLe(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Xe(F3),Xe(Wi))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();class FLe extends class xEe{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new PLe(this._id,e,t||{},this._renderer)}}class PLe{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return fJ(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function fJ(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const dJ="@.disabled";let HLe=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new pJ("",s,this.engine),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=u=>{Array.isArray(u)?u.forEach(c):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(c),new zLe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Xe(F3),Xe(PC),Xe(cr))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();class pJ{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==dJ?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class zLe extends pJ{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==dJ?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function OLe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function NLe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let VLe=(()=>{class n extends PC{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Xe(Wi),Xe(Dk),Xe(Vk),Xe(n7))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();const gJ=[{provide:_k,useClass:kLe},{provide:Vk,useFactory:function ULe(){return new aLe}},{provide:PC,useClass:VLe},{provide:F3,useFactory:function GLe(n,e,t){return new HLe(n,e,t)},deps:[bx,PC,cr]}],Kk=[{provide:Dk,useFactory:()=>new BLe},{provide:l4,useValue:"BrowserAnimations"},...gJ],mJ=[{provide:Dk,useClass:UZ},{provide:l4,useValue:"NoopAnimations"},...gJ];let QLe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?mJ:Kk}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:Kk,imports:[Dq]}),n})();const WLe=["*",[["mat-toolbar-row"]]],jLe=["*","mat-toolbar-row"],$Le=wp(class{constructor(n){this._elementRef=n}});let KLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=gt({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),qLe=(()=>{class n extends $Le{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(V3),U(Wi))},n.\u0275cmp=Sn({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&a1(r,KLe,5),2&t){let s;Gi(s=Qi())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&$r("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[jt],ngContentSelectors:jLe,decls:2,vars:0,template:function(t,i){1&t&&(T1(WLe),Do(0),Do(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),XLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[Yi,Yi]}),n})(),ZLe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[n3,Yi,gp,gp,Yi]}),n})();function qk(n){return n&&"function"==typeof n.connect&&!(n instanceof wB)}class AJ{applyChanges(e,t,i,r,s){e.forEachOperation((o,a,c)=>{let l,u;if(null==o.previousIndex){const f=i(o,a,c);l=t.createEmbeddedView(f.templateRef,f.context,f.index),u=1}else null==c?(t.remove(a),u=3):(l=t.get(a),t.move(l,c),u=2);s&&s({context:l?.context,operation:u,record:o})})}detach(){}}class Xk{constructor(e=!1,t,i=!0,r){this._multiple=e,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new $e,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,i=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}const Fv=new zt("_ViewRepeater");let _J=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(U(pa),U(mn))},n.\u0275dir=gt({type:n}),n})(),Ep=(()=>{class n extends _J{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,features:[jt]}),n})();const _l=new zt("NgValueAccessor"),tDe={provide:_l,useExisting:Cr(()=>Yk),multi:!0},iDe=new zt("CompositionEventMode");let Yk=(()=>{class n extends _J{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nDe(){const n=p0()?p0().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(U(pa),U(mn),U(iDe,8))},n.\u0275dir=gt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&Kt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[rr([tDe]),jt]}),n})();const I2=new zt("NgValidators"),y6=new zt("NgAsyncValidators");function DJ(n){return null!=n}function IJ(n){return I9(n)?Es(n):n}function RJ(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function BJ(n,e){return e.map(t=>t(n))}function kJ(n){return n.map(e=>function oDe(n){return!n.validate}(e)?e:t=>e.validate(t))}function Zk(n){return null!=n?function FJ(n){if(!n)return null;const e=n.filter(DJ);return 0==e.length?null:function(t){return RJ(BJ(t,e))}}(kJ(n)):null}function Jk(n){return null!=n?function PJ(n){if(!n)return null;const e=n.filter(DJ);return 0==e.length?null:function(t){return HY(BJ(t,e).map(IJ)).pipe(Ut(RJ))}}(kJ(n)):null}function HJ(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function eF(n){return n?Array.isArray(n)?n:[n]:[]}function OC(n,e){return Array.isArray(n)?n.includes(e):n===e}function NJ(n,e){const t=eF(e);return eF(n).forEach(r=>{OC(t,r)||t.push(r)}),t}function VJ(n,e){return eF(e).filter(t=>!OC(n,t))}class UJ{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Zk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Jk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class r3 extends UJ{get formDirective(){return null}get path(){return null}}class w6 extends UJ{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Pv=(()=>{class n extends class GJ{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(U(w6,2))},n.\u0275dir=gt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&$r("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[jt]}),n})();const Hv="VALID",VC="INVALID",x7="PENDING",zv="DISABLED";function WJ(n){return Array.isArray(n)?Zk(n):n||null}function jJ(n){return Array.isArray(n)?Jk(n):n||null}function UC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Ov(n,e){(function aF(n,e){const t=function zJ(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(HJ(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function OJ(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(HJ(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();WC(e._rawValidators,r),WC(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function mDe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&XJ(n,e)})}(n,e),function vDe(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ADe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&XJ(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function gDe(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function WC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function XJ(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function eee(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function tee(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const SDe={provide:w6,useExisting:Cr(()=>C7)},see=(()=>Promise.resolve())();let C7=(()=>{class n extends w6{constructor(t,i,r,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class qJ{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=WJ(this._rawValidators),this._composedAsyncValidatorFn=jJ(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Hv}get invalid(){return this.status===VC}get pending(){return this.status==x7}get disabled(){return this.status===zv}get enabled(){return this.status!==zv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=WJ(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=jJ(e)}addValidators(e){this.setValidators(NJ(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(NJ(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VJ(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VJ(e,this._rawAsyncValidators))}hasValidator(e){return OC(this._rawValidators,e)}hasAsyncValidator(e){return OC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=x7,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zv,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Hv,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hv||this.status===x7)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zv:Hv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=x7,this._hasOwnPendingAsyncValidator=!0;const t=IJ(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new sr,this.statusChanges=new sr}_calculateStatus(){return this._allControlsDisabled()?zv:this.errors?VC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(x7)?x7:this._anyControlsHaveStatus(VC)?VC:Hv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){UC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,i){super(function rF(n){return(UC(n)?n.validators:n)||null}(t),function sF(n,e){return(UC(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),UC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=tee(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eee(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eee(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){tee(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new sr,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function lF(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Yk?t=s:function wDe(n){return Object.getPrototypeOf(n.constructor)===Ep}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function cF(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ov(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){see.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&bf(i);see.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function GC(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(U(r3,9),U(I2,10),U(y6,10),U(_l,10),U(mc,8))},n.\u0275dir=gt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[rr([SDe]),jt,Ir]}),n})(),aee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})(),YDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[aee]}),n})(),ZDe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[YDe]}),n})(),eIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[Yi,Yi]}),n})();const Cee=["*"],tIe=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],nIe=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],aIe=m7(_0(class{})),cIe=_0(class{}),See=new zt("MatList"),lIe=new zt("MatNavList");let Eee=(()=>{class n extends aIe{constructor(t){super(),this._elementRef=t,this._stateChanges=new $e,"action-list"===this._getListType()&&(t.nativeElement.classList.add("mat-action-list"),t.nativeElement.setAttribute("role","group"))}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(U(mn))},n.\u0275cmp=Sn({type:n,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[rr([{provide:See,useExisting:n}]),jt,Ir],ngContentSelectors:Cee,decls:1,vars:0,template:function(t,i){1&t&&(T1(),Do(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),n})(),Tee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=gt({type:n,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),n})(),Lee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=gt({type:n,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),n})(),Dee=(()=>{class n extends cIe{constructor(t,i,r,s){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new $e,this._disabled=!1,this._isInteractiveList=!!(r||s&&"action-list"===s._getListType()),this._list=r||s;const o=this._getHostElement();"button"===o.nodeName.toLowerCase()&&!o.hasAttribute("type")&&o.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Ua(this._destroyed)).subscribe(()=>{i.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=Hr(t)}ngAfterContentInit(){!function RY(n,e,t="mat"){n.changes.pipe(m0(n)).subscribe(({length:i})=>{wv(e,`${t}-2-line`,!1),wv(e,`${t}-3-line`,!1),wv(e,`${t}-multi-line`,!1),2===i||3===i?wv(e,`${t}-${i}-line`,!0):i>3&&wv(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(mc),U(lIe,8),U(See,8))},n.\u0275cmp=Sn({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,i,r){if(1&t&&(a1(r,Tee,5),a1(r,Lee,5),a1(r,IY,5)),2&t){let s;Gi(s=Qi())&&(i._avatar=s.first),Gi(s=Qi())&&(i._icon=s.first),Gi(s=Qi())&&(i._lines=s)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:4,hostBindings:function(t,i){2&t&&$r("mat-list-item-disabled",i.disabled)("mat-list-item-with-avatar",i._avatar||i._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[jt],ngContentSelectors:nIe,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,i){1&t&&(T1(tIe),B(0,"span",0),Ue(1,"span",1),Do(2),B(3,"span",2),Do(4,1),z(),Do(5,2),z()),2&t&&(K(1),ge("matRippleTrigger",i._getHostElement())("matRippleDisabled",i._isRippleDisabled()))},dependencies:[y0],encapsulation:2,changeDetection:0}),n})(),gIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[dC,fh,Yi,rk,n3,dC,Yi,rk,eIe]}),n})(),mIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})(),AIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[n3,Yi,mIe,c6]}),n})();const vIe=["sliderWrapper"],A4=a6({passive:!1}),xIe={provide:_l,useExisting:Cr(()=>Vv),multi:!0};class CIe{}const MIe=fC(wp(m7(class{constructor(n){this._elementRef=n}}),"accent"));let Vv=(()=>{class n extends MIe{constructor(t,i,r,s,o,a,c,l){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this._dir=s,this._ngZone=a,this._animationMode=l,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new sr,this.input=new sr,this.valueChange=new sr,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=Te.EMPTY,this._pointerDown=u=>{this.disabled||this._isSliding||!Uv(u)&&0!==u.button||this._ngZone.run(()=>{this._touchId=Uv(u)?function SIe(n,e){for(let t=0;t<n.touches.length;t++){const i=n.touches[t].target;if(e===i||e.contains(i))return n.touches[t].identifier}}(u,this._elementRef.nativeElement):void 0;const f=kee(u,this._touchId);if(f){const p=this.value;this._isSliding="pointer",this._lastPointerEvent=u,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(u),this._focusHostElement(),this._updateValueFromPosition(f),this._valueOnSlideStart=p,u.cancelable&&u.preventDefault(),p!=this.value&&this._emitInputEvent()}})},this._pointerMove=u=>{if("pointer"===this._isSliding){const f=kee(u,this._touchId);if(f){u.cancelable&&u.preventDefault();const p=this.value;this._lastPointerEvent=u,this._updateValueFromPosition(f),p!=this.value&&this._emitInputEvent()}}},this._pointerUp=u=>{"pointer"===this._isSliding&&(!Uv(u)||"number"!=typeof this._touchId||AF(u.changedTouches,this._touchId))&&(u.cancelable&&u.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=c,this.tabIndex=parseInt(o)||0,a.runOutsideAngular(()=>{const u=t.nativeElement;u.addEventListener("mousedown",this._pointerDown,A4),u.addEventListener("touchstart",this._pointerDown,A4)})}get invert(){return this._invert}set invert(t){this._invert=Hr(t)}get max(){return this._max}set max(t){this._max=ch(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=ch(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=ch(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=Hr(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?ch(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let i=ch(t,0);this._roundToDecimal&&i!==this.min&&i!==this.max&&(i=parseFloat(i.toFixed(this._roundToDecimal))),this._value=i,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=Hr(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const i=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${i})`}}_getTrackFillStyles(){const t=this.percent,r=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const c=this._shouldInvertAxis();let l;l=this.vertical?c?"Bottom":"Top":c?"Right":"Left",a[`padding${l}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,A4),t.removeEventListener("touchstart",this._pointerDown,A4),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||yp(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const i=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}i!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const i=this._document,r=Uv(t),o=r?"touchend":"mouseup";i.addEventListener(r?"touchmove":"mousemove",this._pointerMove,A4),i.addEventListener(o,this._pointerUp,A4),r&&i.addEventListener("touchcancel",this._pointerUp,A4);const a=this._getWindow();typeof a<"u"&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,A4),t.removeEventListener("mouseup",this._pointerUp,A4),t.removeEventListener("touchmove",this._pointerMove,A4),t.removeEventListener("touchend",this._pointerUp,A4),t.removeEventListener("touchcancel",this._pointerUp,A4);const i=this._getWindow();typeof i<"u"&&i&&i.removeEventListener("blur",this._windowBlur)}_increment(t){const i=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(i+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let o=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(o=1-o),0===o)this.value=this.min;else if(1===o)this.value=this.max;else{const a=this._calculateValue(o),c=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(c,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let i=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(i*this.step/(this.max-this.min)))*this.step/i}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=Bee(t)?t:0}_createChangeEvent(t=this.value){let i=new CIe;return i.source=this,i.value=t,i}_calculatePercentage(t){const i=((t||0)-this.min)/(this.max-this.min);return Bee(i)?i:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,i=0,r=1){return Math.max(i,Math.min(t,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(p4),U(mc),U(Sf,8),D3("tabindex"),U(cr),U(Wi),U(l4,8))},n.\u0275cmp=Sn({type:n,selectors:[["mat-slider"]],viewQuery:function(t,i){if(1&t&&_o(vIe,5),2&t){let r;Gi(r=Qi())&&(i._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,i){1&t&&Kt("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)})("keyup",function(){return i._onKeyup()})("mouseenter",function(){return i._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&t&&(sp("tabIndex",i.tabIndex),Jr("aria-disabled",i.disabled)("aria-valuemax",i.max)("aria-valuemin",i.min)("aria-valuenow",i.value)("aria-valuetext",i.valueText??i.displayValue)("aria-orientation",i.vertical?"vertical":"horizontal"),$r("mat-slider-disabled",i.disabled)("mat-slider-has-ticks",i.tickInterval)("mat-slider-horizontal",!i.vertical)("mat-slider-axis-inverted",i._shouldInvertAxis())("mat-slider-invert-mouse-coords",i._shouldInvertMouseCoords())("mat-slider-sliding",i._isSliding)("mat-slider-thumb-label-showing",i.thumbLabel)("mat-slider-vertical",i.vertical)("mat-slider-min-value",i._isMinValue())("mat-slider-hide-last-tick",i.disabled||i._isMinValue()&&i._getThumbGap()&&i._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[rr([xIe]),jt],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,i){1&t&&(B(0,"div",0,1)(2,"div",2),Ue(3,"div",3)(4,"div",4),z(),B(5,"div",5),Ue(6,"div",6),z(),B(7,"div",7),Ue(8,"div",8)(9,"div",9),B(10,"div",10)(11,"span",11),H(12),z()()()()),2&t&&(K(3),ge("ngStyle",i._getTrackBackgroundStyles()),K(1),ge("ngStyle",i._getTrackFillStyles()),K(1),ge("ngStyle",i._getTicksContainerStyles()),K(1),ge("ngStyle",i._getTicksStyles()),K(1),ge("ngStyle",i._getThumbContainerStyles()),K(5),Zl(i.displayValue))},dependencies:[r6],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),n})();function Bee(n){return!isNaN(n)&&isFinite(n)}function Uv(n){return"t"===n.type[0]}function kee(n,e){let t;return t=Uv(n)?"number"==typeof e?AF(n.touches,e)||AF(n.changedTouches,e):n.touches[0]||n.changedTouches[0]:n,t?{x:t.clientX,y:t.clientY}:void 0}function AF(n,e){for(let t=0;t<n.length;t++)if(n[t].identifier===e)return n[t]}let EIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[n3,Yi,Yi]}),n})(),Hee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})(),VIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[fh,Yi,yv,Hee,Yi,Hee]}),n})();function UIe(n,e){}class KC{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let zee=(()=>{class n extends mB{constructor(t,i,r,s,o,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),f},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=dB(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=dB();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=dB())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(ZB),U(Wi,8),U(KC),U(uC),U(cr),U(rv),U(p4))},n.\u0275cmp=Sn({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&_o(AB,7),2&t){let r;Gi(r=Qi())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&Jr("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[jt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Dt(0,UIe,0,0,"ng-template",0)},dependencies:[AB],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class vF{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new $e,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!yp(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const Oee=new zt("DialogScrollStrategy"),GIe=new zt("DialogData"),QIe=new zt("DefaultDialogConfig"),jIe={provide:Oee,deps:[Mu],useFactory:function WIe(n){return()=>n.scrollStrategies.block()}};let $Ie=0,Nee=(()=>{class n{constructor(t,i,r,s,o,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new $e,this._afterOpenedAtThisLevel=new $e,this._ariaHiddenElements=new Map,this.afterAllClosed=Fx(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(m0(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,i){(i={...this._defaultOptions||new KC,...i}).id=i.id||"cdk-dialog-"+$Ie++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new vF(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){_F(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){_F(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),_F(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new _B({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:KC,useValue:r},{provide:vF,useValue:i},{provide:rv,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=zee;const c=new iv(a,r.viewContainerRef,Oc.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,s){if(t instanceof a2){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new Dx(t,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new iv(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentInstance=a.instance}}_createInjector(t,i,r,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:GIe,useValue:t.data},{provide:vF,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!o||!o.get(Sf,null,Gn.Optional))&&a.push({provide:Sf,useValue:{value:t.direction,change:di()}}),Oc.create({parent:o||s,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(Xe(Mu),Xe(Oc),Xe(QIe,8),Xe(n,12),Xe(Rx),Xe(Oee))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})();function _F(n,e){let t=n.length;for(;t--;)e(n[t])}let KIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[Nee,jIe],imports:[l6,c6,nk,c6]}),n})();function qIe(n,e){}const M7={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},XIe={dialogContainer:u2("dialogContainer",[wo("void, exit",Bi({opacity:0,transform:"scale(0.7)"})),wo("enter",Bi({transform:"none"})),bo("* => enter",CZ([ho("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",Bi({transform:"none",opacity:1})),wk("@*",yk(),{optional:!0})]),M7),bo("* => void, * => exit",CZ([ho("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",Bi({opacity:0})),wk("@*",yk(),{optional:!0})]),M7)])};class qC{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=M7.params.enterAnimationDuration,this.exitAnimationDuration=M7.params.exitAnimationDuration}}let YIe=(()=>{class n extends zee{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,o,a,c,l),this._animationStateChanged=new sr}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(ZB),U(Wi,8),U(qC),U(uC),U(cr),U(rv),U(p4))},n.\u0275cmp=Sn({type:n,selectors:[["ng-component"]],features:[jt],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),ZIe=(()=>{class n extends YIe{constructor(t,i,r,s,o,a,c,l,u){super(t,i,r,s,o,a,c,u),this._changeDetectorRef=l,this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?this._openAnimationDone(i):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||M7.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||M7.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(ZB),U(Wi,8),U(qC),U(uC),U(cr),U(rv),U(mc),U(p4))},n.\u0275cmp=Sn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,i){1&t&&YI("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(sp("id",i._config.id),Jr("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),eR("@dialogContainer",i._getAnimationState()))},features:[jt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Dt(0,qIe,0,0,"ng-template",0)},dependencies:[AB],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[XIe.dialogContainer]}}),n})();class JIe{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new $e,this._beforeClosed=new $e,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(zo(r=>"opened"===r.state),vc(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(zo(r=>"closed"===r.state),vc(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Jc(this.backdropClick(),this.keydownEvents().pipe(zo(r=>27===r.keyCode&&!this.disableClose&&!yp(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function eRe(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(zo(t=>"closing"===t.state),vc(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const tRe=new zt("MatDialogData"),nRe=new zt("mat-dialog-default-options"),Vee=new zt("mat-dialog-scroll-strategy"),rRe={provide:Vee,deps:[Mu],useFactory:function iRe(n){return()=>n.scrollStrategies.block()}};let sRe=0,oRe=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=c,this._dialogContainerType=l,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new $e,this._afterOpenedAtThisLevel=new $e,this._idPrefix="mat-dialog-",this.afterAllClosed=Fx(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(m0(void 0))),this._scrollStrategy=a,this._dialog=i.get(Nee)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){let r;(i={...this._defaultOptions||new qC,...i}).id=i.id||`${this._idPrefix}${sRe++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:qC,useValue:i},{provide:KC,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){tp()},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),aRe=(()=>{class n extends oRe{constructor(t,i,r,s,o,a,c,l){super(t,i,s,a,c,o,JIe,ZIe,tRe,l)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Mu),Xe(Oc),Xe(W9,8),Xe(nRe,8),Xe(Vee),Xe(n,12),Xe(Rx),Xe(l4,8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),cRe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[aRe,rRe],imports:[KIe,l6,c6,Yi,Yi]}),n})(),wRe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[fh,Yi,Yi]}),n})(),bRe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[Yi,Yi]}),n})();const xRe=["input"],CRe=function(n){return{enterDuration:n}},MRe=["*"],SRe=new zt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let ERe=0;const TRe={provide:_l,useExisting:Cr(()=>XC),multi:!0};class LRe{constructor(e,t){this.source=e,this.checked=t}}const DRe=fC(wp(_0(m7(class{constructor(n){this._elementRef=n}}))));let IRe=(()=>{class n extends DRe{constructor(t,i,r,s,o,a,c){super(t),this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new sr,this.toggleChange=new sr,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId=`${c}${++ERe}`}get required(){return this._required}set required(t){this._required=Hr(t)}get checked(){return this._checked}set checked(t){this._checked=Hr(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._focused=!0:t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(t){tp()},n.\u0275dir=gt({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[jt]}),n})(),XC=(()=>{class n extends IRe{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a,"mat-slide-toggle-")}_createChangeEvent(t){return new LRe(this,t)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}focus(t,i){i?this._focusMonitor.focusVia(this._inputElement,i,t):this._inputElement.nativeElement.focus(t)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(p4),U(mc),D3("tabindex"),U(SRe),U(l4,8))},n.\u0275cmp=Sn({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,i){if(1&t&&_o(xRe,5),2&t){let r;Gi(r=Qi())&&(i._inputElement=r.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(t,i){2&t&&(sp("id",i.id),Jr("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),$r("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[rr([TRe]),jt],ngContentSelectors:MRe,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,i){if(1&t&&(T1(),B(0,"label",0,1)(2,"span",2)(3,"input",3,4),Kt("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),z(),B(5,"span",5),Ue(6,"span",6),B(7,"span",7),Ue(8,"span",8),z()()(),B(9,"span",9,10),Kt("cdkObserveContent",function(){return i._onLabelTextChange()}),B(11,"span",11),H(12,"\xa0"),z(),Do(13),z()()),2&t){const r=Si(1),s=Si(10);Jr("for",i.inputId),K(2),$r("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),K(1),ge("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),Jr("name",i.name)("aria-checked",i.checked)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),K(4),ge("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",xu(18,CRe,i._noopAnimations?0:150))}},dependencies:[y0,mY],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),n})(),Wee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})(),kRe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[Wee,fh,Yi,yv,Wee,Yi]}),n})(),jee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=gt({type:n,selectors:[["mat-label"]]}),n})(),YC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[n3,Yi,yv,Yi]}),n})(),ORe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[pp]}),n})(),yF=(()=>{class n{constructor(){this.changes=new $e,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XRe={provide:yF,deps:[[new I3,new s0,yF]],useFactory:function qRe(n){return n||new yF}};let YRe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[XRe,DY],imports:[Yi,n3,c6,vk,ORe,eZ,fh,Yi]}),n})(),Xee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})(),ZRe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[DY],imports:[Xee,YC,Yi,Xee,YC]}),n})(),iBe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[n3,Yi,c6,fh,yv,nk,Yi]}),n})(),oBe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[dC,Yi,dC,Yi]}),n})();const aBe=["button"],cBe=["*"],Zee=new zt("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),Jee=new zt("MatButtonToggleGroup"),lBe={provide:_l,useExisting:Cr(()=>nte),multi:!0};let ete=0;class tte{constructor(e,t){this.source=e,this.value=t}}let nte=(()=>{class n{constructor(t,i){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+ete++,this.valueChange=new sr,this.change=new sr,this.appearance=i&&i.appearance?i.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=Hr(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(i=>i.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=Hr(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=Hr(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new Xk(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const i=new tte(t,this.value);this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(t,i,r=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(t,r)):this._updateModelValue(t,r)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=t.value&&i===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const i=this._buttonToggles.find(r=>null!=r.value&&r.value===t);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(t,i){i&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(U(mc),U(Zee,8))},n.\u0275dir=gt({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,i,r){if(1&t&&a1(r,ite,5),2&t){let s;Gi(s=Qi())&&(i._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,i){2&t&&(Jr("aria-disabled",i.disabled),$r("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[rr([lBe,{provide:Jee,useExisting:n}])]}),n})();const uBe=_0(class{});let ite=(()=>{class n extends uBe{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=i,this._elementRef=r,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new sr;const c=Number(o);this.tabIndex=c||0===c?c:null,this.buttonToggleGroup=t,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const i=Hr(t);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=Hr(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+ete++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new tte(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return n.\u0275fac=function(t){return new(t||n)(U(Jee,8),U(mc),U(mn),U(p4),D3("tabindex"),U(Zee,8))},n.\u0275cmp=Sn({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,i){if(1&t&&_o(aBe,5),2&t){let r;Gi(r=Qi())&&(i._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,i){1&t&&Kt("focus",function(){return i.focus()}),2&t&&(Jr("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),$r("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[jt],ngContentSelectors:cBe,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){if(1&t&&(T1(),B(0,"button",0,1),Kt("click",function(){return i._onButtonClick()}),B(2,"span",2),Do(3),z()(),Ue(4,"span",3)(5,"span",4)),2&t){const r=Si(1);ge("id",i.buttonId)("disabled",i.disabled||null),Jr("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),K(5),ge("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[y0],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),n})(),hBe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[Yi,fh,Yi]}),n})(),pBe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[l6,c6,n3,vk,Yi,Yi]}),n})();const _Be={provide:new zt("mat-tooltip-scroll-strategy"),deps:[Mu],useFactory:function vBe(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let wBe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[_Be],imports:[nk,n3,l6,Yi,Yi,gp]}),n})();const SBe={provide:new zt("mat-select-scroll-strategy"),deps:[Mu],useFactory:function MBe(n){return()=>n.scrollStrategies.reposition()}};let EBe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({providers:[SBe],imports:[n3,l6,PY,Yi,gp,YC,PY,Yi]}),n})();function TBe(n,e){if(1&n&&(eo(),Ue(0,"circle",4)),2&n){const t=Ft(),i=Si(1);H3("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),Jr("r",t._getCircleRadius())}}function LBe(n,e){if(1&n&&(eo(),Ue(0,"circle",4)),2&n){const t=Ft(),i=Si(1);H3("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(i)),Jr("r",t._getCircleRadius())}}const IBe=wp(class{constructor(n){this._elementRef=n}},"primary"),RBe=new zt("mat-progress-spinner-default-options",{providedIn:"root",factory:function BBe(){return{diameter:100}}});class b6 extends IBe{constructor(e,t,i,r,s,o,a,c){super(e),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=Te.EMPTY,this.mode="determinate";const l=b6._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),l.has(i.head)||l.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&a&&o&&c&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&c.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=ch(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=ch(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,ch(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=Vq(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,i=b6._diameters;let r=i.get(e);if(!r||!r.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),r||(r=new Set,i.set(e,r)),r.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}b6._diameters=new WeakMap,b6.\u0275fac=function(e){return new(e||b6)(U(mn),U(V3),U(Wi,8),U(l4,8),U(RBe),U(mc),U(Tx),U(cr))},b6.\u0275cmp=Sn({type:b6,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(Jr("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),H3("width",t.diameter,"px")("height",t.diameter,"px"),$r("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[jt],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(eo(),B(0,"svg",0,1),Dt(2,TBe,1,11,"circle",2),Dt(3,LBe,1,9,"circle",3),z()),2&e&&(H3("width",t.diameter,"px")("height",t.diameter,"px"),ge("ngSwitch","indeterminate"===t.mode),Jr("viewBox",t._getViewBox()),K(2),ge("ngSwitchCase",!0),K(1),ge("ngSwitchCase",!1))},dependencies:[mx,oq],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let FBe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[Yi,n3,Yi]}),n})();const HBe=[[["caption"]],[["colgroup"],["col"]]],zBe=["caption","colgroup, col"];function bF(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=Hr(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const S7=new zt("CDK_TABLE");let E7=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(U(a2))},n.\u0275dir=gt({type:n,selectors:[["","cdkCellDef",""]]}),n})(),T7=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(U(a2))},n.\u0275dir=gt({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),ZC=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(U(a2))},n.\u0275dir=gt({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class UBe{}const GBe=bF(UBe);let Ff=(()=>{class n extends GBe{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const i=this._stickyEnd;this._stickyEnd=Hr(t),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(U(S7,8))},n.\u0275dir=gt({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,i,r){if(1&t&&(a1(r,E7,5),a1(r,T7,5),a1(r,ZC,5)),2&t){let s;Gi(s=Qi())&&(i.cell=s.first),Gi(s=Qi())&&(i.headerCell=s.first),Gi(s=Qi())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[rr([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),jt]}),n})();class xF{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let CF=(()=>{class n extends xF{constructor(t,i){super(t,i)}}return n.\u0275fac=function(t){return new(t||n)(U(Ff),U(mn))},n.\u0275dir=gt({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[jt]}),n})(),MF=(()=>{class n extends xF{constructor(t,i){if(super(t,i),1===t._table?._elementRef.nativeElement.nodeType){const r=t._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(U(Ff),U(mn))},n.\u0275dir=gt({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[jt]}),n})();class ote{constructor(){this.tasks=[],this.endTasks=[]}}const SF=new zt("_COALESCED_STYLE_SCHEDULER");let ate=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new $e}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new ote,this._getScheduleObservable().pipe(Ua(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new ote;for(const i of t.tasks)i();for(const i of t.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?Es(Promise.resolve(void 0)):this._ngZone.onStable.pipe(vc(1))}}return n.\u0275fac=function(t){return new(t||n)(Xe(cr))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac}),n})(),EF=(()=>{class n{constructor(t,i){this.template=t,this._differs=i}ngOnChanges(t){if(!this._columnsDiffer){const i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof Gv?t.headerCell.template:this instanceof Qv?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(U(a2),U(d0))},n.\u0275dir=gt({type:n,features:[Ir]}),n})();class QBe extends EF{}const WBe=bF(QBe);let Gv=(()=>{class n extends WBe{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(U(a2),U(d0),U(S7,8))},n.\u0275dir=gt({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[jt,Ir]}),n})();class jBe extends EF{}const $Be=bF(jBe);let Qv=(()=>{class n extends $Be{constructor(t,i,r){super(t,i),this._table=r}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(U(a2),U(d0),U(S7,8))},n.\u0275dir=gt({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[jt,Ir]}),n})(),JC=(()=>{class n extends EF{constructor(t,i,r){super(t,i),this._table=r}}return n.\u0275fac=function(t){return new(t||n)(U(a2),U(d0),U(S7,8))},n.\u0275dir=gt({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[jt]}),n})(),Pf=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(U(Nc))},n.\u0275dir=gt({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),TF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Sn({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&s2(0,0)},dependencies:[Pf],encapsulation:2}),n})(),DF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Sn({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&s2(0,0)},dependencies:[Pf],encapsulation:2}),n})(),eM=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(U(a2))},n.\u0275dir=gt({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const cte=["top","bottom","left","right"];class KBe{constructor(e,t,i,r,s=!0,o=!0,a){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=o,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const i=[];for(const r of e)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,t)})}updateStickyColumns(e,t,i,r=!0){if(!e.length||!this._isBrowser||!t.some(p=>p)&&!i.some(p=>p))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=e[0],o=s.children.length,a=this._getCellWidths(s,r),c=this._getStickyStartColumnPositions(a,t),l=this._getStickyEndColumnPositions(a,i),u=t.lastIndexOf(!0),f=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const p="rtl"===this.direction,g=p?"right":"left",v=p?"left":"right";for(const _ of e)for(let w=0;w<o;w++){const b=_.children[w];t[w]&&this._addStickyStyle(b,g,c[w],w===u),i[w]&&this._addStickyStyle(b,v,l[w],w===f)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===u?[]:a.slice(0,u+1).map((_,w)=>t[w]?_:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===f?[]:a.slice(f).map((_,w)=>i[w+f]?_:null).reverse()}))})}stickRows(e,t,i){if(!this._isBrowser)return;const r="bottom"===i?e.slice().reverse():e,s="bottom"===i?t.slice().reverse():t,o=[],a=[],c=[];for(let u=0,f=0;u<r.length;u++){if(!s[u])continue;o[u]=f;const p=r[u];c[u]=this._isNativeHtmlTable?Array.from(p.children):[p];const g=p.getBoundingClientRect().height;f+=g,a[u]=g}const l=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let u=0;u<r.length;u++){if(!s[u])continue;const f=o[u],p=u===l;for(const g of c[u])this._addStickyStyle(g,i,f,p)}"top"===i?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:o,elements:c}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:o,elements:c})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const i=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const r of t)e.style[r]="",e.classList.remove(this._borderCellCss[r]);cte.some(r=>-1===t.indexOf(r)&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let i=0;for(const r of cte)e.style[r]&&(i+=t[r]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=e.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){const i=[];let r=0;for(let s=0;s<e.length;s++)t[s]&&(i[s]=r,r+=e[s]);return i}_getStickyEndColumnPositions(e,t){const i=[];let r=0;for(let s=e.length;s>0;s--)t[s]&&(i[s]=r,r+=e[s]);return i}}const IF=new zt("CDK_SPL");let tM=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Nc),U(mn))},n.\u0275dir=gt({type:n,selectors:[["","rowOutlet",""]]}),n})(),nM=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Nc),U(mn))},n.\u0275dir=gt({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),iM=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Nc),U(mn))},n.\u0275dir=gt({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),rM=(()=>{class n{constructor(t,i){this.viewContainer=t,this.elementRef=i}}return n.\u0275fac=function(t){return new(t||n)(U(Nc),U(mn))},n.\u0275dir=gt({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),sM=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f,p,g){this._differs=t,this._changeDetectorRef=i,this._elementRef=r,this._dir=o,this._platform=c,this._viewRepeater=l,this._coalescedStyleScheduler=u,this._viewportRuler=f,this._stickyPositioningListener=p,this._ngZone=g,this._onDestroy=new $e,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new sr,this.viewChange=new Vs({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=Hr(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=Hr(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(Ua(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),qk(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(r,s,o)=>this._getEmbeddedViewArgs(r.item,o),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&cr.isInAngularZone()?this._ngZone.onStable.pipe(vc(1),Ua(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=t.length?"":"none");const s=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,s,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=t.length?"":"none");const s=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,o)=>{this._addStickyColumnStyles([s],this._headerRowDefs[o])}),this._rowDefs.forEach(s=>{const o=[];for(let a=0;a<i.length;a++)this._renderRows[a].rowDef===s&&o.push(i[a]);this._addStickyColumnStyles(o,s)}),r.forEach((s,o)=>{this._addStickyColumnStyles([s],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const o=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let a=0;a<o.length;a++){let c=o[a];const l=this._cachedRenderRowsMap.get(c.data);l.has(c.rowDef)?l.get(c.rowDef).push(c):l.set(c.rowDef,[c]),t.push(c)}}return t}_getRenderRowsForData(t,i,r){return this._getRowDefs(t,i).map(o=>{const a=r&&r.has(o)?r.get(o):[];if(a.length){const c=a.shift();return c.dataIndex=i,c}return{data:t,rowDef:o,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),oM(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=oM(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=oM(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=oM(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(o,a)=>o||!!a.getColumnsDiff(),i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(t,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(t){this._data=[],qk(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;qk(this.dataSource)?t=this.dataSource.connect(this):function PBe(n){return!!n&&(n instanceof Se||ee(n.lift)&&ee(n.subscribe))}(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=di(this.dataSource)),this._renderChangeSubscription=t.pipe(Ua(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){const r=Array.from(i.columns||[]).map(a=>this._columnDefsByName.get(a)),s=r.map(a=>a.sticky),o=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const i=[];for(let r=0;r<t.viewContainer.length;r++){const s=t.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(t,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,t));else{let s=this._rowDefs.find(o=>o.when&&o.when(i,t))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(t,i){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:i}}_renderRow(t,i,r,s={}){const o=t.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),o}_renderCellTemplateForItem(t,i){for(let r of this._getCellTemplates(t))Pf.mostRecentCellOutlet&&Pf.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let i=0,r=t.length;i<r;i++){const o=t.get(i).context;o.count=r,o.first=0===i,o.last=i===r-1,o.even=i%2==0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[i].dataIndex,o.renderIndex=i):o.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,i=>{const r=this._columnDefsByName.get(i);return t.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const o of r.outlets)s.appendChild(o.elementRef.nativeElement);t.appendChild(s)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new KBe(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:di()).pipe(Ua(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(t.templateRef),o=s.rootNodes[0];1===s.rootNodes.length&&o?.nodeType===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(t._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(t){return new(t||n)(U(d0),U(mc),U(mn),D3("role"),U(Sf,8),U(Wi),U(V3),U(Fv),U(SF),U(Tx),U(IF,12),U(cr,8))},n.\u0275cmp=Sn({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,i,r){if(1&t&&(a1(r,eM,5),a1(r,Ff,5),a1(r,JC,5),a1(r,Gv,5),a1(r,Qv,5)),2&t){let s;Gi(s=Qi())&&(i._noDataRow=s.first),Gi(s=Qi())&&(i._contentColumnDefs=s),Gi(s=Qi())&&(i._contentRowDefs=s),Gi(s=Qi())&&(i._contentHeaderRowDefs=s),Gi(s=Qi())&&(i._contentFooterRowDefs=s)}},viewQuery:function(t,i){if(1&t&&(_o(tM,7),_o(nM,7),_o(iM,7),_o(rM,7)),2&t){let r;Gi(r=Qi())&&(i._rowOutlet=r.first),Gi(r=Qi())&&(i._headerRowOutlet=r.first),Gi(r=Qi())&&(i._footerRowOutlet=r.first),Gi(r=Qi())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,i){2&t&&$r("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[rr([{provide:S7,useExisting:n},{provide:Fv,useClass:AJ},{provide:SF,useClass:ate},{provide:IF,useValue:null}])],ngContentSelectors:zBe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(T1(HBe),Do(0),Do(1,1),s2(2,0)(3,1)(4,2)(5,3))},dependencies:[tM,nM,iM,rM],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})();function oM(n,e){return n.concat(Array.from(e))}let XBe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[Lx]}),n})();const YBe=[[["caption"]],[["colgroup"],["col"]]],ZBe=["caption","colgroup, col"];let aM=(()=>{class n extends sM{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275cmp=Sn({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(t,i){2&t&&$r("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[rr([{provide:Fv,useClass:AJ},{provide:sM,useExisting:n},{provide:S7,useExisting:n},{provide:SF,useClass:ate},{provide:IF,useValue:null}]),jt],ngContentSelectors:ZBe,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,i){1&t&&(T1(YBe),Do(0),Do(1,1),s2(2,0)(3,1)(4,2)(5,3))},dependencies:[tM,nM,iM,rM],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})(),Wv=(()=>{class n extends E7{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","matCellDef",""]],features:[rr([{provide:E7,useExisting:n}]),jt]}),n})(),jv=(()=>{class n extends T7{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","matHeaderCellDef",""]],features:[rr([{provide:T7,useExisting:n}]),jt]}),n})(),$v=(()=>{class n extends Ff{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[rr([{provide:Ff,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),jt]}),n})(),Kv=(()=>{class n extends CF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[jt]}),n})(),qv=(()=>{class n extends MF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[jt]}),n})(),cM=(()=>{class n extends Gv{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[rr([{provide:Gv,useExisting:n}]),jt]}),n})(),lM=(()=>{class n extends JC{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[rr([{provide:JC,useExisting:n}]),jt]}),n})(),uM=(()=>{class n extends TF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275cmp=Sn({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[rr([{provide:TF,useExisting:n}]),jt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&s2(0,0)},dependencies:[Pf],encapsulation:2}),n})(),hM=(()=>{class n extends DF{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275cmp=Sn({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[rr([{provide:DF,useExisting:n}]),jt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,i){1&t&&s2(0,0)},dependencies:[Pf],encapsulation:2}),n})(),cke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[XBe,Yi,Yi]}),n})(),uke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[l6,ZRe,XLe,eZ,vk,ZLe,gIe,AIe,EIe,VIe,FEe,cRe,wRe,YRe,bRe,kRe,YC,cke,ZDe,iBe,oBe,fh,hBe,pBe,wBe,EBe,FBe,Lx]}),n})(),mke=(()=>{class n extends D1{constructor(t,i,r,s,o,a,c){super(t,null,i,r),this.ngClassInstance=c,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new K9(s,o,t,a)),this.init(),this.setValue("","")}set klass(t){this.ngClassInstance.klass=t,this.setValue(t,"")}updateWithValue(t){this.ngClassInstance.ngClass=t,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(Ga),U(l1),U(d0),U(lp),U(pa),U(K9,10))},n.\u0275dir=gt({type:n,inputs:{klass:["class","klass"]},features:[jt]}),n})();const Ake=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let ute=(()=>{class n extends mke{constructor(){super(...arguments),this.inputs=Ake}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[jt]}),n})();class bke{constructor(e,t,i=!0){this.key=e,this.value=t,this.key=i?e.replace(/['"]/g,"").trim():e.trim(),this.value=i?t.replace(/['"]/g,"").trim():t.trim(),this.value=this.value.replace(/;/,"")}}function hte(n){let e=typeof n;return"object"===e?n.constructor===Array?"array":n.constructor===Set?"set":"object":e}function dte(n){const[e,...t]=n.split(":");return new bke(e,t.join(":"))}function pte(n,e){return e.key&&(n[e.key]=e.value),n}let Mke=(()=>{class n extends D1{constructor(t,i,r,s,o,a,c,l,u){super(t,null,i,r),this.sanitizer=s,this.ngStyleInstance=c,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new r6(t,o,a)),this.init();const f=this.nativeElement.getAttribute("style")??"";this.fallbackStyles=this.buildStyleMap(f),this.isServer=l&&r7(u)}updateWithValue(t){const i=this.buildStyleMap(t);this.ngStyleInstance.ngStyle={...this.fallbackStyles,...i},this.isServer&&this.applyStyleToElement(i),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(t){const i=r=>this.sanitizer.sanitize(lo.STYLE,r)??"";if(t)switch(hte(t)){case"string":return gte(function xke(n,e=";"){return String(n).trim().split(e).map(t=>t.trim()).filter(t=>""!==t)}(t),i);case"array":return gte(t,i);default:return function fte(n,e){let t=[];return"set"===hte(n)?n.forEach(i=>t.push(i)):Object.keys(n).forEach(i=>{t.push(`${i}:${n[i]}`)}),function Cke(n,e){return n.map(dte).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(pte,{})}(t,e)}(t,i)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(Ga),U(l1),U(Mf),U(lp),U(pa),U(r6,10),U(_7),U(Cu))},n.\u0275dir=gt({type:n,features:[jt]}),n})();const Ske=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let Xv=(()=>{class n extends Mke{constructor(){super(...arguments),this.inputs=Ske}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[jt]}),n})();function gte(n,e){return n.map(dte).filter(i=>!!i).map(i=>(e&&(i.value=e(i.value)),i)).reduce(pte,{})}let mte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[fk]}),n})(),bFe=(()=>{class n extends q1{buildStyles(t,i){let r=!1;(t=t||"none").endsWith("!")&&(t=t.substring(0,t.indexOf("!")),r=!0);const s={display:i.inline?"inline-grid":"grid","grid-auto-columns":"","grid-template-columns":""};return s[r?"grid-auto-columns":"grid-template-columns"]=t,s}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xFe=(()=>{class n extends D1{constructor(t,i,r,s){super(t,i,r,s),this.DIRECTIVE_KEY="grid-columns",this._inline=!1,this.init()}get inline(){return this._inline}set inline(t){this._inline=Hr(t)}updateWithValue(t){this.styleCache=this.inline?MFe:CFe,this.addStyles(t,{inline:this.inline})}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(bFe),U(Ga),U(l1))},n.\u0275dir=gt({type:n,inputs:{inline:["gdInline","inline"]},features:[jt]}),n})();const CFe=new Map,MFe=new Map,SFe=["gdColumns","gdColumns.xs","gdColumns.sm","gdColumns.md","gdColumns.lg","gdColumns.xl","gdColumns.lt-sm","gdColumns.lt-md","gdColumns.lt-lg","gdColumns.lt-xl","gdColumns.gt-xs","gdColumns.gt-sm","gdColumns.gt-md","gdColumns.gt-lg"];let xte=(()=>{class n extends xFe{constructor(){super(...arguments),this.inputs=SFe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","gdColumns",""],["","gdColumns.xs",""],["","gdColumns.sm",""],["","gdColumns.md",""],["","gdColumns.lg",""],["","gdColumns.xl",""],["","gdColumns.lt-sm",""],["","gdColumns.lt-md",""],["","gdColumns.lt-lg",""],["","gdColumns.lt-xl",""],["","gdColumns.gt-xs",""],["","gdColumns.gt-sm",""],["","gdColumns.gt-md",""],["","gdColumns.gt-lg",""]],inputs:{gdColumns:"gdColumns","gdColumns.xs":"gdColumns.xs","gdColumns.sm":"gdColumns.sm","gdColumns.md":"gdColumns.md","gdColumns.lg":"gdColumns.lg","gdColumns.xl":"gdColumns.xl","gdColumns.lt-sm":"gdColumns.lt-sm","gdColumns.lt-md":"gdColumns.lt-md","gdColumns.lt-lg":"gdColumns.lt-lg","gdColumns.lt-xl":"gdColumns.lt-xl","gdColumns.gt-xs":"gdColumns.gt-xs","gdColumns.gt-sm":"gdColumns.gt-sm","gdColumns.gt-md":"gdColumns.gt-md","gdColumns.gt-lg":"gdColumns.gt-lg"},features:[jt]}),n})(),TFe=(()=>{class n extends q1{buildStyles(t,i){return{display:i.inline?"inline-grid":"grid","grid-gap":t||"0"}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LFe=(()=>{class n extends D1{constructor(t,i,r,s){super(t,r,i,s),this.DIRECTIVE_KEY="grid-gap",this._inline=!1,this.init()}get inline(){return this._inline}set inline(t){this._inline=Hr(t)}updateWithValue(t){this.styleCache=this.inline?IFe:DFe,this.addStyles(t,{inline:this.inline})}}return n.\u0275fac=function(t){return new(t||n)(U(mn),U(Ga),U(TFe),U(l1))},n.\u0275dir=gt({type:n,inputs:{inline:["gdInline","inline"]},features:[jt]}),n})();const DFe=new Map,IFe=new Map,RFe=["gdGap","gdGap.xs","gdGap.sm","gdGap.md","gdGap.lg","gdGap.xl","gdGap.lt-sm","gdGap.lt-md","gdGap.lt-lg","gdGap.lt-xl","gdGap.gt-xs","gdGap.gt-sm","gdGap.gt-md","gdGap.gt-lg"];let Cte=(()=>{class n extends LFe{constructor(){super(...arguments),this.inputs=RFe}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Qn(n)))(i||n)}}(),n.\u0275dir=gt({type:n,selectors:[["","gdGap",""],["","gdGap.xs",""],["","gdGap.sm",""],["","gdGap.md",""],["","gdGap.lg",""],["","gdGap.xl",""],["","gdGap.lt-sm",""],["","gdGap.lt-md",""],["","gdGap.lt-lg",""],["","gdGap.lt-xl",""],["","gdGap.gt-xs",""],["","gdGap.gt-sm",""],["","gdGap.gt-md",""],["","gdGap.gt-lg",""]],inputs:{gdGap:"gdGap","gdGap.xs":"gdGap.xs","gdGap.sm":"gdGap.sm","gdGap.md":"gdGap.md","gdGap.lg":"gdGap.lg","gdGap.xl":"gdGap.xl","gdGap.lt-sm":"gdGap.lt-sm","gdGap.lt-md":"gdGap.lt-md","gdGap.lt-lg":"gdGap.lt-lg","gdGap.lt-xl":"gdGap.lt-xl","gdGap.gt-xs":"gdGap.gt-xs","gdGap.gt-sm":"gdGap.gt-sm","gdGap.gt-md":"gdGap.gt-md","gdGap.gt-lg":"gdGap.gt-lg"},features:[jt]}),n})(),Ste=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[fk]}),n})(),jFe=(()=>{class n{constructor(t,i){r7(i)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,i=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:ph,useValue:{...dk,...t}},{provide:pk,useValue:i,multi:!0},{provide:_7,useValue:!0}]:[{provide:ph,useValue:{...dk,...t}},{provide:pk,useValue:i,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(Xe(_7),Xe(Cu))},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({imports:[wZ,mte,Ste,wZ,mte,Ste]}),n})();const BF=new zt("DISQUS_SHORTNAME");class Hf{constructor(e,t){this.shortname=e,this._document=t}get DISQUS(){return this._document.defaultView.DISQUS}get disqus_config(){return this._document.defaultView.disqus_config}set disqus_config(e){this._document.defaultView.disqus_config=e}}Hf.\u0275fac=function(e){return new(e||Hf)(Xe(BF),Xe(Wi))},Hf.\u0275prov=Rt({token:Hf,factory:Hf.\u0275fac,providedIn:"root"}),Hf.ngInjectableDef=V4({factory:function(){return new Hf(Os(BF),Os(Wi))},token:Hf,providedIn:"root"});let Yv=(()=>{class n{constructor(t,i,r){this.renderer=t,this.el=i,this.dService=r,this.newComment=new sr(!0),this.ready=new sr(!0),this.paginate=new sr(!0)}ngOnChanges(){this.dService.DISQUS?this.reset():this.addDisqusScript()}addDisqusScript(){this.dService.disqus_config=this.getConfig();const t=this.renderer.createElement("script");t.src=`//${this.dService.shortname}.disqus.com/embed.js`,t.async=!0,t.type="text/javascript",this.renderer.setAttribute(t,"data-timestamp",(new Date).getTime().toString()),this.renderer.appendChild(this.el.nativeElement,t)}reset(){this.dService.DISQUS.reset({reload:!0,config:this.getConfig()})}getConfig(){const t=this;return function(){this.page.identifier=t.identifier,this.page.url=t.validateUrl(t.url),this.page.title=t.title,this.category_id=t.category,this.language=t.language,this.callbacks.onNewComment=[i=>{t.newComment.emit(i)}],this.callbacks.onReady=[i=>{t.ready.emit(i)}],this.callbacks.onPaginate=[i=>{t.paginate.emit(i)}]}}validateUrl(t){if(t){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t))return t;console.warn("[Disqus]: Invalid URL")}}}return n.\u0275fac=function(t){return new(t||n)(U(pa),U(mn),U(Hf))},n.\u0275cmp=Sn({type:n,selectors:[["disqus"]],inputs:{url:"url",identifier:"identifier",title:"title",category:"category",language:"language"},outputs:{newComment:"newComment",ready:"ready",paginate:"paginate"},features:[Ir],decls:1,vars:0,consts:[["id","disqus_thread"]],template:function(t,i){1&t&&Ue(0,"div",0)},encapsulation:2,changeDetection:0}),n})(),$Fe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:BF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})();var wi=ae(5861);const kF=new zt("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),Ete=new zt("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=Os(Wi);if(!n)throw new Error("Window is not available");return n}}),qFe=new zt("ngx-data-layer",{providedIn:"root",factory:()=>function KFe(n){return n?n.dataLayer=n.dataLayer||[]:null}(Os(Ete))}),Tte=new zt("ngx-gtag-fn",{providedIn:"root",factory:()=>function XFe(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(Os(Ete),Os(qFe))}),ZFe={provide:G9,multi:!0,useFactory:function JFe(n,e,t){return(0,wi.Z)(function*(){if(!n.trackingCode)return void(ix()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule."));if(!e)return void(ix()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface."));t||ix()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=n?.initCommands??[],n.initCommands.find(s=>"config"===s.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(s=>"js"===s.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const s of n.initCommands)e(s.command,...s.values);const i=t.createElement("script");i.async=!0,i.src=n.uri,n.nonce&&i.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(i)})},deps:[kF,Tte,Wi]};new zt("ngx-google-analytics-routing-settings",{factory:()=>({})});let nPe=(()=>{class n{static forRoot(t,i=[],r,s,o){return{ngModule:n,providers:[{provide:kF,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:s,nonce:o}},ZFe]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})();const x6=100,C0=1e3,s3=1001,X1=1003,u1=1006,C6=1008,Bp=1009,kp=1014,_4=1015,M0=1016,Fp=1020,gh=1023,Pp=1026,Hp=1027,t_=2300,R7=2301,zf=3e3,ta=3001,Of="srgb",zp="srgb-linear";class Op{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const wl=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let mne=1234567;const Np=Math.PI/180,n_=180/Math.PI;function Tu(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(wl[255&n]+wl[n>>8&255]+wl[n>>16&255]+wl[n>>24&255]+"-"+wl[255&e]+wl[e>>8&255]+"-"+wl[e>>16&15|64]+wl[e>>24&255]+"-"+wl[63&t|128]+wl[t>>8&255]+"-"+wl[t>>16&255]+wl[t>>24&255]+wl[255&i]+wl[i>>8&255]+wl[i>>16&255]+wl[i>>24&255]).toLowerCase()}function yc(n,e,t){return Math.max(e,Math.min(t,n))}function KF(n,e){return(n%e+e)%e}function i_(n,e,t){return(1-t)*n+t*e}function qF(n){return 0==(n&n-1)&&0!==n}function Ane(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function _M(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Nf(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ca(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}var yM=Object.freeze({__proto__:null,DEG2RAD:Np,RAD2DEG:n_,generateUUID:Tu,clamp:yc,euclideanModulo:KF,mapLinear:function KPe(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},inverseLerp:function qPe(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:i_,damp:function XPe(n,e,t,i){return i_(n,e,1-Math.exp(-t*i))},pingpong:function YPe(n,e=1){return e-Math.abs(KF(n,2*e)-e)},smoothstep:function ZPe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function JPe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function eHe(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function tHe(n,e){return n+Math.random()*(e-n)},randFloatSpread:function nHe(n){return n*(.5-Math.random())},seededRandom:function iHe(n){void 0!==n&&(mne=n);let e=mne+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function rHe(n){return n*Np},radToDeg:function sHe(n){return n*n_},isPowerOfTwo:qF,ceilPowerOfTwo:Ane,floorPowerOfTwo:_M,setQuaternionFromProperEuler:function oHe(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),l=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),g=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*u,c*f,c*p,a*l);break;case"YZY":n.set(c*p,a*u,c*f,a*l);break;case"ZXZ":n.set(c*f,c*p,a*u,a*l);break;case"XZX":n.set(a*u,c*v,c*g,a*l);break;case"YXY":n.set(c*g,a*u,c*v,a*l);break;case"ZYZ":n.set(c*v,c*g,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Ca,denormalize:Nf});class Yt{constructor(e=0,t=0){Yt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Q3{constructor(){Q3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],f=i[7],p=i[2],g=i[5],v=i[8],_=r[0],w=r[3],b=r[6],x=r[1],M=r[4],E=r[7],I=r[2],k=r[5],O=r[8];return s[0]=o*_+a*x+c*I,s[3]=o*w+a*M+c*k,s[6]=o*b+a*E+c*O,s[1]=l*_+u*x+f*I,s[4]=l*w+u*M+f*k,s[7]=l*b+u*E+f*O,s[2]=p*_+g*x+v*I,s[5]=p*w+g*M+v*k,s[8]=p*b+g*E+v*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=u*o-a*l,p=a*c-u*s,g=l*s-o*c,v=t*f+i*p+r*g;if(0===v)return this.set(0,0,0,0,0,0,0,0,0);const _=1/v;return e[0]=f*_,e[1]=(r*l-u*i)*_,e[2]=(a*i-r*o)*_,e[3]=p*_,e[4]=(u*t-r*c)*_,e[5]=(r*s-a*t)*_,e[6]=g*_,e[7]=(i*c-l*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],c=r[1],l=r[4],u=r[7];return r[0]=t*s+i*c,r[3]=t*o+i*l,r[6]=t*a+i*u,r[1]=-i*s+t*c,r[4]=-i*o+t*l,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function vne(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function r_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Vp(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function wM(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const XF={[Of]:{[zp]:Vp},[zp]:{[Of]:wM}},mh={legacyMode:!0,get workingColorSpace(){return zp},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(XF[e]&&void 0!==XF[e][t]){const i=XF[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},_ne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},h2={r:0,g:0,b:0},Ah={h:0,s:0,l:0},bM={h:0,s:0,l:0};function YF(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function xM(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let P7,In=(()=>{class n{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=Of){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,mh.toWorkingColorSpace(this,i),this}setRGB(t,i,r,s=zp){return this.r=t,this.g=i,this.b=r,mh.toWorkingColorSpace(this,s),this}setHSL(t,i,r,s=zp){if(t=KF(t,1),i=yc(i,0,1),r=yc(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,a=2*r-o;this.r=YF(a,o,t+1/3),this.g=YF(a,o,t),this.b=YF(a,o,t-1/3)}return mh.toWorkingColorSpace(this,s),this}setStyle(t,i=Of){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const c=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,mh.toWorkingColorSpace(this,i),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,mh.toWorkingColorSpace(this,i),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){const l=parseFloat(o[1])/360,u=parseFloat(o[2])/100,f=parseFloat(o[3])/100;return r(o[4]),this.setHSL(l,u,f,i)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,mh.toWorkingColorSpace(this,i),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,mh.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=Of){const r=_ne[t.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Vp(t.r),this.g=Vp(t.g),this.b=Vp(t.b),this}copyLinearToSRGB(t){return this.r=wM(t.r),this.g=wM(t.g),this.b=wM(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Of){return mh.fromWorkingColorSpace(xM(this,h2),t),yc(255*h2.r,0,255)<<16^yc(255*h2.g,0,255)<<8^yc(255*h2.b,0,255)<<0}getHexString(t=Of){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=zp){mh.fromWorkingColorSpace(xM(this,h2),i);const r=h2.r,s=h2.g,o=h2.b,a=Math.max(r,s,o),c=Math.min(r,s,o);let l,u;const f=(c+a)/2;if(c===a)l=0,u=0;else{const p=a-c;switch(u=f<=.5?p/(a+c):p/(2-a-c),a){case r:l=(s-o)/p+(s<o?6:0);break;case s:l=(o-r)/p+2;break;case o:l=(r-s)/p+4}l/=6}return t.h=l,t.s=u,t.l=f,t}getRGB(t,i=zp){return mh.fromWorkingColorSpace(xM(this,h2),i),t.r=h2.r,t.g=h2.g,t.b=h2.b,t}getStyle(t=Of){return mh.fromWorkingColorSpace(xM(this,h2),t),t!==Of?`color(${t} ${h2.r} ${h2.g} ${h2.b})`:`rgb(${255*h2.r|0},${255*h2.g|0},${255*h2.b|0})`}offsetHSL(t,i,r){return this.getHSL(Ah),Ah.h+=t,Ah.s+=i,Ah.l+=r,this.setHSL(Ah.h,Ah.s,Ah.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(Ah),t.getHSL(bM);const r=i_(Ah.h,bM.h,i),s=i_(Ah.s,bM.s,i),o=i_(Ah.l,bM.l,i);return this.setHSL(r,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=_ne,n})();class yne{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===P7&&(P7=r_("canvas")),P7.width=e.width,P7.height=e.height;const i=P7.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=P7}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=r_("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*Vp(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Vp(t[i]/255)):Vp(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class H7{constructor(e=null){this.isSource=!0,this.uuid=Tu(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(ZF(r[o].isDataTexture?r[o].image:r[o]))}else s=ZF(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function ZF(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?yne.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let cHe=0,y4=(()=>{class n extends Op{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=s3,s=s3,o=u1,a=C6,c=gh,l=Bp,u=1,f=zf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:cHe++}),this.uuid=Tu(),this.name="",this.source=new H7(t),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new Yt(0,0),this.repeat=new Yt(1,1),this.center=new Yt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Q3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case C0:t.x=t.x-Math.floor(t.x);break;case s3:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case C0:t.y=t.y-Math.floor(t.y);break;case s3:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();class Wo{constructor(e=0,t=0,i=0,r=1){Wo.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],f=c[8],p=c[1],g=c[5],v=c[9],_=c[2],w=c[6],b=c[10];if(Math.abs(u-p)<.01&&Math.abs(f-_)<.01&&Math.abs(v-w)<.01){if(Math.abs(u+p)<.1&&Math.abs(f+_)<.1&&Math.abs(v+w)<.1&&Math.abs(l+g+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(l+1)/2,E=(g+1)/2,I=(b+1)/2,k=(u+p)/4,O=(f+_)/4,R=(v+w)/4;return M>E&&M>I?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=k/i,s=O/i):E>I?E<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=k/r,s=R/r):I<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(I),i=O/s,r=R/s),this.set(i,r,s,t),this}let x=Math.sqrt((w-v)*(w-v)+(f-_)*(f-_)+(p-u)*(p-u));return Math.abs(x)<.001&&(x=1),this.x=(w-v)/x,this.y=(f-_)/x,this.z=(p-u)/x,this.w=Math.acos((l+g+b-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class w4 extends Op{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Wo(0,0,e,t),this.scissorTest=!1,this.viewport=new Wo(0,0,e,t),this.texture=new y4({width:e,height:t,depth:1},i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:u1,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new H7(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class JF extends y4{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=X1,this.minFilter=X1,this.wrapR=s3,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class wne extends y4{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=X1,this.minFilter=X1,this.wrapR=s3,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class J2{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],f=i[r+3];const p=s[o+0],g=s[o+1],v=s[o+2],_=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=f);if(1===a)return e[t+0]=p,e[t+1]=g,e[t+2]=v,void(e[t+3]=_);if(f!==_||c!==p||l!==g||u!==v){let w=1-a;const b=c*p+l*g+u*v+f*_,x=b>=0?1:-1,M=1-b*b;if(M>Number.EPSILON){const I=Math.sqrt(M),k=Math.atan2(I,b*x);w=Math.sin(w*k)/I,a=Math.sin(a*k)/I}const E=a*x;if(c=c*w+p*E,l=l*w+g*E,u=u*w+v*E,f=f*w+_*E,w===1-a){const I=1/Math.sqrt(c*c+l*l+u*u+f*f);c*=I,l*=I,u*=I,f*=I}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],f=s[o],p=s[o+1],g=s[o+2],v=s[o+3];return e[t]=a*v+u*f+c*g-l*p,e[t+1]=c*v+u*p+l*f-a*g,e[t+2]=l*v+u*g+a*p-c*f,e[t+3]=u*v-a*f-c*p-l*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),f=a(s/2),p=c(i/2),g=c(r/2),v=c(s/2);switch(o){case"XYZ":this._x=p*u*f+l*g*v,this._y=l*g*f-p*u*v,this._z=l*u*v+p*g*f,this._w=l*u*f-p*g*v;break;case"YXZ":this._x=p*u*f+l*g*v,this._y=l*g*f-p*u*v,this._z=l*u*v-p*g*f,this._w=l*u*f+p*g*v;break;case"ZXY":this._x=p*u*f-l*g*v,this._y=l*g*f+p*u*v,this._z=l*u*v+p*g*f,this._w=l*u*f-p*g*v;break;case"ZYX":this._x=p*u*f-l*g*v,this._y=l*g*f+p*u*v,this._z=l*u*v-p*g*f,this._w=l*u*f+p*g*v;break;case"YZX":this._x=p*u*f+l*g*v,this._y=l*g*f+p*u*v,this._z=l*u*v-p*g*f,this._w=l*u*f-p*g*v;break;case"XZY":this._x=p*u*f-l*g*v,this._y=l*g*f-p*u*v,this._z=l*u*v+p*g*f,this._w=l*u*f+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],f=t[10],p=i+a+f;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(u-c)*g,this._y=(s-l)*g,this._z=(o-r)*g}else if(i>a&&i>f){const g=2*Math.sqrt(1+i-a-f);this._w=(u-c)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+l)/g}else if(a>f){const g=2*Math.sqrt(1+a-i-f);this._w=(s-l)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(c+u)/g}else{const g=2*Math.sqrt(1+f-i-a);this._w=(o-r)/g,this._x=(s+l)/g,this._y=(c+u)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(yc(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),f=Math.sin((1-t)*u)/l,p=Math.sin(t*u)/l;return this._w=o*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class be{constructor(e=0,t=0,i=0){be.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(bne.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(bne.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=c*t+o*r-a*i,u=c*i+a*t-s*r,f=c*r+s*i-o*t,p=-s*t-o*i-a*r;return this.x=l*c+p*-s+u*-a-f*-o,this.y=u*c+p*-o+f*-s-l*-a,this.z=f*c+p*-a+l*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return eP.copy(this).projectOnVector(e),this.sub(eP)}reflect(e){return this.sub(eP.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(yc(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const eP=new be,bne=new J2;class Up{constructor(e=new be(1/0,1/0,1/0),t=new be(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.length;c<l;c+=3){const u=e[c],f=e[c+1],p=e[c+2];u<t&&(t=u),f<i&&(i=f),p<r&&(r=p),u>s&&(s=u),f>o&&(o=f),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.count;c<l;c++){const u=e.getX(c),f=e.getY(c),p=e.getZ(c);u<t&&(t=u),f<i&&(i=f),p<r&&(r=p),u>s&&(s=u),f>o&&(o=f),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Gp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Gp.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Gp)}else null===i.boundingBox&&i.computeBoundingBox(),tP.copy(i.boundingBox),tP.applyMatrix4(e.matrixWorld),this.union(tP);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Gp),Gp.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(s_),CM.subVectors(this.max,s_),z7.subVectors(e.a,s_),O7.subVectors(e.b,s_),N7.subVectors(e.c,s_),S6.subVectors(O7,z7),E6.subVectors(N7,O7),Qp.subVectors(z7,N7);let t=[0,-S6.z,S6.y,0,-E6.z,E6.y,0,-Qp.z,Qp.y,S6.z,0,-S6.x,E6.z,0,-E6.x,Qp.z,0,-Qp.x,-S6.y,S6.x,0,-E6.y,E6.x,0,-Qp.y,Qp.x,0];return!(!nP(t,z7,O7,N7,CM)||(t=[1,0,0,0,1,0,0,0,1],!nP(t,z7,O7,N7,CM)))&&(MM.crossVectors(S6,E6),t=[MM.x,MM.y,MM.z],nP(t,z7,O7,N7,CM))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Gp.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Gp).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Vf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Vf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Vf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Vf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Vf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Vf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Vf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Vf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Vf)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Vf=[new be,new be,new be,new be,new be,new be,new be,new be],Gp=new be,tP=new Up,z7=new be,O7=new be,N7=new be,S6=new be,E6=new be,Qp=new be,s_=new be,CM=new be,MM=new be,Wp=new be;function nP(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Wp.fromArray(n,s);const a=r.x*Math.abs(Wp.x)+r.y*Math.abs(Wp.y)+r.z*Math.abs(Wp.z),c=e.dot(Wp),l=t.dot(Wp),u=i.dot(Wp);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const lHe=new Up,xne=new be,SM=new be,iP=new be;class jp{constructor(e=new be,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):lHe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){iP.subVectors(e,this.center);const t=iP.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(iP.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return!0===this.center.equals(e.center)?SM.set(0,0,1).multiplyScalar(e.radius):SM.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(xne.copy(e.center).add(SM)),this.expandByPoint(xne.copy(e.center).sub(SM)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Uf=new be,rP=new be,EM=new be,T6=new be,sP=new be,TM=new be,oP=new be;class LM{constructor(e=new be,t=new be(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Uf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Uf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Uf.copy(this.direction).multiplyScalar(t).add(this.origin),Uf.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){rP.copy(e).add(t).multiplyScalar(.5),EM.copy(t).sub(e).normalize(),T6.copy(this.origin).sub(rP);const s=.5*e.distanceTo(t),o=-this.direction.dot(EM),a=T6.dot(this.direction),c=-T6.dot(EM),l=T6.lengthSq(),u=Math.abs(1-o*o);let f,p,g,v;if(u>0)if(f=o*c-a,p=o*a-c,v=s*u,f>=0)if(p>=-v)if(p<=v){const _=1/u;f*=_,p*=_,g=f*(f+o*p+2*a)+p*(o*f+p+2*c)+l}else p=s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;else p=-s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;else p<=-v?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-c),s),g=-f*f+p*(p+2*c)+l):p<=v?(f=0,p=Math.min(Math.max(-s,-c),s),g=p*(p+2*c)+l):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-c),s),g=-f*f+p*(p+2*c)+l);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),g=-f*f+p*(p+2*c)+l;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),r&&r.copy(EM).multiplyScalar(p).add(rP),g}intersectSphere(e,t){Uf.subVectors(e.center,this.origin);const i=Uf.dot(this.direction),r=Uf.dot(Uf)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return a<0&&c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,p=this.origin;return l>=0?(i=(e.min.x-p.x)*l,r=(e.max.x-p.x)*l):(i=(e.max.x-p.x)*l,r=(e.min.x-p.x)*l),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),i>o||s>r||((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),f>=0?(a=(e.min.z-p.z)*f,c=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,c=(e.min.z-p.z)*f),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Uf)}intersectTriangle(e,t,i,r,s){sP.subVectors(t,e),TM.subVectors(i,e),oP.crossVectors(sP,TM);let a,o=this.direction.dot(oP);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}T6.subVectors(this.origin,e);const c=a*this.direction.dot(TM.crossVectors(T6,TM));if(c<0)return null;const l=a*this.direction.dot(sP.cross(T6));if(l<0||c+l>o)return null;const u=-a*T6.dot(oP);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Zi{constructor(){Zi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,c,l,u,f,p,g,v,_,w){const b=this.elements;return b[0]=e,b[4]=t,b[8]=i,b[12]=r,b[1]=s,b[5]=o,b[9]=a,b[13]=c,b[2]=l,b[6]=u,b[10]=f,b[14]=p,b[3]=g,b[7]=v,b[11]=_,b[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Zi).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/V7.setFromMatrixColumn(e,0).length(),s=1/V7.setFromMatrixColumn(e,1).length(),o=1/V7.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if("XYZ"===e.order){const p=o*u,g=o*f,v=a*u,_=a*f;t[0]=c*u,t[4]=-c*f,t[8]=l,t[1]=g+v*l,t[5]=p-_*l,t[9]=-a*c,t[2]=_-p*l,t[6]=v+g*l,t[10]=o*c}else if("YXZ"===e.order){const p=c*u,g=c*f,v=l*u,_=l*f;t[0]=p+_*a,t[4]=v*a-g,t[8]=o*l,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=g*a-v,t[6]=_+p*a,t[10]=o*c}else if("ZXY"===e.order){const p=c*u,g=c*f,v=l*u,_=l*f;t[0]=p-_*a,t[4]=-o*f,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*u,t[9]=_-p*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const p=o*u,g=o*f,v=a*u,_=a*f;t[0]=c*u,t[4]=v*l-g,t[8]=p*l+_,t[1]=c*f,t[5]=_*l+p,t[9]=g*l-v,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const p=o*c,g=o*l,v=a*c,_=a*l;t[0]=c*u,t[4]=_-p*f,t[8]=v*f+g,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=g*f+v,t[10]=p-_*f}else if("XZY"===e.order){const p=o*c,g=o*l,v=a*c,_=a*l;t[0]=c*u,t[4]=-f,t[8]=l*u,t[1]=p*f+_,t[5]=o*u,t[9]=g*f-v,t[2]=v*f-g,t[6]=a*u,t[10]=_*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(uHe,e,hHe)}lookAt(e,t,i){const r=this.elements;return Lu.subVectors(e,t),0===Lu.lengthSq()&&(Lu.z=1),Lu.normalize(),L6.crossVectors(i,Lu),0===L6.lengthSq()&&(1===Math.abs(i.z)?Lu.x+=1e-4:Lu.z+=1e-4,Lu.normalize(),L6.crossVectors(i,Lu)),L6.normalize(),DM.crossVectors(Lu,L6),r[0]=L6.x,r[4]=DM.x,r[8]=Lu.x,r[1]=L6.y,r[5]=DM.y,r[9]=Lu.y,r[2]=L6.z,r[6]=DM.z,r[10]=Lu.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],f=i[5],p=i[9],g=i[13],v=i[2],_=i[6],w=i[10],b=i[14],x=i[3],M=i[7],E=i[11],I=i[15],k=r[0],O=r[4],R=r[8],P=r[12],Q=r[1],J=r[5],Ce=r[9],Ae=r[13],G=r[2],ue=r[6],X=r[10],le=r[14],de=r[3],pe=r[7],Fe=r[11],st=r[15];return s[0]=o*k+a*Q+c*G+l*de,s[4]=o*O+a*J+c*ue+l*pe,s[8]=o*R+a*Ce+c*X+l*Fe,s[12]=o*P+a*Ae+c*le+l*st,s[1]=u*k+f*Q+p*G+g*de,s[5]=u*O+f*J+p*ue+g*pe,s[9]=u*R+f*Ce+p*X+g*Fe,s[13]=u*P+f*Ae+p*le+g*st,s[2]=v*k+_*Q+w*G+b*de,s[6]=v*O+_*J+w*ue+b*pe,s[10]=v*R+_*Ce+w*X+b*Fe,s[14]=v*P+_*Ae+w*le+b*st,s[3]=x*k+M*Q+E*G+I*de,s[7]=x*O+M*J+E*ue+I*pe,s[11]=x*R+M*Ce+E*X+I*Fe,s[15]=x*P+M*Ae+E*le+I*st,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],f=e[6],p=e[10],g=e[14];return e[3]*(+s*c*f-r*l*f-s*a*p+i*l*p+r*a*g-i*c*g)+e[7]*(+t*c*g-t*l*p+s*o*p-r*o*g+r*l*u-s*c*u)+e[11]*(+t*l*f-t*a*g-s*o*f+i*o*g+s*a*u-i*l*u)+e[15]*(-r*a*u-t*c*f+t*a*p+r*o*f-i*o*p+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=e[9],p=e[10],g=e[11],v=e[12],_=e[13],w=e[14],b=e[15],x=f*w*l-_*p*l+_*c*g-a*w*g-f*c*b+a*p*b,M=v*p*l-u*w*l-v*c*g+o*w*g+u*c*b-o*p*b,E=u*_*l-v*f*l+v*a*g-o*_*g-u*a*b+o*f*b,I=v*f*c-u*_*c-v*a*p+o*_*p+u*a*w-o*f*w,k=t*x+i*M+r*E+s*I;if(0===k)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/k;return e[0]=x*O,e[1]=(_*p*s-f*w*s-_*r*g+i*w*g+f*r*b-i*p*b)*O,e[2]=(a*w*s-_*c*s+_*r*l-i*w*l-a*r*b+i*c*b)*O,e[3]=(f*c*s-a*p*s-f*r*l+i*p*l+a*r*g-i*c*g)*O,e[4]=M*O,e[5]=(u*w*s-v*p*s+v*r*g-t*w*g-u*r*b+t*p*b)*O,e[6]=(v*c*s-o*w*s-v*r*l+t*w*l+o*r*b-t*c*b)*O,e[7]=(o*p*s-u*c*s+u*r*l-t*p*l-o*r*g+t*c*g)*O,e[8]=E*O,e[9]=(v*f*s-u*_*s-v*i*g+t*_*g+u*i*b-t*f*b)*O,e[10]=(o*_*s-v*a*s+v*i*l-t*_*l-o*i*b+t*a*b)*O,e[11]=(u*a*s-o*f*s-u*i*l+t*f*l+o*i*g-t*a*g)*O,e[12]=I*O,e[13]=(u*_*r-v*f*r+v*i*p-t*_*p-u*i*w+t*f*w)*O,e[14]=(v*a*r-o*_*r-v*i*c+t*_*c+o*i*w-t*a*w)*O,e[15]=(o*f*r-u*a*r+u*i*c-t*f*c-o*i*p+t*a*p)*O,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,f=a+a,p=s*l,g=s*u,v=s*f,_=o*u,w=o*f,b=a*f,x=c*l,M=c*u,E=c*f,I=i.x,k=i.y,O=i.z;return r[0]=(1-(_+b))*I,r[1]=(g+E)*I,r[2]=(v-M)*I,r[3]=0,r[4]=(g-E)*k,r[5]=(1-(p+b))*k,r[6]=(w+x)*k,r[7]=0,r[8]=(v+M)*O,r[9]=(w-x)*O,r[10]=(1-(p+_))*O,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=V7.set(r[0],r[1],r[2]).length();const o=V7.set(r[4],r[5],r[6]).length(),a=V7.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],vh.copy(this);const l=1/s,u=1/o,f=1/a;return vh.elements[0]*=l,vh.elements[1]*=l,vh.elements[2]*=l,vh.elements[4]*=u,vh.elements[5]*=u,vh.elements[6]*=u,vh.elements[8]*=f,vh.elements[9]*=f,vh.elements[10]*=f,t.setFromRotationMatrix(vh),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,l=2*s/(i-r),u=(t+e)/(t-e),f=(i+r)/(i-r),p=-(o+s)/(o-s),g=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,c=1/(t-e),l=1/(i-r),u=1/(o-s),f=(t+e)*c,p=(i+r)*l,g=(o+s)*u;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const V7=new be,vh=new Zi,uHe=new be(0,0,0),hHe=new be(1,1,1),L6=new be,DM=new be,Lu=new be,Cne=new Zi,Mne=new J2;let fHe=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],f=s[9],p=s[2],g=s[6],v=s[10];switch(i){case"XYZ":this._y=Math.asin(yc(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,v),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-yc(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,v),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(yc(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-yc(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(yc(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(c,v));break;case"XZY":this._z=Math.asin(-yc(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-f,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return Cne.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Cne,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return Mne.setFromEuler(this),this.setFromQuaternion(Mne,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return n.DefaultOrder="XYZ",n.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],n})();class aP{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let dHe=0;const Sne=new be,U7=new J2,Gf=new Zi,IM=new be,o_=new be,pHe=new be,gHe=new J2,Ene=new be(1,0,0),Tne=new be(0,1,0),Lne=new be(0,0,1),mHe={type:"added"},Dne={type:"removed"};let el=(()=>{class n extends Op{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:dHe++}),this.uuid=Tu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DefaultUp.clone();const t=new be,i=new fHe,r=new J2,s=new be(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Zi},normalMatrix:{value:new Q3}}),this.matrix=new Zi,this.matrixWorld=new Zi,this.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,this.layers=new aP,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return U7.setFromAxisAngle(t,i),this.quaternion.multiply(U7),this}rotateOnWorldAxis(t,i){return U7.setFromAxisAngle(t,i),this.quaternion.premultiply(U7),this}rotateX(t){return this.rotateOnAxis(Ene,t)}rotateY(t){return this.rotateOnAxis(Tne,t)}rotateZ(t){return this.rotateOnAxis(Lne,t)}translateOnAxis(t,i){return Sne.copy(t).applyQuaternion(this.quaternion),this.position.add(Sne.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(Ene,t)}translateY(t){return this.translateOnAxis(Tne,t)}translateZ(t){return this.translateOnAxis(Lne,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Gf.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?IM.copy(t):IM.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),o_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gf.lookAt(o_,IM,this.up):Gf.lookAt(IM,o_,this.up),this.quaternion.setFromRotationMatrix(Gf),s&&(Gf.extractRotation(s.matrixWorld),U7.setFromRotationMatrix(Gf),this.quaternion.premultiply(U7.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(mHe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Dne)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(Dne)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Gf.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Gf.multiply(t.parent.matrixWorld)),t.applyMatrix4(Gf),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(o_,t,pHe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(o_,gHe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const c=s[o];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),f=a(t.images),p=a(t.shapes),g=a(t.skeletons),v=a(t.animations),_=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),f.length>0&&(r.images=f),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),v.length>0&&(r.animations=v),_.length>0&&(r.nodes=_)}return r.object=s,r;function a(c){const l=[];for(const u in c){const f=c[u];delete f.metadata,l.push(f)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DefaultUp=new be(0,1,0),n.DefaultMatrixAutoUpdate=!0,n.DefaultMatrixWorldAutoUpdate=!0,n})();const _h=new be,Qf=new be,cP=new be,Wf=new be,G7=new be,Q7=new be,Ine=new be,lP=new be,uP=new be,hP=new be;class yh{constructor(e=new be,t=new be,i=new be){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),_h.subVectors(e,t),r.cross(_h);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){_h.subVectors(r,t),Qf.subVectors(i,t),cP.subVectors(e,t);const o=_h.dot(_h),a=_h.dot(Qf),c=_h.dot(cP),l=Qf.dot(Qf),u=Qf.dot(cP),f=o*l-a*a;if(0===f)return s.set(-2,-1,-1);const p=1/f,g=(l*c-a*u)*p,v=(o*u-a*c)*p;return s.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Wf),Wf.x>=0&&Wf.y>=0&&Wf.x+Wf.y<=1}static getUV(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,Wf),c.set(0,0),c.addScaledVector(s,Wf.x),c.addScaledVector(o,Wf.y),c.addScaledVector(a,Wf.z),c}static isFrontFacing(e,t,i,r){return _h.subVectors(i,t),Qf.subVectors(e,t),_h.cross(Qf).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _h.subVectors(this.c,this.b),Qf.subVectors(this.a,this.b),.5*_h.cross(Qf).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return yh.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return yh.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return yh.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return yh.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return yh.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;G7.subVectors(r,i),Q7.subVectors(s,i),lP.subVectors(e,i);const c=G7.dot(lP),l=Q7.dot(lP);if(c<=0&&l<=0)return t.copy(i);uP.subVectors(e,r);const u=G7.dot(uP),f=Q7.dot(uP);if(u>=0&&f<=u)return t.copy(r);const p=c*f-u*l;if(p<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(G7,o);hP.subVectors(e,s);const g=G7.dot(hP),v=Q7.dot(hP);if(v>=0&&g<=v)return t.copy(s);const _=g*l-c*v;if(_<=0&&l>=0&&v<=0)return a=l/(l-v),t.copy(i).addScaledVector(Q7,a);const w=u*v-g*f;if(w<=0&&f-u>=0&&g-v>=0)return Ine.subVectors(s,r),a=(f-u)/(f-u+(g-v)),t.copy(r).addScaledVector(Ine,a);const b=1/(w+_+p);return o=_*b,a=p*b,t.copy(i).addScaledVector(G7,o).addScaledVector(Q7,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let AHe=0;class bl extends Op{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:AHe++}),this.uuid=Tu(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=x6,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class o3 extends bl{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new In(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Wc=new be,RM=new Yt;class h1{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)RM.fromBufferAttribute(this,t),RM.applyMatrix3(e),this.setXY(t,RM.x,RM.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Wc.fromBufferAttribute(this,t),Wc.applyMatrix3(e),this.setXYZ(t,Wc.x,Wc.y,Wc.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Wc.fromBufferAttribute(this,t),Wc.applyMatrix4(e),this.setXYZ(t,Wc.x,Wc.y,Wc.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Wc.fromBufferAttribute(this,t),Wc.applyNormalMatrix(e),this.setXYZ(t,Wc.x,Wc.y,Wc.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Wc.fromBufferAttribute(this,t),Wc.transformDirection(e),this.setXYZ(t,Wc.x,Wc.y,Wc.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Nf(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ca(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Nf(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ca(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Nf(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ca(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Nf(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ca(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ca(t,this.array),i=Ca(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Ca(t,this.array),i=Ca(i,this.array),r=Ca(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Ca(t,this.array),i=Ca(i,this.array),r=Ca(r,this.array),s=Ca(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Rne extends h1{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Bne extends h1{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class fi extends h1{constructor(e,t,i){super(new Float32Array(e),t,i)}}let vHe=0;const b4=new Zi,fP=new el,W7=new be,Du=new Up,a_=new Up,R2=new be;class Tr extends Op{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:vHe++}),this.uuid=Tu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(vne(e)?Bne:Rne)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Q3).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return b4.makeRotationFromQuaternion(e),this.applyMatrix4(b4),this}rotateX(e){return b4.makeRotationX(e),this.applyMatrix4(b4),this}rotateY(e){return b4.makeRotationY(e),this.applyMatrix4(b4),this}rotateZ(e){return b4.makeRotationZ(e),this.applyMatrix4(b4),this}translate(e,t,i){return b4.makeTranslation(e,t,i),this.applyMatrix4(b4),this}scale(e,t,i){return b4.makeScale(e,t,i),this.applyMatrix4(b4),this}lookAt(e){return fP.lookAt(e),fP.updateMatrix(),this.applyMatrix4(fP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(W7).negate(),this.translate(W7.x,W7.y,W7.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new fi(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Up);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new be(-1/0,-1/0,-1/0),new be(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Du.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(R2.addVectors(this.boundingBox.min,Du.min),this.boundingBox.expandByPoint(R2),R2.addVectors(this.boundingBox.max,Du.max),this.boundingBox.expandByPoint(R2)):(this.boundingBox.expandByPoint(Du.min),this.boundingBox.expandByPoint(Du.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new jp);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new be,1/0);if(e){const i=this.boundingSphere.center;if(Du.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)a_.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(R2.addVectors(Du.min,a_.min),Du.expandByPoint(R2),R2.addVectors(Du.max,a_.max),Du.expandByPoint(R2)):(Du.expandByPoint(a_.min),Du.expandByPoint(a_.max));Du.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)R2.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(R2));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)R2.fromBufferAttribute(a,l),c&&(W7.fromBufferAttribute(e,l),R2.add(W7)),r=Math.max(r,i.distanceToSquared(R2))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new h1(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,l=[],u=[];for(let Q=0;Q<a;Q++)l[Q]=new be,u[Q]=new be;const f=new be,p=new be,g=new be,v=new Yt,_=new Yt,w=new Yt,b=new be,x=new be;function M(Q,J,Ce){f.fromArray(r,3*Q),p.fromArray(r,3*J),g.fromArray(r,3*Ce),v.fromArray(o,2*Q),_.fromArray(o,2*J),w.fromArray(o,2*Ce),p.sub(f),g.sub(f),_.sub(v),w.sub(v);const Ae=1/(_.x*w.y-w.x*_.y);!isFinite(Ae)||(b.copy(p).multiplyScalar(w.y).addScaledVector(g,-_.y).multiplyScalar(Ae),x.copy(g).multiplyScalar(_.x).addScaledVector(p,-w.x).multiplyScalar(Ae),l[Q].add(b),l[J].add(b),l[Ce].add(b),u[Q].add(x),u[J].add(x),u[Ce].add(x))}let E=this.groups;0===E.length&&(E=[{start:0,count:i.length}]);for(let Q=0,J=E.length;Q<J;++Q){const Ce=E[Q],Ae=Ce.start;for(let ue=Ae,X=Ae+Ce.count;ue<X;ue+=3)M(i[ue+0],i[ue+1],i[ue+2])}const I=new be,k=new be,O=new be,R=new be;function P(Q){O.fromArray(s,3*Q),R.copy(O);const J=l[Q];I.copy(J),I.sub(O.multiplyScalar(O.dot(J))).normalize(),k.crossVectors(R,J);const Ae=k.dot(u[Q])<0?-1:1;c[4*Q]=I.x,c[4*Q+1]=I.y,c[4*Q+2]=I.z,c[4*Q+3]=Ae}for(let Q=0,J=E.length;Q<J;++Q){const Ce=E[Q],Ae=Ce.start;for(let ue=Ae,X=Ae+Ce.count;ue<X;ue+=3)P(i[ue+0]),P(i[ue+1]),P(i[ue+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new h1(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);const r=new be,s=new be,o=new be,a=new be,c=new be,l=new be,u=new be,f=new be;if(e)for(let p=0,g=e.count;p<g;p+=3){const v=e.getX(p+0),_=e.getX(p+1),w=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,w),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,v),c.fromBufferAttribute(i,_),l.fromBufferAttribute(i,w),a.add(u),c.add(u),l.add(u),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(_,c.x,c.y,c.z),i.setXYZ(w,l.x,l.y,l.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(p+0,u.x,u.y,u.z),i.setXYZ(p+1,u.x,u.y,u.z),i.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)R2.fromBufferAttribute(e,t),R2.normalize(),e.setXYZ(t,R2.x,R2.y,R2.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,f=a.normalized,p=new l.constructor(c.length*u);let g=0,v=0;for(let _=0,w=c.length;_<w;_++){g=a.isInterleavedBufferAttribute?c[_]*a.data.stride+a.offset:c[_]*u;for(let b=0;b<u;b++)p[v++]=l[g++]}return new h1(p,u,f)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Tr,i=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],i);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,f=l.length;u<f;u++){const g=e(l[u],i);c.push(g)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let f=0,p=l.length;f<p;f++)u.push(l[f].toJSON(e.data));u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],f=s[l];for(let p=0,g=f.length;p<g;p++)u.push(f[p].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const f=o[l];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const kne=new Zi,j7=new LM,dP=new jp,D6=new be,I6=new be,R6=new be,pP=new be,gP=new be,mP=new be,BM=new be,kM=new be,FM=new be,PM=new Yt,HM=new Yt,zM=new Yt,AP=new be,OM=new be;class fo extends el{constructor(e=new Tr,t=new o3){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),dP.copy(i.boundingSphere),dP.applyMatrix4(s),!1===e.ray.intersectsSphere(dP))||(kne.copy(s).invert(),j7.copy(e.ray).applyMatrix4(kne),null!==i.boundingBox&&!1===j7.intersectsBox(i.boundingBox)))return;let o;const a=i.index,c=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative,f=i.attributes.uv,p=i.attributes.uv2,g=i.groups,v=i.drawRange;if(null!==a)if(Array.isArray(r))for(let _=0,w=g.length;_<w;_++){const b=g[_],x=r[b.materialIndex];for(let I=Math.max(b.start,v.start),k=Math.min(a.count,Math.min(b.start+b.count,v.start+v.count));I<k;I+=3){const O=a.getX(I),R=a.getX(I+1),P=a.getX(I+2);o=NM(this,x,e,j7,c,l,u,f,p,O,R,P),o&&(o.faceIndex=Math.floor(I/3),o.face.materialIndex=b.materialIndex,t.push(o))}}else for(let b=Math.max(0,v.start),x=Math.min(a.count,v.start+v.count);b<x;b+=3){const M=a.getX(b),E=a.getX(b+1),I=a.getX(b+2);o=NM(this,r,e,j7,c,l,u,f,p,M,E,I),o&&(o.faceIndex=Math.floor(b/3),t.push(o))}else if(void 0!==c)if(Array.isArray(r))for(let _=0,w=g.length;_<w;_++){const b=g[_],x=r[b.materialIndex];for(let I=Math.max(b.start,v.start),k=Math.min(c.count,Math.min(b.start+b.count,v.start+v.count));I<k;I+=3)o=NM(this,x,e,j7,c,l,u,f,p,I,I+1,I+2),o&&(o.faceIndex=Math.floor(I/3),o.face.materialIndex=b.materialIndex,t.push(o))}else for(let b=Math.max(0,v.start),x=Math.min(c.count,v.start+v.count);b<x;b+=3)o=NM(this,r,e,j7,c,l,u,f,p,b,b+1,b+2),o&&(o.faceIndex=Math.floor(b/3),t.push(o))}}function NM(n,e,t,i,r,s,o,a,c,l,u,f){D6.fromBufferAttribute(r,l),I6.fromBufferAttribute(r,u),R6.fromBufferAttribute(r,f);const p=n.morphTargetInfluences;if(s&&p){BM.set(0,0,0),kM.set(0,0,0),FM.set(0,0,0);for(let v=0,_=s.length;v<_;v++){const w=p[v],b=s[v];0!==w&&(pP.fromBufferAttribute(b,l),gP.fromBufferAttribute(b,u),mP.fromBufferAttribute(b,f),o?(BM.addScaledVector(pP,w),kM.addScaledVector(gP,w),FM.addScaledVector(mP,w)):(BM.addScaledVector(pP.sub(D6),w),kM.addScaledVector(gP.sub(I6),w),FM.addScaledVector(mP.sub(R6),w)))}D6.add(BM),I6.add(kM),R6.add(FM)}n.isSkinnedMesh&&(n.boneTransform(l,D6),n.boneTransform(u,I6),n.boneTransform(f,R6));const g=function _He(n,e,t,i,r,s,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,2!==e.side,a),null===c)return null;OM.copy(a),OM.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(OM);return l<t.near||l>t.far?null:{distance:l,point:OM.clone(),object:n}}(n,e,t,i,D6,I6,R6,AP);if(g){a&&(PM.fromBufferAttribute(a,l),HM.fromBufferAttribute(a,u),zM.fromBufferAttribute(a,f),g.uv=yh.getUV(AP,D6,I6,R6,PM,HM,zM,new Yt)),c&&(PM.fromBufferAttribute(c,l),HM.fromBufferAttribute(c,u),zM.fromBufferAttribute(c,f),g.uv2=yh.getUV(AP,D6,I6,R6,PM,HM,zM,new Yt));const v={a:l,b:u,c:f,normal:new be,materialIndex:0};yh.getNormal(D6,I6,R6,v.normal),g.face=v}return g}class S0 extends Tr{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],f=[];let p=0,g=0;function v(_,w,b,x,M,E,I,k,O,R,P){const Q=E/O,J=I/R,Ce=E/2,Ae=I/2,G=k/2,ue=O+1,X=R+1;let le=0,de=0;const pe=new be;for(let Fe=0;Fe<X;Fe++){const st=Fe*J-Ae;for(let ze=0;ze<ue;ze++)pe[_]=(ze*Q-Ce)*x,pe[w]=st*M,pe[b]=G,l.push(pe.x,pe.y,pe.z),pe[_]=0,pe[w]=0,pe[b]=k>0?1:-1,u.push(pe.x,pe.y,pe.z),f.push(ze/O),f.push(1-Fe/R),le+=1}for(let Fe=0;Fe<R;Fe++)for(let st=0;st<O;st++){const _t=p+st+ue*(Fe+1),pt=p+(st+1)+ue*(Fe+1),kt=p+(st+1)+ue*Fe;c.push(p+st+ue*Fe,_t,kt),c.push(_t,pt,kt),de+=6}a.addGroup(g,de,P),g+=de,p+=le}v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new fi(l,3)),this.setAttribute("normal",new fi(u,3)),this.setAttribute("uv",new fi(f,2))}static fromJSON(e){return new S0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function $7(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function xl(n){const e={};for(let t=0;t<n.length;t++){const i=$7(n[t]);for(const r in i)e[r]=i[r]}return e}const B6={clone:$7,merge:xl};class tl extends bl{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$7(e.uniforms),this.uniformsGroups=function yHe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class vP extends el{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Zi,this.projectionMatrix=new Zi,this.projectionMatrixInverse=new Zi}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class f2 extends vP{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*n_*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Np*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*n_*Math.atan(Math.tan(.5*Np*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Np*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class xHe extends el{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new f2(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new be(1,0,0)),this.add(r);const s=new f2(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new be(-1,0,0)),this.add(s);const o=new f2(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new be(0,1,0)),this.add(o);const a=new f2(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new be(0,-1,0)),this.add(a);const c=new f2(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new be(0,0,1)),this.add(c);const l=new f2(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new be(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,c,l]=this.children,u=e.getRenderTarget(),f=e.toneMapping,p=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=g,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=f,e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class VM extends y4{constructor(e,t,i,r,s,o,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class CHe extends w4{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new VM([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:u1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new S0(5,5,5),s=new tl({name:"CubemapFromEquirect",uniforms:$7(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new fo(r,s),a=t.minFilter;return t.minFilter===C6&&(t.minFilter=u1),new xHe(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const _P=new be,MHe=new be,SHe=new Q3;class wh{constructor(e=new be(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=_P.subVectors(i,t).cross(MHe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(_P),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||SHe.getNormalMatrix(e),r=this.coplanarPoint(_P).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const X7=new jp,UM=new be;class yP{constructor(e=new wh,t=new wh,i=new wh,r=new wh,s=new wh,o=new wh){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],c=i[4],l=i[5],u=i[6],f=i[7],p=i[8],g=i[9],v=i[10],_=i[11],w=i[12],b=i[13],x=i[14],M=i[15];return t[0].setComponents(a-r,f-c,_-p,M-w).normalize(),t[1].setComponents(a+r,f+c,_+p,M+w).normalize(),t[2].setComponents(a+s,f+l,_+g,M+b).normalize(),t[3].setComponents(a-s,f-l,_-g,M-b).normalize(),t[4].setComponents(a-o,f-u,_-v,M-x).normalize(),t[5].setComponents(a+o,f+u,_+v,M+x).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),X7.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(X7)}intersectsSprite(e){return X7.center.set(0,0,0),X7.radius=.7071067811865476,X7.applyMatrix4(e.matrixWorld),this.intersectsSphere(X7)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(UM.x=r.normal.x>0?e.max.x:e.min.x,UM.y=r.normal.y>0?e.max.y:e.min.y,UM.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(UM)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Fne(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function EHe(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)},remove:function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))},update:function c(l,u){if(l.isGLBufferAttribute){const p=i.get(l);return void((!p||p.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const f=i.get(l);void 0===f?i.set(l,function r(l,u){const f=l.array,p=l.usage,g=n.createBuffer();let v;if(n.bindBuffer(u,g),n.bufferData(u,f,p),l.onUploadCallback(),f instanceof Float32Array)v=5126;else if(f instanceof Uint16Array)if(l.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");v=5131}else v=5123;else if(f instanceof Int16Array)v=5122;else if(f instanceof Uint32Array)v=5125;else if(f instanceof Int32Array)v=5124;else if(f instanceof Int8Array)v=5120;else if(f instanceof Uint8Array)v=5121;else{if(!(f instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);v=5121}return{buffer:g,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version}}(l,u)):f.version<l.version&&(function s(l,u,f){const p=u.array,g=u.updateRange;n.bindBuffer(f,l),-1===g.count?n.bufferSubData(f,0,p):(t?n.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p,g.offset,g.count):n.bufferSubData(f,g.offset*p.BYTES_PER_ELEMENT,p.subarray(g.offset,g.offset+g.count)),g.count=-1)}(f.buffer,l,u),f.version=l.version)}}}class W3 extends Tr{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,f=e/a,p=t/c,g=[],v=[],_=[],w=[];for(let b=0;b<u;b++){const x=b*p-o;for(let M=0;M<l;M++)v.push(M*f-s,-x,0),_.push(0,0,1),w.push(M/a),w.push(1-b/c)}for(let b=0;b<c;b++)for(let x=0;x<a;x++){const E=x+l*(b+1),I=x+1+l*(b+1),k=x+1+l*b;g.push(x+l*b,E,k),g.push(E,I,k)}this.setIndex(g),this.setAttribute("position",new fi(v,3)),this.setAttribute("normal",new fi(_,3)),this.setAttribute("uv",new fi(w,2))}static fromJSON(e){return new W3(e.width,e.height,e.widthSegments,e.heightSegments)}}const Us={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},jn={common:{diffuse:{value:new In(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Q3},uv2Transform:{value:new Q3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Yt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new In(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new In(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Q3}},sprite:{diffuse:{value:new In(16777215)},opacity:{value:1},center:{value:new Yt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Q3}}},E0={basic:{uniforms:xl([jn.common,jn.specularmap,jn.envmap,jn.aomap,jn.lightmap,jn.fog]),vertexShader:Us.meshbasic_vert,fragmentShader:Us.meshbasic_frag},lambert:{uniforms:xl([jn.common,jn.specularmap,jn.envmap,jn.aomap,jn.lightmap,jn.emissivemap,jn.bumpmap,jn.normalmap,jn.displacementmap,jn.fog,jn.lights,{emissive:{value:new In(0)}}]),vertexShader:Us.meshlambert_vert,fragmentShader:Us.meshlambert_frag},phong:{uniforms:xl([jn.common,jn.specularmap,jn.envmap,jn.aomap,jn.lightmap,jn.emissivemap,jn.bumpmap,jn.normalmap,jn.displacementmap,jn.fog,jn.lights,{emissive:{value:new In(0)},specular:{value:new In(1118481)},shininess:{value:30}}]),vertexShader:Us.meshphong_vert,fragmentShader:Us.meshphong_frag},standard:{uniforms:xl([jn.common,jn.envmap,jn.aomap,jn.lightmap,jn.emissivemap,jn.bumpmap,jn.normalmap,jn.displacementmap,jn.roughnessmap,jn.metalnessmap,jn.fog,jn.lights,{emissive:{value:new In(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Us.meshphysical_vert,fragmentShader:Us.meshphysical_frag},toon:{uniforms:xl([jn.common,jn.aomap,jn.lightmap,jn.emissivemap,jn.bumpmap,jn.normalmap,jn.displacementmap,jn.gradientmap,jn.fog,jn.lights,{emissive:{value:new In(0)}}]),vertexShader:Us.meshtoon_vert,fragmentShader:Us.meshtoon_frag},matcap:{uniforms:xl([jn.common,jn.bumpmap,jn.normalmap,jn.displacementmap,jn.fog,{matcap:{value:null}}]),vertexShader:Us.meshmatcap_vert,fragmentShader:Us.meshmatcap_frag},points:{uniforms:xl([jn.points,jn.fog]),vertexShader:Us.points_vert,fragmentShader:Us.points_frag},dashed:{uniforms:xl([jn.common,jn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Us.linedashed_vert,fragmentShader:Us.linedashed_frag},depth:{uniforms:xl([jn.common,jn.displacementmap]),vertexShader:Us.depth_vert,fragmentShader:Us.depth_frag},normal:{uniforms:xl([jn.common,jn.bumpmap,jn.normalmap,jn.displacementmap,{opacity:{value:1}}]),vertexShader:Us.meshnormal_vert,fragmentShader:Us.meshnormal_frag},sprite:{uniforms:xl([jn.sprite,jn.fog]),vertexShader:Us.sprite_vert,fragmentShader:Us.sprite_frag},background:{uniforms:{uvTransform:{value:new Q3},t2D:{value:null}},vertexShader:Us.background_vert,fragmentShader:Us.background_frag},cube:{uniforms:xl([jn.envmap,{opacity:{value:1}}]),vertexShader:Us.cube_vert,fragmentShader:Us.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Us.equirect_vert,fragmentShader:Us.equirect_frag},distanceRGBA:{uniforms:xl([jn.common,jn.displacementmap,{referencePosition:{value:new be},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Us.distanceRGBA_vert,fragmentShader:Us.distanceRGBA_frag},shadow:{uniforms:xl([jn.lights,jn.fog,{color:{value:new In(0)},opacity:{value:1}}]),vertexShader:Us.shadow_vert,fragmentShader:Us.shadow_frag}};function SOe(n,e,t,i,r,s){const o=new In(0);let c,l,a=!0===r?0:1,u=null,f=0,p=null;function v(_,w){t.buffers.color.setClear(_.r,_.g,_.b,w,s)}return{getClearColor:function(){return o},setClearColor:function(_,w=1){o.set(_),a=w,v(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(_){a=_,v(o,a)},render:function g(_,w){let b=!1,x=!0===w.isScene?w.background:null;x&&x.isTexture&&(x=e.get(x));const M=n.xr,E=M.getSession&&M.getSession();E&&"additive"===E.environmentBlendMode&&(x=null),null===x?v(o,a):x&&x.isColor&&(v(x,1),b=!0),(n.autoClear||b)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),x&&(x.isCubeTexture||306===x.mapping)?(void 0===l&&(l=new fo(new S0(1,1,1),new tl({name:"BackgroundCubeMaterial",uniforms:$7(E0.cube.uniforms),vertexShader:E0.cube.vertexShader,fragmentShader:E0.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(I,k,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=x,l.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,(u!==x||f!==x.version||p!==n.toneMapping)&&(l.material.needsUpdate=!0,u=x,f=x.version,p=n.toneMapping),l.layers.enableAll(),_.unshift(l,l.geometry,l.material,0,0,null)):x&&x.isTexture&&(void 0===c&&(c=new fo(new W3(2,2),new tl({name:"BackgroundMaterial",uniforms:$7(E0.background.uniforms),vertexShader:E0.background.vertexShader,fragmentShader:E0.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=x,!0===x.matrixAutoUpdate&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||f!==x.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,u=x,f=x.version,p=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}}}function EOe(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},c=w(null);let l=c,u=!1;function g(G){return i.isWebGL2?n.bindVertexArray(G):s.bindVertexArrayOES(G)}function v(G){return i.isWebGL2?n.deleteVertexArray(G):s.deleteVertexArrayOES(G)}function w(G){const ue=[],X=[],le=[];for(let de=0;de<r;de++)ue[de]=0,X[de]=0,le[de]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ue,enabledAttributes:X,attributeDivisors:le,object:G,attributes:{},index:null}}function M(){const G=l.newAttributes;for(let ue=0,X=G.length;ue<X;ue++)G[ue]=0}function E(G){I(G,0)}function I(G,ue){const le=l.enabledAttributes,de=l.attributeDivisors;l.newAttributes[G]=1,0===le[G]&&(n.enableVertexAttribArray(G),le[G]=1),de[G]!==ue&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,ue),de[G]=ue)}function k(){const G=l.newAttributes,ue=l.enabledAttributes;for(let X=0,le=ue.length;X<le;X++)ue[X]!==G[X]&&(n.disableVertexAttribArray(X),ue[X]=0)}function O(G,ue,X,le,de,pe){!0!==i.isWebGL2||5124!==X&&5125!==X?n.vertexAttribPointer(G,ue,X,le,de,pe):n.vertexAttribIPointer(G,ue,X,de,pe)}function Ce(){Ae(),u=!0,l!==c&&(l=c,g(l.object))}function Ae(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function f(G,ue,X,le,de){let pe=!1;if(o){const Fe=function _(G,ue,X){const le=!0===X.wireframe;let de=a[G.id];void 0===de&&(de={},a[G.id]=de);let pe=de[ue.id];void 0===pe&&(pe={},de[ue.id]=pe);let Fe=pe[le];return void 0===Fe&&(Fe=w(function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),pe[le]=Fe),Fe}(le,X,ue);l!==Fe&&(l=Fe,g(l.object)),pe=function b(G,ue,X,le){const de=l.attributes,pe=ue.attributes;let Fe=0;const st=X.getAttributes();for(const ze in st)if(st[ze].location>=0){const pt=de[ze];let kt=pe[ze];if(void 0===kt&&("instanceMatrix"===ze&&G.instanceMatrix&&(kt=G.instanceMatrix),"instanceColor"===ze&&G.instanceColor&&(kt=G.instanceColor)),void 0===pt||pt.attribute!==kt||kt&&pt.data!==kt.data)return!0;Fe++}return l.attributesNum!==Fe||l.index!==le}(G,le,X,de),pe&&function x(G,ue,X,le){const de={},pe=ue.attributes;let Fe=0;const st=X.getAttributes();for(const ze in st)if(st[ze].location>=0){let pt=pe[ze];void 0===pt&&("instanceMatrix"===ze&&G.instanceMatrix&&(pt=G.instanceMatrix),"instanceColor"===ze&&G.instanceColor&&(pt=G.instanceColor));const kt={};kt.attribute=pt,pt&&pt.data&&(kt.data=pt.data),de[ze]=kt,Fe++}l.attributes=de,l.attributesNum=Fe,l.index=le}(G,le,X,de)}else{const Fe=!0===ue.wireframe;(l.geometry!==le.id||l.program!==X.id||l.wireframe!==Fe)&&(l.geometry=le.id,l.program=X.id,l.wireframe=Fe,pe=!0)}null!==de&&t.update(de,34963),(pe||u)&&(u=!1,function R(G,ue,X,le){if(!1===i.isWebGL2&&(G.isInstancedMesh||le.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;M();const de=le.attributes,pe=X.getAttributes(),Fe=ue.defaultAttributeValues;for(const st in pe){const ze=pe[st];if(ze.location>=0){let _t=de[st];if(void 0===_t&&("instanceMatrix"===st&&G.instanceMatrix&&(_t=G.instanceMatrix),"instanceColor"===st&&G.instanceColor&&(_t=G.instanceColor)),void 0!==_t){const pt=_t.normalized,kt=_t.itemSize,wt=t.get(_t);if(void 0===wt)continue;const Xt=wt.buffer,un=wt.type,_n=wt.bytesPerElement;if(_t.isInterleavedBufferAttribute){const an=_t.data,bi=an.stride,Vt=_t.offset;if(an.isInstancedInterleavedBuffer){for(let Pt=0;Pt<ze.locationSize;Pt++)I(ze.location+Pt,an.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===le._maxInstanceCount&&(le._maxInstanceCount=an.meshPerAttribute*an.count)}else for(let Pt=0;Pt<ze.locationSize;Pt++)E(ze.location+Pt);n.bindBuffer(34962,Xt);for(let Pt=0;Pt<ze.locationSize;Pt++)O(ze.location+Pt,kt/ze.locationSize,un,pt,bi*_n,(Vt+kt/ze.locationSize*Pt)*_n)}else{if(_t.isInstancedBufferAttribute){for(let an=0;an<ze.locationSize;an++)I(ze.location+an,_t.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===le._maxInstanceCount&&(le._maxInstanceCount=_t.meshPerAttribute*_t.count)}else for(let an=0;an<ze.locationSize;an++)E(ze.location+an);n.bindBuffer(34962,Xt);for(let an=0;an<ze.locationSize;an++)O(ze.location+an,kt/ze.locationSize,un,pt,kt*_n,kt/ze.locationSize*an*_n)}}else if(void 0!==Fe){const pt=Fe[st];if(void 0!==pt)switch(pt.length){case 2:n.vertexAttrib2fv(ze.location,pt);break;case 3:n.vertexAttrib3fv(ze.location,pt);break;case 4:n.vertexAttrib4fv(ze.location,pt);break;default:n.vertexAttrib1fv(ze.location,pt)}}}}k()}(G,ue,X,le),null!==de&&n.bindBuffer(34963,t.get(de).buffer))},reset:Ce,resetDefaultState:Ae,dispose:function P(){Ce();for(const G in a){const ue=a[G];for(const X in ue){const le=ue[X];for(const de in le)v(le[de].object),delete le[de];delete ue[X]}delete a[G]}},releaseStatesOfGeometry:function Q(G){if(void 0===a[G.id])return;const ue=a[G.id];for(const X in ue){const le=ue[X];for(const de in le)v(le[de].object),delete le[de];delete ue[X]}delete a[G.id]},releaseStatesOfProgram:function J(G){for(const ue in a){const X=a[ue];if(void 0===X[G.id])continue;const le=X[G.id];for(const de in le)v(le[de].object),delete le[de];delete X[G.id]}},initAttributes:M,enableAttribute:E,disableUnusedAttributes:k}}function TOe(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(l){s=l},this.render=function a(l,u){n.drawArrays(s,l,u),t.update(u,s,1)},this.renderInstances=function c(l,u,f){if(0===f)return;let p,g;if(r)p=n,g="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",null===p)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[g](s,l,u,f),t.update(u,s,f)}}function LOe(n,e,t){let i;function s(O){if("highp"===O){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";O="mediump"}return"mediump"===O&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,f=n.getParameter(34930),p=n.getParameter(35660),g=n.getParameter(3379),v=n.getParameter(34076),_=n.getParameter(34921),w=n.getParameter(36347),b=n.getParameter(36348),x=n.getParameter(36349),M=p>0,E=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const O=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:v,maxAttributes:_,maxVertexUniforms:w,maxVaryings:b,maxFragmentUniforms:x,vertexTextures:M,floatFragmentTextures:E,floatVertexTextures:M&&E,maxSamples:o?n.getParameter(36183):0}}function DOe(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new wh,a=new Q3,c={value:null,needsUpdate:!1};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,p,g,v){const _=null!==f?f.length:0;let w=null;if(0!==_){if(w=c.value,!0!==v||null===w){const b=g+4*_,x=p.matrixWorldInverse;a.getNormalMatrix(x),(null===w||w.length<b)&&(w=new Float32Array(b));for(let M=0,E=g;M!==_;++M,E+=4)o.copy(f[M]).applyMatrix4(x,a),o.normal.toArray(w,E),w[E+3]=o.constant}c.value=w,c.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,w}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p,g){const v=0!==f.length||p||0!==i||r;return r=p,t=u(f,g,0),i=f.length,v},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,l()},this.setState=function(f,p,g){const v=f.clippingPlanes,_=f.clipIntersection,w=f.clipShadows,b=n.get(f);if(!r||null===v||0===v.length||s&&!w)s?u(null):l();else{const x=s?0:i,M=4*x;let E=b.clippingState||null;c.value=E,E=u(v,p,M,g);for(let I=0;I!==M;++I)E[I]=t[I];b.clippingState=E,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=x}}}function IOe(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new CHe(c.height/2);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}E0.physical={uniforms:xl([E0.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Yt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new In(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Yt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new In(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new In(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Us.meshphysical_vert,fragmentShader:Us.meshphysical_frag};class $p extends vP{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Pne=[.125,.215,.35,.446,.526,.582],wP=new $p,Hne=new In;let bP=null;const qp=(1+Math.sqrt(5))/2,Z7=1/qp,zne=[new be(1,1,1),new be(-1,1,1),new be(1,1,-1),new be(-1,1,-1),new be(0,qp,Z7),new be(0,qp,-Z7),new be(Z7,0,qp),new be(-Z7,0,qp),new be(qp,Z7,0),new be(-qp,Z7,0)];class xP{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){bP=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Vne(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Nne(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(bP),e.scissorTest=!1,GM(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),bP=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:u1,minFilter:u1,generateMipmaps:!1,type:M0,format:gh,encoding:zf,depthBuffer:!1},r=One(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=One(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function ROe(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+Pne.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-4?c=Pne[o-n+4-1]:0===o&&(c=0),i.push(c);const l=1/(a-2),u=-l,f=1+l,p=[u,u,f,u,f,f,u,u,f,f,u,f],g=6,v=6,_=3,w=2,b=1,x=new Float32Array(_*v*g),M=new Float32Array(w*v*g),E=new Float32Array(b*v*g);for(let k=0;k<g;k++){const O=k%3*2/3-1,R=k>2?0:-1;x.set([O,R,0,O+2/3,R,0,O+2/3,R+1,0,O,R,0,O+2/3,R+1,0,O,R+1,0],_*v*k),M.set(p,w*v*k),E.set([k,k,k,k,k,k],b*v*k)}const I=new Tr;I.setAttribute("position",new h1(x,_)),I.setAttribute("uv",new h1(M,w)),I.setAttribute("faceIndex",new h1(E,b)),e.push(I),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function BOe(n,e,t){const i=new Float32Array(20),r=new be(0,1,0);return new tl({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new fo(this._lodPlanes[0],e);this._renderer.compile(t,wP)}_sceneToCubeUV(e,t,i,r){const a=new f2(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,p=u.toneMapping;u.getClearColor(Hne),u.toneMapping=0,u.autoClear=!1;const g=new o3({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),v=new fo(new S0,g);let _=!1;const w=e.background;w?w.isColor&&(g.color.copy(w),e.background=null,_=!0):(g.color.copy(Hne),_=!0);for(let b=0;b<6;b++){const x=b%3;0===x?(a.up.set(0,c[b],0),a.lookAt(l[b],0,0)):1===x?(a.up.set(0,0,c[b]),a.lookAt(0,l[b],0)):(a.up.set(0,c[b],0),a.lookAt(0,0,l[b]));const M=this._cubeSize;GM(r,x*M,b>2?M:0,M,M),u.setRenderTarget(r),_&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=p,u.autoClear=f,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Vne()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Nne());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new fo(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;GM(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,wP)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,zne[(r-1)%zne.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new fo(this._lodPlanes[r],l),p=l.uniforms,g=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*g):2*Math.PI/39,_=s/v,w=isFinite(s)?1+Math.floor(3*_):20;w>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to 20`);const b=[];let x=0;for(let O=0;O<20;++O){const R=O/_,P=Math.exp(-R*R/2);b.push(P),0===O?x+=P:O<w&&(x+=2*P)}for(let O=0;O<b.length;O++)b[O]=b[O]/x;p.envMap.value=e.texture,p.samples.value=w,p.weights.value=b,p.latitudinal.value="latitudinal"===o,a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=v,p.mipInt.value=M-i;const E=this._sizeLods[r];GM(t,3*E*(r>M-4?r-M+4:0),4*(this._cubeSize-E),3*E,2*E),c.setRenderTarget(t),c.render(f,wP)}}function One(n,e,t){const i=new w4(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function GM(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Nne(){return new tl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Vne(){return new tl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function kOe(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=301===c||302===c;if(l||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let f=e.get(a);return null===t&&(t=new xP(n)),f=l?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}if(e.has(a))return e.get(a).texture;{const f=a.image;if(l&&f&&f.height>0||u&&f&&function r(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(f)){null===t&&(t=new xP(n));const p=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function FOe(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function POe(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;null!==p.index&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",o),delete r[p.id];const g=s.get(p);g&&(e.remove(g),s.delete(p)),i.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,t.memory.geometries--}function l(f){const p=[],g=f.index,v=f.attributes.position;let _=0;if(null!==g){const x=g.array;_=g.version;for(let M=0,E=x.length;M<E;M+=3){const I=x[M+0],k=x[M+1],O=x[M+2];p.push(I,k,k,O,O,I)}}else{_=v.version;for(let M=0,E=v.array.length/3-1;M<E;M+=3){const I=M+0,k=M+1,O=M+2;p.push(I,k,k,O,O,I)}}const w=new(vne(p)?Bne:Rne)(p,1);w.version=_;const b=s.get(f);b&&e.remove(b),s.set(f,w)}return{get:function a(f,p){return!0===r[p.id]||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p},update:function c(f){const p=f.attributes;for(const v in p)e.update(p[v],34962);const g=f.morphAttributes;for(const v in g){const _=g[v];for(let w=0,b=_.length;w<b;w++)e.update(_[w],34962)}},getWireframeAttribute:function u(f){const p=s.get(f);if(p){const g=f.index;null!==g&&p.version<g.version&&l(f)}else l(f);return s.get(f)}}}function HOe(n,e,t,i){const r=i.isWebGL2;let s,a,c;this.setMode=function o(p){s=p},this.setIndex=function l(p){a=p.type,c=p.bytesPerElement},this.render=function u(p,g){n.drawElements(s,g,a,p*c),t.update(g,s,1)},this.renderInstances=function f(p,g,v){if(0===v)return;let _,w;if(r)_=n,w="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",null===_)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_[w](s,g,a,p*c,v),t.update(g,s,v)}}function zOe(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function OOe(n,e){return n[0]-e[0]}function NOe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function VOe(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Wo,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function c(l,u,f,p){const g=l.morphTargetInfluences;if(!0===e.isWebGL2){const v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,_=void 0!==v?v.length:0;let w=s.get(u);if(void 0===w||w.count!==_){let ue=function(){Ae.dispose(),s.delete(u),u.removeEventListener("dispose",ue)};void 0!==w&&w.texture.dispose();const M=void 0!==u.morphAttributes.position,E=void 0!==u.morphAttributes.normal,I=void 0!==u.morphAttributes.color,k=u.morphAttributes.position||[],O=u.morphAttributes.normal||[],R=u.morphAttributes.color||[];let P=0;!0===M&&(P=1),!0===E&&(P=2),!0===I&&(P=3);let Q=u.attributes.position.count*P,J=1;Q>e.maxTextureSize&&(J=Math.ceil(Q/e.maxTextureSize),Q=e.maxTextureSize);const Ce=new Float32Array(Q*J*4*_),Ae=new JF(Ce,Q,J,_);Ae.type=_4,Ae.needsUpdate=!0;const G=4*P;for(let X=0;X<_;X++){const le=k[X],de=O[X],pe=R[X],Fe=Q*J*4*X;for(let st=0;st<le.count;st++){const ze=st*G;!0===M&&(o.fromBufferAttribute(le,st),Ce[Fe+ze+0]=o.x,Ce[Fe+ze+1]=o.y,Ce[Fe+ze+2]=o.z,Ce[Fe+ze+3]=0),!0===E&&(o.fromBufferAttribute(de,st),Ce[Fe+ze+4]=o.x,Ce[Fe+ze+5]=o.y,Ce[Fe+ze+6]=o.z,Ce[Fe+ze+7]=0),!0===I&&(o.fromBufferAttribute(pe,st),Ce[Fe+ze+8]=o.x,Ce[Fe+ze+9]=o.y,Ce[Fe+ze+10]=o.z,Ce[Fe+ze+11]=4===pe.itemSize?o.w:1)}}w={count:_,texture:Ae,size:new Yt(Q,J)},s.set(u,w),u.addEventListener("dispose",ue)}let b=0;for(let M=0;M<g.length;M++)b+=g[M];const x=u.morphTargetsRelative?1:1-b;p.getUniforms().setValue(n,"morphTargetBaseInfluence",x),p.getUniforms().setValue(n,"morphTargetInfluences",g),p.getUniforms().setValue(n,"morphTargetsTexture",w.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",w.size)}else{const v=void 0===g?0:g.length;let _=i[u.id];if(void 0===_||_.length!==v){_=[];for(let E=0;E<v;E++)_[E]=[E,0];i[u.id]=_}for(let E=0;E<v;E++){const I=_[E];I[0]=E,I[1]=g[E]}_.sort(NOe);for(let E=0;E<8;E++)E<v&&_[E][1]?(a[E][0]=_[E][0],a[E][1]=_[E][1]):(a[E][0]=Number.MAX_SAFE_INTEGER,a[E][1]=0);a.sort(OOe);const w=u.morphAttributes.position,b=u.morphAttributes.normal;let x=0;for(let E=0;E<8;E++){const I=a[E],k=I[0],O=I[1];k!==Number.MAX_SAFE_INTEGER&&O?(w&&u.getAttribute("morphTarget"+E)!==w[k]&&u.setAttribute("morphTarget"+E,w[k]),b&&u.getAttribute("morphNormal"+E)!==b[k]&&u.setAttribute("morphNormal"+E,b[k]),r[E]=O,x+=O):(w&&!0===u.hasAttribute("morphTarget"+E)&&u.deleteAttribute("morphTarget"+E),b&&!0===u.hasAttribute("morphNormal"+E)&&u.deleteAttribute("morphNormal"+E),r[E]=0)}const M=u.morphTargetsRelative?1:1-x;p.getUniforms().setValue(n,"morphTargetBaseInfluence",M),p.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function UOe(n,e,t,i){let r=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=i.render.frame,f=e.get(c,c.geometry);return r.get(f)!==l&&(e.update(f),r.set(f,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,34962),null!==c.instanceColor&&t.update(c.instanceColor,34962)),f},dispose:function o(){r=new WeakMap}}}const Une=new y4,Gne=new JF,Qne=new wne,Wne=new VM,jne=[],$ne=[],Kne=new Float32Array(16),qne=new Float32Array(9),Xne=new Float32Array(4);function J7(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=jne[r];if(void 0===s&&(s=new Float32Array(r),jne[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function a3(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function c3(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function QM(n,e){let t=$ne[e];void 0===t&&(t=new Int32Array(e),$ne[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function GOe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function QOe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(a3(t,e))return;n.uniform2fv(this.addr,e),c3(t,e)}}function WOe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(a3(t,e))return;n.uniform3fv(this.addr,e),c3(t,e)}}function jOe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(a3(t,e))return;n.uniform4fv(this.addr,e),c3(t,e)}}function $Oe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(a3(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),c3(t,e)}else{if(a3(t,i))return;Xne.set(i),n.uniformMatrix2fv(this.addr,!1,Xne),c3(t,i)}}function KOe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(a3(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),c3(t,e)}else{if(a3(t,i))return;qne.set(i),n.uniformMatrix3fv(this.addr,!1,qne),c3(t,i)}}function qOe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(a3(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),c3(t,e)}else{if(a3(t,i))return;Kne.set(i),n.uniformMatrix4fv(this.addr,!1,Kne),c3(t,i)}}function XOe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function YOe(n,e){const t=this.cache;a3(t,e)||(n.uniform2iv(this.addr,e),c3(t,e))}function ZOe(n,e){const t=this.cache;a3(t,e)||(n.uniform3iv(this.addr,e),c3(t,e))}function JOe(n,e){const t=this.cache;a3(t,e)||(n.uniform4iv(this.addr,e),c3(t,e))}function eNe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function tNe(n,e){const t=this.cache;a3(t,e)||(n.uniform2uiv(this.addr,e),c3(t,e))}function nNe(n,e){const t=this.cache;a3(t,e)||(n.uniform3uiv(this.addr,e),c3(t,e))}function iNe(n,e){const t=this.cache;a3(t,e)||(n.uniform4uiv(this.addr,e),c3(t,e))}function rNe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||Une,r)}function sNe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Qne,r)}function oNe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Wne,r)}function aNe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Gne,r)}function lNe(n,e){n.uniform1fv(this.addr,e)}function uNe(n,e){const t=J7(e,this.size,2);n.uniform2fv(this.addr,t)}function hNe(n,e){const t=J7(e,this.size,3);n.uniform3fv(this.addr,t)}function fNe(n,e){const t=J7(e,this.size,4);n.uniform4fv(this.addr,t)}function dNe(n,e){const t=J7(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function pNe(n,e){const t=J7(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function gNe(n,e){const t=J7(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function mNe(n,e){n.uniform1iv(this.addr,e)}function ANe(n,e){n.uniform2iv(this.addr,e)}function vNe(n,e){n.uniform3iv(this.addr,e)}function _Ne(n,e){n.uniform4iv(this.addr,e)}function yNe(n,e){n.uniform1uiv(this.addr,e)}function wNe(n,e){n.uniform2uiv(this.addr,e)}function bNe(n,e){n.uniform3uiv(this.addr,e)}function xNe(n,e){n.uniform4uiv(this.addr,e)}function CNe(n,e,t){const i=e.length,r=QM(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||Une,r[s])}function MNe(n,e,t){const i=e.length,r=QM(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||Qne,r[s])}function SNe(n,e,t){const i=e.length,r=QM(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||Wne,r[s])}function ENe(n,e,t){const i=e.length,r=QM(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||Gne,r[s])}class LNe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function cNe(n){switch(n){case 5126:return GOe;case 35664:return QOe;case 35665:return WOe;case 35666:return jOe;case 35674:return $Oe;case 35675:return KOe;case 35676:return qOe;case 5124:case 35670:return XOe;case 35667:case 35671:return YOe;case 35668:case 35672:return ZOe;case 35669:case 35673:return JOe;case 5125:return eNe;case 36294:return tNe;case 36295:return nNe;case 36296:return iNe;case 35678:case 36198:case 36298:case 36306:case 35682:return rNe;case 35679:case 36299:case 36307:return sNe;case 35680:case 36300:case 36308:case 36293:return oNe;case 36289:case 36303:case 36311:case 36292:return aNe}}(t.type)}}class DNe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function TNe(n){switch(n){case 5126:return lNe;case 35664:return uNe;case 35665:return hNe;case 35666:return fNe;case 35674:return dNe;case 35675:return pNe;case 35676:return gNe;case 5124:case 35670:return mNe;case 35667:case 35671:return ANe;case 35668:case 35672:return vNe;case 35669:case 35673:return _Ne;case 5125:return yNe;case 36294:return wNe;case 36295:return bNe;case 36296:return xNe;case 35678:case 36198:case 36298:case 36306:case 35682:return CNe;case 35679:case 36299:case 36307:return MNe;case 35680:case 36300:case 36308:case 36293:return SNe;case 36289:case 36303:case 36311:case 36292:return ENe}}(t.type)}}class INe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const MP=/(\w+)(\])?(\[|\.)?/g;function Yne(n,e){n.seq.push(e),n.map[e.id]=e}function RNe(n,e,t){const i=n.name,r=i.length;for(MP.lastIndex=0;;){const s=MP.exec(i),o=MP.lastIndex;let a=s[1];const l=s[3];if("]"===s[2]&&(a|=0),void 0===l||"["===l&&o+2===r){Yne(t,void 0===l?new LNe(a,n,e):new DNe(a,n,e));break}{let f=t.map[a];void 0===f&&(f=new INe(a),Yne(t,f)),t=f}}}class WM{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);RNe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function Zne(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let BNe=0;function Jne(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function kNe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function PNe(n,e){const t=function FNe(n){switch(n){case zf:return["Linear","( value )"];case ta:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function HNe(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function c_(n){return""!==n}function eie(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function tie(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const VNe=/^[ \t]*#include +<([\w\d./]+)>/gm;function SP(n){return n.replace(VNe,UNe)}function UNe(n,e){const t=Us[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return SP(t)}const GNe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function nie(n){return n.replace(GNe,QNe)}function QNe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function iie(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function XNe(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function WNe(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function jNe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function $Ne(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),f=function KNe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),p=function qNe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),g=t.isWebGL2?"":function zNe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(c_).join("\n")}(t),v=function ONe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),_=r.createProgram();let w,b,x=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(w=[v].filter(c_).join("\n"),w.length>0&&(w+="\n"),b=[g,v].filter(c_).join("\n"),b.length>0&&(b+="\n")):(w=[iie(t),"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(c_).join("\n"),b=[g,iie(t),"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Us.tonemapping_pars_fragment:"",0!==t.toneMapping?HNe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Us.encodings_pars_fragment,PNe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(c_).join("\n")),o=SP(o),o=eie(o,t),o=tie(o,t),a=SP(a),a=eie(a,t),a=tie(a,t),o=nie(o),a=nie(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(x="#version 300 es\n",w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+w,b=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const E=x+b+a,I=Zne(r,35633,x+w+o),k=Zne(r,35632,E);if(r.attachShader(_,I),r.attachShader(_,k),void 0!==t.index0AttributeName?r.bindAttribLocation(_,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),n.debug.checkShaderErrors){const P=r.getProgramInfoLog(_).trim(),Q=r.getShaderInfoLog(I).trim(),J=r.getShaderInfoLog(k).trim();let Ce=!0,Ae=!0;if(!1===r.getProgramParameter(_,35714)){Ce=!1;const G=Jne(r,I,"vertex"),ue=Jne(r,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,35715)+"\n\nProgram Info Log: "+P+"\n"+G+"\n"+ue)}else""!==P?console.warn("THREE.WebGLProgram: Program Info Log:",P):(""===Q||""===J)&&(Ae=!1);Ae&&(this.diagnostics={runnable:Ce,programLog:P,vertexShader:{log:Q,prefix:w},fragmentShader:{log:J,prefix:b}})}let O,R;return r.deleteShader(I),r.deleteShader(k),this.getUniforms=function(){return void 0===O&&(O=new WM(r,_)),O},this.getAttributes=function(){return void 0===R&&(R=function NNe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,_)),R},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.name=t.shaderName,this.id=BNe++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=I,this.fragmentShader=k,this}let YNe=0;class ZNe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new JNe(e),t.set(e,i)),i}}class JNe{constructor(e){this.id=YNe++,this.code=e,this.usedTimes=0}}function eVe(n,e,t,i,r,s,o){const a=new aP,c=new ZNe,l=[],u=r.isWebGL2,f=r.logarithmicDepthBuffer,p=r.vertexTextures;let g=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function _(R,P,Q,J,Ce){const Ae=J.fog,G=Ce.geometry,X=(R.isMeshStandardMaterial?t:e).get(R.envMap||(R.isMeshStandardMaterial?J.environment:null)),le=X&&306===X.mapping?X.image.height:null,de=v[R.type];null!==R.precision&&(g=r.getMaxPrecision(R.precision),g!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",g,"instead."));const pe=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,Fe=void 0!==pe?pe.length:0;let ze,_t,pt,kt,st=0;if(void 0!==G.morphAttributes.position&&(st=1),void 0!==G.morphAttributes.normal&&(st=2),void 0!==G.morphAttributes.color&&(st=3),de){const bi=E0[de];ze=bi.vertexShader,_t=bi.fragmentShader}else ze=R.vertexShader,_t=R.fragmentShader,c.update(R),pt=c.getVertexShaderID(R),kt=c.getFragmentShaderID(R);const wt=n.getRenderTarget(),un=R.clearcoat>0,_n=R.iridescence>0;return{isWebGL2:u,shaderID:de,shaderName:R.type,vertexShader:ze,fragmentShader:_t,defines:R.defines,customVertexShaderID:pt,customFragmentShaderID:kt,isRawShaderMaterial:!0===R.isRawShaderMaterial,glslVersion:R.glslVersion,precision:g,instancing:!0===Ce.isInstancedMesh,instancingColor:!0===Ce.isInstancedMesh&&null!==Ce.instanceColor,supportsVertexTextures:p,outputEncoding:null===wt?n.outputEncoding:!0===wt.isXRRenderTarget?wt.texture.encoding:zf,map:!!R.map,matcap:!!R.matcap,envMap:!!X,envMapMode:X&&X.mapping,envMapCubeUVHeight:le,lightMap:!!R.lightMap,aoMap:!!R.aoMap,emissiveMap:!!R.emissiveMap,bumpMap:!!R.bumpMap,normalMap:!!R.normalMap,objectSpaceNormalMap:1===R.normalMapType,tangentSpaceNormalMap:0===R.normalMapType,decodeVideoTexture:!!R.map&&!0===R.map.isVideoTexture&&R.map.encoding===ta,clearcoat:un,clearcoatMap:un&&!!R.clearcoatMap,clearcoatRoughnessMap:un&&!!R.clearcoatRoughnessMap,clearcoatNormalMap:un&&!!R.clearcoatNormalMap,iridescence:_n,iridescenceMap:_n&&!!R.iridescenceMap,iridescenceThicknessMap:_n&&!!R.iridescenceThicknessMap,displacementMap:!!R.displacementMap,roughnessMap:!!R.roughnessMap,metalnessMap:!!R.metalnessMap,specularMap:!!R.specularMap,specularIntensityMap:!!R.specularIntensityMap,specularColorMap:!!R.specularColorMap,opaque:!1===R.transparent&&1===R.blending,alphaMap:!!R.alphaMap,alphaTest:R.alphaTest>0,gradientMap:!!R.gradientMap,sheen:R.sheen>0,sheenColorMap:!!R.sheenColorMap,sheenRoughnessMap:!!R.sheenRoughnessMap,transmission:R.transmission>0,transmissionMap:!!R.transmissionMap,thicknessMap:!!R.thicknessMap,combine:R.combine,vertexTangents:!!R.normalMap&&!!G.attributes.tangent,vertexColors:R.vertexColors,vertexAlphas:!0===R.vertexColors&&!!G.attributes.color&&4===G.attributes.color.itemSize,vertexUvs:!!(R.map||R.bumpMap||R.normalMap||R.specularMap||R.alphaMap||R.emissiveMap||R.roughnessMap||R.metalnessMap||R.clearcoatMap||R.clearcoatRoughnessMap||R.clearcoatNormalMap||R.iridescenceMap||R.iridescenceThicknessMap||R.displacementMap||R.transmissionMap||R.thicknessMap||R.specularIntensityMap||R.specularColorMap||R.sheenColorMap||R.sheenRoughnessMap),uvsVertexOnly:!(R.map||R.bumpMap||R.normalMap||R.specularMap||R.alphaMap||R.emissiveMap||R.roughnessMap||R.metalnessMap||R.clearcoatNormalMap||R.iridescenceMap||R.iridescenceThicknessMap||R.transmission>0||R.transmissionMap||R.thicknessMap||R.specularIntensityMap||R.specularColorMap||R.sheen>0||R.sheenColorMap||R.sheenRoughnessMap||!R.displacementMap),fog:!!Ae,useFog:!0===R.fog,fogExp2:Ae&&Ae.isFogExp2,flatShading:!!R.flatShading,sizeAttenuation:R.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===Ce.isSkinnedMesh,morphTargets:void 0!==G.morphAttributes.position,morphNormals:void 0!==G.morphAttributes.normal,morphColors:void 0!==G.morphAttributes.color,morphTargetsCount:Fe,morphTextureStride:st,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&Q.length>0,shadowMapType:n.shadowMap.type,toneMapping:R.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:2===R.side,flipSided:1===R.side,useDepthPacking:!!R.depthPacking,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:R.extensions&&R.extensions.derivatives,extensionFragDepth:R.extensions&&R.extensions.fragDepth,extensionDrawBuffers:R.extensions&&R.extensions.drawBuffers,extensionShaderTextureLOD:R.extensions&&R.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}},getProgramCacheKey:function w(R){const P=[];if(R.shaderID?P.push(R.shaderID):(P.push(R.customVertexShaderID),P.push(R.customFragmentShaderID)),void 0!==R.defines)for(const Q in R.defines)P.push(Q),P.push(R.defines[Q]);return!1===R.isRawShaderMaterial&&(function b(R,P){R.push(P.precision),R.push(P.outputEncoding),R.push(P.envMapMode),R.push(P.envMapCubeUVHeight),R.push(P.combine),R.push(P.vertexUvs),R.push(P.fogExp2),R.push(P.sizeAttenuation),R.push(P.morphTargetsCount),R.push(P.morphAttributeCount),R.push(P.numDirLights),R.push(P.numPointLights),R.push(P.numSpotLights),R.push(P.numSpotLightMaps),R.push(P.numHemiLights),R.push(P.numRectAreaLights),R.push(P.numDirLightShadows),R.push(P.numPointLightShadows),R.push(P.numSpotLightShadows),R.push(P.numSpotLightShadowsWithMaps),R.push(P.shadowMapType),R.push(P.toneMapping),R.push(P.numClippingPlanes),R.push(P.numClipIntersection),R.push(P.depthPacking)}(P,R),function x(R,P){a.disableAll(),P.isWebGL2&&a.enable(0),P.supportsVertexTextures&&a.enable(1),P.instancing&&a.enable(2),P.instancingColor&&a.enable(3),P.map&&a.enable(4),P.matcap&&a.enable(5),P.envMap&&a.enable(6),P.lightMap&&a.enable(7),P.aoMap&&a.enable(8),P.emissiveMap&&a.enable(9),P.bumpMap&&a.enable(10),P.normalMap&&a.enable(11),P.objectSpaceNormalMap&&a.enable(12),P.tangentSpaceNormalMap&&a.enable(13),P.clearcoat&&a.enable(14),P.clearcoatMap&&a.enable(15),P.clearcoatRoughnessMap&&a.enable(16),P.clearcoatNormalMap&&a.enable(17),P.iridescence&&a.enable(18),P.iridescenceMap&&a.enable(19),P.iridescenceThicknessMap&&a.enable(20),P.displacementMap&&a.enable(21),P.specularMap&&a.enable(22),P.roughnessMap&&a.enable(23),P.metalnessMap&&a.enable(24),P.gradientMap&&a.enable(25),P.alphaMap&&a.enable(26),P.alphaTest&&a.enable(27),P.vertexColors&&a.enable(28),P.vertexAlphas&&a.enable(29),P.vertexUvs&&a.enable(30),P.vertexTangents&&a.enable(31),P.uvsVertexOnly&&a.enable(32),R.push(a.mask),a.disableAll(),P.fog&&a.enable(0),P.useFog&&a.enable(1),P.flatShading&&a.enable(2),P.logarithmicDepthBuffer&&a.enable(3),P.skinning&&a.enable(4),P.morphTargets&&a.enable(5),P.morphNormals&&a.enable(6),P.morphColors&&a.enable(7),P.premultipliedAlpha&&a.enable(8),P.shadowMapEnabled&&a.enable(9),P.physicallyCorrectLights&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.useDepthPacking&&a.enable(13),P.dithering&&a.enable(14),P.specularIntensityMap&&a.enable(15),P.specularColorMap&&a.enable(16),P.transmission&&a.enable(17),P.transmissionMap&&a.enable(18),P.thicknessMap&&a.enable(19),P.sheen&&a.enable(20),P.sheenColorMap&&a.enable(21),P.sheenRoughnessMap&&a.enable(22),P.decodeVideoTexture&&a.enable(23),P.opaque&&a.enable(24),R.push(a.mask)}(P,R),P.push(n.outputEncoding)),P.push(R.customProgramCacheKey),P.join()},getUniforms:function M(R){const P=v[R.type];let Q;return Q=P?B6.clone(E0[P].uniforms):R.uniforms,Q},acquireProgram:function E(R,P){let Q;for(let J=0,Ce=l.length;J<Ce;J++){const Ae=l[J];if(Ae.cacheKey===P){Q=Ae,++Q.usedTimes;break}}return void 0===Q&&(Q=new XNe(n,P,R,s),l.push(Q)),Q},releaseProgram:function I(R){if(0==--R.usedTimes){const P=l.indexOf(R);l[P]=l[l.length-1],l.pop(),R.destroy()}},releaseShaderCache:function k(R){c.remove(R)},programs:l,dispose:function O(){c.dispose()}}}function tVe(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function nVe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function rie(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function sie(){const n=[];let e=0;const t=[],i=[],r=[];function o(f,p,g,v,_,w){let b=n[e];return void 0===b?(b={id:f.id,object:f,geometry:p,material:g,groupOrder:v,renderOrder:f.renderOrder,z:_,group:w},n[e]=b):(b.id=f.id,b.object=f,b.geometry=p,b.material=g,b.groupOrder=v,b.renderOrder=f.renderOrder,b.z=_,b.group=w),e++,b}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(f,p,g,v,_,w){const b=o(f,p,g,v,_,w);g.transmission>0?i.push(b):!0===g.transparent?r.push(b):t.push(b)},unshift:function c(f,p,g,v,_,w){const b=o(f,p,g,v,_,w);g.transmission>0?i.unshift(b):!0===g.transparent?r.unshift(b):t.unshift(b)},finish:function u(){for(let f=e,p=n.length;f<p;f++){const g=n[f];if(null===g.id)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}},sort:function l(f,p){t.length>1&&t.sort(f||nVe),i.length>1&&i.sort(p||rie),r.length>1&&r.sort(p||rie)}}}function iVe(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new sie,n.set(i,[o])):r>=s.length?(o=new sie,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function rVe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new be,color:new In};break;case"SpotLight":t={position:new be,direction:new be,color:new In,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new be,color:new In,distance:0,decay:0};break;case"HemisphereLight":t={direction:new be,skyColor:new In,groundColor:new In};break;case"RectAreaLight":t={color:new In,position:new be,halfWidth:new be,halfHeight:new be}}return n[e.id]=t,t}}}let oVe=0;function aVe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function cVe(n,e){const t=new rVe,i=function sVe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new be);const s=new be,o=new Zi,a=new Zi;return{setup:function c(u,f){let p=0,g=0,v=0;for(let J=0;J<9;J++)r.probe[J].set(0,0,0);let _=0,w=0,b=0,x=0,M=0,E=0,I=0,k=0,O=0,R=0;u.sort(aVe);const P=!0!==f?Math.PI:1;for(let J=0,Ce=u.length;J<Ce;J++){const Ae=u[J],G=Ae.color,ue=Ae.intensity,X=Ae.distance,le=Ae.shadow&&Ae.shadow.map?Ae.shadow.map.texture:null;if(Ae.isAmbientLight)p+=G.r*ue*P,g+=G.g*ue*P,v+=G.b*ue*P;else if(Ae.isLightProbe)for(let de=0;de<9;de++)r.probe[de].addScaledVector(Ae.sh.coefficients[de],ue);else if(Ae.isDirectionalLight){const de=t.get(Ae);if(de.color.copy(Ae.color).multiplyScalar(Ae.intensity*P),Ae.castShadow){const pe=Ae.shadow,Fe=i.get(Ae);Fe.shadowBias=pe.bias,Fe.shadowNormalBias=pe.normalBias,Fe.shadowRadius=pe.radius,Fe.shadowMapSize=pe.mapSize,r.directionalShadow[_]=Fe,r.directionalShadowMap[_]=le,r.directionalShadowMatrix[_]=Ae.shadow.matrix,E++}r.directional[_]=de,_++}else if(Ae.isSpotLight){const de=t.get(Ae);de.position.setFromMatrixPosition(Ae.matrixWorld),de.color.copy(G).multiplyScalar(ue*P),de.distance=X,de.coneCos=Math.cos(Ae.angle),de.penumbraCos=Math.cos(Ae.angle*(1-Ae.penumbra)),de.decay=Ae.decay,r.spot[b]=de;const pe=Ae.shadow;if(Ae.map&&(r.spotLightMap[O]=Ae.map,O++,pe.updateMatrices(Ae),Ae.castShadow&&R++),r.spotLightMatrix[b]=pe.matrix,Ae.castShadow){const Fe=i.get(Ae);Fe.shadowBias=pe.bias,Fe.shadowNormalBias=pe.normalBias,Fe.shadowRadius=pe.radius,Fe.shadowMapSize=pe.mapSize,r.spotShadow[b]=Fe,r.spotShadowMap[b]=le,k++}b++}else if(Ae.isRectAreaLight){const de=t.get(Ae);de.color.copy(G).multiplyScalar(ue),de.halfWidth.set(.5*Ae.width,0,0),de.halfHeight.set(0,.5*Ae.height,0),r.rectArea[x]=de,x++}else if(Ae.isPointLight){const de=t.get(Ae);if(de.color.copy(Ae.color).multiplyScalar(Ae.intensity*P),de.distance=Ae.distance,de.decay=Ae.decay,Ae.castShadow){const pe=Ae.shadow,Fe=i.get(Ae);Fe.shadowBias=pe.bias,Fe.shadowNormalBias=pe.normalBias,Fe.shadowRadius=pe.radius,Fe.shadowMapSize=pe.mapSize,Fe.shadowCameraNear=pe.camera.near,Fe.shadowCameraFar=pe.camera.far,r.pointShadow[w]=Fe,r.pointShadowMap[w]=le,r.pointShadowMatrix[w]=Ae.shadow.matrix,I++}r.point[w]=de,w++}else if(Ae.isHemisphereLight){const de=t.get(Ae);de.skyColor.copy(Ae.color).multiplyScalar(ue*P),de.groundColor.copy(Ae.groundColor).multiplyScalar(ue*P),r.hemi[M]=de,M++}}x>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=jn.LTC_FLOAT_1,r.rectAreaLTC2=jn.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=jn.LTC_HALF_1,r.rectAreaLTC2=jn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=g,r.ambient[2]=v;const Q=r.hash;(Q.directionalLength!==_||Q.pointLength!==w||Q.spotLength!==b||Q.rectAreaLength!==x||Q.hemiLength!==M||Q.numDirectionalShadows!==E||Q.numPointShadows!==I||Q.numSpotShadows!==k||Q.numSpotMaps!==O)&&(r.directional.length=_,r.spot.length=b,r.rectArea.length=x,r.point.length=w,r.hemi.length=M,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=I,r.pointShadowMap.length=I,r.spotShadow.length=k,r.spotShadowMap.length=k,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=I,r.spotLightMatrix.length=k+O-R,r.spotLightMap.length=O,r.numSpotLightShadowsWithMaps=R,Q.directionalLength=_,Q.pointLength=w,Q.spotLength=b,Q.rectAreaLength=x,Q.hemiLength=M,Q.numDirectionalShadows=E,Q.numPointShadows=I,Q.numSpotShadows=k,Q.numSpotMaps=O,r.version=oVe++)},setupView:function l(u,f){let p=0,g=0,v=0,_=0,w=0;const b=f.matrixWorldInverse;for(let x=0,M=u.length;x<M;x++){const E=u[x];if(E.isDirectionalLight){const I=r.directional[p];I.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(b),p++}else if(E.isSpotLight){const I=r.spot[v];I.position.setFromMatrixPosition(E.matrixWorld),I.position.applyMatrix4(b),I.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(b),v++}else if(E.isRectAreaLight){const I=r.rectArea[_];I.position.setFromMatrixPosition(E.matrixWorld),I.position.applyMatrix4(b),a.identity(),o.copy(E.matrixWorld),o.premultiply(b),a.extractRotation(o),I.halfWidth.set(.5*E.width,0,0),I.halfHeight.set(0,.5*E.height,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),_++}else if(E.isPointLight){const I=r.point[g];I.position.setFromMatrixPosition(E.matrixWorld),I.position.applyMatrix4(b),g++}else if(E.isHemisphereLight){const I=r.hemi[w];I.direction.setFromMatrixPosition(E.matrixWorld),I.direction.transformDirection(b),w++}}},state:r}}function oie(n,e){const t=new cVe(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function c(f){t.setup(i,f)},setupLightsView:function l(f){t.setupView(i,f)},pushLight:function o(f){i.push(f)},pushShadow:function a(f){r.push(f)}}}function lVe(n,e){let t=new WeakMap;return{get:function i(s,o=0){const a=t.get(s);let c;return void 0===a?(c=new oie(n,e),t.set(s,[c])):o>=a.length?(c=new oie(n,e),a.push(c)):c=a[o],c},dispose:function r(){t=new WeakMap}}}class aie extends bl{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class cie extends bl{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new be,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function fVe(n,e,t){let i=new yP;const r=new Yt,s=new Yt,o=new Wo,a=new aie({depthPacking:3201}),c=new cie,l={},u=t.maxTextureSize,f={0:1,1:0,2:2},p=new tl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Yt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const v=new Tr;v.setAttribute("position",new h1(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new fo(v,p),w=this;function b(E,I){const k=e.update(_);p.defines.VSM_SAMPLES!==E.blurSamples&&(p.defines.VSM_SAMPLES=E.blurSamples,g.defines.VSM_SAMPLES=E.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),null===E.mapPass&&(E.mapPass=new w4(r.x,r.y)),p.uniforms.shadow_pass.value=E.map.texture,p.uniforms.resolution.value=E.mapSize,p.uniforms.radius.value=E.radius,n.setRenderTarget(E.mapPass),n.clear(),n.renderBufferDirect(I,null,k,p,_,null),g.uniforms.shadow_pass.value=E.mapPass.texture,g.uniforms.resolution.value=E.mapSize,g.uniforms.radius.value=E.radius,n.setRenderTarget(E.map),n.clear(),n.renderBufferDirect(I,null,k,g,_,null)}function x(E,I,k,O,R,P){let Q=null;const J=!0===k.isPointLight?E.customDistanceMaterial:E.customDepthMaterial;if(Q=void 0!==J?J:!0===k.isPointLight?c:a,n.localClippingEnabled&&!0===I.clipShadows&&Array.isArray(I.clippingPlanes)&&0!==I.clippingPlanes.length||I.displacementMap&&0!==I.displacementScale||I.alphaMap&&I.alphaTest>0){const Ce=Q.uuid,Ae=I.uuid;let G=l[Ce];void 0===G&&(G={},l[Ce]=G);let ue=G[Ae];void 0===ue&&(ue=Q.clone(),G[Ae]=ue),Q=ue}return Q.visible=I.visible,Q.wireframe=I.wireframe,Q.side=3===P?null!==I.shadowSide?I.shadowSide:I.side:null!==I.shadowSide?I.shadowSide:f[I.side],Q.alphaMap=I.alphaMap,Q.alphaTest=I.alphaTest,Q.clipShadows=I.clipShadows,Q.clippingPlanes=I.clippingPlanes,Q.clipIntersection=I.clipIntersection,Q.displacementMap=I.displacementMap,Q.displacementScale=I.displacementScale,Q.displacementBias=I.displacementBias,Q.wireframeLinewidth=I.wireframeLinewidth,Q.linewidth=I.linewidth,!0===k.isPointLight&&!0===Q.isMeshDistanceMaterial&&(Q.referencePosition.setFromMatrixPosition(k.matrixWorld),Q.nearDistance=O,Q.farDistance=R),Q}function M(E,I,k,O,R){if(!1===E.visible)return;if(E.layers.test(I.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&3===R)&&(!E.frustumCulled||i.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,E.matrixWorld);const J=e.update(E),Ce=E.material;if(Array.isArray(Ce)){const Ae=J.groups;for(let G=0,ue=Ae.length;G<ue;G++){const X=Ae[G],le=Ce[X.materialIndex];if(le&&le.visible){const de=x(E,le,O,k.near,k.far,R);n.renderBufferDirect(k,null,J,de,E,X)}}}else if(Ce.visible){const Ae=x(E,Ce,O,k.near,k.far,R);n.renderBufferDirect(k,null,J,Ae,E,null)}}const Q=E.children;for(let J=0,Ce=Q.length;J<Ce;J++)M(Q[J],I,k,O,R)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(E,I,k){if(!1===w.enabled||!1===w.autoUpdate&&!1===w.needsUpdate||0===E.length)return;const O=n.getRenderTarget(),R=n.getActiveCubeFace(),P=n.getActiveMipmapLevel(),Q=n.state;Q.setBlending(0),Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);for(let J=0,Ce=E.length;J<Ce;J++){const Ae=E[J],G=Ae.shadow;if(void 0===G){console.warn("THREE.WebGLShadowMap:",Ae,"has no shadow.");continue}if(!1===G.autoUpdate&&!1===G.needsUpdate)continue;r.copy(G.mapSize);const ue=G.getFrameExtents();r.multiply(ue),s.copy(G.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/ue.x),r.x=s.x*ue.x,G.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/ue.y),r.y=s.y*ue.y,G.mapSize.y=s.y)),null===G.map&&(G.map=new w4(r.x,r.y,3!==this.type?{minFilter:X1,magFilter:X1}:{}),G.map.texture.name=Ae.name+".shadowMap",G.camera.updateProjectionMatrix()),n.setRenderTarget(G.map),n.clear();const X=G.getViewportCount();for(let le=0;le<X;le++){const de=G.getViewport(le);o.set(s.x*de.x,s.y*de.y,s.x*de.z,s.y*de.w),Q.viewport(o),G.updateMatrices(Ae,le),i=G.getFrustum(),M(I,k,G.camera,Ae,this.type)}!0!==G.isPointLightShadow&&3===this.type&&b(G,k),G.needsUpdate=!1}w.needsUpdate=!1,n.setRenderTarget(O,R,P)}}function dVe(n,e,t){const i=t.isWebGL2,a=new function r(){let ut=!1;const Fn=new Wo;let Qt=null;const Wn=new Wo(0,0,0,0);return{setMask:function(Un){Qt!==Un&&!ut&&(n.colorMask(Un,Un,Un,Un),Qt=Un)},setLocked:function(Un){ut=Un},setClear:function(Un,Fs,Ec,A1,oc){!0===oc&&(Un*=A1,Fs*=A1,Ec*=A1),Fn.set(Un,Fs,Ec,A1),!1===Wn.equals(Fn)&&(n.clearColor(Un,Fs,Ec,A1),Wn.copy(Fn))},reset:function(){ut=!1,Qt=null,Wn.set(-1,0,0,0)}}},c=new function s(){let ut=!1,Fn=null,Qt=null,Wn=null;return{setTest:function(Un){Un?Xt(2929):un(2929)},setMask:function(Un){Fn!==Un&&!ut&&(n.depthMask(Un),Fn=Un)},setFunc:function(Un){if(Qt!==Un){if(Un)switch(Un){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);Qt=Un}},setLocked:function(Un){ut=Un},setClear:function(Un){Wn!==Un&&(n.clearDepth(Un),Wn=Un)},reset:function(){ut=!1,Fn=null,Qt=null,Wn=null}}},l=new function o(){let ut=!1,Fn=null,Qt=null,Wn=null,Un=null,Fs=null,Ec=null,A1=null,oc=null;return{setTest:function(ra){ut||(ra?Xt(2960):un(2960))},setMask:function(ra){Fn!==ra&&!ut&&(n.stencilMask(ra),Fn=ra)},setFunc:function(ra,ac,cc){(Qt!==ra||Wn!==ac||Un!==cc)&&(n.stencilFunc(ra,ac,cc),Qt=ra,Wn=ac,Un=cc)},setOp:function(ra,ac,cc){(Fs!==ra||Ec!==ac||A1!==cc)&&(n.stencilOp(ra,ac,cc),Fs=ra,Ec=ac,A1=cc)},setLocked:function(ra){ut=ra},setClear:function(ra){oc!==ra&&(n.clearStencil(ra),oc=ra)},reset:function(){ut=!1,Fn=null,Qt=null,Wn=null,Un=null,Fs=null,Ec=null,A1=null,oc=null}}},u=new WeakMap,f=new WeakMap;let p={},g={},v=new WeakMap,_=[],w=null,b=!1,x=null,M=null,E=null,I=null,k=null,O=null,R=null,P=!1,Q=null,J=null,Ce=null,Ae=null,G=null;const ue=n.getParameter(35661);let X=!1,le=0;const de=n.getParameter(7938);-1!==de.indexOf("WebGL")?(le=parseFloat(/^WebGL (\d)/.exec(de)[1]),X=le>=1):-1!==de.indexOf("OpenGL ES")&&(le=parseFloat(/^OpenGL ES (\d)/.exec(de)[1]),X=le>=2);let pe=null,Fe={};const st=n.getParameter(3088),ze=n.getParameter(2978),_t=(new Wo).fromArray(st),pt=(new Wo).fromArray(ze);function kt(ut,Fn,Qt){const Wn=new Uint8Array(4),Un=n.createTexture();n.bindTexture(ut,Un),n.texParameteri(ut,10241,9728),n.texParameteri(ut,10240,9728);for(let Fs=0;Fs<Qt;Fs++)n.texImage2D(Fn+Fs,0,6408,1,1,0,6408,5121,Wn);return Un}const wt={};function Xt(ut){!0!==p[ut]&&(n.enable(ut),p[ut]=!0)}function un(ut){!1!==p[ut]&&(n.disable(ut),p[ut]=!1)}wt[3553]=kt(3553,3553,1),wt[34067]=kt(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),Xt(2929),c.setFunc(3),Tn(!1),Cn(1),Xt(2884),wn(0);const Vt={[x6]:32774,101:32778,102:32779};if(i)Vt[103]=32775,Vt[104]=32776;else{const ut=e.get("EXT_blend_minmax");null!==ut&&(Vt[103]=ut.MIN_EXT,Vt[104]=ut.MAX_EXT)}const Pt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function wn(ut,Fn,Qt,Wn,Un,Fs,Ec,A1){if(0!==ut){if(!1===b&&(Xt(3042),b=!0),5===ut)Un=Un||Fn,Fs=Fs||Qt,Ec=Ec||Wn,(Fn!==M||Un!==k)&&(n.blendEquationSeparate(Vt[Fn],Vt[Un]),M=Fn,k=Un),(Qt!==E||Wn!==I||Fs!==O||Ec!==R)&&(n.blendFuncSeparate(Pt[Qt],Pt[Wn],Pt[Fs],Pt[Ec]),E=Qt,I=Wn,O=Fs,R=Ec),x=ut,P=null;else if(ut!==x||A1!==P){if((M!==x6||k!==x6)&&(n.blendEquation(32774),M=x6,k=x6),A1)switch(ut){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ut)}else switch(ut){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ut)}E=null,I=null,O=null,R=null,x=ut,P=A1}}else!0===b&&(un(3042),b=!1)}function Tn(ut){Q!==ut&&(n.frontFace(ut?2304:2305),Q=ut)}function Cn(ut){0!==ut?(Xt(2884),ut!==J&&n.cullFace(1===ut?1029:2===ut?1028:1032)):un(2884),J=ut}function yi(ut,Fn,Qt){ut?(Xt(32823),(Ae!==Fn||G!==Qt)&&(n.polygonOffset(Fn,Qt),Ae=Fn,G=Qt)):un(32823)}function Ss(ut){void 0===ut&&(ut=33984+ue-1),pe!==ut&&(n.activeTexture(ut),pe=ut)}return{buffers:{color:a,depth:c,stencil:l},enable:Xt,disable:un,bindFramebuffer:function _n(ut,Fn){return g[ut]!==Fn&&(n.bindFramebuffer(ut,Fn),g[ut]=Fn,i&&(36009===ut&&(g[36160]=Fn),36160===ut&&(g[36009]=Fn)),!0)},drawBuffers:function an(ut,Fn){let Qt=_,Wn=!1;if(ut)if(Qt=v.get(Fn),void 0===Qt&&(Qt=[],v.set(Fn,Qt)),ut.isWebGLMultipleRenderTargets){const Un=ut.texture;if(Qt.length!==Un.length||36064!==Qt[0]){for(let Fs=0,Ec=Un.length;Fs<Ec;Fs++)Qt[Fs]=36064+Fs;Qt.length=Un.length,Wn=!0}}else 36064!==Qt[0]&&(Qt[0]=36064,Wn=!0);else 1029!==Qt[0]&&(Qt[0]=1029,Wn=!0);Wn&&(t.isWebGL2?n.drawBuffers(Qt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Qt))},useProgram:function bi(ut){return w!==ut&&(n.useProgram(ut),w=ut,!0)},setBlending:wn,setMaterial:function ei(ut,Fn){2===ut.side?un(2884):Xt(2884);let Qt=1===ut.side;Fn&&(Qt=!Qt),Tn(Qt),1===ut.blending&&!1===ut.transparent?wn(0):wn(ut.blending,ut.blendEquation,ut.blendSrc,ut.blendDst,ut.blendEquationAlpha,ut.blendSrcAlpha,ut.blendDstAlpha,ut.premultipliedAlpha),c.setFunc(ut.depthFunc),c.setTest(ut.depthTest),c.setMask(ut.depthWrite),a.setMask(ut.colorWrite);const Wn=ut.stencilWrite;l.setTest(Wn),Wn&&(l.setMask(ut.stencilWriteMask),l.setFunc(ut.stencilFunc,ut.stencilRef,ut.stencilFuncMask),l.setOp(ut.stencilFail,ut.stencilZFail,ut.stencilZPass)),yi(ut.polygonOffset,ut.polygonOffsetFactor,ut.polygonOffsetUnits),!0===ut.alphaToCoverage?Xt(32926):un(32926)},setFlipSided:Tn,setCullFace:Cn,setLineWidth:function $n(ut){ut!==Ce&&(X&&n.lineWidth(ut),Ce=ut)},setPolygonOffset:yi,setScissorTest:function mr(ut){ut?Xt(3089):un(3089)},activeTexture:Ss,bindTexture:function Ge(ut,Fn){null===pe&&Ss();let Qt=Fe[pe];void 0===Qt&&(Qt={type:void 0,texture:void 0},Fe[pe]=Qt),(Qt.type!==ut||Qt.texture!==Fn)&&(n.bindTexture(ut,Fn||wt[ut]),Qt.type=ut,Qt.texture=Fn)},unbindTexture:function Me(){const ut=Fe[pe];void 0!==ut&&void 0!==ut.type&&(n.bindTexture(ut.type,null),ut.type=void 0,ut.texture=void 0)},compressedTexImage2D:function It(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}},texImage2D:function nn(){try{n.texImage2D.apply(n,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}},texImage3D:function dn(){try{n.texImage3D.apply(n,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}},updateUBOMapping:function ur(ut,Fn){let Qt=f.get(Fn);void 0===Qt&&(Qt=new WeakMap,f.set(Fn,Qt));let Wn=Qt.get(ut);void 0===Wn&&(Wn=n.getUniformBlockIndex(Fn,ut.name),Qt.set(ut,Wn))},uniformBlockBinding:function Xr(ut,Fn){const Wn=f.get(Fn).get(ut);u.get(ut)!==Wn&&(n.uniformBlockBinding(Fn,Wn,ut.__bindingPointIndex),u.set(ut,Wn))},texStorage2D:function Mi(){try{n.texStorage2D.apply(n,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}},texStorage3D:function Pe(){try{n.texStorage3D.apply(n,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}},texSubImage2D:function yn(){try{n.texSubImage2D.apply(n,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}},texSubImage3D:function Mn(){try{n.texSubImage3D.apply(n,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}},compressedTexSubImage2D:function kn(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ut){console.error("THREE.WebGLState:",ut)}},scissor:function Yn(ut){!1===_t.equals(ut)&&(n.scissor(ut.x,ut.y,ut.z,ut.w),_t.copy(ut))},viewport:function Zn(ut){!1===pt.equals(ut)&&(n.viewport(ut.x,ut.y,ut.z,ut.w),pt.copy(ut))},reset:function ia(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},pe=null,Fe={},g={},v=new WeakMap,_=[],w=null,b=!1,x=null,M=null,E=null,I=null,k=null,O=null,R=null,P=!1,Q=null,J=null,Ce=null,Ae=null,G=null,_t.set(0,0,n.canvas.width,n.canvas.height),pt.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),l.reset()}}}function pVe(n,e,t,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let _;const w=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function x(Ge,Me){return b?new OffscreenCanvas(Ge,Me):r_("canvas")}function M(Ge,Me,It,yn){let Mn=1;if((Ge.width>yn||Ge.height>yn)&&(Mn=yn/Math.max(Ge.width,Ge.height)),Mn<1||!0===Me){if(typeof HTMLImageElement<"u"&&Ge instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ge instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ge instanceof ImageBitmap){const kn=Me?_M:Math.floor,Mi=kn(Mn*Ge.width),Pe=kn(Mn*Ge.height);void 0===_&&(_=x(Mi,Pe));const nn=It?x(Mi,Pe):_;return nn.width=Mi,nn.height=Pe,nn.getContext("2d").drawImage(Ge,0,0,Mi,Pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ge.width+"x"+Ge.height+") to ("+Mi+"x"+Pe+")."),nn}return"data"in Ge&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ge.width+"x"+Ge.height+")."),Ge}return Ge}function E(Ge){return qF(Ge.width)&&qF(Ge.height)}function k(Ge,Me){return Ge.generateMipmaps&&Me&&Ge.minFilter!==X1&&Ge.minFilter!==u1}function O(Ge){n.generateMipmap(Ge)}function R(Ge,Me,It,yn,Mn=!1){if(!1===a)return Me;if(null!==Ge){if(void 0!==n[Ge])return n[Ge];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ge+"'")}let kn=Me;return 6403===Me&&(5126===It&&(kn=33326),5131===It&&(kn=33325),5121===It&&(kn=33321)),33319===Me&&(5126===It&&(kn=33328),5131===It&&(kn=33327),5121===It&&(kn=33323)),6408===Me&&(5126===It&&(kn=34836),5131===It&&(kn=34842),5121===It&&(kn=yn===ta&&!1===Mn?35907:32856),32819===It&&(kn=32854),32820===It&&(kn=32855)),(33325===kn||33326===kn||33327===kn||33328===kn||34842===kn||34836===kn)&&e.get("EXT_color_buffer_float"),kn}function P(Ge,Me,It){return!0===k(Ge,It)||Ge.isFramebufferTexture&&Ge.minFilter!==X1&&Ge.minFilter!==u1?Math.log2(Math.max(Me.width,Me.height))+1:void 0!==Ge.mipmaps&&Ge.mipmaps.length>0?Ge.mipmaps.length:Ge.isCompressedTexture&&Array.isArray(Ge.image)?Me.mipmaps.length:1}function Q(Ge){return Ge===X1||1004===Ge||1005===Ge?9728:9729}function J(Ge){const Me=Ge.target;Me.removeEventListener("dispose",J),function Ae(Ge){const Me=i.get(Ge);if(void 0===Me.__webglInit)return;const It=Ge.source,yn=w.get(It);if(yn){const Mn=yn[Me.__cacheKey];Mn.usedTimes--,0===Mn.usedTimes&&G(Ge),0===Object.keys(yn).length&&w.delete(It)}i.remove(Ge)}(Me),Me.isVideoTexture&&v.delete(Me)}function Ce(Ge){const Me=Ge.target;Me.removeEventListener("dispose",Ce),function ue(Ge){const Me=Ge.texture,It=i.get(Ge),yn=i.get(Me);if(void 0!==yn.__webglTexture&&(n.deleteTexture(yn.__webglTexture),o.memory.textures--),Ge.depthTexture&&Ge.depthTexture.dispose(),Ge.isWebGLCubeRenderTarget)for(let Mn=0;Mn<6;Mn++)n.deleteFramebuffer(It.__webglFramebuffer[Mn]),It.__webglDepthbuffer&&n.deleteRenderbuffer(It.__webglDepthbuffer[Mn]);else{if(n.deleteFramebuffer(It.__webglFramebuffer),It.__webglDepthbuffer&&n.deleteRenderbuffer(It.__webglDepthbuffer),It.__webglMultisampledFramebuffer&&n.deleteFramebuffer(It.__webglMultisampledFramebuffer),It.__webglColorRenderbuffer)for(let Mn=0;Mn<It.__webglColorRenderbuffer.length;Mn++)It.__webglColorRenderbuffer[Mn]&&n.deleteRenderbuffer(It.__webglColorRenderbuffer[Mn]);It.__webglDepthRenderbuffer&&n.deleteRenderbuffer(It.__webglDepthRenderbuffer)}if(Ge.isWebGLMultipleRenderTargets)for(let Mn=0,kn=Me.length;Mn<kn;Mn++){const Mi=i.get(Me[Mn]);Mi.__webglTexture&&(n.deleteTexture(Mi.__webglTexture),o.memory.textures--),i.remove(Me[Mn])}i.remove(Me),i.remove(Ge)}(Me)}function G(Ge){const Me=i.get(Ge);n.deleteTexture(Me.__webglTexture),delete w.get(Ge.source)[Me.__cacheKey],o.memory.textures--}let X=0;function Fe(Ge,Me){const It=i.get(Ge);if(Ge.isVideoTexture&&function mr(Ge){const Me=o.render.frame;v.get(Ge)!==Me&&(v.set(Ge,Me),Ge.update())}(Ge),!1===Ge.isRenderTargetTexture&&Ge.version>0&&It.__version!==Ge.version){const yn=Ge.image;if(null===yn)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==yn.complete)return void un(It,Ge,Me);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+Me),t.bindTexture(3553,It.__webglTexture)}const pt={[C0]:10497,[s3]:33071,1002:33648},kt={[X1]:9728,1004:9984,1005:9986,[u1]:9729,1007:9985,[C6]:9987};function wt(Ge,Me,It){if(It?(n.texParameteri(Ge,10242,pt[Me.wrapS]),n.texParameteri(Ge,10243,pt[Me.wrapT]),(32879===Ge||35866===Ge)&&n.texParameteri(Ge,32882,pt[Me.wrapR]),n.texParameteri(Ge,10240,kt[Me.magFilter]),n.texParameteri(Ge,10241,kt[Me.minFilter])):(n.texParameteri(Ge,10242,33071),n.texParameteri(Ge,10243,33071),(32879===Ge||35866===Ge)&&n.texParameteri(Ge,32882,33071),(Me.wrapS!==s3||Me.wrapT!==s3)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Ge,10240,Q(Me.magFilter)),n.texParameteri(Ge,10241,Q(Me.minFilter)),Me.minFilter!==X1&&Me.minFilter!==u1&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const yn=e.get("EXT_texture_filter_anisotropic");if(Me.type===_4&&!1===e.has("OES_texture_float_linear")||!1===a&&Me.type===M0&&!1===e.has("OES_texture_half_float_linear"))return;(Me.anisotropy>1||i.get(Me).__currentAnisotropy)&&(n.texParameterf(Ge,yn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Me.anisotropy,r.getMaxAnisotropy())),i.get(Me).__currentAnisotropy=Me.anisotropy)}}function Xt(Ge,Me){let It=!1;void 0===Ge.__webglInit&&(Ge.__webglInit=!0,Me.addEventListener("dispose",J));const yn=Me.source;let Mn=w.get(yn);void 0===Mn&&(Mn={},w.set(yn,Mn));const kn=function pe(Ge){const Me=[];return Me.push(Ge.wrapS),Me.push(Ge.wrapT),Me.push(Ge.magFilter),Me.push(Ge.minFilter),Me.push(Ge.anisotropy),Me.push(Ge.internalFormat),Me.push(Ge.format),Me.push(Ge.type),Me.push(Ge.generateMipmaps),Me.push(Ge.premultiplyAlpha),Me.push(Ge.flipY),Me.push(Ge.unpackAlignment),Me.push(Ge.encoding),Me.join()}(Me);if(kn!==Ge.__cacheKey){void 0===Mn[kn]&&(Mn[kn]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,It=!0),Mn[kn].usedTimes++;const Mi=Mn[Ge.__cacheKey];void 0!==Mi&&(Mn[Ge.__cacheKey].usedTimes--,0===Mi.usedTimes&&G(Me)),Ge.__cacheKey=kn,Ge.__webglTexture=Mn[kn].texture}return It}function un(Ge,Me,It){let yn=3553;Me.isDataArrayTexture&&(yn=35866),Me.isData3DTexture&&(yn=32879);const Mn=Xt(Ge,Me),kn=Me.source;if(t.activeTexture(33984+It),t.bindTexture(yn,Ge.__webglTexture),kn.version!==kn.__currentVersion||!0===Mn){n.pixelStorei(37440,Me.flipY),n.pixelStorei(37441,Me.premultiplyAlpha),n.pixelStorei(3317,Me.unpackAlignment),n.pixelStorei(37443,0);const Mi=function I(Ge){return!a&&(Ge.wrapS!==s3||Ge.wrapT!==s3||Ge.minFilter!==X1&&Ge.minFilter!==u1)}(Me)&&!1===E(Me.image);let Pe=M(Me.image,Mi,!1,u);Pe=Ss(Me,Pe);const nn=E(Pe)||a,dn=s.convert(Me.format,Me.encoding);let ur,Yn=s.convert(Me.type),Zn=R(Me.internalFormat,dn,Yn,Me.encoding,Me.isVideoTexture);wt(yn,Me,nn);const Xr=Me.mipmaps,ia=a&&!0!==Me.isVideoTexture,ut=void 0===kn.__currentVersion||!0===Mn,Fn=P(Me,Pe,nn);if(Me.isDepthTexture)Zn=6402,a?Zn=Me.type===_4?36012:Me.type===kp?33190:Me.type===Fp?35056:33189:Me.type===_4&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Me.format===Pp&&6402===Zn&&1012!==Me.type&&Me.type!==kp&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Me.type=kp,Yn=s.convert(Me.type)),Me.format===Hp&&6402===Zn&&(Zn=34041,Me.type!==Fp&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Me.type=Fp,Yn=s.convert(Me.type))),ut&&(ia?t.texStorage2D(3553,1,Zn,Pe.width,Pe.height):t.texImage2D(3553,0,Zn,Pe.width,Pe.height,0,dn,Yn,null));else if(Me.isDataTexture)if(Xr.length>0&&nn){ia&&ut&&t.texStorage2D(3553,Fn,Zn,Xr[0].width,Xr[0].height);for(let Qt=0,Wn=Xr.length;Qt<Wn;Qt++)ur=Xr[Qt],ia?t.texSubImage2D(3553,Qt,0,0,ur.width,ur.height,dn,Yn,ur.data):t.texImage2D(3553,Qt,Zn,ur.width,ur.height,0,dn,Yn,ur.data);Me.generateMipmaps=!1}else ia?(ut&&t.texStorage2D(3553,Fn,Zn,Pe.width,Pe.height),t.texSubImage2D(3553,0,0,0,Pe.width,Pe.height,dn,Yn,Pe.data)):t.texImage2D(3553,0,Zn,Pe.width,Pe.height,0,dn,Yn,Pe.data);else if(Me.isCompressedTexture){ia&&ut&&t.texStorage2D(3553,Fn,Zn,Xr[0].width,Xr[0].height);for(let Qt=0,Wn=Xr.length;Qt<Wn;Qt++)ur=Xr[Qt],Me.format!==gh?null!==dn?ia?t.compressedTexSubImage2D(3553,Qt,0,0,ur.width,ur.height,dn,ur.data):t.compressedTexImage2D(3553,Qt,Zn,ur.width,ur.height,0,ur.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ia?t.texSubImage2D(3553,Qt,0,0,ur.width,ur.height,dn,Yn,ur.data):t.texImage2D(3553,Qt,Zn,ur.width,ur.height,0,dn,Yn,ur.data)}else if(Me.isDataArrayTexture)ia?(ut&&t.texStorage3D(35866,Fn,Zn,Pe.width,Pe.height,Pe.depth),t.texSubImage3D(35866,0,0,0,0,Pe.width,Pe.height,Pe.depth,dn,Yn,Pe.data)):t.texImage3D(35866,0,Zn,Pe.width,Pe.height,Pe.depth,0,dn,Yn,Pe.data);else if(Me.isData3DTexture)ia?(ut&&t.texStorage3D(32879,Fn,Zn,Pe.width,Pe.height,Pe.depth),t.texSubImage3D(32879,0,0,0,0,Pe.width,Pe.height,Pe.depth,dn,Yn,Pe.data)):t.texImage3D(32879,0,Zn,Pe.width,Pe.height,Pe.depth,0,dn,Yn,Pe.data);else if(Me.isFramebufferTexture){if(ut)if(ia)t.texStorage2D(3553,Fn,Zn,Pe.width,Pe.height);else{let Qt=Pe.width,Wn=Pe.height;for(let Un=0;Un<Fn;Un++)t.texImage2D(3553,Un,Zn,Qt,Wn,0,dn,Yn,null),Qt>>=1,Wn>>=1}}else if(Xr.length>0&&nn){ia&&ut&&t.texStorage2D(3553,Fn,Zn,Xr[0].width,Xr[0].height);for(let Qt=0,Wn=Xr.length;Qt<Wn;Qt++)ur=Xr[Qt],ia?t.texSubImage2D(3553,Qt,0,0,dn,Yn,ur):t.texImage2D(3553,Qt,Zn,dn,Yn,ur);Me.generateMipmaps=!1}else ia?(ut&&t.texStorage2D(3553,Fn,Zn,Pe.width,Pe.height),t.texSubImage2D(3553,0,0,0,dn,Yn,Pe)):t.texImage2D(3553,0,Zn,dn,Yn,Pe);k(Me,nn)&&O(yn),kn.__currentVersion=kn.version,Me.onUpdate&&Me.onUpdate(Me)}Ge.__version=Me.version}function an(Ge,Me,It,yn,Mn){const kn=s.convert(It.format,It.encoding),Mi=s.convert(It.type),Pe=R(It.internalFormat,kn,Mi,It.encoding);i.get(Me).__hasExternalTextures||(32879===Mn||35866===Mn?t.texImage3D(Mn,0,Pe,Me.width,Me.height,Me.depth,0,kn,Mi,null):t.texImage2D(Mn,0,Pe,Me.width,Me.height,0,kn,Mi,null)),t.bindFramebuffer(36160,Ge),yi(Me)?p.framebufferTexture2DMultisampleEXT(36160,yn,Mn,i.get(It).__webglTexture,0,$n(Me)):n.framebufferTexture2D(36160,yn,Mn,i.get(It).__webglTexture,0),t.bindFramebuffer(36160,null)}function bi(Ge,Me,It){if(n.bindRenderbuffer(36161,Ge),Me.depthBuffer&&!Me.stencilBuffer){let yn=33189;if(It||yi(Me)){const Mn=Me.depthTexture;Mn&&Mn.isDepthTexture&&(Mn.type===_4?yn=36012:Mn.type===kp&&(yn=33190));const kn=$n(Me);yi(Me)?p.renderbufferStorageMultisampleEXT(36161,kn,yn,Me.width,Me.height):n.renderbufferStorageMultisample(36161,kn,yn,Me.width,Me.height)}else n.renderbufferStorage(36161,yn,Me.width,Me.height);n.framebufferRenderbuffer(36160,36096,36161,Ge)}else if(Me.depthBuffer&&Me.stencilBuffer){const yn=$n(Me);It&&!1===yi(Me)?n.renderbufferStorageMultisample(36161,yn,35056,Me.width,Me.height):yi(Me)?p.renderbufferStorageMultisampleEXT(36161,yn,35056,Me.width,Me.height):n.renderbufferStorage(36161,34041,Me.width,Me.height),n.framebufferRenderbuffer(36160,33306,36161,Ge)}else{const yn=!0===Me.isWebGLMultipleRenderTargets?Me.texture:[Me.texture];for(let Mn=0;Mn<yn.length;Mn++){const kn=yn[Mn],Mi=s.convert(kn.format,kn.encoding),Pe=s.convert(kn.type),nn=R(kn.internalFormat,Mi,Pe,kn.encoding),dn=$n(Me);It&&!1===yi(Me)?n.renderbufferStorageMultisample(36161,dn,nn,Me.width,Me.height):yi(Me)?p.renderbufferStorageMultisampleEXT(36161,dn,nn,Me.width,Me.height):n.renderbufferStorage(36161,nn,Me.width,Me.height)}}n.bindRenderbuffer(36161,null)}function Pt(Ge){const Me=i.get(Ge),It=!0===Ge.isWebGLCubeRenderTarget;if(Ge.depthTexture&&!Me.__autoAllocateDepthBuffer){if(It)throw new Error("target.depthTexture not supported in Cube render targets");!function Vt(Ge,Me){if(Me&&Me.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Ge),!Me.depthTexture||!Me.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(Me.depthTexture).__webglTexture||Me.depthTexture.image.width!==Me.width||Me.depthTexture.image.height!==Me.height)&&(Me.depthTexture.image.width=Me.width,Me.depthTexture.image.height=Me.height,Me.depthTexture.needsUpdate=!0),Fe(Me.depthTexture,0);const yn=i.get(Me.depthTexture).__webglTexture,Mn=$n(Me);if(Me.depthTexture.format===Pp)yi(Me)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,yn,0,Mn):n.framebufferTexture2D(36160,36096,3553,yn,0);else{if(Me.depthTexture.format!==Hp)throw new Error("Unknown depthTexture format");yi(Me)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,yn,0,Mn):n.framebufferTexture2D(36160,33306,3553,yn,0)}}(Me.__webglFramebuffer,Ge)}else if(It){Me.__webglDepthbuffer=[];for(let yn=0;yn<6;yn++)t.bindFramebuffer(36160,Me.__webglFramebuffer[yn]),Me.__webglDepthbuffer[yn]=n.createRenderbuffer(),bi(Me.__webglDepthbuffer[yn],Ge,!1)}else t.bindFramebuffer(36160,Me.__webglFramebuffer),Me.__webglDepthbuffer=n.createRenderbuffer(),bi(Me.__webglDepthbuffer,Ge,!1);t.bindFramebuffer(36160,null)}function $n(Ge){return Math.min(f,Ge.samples)}function yi(Ge){const Me=i.get(Ge);return a&&Ge.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==Me.__useRenderToTexture}function Ss(Ge,Me){const It=Ge.encoding,yn=Ge.format,Mn=Ge.type;return!0===Ge.isCompressedTexture||!0===Ge.isVideoTexture||1035===Ge.format||It!==zf&&(It===ta?!1===a?!0===e.has("EXT_sRGB")&&yn===gh?(Ge.format=1035,Ge.minFilter=u1,Ge.generateMipmaps=!1):Me=yne.sRGBToLinear(Me):(yn!==gh||Mn!==Bp)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",It)),Me}this.allocateTextureUnit=function de(){const Ge=X;return Ge>=c&&console.warn("THREE.WebGLTextures: Trying to use "+Ge+" texture units while this GPU supports only "+c),X+=1,Ge},this.resetTextureUnits=function le(){X=0},this.setTexture2D=Fe,this.setTexture2DArray=function st(Ge,Me){const It=i.get(Ge);Ge.version>0&&It.__version!==Ge.version?un(It,Ge,Me):(t.activeTexture(33984+Me),t.bindTexture(35866,It.__webglTexture))},this.setTexture3D=function ze(Ge,Me){const It=i.get(Ge);Ge.version>0&&It.__version!==Ge.version?un(It,Ge,Me):(t.activeTexture(33984+Me),t.bindTexture(32879,It.__webglTexture))},this.setTextureCube=function _t(Ge,Me){const It=i.get(Ge);Ge.version>0&&It.__version!==Ge.version?function _n(Ge,Me,It){if(6!==Me.image.length)return;const yn=Xt(Ge,Me),Mn=Me.source;if(t.activeTexture(33984+It),t.bindTexture(34067,Ge.__webglTexture),Mn.version!==Mn.__currentVersion||!0===yn){n.pixelStorei(37440,Me.flipY),n.pixelStorei(37441,Me.premultiplyAlpha),n.pixelStorei(3317,Me.unpackAlignment),n.pixelStorei(37443,0);const kn=Me.isCompressedTexture||Me.image[0].isCompressedTexture,Mi=Me.image[0]&&Me.image[0].isDataTexture,Pe=[];for(let Qt=0;Qt<6;Qt++)Pe[Qt]=kn||Mi?Mi?Me.image[Qt].image:Me.image[Qt]:M(Me.image[Qt],!1,!0,l),Pe[Qt]=Ss(Me,Pe[Qt]);const nn=Pe[0],dn=E(nn)||a,Yn=s.convert(Me.format,Me.encoding),Zn=s.convert(Me.type),ur=R(Me.internalFormat,Yn,Zn,Me.encoding),Xr=a&&!0!==Me.isVideoTexture,ia=void 0===Mn.__currentVersion||!0===yn;let Fn,ut=P(Me,nn,dn);if(wt(34067,Me,dn),kn){Xr&&ia&&t.texStorage2D(34067,ut,ur,nn.width,nn.height);for(let Qt=0;Qt<6;Qt++){Fn=Pe[Qt].mipmaps;for(let Wn=0;Wn<Fn.length;Wn++){const Un=Fn[Wn];Me.format!==gh?null!==Yn?Xr?t.compressedTexSubImage2D(34069+Qt,Wn,0,0,Un.width,Un.height,Yn,Un.data):t.compressedTexImage2D(34069+Qt,Wn,ur,Un.width,Un.height,0,Un.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Xr?t.texSubImage2D(34069+Qt,Wn,0,0,Un.width,Un.height,Yn,Zn,Un.data):t.texImage2D(34069+Qt,Wn,ur,Un.width,Un.height,0,Yn,Zn,Un.data)}}}else{Fn=Me.mipmaps,Xr&&ia&&(Fn.length>0&&ut++,t.texStorage2D(34067,ut,ur,Pe[0].width,Pe[0].height));for(let Qt=0;Qt<6;Qt++)if(Mi){Xr?t.texSubImage2D(34069+Qt,0,0,0,Pe[Qt].width,Pe[Qt].height,Yn,Zn,Pe[Qt].data):t.texImage2D(34069+Qt,0,ur,Pe[Qt].width,Pe[Qt].height,0,Yn,Zn,Pe[Qt].data);for(let Wn=0;Wn<Fn.length;Wn++){const Fs=Fn[Wn].image[Qt].image;Xr?t.texSubImage2D(34069+Qt,Wn+1,0,0,Fs.width,Fs.height,Yn,Zn,Fs.data):t.texImage2D(34069+Qt,Wn+1,ur,Fs.width,Fs.height,0,Yn,Zn,Fs.data)}}else{Xr?t.texSubImage2D(34069+Qt,0,0,0,Yn,Zn,Pe[Qt]):t.texImage2D(34069+Qt,0,ur,Yn,Zn,Pe[Qt]);for(let Wn=0;Wn<Fn.length;Wn++){const Un=Fn[Wn];Xr?t.texSubImage2D(34069+Qt,Wn+1,0,0,Yn,Zn,Un.image[Qt]):t.texImage2D(34069+Qt,Wn+1,ur,Yn,Zn,Un.image[Qt])}}}k(Me,dn)&&O(34067),Mn.__currentVersion=Mn.version,Me.onUpdate&&Me.onUpdate(Me)}Ge.__version=Me.version}(It,Ge,Me):(t.activeTexture(33984+Me),t.bindTexture(34067,It.__webglTexture))},this.rebindTextures=function wn(Ge,Me,It){const yn=i.get(Ge);void 0!==Me&&an(yn.__webglFramebuffer,Ge,Ge.texture,36064,3553),void 0!==It&&Pt(Ge)},this.setupRenderTarget=function ei(Ge){const Me=Ge.texture,It=i.get(Ge),yn=i.get(Me);Ge.addEventListener("dispose",Ce),!0!==Ge.isWebGLMultipleRenderTargets&&(void 0===yn.__webglTexture&&(yn.__webglTexture=n.createTexture()),yn.__version=Me.version,o.memory.textures++);const Mn=!0===Ge.isWebGLCubeRenderTarget,kn=!0===Ge.isWebGLMultipleRenderTargets,Mi=E(Ge)||a;if(Mn){It.__webglFramebuffer=[];for(let Pe=0;Pe<6;Pe++)It.__webglFramebuffer[Pe]=n.createFramebuffer()}else{if(It.__webglFramebuffer=n.createFramebuffer(),kn)if(r.drawBuffers){const Pe=Ge.texture;for(let nn=0,dn=Pe.length;nn<dn;nn++){const Yn=i.get(Pe[nn]);void 0===Yn.__webglTexture&&(Yn.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Ge.samples>0&&!1===yi(Ge)){const Pe=kn?Me:[Me];It.__webglMultisampledFramebuffer=n.createFramebuffer(),It.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,It.__webglMultisampledFramebuffer);for(let nn=0;nn<Pe.length;nn++){const dn=Pe[nn];It.__webglColorRenderbuffer[nn]=n.createRenderbuffer(),n.bindRenderbuffer(36161,It.__webglColorRenderbuffer[nn]);const Yn=s.convert(dn.format,dn.encoding),Zn=s.convert(dn.type),ur=R(dn.internalFormat,Yn,Zn,dn.encoding),Xr=$n(Ge);n.renderbufferStorageMultisample(36161,Xr,ur,Ge.width,Ge.height),n.framebufferRenderbuffer(36160,36064+nn,36161,It.__webglColorRenderbuffer[nn])}n.bindRenderbuffer(36161,null),Ge.depthBuffer&&(It.__webglDepthRenderbuffer=n.createRenderbuffer(),bi(It.__webglDepthRenderbuffer,Ge,!0)),t.bindFramebuffer(36160,null)}}if(Mn){t.bindTexture(34067,yn.__webglTexture),wt(34067,Me,Mi);for(let Pe=0;Pe<6;Pe++)an(It.__webglFramebuffer[Pe],Ge,Me,36064,34069+Pe);k(Me,Mi)&&O(34067),t.unbindTexture()}else if(kn){const Pe=Ge.texture;for(let nn=0,dn=Pe.length;nn<dn;nn++){const Yn=Pe[nn],Zn=i.get(Yn);t.bindTexture(3553,Zn.__webglTexture),wt(3553,Yn,Mi),an(It.__webglFramebuffer,Ge,Yn,36064+nn,3553),k(Yn,Mi)&&O(3553)}t.unbindTexture()}else{let Pe=3553;(Ge.isWebGL3DRenderTarget||Ge.isWebGLArrayRenderTarget)&&(a?Pe=Ge.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Pe,yn.__webglTexture),wt(Pe,Me,Mi),an(It.__webglFramebuffer,Ge,Me,36064,Pe),k(Me,Mi)&&O(Pe),t.unbindTexture()}Ge.depthBuffer&&Pt(Ge)},this.updateRenderTargetMipmap=function Tn(Ge){const Me=E(Ge)||a,It=!0===Ge.isWebGLMultipleRenderTargets?Ge.texture:[Ge.texture];for(let yn=0,Mn=It.length;yn<Mn;yn++){const kn=It[yn];if(k(kn,Me)){const Mi=Ge.isWebGLCubeRenderTarget?34067:3553,Pe=i.get(kn).__webglTexture;t.bindTexture(Mi,Pe),O(Mi),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Cn(Ge){if(a&&Ge.samples>0&&!1===yi(Ge)){const Me=Ge.isWebGLMultipleRenderTargets?Ge.texture:[Ge.texture],It=Ge.width,yn=Ge.height;let Mn=16384;const kn=[],Mi=Ge.stencilBuffer?33306:36096,Pe=i.get(Ge),nn=!0===Ge.isWebGLMultipleRenderTargets;if(nn)for(let dn=0;dn<Me.length;dn++)t.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+dn,36161,null),t.bindFramebuffer(36160,Pe.__webglFramebuffer),n.framebufferTexture2D(36009,36064+dn,3553,null,0);t.bindFramebuffer(36008,Pe.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Pe.__webglFramebuffer);for(let dn=0;dn<Me.length;dn++){kn.push(36064+dn),Ge.depthBuffer&&kn.push(Mi);const Yn=void 0!==Pe.__ignoreDepthValues&&Pe.__ignoreDepthValues;if(!1===Yn&&(Ge.depthBuffer&&(Mn|=256),Ge.stencilBuffer&&(Mn|=1024)),nn&&n.framebufferRenderbuffer(36008,36064,36161,Pe.__webglColorRenderbuffer[dn]),!0===Yn&&(n.invalidateFramebuffer(36008,[Mi]),n.invalidateFramebuffer(36009,[Mi])),nn){const Zn=i.get(Me[dn]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Zn,0)}n.blitFramebuffer(0,0,It,yn,0,0,It,yn,Mn,9728),g&&n.invalidateFramebuffer(36008,kn)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),nn)for(let dn=0;dn<Me.length;dn++){t.bindFramebuffer(36160,Pe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+dn,36161,Pe.__webglColorRenderbuffer[dn]);const Yn=i.get(Me[dn]).__webglTexture;t.bindFramebuffer(36160,Pe.__webglFramebuffer),n.framebufferTexture2D(36009,36064+dn,3553,Yn,0)}t.bindFramebuffer(36009,Pe.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Pt,this.setupFrameBufferTexture=an,this.useMultisampledRTT=yi}function gVe(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===Bp)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===kp)return 5125;if(s===_4)return 5126;if(s===M0)return i?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===gh)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===Pp)return 6402;if(s===Hp)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===ta){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===ta?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===ta?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===ta?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===Fp?i?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class mVe extends f2{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class jo extends el{constructor(){super(),this.isGroup=!0,this.type="Group"}}const AVe={type:"move"};class EP{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new jo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new jo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new be,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new be),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new jo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new be,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new be),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const _ of e.hand.values()){const w=t.getJointPose(_,i);if(void 0===l.joints[_.jointName]){const x=new jo;x.matrixAutoUpdate=!1,x.visible=!1,l.joints[_.jointName]=x,l.add(x)}const b=l.joints[_.jointName];null!==w&&(b.matrix.fromArray(w.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.jointRadius=w.radius),b.visible=null!==w}const p=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),g=.02,v=.005;l.inputState.pinching&&p>g+v?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&p<=g-v&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(AVe)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==o),this}}class lie extends y4{constructor(e,t,i,r,s,o,a,c,l,u){if((u=void 0!==u?u:Pp)!==Pp&&u!==Hp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Pp&&(i=kp),void 0===i&&u===Hp&&(i=Fp),super(null,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:X1,this.minFilter=void 0!==c?c:X1,this.flipY=!1,this.generateMipmaps=!1}}class vVe extends Op{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=null,l=null,u=null,f=null,p=null,g=null;const v=t.getContextAttributes();let _=null,w=null;const b=[],x=[],M=new f2;M.layers.enable(1),M.viewport=new Wo;const E=new f2;E.layers.enable(2),E.viewport=new Wo;const I=[M,E],k=new mVe;k.layers.enable(1),k.layers.enable(2);let O=null,R=null;function P(pe){const Fe=x.indexOf(pe.inputSource);if(-1===Fe)return;const st=b[Fe];void 0!==st&&st.dispatchEvent({type:pe.type,data:pe.inputSource})}function Q(){r.removeEventListener("select",P),r.removeEventListener("selectstart",P),r.removeEventListener("selectend",P),r.removeEventListener("squeeze",P),r.removeEventListener("squeezestart",P),r.removeEventListener("squeezeend",P),r.removeEventListener("end",Q),r.removeEventListener("inputsourceschange",J);for(let pe=0;pe<b.length;pe++){const Fe=x[pe];null!==Fe&&(x[pe]=null,b[pe].disconnect(Fe))}O=null,R=null,e.setRenderTarget(_),p=null,f=null,u=null,r=null,w=null,de.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function J(pe){for(let Fe=0;Fe<pe.removed.length;Fe++){const st=pe.removed[Fe],ze=x.indexOf(st);ze>=0&&(x[ze]=null,b[ze].dispatchEvent({type:"disconnected",data:st}))}for(let Fe=0;Fe<pe.added.length;Fe++){const st=pe.added[Fe];let ze=x.indexOf(st);if(-1===ze){for(let pt=0;pt<b.length;pt++){if(pt>=x.length){x.push(st),ze=pt;break}if(null===x[pt]){x[pt]=st,ze=pt;break}}if(-1===ze)break}const _t=b[ze];_t&&_t.dispatchEvent({type:"connected",data:st})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(pe){let Fe=b[pe];return void 0===Fe&&(Fe=new EP,b[pe]=Fe),Fe.getTargetRaySpace()},this.getControllerGrip=function(pe){let Fe=b[pe];return void 0===Fe&&(Fe=new EP,b[pe]=Fe),Fe.getGripSpace()},this.getHand=function(pe){let Fe=b[pe];return void 0===Fe&&(Fe=new EP,b[pe]=Fe),Fe.getHandSpace()},this.setFramebufferScaleFactor=function(pe){s=pe,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(pe){a=pe,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(pe){c=pe},this.getBaseLayer=function(){return null!==f?f:p},this.getBinding=function(){return u},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=function(){var pe=(0,wi.Z)(function*(Fe){if(r=Fe,null!==r){if(_=e.getRenderTarget(),r.addEventListener("select",P),r.addEventListener("selectstart",P),r.addEventListener("selectend",P),r.addEventListener("squeeze",P),r.addEventListener("squeezestart",P),r.addEventListener("squeezeend",P),r.addEventListener("end",Q),r.addEventListener("inputsourceschange",J),!0!==v.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)p=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||v.antialias,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:p}),w=new w4(p.framebufferWidth,p.framebufferHeight,{format:gh,type:Bp,encoding:e.outputEncoding,stencilBuffer:v.stencil});else{let st=null,ze=null,_t=null;v.depth&&(_t=v.stencil?35056:33190,st=v.stencil?Hp:Pp,ze=v.stencil?Fp:kp);const pt={colorFormat:32856,depthFormat:_t,scaleFactor:s};u=new XRWebGLBinding(r,t),f=u.createProjectionLayer(pt),r.updateRenderState({layers:[f]}),w=new w4(f.textureWidth,f.textureHeight,{format:gh,type:Bp,depthTexture:new lie(f.textureWidth,f.textureHeight,ze,void 0,void 0,void 0,void 0,void 0,void 0,st),stencilBuffer:v.stencil,encoding:e.outputEncoding,samples:v.antialias?4:0}),e.properties.get(w).__ignoreDepthValues=f.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(1),c=null,o=yield r.requestReferenceSpace(a),de.setContext(r),de.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(Fe){return pe.apply(this,arguments)}}();const Ce=new be,Ae=new be;function ue(pe,Fe){null===Fe?pe.matrixWorld.copy(pe.matrix):pe.matrixWorld.multiplyMatrices(Fe.matrixWorld,pe.matrix),pe.matrixWorldInverse.copy(pe.matrixWorld).invert()}this.updateCamera=function(pe){if(null===r)return;k.near=E.near=M.near=pe.near,k.far=E.far=M.far=pe.far,(O!==k.near||R!==k.far)&&(r.updateRenderState({depthNear:k.near,depthFar:k.far}),O=k.near,R=k.far);const Fe=pe.parent,st=k.cameras;ue(k,Fe);for(let _t=0;_t<st.length;_t++)ue(st[_t],Fe);k.matrixWorld.decompose(k.position,k.quaternion,k.scale),pe.matrix.copy(k.matrix),pe.matrix.decompose(pe.position,pe.quaternion,pe.scale);const ze=pe.children;for(let _t=0,pt=ze.length;_t<pt;_t++)ze[_t].updateMatrixWorld(!0);2===st.length?function G(pe,Fe,st){Ce.setFromMatrixPosition(Fe.matrixWorld),Ae.setFromMatrixPosition(st.matrixWorld);const ze=Ce.distanceTo(Ae),_t=Fe.projectionMatrix.elements,pt=st.projectionMatrix.elements,kt=_t[14]/(_t[10]-1),wt=_t[14]/(_t[10]+1),Xt=(_t[9]+1)/_t[5],un=(_t[9]-1)/_t[5],_n=(_t[8]-1)/_t[0],an=(pt[8]+1)/pt[0],bi=kt*_n,Vt=kt*an,Pt=ze/(-_n+an),wn=Pt*-_n;Fe.matrixWorld.decompose(pe.position,pe.quaternion,pe.scale),pe.translateX(wn),pe.translateZ(Pt),pe.matrixWorld.compose(pe.position,pe.quaternion,pe.scale),pe.matrixWorldInverse.copy(pe.matrixWorld).invert();const ei=kt+Pt,Tn=wt+Pt;pe.projectionMatrix.makePerspective(bi-wn,Vt+(ze-wn),Xt*wt/Tn*ei,un*wt/Tn*ei,ei,Tn)}(k,M,E):k.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return k},this.getFoveation=function(){return null!==f?f.fixedFoveation:null!==p?p.fixedFoveation:void 0},this.setFoveation=function(pe){null!==f&&(f.fixedFoveation=pe),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=pe)};let X=null;const de=new Fne;de.setAnimationLoop(function le(pe,Fe){if(l=Fe.getViewerPose(c||o),g=Fe,null!==l){const st=l.views;null!==p&&(e.setRenderTargetFramebuffer(w,p.framebuffer),e.setRenderTarget(w));let ze=!1;st.length!==k.cameras.length&&(k.cameras.length=0,ze=!0);for(let _t=0;_t<st.length;_t++){const pt=st[_t];let kt=null;if(null!==p)kt=p.getViewport(pt);else{const Xt=u.getViewSubImage(f,pt);kt=Xt.viewport,0===_t&&(e.setRenderTargetTextures(w,Xt.colorTexture,f.ignoreDepthValues?void 0:Xt.depthStencilTexture),e.setRenderTarget(w))}let wt=I[_t];void 0===wt&&(wt=new f2,wt.layers.enable(_t),wt.viewport=new Wo,I[_t]=wt),wt.matrix.fromArray(pt.transform.matrix),wt.projectionMatrix.fromArray(pt.projectionMatrix),wt.viewport.set(kt.x,kt.y,kt.width,kt.height),0===_t&&k.matrix.copy(wt.matrix),!0===ze&&k.cameras.push(wt)}}for(let st=0;st<b.length;st++){const ze=x[st],_t=b[st];null!==ze&&void 0!==_t&&_t.update(ze,Fe,c||o)}X&&X(pe,Fe),g=null}),this.setAnimationLoop=function(pe){X=pe},this.dispose=function(){}}}function _Ve(n,e){function r(_,w){_.opacity.value=w.opacity,w.color&&_.diffuse.value.copy(w.color),w.emissive&&_.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(_.map.value=w.map),w.alphaMap&&(_.alphaMap.value=w.alphaMap),w.bumpMap&&(_.bumpMap.value=w.bumpMap,_.bumpScale.value=w.bumpScale,1===w.side&&(_.bumpScale.value*=-1)),w.displacementMap&&(_.displacementMap.value=w.displacementMap,_.displacementScale.value=w.displacementScale,_.displacementBias.value=w.displacementBias),w.emissiveMap&&(_.emissiveMap.value=w.emissiveMap),w.normalMap&&(_.normalMap.value=w.normalMap,_.normalScale.value.copy(w.normalScale),1===w.side&&_.normalScale.value.negate()),w.specularMap&&(_.specularMap.value=w.specularMap),w.alphaTest>0&&(_.alphaTest.value=w.alphaTest);const b=e.get(w).envMap;if(b&&(_.envMap.value=b,_.flipEnvMap.value=b.isCubeTexture&&!1===b.isRenderTargetTexture?-1:1,_.reflectivity.value=w.reflectivity,_.ior.value=w.ior,_.refractionRatio.value=w.refractionRatio),w.lightMap){_.lightMap.value=w.lightMap;const E=!0!==n.physicallyCorrectLights?Math.PI:1;_.lightMapIntensity.value=w.lightMapIntensity*E}let x,M;w.aoMap&&(_.aoMap.value=w.aoMap,_.aoMapIntensity.value=w.aoMapIntensity),w.map?x=w.map:w.specularMap?x=w.specularMap:w.displacementMap?x=w.displacementMap:w.normalMap?x=w.normalMap:w.bumpMap?x=w.bumpMap:w.roughnessMap?x=w.roughnessMap:w.metalnessMap?x=w.metalnessMap:w.alphaMap?x=w.alphaMap:w.emissiveMap?x=w.emissiveMap:w.clearcoatMap?x=w.clearcoatMap:w.clearcoatNormalMap?x=w.clearcoatNormalMap:w.clearcoatRoughnessMap?x=w.clearcoatRoughnessMap:w.iridescenceMap?x=w.iridescenceMap:w.iridescenceThicknessMap?x=w.iridescenceThicknessMap:w.specularIntensityMap?x=w.specularIntensityMap:w.specularColorMap?x=w.specularColorMap:w.transmissionMap?x=w.transmissionMap:w.thicknessMap?x=w.thicknessMap:w.sheenColorMap?x=w.sheenColorMap:w.sheenRoughnessMap&&(x=w.sheenRoughnessMap),void 0!==x&&(x.isWebGLRenderTarget&&(x=x.texture),!0===x.matrixAutoUpdate&&x.updateMatrix(),_.uvTransform.value.copy(x.matrix)),w.aoMap?M=w.aoMap:w.lightMap&&(M=w.lightMap),void 0!==M&&(M.isWebGLRenderTarget&&(M=M.texture),!0===M.matrixAutoUpdate&&M.updateMatrix(),_.uv2Transform.value.copy(M.matrix))}return{refreshFogUniforms:function t(_,w){_.fogColor.value.copy(w.color),w.isFog?(_.fogNear.value=w.near,_.fogFar.value=w.far):w.isFogExp2&&(_.fogDensity.value=w.density)},refreshMaterialUniforms:function i(_,w,b,x,M){w.isMeshBasicMaterial||w.isMeshLambertMaterial?r(_,w):w.isMeshToonMaterial?(r(_,w),function u(_,w){w.gradientMap&&(_.gradientMap.value=w.gradientMap)}(_,w)):w.isMeshPhongMaterial?(r(_,w),function l(_,w){_.specular.value.copy(w.specular),_.shininess.value=Math.max(w.shininess,1e-4)}(_,w)):w.isMeshStandardMaterial?(r(_,w),function f(_,w){_.roughness.value=w.roughness,_.metalness.value=w.metalness,w.roughnessMap&&(_.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(_.metalnessMap.value=w.metalnessMap),e.get(w).envMap&&(_.envMapIntensity.value=w.envMapIntensity)}(_,w),w.isMeshPhysicalMaterial&&function p(_,w,b){_.ior.value=w.ior,w.sheen>0&&(_.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),_.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(_.sheenColorMap.value=w.sheenColorMap),w.sheenRoughnessMap&&(_.sheenRoughnessMap.value=w.sheenRoughnessMap)),w.clearcoat>0&&(_.clearcoat.value=w.clearcoat,_.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(_.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(_.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),_.clearcoatNormalMap.value=w.clearcoatNormalMap,1===w.side&&_.clearcoatNormalScale.value.negate())),w.iridescence>0&&(_.iridescence.value=w.iridescence,_.iridescenceIOR.value=w.iridescenceIOR,_.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(_.iridescenceMap.value=w.iridescenceMap),w.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=w.iridescenceThicknessMap)),w.transmission>0&&(_.transmission.value=w.transmission,_.transmissionSamplerMap.value=b.texture,_.transmissionSamplerSize.value.set(b.width,b.height),w.transmissionMap&&(_.transmissionMap.value=w.transmissionMap),_.thickness.value=w.thickness,w.thicknessMap&&(_.thicknessMap.value=w.thicknessMap),_.attenuationDistance.value=w.attenuationDistance,_.attenuationColor.value.copy(w.attenuationColor)),_.specularIntensity.value=w.specularIntensity,_.specularColor.value.copy(w.specularColor),w.specularIntensityMap&&(_.specularIntensityMap.value=w.specularIntensityMap),w.specularColorMap&&(_.specularColorMap.value=w.specularColorMap)}(_,w,M)):w.isMeshMatcapMaterial?(r(_,w),function g(_,w){w.matcap&&(_.matcap.value=w.matcap)}(_,w)):w.isMeshDepthMaterial?r(_,w):w.isMeshDistanceMaterial?(r(_,w),function v(_,w){_.referencePosition.value.copy(w.referencePosition),_.nearDistance.value=w.nearDistance,_.farDistance.value=w.farDistance}(_,w)):w.isMeshNormalMaterial?r(_,w):w.isLineBasicMaterial?(function s(_,w){_.diffuse.value.copy(w.color),_.opacity.value=w.opacity}(_,w),w.isLineDashedMaterial&&function o(_,w){_.dashSize.value=w.dashSize,_.totalSize.value=w.dashSize+w.gapSize,_.scale.value=w.scale}(_,w)):w.isPointsMaterial?function a(_,w,b,x){let M;_.diffuse.value.copy(w.color),_.opacity.value=w.opacity,_.size.value=w.size*b,_.scale.value=.5*x,w.map&&(_.map.value=w.map),w.alphaMap&&(_.alphaMap.value=w.alphaMap),w.alphaTest>0&&(_.alphaTest.value=w.alphaTest),w.map?M=w.map:w.alphaMap&&(M=w.alphaMap),void 0!==M&&(!0===M.matrixAutoUpdate&&M.updateMatrix(),_.uvTransform.value.copy(M.matrix))}(_,w,b,x):w.isSpriteMaterial?function c(_,w){let b;_.diffuse.value.copy(w.color),_.opacity.value=w.opacity,_.rotation.value=w.rotation,w.map&&(_.map.value=w.map),w.alphaMap&&(_.alphaMap.value=w.alphaMap),w.alphaTest>0&&(_.alphaTest.value=w.alphaTest),w.map?b=w.map:w.alphaMap&&(b=w.alphaMap),void 0!==b&&(!0===b.matrixAutoUpdate&&b.updateMatrix(),_.uvTransform.value.copy(b.matrix))}(_,w):w.isShadowMaterial?(_.color.value.copy(w.color),_.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}}}function yVe(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function g(x,M,E){const I=x.value;if(void 0===E[M])return E[M]="number"==typeof I?I:I.clone(),!0;if("number"==typeof I){if(E[M]!==I)return E[M]=I,!0}else{const k=E[M];if(!1===k.equals(I))return k.copy(I),!0}return!1}function _(x){const M=x.value,E={boundary:0,storage:0};return"number"==typeof M?(E.boundary=4,E.storage=4):M.isVector2?(E.boundary=8,E.storage=8):M.isVector3||M.isColor?(E.boundary=16,E.storage=12):M.isVector4?(E.boundary=16,E.storage=16):M.isMatrix3?(E.boundary=48,E.storage=48):M.isMatrix4?(E.boundary=64,E.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),E}function w(x){const M=x.target;M.removeEventListener("dispose",w);const E=o.indexOf(M.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}return{bind:function c(x,M){i.uniformBlockBinding(x,M.program)},update:function l(x,M){let E=r[x.id];void 0===E&&(function v(x){const M=x.uniforms;let E=0;let k=0;for(let O=0,R=M.length;O<R;O++){const P=M[O],Q=_(P);if(P.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=E,O>0){k=E%16;const J=16-k;0!==k&&J-Q.boundary<0&&(E+=16-k,P.__offset=E)}E+=Q.storage}k=E%16,k>0&&(E+=16-k),x.__size=E,x.__cache={}}(x),E=function u(x){const M=function f(){for(let x=0;x<a;x++)if(-1===o.indexOf(x))return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();x.__bindingPointIndex=M;const E=n.createBuffer(),I=x.__size,k=x.usage;return n.bindBuffer(35345,E),n.bufferData(35345,I,k),n.bindBuffer(35345,null),n.bindBufferBase(35345,M,E),E}(x),r[x.id]=E,x.addEventListener("dispose",w)),i.updateUBOMapping(x,M.program);const k=e.render.frame;s[x.id]!==k&&(function p(x){const E=x.uniforms,I=x.__cache;n.bindBuffer(35345,r[x.id]);for(let k=0,O=E.length;k<O;k++){const R=E[k];if(!0===g(R,k,I)){const P=R.value,Q=R.__offset;"number"==typeof P?(R.__data[0]=P,n.bufferSubData(35345,Q,R.__data)):(R.value.isMatrix3?(R.__data[0]=R.value.elements[0],R.__data[1]=R.value.elements[1],R.__data[2]=R.value.elements[2],R.__data[3]=R.value.elements[0],R.__data[4]=R.value.elements[3],R.__data[5]=R.value.elements[4],R.__data[6]=R.value.elements[5],R.__data[7]=R.value.elements[0],R.__data[8]=R.value.elements[6],R.__data[9]=R.value.elements[7],R.__data[10]=R.value.elements[8],R.__data[11]=R.value.elements[0]):P.toArray(R.__data),n.bufferSubData(35345,Q,R.__data))}}n.bindBuffer(35345,null)}(x),s[x.id]=k)},dispose:function b(){for(const x in r)n.deleteBuffer(r[x]);o=[],r={},s={}}}}function uie(n={}){this.isWebGLRenderer=!0;const e=void 0!==n.canvas?n.canvas:function wVe(){const n=r_("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0===n.depth||n.depth,r=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,c=void 0!==n.powerPreference?n.powerPreference:"default",l=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let f=null,p=null;const g=[],v=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=zf,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const _=this;let w=!1,b=0,x=0,M=null,E=-1,I=null;const k=new Wo,O=new Wo;let R=null,P=e.width,Q=e.height,J=1,Ce=null,Ae=null;const G=new Wo(0,0,P,Q),ue=new Wo(0,0,P,Q);let X=!1;const le=new yP;let de=!1,pe=!1,Fe=null;const st=new Zi,ze=new Yt,_t=new be,pt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function kt(){return null===M?J:1}let un,_n,an,bi,Vt,Pt,wn,ei,Tn,Cn,$n,yi,mr,Ss,Ge,Me,It,yn,Mn,kn,Mi,Pe,nn,dn,wt=t;function Xt(Ne,Lt){for(let Zt=0;Zt<Ne.length;Zt++){const rn=e.getContext(Ne[Zt],Lt);if(null!==rn)return rn}return null}try{const Ne={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:c,failIfMajorPerformanceCaveat:l};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r144"),e.addEventListener("webglcontextlost",ur,!1),e.addEventListener("webglcontextrestored",Xr,!1),e.addEventListener("webglcontextcreationerror",ia,!1),null===wt){const Lt=["webgl2","webgl","experimental-webgl"];if(!0===_.isWebGL1Renderer&&Lt.shift(),wt=Xt(Lt,Ne),null===wt)throw Xt(Lt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===wt.getShaderPrecisionFormat&&(wt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ne){throw console.error("THREE.WebGLRenderer: "+Ne.message),Ne}function Yn(){un=new FOe(wt),_n=new LOe(wt,un,n),un.init(_n),Pe=new gVe(wt,un,_n),an=new dVe(wt,un,_n),bi=new zOe,Vt=new tVe,Pt=new pVe(wt,un,an,Vt,_n,Pe,bi),wn=new IOe(_),ei=new kOe(_),Tn=new EHe(wt,_n),nn=new EOe(wt,un,Tn,_n),Cn=new POe(wt,Tn,bi,nn),$n=new UOe(wt,Cn,Tn,bi),Mn=new VOe(wt,_n,Pt),Me=new DOe(Vt),yi=new eVe(_,wn,ei,un,_n,nn,Me),mr=new _Ve(_,Vt),Ss=new iVe,Ge=new lVe(un,_n),yn=new SOe(_,wn,an,$n,u,o),It=new fVe(_,$n,_n),dn=new yVe(wt,bi,_n,an),kn=new TOe(wt,un,bi,_n),Mi=new HOe(wt,un,bi,_n),bi.programs=yi.programs,_.capabilities=_n,_.extensions=un,_.properties=Vt,_.renderLists=Ss,_.shadowMap=It,_.state=an,_.info=bi}Yn();const Zn=new vVe(_,wt);function ur(Ne){Ne.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Xr(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const Ne=bi.autoReset,Lt=It.enabled,Zt=It.autoUpdate,Mt=It.needsUpdate,rn=It.type;Yn(),bi.autoReset=Ne,It.enabled=Lt,It.autoUpdate=Zt,It.needsUpdate=Mt,It.type=rn}function ia(Ne){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ne.statusMessage)}function ut(Ne){const Lt=Ne.target;Lt.removeEventListener("dispose",ut),function Fn(Ne){(function Qt(Ne){const Lt=Vt.get(Ne).programs;void 0!==Lt&&(Lt.forEach(function(Zt){yi.releaseProgram(Zt)}),Ne.isShaderMaterial&&yi.releaseShaderCache(Ne))})(Ne),Vt.remove(Ne)}(Lt)}this.xr=Zn,this.getContext=function(){return wt},this.getContextAttributes=function(){return wt.getContextAttributes()},this.forceContextLoss=function(){const Ne=un.get("WEBGL_lose_context");Ne&&Ne.loseContext()},this.forceContextRestore=function(){const Ne=un.get("WEBGL_lose_context");Ne&&Ne.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(Ne){void 0!==Ne&&(J=Ne,this.setSize(P,Q,!1))},this.getSize=function(Ne){return Ne.set(P,Q)},this.setSize=function(Ne,Lt,Zt){Zn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(P=Ne,Q=Lt,e.width=Math.floor(Ne*J),e.height=Math.floor(Lt*J),!1!==Zt&&(e.style.width=Ne+"px",e.style.height=Lt+"px"),this.setViewport(0,0,Ne,Lt))},this.getDrawingBufferSize=function(Ne){return Ne.set(P*J,Q*J).floor()},this.setDrawingBufferSize=function(Ne,Lt,Zt){P=Ne,Q=Lt,J=Zt,e.width=Math.floor(Ne*Zt),e.height=Math.floor(Lt*Zt),this.setViewport(0,0,Ne,Lt)},this.getCurrentViewport=function(Ne){return Ne.copy(k)},this.getViewport=function(Ne){return Ne.copy(G)},this.setViewport=function(Ne,Lt,Zt,Mt){Ne.isVector4?G.set(Ne.x,Ne.y,Ne.z,Ne.w):G.set(Ne,Lt,Zt,Mt),an.viewport(k.copy(G).multiplyScalar(J).floor())},this.getScissor=function(Ne){return Ne.copy(ue)},this.setScissor=function(Ne,Lt,Zt,Mt){Ne.isVector4?ue.set(Ne.x,Ne.y,Ne.z,Ne.w):ue.set(Ne,Lt,Zt,Mt),an.scissor(O.copy(ue).multiplyScalar(J).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(Ne){an.setScissorTest(X=Ne)},this.setOpaqueSort=function(Ne){Ce=Ne},this.setTransparentSort=function(Ne){Ae=Ne},this.getClearColor=function(Ne){return Ne.copy(yn.getClearColor())},this.setClearColor=function(){yn.setClearColor.apply(yn,arguments)},this.getClearAlpha=function(){return yn.getClearAlpha()},this.setClearAlpha=function(){yn.setClearAlpha.apply(yn,arguments)},this.clear=function(Ne=!0,Lt=!0,Zt=!0){let Mt=0;Ne&&(Mt|=16384),Lt&&(Mt|=256),Zt&&(Mt|=1024),wt.clear(Mt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ur,!1),e.removeEventListener("webglcontextrestored",Xr,!1),e.removeEventListener("webglcontextcreationerror",ia,!1),Ss.dispose(),Ge.dispose(),Vt.dispose(),wn.dispose(),ei.dispose(),$n.dispose(),nn.dispose(),dn.dispose(),yi.dispose(),Zn.dispose(),Zn.removeEventListener("sessionstart",Fs),Zn.removeEventListener("sessionend",Ec),Fe&&(Fe.dispose(),Fe=null),A1.stop()},this.renderBufferDirect=function(Ne,Lt,Zt,Mt,rn,ar){null===Lt&&(Lt=pt);const Fr=rn.isMesh&&rn.matrixWorld.determinant()<0,Ps=function Bl(Ne,Lt,Zt,Mt,rn){!0!==Lt.isScene&&(Lt=pt),Pt.resetTextureUnits();const ar=Lt.fog,Ps=null===M?_.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:zf,zr=(Mt.isMeshStandardMaterial?ei:wn).get(Mt.envMap||(Mt.isMeshStandardMaterial?Lt.environment:null)),sa=!0===Mt.vertexColors&&!!Zt.attributes.color&&4===Zt.attributes.color.itemSize,Mo=!!Mt.normalMap&&!!Zt.attributes.tangent,So=!!Zt.morphAttributes.position,lc=!!Zt.morphAttributes.normal,eg=!!Zt.morphAttributes.color,PA=Mt.toneMapped?_.toneMapping:0,HA=Zt.morphAttributes.position||Zt.morphAttributes.normal||Zt.morphAttributes.color,J0=void 0!==HA?HA.length:0,Ko=Vt.get(Mt),zA=p.state.lights;!0!==de||!0!==pe&&Ne===I||Me.setState(Mt,Ne,Ne===I&&Mt.id===E);let Yc=!1;Mt.version===Ko.__version?(Ko.needsLights&&Ko.lightsStateVersion!==zA.state.version||Ko.outputEncoding!==Ps||rn.isInstancedMesh&&!1===Ko.instancing||!rn.isInstancedMesh&&!0===Ko.instancing||rn.isSkinnedMesh&&!1===Ko.skinning||!rn.isSkinnedMesh&&!0===Ko.skinning||Ko.envMap!==zr||!0===Mt.fog&&Ko.fog!==ar||void 0!==Ko.numClippingPlanes&&(Ko.numClippingPlanes!==Me.numPlanes||Ko.numIntersection!==Me.numIntersection)||Ko.vertexAlphas!==sa||Ko.vertexTangents!==Mo||Ko.morphTargets!==So||Ko.morphNormals!==lc||Ko.morphColors!==eg||Ko.toneMapping!==PA||!0===_n.isWebGL2&&Ko.morphTargetsCount!==J0)&&(Yc=!0):(Yc=!0,Ko.__version=Mt.version);let z4=Ko.currentProgram;!0===Yc&&(z4=Ld(Mt,Lt,rn));let b8=!1,Bw=!1,AQ=!1;const b3=z4.getUniforms(),tg=Ko.uniforms;if(an.useProgram(z4.program)&&(b8=!0,Bw=!0,AQ=!0),Mt.id!==E&&(E=Mt.id,Bw=!0),b8||I!==Ne){if(b3.setValue(wt,"projectionMatrix",Ne.projectionMatrix),_n.logarithmicDepthBuffer&&b3.setValue(wt,"logDepthBufFC",2/(Math.log(Ne.far+1)/Math.LN2)),I!==Ne&&(I=Ne,Bw=!0,AQ=!0),Mt.isShaderMaterial||Mt.isMeshPhongMaterial||Mt.isMeshToonMaterial||Mt.isMeshStandardMaterial||Mt.envMap){const Ju=b3.map.cameraPosition;void 0!==Ju&&Ju.setValue(wt,_t.setFromMatrixPosition(Ne.matrixWorld))}(Mt.isMeshPhongMaterial||Mt.isMeshToonMaterial||Mt.isMeshLambertMaterial||Mt.isMeshBasicMaterial||Mt.isMeshStandardMaterial||Mt.isShaderMaterial)&&b3.setValue(wt,"isOrthographic",!0===Ne.isOrthographicCamera),(Mt.isMeshPhongMaterial||Mt.isMeshToonMaterial||Mt.isMeshLambertMaterial||Mt.isMeshBasicMaterial||Mt.isMeshStandardMaterial||Mt.isShaderMaterial||Mt.isShadowMaterial||rn.isSkinnedMesh)&&b3.setValue(wt,"viewMatrix",Ne.matrixWorldInverse)}if(rn.isSkinnedMesh){b3.setOptional(wt,rn,"bindMatrix"),b3.setOptional(wt,rn,"bindMatrixInverse");const Ju=rn.skeleton;Ju&&(_n.floatVertexTextures?(null===Ju.boneTexture&&Ju.computeBoneTexture(),b3.setValue(wt,"boneTexture",Ju.boneTexture,Pt),b3.setValue(wt,"boneTextureSize",Ju.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const vQ=Zt.morphAttributes;if((void 0!==vQ.position||void 0!==vQ.normal||void 0!==vQ.color&&!0===_n.isWebGL2)&&Mn.update(rn,Zt,Mt,z4),(Bw||Ko.receiveShadow!==rn.receiveShadow)&&(Ko.receiveShadow=rn.receiveShadow,b3.setValue(wt,"receiveShadow",rn.receiveShadow)),Mt.isMeshGouraudMaterial&&null!==Mt.envMap&&(tg.envMap.value=zr,tg.flipEnvMap.value=zr.isCubeTexture&&!1===zr.isRenderTargetTexture?-1:1),Bw&&(b3.setValue(wt,"toneMappingExposure",_.toneMappingExposure),Ko.needsLights&&function au(Ne,Lt){Ne.ambientLightColor.needsUpdate=Lt,Ne.lightProbe.needsUpdate=Lt,Ne.directionalLights.needsUpdate=Lt,Ne.directionalLightShadows.needsUpdate=Lt,Ne.pointLights.needsUpdate=Lt,Ne.pointLightShadows.needsUpdate=Lt,Ne.spotLights.needsUpdate=Lt,Ne.spotLightShadows.needsUpdate=Lt,Ne.rectAreaLights.needsUpdate=Lt,Ne.hemisphereLights.needsUpdate=Lt}(tg,AQ),ar&&!0===Mt.fog&&mr.refreshFogUniforms(tg,ar),mr.refreshMaterialUniforms(tg,Mt,J,Q,Fe),WM.upload(wt,Ko.uniformsList,tg,Pt)),Mt.isShaderMaterial&&!0===Mt.uniformsNeedUpdate&&(WM.upload(wt,Ko.uniformsList,tg,Pt),Mt.uniformsNeedUpdate=!1),Mt.isSpriteMaterial&&b3.setValue(wt,"center",rn.center),b3.setValue(wt,"modelViewMatrix",rn.modelViewMatrix),b3.setValue(wt,"normalMatrix",rn.normalMatrix),b3.setValue(wt,"modelMatrix",rn.matrixWorld),Mt.isShaderMaterial||Mt.isRawShaderMaterial){const Ju=Mt.uniformsGroups;for(let _Q=0,rVt=Ju.length;_Q<rVt;_Q++)if(_n.isWebGL2){const oge=Ju[_Q];dn.update(oge,z4),dn.bind(oge,z4)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return z4}(Ne,Lt,Zt,Mt,rn);an.setMaterial(Mt,Fr);let zr=Zt.index;const sa=Zt.attributes.position;if(null===zr){if(void 0===sa||0===sa.count)return}else if(0===zr.count)return;let Mo=1;!0===Mt.wireframe&&(zr=Cn.getWireframeAttribute(Zt),Mo=2),nn.setup(rn,Mt,Ps,Zt,zr);let So,lc=kn;null!==zr&&(So=Tn.get(zr),lc=Mi,lc.setIndex(So));const eg=null!==zr?zr.count:sa.count,PA=Zt.drawRange.start*Mo,HA=Zt.drawRange.count*Mo,J0=null!==ar?ar.start*Mo:0,Ko=null!==ar?ar.count*Mo:1/0,zA=Math.max(PA,J0),Yc=Math.min(eg,PA+HA,J0+Ko)-1,z4=Math.max(0,Yc-zA+1);if(0!==z4){if(rn.isMesh)!0===Mt.wireframe?(an.setLineWidth(Mt.wireframeLinewidth*kt()),lc.setMode(1)):lc.setMode(4);else if(rn.isLine){let b8=Mt.linewidth;void 0===b8&&(b8=1),an.setLineWidth(b8*kt()),lc.setMode(rn.isLineSegments?1:rn.isLineLoop?2:3)}else rn.isPoints?lc.setMode(0):rn.isSprite&&lc.setMode(4);if(rn.isInstancedMesh)lc.renderInstances(zA,z4,rn.count);else if(Zt.isInstancedBufferGeometry){const b8=Math.min(Zt.instanceCount,Zt._maxInstanceCount);lc.renderInstances(zA,z4,b8)}else lc.render(zA,z4)}},this.compile=function(Ne,Lt){function Zt(Mt,rn,ar){!0===Mt.transparent&&2===Mt.side?(Mt.side=1,Mt.needsUpdate=!0,Ld(Mt,rn,ar),Mt.side=0,Mt.needsUpdate=!0,Ld(Mt,rn,ar),Mt.side=2):Ld(Mt,rn,ar)}p=Ge.get(Ne),p.init(),v.push(p),Ne.traverseVisible(function(Mt){Mt.isLight&&Mt.layers.test(Lt.layers)&&(p.pushLight(Mt),Mt.castShadow&&p.pushShadow(Mt))}),p.setupLights(_.physicallyCorrectLights),Ne.traverse(function(Mt){const rn=Mt.material;if(rn)if(Array.isArray(rn))for(let ar=0;ar<rn.length;ar++)Zt(rn[ar],Ne,Mt);else Zt(rn,Ne,Mt)}),v.pop(),p=null};let Wn=null;function Fs(){A1.stop()}function Ec(){A1.start()}const A1=new Fne;function oc(Ne,Lt,Zt,Mt){if(!1===Ne.visible)return;if(Ne.layers.test(Lt.layers))if(Ne.isGroup)Zt=Ne.renderOrder;else if(Ne.isLOD)!0===Ne.autoUpdate&&Ne.update(Lt);else if(Ne.isLight)p.pushLight(Ne),Ne.castShadow&&p.pushShadow(Ne);else if(Ne.isSprite){if(!Ne.frustumCulled||le.intersectsSprite(Ne)){Mt&&_t.setFromMatrixPosition(Ne.matrixWorld).applyMatrix4(st);const Fr=$n.update(Ne),Ps=Ne.material;Ps.visible&&f.push(Ne,Fr,Ps,Zt,_t.z,null)}}else if((Ne.isMesh||Ne.isLine||Ne.isPoints)&&(Ne.isSkinnedMesh&&Ne.skeleton.frame!==bi.render.frame&&(Ne.skeleton.update(),Ne.skeleton.frame=bi.render.frame),!Ne.frustumCulled||le.intersectsObject(Ne))){Mt&&_t.setFromMatrixPosition(Ne.matrixWorld).applyMatrix4(st);const Fr=$n.update(Ne),Ps=Ne.material;if(Array.isArray(Ps)){const zr=Fr.groups;for(let sa=0,Mo=zr.length;sa<Mo;sa++){const So=zr[sa],lc=Ps[So.materialIndex];lc&&lc.visible&&f.push(Ne,Fr,lc,Zt,_t.z,So)}}else Ps.visible&&f.push(Ne,Fr,Ps,Zt,_t.z,null)}const ar=Ne.children;for(let Fr=0,Ps=ar.length;Fr<Ps;Fr++)oc(ar[Fr],Lt,Zt,Mt)}function ra(Ne,Lt,Zt,Mt){const rn=Ne.opaque,ar=Ne.transmissive,Fr=Ne.transparent;p.setupLightsView(Zt),ar.length>0&&function ac(Ne,Lt,Zt){const Mt=_n.isWebGL2;null===Fe&&(Fe=new w4(1,1,{generateMipmaps:!0,type:un.has("EXT_color_buffer_half_float")?M0:Bp,minFilter:C6,samples:Mt&&!0===s?4:0})),_.getDrawingBufferSize(ze),Mt?Fe.setSize(ze.x,ze.y):Fe.setSize(_M(ze.x),_M(ze.y));const rn=_.getRenderTarget();_.setRenderTarget(Fe),_.clear();const ar=_.toneMapping;_.toneMapping=0,cc(Ne,Lt,Zt),_.toneMapping=ar,Pt.updateMultisampleRenderTarget(Fe),Pt.updateRenderTargetMipmap(Fe),_.setRenderTarget(rn)}(rn,Lt,Zt),Mt&&an.viewport(k.copy(Mt)),rn.length>0&&cc(rn,Lt,Zt),ar.length>0&&cc(ar,Lt,Zt),Fr.length>0&&cc(Fr,Lt,Zt),an.buffers.depth.setTest(!0),an.buffers.depth.setMask(!0),an.buffers.color.setMask(!0),an.setPolygonOffset(!1)}function cc(Ne,Lt,Zt){const Mt=!0===Lt.isScene?Lt.overrideMaterial:null;for(let rn=0,ar=Ne.length;rn<ar;rn++){const Fr=Ne[rn],Ps=Fr.object,zr=Fr.geometry,sa=null===Mt?Fr.material:Mt,Mo=Fr.group;Ps.layers.test(Zt.layers)&&w3(Ps,Lt,Zt,zr,sa,Mo)}}function w3(Ne,Lt,Zt,Mt,rn,ar){Ne.onBeforeRender(_,Lt,Zt,Mt,rn,ar),Ne.modelViewMatrix.multiplyMatrices(Zt.matrixWorldInverse,Ne.matrixWorld),Ne.normalMatrix.getNormalMatrix(Ne.modelViewMatrix),rn.onBeforeRender(_,Lt,Zt,Mt,Ne,ar),!0===rn.transparent&&2===rn.side?(rn.side=1,rn.needsUpdate=!0,_.renderBufferDirect(Zt,Lt,Mt,rn,Ne,ar),rn.side=0,rn.needsUpdate=!0,_.renderBufferDirect(Zt,Lt,Mt,rn,Ne,ar),rn.side=2):_.renderBufferDirect(Zt,Lt,Mt,rn,Ne,ar),Ne.onAfterRender(_,Lt,Zt,Mt,rn,ar)}function Ld(Ne,Lt,Zt){!0!==Lt.isScene&&(Lt=pt);const Mt=Vt.get(Ne),rn=p.state.lights,Fr=rn.state.version,Ps=yi.getParameters(Ne,rn.state,p.state.shadowsArray,Lt,Zt),zr=yi.getProgramCacheKey(Ps);let sa=Mt.programs;Mt.environment=Ne.isMeshStandardMaterial?Lt.environment:null,Mt.fog=Lt.fog,Mt.envMap=(Ne.isMeshStandardMaterial?ei:wn).get(Ne.envMap||Mt.environment),void 0===sa&&(Ne.addEventListener("dispose",ut),sa=new Map,Mt.programs=sa);let Mo=sa.get(zr);if(void 0!==Mo){if(Mt.currentProgram===Mo&&Mt.lightsStateVersion===Fr)return J5(Ne,Ps),Mo}else Ps.uniforms=yi.getUniforms(Ne),Ne.onBuild(Zt,Ps,_),Ne.onBeforeCompile(Ps,_),Mo=yi.acquireProgram(Ps,zr),sa.set(zr,Mo),Mt.uniforms=Ps.uniforms;const So=Mt.uniforms;(!Ne.isShaderMaterial&&!Ne.isRawShaderMaterial||!0===Ne.clipping)&&(So.clippingPlanes=Me.uniform),J5(Ne,Ps),Mt.needsLights=function Vh(Ne){return Ne.isMeshLambertMaterial||Ne.isMeshToonMaterial||Ne.isMeshPhongMaterial||Ne.isMeshStandardMaterial||Ne.isShadowMaterial||Ne.isShaderMaterial&&!0===Ne.lights}(Ne),Mt.lightsStateVersion=Fr,Mt.needsLights&&(So.ambientLightColor.value=rn.state.ambient,So.lightProbe.value=rn.state.probe,So.directionalLights.value=rn.state.directional,So.directionalLightShadows.value=rn.state.directionalShadow,So.spotLights.value=rn.state.spot,So.spotLightShadows.value=rn.state.spotShadow,So.rectAreaLights.value=rn.state.rectArea,So.ltc_1.value=rn.state.rectAreaLTC1,So.ltc_2.value=rn.state.rectAreaLTC2,So.pointLights.value=rn.state.point,So.pointLightShadows.value=rn.state.pointShadow,So.hemisphereLights.value=rn.state.hemi,So.directionalShadowMap.value=rn.state.directionalShadowMap,So.directionalShadowMatrix.value=rn.state.directionalShadowMatrix,So.spotShadowMap.value=rn.state.spotShadowMap,So.spotLightMatrix.value=rn.state.spotLightMatrix,So.spotLightMap.value=rn.state.spotLightMap,So.pointShadowMap.value=rn.state.pointShadowMap,So.pointShadowMatrix.value=rn.state.pointShadowMatrix);const lc=Mo.getUniforms(),eg=WM.seqWithValue(lc.seq,So);return Mt.currentProgram=Mo,Mt.uniformsList=eg,Mo}function J5(Ne,Lt){const Zt=Vt.get(Ne);Zt.outputEncoding=Lt.outputEncoding,Zt.instancing=Lt.instancing,Zt.skinning=Lt.skinning,Zt.morphTargets=Lt.morphTargets,Zt.morphNormals=Lt.morphNormals,Zt.morphColors=Lt.morphColors,Zt.morphTargetsCount=Lt.morphTargetsCount,Zt.numClippingPlanes=Lt.numClippingPlanes,Zt.numIntersection=Lt.numClipIntersection,Zt.vertexAlphas=Lt.vertexAlphas,Zt.vertexTangents=Lt.vertexTangents,Zt.toneMapping=Lt.toneMapping}A1.setAnimationLoop(function Un(Ne){Wn&&Wn(Ne)}),typeof self<"u"&&A1.setContext(self),this.setAnimationLoop=function(Ne){Wn=Ne,Zn.setAnimationLoop(Ne),null===Ne?A1.stop():A1.start()},Zn.addEventListener("sessionstart",Fs),Zn.addEventListener("sessionend",Ec),this.render=function(Ne,Lt){if(void 0===Lt||!0===Lt.isCamera){if(!0!==w){if(!0===Ne.matrixWorldAutoUpdate&&Ne.updateMatrixWorld(),null===Lt.parent&&!0===Lt.matrixWorldAutoUpdate&&Lt.updateMatrixWorld(),!0===Zn.enabled&&!0===Zn.isPresenting&&(!0===Zn.cameraAutoUpdate&&Zn.updateCamera(Lt),Lt=Zn.getCamera()),!0===Ne.isScene&&Ne.onBeforeRender(_,Ne,Lt,M),p=Ge.get(Ne,v.length),p.init(),v.push(p),st.multiplyMatrices(Lt.projectionMatrix,Lt.matrixWorldInverse),le.setFromProjectionMatrix(st),pe=this.localClippingEnabled,de=Me.init(this.clippingPlanes,pe,Lt),f=Ss.get(Ne,g.length),f.init(),g.push(f),oc(Ne,Lt,0,_.sortObjects),f.finish(),!0===_.sortObjects&&f.sort(Ce,Ae),!0===de&&Me.beginShadows(),It.render(p.state.shadowsArray,Ne,Lt),!0===de&&Me.endShadows(),!0===this.info.autoReset&&this.info.reset(),yn.render(f,Ne),p.setupLights(_.physicallyCorrectLights),Lt.isArrayCamera){const Mt=Lt.cameras;for(let rn=0,ar=Mt.length;rn<ar;rn++){const Fr=Mt[rn];ra(f,Ne,Fr,Fr.viewport)}}else ra(f,Ne,Lt);null!==M&&(Pt.updateMultisampleRenderTarget(M),Pt.updateRenderTargetMipmap(M)),!0===Ne.isScene&&Ne.onAfterRender(_,Ne,Lt),nn.resetDefaultState(),E=-1,I=null,v.pop(),p=v.length>0?v[v.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(Ne,Lt,Zt){Vt.get(Ne.texture).__webglTexture=Lt,Vt.get(Ne.depthTexture).__webglTexture=Zt;const Mt=Vt.get(Ne);Mt.__hasExternalTextures=!0,Mt.__hasExternalTextures&&(Mt.__autoAllocateDepthBuffer=void 0===Zt,Mt.__autoAllocateDepthBuffer||!0===un.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Mt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ne,Lt){const Zt=Vt.get(Ne);Zt.__webglFramebuffer=Lt,Zt.__useDefaultFramebuffer=void 0===Lt},this.setRenderTarget=function(Ne,Lt=0,Zt=0){M=Ne,b=Lt,x=Zt;let Mt=!0;if(Ne){const zr=Vt.get(Ne);void 0!==zr.__useDefaultFramebuffer?(an.bindFramebuffer(36160,null),Mt=!1):void 0===zr.__webglFramebuffer?Pt.setupRenderTarget(Ne):zr.__hasExternalTextures&&Pt.rebindTextures(Ne,Vt.get(Ne.texture).__webglTexture,Vt.get(Ne.depthTexture).__webglTexture)}let rn=null,ar=!1,Fr=!1;if(Ne){const zr=Ne.texture;(zr.isData3DTexture||zr.isDataArrayTexture)&&(Fr=!0);const sa=Vt.get(Ne).__webglFramebuffer;Ne.isWebGLCubeRenderTarget?(rn=sa[Lt],ar=!0):rn=_n.isWebGL2&&Ne.samples>0&&!1===Pt.useMultisampledRTT(Ne)?Vt.get(Ne).__webglMultisampledFramebuffer:sa,k.copy(Ne.viewport),O.copy(Ne.scissor),R=Ne.scissorTest}else k.copy(G).multiplyScalar(J).floor(),O.copy(ue).multiplyScalar(J).floor(),R=X;if(an.bindFramebuffer(36160,rn)&&_n.drawBuffers&&Mt&&an.drawBuffers(Ne,rn),an.viewport(k),an.scissor(O),an.setScissorTest(R),ar){const zr=Vt.get(Ne.texture);wt.framebufferTexture2D(36160,36064,34069+Lt,zr.__webglTexture,Zt)}else if(Fr){const zr=Vt.get(Ne.texture);wt.framebufferTextureLayer(36160,36064,zr.__webglTexture,Zt||0,Lt||0)}E=-1},this.readRenderTargetPixels=function(Ne,Lt,Zt,Mt,rn,ar,Fr){if(!Ne||!Ne.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ps=Vt.get(Ne).__webglFramebuffer;if(Ne.isWebGLCubeRenderTarget&&void 0!==Fr&&(Ps=Ps[Fr]),Ps){an.bindFramebuffer(36160,Ps);try{const zr=Ne.texture,sa=zr.format,Mo=zr.type;if(sa!==gh&&Pe.convert(sa)!==wt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const So=Mo===M0&&(un.has("EXT_color_buffer_half_float")||_n.isWebGL2&&un.has("EXT_color_buffer_float"));if(!(Mo===Bp||Pe.convert(Mo)===wt.getParameter(35738)||Mo===_4&&(_n.isWebGL2||un.has("OES_texture_float")||un.has("WEBGL_color_buffer_float"))||So))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Lt>=0&&Lt<=Ne.width-Mt&&Zt>=0&&Zt<=Ne.height-rn&&wt.readPixels(Lt,Zt,Mt,rn,Pe.convert(sa),Pe.convert(Mo),ar)}finally{const zr=null!==M?Vt.get(M).__webglFramebuffer:null;an.bindFramebuffer(36160,zr)}}},this.copyFramebufferToTexture=function(Ne,Lt,Zt=0){const Mt=Math.pow(2,-Zt),rn=Math.floor(Lt.image.width*Mt),ar=Math.floor(Lt.image.height*Mt);Pt.setTexture2D(Lt,0),wt.copyTexSubImage2D(3553,Zt,0,0,Ne.x,Ne.y,rn,ar),an.unbindTexture()},this.copyTextureToTexture=function(Ne,Lt,Zt,Mt=0){const rn=Lt.image.width,ar=Lt.image.height,Fr=Pe.convert(Zt.format),Ps=Pe.convert(Zt.type);Pt.setTexture2D(Zt,0),wt.pixelStorei(37440,Zt.flipY),wt.pixelStorei(37441,Zt.premultiplyAlpha),wt.pixelStorei(3317,Zt.unpackAlignment),Lt.isDataTexture?wt.texSubImage2D(3553,Mt,Ne.x,Ne.y,rn,ar,Fr,Ps,Lt.image.data):Lt.isCompressedTexture?wt.compressedTexSubImage2D(3553,Mt,Ne.x,Ne.y,Lt.mipmaps[0].width,Lt.mipmaps[0].height,Fr,Lt.mipmaps[0].data):wt.texSubImage2D(3553,Mt,Ne.x,Ne.y,Fr,Ps,Lt.image),0===Mt&&Zt.generateMipmaps&&wt.generateMipmap(3553),an.unbindTexture()},this.copyTextureToTexture3D=function(Ne,Lt,Zt,Mt,rn=0){if(_.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ar=Ne.max.x-Ne.min.x+1,Fr=Ne.max.y-Ne.min.y+1,Ps=Ne.max.z-Ne.min.z+1,zr=Pe.convert(Mt.format),sa=Pe.convert(Mt.type);let Mo;if(Mt.isData3DTexture)Pt.setTexture3D(Mt,0),Mo=32879;else{if(!Mt.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Pt.setTexture2DArray(Mt,0),Mo=35866}wt.pixelStorei(37440,Mt.flipY),wt.pixelStorei(37441,Mt.premultiplyAlpha),wt.pixelStorei(3317,Mt.unpackAlignment);const So=wt.getParameter(3314),lc=wt.getParameter(32878),eg=wt.getParameter(3316),PA=wt.getParameter(3315),HA=wt.getParameter(32877),J0=Zt.isCompressedTexture?Zt.mipmaps[0]:Zt.image;wt.pixelStorei(3314,J0.width),wt.pixelStorei(32878,J0.height),wt.pixelStorei(3316,Ne.min.x),wt.pixelStorei(3315,Ne.min.y),wt.pixelStorei(32877,Ne.min.z),Zt.isDataTexture||Zt.isData3DTexture?wt.texSubImage3D(Mo,rn,Lt.x,Lt.y,Lt.z,ar,Fr,Ps,zr,sa,J0.data):Zt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),wt.compressedTexSubImage3D(Mo,rn,Lt.x,Lt.y,Lt.z,ar,Fr,Ps,zr,J0.data)):wt.texSubImage3D(Mo,rn,Lt.x,Lt.y,Lt.z,ar,Fr,Ps,zr,sa,J0),wt.pixelStorei(3314,So),wt.pixelStorei(32878,lc),wt.pixelStorei(3316,eg),wt.pixelStorei(3315,PA),wt.pixelStorei(32877,HA),0===rn&&Mt.generateMipmaps&&wt.generateMipmap(Mo),an.unbindTexture()},this.initTexture=function(Ne){Ne.isCubeTexture?Pt.setTextureCube(Ne,0):Ne.isData3DTexture?Pt.setTexture3D(Ne,0):Ne.isDataArrayTexture?Pt.setTexture2DArray(Ne,0):Pt.setTexture2D(Ne,0),an.unbindTexture()},this.resetState=function(){b=0,x=0,M=null,an.reset(),nn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class bVe extends uie{}).prototype.isWebGL1Renderer=!0;class jM{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new In(e),this.near=t,this.far=i}clone(){return new jM(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class hie extends el{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class LP{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Tu()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Tu()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Tu()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const l3=new be;class Xp{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)l3.fromBufferAttribute(this,t),l3.applyMatrix4(e),this.setXYZ(t,l3.x,l3.y,l3.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)l3.fromBufferAttribute(this,t),l3.applyNormalMatrix(e),this.setXYZ(t,l3.x,l3.y,l3.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)l3.fromBufferAttribute(this,t),l3.transformDirection(e),this.setXYZ(t,l3.x,l3.y,l3.z);return this}setX(e,t){return this.normalized&&(t=Ca(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ca(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ca(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ca(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Nf(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Nf(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Nf(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Nf(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ca(t,this.array),i=Ca(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ca(t,this.array),i=Ca(i,this.array),r=Ca(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ca(t,this.array),i=Ca(i,this.array),r=Ca(r,this.array),s=Ca(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new h1(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Xp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Aie=new be,vie=new Wo,_ie=new Wo,MVe=new be,yie=new Zi;class wie extends fo{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Zi,this.bindMatrixInverse=new Zi}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Wo,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;vie.fromBufferAttribute(r.attributes.skinIndex,e),_ie.fromBufferAttribute(r.attributes.skinWeight,e),Aie.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=_ie.getComponent(s);if(0!==o){const a=vie.getComponent(s);yie.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(MVe.copy(Aie).applyMatrix4(yie),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class IP extends el{constructor(){super(),this.isBone=!0,this.type="Bone"}}class rm extends y4{constructor(e=null,t=1,i=1,r,s,o,a,c,l=X1,u=X1,f,p){super(null,o,a,c,l,u,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const bie=new Zi,SVe=new Zi;class YM{constructor(e=[],t=[]){this.uuid=Tu(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Zi)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Zi;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)bie.multiplyMatrices(e[s]?e[s].matrixWorld:SVe,t[s]),bie.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new YM(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Ane(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new rm(t,e,e,gh,_4);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new IP),this.bones.push(o),this.boneInverses.push((new Zi).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class B2 extends bl{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new In(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Mie=new be,Sie=new be,Eie=new Zi,RP=new LM,JM=new jp;class k6 extends el{constructor(e=new Tr,t=new B2){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Mie.fromBufferAttribute(t,r-1),Sie.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Mie.distanceTo(Sie);e.setAttribute("lineDistance",new fi(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),JM.copy(i.boundingSphere),JM.applyMatrix4(r),JM.radius+=s,!1===e.ray.intersectsSphere(JM))return;Eie.copy(r).invert(),RP.copy(e.ray).applyMatrix4(Eie);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=new be,u=new be,f=new be,p=new be,g=this.isLineSegments?2:1,v=i.index,w=i.attributes.position;if(null!==v)for(let M=Math.max(0,o.start),E=Math.min(v.count,o.start+o.count)-1;M<E;M+=g){const I=v.getX(M),k=v.getX(M+1);if(l.fromBufferAttribute(w,I),u.fromBufferAttribute(w,k),RP.distanceSqToSegment(l,u,p,f)>c)continue;p.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(p);R<e.near||R>e.far||t.push({distance:R,point:f.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}else for(let M=Math.max(0,o.start),E=Math.min(w.count,o.start+o.count)-1;M<E;M+=g){if(l.fromBufferAttribute(w,M),u.fromBufferAttribute(w,M+1),RP.distanceSqToSegment(l,u,p,f)>c)continue;p.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(p);k<e.near||k>e.far||t.push({distance:k,point:f.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const Tie=new be,Lie=new be;class sm extends k6{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)Tie.fromBufferAttribute(t,r),Lie.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+Tie.distanceTo(Lie);e.setAttribute("lineDistance",new fi(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Die extends k6{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Yp extends bl{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new In(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Iie=new Zi,BP=new LM,eS=new jp,tS=new be;class p_ extends el{constructor(e=new Tr,t=new Yp){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),eS.copy(i.boundingSphere),eS.applyMatrix4(r),eS.radius+=s,!1===e.ray.intersectsSphere(eS))return;Iie.copy(r).invert(),BP.copy(e.ray).applyMatrix4(Iie);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,f=i.attributes.position;if(null!==l)for(let v=Math.max(0,o.start),_=Math.min(l.count,o.start+o.count);v<_;v++){const w=l.getX(v);tS.fromBufferAttribute(f,w),Rie(tS,w,c,r,e,t,this)}else for(let v=Math.max(0,o.start),_=Math.min(f.count,o.start+o.count);v<_;v++)tS.fromBufferAttribute(f,v),Rie(tS,v,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Rie(n,e,t,i,r,s,o){const a=BP.distanceSqToPoint(n);if(a<t){const c=new be;BP.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class T0{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let l,a=0,c=s-1;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=i[r]-o,l<0)a=r+1;else{if(!(l>0)){c=r;break}c=r-1}if(r=c,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new Yt:new be);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new be,r=[],s=[],o=[],a=new be,c=new Zi;for(let g=0;g<=e;g++)r[g]=this.getTangentAt(g/e,new be);s[0]=new be,o[0]=new be;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),f<=l&&(l=f,i.set(0,1,0)),p<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(yc(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(c.makeRotationAxis(a,v))}o[g].crossVectors(r[g],s[g])}if(!0===t){let g=Math.acos(yc(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let v=1;v<=e;v++)s[v].applyMatrix4(c.makeRotationAxis(r[v],g*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class kP extends T0{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const i=t||new Yt,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=c-this.aX,g=l-this.aY;c=p*u-g*f+this.aX,l=p*f+g*u+this.aY}return i.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function FP(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){r(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,f){let p=(o-s)/l-(a-s)/(l+u)+(a-o)/u,g=(a-o)/u-(c-o)/(u+f)+(c-a)/f;p*=u,g*=u,r(o,a,p,g)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}const nS=new be,PP=new FP,HP=new FP,zP=new FP;function Bie(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function g_(n,e,t,i){return function IVe(n,e){const t=1-n;return t*t*e}(n,e)+function RVe(n,e){return 2*(1-n)*n*e}(n,t)+function BVe(n,e){return n*n*e}(n,i)}function m_(n,e,t,i,r){return function kVe(n,e){const t=1-n;return t*t*t*e}(n,e)+function FVe(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function PVe(n,e){return 3*(1-n)*n*n*e}(n,i)+function HVe(n,e){return n*n*n*e}(n,r)}class kie extends T0{constructor(e=new Yt,t=new Yt,i=new Yt,r=new Yt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Yt){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(m_(e,r.x,s.x,o.x,a.x),m_(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class OP extends T0{constructor(e=new Yt,t=new Yt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Yt){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Yt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Fie extends T0{constructor(e=new Yt,t=new Yt,i=new Yt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Yt){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(g_(e,r.x,s.x,o.x),g_(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hie extends T0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Yt){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[0===o?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(Bie(a,c.x,l.x,u.x,f.x),Bie(a,c.y,l.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new Yt).fromArray(r))}return this}}var NP=Object.freeze({__proto__:null,ArcCurve:class LVe extends kP{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class DVe extends T0{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new be){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l,u,a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===c&&a===s-1&&(a=s-2,c=1),this.closed||a>0?l=r[(a-1)%s]:(nS.subVectors(r[0],r[1]).add(r[0]),l=nS);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(nS.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=nS),"centripetal"===this.curveType||"chordal"===this.curveType){const g="chordal"===this.curveType?.5:.25;let v=Math.pow(l.distanceToSquared(f),g),_=Math.pow(f.distanceToSquared(p),g),w=Math.pow(p.distanceToSquared(u),g);_<1e-4&&(_=1),v<1e-4&&(v=_),w<1e-4&&(w=_),PP.initNonuniformCatmullRom(l.x,f.x,p.x,u.x,v,_,w),HP.initNonuniformCatmullRom(l.y,f.y,p.y,u.y,v,_,w),zP.initNonuniformCatmullRom(l.z,f.z,p.z,u.z,v,_,w)}else"catmullrom"===this.curveType&&(PP.initCatmullRom(l.x,f.x,p.x,u.x,this.tension),HP.initCatmullRom(l.y,f.y,p.y,u.y,this.tension),zP.initCatmullRom(l.z,f.z,p.z,u.z,this.tension));return i.set(PP.calc(c),HP.calc(c),zP.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new be).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:kie,CubicBezierCurve3:class zVe extends T0{constructor(e=new be,t=new be,i=new be,r=new be){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new be){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(m_(e,r.x,s.x,o.x,a.x),m_(e,r.y,s.y,o.y,a.y),m_(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:kP,LineCurve:OP,LineCurve3:class OVe extends T0{constructor(e=new be,t=new be){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new be){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Fie,QuadraticBezierCurve3:class Pie extends T0{constructor(e=new be,t=new be,i=new be){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new be){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(g_(e,r.x,s.x,o.x),g_(e,r.y,s.y,o.y),g_(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:Hie});class NVe extends T0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new OP(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],c=a.getLength();return a.getPointAt(0===c?0:1-o/c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],c=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let l=0;l<c.length;l++){const u=c[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new NP[r.type]).fromJSON(r))}return this}}class iS extends NVe{constructor(e){super(),this.type="Path",this.currentPoint=new Yt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new OP(this.currentPoint.clone(),new Yt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Fie(this.currentPoint.clone(),new Yt(e,t),new Yt(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new kie(this.currentPoint.clone(),new Yt(e,t),new Yt(i,r),new Yt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Hie(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,c){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,c),this}absellipse(e,t,i,r,s,o,a,c){const l=new kP(e,t,i,r,s,o,a,c);if(this.curves.length>0){const f=l.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class jf extends iS{constructor(e){super(e),this.uuid=Tu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new iS).fromJSON(r))}return this}}function zie(n,e,t,i,r){let s,o;if(r===function rUe(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)o=Vie(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=Vie(s,n[s],n[s+1],o);return o&&cS(o,o.next)&&(y_(o),o=o.next),o}function F6(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!cS(t,t.next)&&0!==I1(t.prev,t,t.next))t=t.next;else{if(y_(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function v_(n,e,t,i,r,s,o){if(!n)return;!o&&s&&function ZVe(n,e,t,i){let r=n;do{null===r.z&&(r.z=jP(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function JVe(n){let e,t,i,r,s,o,a,c,l=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<l&&(a++,i=i.nextZ,i);e++);for(c=l;a>0||c>0&&i;)0!==a&&(0===c||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,l*=2}while(o>1)}(r)}(n,i,r,s);let c,l,a=n;for(;n.prev!==n.next;)if(c=n.prev,l=n.next,s?QVe(n,i,r,s):GVe(n))e.push(c.i/t),e.push(n.i/t),e.push(l.i/t),y_(n),n=l.next,a=l.next;else if((n=l)===a){o?1===o?v_(n=WVe(F6(n),e,t),e,t,i,r,s,2):2===o&&jVe(n,e,t,i,r,s):v_(F6(n),e,t,i,r,s,1);break}}function GVe(n){const e=n.prev,t=n,i=n.next;if(I1(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(om(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&I1(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function QVe(n,e,t,i){const r=n.prev,s=n,o=n.next;if(I1(r,s,o)>=0)return!1;const l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,f=jP(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,e,t,i),p=jP(l,u,e,t,i);let g=n.prevZ,v=n.nextZ;for(;g&&g.z>=f&&v&&v.z<=p;){if(g!==n.prev&&g!==n.next&&om(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&I1(g.prev,g,g.next)>=0||(g=g.prevZ,v!==n.prev&&v!==n.next&&om(r.x,r.y,s.x,s.y,o.x,o.y,v.x,v.y)&&I1(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;g&&g.z>=f;){if(g!==n.prev&&g!==n.next&&om(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&I1(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;v&&v.z<=p;){if(v!==n.prev&&v!==n.next&&om(r.x,r.y,s.x,s.y,o.x,o.y,v.x,v.y)&&I1(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function WVe(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!cS(r,s)&&Oie(r,i,i.next,s)&&__(r,s)&&__(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),y_(i),y_(i.next),i=n=s),i=i.next}while(i!==n);return F6(i)}function jVe(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&tUe(o,a)){let c=Nie(o,a);return o=F6(o,o.next),c=F6(c,c.next),v_(o,e,t,i,r,s),void v_(c,e,t,i,r,s)}a=a.next}o=o.next}while(o!==n)}function KVe(n,e){return n.x-e.x}function qVe(n,e){if(e=function XVe(n,e){let t=e;const i=n.x,r=n.y;let o,s=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=i&&p>s){if(s=p,p===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,c=o.x,l=o.y;let f,u=1/0;t=o;do{i>=t.x&&t.x>=c&&i!==t.x&&om(r<l?i:s,r,c,l,r<l?s:i,r,t.x,t.y)&&(f=Math.abs(r-t.y)/(i-t.x),__(t,n)&&(f<u||f===u&&(t.x>o.x||t.x===o.x&&YVe(o,t)))&&(o=t,u=f)),t=t.next}while(t!==a);return o}(n,e),e){const t=Nie(e,n);F6(e,e.next),F6(t,t.next)}}function YVe(n,e){return I1(n.prev,n,e.prev)<0&&I1(e.next,n,n.next)<0}function jP(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*r)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function eUe(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function om(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function tUe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function nUe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Oie(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(__(n,e)&&__(e,n)&&function iUe(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(I1(n.prev,n,e.prev)||I1(n,e.prev,e))||cS(n,e)&&I1(n.prev,n,n.next)>0&&I1(e.prev,e,e.next)>0)}function I1(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function cS(n,e){return n.x===e.x&&n.y===e.y}function Oie(n,e,t,i){const r=uS(I1(n,e,t)),s=uS(I1(n,e,i)),o=uS(I1(t,i,n)),a=uS(I1(t,i,e));return!!(r!==s&&o!==a||0===r&&lS(n,t,e)||0===s&&lS(n,i,e)||0===o&&lS(t,n,i)||0===a&&lS(t,e,i))}function lS(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function uS(n){return n>0?1:n<0?-1:0}function __(n,e){return I1(n.prev,n,n.next)<0?I1(n,e,n.next)>=0&&I1(n,n.prev,e)>=0:I1(n,e,n.prev)<0||I1(n,n.next,e)<0}function Nie(n,e){const t=new $P(n.i,n.x,n.y),i=new $P(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Vie(n,e,t,i){const r=new $P(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function y_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function $P(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class $f{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return $f.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];Uie(e),Gie(i,e);let o=e.length;t.forEach(Uie);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,Gie(i,t[c]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=zie(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,l,u,f,p,g;if(i&&(s=function $Ve(n,e,t,i){const r=[];let s,o,a,c,l;for(s=0,o=e.length;s<o;s++)a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,l=zie(n,a,c,i,!1),l===l.next&&(l.steiner=!0),r.push(eUe(l));for(r.sort(KVe),s=0;s<r.length;s++)qVe(r[s],t),t=F6(t,t.next);return t}(n,e,s,t)),n.length>80*t){a=l=n[0],c=u=n[1];for(let v=t;v<r;v+=t)f=n[v],p=n[v+1],f<a&&(a=f),p<c&&(c=p),f>l&&(l=f),p>u&&(u=p);g=Math.max(l-a,u-c),g=0!==g?1/g:0}return v_(s,o,t,a,c,g),o}(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function Uie(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Gie(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class w_ extends Tr{constructor(e=new jf([new Yt(.5,.5),new Yt(-.5,.5),new Yt(-.5,-.5),new Yt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++)o(e[a]);function o(a){const c=[],l=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,f=void 0!==t.depth?t.depth:1;let p=void 0===t.bevelEnabled||t.bevelEnabled,g=void 0!==t.bevelThickness?t.bevelThickness:.2,v=void 0!==t.bevelSize?t.bevelSize:g-.1,_=void 0!==t.bevelOffset?t.bevelOffset:0,w=void 0!==t.bevelSegments?t.bevelSegments:3;const b=t.extrudePath,x=void 0!==t.UVGenerator?t.UVGenerator:sUe;let M,I,k,O,R,E=!1;b&&(M=b.getSpacedPoints(u),E=!0,p=!1,I=b.computeFrenetFrames(u,!1),k=new be,O=new be,R=new be),p||(w=0,g=0,v=0,_=0);const P=a.extractPoints(l);let Q=P.shape;const J=P.holes;if(!$f.isClockWise(Q)){Q=Q.reverse();for(let Vt=0,Pt=J.length;Vt<Pt;Vt++){const wn=J[Vt];$f.isClockWise(wn)&&(J[Vt]=wn.reverse())}}const Ae=$f.triangulateShape(Q,J),G=Q;for(let Vt=0,Pt=J.length;Vt<Pt;Vt++)Q=Q.concat(J[Vt]);function ue(Vt,Pt,wn){return Pt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pt.clone().multiplyScalar(wn).add(Vt)}const X=Q.length,le=Ae.length;function de(Vt,Pt,wn){let ei,Tn,Cn;const $n=Vt.x-Pt.x,yi=Vt.y-Pt.y,mr=wn.x-Vt.x,Ss=wn.y-Vt.y,Ge=$n*$n+yi*yi;if(Math.abs($n*Ss-yi*mr)>Number.EPSILON){const It=Math.sqrt(Ge),yn=Math.sqrt(mr*mr+Ss*Ss),Mn=Pt.x-yi/It,kn=Pt.y+$n/It,nn=((wn.x-Ss/yn-Mn)*Ss-(wn.y+mr/yn-kn)*mr)/($n*Ss-yi*mr);ei=Mn+$n*nn-Vt.x,Tn=kn+yi*nn-Vt.y;const dn=ei*ei+Tn*Tn;if(dn<=2)return new Yt(ei,Tn);Cn=Math.sqrt(dn/2)}else{let It=!1;$n>Number.EPSILON?mr>Number.EPSILON&&(It=!0):$n<-Number.EPSILON?mr<-Number.EPSILON&&(It=!0):Math.sign(yi)===Math.sign(Ss)&&(It=!0),It?(ei=-yi,Tn=$n,Cn=Math.sqrt(Ge)):(ei=$n,Tn=yi,Cn=Math.sqrt(Ge/2))}return new Yt(ei/Cn,Tn/Cn)}const pe=[];for(let Vt=0,Pt=G.length,wn=Pt-1,ei=Vt+1;Vt<Pt;Vt++,wn++,ei++)wn===Pt&&(wn=0),ei===Pt&&(ei=0),pe[Vt]=de(G[Vt],G[wn],G[ei]);const Fe=[];let st,ze=pe.concat();for(let Vt=0,Pt=J.length;Vt<Pt;Vt++){const wn=J[Vt];st=[];for(let ei=0,Tn=wn.length,Cn=Tn-1,$n=ei+1;ei<Tn;ei++,Cn++,$n++)Cn===Tn&&(Cn=0),$n===Tn&&($n=0),st[ei]=de(wn[ei],wn[Cn],wn[$n]);Fe.push(st),ze=ze.concat(st)}for(let Vt=0;Vt<w;Vt++){const Pt=Vt/w,wn=g*Math.cos(Pt*Math.PI/2),ei=v*Math.sin(Pt*Math.PI/2)+_;for(let Tn=0,Cn=G.length;Tn<Cn;Tn++){const $n=ue(G[Tn],pe[Tn],ei);Xt($n.x,$n.y,-wn)}for(let Tn=0,Cn=J.length;Tn<Cn;Tn++){const $n=J[Tn];st=Fe[Tn];for(let yi=0,mr=$n.length;yi<mr;yi++){const Ss=ue($n[yi],st[yi],ei);Xt(Ss.x,Ss.y,-wn)}}}const _t=v+_;for(let Vt=0;Vt<X;Vt++){const Pt=p?ue(Q[Vt],ze[Vt],_t):Q[Vt];E?(O.copy(I.normals[0]).multiplyScalar(Pt.x),k.copy(I.binormals[0]).multiplyScalar(Pt.y),R.copy(M[0]).add(O).add(k),Xt(R.x,R.y,R.z)):Xt(Pt.x,Pt.y,0)}for(let Vt=1;Vt<=u;Vt++)for(let Pt=0;Pt<X;Pt++){const wn=p?ue(Q[Pt],ze[Pt],_t):Q[Pt];E?(O.copy(I.normals[Vt]).multiplyScalar(wn.x),k.copy(I.binormals[Vt]).multiplyScalar(wn.y),R.copy(M[Vt]).add(O).add(k),Xt(R.x,R.y,R.z)):Xt(wn.x,wn.y,f/u*Vt)}for(let Vt=w-1;Vt>=0;Vt--){const Pt=Vt/w,wn=g*Math.cos(Pt*Math.PI/2),ei=v*Math.sin(Pt*Math.PI/2)+_;for(let Tn=0,Cn=G.length;Tn<Cn;Tn++){const $n=ue(G[Tn],pe[Tn],ei);Xt($n.x,$n.y,f+wn)}for(let Tn=0,Cn=J.length;Tn<Cn;Tn++){const $n=J[Tn];st=Fe[Tn];for(let yi=0,mr=$n.length;yi<mr;yi++){const Ss=ue($n[yi],st[yi],ei);E?Xt(Ss.x,Ss.y+M[u-1].y,M[u-1].x+wn):Xt(Ss.x,Ss.y,f+wn)}}}function wt(Vt,Pt){let wn=Vt.length;for(;--wn>=0;){const ei=wn;let Tn=wn-1;Tn<0&&(Tn=Vt.length-1);for(let Cn=0,$n=u+2*w;Cn<$n;Cn++){const yi=X*Cn,mr=X*(Cn+1);_n(Pt+ei+yi,Pt+Tn+yi,Pt+Tn+mr,Pt+ei+mr)}}}function Xt(Vt,Pt,wn){c.push(Vt),c.push(Pt),c.push(wn)}function un(Vt,Pt,wn){an(Vt),an(Pt),an(wn);const ei=r.length/3,Tn=x.generateTopUV(i,r,ei-3,ei-2,ei-1);bi(Tn[0]),bi(Tn[1]),bi(Tn[2])}function _n(Vt,Pt,wn,ei){an(Vt),an(Pt),an(ei),an(Pt),an(wn),an(ei);const Tn=r.length/3,Cn=x.generateSideWallUV(i,r,Tn-6,Tn-3,Tn-2,Tn-1);bi(Cn[0]),bi(Cn[1]),bi(Cn[3]),bi(Cn[1]),bi(Cn[2]),bi(Cn[3])}function an(Vt){r.push(c[3*Vt+0]),r.push(c[3*Vt+1]),r.push(c[3*Vt+2])}function bi(Vt){s.push(Vt.x),s.push(Vt.y)}(function pt(){const Vt=r.length/3;if(p){let Pt=0,wn=X*Pt;for(let ei=0;ei<le;ei++){const Tn=Ae[ei];un(Tn[2]+wn,Tn[1]+wn,Tn[0]+wn)}Pt=u+2*w,wn=X*Pt;for(let ei=0;ei<le;ei++){const Tn=Ae[ei];un(Tn[0]+wn,Tn[1]+wn,Tn[2]+wn)}}else{for(let Pt=0;Pt<le;Pt++){const wn=Ae[Pt];un(wn[2],wn[1],wn[0])}for(let Pt=0;Pt<le;Pt++){const wn=Ae[Pt];un(wn[0]+X*u,wn[1]+X*u,wn[2]+X*u)}}i.addGroup(Vt,r.length/3-Vt,0)})(),function kt(){const Vt=r.length/3;let Pt=0;wt(G,Pt),Pt+=G.length;for(let wn=0,ei=J.length;wn<ei;wn++){const Tn=J[wn];wt(Tn,Pt),Pt+=Tn.length}i.addGroup(Vt,r.length/3-Vt,1)}()}this.setAttribute("position",new fi(r,3)),this.setAttribute("uv",new fi(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function oUe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return t.options=Object.assign({},e),void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new NP[r.type]).fromJSON(r)),new w_(i,e.options)}}const sUe={generateTopUV:function(n,e,t,i,r){const a=e[3*i],c=e[3*i+1],l=e[3*r],u=e[3*r+1];return[new Yt(e[3*t],e[3*t+1]),new Yt(a,c),new Yt(l,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[3*t],a=e[3*t+1],c=e[3*t+2],l=e[3*i],u=e[3*i+1],f=e[3*i+2],p=e[3*r],g=e[3*r+1],v=e[3*r+2],_=e[3*s],w=e[3*s+1],b=e[3*s+2];return Math.abs(a-u)<Math.abs(o-l)?[new Yt(o,1-c),new Yt(l,1-f),new Yt(p,1-v),new Yt(_,1-b)]:[new Yt(a,1-c),new Yt(u,1-f),new Yt(g,1-v),new Yt(w,1-b)]}};class fS extends Tr{constructor(e=new jf([new Yt(0,.5),new Yt(-.5,-.5),new Yt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,c=0;if(!1===Array.isArray(e))l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(a,c,u),a+=c,c=0;function l(u){const f=r.length/3,p=u.extractPoints(t);let g=p.shape;const v=p.holes;!1===$f.isClockWise(g)&&(g=g.reverse());for(let w=0,b=v.length;w<b;w++){const x=v[w];!0===$f.isClockWise(x)&&(v[w]=x.reverse())}const _=$f.triangulateShape(g,v);for(let w=0,b=v.length;w<b;w++)g=g.concat(v[w]);for(let w=0,b=g.length;w<b;w++){const x=g[w];r.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let w=0,b=_.length;w<b;w++){const x=_[w];i.push(x[0]+f,x[1]+f,x[2]+f),c+=3}}this.setIndex(i),this.setAttribute("position",new fi(r,3)),this.setAttribute("normal",new fi(s,3)),this.setAttribute("uv",new fi(o,2))}toJSON(){const e=super.toJSON();return function aUe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++)i.push(t[e.shapes[r]]);return new fS(i,e.curveSegments)}}class b_ extends Tr{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+a,Math.PI);let l=0;const u=[],f=new be,p=new be,g=[],v=[],_=[],w=[];for(let b=0;b<=i;b++){const x=[],M=b/i;let E=0;0==b&&0==o?E=.5/t:b==i&&c==Math.PI&&(E=-.5/t);for(let I=0;I<=t;I++){const k=I/t;f.x=-e*Math.cos(r+k*s)*Math.sin(o+M*a),f.y=e*Math.cos(o+M*a),f.z=e*Math.sin(r+k*s)*Math.sin(o+M*a),v.push(f.x,f.y,f.z),p.copy(f).normalize(),_.push(p.x,p.y,p.z),w.push(k+E,1-M),x.push(l++)}u.push(x)}for(let b=0;b<i;b++)for(let x=0;x<t;x++){const M=u[b][x+1],E=u[b][x],I=u[b+1][x],k=u[b+1][x+1];(0!==b||o>0)&&g.push(M,E,k),(b!==i-1||c<Math.PI)&&g.push(E,I,k)}this.setIndex(g),this.setAttribute("position",new fi(v,3)),this.setAttribute("normal",new fi(_,3)),this.setAttribute("uv",new fi(w,2))}static fromJSON(e){return new b_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class x_ extends bl{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new In(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new In(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Kf extends x_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Yt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return yc(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new In(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new In(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new In(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class jie extends bl{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new In(16777215),this.specular=new In(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new In(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eH extends bl{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Pa extends bl{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new In(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new In(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function x4(n,e,t){return tH(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)}function Jp(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function tH(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function $ie(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function nH(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function iH(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class C_{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class mUe extends C_{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),_=v*v,w=_*v,b=-p*w+2*p*_-p*v,x=(1+p)*w+(-1.5-2*p)*_+(-.5+p)*v+1,M=(-1-g)*w+(1.5+g)*_+.5*v,E=g*w-g*_;for(let I=0;I!==a;++I)s[I]=b*o[u+I]+x*o[l+I]+M*o[c+I]+E*o[f+I];return s}}class Kie extends C_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),f=1-u;for(let p=0;p!==a;++p)s[p]=o[l+p]*f+o[c+p]*u;return s}}class AUe extends C_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class L0{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jp(t,this.TimeBufferType),this.values=Jp(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Jp(e.times,Array),values:Jp(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new AUe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Kie(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mUe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case t_:t=this.InterpolantFactoryMethodDiscrete;break;case R7:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return t_;case this.InterpolantFactoryMethodLinear:return R7;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=x4(i,s,o),this.values=x4(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&tH(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=x4(this.times),t=x4(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(r)c=!0;else{const f=a*i,p=f-i,g=f+i;for(let v=0;v!==i;++v){const _=t[f+v];if(_!==t[p+v]||_!==t[g+v]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let g=0;g!==i;++g)t[p+g]=t[f+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=x4(e,0,o),this.values=x4(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=x4(this.times,0),t=x4(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}L0.prototype.TimeBufferType=Float32Array,L0.prototype.ValueBufferType=Float32Array,L0.prototype.DefaultInterpolation=R7;class am extends L0{}am.prototype.ValueTypeName="bool",am.prototype.ValueBufferType=Array,am.prototype.DefaultInterpolation=t_,am.prototype.InterpolantFactoryMethodLinear=void 0,am.prototype.InterpolantFactoryMethodSmooth=void 0;class qie extends L0{}qie.prototype.ValueTypeName="color";class M_ extends L0{}M_.prototype.ValueTypeName="number";class vUe extends C_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)J2.slerpFlat(s,0,o,l-a,o,l,c);return s}}class e5 extends L0{InterpolantFactoryMethodLinear(e){return new vUe(this.times,this.values,this.getValueSize(),e)}}e5.prototype.ValueTypeName="quaternion",e5.prototype.DefaultInterpolation=R7,e5.prototype.InterpolantFactoryMethodSmooth=void 0;class cm extends L0{}cm.prototype.ValueTypeName="string",cm.prototype.ValueBufferType=Array,cm.prototype.DefaultInterpolation=t_,cm.prototype.InterpolantFactoryMethodLinear=void 0,cm.prototype.InterpolantFactoryMethodSmooth=void 0;class S_ extends L0{}S_.prototype.ValueTypeName="vector";class E_{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Tu(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(yUe(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(L0.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=$ie(c);c=nH(c,1,u),l=nH(l,1,u),!r&&0===c[0]&&(c.push(s),l.push(l[0])),o.push(new M_(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const f=u[1];let p=r[f];p||(r[f]=p=[]),p.push(l)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,g,v,_){if(0!==g.length){const w=[],b=[];iH(g,w,b,v),0!==w.length&&_.push(new f(p,w,b))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let f=0;f<l.length;f++){const p=l[f].keys;if(p&&0!==p.length)if(p[0].morphTargets){const g={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let _=0;_<p[v].morphTargets.length;_++)g[p[v].morphTargets[_]]=-1;for(const _ in g){const w=[],b=[];for(let x=0;x!==p[v].morphTargets.length;++x){const M=p[v];w.push(M.time),b.push(M.morphTarget===_?1:0)}r.push(new M_(".morphTargetInfluence["+_+"]",w,b))}c=g.length*o}else{const g=".bones["+t[f].name+"]";i(S_,g+".position",p,"pos",r),i(e5,g+".quaternion",p,"rot",r),i(S_,g+".scale",p,"scl",r)}}return 0===r.length?null:new this(s,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function yUe(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function _Ue(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return M_;case"vector":case"vector2":case"vector3":case"vector4":return S_;case"color":return qie;case"quaternion":return e5;case"bool":case"boolean":return am;case"string":return cm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];iH(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const lm={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Xie{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,f){return l.push(u,f),this},this.removeHandler=function(u){const f=l.indexOf(u);return-1!==f&&l.splice(f,2),this},this.getHandler=function(u){for(let f=0,p=l.length;f<p;f+=2){const g=l[f],v=l[f+1];if(g.global&&(g.lastIndex=0),g.test(u))return v}return null}}}const T_=new Xie;class t5{constructor(e){this.manager=void 0!==e?e:T_,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const qf={};class wUe extends Error{constructor(e,t){super(e),this.response=t}}class bh extends t5{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=lm.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==qf[e])return void qf[e].push({onLoad:t,onProgress:i,onError:r});qf[e]=[],qf[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=qf[e],f=l.body.getReader(),p=l.headers.get("Content-Length"),g=p?parseInt(p):0,v=0!==g;let _=0;const w=new ReadableStream({start(b){!function x(){f.read().then(({done:M,value:E})=>{if(M)b.close();else{_+=E.byteLength;const I=new ProgressEvent("progress",{lengthComputable:v,loaded:_,total:g});for(let k=0,O=u.length;k<O;k++){const R=u[k];R.onProgress&&R.onProgress(I)}b.enqueue(E),x()}})}()}});return new Response(w)}throw new wUe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return l.json();default:if(void 0===a)return l.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,g=new TextDecoder(p);return l.arrayBuffer().then(v=>g.decode(v))}}}).then(l=>{lm.add(e,l);const u=qf[e];delete qf[e];for(let f=0,p=u.length;f<p;f++){const g=u[f];g.onLoad&&g.onLoad(l)}}).catch(l=>{const u=qf[e];if(void 0===u)throw this.manager.itemError(e),l;delete qf[e];for(let f=0,p=u.length;f<p;f++){const g=u[f];g.onError&&g.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class dS extends t5{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=lm.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=r_("img");function c(){u(),lm.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class bUe extends t5{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new rm,a=new bh(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(c){const l=s.parse(c);!l||(void 0!==l.image?o.image=l.image:void 0!==l.data&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=void 0!==l.wrapS?l.wrapS:s3,o.wrapT=void 0!==l.wrapT?l.wrapT:s3,o.magFilter=void 0!==l.magFilter?l.magFilter:u1,o.minFilter=void 0!==l.minFilter?l.minFilter:u1,o.anisotropy=void 0!==l.anisotropy?l.anisotropy:1,void 0!==l.encoding&&(o.encoding=l.encoding),void 0!==l.flipY&&(o.flipY=l.flipY),void 0!==l.format&&(o.format=l.format),void 0!==l.type&&(o.type=l.type),void 0!==l.mipmaps&&(o.mipmaps=l.mipmaps,o.minFilter=C6),1===l.mipmapCount&&(o.minFilter=u1),void 0!==l.generateMipmaps&&(o.generateMipmaps=l.generateMipmaps),o.needsUpdate=!0,t&&t(o,l))},i,r),o}}class xUe extends t5{constructor(e){super(e)}load(e,t,i,r){const s=new y4,o=new dS(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class pS extends el{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new In(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Yie extends pS{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(el.DefaultUp),this.updateMatrix(),this.groundColor=new In(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Zie=new Zi,Jie=new be,ere=new be;class rH{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Yt(512,512),this.map=null,this.mapPass=null,this.matrix=new Zi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yP,this._frameExtents=new Yt(1,1),this._viewportCount=1,this._viewports=[new Wo(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Jie.setFromMatrixPosition(e.matrixWorld),t.position.copy(Jie),ere.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ere),t.updateMatrixWorld(),Zie.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Zie),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class CUe extends rH{constructor(){super(new f2(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*n_*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class tre extends pS{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(el.DefaultUp),this.updateMatrix(),this.target=new el,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new CUe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const nre=new Zi,L_=new be,sH=new be;class MUe extends rH{constructor(){super(new f2(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Yt(4,2),this._viewportCount=6,this._viewports=[new Wo(2,1,1,1),new Wo(0,1,1,1),new Wo(3,1,1,1),new Wo(1,1,1,1),new Wo(3,0,1,1),new Wo(1,0,1,1)],this._cubeDirections=[new be(1,0,0),new be(-1,0,0),new be(0,0,1),new be(0,0,-1),new be(0,1,0),new be(0,-1,0)],this._cubeUps=[new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,0,1),new be(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),L_.setFromMatrixPosition(e.matrixWorld),i.position.copy(L_),sH.copy(i.position),sH.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(sH),i.updateMatrixWorld(),r.makeTranslation(-L_.x,-L_.y,-L_.z),nre.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nre)}}class ire extends pS{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new MUe}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class SUe extends rH{constructor(){super(new $p(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class oH extends pS{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(el.DefaultUp),this.updateMatrix(),this.target=new el,this.shadow=new SUe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Xf{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class kUe extends t5{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=lm.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){lm.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class lre{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ure(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ure();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ure(){return(typeof performance>"u"?Date:performance).now()}const cH="\\[\\]\\.:\\/",zUe=new RegExp("["+cH+"]","g"),lH="[^"+cH+"]",OUe="[^"+cH.replace("\\.","")+"]",QUe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",lH)+/(WCOD+)?/.source.replace("WCOD",OUe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lH)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lH)+"$"),WUe=["material","materials","bones","map"];class jUe{constructor(e,t,i){const r=i||Ha.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let Ha=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(zUe,"")}static parseTrackName(t){const i=QUe.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==WUe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===u){u=f;break}break;case"map":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=jUe,n})();Ha.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ha.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ha.prototype.GetterByBindingType=[Ha.prototype._getValue_direct,Ha.prototype._getValue_array,Ha.prototype._getValue_arrayElement,Ha.prototype._getValue_toArray],Ha.prototype.SetterByBindingTypeAndVersioning=[[Ha.prototype._setValue_direct,Ha.prototype._setValue_direct_setNeedsUpdate,Ha.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ha.prototype._setValue_array,Ha.prototype._setValue_array_setNeedsUpdate,Ha.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ha.prototype._setValue_arrayElement,Ha.prototype._setValue_arrayElement_setNeedsUpdate,Ha.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ha.prototype._setValue_fromArray,Ha.prototype._setValue_fromArray_setNeedsUpdate,Ha.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class XUe{constructor(e,t,i=0,r=1/0){this.ray=new LM(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new aP,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return uH(e,this,i,t),i.sort(pre),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)uH(e[r],this,i,t);return i.sort(pre),i}}function pre(n,e){return n.distance-e.distance}function uH(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),!0===i){const r=n.children;for(let s=0,o=r.length;s<o;s++)uH(r[s],e,t,!0)}}class gre{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(yc(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class dH extends sm{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new Tr;r.setAttribute("position",new fi(t,3)),r.setAttribute("color",new fi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(r,new B2({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){const r=new In,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}const Yf=ZUe();function ZUe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const l=c-127;l<-27?(i[c]=0,i[256|c]=32768,r[c]=24,r[256|c]=24):l<-14?(i[c]=1024>>-l-14,i[256|c]=1024>>-l-14|32768,r[c]=-l-1,r[256|c]=-l-1):l<=15?(i[c]=l+15<<10,i[256|c]=l+15<<10|32768,r[c]=13,r[256|c]=13):l<128?(i[c]=31744,i[256|c]=64512,r[c]=24,r[256|c]=24):(i[c]=31744,i[256|c]=64512,r[c]=13,r[256|c]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let l=c<<13,u=0;for(;0==(8388608&l);)l<<=1,u-=8388608;l&=-8388609,u+=947912704,s[c]=l|u}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)32!==c&&(a[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}var bS=Object.freeze({__proto__:null,toHalfFloat:function JUe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=yc(n,-65504,65504),Yf.floatView[0]=n;const e=Yf.uint32View[0],t=e>>23&511;return Yf.baseTable[t]+((8388607&e)>>Yf.shiftTable[t])},fromHalfFloat:function eGe(n){const e=n>>10;return Yf.uint32View[0]=Yf.mantissaTable[Yf.offsetTable[e]+(1023&n)]+Yf.exponentTable[e],Yf.floatView[0]}});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"144"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="144");const cn=(n,e=4)=>Math.round(n*10**e)/10**e,xh=([n,e],[t,i],r=1)=>[(t-n)/(2/r)+n,(i-e)/(2/r)+e],Iu=(n,e=4)=>cn(n.reduce((t,i)=>t+i,0),e),po=(n,e,t=[0,0],i=4)=>{const r=n*Math.PI/180,s=e*Math.cos(r),o=e*Math.sin(r);return[cn(s+t[0],i),cn(o+t[1],i)]},pH=(n,e,t)=>{const[i,r]=n,[s,o]=e;var a=Math.PI/180*t,c=Math.cos(a),l=Math.sin(a);return[c*(i-s)+l*(r-o)+s,c*(r-o)-l*(i-s)+o]},R1=(n,e,t=3)=>cn(180*Math.atan2(e[1]-n[1],e[0]-n[0])/Math.PI,t),Mre=(n,e,t,i=0,r=0)=>{const s=g=>g*g,o=g=>Math.sqrt(g);var a=1+s(e),c=2*-i+e*(t-r)*2,l=s(i)+s(t-r)-s(n);s(c);const p=(o(s(c)-4*a*l),(-c-o(s(c)-4*a*l))/(2*a));return[p,e*p+t]},c5=(n,e)=>{const[[t,i],[r,s]]=n,[[o,a],[c,l]]=e;var u,p=(l-a)*(r-t)-(c-o)*(s-i);return 0==p?null:[t+(u=((c-o)*(i-a)-(l-a)*(t-o))/p)*(r-t),i+u*(s-i)]},Sre=(n,e)=>{const t=[],i=n.length;for(let r=0;r<i-1;r++){const s=[n[r],n[r+1]];c5(s,e)&&t.push(c5(s,e))}return t},Ma=(n,e,t=4)=>n&&e?cn(Math.hypot(e[0]-n[0],e[1]-n[1]),t):0,we=(n,e)=>[n[0]+e[0],n[1]+e[1]],ln=(n,e,t=!0)=>t?[n[0],e[1]]:[e[0],n[1]],l5=(n,e,t=!1)=>{let i;return i=t?.3528*n/10:n*e,cn(i,3)};function Ere(n){return n*(Math.PI/180)}String.prototype.toTitleCase=function(){return this.replace(/\b\w/g,n=>n.toLocaleUpperCase())};const xS=u2("slideInOut",[bo(":enter",[Bi({transform:"translateY(100%)"}),ho("600ms 0ms ease-out",Bi({transform:"translateY(0%)"}))]),bo(":leave",[ho("300ms  ease-in",Bi({transform:"translateY(100%)"}))])]),gH=u2("fallInOut",[bo(":enter",[Bi({transform:"translateY(-100%)"}),ho("600ms 0ms ease-out",Bi({transform:"translateY(0%)"}))]),bo(":leave",[ho("300ms ease-in",Bi({transform:"translateY(-100%)"}))])]),mH=u2("stateSlideIn",[wo("false",Bi({width:"0px",padding:0,borderWidth:0})),wo("true",Bi({width:"*",padding:"*",borderWidth:"*"})),bo("* => void",[ho("200ms ease-in",Bi({width:"0px",padding:0,borderWidth:0}))]),bo("false => true",ho("200ms ease-in")),bo("true => false",ho("200ms ease-out"))]),iGe=u2("foldSlideIn",[wo("false",Bi({transform:"scaleX(0)"})),wo("true",Bi({transform:"*"})),bo("* => void",[ho("200ms ease-in",Bi({transform:"scaleX(0)"}))]),bo("false => true",ho("200ms ease-in")),bo("true => false",ho("200ms ease-out"))]);function AH(n,e){let t=0;if(void 0===e)for(let i of n)(i=+i)&&(t+=i);else{let i=-1;for(let r of n)(r=+e(r,++i,n))&&(t+=r)}return t}function rGe(){}function vH(n){return null==n?rGe:function(){return this.querySelector(n)}}function oGe(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function aGe(){return[]}function Ire(n){return null==n?aGe:function(){return this.querySelectorAll(n)}}function Rre(n){return function(){return this.matches(n)}}function Bre(n){return function(e){return e.matches(n)}}var uGe=Array.prototype.find;function fGe(){return this.firstElementChild}var pGe=Array.prototype.filter;function gGe(){return Array.from(this.children)}function kre(n){return new Array(n.length)}function CS(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}function yGe(n){return function(){return n}}function wGe(n,e,t,i,r,s){for(var a,o=0,c=e.length,l=s.length;o<l;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):t[o]=new CS(n,s[o]);for(;o<c;++o)(a=e[o])&&(r[o]=a)}function bGe(n,e,t,i,r,s,o){var a,c,g,l=new Map,u=e.length,f=s.length,p=new Array(u);for(a=0;a<u;++a)(c=e[a])&&(p[a]=g=o.call(c,c.__data__,a,e)+"",l.has(g)?r[a]=c:l.set(g,c));for(a=0;a<f;++a)g=o.call(n,s[a],a,s)+"",(c=l.get(g))?(i[a]=c,c.__data__=s[a],l.delete(g)):t[a]=new CS(n,s[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(p[a])===c&&(r[a]=c)}function xGe(n){return n.__data__}function MGe(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function IGe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}CS.prototype={constructor:CS,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var _H="http://www.w3.org/1999/xhtml";const Fre={svg:"http://www.w3.org/2000/svg",xhtml:_H,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function MS(n){var e=n+="",t=e.indexOf(":");return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),Fre.hasOwnProperty(e)?{space:Fre[e],local:n}:n}function zGe(n){return function(){this.removeAttribute(n)}}function OGe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function NGe(n,e){return function(){this.setAttribute(n,e)}}function VGe(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function UGe(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}function GGe(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function Pre(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function WGe(n){return function(){this.style.removeProperty(n)}}function jGe(n,e,t){return function(){this.style.setProperty(n,e,t)}}function $Ge(n,e,t){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function um(n,e){return n.style.getPropertyValue(e)||Pre(n).getComputedStyle(n,null).getPropertyValue(e)}function qGe(n){return function(){delete this[n]}}function XGe(n,e){return function(){this[n]=e}}function YGe(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}function Hre(n){return n.trim().split(/^|\s+/)}function yH(n){return n.classList||new zre(n)}function zre(n){this._node=n,this._names=Hre(n.getAttribute("class")||"")}function Ore(n,e){for(var t=yH(n),i=-1,r=e.length;++i<r;)t.add(e[i])}function Nre(n,e){for(var t=yH(n),i=-1,r=e.length;++i<r;)t.remove(e[i])}function JGe(n){return function(){Ore(this,n)}}function eQe(n){return function(){Nre(this,n)}}function tQe(n,e){return function(){(e.apply(this,arguments)?Ore:Nre)(this,n)}}function iQe(){this.textContent=""}function rQe(n){return function(){this.textContent=n}}function sQe(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function aQe(){this.innerHTML=""}function cQe(n){return function(){this.innerHTML=n}}function lQe(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function hQe(){this.nextSibling&&this.parentNode.appendChild(this)}function dQe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gQe(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===_H&&e.documentElement.namespaceURI===_H?e.createElement(n):e.createElementNS(t,n)}}function mQe(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function Vre(n){var e=MS(n);return(e.local?mQe:gQe)(e)}function vQe(){return null}function yQe(){var n=this.parentNode;n&&n.removeChild(this)}function bQe(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function xQe(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function EQe(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function TQe(n){return function(){var e=this.__on;if(e){for(var s,t=0,i=-1,r=e.length;t<r;++t)s=e[t],n.type&&s.type!==n.type||s.name!==n.name?e[++i]=s:this.removeEventListener(s.type,s.listener,s.options);++i?e.length=i:delete this.__on}}}function LQe(n,e,t){return function(){var r,i=this.__on,s=function SQe(n){return function(e){n.call(this,e,this.__data__)}}(e);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===n.type&&r.name===n.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),void(r.value=e);this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function Ure(n,e,t){var i=Pre(n),r=i.CustomEvent;"function"==typeof r?r=new r(e,t):(r=i.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function IQe(n,e){return function(){return Ure(this,n,e)}}function RQe(n,e){return function(){return Ure(this,n,e.apply(this,arguments))}}zre.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var Gre=[null];function Ru(n,e){this._groups=n,this._parents=e}function Qre(){return new Ru([[document.documentElement]],Gre)}Ru.prototype=Qre.prototype={constructor:Ru,select:function sGe(n){"function"!=typeof n&&(n=vH(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,l,s=e[r],o=s.length,a=i[r]=new Array(o),u=0;u<o;++u)(c=s[u])&&(l=n.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new Ru(i,this._parents)},selectAll:function lGe(n){n="function"==typeof n?function cGe(n){return function(){return oGe(n.apply(this,arguments))}}(n):Ire(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s<t;++s)for(var c,o=e[s],a=o.length,l=0;l<a;++l)(c=o[l])&&(i.push(n.call(c,c.__data__,l,o)),r.push(c));return new Ru(i,r)},selectChild:function dGe(n){return this.select(null==n?fGe:function hGe(n){return function(){return uGe.call(this.children,n)}}("function"==typeof n?n:Bre(n)))},selectChildren:function AGe(n){return this.selectAll(null==n?gGe:function mGe(n){return function(){return pGe.call(this.children,n)}}("function"==typeof n?n:Bre(n)))},filter:function vGe(n){"function"!=typeof n&&(n=Rre(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,s=e[r],o=s.length,a=i[r]=[],l=0;l<o;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&a.push(c);return new Ru(i,this._parents)},data:function CGe(n,e){if(!arguments.length)return Array.from(this,xGe);var t=e?bGe:wGe,i=this._parents,r=this._groups;"function"!=typeof n&&(n=yGe(n));for(var s=r.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=i[l],f=r[l],p=f.length,g=MGe(n.call(u,u&&u.__data__,l,i)),v=g.length,_=a[l]=new Array(v),w=o[l]=new Array(v),b=c[l]=new Array(p);t(u,f,_,w,b,g,e);for(var E,I,x=0,M=0;x<v;++x)if(E=_[x]){for(x>=M&&(M=x+1);!(I=w[M])&&++M<v;);E._next=I||null}}return(o=new Ru(o,i))._enter=a,o._exit=c,o},enter:function _Ge(){return new Ru(this._enter||this._groups.map(kre),this._parents)},exit:function SGe(){return new Ru(this._exit||this._groups.map(kre),this._parents)},join:function EGe(n,e,t){var i=this.enter(),r=this,s=this.exit();return"function"==typeof n?(i=n(i))&&(i=i.selection()):i=i.append(n+""),null!=e&&(r=e(r))&&(r=r.selection()),null==t?s.remove():t(s),i&&r?i.merge(r).order():r},merge:function TGe(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,o=Math.min(r,i.length),a=new Array(r),c=0;c<o;++c)for(var g,l=t[c],u=i[c],f=l.length,p=a[c]=new Array(f),v=0;v<f;++v)(g=l[v]||u[v])&&(p[v]=g);for(;c<r;++c)a[c]=t[c];return new Ru(a,this._parents)},selection:function FQe(){return this},order:function LGe(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var o,i=n[e],r=i.length-1,s=i[r];--r>=0;)(o=i[r])&&(s&&4^o.compareDocumentPosition(s)&&s.parentNode.insertBefore(o,s),s=o);return this},sort:function DGe(n){function e(f,p){return f&&p?n(f.__data__,p.__data__):!f-!p}n||(n=IGe);for(var t=this._groups,i=t.length,r=new Array(i),s=0;s<i;++s){for(var l,o=t[s],a=o.length,c=r[s]=new Array(a),u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(e)}return new Ru(r,this._parents).order()},call:function RGe(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function BGe(){return Array.from(this)},node:function kGe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function FGe(){let n=0;for(const e of this)++n;return n},empty:function PGe(){return!this.node()},each:function HGe(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var a,r=e[t],s=0,o=r.length;s<o;++s)(a=r[s])&&n.call(a,a.__data__,s,r);return this},attr:function QGe(n,e){var t=MS(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((null==e?t.local?OGe:zGe:"function"==typeof e?t.local?GGe:UGe:t.local?VGe:NGe)(t,e))},style:function KGe(n,e,t){return arguments.length>1?this.each((null==e?WGe:"function"==typeof e?$Ge:jGe)(n,e,t??"")):um(this.node(),n)},property:function ZGe(n,e){return arguments.length>1?this.each((null==e?qGe:"function"==typeof e?YGe:XGe)(n,e)):this.node()[n]},classed:function nQe(n,e){var t=Hre(n+"");if(arguments.length<2){for(var i=yH(this.node()),r=-1,s=t.length;++r<s;)if(!i.contains(t[r]))return!1;return!0}return this.each(("function"==typeof e?tQe:e?JGe:eQe)(t,e))},text:function oQe(n){return arguments.length?this.each(null==n?iQe:("function"==typeof n?sQe:rQe)(n)):this.node().textContent},html:function uQe(n){return arguments.length?this.each(null==n?aQe:("function"==typeof n?lQe:cQe)(n)):this.node().innerHTML},raise:function fQe(){return this.each(hQe)},lower:function pQe(){return this.each(dQe)},append:function AQe(n){var e="function"==typeof n?n:Vre(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function _Qe(n,e){var t="function"==typeof n?n:Vre(n),i=null==e?vQe:"function"==typeof e?e:vH(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function wQe(){return this.each(yQe)},clone:function CQe(n){return this.select(n?xQe:bQe)},datum:function MQe(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function DQe(n,e,t){var r,o,i=EQe(n+""),s=i.length;if(!(arguments.length<2)){for(a=e?LQe:TQe,r=0;r<s;++r)this.each(a(i[r],e,t));return this}var a=this.node().__on;if(a)for(var u,c=0,l=a.length;c<l;++c)for(r=0,u=a[c];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function BQe(n,e){return this.each(("function"==typeof e?RQe:IQe)(n,e))},[Symbol.iterator]:function*kQe(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var o,i=n[e],r=0,s=i.length;r<s;++r)(o=i[r])&&(yield o)}};const D_=Qre;var PQe={value:()=>{}};function Wre(){for(var i,n=0,e=arguments.length,t={};n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new SS(t)}function SS(n){this._=n}function HQe(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}function zQe(n,e){for(var r,t=0,i=n.length;t<i;++t)if((r=n[t]).name===e)return r.value}function jre(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=PQe,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=t&&n.push({name:e,value:t}),n}SS.prototype=Wre.prototype={constructor:SS,on:function(n,e){var r,t=this._,i=HQe(n+"",t),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=jre(t[r],n.name,e);else if(null==e)for(r in t)t[r]=jre(t[r],n.name,null);return this}for(;++s<o;)if((r=(n=i[s]).type)&&(r=zQe(t[r],n.name)))return r},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new SS(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var r,s,t=new Array(r),i=0;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,r=(s=this._[n]).length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};const $re=Wre;var ES,B_,hm=0,I_=0,R_=0,TS=0,u5=0,LS=0,k_="object"==typeof performance&&performance.now?performance:Date,qre="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function wH(){return u5||(qre(OQe),u5=k_.now()+LS)}function OQe(){u5=0}function DS(){this._call=this._time=this._next=null}function Xre(n,e,t){var i=new DS;return i.restart(n,e,t),i}function Yre(){u5=(TS=k_.now())+LS,hm=I_=0;try{!function NQe(){wH(),++hm;for(var e,n=ES;n;)(e=u5-n._time)>=0&&n._call.call(void 0,e),n=n._next;--hm}()}finally{hm=0,function UQe(){for(var n,t,e=ES,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:ES=t);B_=n,bH(i)}(),u5=0}}function VQe(){var n=k_.now(),e=n-TS;e>1e3&&(LS-=e,TS=n)}function bH(n){hm||(I_&&(I_=clearTimeout(I_)),n-u5>24?(n<1/0&&(I_=setTimeout(Yre,n-k_.now()-LS)),R_&&(R_=clearInterval(R_))):(R_||(TS=k_.now(),R_=setInterval(VQe,1e3)),hm=1,qre(Yre)))}function Zre(n,e,t){var i=new DS;return i.restart(r=>{i.stop(),n(r+e)},e=null==e?0:+e,t),i}DS.prototype=Xre.prototype={constructor:DS,restart:function(n,e,t){if("function"!=typeof n)throw new TypeError("callback is not a function");t=(null==t?wH():+t)+(null==e?0:+e),!this._next&&B_!==this&&(B_?B_._next=this:ES=this,B_=this),this._call=n,this._time=t,bH()},stop:function(){this._call&&(this._call=null,this._time=1/0,bH())}};var GQe=$re("start","end","cancel","interrupt"),QQe=[];function BS(n,e,t,i,r,s){var o=n.__transition;if(o){if(t in o)return}else n.__transition={};!function WQe(n,e,t){var r,i=n.__transition;function o(l){var u,f,p,g;if(1!==t.state)return c();for(u in i)if((g=i[u]).name===t.name){if(3===g.state)return Zre(o);4===g.state?(g.state=6,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete i[u]):+u<e&&(g.state=6,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete i[u])}if(Zre(function(){3===t.state&&(t.state=4,t.timer.restart(a,t.delay,t.time),a(l))}),t.state=2,t.on.call("start",n,n.__data__,t.index,t.group),2===t.state){for(t.state=3,r=new Array(p=t.tween.length),u=0,f=-1;u<p;++u)(g=t.tween[u].value.call(n,n.__data__,t.index,t.group))&&(r[++f]=g);r.length=f+1}}function a(l){for(var u=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(c),t.state=5,1),f=-1,p=r.length;++f<p;)r[f].call(n,u);5===t.state&&(t.on.call("end",n,n.__data__,t.index,t.group),c())}function c(){for(var l in t.state=6,t.timer.stop(),delete i[e],i)return;delete n.__transition}i[e]=t,t.timer=Xre(function s(l){t.state=1,t.timer.restart(o,t.delay,t.time),t.delay<=l&&o(l-t.delay)},0,t.time)}(n,t,{name:e,index:i,group:r,on:GQe,tween:QQe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function MH(n,e){var t=Ch(n,e);if(t.state>0)throw new Error("too late; already scheduled");return t}function D0(n,e){var t=Ch(n,e);if(t.state>3)throw new Error("too late; already running");return t}function Ch(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function kS(n,e){var i,r,o,t=n.__transition,s=!0;if(t){for(o in e=null==e?null:e+"",t)(i=t[o]).name===e?(r=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]):s=!1;s&&delete n.__transition}}function H6(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var FS,nse=180/Math.PI,SH={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ise(n,e,t,i,r,s){var o,a,c;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(c=n*t+e*i)&&(t-=n*c,i-=e*c),(a=Math.sqrt(t*t+i*i))&&(t/=a,i/=a,c/=a),n*i<e*t&&(n=-n,e=-e,c=-c,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*nse,skewX:Math.atan(c)*nse,scaleX:o,scaleY:a}}function rse(n,e,t,i){function r(l){return l.length?l.pop()+" ":""}return function(l,u){var f=[],p=[];return l=n(l),u=n(u),function s(l,u,f,p,g,v){if(l!==f||u!==p){var _=g.push("translate(",null,e,null,t);v.push({i:_-4,x:H6(l,f)},{i:_-2,x:H6(u,p)})}else(f||p)&&g.push("translate("+f+e+p+t)}(l.translateX,l.translateY,u.translateX,u.translateY,f,p),function o(l,u,f,p){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),p.push({i:f.push(r(f)+"rotate(",null,i)-2,x:H6(l,u)})):u&&f.push(r(f)+"rotate("+u+i)}(l.rotate,u.rotate,f,p),function a(l,u,f,p){l!==u?p.push({i:f.push(r(f)+"skewX(",null,i)-2,x:H6(l,u)}):u&&f.push(r(f)+"skewX("+u+i)}(l.skewX,u.skewX,f,p),function c(l,u,f,p,g,v){if(l!==f||u!==p){var _=g.push(r(g)+"scale(",null,",",null,")");v.push({i:_-4,x:H6(l,f)},{i:_-2,x:H6(u,p)})}else(1!==f||1!==p)&&g.push(r(g)+"scale("+f+","+p+")")}(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,p),l=u=null,function(g){for(var w,v=-1,_=p.length;++v<_;)f[(w=p[v]).i]=w.x(g);return f.join("")}}}var qQe=rse(function $Qe(n){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?SH:ise(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),XQe=rse(function KQe(n){return null!=n&&(FS||(FS=document.createElementNS("http://www.w3.org/2000/svg","g")),FS.setAttribute("transform",n),n=FS.transform.baseVal.consolidate())?ise((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):SH},", ",")",")");function YQe(n,e){var t,i;return function(){var r=D0(this,n),s=r.tween;if(s!==t)for(var o=0,a=(i=t=s).length;o<a;++o)if(i[o].name===e){(i=i.slice()).splice(o,1);break}r.tween=i}}function ZQe(n,e,t){var i,r;if("function"!=typeof t)throw new Error;return function(){var s=D0(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:t},c=0,l=r.length;c<l;++c)if(r[c].name===e){r[c]=a;break}c===l&&r.push(a)}s.tween=r}}function EH(n,e,t){var i=n._id;return n.each(function(){var r=D0(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return Ch(r,i).value[e]}}function TH(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function sse(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function F_(){}var PS=1/.7,fm="\\s*([+-]?\\d+)\\s*",H_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",I0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eWe=/^#([0-9a-f]{3,8})$/,tWe=new RegExp(`^rgb\\(${fm},${fm},${fm}\\)$`),nWe=new RegExp(`^rgb\\(${I0},${I0},${I0}\\)$`),iWe=new RegExp(`^rgba\\(${fm},${fm},${fm},${H_}\\)$`),rWe=new RegExp(`^rgba\\(${I0},${I0},${I0},${H_}\\)$`),sWe=new RegExp(`^hsl\\(${H_},${I0},${I0}\\)$`),oWe=new RegExp(`^hsla\\(${H_},${I0},${I0},${H_}\\)$`),ose={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ase(){return this.rgb().formatHex()}function cse(){return this.rgb().formatRgb()}function z_(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=eWe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),6===t?lse(e):3===t?new j3(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===t?HS(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===t?HS(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=tWe.exec(n))?new j3(e[1],e[2],e[3],1):(e=nWe.exec(n))?new j3(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=iWe.exec(n))?HS(e[1],e[2],e[3],e[4]):(e=rWe.exec(n))?HS(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=sWe.exec(n))?fse(e[1],e[2]/100,e[3]/100,1):(e=oWe.exec(n))?fse(e[1],e[2]/100,e[3]/100,e[4]):ose.hasOwnProperty(n)?lse(ose[n]):"transparent"===n?new j3(NaN,NaN,NaN,0):null}function lse(n){return new j3(n>>16&255,n>>8&255,255&n,1)}function HS(n,e,t,i){return i<=0&&(n=e=t=NaN),new j3(n,e,t,i)}function lWe(n){return n instanceof F_||(n=z_(n)),n?new j3((n=n.rgb()).r,n.g,n.b,n.opacity):new j3}function zS(n,e,t,i){return 1===arguments.length?lWe(n):new j3(n,e,t,i??1)}function j3(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}function use(){return`#${f5(this.r)}${f5(this.g)}${f5(this.b)}`}function hse(){const n=OS(this.opacity);return`${1===n?"rgb(":"rgba("}${h5(this.r)}, ${h5(this.g)}, ${h5(this.b)}${1===n?")":`, ${n})`}`}function OS(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function h5(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function f5(n){return((n=h5(n))<16?"0":"")+n.toString(16)}function fse(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Mh(n,e,t,i)}function dse(n){if(n instanceof Mh)return new Mh(n.h,n.s,n.l,n.opacity);if(n instanceof F_||(n=z_(n)),!n)return new Mh;if(n instanceof Mh)return n;var e=(n=n.rgb()).r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,c=(s+r)/2;return a?(o=e===s?(t-i)/a+6*(t<i):t===s?(i-e)/a+2:(e-t)/a+4,a/=c<.5?s+r:2-s-r,o*=60):a=c>0&&c<1?0:o,new Mh(o,a,c,n.opacity)}function Mh(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}function pse(n){return(n=(n||0)%360)<0?n+360:n}function NS(n){return Math.max(0,Math.min(1,n||0))}function LH(n,e,t){return 255*(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)}function gse(n,e,t,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*i+o*r)/6}TH(F_,z_,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:ase,formatHex:ase,formatHex8:function aWe(){return this.rgb().formatHex8()},formatHsl:function cWe(){return dse(this).formatHsl()},formatRgb:cse,toString:cse}),TH(j3,zS,sse(F_,{brighter(n){return n=null==n?PS:Math.pow(PS,n),new j3(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new j3(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new j3(h5(this.r),h5(this.g),h5(this.b),OS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:use,formatHex:use,formatHex8:function uWe(){return`#${f5(this.r)}${f5(this.g)}${f5(this.b)}${f5(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:hse,toString:hse})),TH(Mh,function hWe(n,e,t,i){return 1===arguments.length?dse(n):new Mh(n,e,t,i??1)},sse(F_,{brighter(n){return n=null==n?PS:Math.pow(PS,n),new Mh(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new Mh(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new j3(LH(n>=240?n-240:n+120,r,i),LH(n,r,i),LH(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Mh(pse(this.h),NS(this.s),NS(this.l),OS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=OS(this.opacity);return`${1===n?"hsl(":"hsla("}${pse(this.h)}, ${100*NS(this.s)}%, ${100*NS(this.l)}%${1===n?")":`, ${n})`}`}}));const mse=n=>()=>n;function vse(n,e){var t=e-n;return t?function Ase(n,e){return function(t){return n+t*e}}(n,t):mse(isNaN(n)?e:n)}const _se=function n(e){var t=function gWe(n){return 1==(n=+n)?vse:function(e,t){return t-e?function pWe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}(e,t,n):mse(isNaN(e)?t:e)}}(e);function i(r,s){var o=t((r=zS(r)).r,(s=zS(s)).r),a=t(r.g,s.g),c=t(r.b,s.b),l=vse(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=c(u),r.opacity=l(u),r+""}}return i.gamma=n,i}(1);function yse(n){return function(e){var o,a,t=e.length,i=new Array(t),r=new Array(t),s=new Array(t);for(o=0;o<t;++o)a=zS(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=n(i),r=n(r),s=n(s),a.opacity=1,function(c){return a.r=i(c),a.g=r(c),a.b=s(c),a+""}}}yse(function fWe(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),r=n[i],s=n[i+1];return gse((t-i/e)*e,i>0?n[i-1]:2*r-s,r,s,i<e-1?n[i+2]:2*s-r)}}),yse(function dWe(n){var e=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e);return gse((t-i/e)*e,n[(i+e-1)%e],n[i%e],n[(i+1)%e],n[(i+2)%e])}});var DH=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,IH=new RegExp(DH.source,"g");function vWe(n,e){var i,r,s,t=DH.lastIndex=IH.lastIndex=0,o=-1,a=[],c=[];for(n+="",e+="";(i=DH.exec(n))&&(r=IH.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:H6(i,r)})),t=IH.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?function AWe(n){return function(e){return n(e)+""}}(c[0].x):function mWe(n){return function(){return n}}(e):(e=c.length,function(l){for(var f,u=0;u<e;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function wse(n,e){var t;return("number"==typeof e?H6:e instanceof z_?_se:(t=z_(e))?(e=t,_se):vWe)(n,e)}function _We(n){return function(){this.removeAttribute(n)}}function yWe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function wWe(n,e,t){var i,s,r=t+"";return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function bWe(n,e,t){var i,s,r=t+"";return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function xWe(n,e,t){var i,r,s;return function(){var o,c,a=t(this);return null==a?void this.removeAttribute(n):(o=this.getAttribute(n))===(c=a+"")?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}function CWe(n,e,t){var i,r,s;return function(){var o,c,a=t(this);return null==a?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local))===(c=a+"")?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}function SWe(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function EWe(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function TWe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&EWe(n,s)),t}return r._value=e,r}function LWe(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&SWe(n,s)),t}return r._value=e,r}function IWe(n,e){return function(){MH(this,n).delay=+e.apply(this,arguments)}}function RWe(n,e){return e=+e,function(){MH(this,n).delay=e}}function kWe(n,e){return function(){D0(this,n).duration=+e.apply(this,arguments)}}function FWe(n,e){return e=+e,function(){D0(this,n).duration=e}}function HWe(n,e){if("function"!=typeof e)throw new Error;return function(){D0(this,n).ease=e}}function QWe(n,e,t){var i,r,s=function GWe(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(e)?MH:D0;return function(){var o=s(this,n),a=o.on;a!==i&&(r=(i=a).copy()).on(e,t),o.on=r}}var XWe=D_.prototype.constructor;function bse(n){return function(){this.style.removeProperty(n)}}function ije(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function rje(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&ije(n,o,t)),i}return s._value=e,s}function lje(n){return function(e){this.textContent=n.call(this,e)}}function uje(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&&(e=(t=r)&&lje(r)),e}return i._value=n,i}var pje=0;function Zf(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function xse(){return++pje}var Jf=D_.prototype;Zf.prototype=function gje(n){return D_().transition(n)}.prototype={constructor:Zf,select:function KWe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=vH(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var u,f,a=i[o],c=a.length,l=s[o]=new Array(c),p=0;p<c;++p)(u=a[p])&&(f=n.call(u,u.__data__,p,a))&&("__data__"in u&&(f.__data__=u.__data__),l[p]=f,BS(l[p],e,t,p,l,Ch(u,t)));return new Zf(s,this._parents,e,t)},selectAll:function qWe(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=Ire(n));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var u,c=i[a],l=c.length,f=0;f<l;++f)if(u=c[f]){for(var g,p=n.call(u,u.__data__,f,c),v=Ch(u,t),_=0,w=p.length;_<w;++_)(g=p[_])&&BS(g,e,t,_,p,v);s.push(p),o.push(u)}return new Zf(s,o,e,t)},selectChild:Jf.selectChild,selectChildren:Jf.selectChildren,filter:function VWe(n){"function"!=typeof n&&(n=Rre(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var c,s=e[r],o=s.length,a=i[r]=[],l=0;l<o;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&a.push(c);return new Zf(i,this._parents,this._name,this._id)},merge:function UWe(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,s=Math.min(i,t.length),o=new Array(i),a=0;a<s;++a)for(var p,c=e[a],l=t[a],u=c.length,f=o[a]=new Array(u),g=0;g<u;++g)(p=c[g]||l[g])&&(f[g]=p);for(;a<i;++a)o[a]=e[a];return new Zf(o,this._parents,this._name,this._id)},selection:function YWe(){return new XWe(this._groups,this._parents)},transition:function fje(){for(var n=this._name,e=this._id,t=xse(),i=this._groups,r=i.length,s=0;s<r;++s)for(var c,o=i[s],a=o.length,l=0;l<a;++l)if(c=o[l]){var u=Ch(c,e);BS(c,n,t,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Zf(i,this._parents,n,t)},call:Jf.call,nodes:Jf.nodes,node:Jf.node,size:Jf.size,empty:Jf.empty,each:Jf.each,on:function WWe(n,e){var t=this._id;return arguments.length<2?Ch(this.node(),t).on.on(n):this.each(QWe(t,n,e))},attr:function MWe(n,e){var t=MS(n),i="transform"===t?XQe:wse;return this.attrTween(n,"function"==typeof e?(t.local?CWe:xWe)(t,i,EH(this,"attr."+n,e)):null==e?(t.local?yWe:_We)(t):(t.local?bWe:wWe)(t,i,e))},attrTween:function DWe(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;var i=MS(n);return this.tween(t,(i.local?TWe:LWe)(i,e))},style:function nje(n,e,t){var i="transform"==(n+="")?qQe:wse;return null==e?this.styleTween(n,function ZWe(n,e){var t,i,r;return function(){var s=um(this,n),o=(this.style.removeProperty(n),um(this,n));return s===o?null:s===t&&o===i?r:r=e(t=s,i=o)}}(n,i)).on("end.style."+n,bse(n)):"function"==typeof e?this.styleTween(n,function eje(n,e,t){var i,r,s;return function(){var o=um(this,n),a=t(this),c=a+"";return null==a&&(this.style.removeProperty(n),c=a=um(this,n)),o===c?null:o===i&&c===r?s:(r=c,s=e(i=o,a))}}(n,i,EH(this,"style."+n,e))).each(function tje(n,e){var t,i,r,a,s="style."+e,o="end."+s;return function(){var c=D0(this,n),l=c.on,u=null==c.value[s]?a||(a=bse(e)):void 0;(l!==t||r!==u)&&(i=(t=l).copy()).on(o,r=u),c.on=i}}(this._id,n)):this.styleTween(n,function JWe(n,e,t){var i,s,r=t+"";return function(){var o=um(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}(n,i,e),t).on("end.style."+n,null)},styleTween:function sje(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,rje(n,e,t??""))},text:function cje(n){return this.tween("text","function"==typeof n?function aje(n){return function(){var e=n(this);this.textContent=e??""}}(EH(this,"text",n)):function oje(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function hje(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;return this.tween(e,uje(n))},remove:function $We(){return this.on("end.remove",function jWe(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}(this._id))},tween:function JQe(n,e){var t=this._id;if(n+="",arguments.length<2){for(var o,i=Ch(this.node(),t).tween,r=0,s=i.length;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((null==e?YQe:ZQe)(t,n,e))},delay:function BWe(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?IWe:RWe)(e,n)):Ch(this.node(),e).delay},duration:function PWe(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?kWe:FWe)(e,n)):Ch(this.node(),e).duration},ease:function zWe(n){var e=this._id;return arguments.length?this.each(HWe(e,n)):Ch(this.node(),e).ease},easeVarying:function NWe(n){if("function"!=typeof n)throw new Error;return this.each(function OWe(n,e){return function(){var t=e.apply(this,arguments);if("function"!=typeof t)throw new Error;D0(this,n).ease=t}}(this._id,n))},end:function dje(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var a={value:o},c={value:function(){0==--r&&s()}};t.each(function(){var l=D0(this,i),u=l.on;u!==n&&((e=(n=u).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),0===r&&s()})},[Symbol.iterator]:Jf[Symbol.iterator]};var Aje={time:null,delay:0,duration:250,ease:function mje(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function vje(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}D_.prototype.interrupt=function jQe(n){return this.each(function(){kS(this,n)})},D_.prototype.transition=function _je(n){var e,t;n instanceof Zf?(e=n._id,n=n._name):(e=xse(),(t=Aje).time=wH(),n=null==n?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var c,o=i[s],a=o.length,l=0;l<a;++l)(c=o[l])&&BS(c,n,e,l,o,t||vje(c,e));return new Zf(i,this._parents,n,e)};Math;function O_(n){return{type:n}}function Lse(n){for(var i,e=-1,t=n.length,r=n[t-1],s=0;++e<t;)s+=(i=r)[1]*(r=n[e])[0]-i[0]*r[1];return s/2}function z6(n,e){if(n=function Eje(n){let e;for(;e=n.sourceEvent;)n=e;return n}(n),void 0===e&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}function go(n){return"string"==typeof n?new Ru([[document.querySelector(n)]],[document.documentElement]):new Ru([[n]],Gre)}["w","e"].map(O_),["n","s"].map(O_),["n","w","e","s","nw","ne","sw","se"].map(O_);const PH={capture:!0,passive:!1};function HH(n){n.preventDefault(),n.stopImmediatePropagation()}function Tje(n){var e=n.document.documentElement,t=go(n).on("dragstart.drag",HH,PH);"onselectstart"in e?t.on("selectstart.drag",HH,PH):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Lje(n,e){var t=n.document.documentElement,i=go(n).on("dragstart.drag",null);e&&(i.on("click.drag",HH,PH),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function Dse(n){return((n=Math.exp(n))+1/n)/2}const Bje=function n(e,t,i){function r(s,o){var w,b,a=s[0],c=s[1],l=s[2],p=o[2],g=o[0]-a,v=o[1]-c,_=g*g+v*v;if(_<1e-12)b=Math.log(p/l)/e,w=function(O){return[a+O*g,c+O*v,l*Math.exp(e*O*b)]};else{var x=Math.sqrt(_),M=(p*p-l*l+i*_)/(2*l*t*x),E=(p*p-l*l-i*_)/(2*p*t*x),I=Math.log(Math.sqrt(M*M+1)-M),k=Math.log(Math.sqrt(E*E+1)-E);b=(k-I)/e,w=function(O){var R=O*b,P=Dse(I),Q=l/(t*x)*(P*function Rje(n){return((n=Math.exp(2*n))-1)/(n+1)}(e*R+I)-function Ije(n){return((n=Math.exp(n))-1/n)/2}(I));return[a+Q*g,c+Q*v,l*P/Dse(e*R+I)]}}return w.duration=1e3*b*e/Math.SQRT2,w}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o;return n(o,a,a*a)},r}(Math.SQRT2,2,4),GS=n=>()=>n;function kje(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function R0(n,e,t){this.k=n,this.x=e,this.y=t}R0.prototype={constructor:R0,scale:function(n){return 1===n?this:new R0(this.k*n,this.x,this.y)},translate:function(n,e){return 0===n&0===e?this:new R0(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zH=new R0(1,0,0);function OH(n){n.stopImmediatePropagation()}function N_(n){n.preventDefault(),n.stopImmediatePropagation()}function Pje(n){return!(n.ctrlKey&&"wheel"!==n.type||n.button)}function Hje(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n).hasAttribute("viewBox")?[[(n=n.viewBox.baseVal).x,n.y],[n.x+n.width,n.y+n.height]]:[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]:[[0,0],[n.clientWidth,n.clientHeight]]}function Ise(){return this.__zoom||zH}function zje(n){return-n.deltaY*(1===n.deltaMode?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function Oje(){return navigator.maxTouchPoints||"ontouchstart"in this}function Nje(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Rse(){var u,f,p,n=Pje,e=Hje,t=Nje,i=zje,r=Oje,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Bje,l=$re("start","zoom","end"),g=500,_=0,w=10;function b(G){G.property("__zoom",Ise).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",Q).filter(r).on("touchstart.zoom",J).on("touchmove.zoom",Ce).on("touchend.zoom touchcancel.zoom",Ae).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(G,ue){return(ue=Math.max(s[0],Math.min(s[1],ue)))===G.k?G:new R0(ue,G.x,G.y)}function M(G,ue,X){var le=ue[0]-X[0]*G.k,de=ue[1]-X[1]*G.k;return le===G.x&&de===G.y?G:new R0(G.k,le,de)}function E(G){return[(+G[0][0]+ +G[1][0])/2,(+G[0][1]+ +G[1][1])/2]}function I(G,ue,X,le){G.on("start.zoom",function(){k(this,arguments).event(le).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(le).end()}).tween("zoom",function(){var de=this,pe=arguments,Fe=k(de,pe).event(le),st=e.apply(de,pe),ze=null==X?E(st):"function"==typeof X?X.apply(de,pe):X,_t=Math.max(st[1][0]-st[0][0],st[1][1]-st[0][1]),pt=de.__zoom,kt="function"==typeof ue?ue.apply(de,pe):ue,wt=c(pt.invert(ze).concat(_t/pt.k),kt.invert(ze).concat(_t/kt.k));return function(Xt){if(1===Xt)Xt=kt;else{var un=wt(Xt),_n=_t/un[2];Xt=new R0(_n,ze[0]-un[0]*_n,ze[1]-un[1]*_n)}Fe.zoom(null,Xt)}})}function k(G,ue,X){return!X&&G.__zooming||new O(G,ue)}function O(G,ue){this.that=G,this.args=ue,this.active=0,this.sourceEvent=null,this.extent=e.apply(G,ue),this.taps=0}function R(G,...ue){if(n.apply(this,arguments)){var X=k(this,ue).event(G),le=this.__zoom,de=Math.max(s[0],Math.min(s[1],le.k*Math.pow(2,i.apply(this,arguments)))),pe=z6(G);if(X.wheel)(X.mouse[0][0]!==pe[0]||X.mouse[0][1]!==pe[1])&&(X.mouse[1]=le.invert(X.mouse[0]=pe)),clearTimeout(X.wheel);else{if(le.k===de)return;X.mouse=[pe,le.invert(pe)],kS(this),X.start()}N_(G),X.wheel=setTimeout(Fe,150),X.zoom("mouse",t(M(x(le,de),X.mouse[0],X.mouse[1]),X.extent,o))}function Fe(){X.wheel=null,X.end()}}function P(G,...ue){if(!p&&n.apply(this,arguments)){var X=G.currentTarget,le=k(this,ue,!0).event(G),de=go(G.view).on("mousemove.zoom",ze,!0).on("mouseup.zoom",_t,!0),pe=z6(G,X),Fe=G.clientX,st=G.clientY;Tje(G.view),OH(G),le.mouse=[pe,this.__zoom.invert(pe)],kS(this),le.start()}function ze(pt){if(N_(pt),!le.moved){var kt=pt.clientX-Fe,wt=pt.clientY-st;le.moved=kt*kt+wt*wt>_}le.event(pt).zoom("mouse",t(M(le.that.__zoom,le.mouse[0]=z6(pt,X),le.mouse[1]),le.extent,o))}function _t(pt){de.on("mousemove.zoom mouseup.zoom",null),Lje(pt.view,le.moved),N_(pt),le.event(pt).end()}}function Q(G,...ue){if(n.apply(this,arguments)){var X=this.__zoom,le=z6(G.changedTouches?G.changedTouches[0]:G,this),de=X.invert(le),pe=X.k*(G.shiftKey?.5:2),Fe=t(M(x(X,pe),le,de),e.apply(this,ue),o);N_(G),a>0?go(this).transition().duration(a).call(I,Fe,le,G):go(this).call(b.transform,Fe,le,G)}}function J(G,...ue){if(n.apply(this,arguments)){var pe,Fe,st,ze,X=G.touches,le=X.length,de=k(this,ue,G.changedTouches.length===le).event(G);for(OH(G),Fe=0;Fe<le;++Fe)ze=[ze=z6(st=X[Fe],this),this.__zoom.invert(ze),st.identifier],de.touch0?!de.touch1&&de.touch0[2]!==ze[2]&&(de.touch1=ze,de.taps=0):(de.touch0=ze,pe=!0,de.taps=1+!!u);u&&(u=clearTimeout(u)),pe&&(de.taps<2&&(f=ze[0],u=setTimeout(function(){u=null},g)),kS(this),de.start())}}function Ce(G,...ue){if(this.__zooming){var pe,Fe,st,ze,X=k(this,ue).event(G),le=G.changedTouches,de=le.length;for(N_(G),pe=0;pe<de;++pe)st=z6(Fe=le[pe],this),X.touch0&&X.touch0[2]===Fe.identifier?X.touch0[0]=st:X.touch1&&X.touch1[2]===Fe.identifier&&(X.touch1[0]=st);if(Fe=X.that.__zoom,X.touch1){var _t=X.touch0[0],pt=X.touch0[1],kt=X.touch1[0],wt=X.touch1[1],Xt=(Xt=kt[0]-_t[0])*Xt+(Xt=kt[1]-_t[1])*Xt,un=(un=wt[0]-pt[0])*un+(un=wt[1]-pt[1])*un;Fe=x(Fe,Math.sqrt(Xt/un)),st=[(_t[0]+kt[0])/2,(_t[1]+kt[1])/2],ze=[(pt[0]+wt[0])/2,(pt[1]+wt[1])/2]}else{if(!X.touch0)return;st=X.touch0[0],ze=X.touch0[1]}X.zoom("touch",t(M(Fe,st,ze),X.extent,o))}}function Ae(G,...ue){if(this.__zooming){var pe,Fe,X=k(this,ue).event(G),le=G.changedTouches,de=le.length;for(OH(G),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),pe=0;pe<de;++pe)Fe=le[pe],X.touch0&&X.touch0[2]===Fe.identifier?delete X.touch0:X.touch1&&X.touch1[2]===Fe.identifier&&delete X.touch1;if(X.touch1&&!X.touch0&&(X.touch0=X.touch1,delete X.touch1),X.touch0)X.touch0[1]=this.__zoom.invert(X.touch0[0]);else if(X.end(),2===X.taps&&(Fe=z6(Fe,this),Math.hypot(f[0]-Fe[0],f[1]-Fe[1])<w)){var st=go(this).on("dblclick.zoom");st&&st.apply(this,arguments)}}}return b.transform=function(G,ue,X,le){var de=G.selection?G.selection():G;de.property("__zoom",Ise),G!==de?I(G,ue,X,le):de.interrupt().each(function(){k(this,arguments).event(le).start().zoom(null,"function"==typeof ue?ue.apply(this,arguments):ue).end()})},b.scaleBy=function(G,ue,X,le){b.scaleTo(G,function(){var de=this.__zoom.k,pe="function"==typeof ue?ue.apply(this,arguments):ue;return de*pe},X,le)},b.scaleTo=function(G,ue,X,le){b.transform(G,function(){var de=e.apply(this,arguments),pe=this.__zoom,Fe=null==X?E(de):"function"==typeof X?X.apply(this,arguments):X,st=pe.invert(Fe),ze="function"==typeof ue?ue.apply(this,arguments):ue;return t(M(x(pe,ze),Fe,st),de,o)},X,le)},b.translateBy=function(G,ue,X,le){b.transform(G,function(){return t(this.__zoom.translate("function"==typeof ue?ue.apply(this,arguments):ue,"function"==typeof X?X.apply(this,arguments):X),e.apply(this,arguments),o)},null,le)},b.translateTo=function(G,ue,X,le,de){b.transform(G,function(){var pe=e.apply(this,arguments),Fe=this.__zoom,st=null==le?E(pe):"function"==typeof le?le.apply(this,arguments):le;return t(zH.translate(st[0],st[1]).scale(Fe.k).translate("function"==typeof ue?-ue.apply(this,arguments):-ue,"function"==typeof X?-X.apply(this,arguments):-X),pe,o)},le,de)},O.prototype={event:function(G){return G&&(this.sourceEvent=G),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(G,ue){return this.mouse&&"mouse"!==G&&(this.mouse[1]=ue.invert(this.mouse[0])),this.touch0&&"touch"!==G&&(this.touch0[1]=ue.invert(this.touch0[0])),this.touch1&&"touch"!==G&&(this.touch1[1]=ue.invert(this.touch1[0])),this.that.__zoom=ue,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(G){var ue=go(this.that).datum();l.call(G,this.that,new kje(G,{sourceEvent:this.sourceEvent,target:b,type:G,transform:this.that.__zoom,dispatch:l}),ue)}},b.wheelDelta=function(G){return arguments.length?(i="function"==typeof G?G:GS(+G),b):i},b.filter=function(G){return arguments.length?(n="function"==typeof G?G:GS(!!G),b):n},b.touchable=function(G){return arguments.length?(r="function"==typeof G?G:GS(!!G),b):r},b.extent=function(G){return arguments.length?(e="function"==typeof G?G:GS([[+G[0][0],+G[0][1]],[+G[1][0],+G[1][1]]]),b):e},b.scaleExtent=function(G){return arguments.length?(s[0]=+G[0],s[1]=+G[1],b):[s[0],s[1]]},b.translateExtent=function(G){return arguments.length?(o[0][0]=+G[0][0],o[1][0]=+G[1][0],o[0][1]=+G[0][1],o[1][1]=+G[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(G){return arguments.length?(t=G,b):t},b.duration=function(G){return arguments.length?(a=+G,b):a},b.interpolate=function(G){return arguments.length?(c=G,b):c},b.on=function(){var G=l.on.apply(l,arguments);return G===l?b:G},b.clickDistance=function(G){return arguments.length?(_=(G=+G)*G,b):Math.sqrt(_)},b.tapDistance=function(G){return arguments.length?(w=+G,b):w},b}let QS={};class Sl{constructor(){this.classes=[],this.transform="",this.selector="",this.index=0,this.visible=!0,this.outOfDesign=!1,this.theoretic=!1,this.loaded=!1,this._lineThickness=1,this.tooltip=e=>`<b>${this.name?this.name:this.selector}</b>`}get lineThickness(){return this._lineThickness}set lineThickness(e){this._lineThickness=e}draw(e){return(0,wi.Z)(function*(){})()}redraw(e){}init(e,t){}show(e){return(this.floor===this.svgUpdate.floor||this.floor===at.all)&&!this.theoretic&&this.visible&&!this.outOfDesign}update(e){var t=this;return(0,wi.Z)(function*(){t.svgUpdate=e,t.onUpdate(t.svgUpdate.theme);const i=t.svgUpdate.floor;t.meterPerPixel=t.svgUpdate.meterPerPixel,t.svgUpdate.redrawAll&&(void 0!==t.svgUpdate.theme.showTower?void 0===t.floor&&t.parent&&t.parent.floor&&(t.floor=t.parent.floor):t.floor=at.all,t.init(i,t.svgUpdate.theme),yield t.draw(i)),t.show(i)&&(yield t.redraw(i))})()}createSelector(){if(!this.selector)if(this.parent&&(this.parent.selector?this.selector=this.parent.selector:(this.floor===at.ground&&(this.selector="L0"),this.floor===at.top&&(this.selector="L1"))),void 0!==this.name)this.selector+=`-${this.name.replace(/\s/g,"")}`;else{let e=this.constructor.name;"sensorType"in this&&(e=this.sensorType),e in QS||(QS[e]=0),QS[e]++,this.selector+=`-${e}-${QS[e]}`}}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),this.svg.node().classList.add("selected")}setClass(e){!e.node()||!this.classes||this.classes.forEach(t=>{e.node().classList.add(t)})}}class NH extends Sl{constructor(e){super(),this.coords=[],this.floor=at.ground,this.theoretic=!1,this.tooltip=()=>(console.log(this.selector),`Footprint\n    <br>${this.floor}-level\n    <br>${this.area()}m2`),this.area=()=>Math.abs(cn(Lse(this.coords),1)),Object.assign(this,e)}setup(){}draw(e){var t=this;return(0,wi.Z)(function*(){void 0===t.svg&&(t.svg=go(`#${t.selector}`),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.classes.push("bg-fill")),t.show(e)?(t.svg.attr("points",t.coords.join(" ")),t.setClass(t.svg)):t.svg.attr("points","")})()}}let V_={};var Hn=(()=>{return(n=Hn||(Hn={})).outer="outer",n.inner="inner",n.theoretic="theoretic",Hn;var n})(),lt=(()=>{return(n=lt||(lt={})).in="in",n.out="out",n.left="left",n.right="right",lt;var n})(),ai=(()=>{return(n=ai||(ai={})).inside="inside",n.outside="outside",n.tower="tower",n.straight="straight",ai;var n})();class si extends Sl{constructor(e){super(),this.origin=[0,0],this.orientation="",this.ceiling=-1,this.gable=!1,this.tower=!1,this.tooltip=()=>`Wall <b>${this.orientation}</b> (${this.parent instanceof NH?"outer wall":"of "+this.parent+" room"} ) \n    <br>Inside ${this.getLength(lt.in,2)} m2\n    <br>Outside ${this.outerWallLength=this.getLength(lt.out,2)} m2`,Object.assign(this,e)}createSelector(){this.selector=this.parent.selector.replace("Footprint-1","outer");const e=R1(this.sides[lt.in][0],this.sides[lt.in][1]);this.orientation=0===e?"North":45===e?"NortEast":-45===e||315===e?"NorthWest":90===e?"East":180===e?"South":270===e||-90===e?"West":`${e}`.split(".")[0],this.selector+=`-${this.orientation}Wall`,this.selector in V_||(V_[this.selector]=0),V_[this.selector]++,V_[this.selector]>1&&(this.selector+=`-${V_[this.selector]}`)}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg&&(t.svg=go(`#${t.selector}`),t.svgOrigin=t.svg.select(".wall-origin"),t.svgLeft=t.svg.select(".wall-left"),t.svgRight=t.svg.select(".wall-right"),t.svgFill=t.svg.select(".wall-fill"),t.type===Hn.outer&&(t.thickness=t.parent.parent.wallOuterThickness),t.type===Hn.inner&&(t.thickness=t.parent.parent.wallInnerThickness),t.svg.node()&&t.svg.node().classList.add(`type-${t.type}`)),!t.show(e))return t.svgFill.attr("points",""),t.svgLeft.attr("points",""),t.svgRight.attr("points",""),void t.svgOrigin.attr("r","0");t.svgOrigin.attr("cx",t.origin[0]).attr("cy",t.origin[1]),t.sides.in&&t.sides.out&&t.svgFill.attr("points",[...t.sides.in,...[...t.sides.out].reverse()].join(" "));for(let i of Object.keys(lt)){const r=i;if(!(r in t.sides))return;let s;s=r===lt.in?t.svgLeft:t.svgRight,s.attr("points",t.sides[r].join(" ")),s.node()&&s.node().classList.add(`side-${r}`)}t.innerWallLength=t.getLength(lt.in),t.outerWallLength=t.getLength(lt.out)})()}redraw(e){this.svgOrigin&&this.svgOrigin.attr("r",this.meterPerPixel*this.lineThickness*3),this.svgLeft&&this.svgLeft.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===Hn.theoretic?4:1)),this.svgRight&&this.svgRight.attr("stroke-width",this.meterPerPixel*this.lineThickness*(this.type===Hn.theoretic?4:1))}getLength(e,t=2){const i=this.sides[e];return i&&i[0]&&i[1]?cn(Ma(...i),t):0}getArea(e,t=2){const i=this.getLength(e);return 0===i?0:cn(i*this.ceiling,t)}getPosition(e,t,i=0){const r=this.sides[e],s=this.getLength(e)*t,o=R1(r[0],r[1]);return po(o,s+i,r[0])}drawTheoretic(e,t,i){this.thickness=i,"n"===e&&this.drawByRoom(0,1,t,ai.straight,ai.straight),"e"===e&&this.drawByRoom(1,2,t,ai.straight,ai.straight),"s"===e&&this.drawByRoom(2,3,t,ai.straight,ai.straight),"w"===e&&this.drawByRoom(3,0,t,ai.straight,ai.straight)}drawByRoom(e,t,i,r,s){if(!1===this.visible)return void(this.sides={[lt.in]:[[0,0],[0,0]],[lt.out]:[[0,0],[0,0]]});this.type===Hn.inner?(this.thickness=i.wallInnerThickness,this.ceiling=i.cross.ceilingHeight):this.type===Hn.outer?(this.thickness=i.wallOuterThickness,this.ceiling=i.cross.outerWallHeight):this.type===Hn.theoretic?this.ceiling=i.cross.ceilingHeight:console.error(this);const o=(f,p,g)=>p===ai.inside&&0===f?g+45:p===ai.inside&&1===f||p===ai.outside&&0===f?g-45:p===ai.outside&&1===f?g+45:p===ai.tower&&0===f?g+67.5:p===ai.tower&&1===f?g-67.5:p===ai.straight?g:void 0,a=f=>{const p=Math.sqrt(this.thickness**2*2),g=i.tower;return f===ai.inside||f===ai.outside?p:f===ai.tower?Ma(g.innerCoords[0],g.outerCoords[7]):f===ai.straight?this.thickness:void 0};let c=this.parent.coords[e],l=this.parent.coords[t];this.origin=c,this.innerWallLength=Ma(c,l);let u=R1(c,l)-90;this.sides={[lt.in]:[c,l]},this.type!==Hn.theoretic&&(this.sides[lt.out]=[po(o(0,r,u),a(r),c),po(o(1,s,u),a(s),l)])}getFootPrint(){if(!this.sides)return[];const e=[];return this.sides[lt.in]&&e.push(...this.sides[lt.in]),this.sides[lt.out]&&e.push(...this.sides[lt.out].reverse()),e}}class Gt extends Sl{constructor(e){super(),this.points=[],this.offset=[0,0],this.offsetWall=.3,this.elevation=.3,this.verticalCableLength=0,this.cableOnly=!1,this.sensorOnly=!1,this.wallSide=lt.in,this.cableLength=0,this.amount=1,this.fontSize=14,this.visible=!1,this.showBadge=!1,this.getSensorType=t=>Object.values(Ye).find(r=>t.includes(r)),this.tooltip=()=>{let t=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(t+=`<br>Cable length ${cn(this.cableLength,1)}m2`),this.group&&(t+=`<br>Group ${this.group}`),t},Object.assign(this,e)}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg){if(!t.show(e))return;(void 0===t.floor||e in t.parent)&&(t.floor=t.parent.floor),t.svg=go(`#${t.selector}.sensor-cable`),t.sensorType===Ye.temperature&&(t.sensorOnly=!0),t.cableOnly?(t.lineThickness=2,t.classes.push("sensor-room-cable")):(t.svgG=go(`#${t.selector}.sensor-g`),t.showBadge=t.amount>=2&&void 0!==t.svgG,t.svgIcon=go(`#${t.selector}.sensor-icon`),t.showBadge&&(t.svgBadge=t.svgG.append("g"),t.svgBadgeCircle=t.svgBadge.append("circle"),t.svgBadgeText=t.svgBadge.append("text"))),t.group&&t.classes.push(`el-group-${t.group}`),t.cableType&&t.classes.push(`cable-${t.cableType}`),t.classes.push(`sensor-${t.sensorType}`)}if(!t.show(e))return t.svgIcon&&t.svgIcon.attr("xlink:href",""),t.svg&&t.svg.attr("points",""),t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.attr("font-size",0),void(t.showBadge=!1);t.svgIcon&&t.svgIcon.attr("xlink:href",`#icon-${t.getSensorType(t.selector)}`);const i=t.calcOffsetWall();t.cableOnly||(t.svgIcon.attr("x",`${i[0]}px`).attr("y",`${i[1]}px`),t.setClass(t.svgG),t.setClass(t.svg)),t.showBadge?t.badge(i):(t.svgBadgeCircle&&t.svgBadgeCircle.attr("r",0),t.svgBadgeText&&t.svgBadgeText.text("")),t.sensorOnly||(t.svg.attr("points",t.cablePoints(i,e).join(" ")).attr("transform",t.transform),t.setClass(t.svg),t.cableLength=t.getLength())})()}redraw(e){!this.show(e)||(this.svgBadge&&(this.svgBadge.attr("stroke-width",this.meterPerPixel*this.lineThickness*1).attr("transform",`translate(${10*this.meterPerPixel} ${-10*this.meterPerPixel})`),this.svgBadgeCircle.attr("r",8*this.meterPerPixel),this.svgBadgeText.attr("font-size",this.meterPerPixel*this.fontSize).text(`${this.amount}`)),this.svg&&(this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.cableType===hh.OutsidePOE&&this.svg.attr("stroke-dasharray",`${this.meterPerPixel*this.lineThickness*10*.5} ${this.meterPerPixel*this.lineThickness*10}`)))}cablePoints(e,t){return this.show(t)?[e,...this.points]:[]}getLength(){let t=0;return this.points.forEach((i,r,s)=>{r+1!==this.points.length&&(t+=((i,r)=>Math.hypot(r[0]-i[0],r[1]-i[1]))(i,s[r+1]))}),cn(t+this.verticalCableLength+.3*this.amount)}badge(e){this.svgBadge.attr("class","sensor-badge"),this.svgBadgeCircle.attr("fill",2===this.amount?"white":"#333").attr("cx",e[0]).attr("cy",e[1]).attr("stroke","black"),this.svgBadgeText.attr("fill",2===this.amount?"black":"white").attr("x",e[0]).attr("y",e[1]).attr("text-anchor","middle").attr("class","sensor-badge-text").attr("stroke","none").attr("dominant-baseline","middle").text(`${this.amount}`)}calcOffsetWall(){if(this.parent instanceof si){const t=this.parent.sides[this.wallSide],i=R1(t[0],t[1]);return po(i+90,this.offsetWall,this.points[0])}return[this.points[0][0]+this.offset[0],this.points[0][1]+this.offset[1]]}select(){document.querySelectorAll("svg .selected").forEach((e,t)=>{e.classList.remove("selected")}),[Ye.socket,Ye.perilex].includes(this.sensorType)?document.querySelectorAll(`.el-group-${this.group}`).forEach((e,t)=>{e.classList.add("selected")}):(this.svg.node().classList.add("selected"),this.svgIcon.node().classList.add("selected"))}}let Vje=(()=>{class n{constructor(){this.class="base",this.html="dummy"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Sn({type:n,selectors:[["tooltip"]],hostAttrs:[1,"popup"],hostVars:2,hostBindings:function(t,i){2&t&&rp(i.class)},decls:2,vars:1,consts:[[3,"innerHtml"],[1,"popup-arrow","popup-arrow-mid"]],template:function(t,i){1&t&&Ue(0,"div",0)(1,"div",1),2&t&&ge("innerHtml",i.html,k3)},styles:[".popup-arrow-mid{left:calc(50% - 10px)!important;background:inherit}[_nghost-%COMP%]{position:relative!important}"]}),n})();class f1 extends Sl{constructor(e){super(),this.name="",this.coords=[],Object.assign(this,e)}draw(e){var t=this;return(0,wi.Z)(function*(){void 0===t.svg&&(t.svg=go(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.coords.join(" ")).attr("transform",t.transform),t.setClass(t.svg)):t.svg.attr("points","")})()}redraw(e){void 0===this.svg&&this.draw(e),this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness)}square(e,t,i){this.coords=[[i[0],i[1]],[i[0]+e,i[1]],[i[0]+e,i[1]+t],[i[0],i[1]+t]]}}class $3 extends Sl{constructor(e){super(),this.coords=[],this.dash=[],Object.assign(this,e)}draw(e){var t=this;return(0,wi.Z)(function*(){void 0===t.svg&&(t.svg=go(`#${t.selector}`)),t.show(e)?(t.svg.attr("points",t.coords.join(" ")).attr("transform",t.transform),t.setClass(t.svg)):t.svg.attr("points","")})()}redraw(e){void 0===this.svg&&this.draw(e),this.svg.attr("stroke-width",this.meterPerPixel*this.lineThickness).attr("stroke-dasharray",this.dash.map(t=>t*this.meterPerPixel*this.lineThickness).join(" "))}}class WS extends Sl{constructor(e){super(),this.d="",Object.assign(this,e)}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=go(`#${t.selector}`)}t.svg.attr("d",t.d).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}setClass(e){!e.node()||0===this.classes.length||e.node().classList.add(this.classes)}}class Qa extends Sl{constructor(e){super(),this.textRotate=0,this.fontSize=12,this.a=[0,0],this.b=[4,4],this.offsetPixels=0,this.offsetMeters=0,this.direction=90,this._lineThickness=.6,this.decimals=1,this.classes=["measure"],Object.assign(this,e)}between(e,t){return[e[0]+(t[0]-e[0])/2,e[1]+(t[1]-e[1])/2]}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg&&(t.svg=go(`#${t.selector}`),t.setClass(t.svg),t.svgLine=t.svg.append("polyline"),t.svgArrow1=t.svg.append("text"),t.svgArrow2=t.svg.append("text"),t.svgText=t.svg.append("text")),!t.show(e))return t.svgLine.attr("points",""),t.svgText.text(""),t.svgArrow1.text(""),void t.svgArrow2.text("");let i=[...t.a],r=[...t.b],s=[0,0];90===t.direction&&(i=[i[0],Math.max(i[1],r[1])],r=[r[0],Math.max(i[1],r[1])]),-90===t.direction&&(i=[i[0],Math.min(i[1],r[1])],r=[r[0],Math.min(i[1],r[1])]),0===t.direction&&(i=[Math.max(i[0],r[0]),i[1]],r=[Math.max(i[0],r[0]),r[1]]),180===t.direction&&(i=[Math.min(i[0],r[0]),i[1]],r=[Math.min(i[0],r[0]),r[1]]);const o=t.offsetPixels*t.meterPerPixel,a=po(t.direction,o+t.offsetMeters,i),c=po(t.direction,o+t.offsetMeters,r),u=t.between(a,c);var f=c[0]-a[0],p=c[1]-a[1],g=cn(Math.sqrt(f*f+p*p),t.decimals);t.svg.style("visibility",0===g?"hidden":""),t.svgLine.attr("points",[t.a,i,a,c,r,t.b].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`\n        translate(${u[0]+s[0]} ${u[1]+s[1]}) \n        rotate(${t.textRotate})\n        `).text(g);let v=90;[90,0].includes(t.direction)&&(v=-90),t.svgArrow1.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n        translate(${a[0]} ${a[1]}) \n        rotate(${t.direction+v})\n        `).text("<"),t.svgArrow2.attr("text-anchor","start").attr("dominant-baseline","central").attr("stroke-width",0).attr("transform",`\n          translate(${c[0]} ${c[1]}) \n          rotate(${t.direction+v+180})\n          `).text("<")})()}redraw(e){this.svgArrow2&&(this.svgArrow2.attr("font-size",l5(16,this.meterPerPixel,this.svgUpdate.print)),this.svgArrow1.attr("font-size",l5(16,this.meterPerPixel,this.svgUpdate.print))),this.svgText&&this.svgText.attr("font-size",l5(this.fontSize,this.meterPerPixel,this.svgUpdate.print)).attr("stroke-width",6*this.meterPerPixel),this.svgLine&&this.svgLine.attr("stroke-width",this.meterPerPixel*this.lineThickness)}}const El=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Uje=Math.PI/180,Gje=180/Math.PI;function VH(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(El[255&n]+El[n>>8&255]+El[n>>16&255]+El[n>>24&255]+"-"+El[255&e]+El[e>>8&255]+"-"+El[e>>16&15|64]+El[e>>24&255]+"-"+El[63&t|128]+El[t>>8&255]+"-"+El[t>>16&255]+El[t>>24&255]+El[255&i]+El[i>>8&255]+El[i>>16&255]+El[i>>24&255]).toLowerCase()}function Ei(n){return n*Uje}function kse(n){return n*Gje}class jS extends Sl{constructor(){super(),this.selector="g-distance",this.point1=[-999,-999],this.point2=void 0,this.onUpdate=()=>{},this.floor=at.all}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg&&(t.svg=go(`#${t.selector}`),t.svgCircle1=t.svg.append("circle").style("fill","var(--accent-color)").style("cursor","crosshair").attr("stroke-width",0),t.svgCircle2=t.svg.append("circle").style("cursor","crosshair").style("fill","var(--accent-color)").attr("stroke-width",0),t.svgLine=t.svg.append("polyline").style("stroke","var(--accent-color)"),t.svgText=t.svg.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").style("fill","var(--color-100)").style("stroke","var(--color-0)"),t.svgTextAngle=t.svg.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").style("fill","var(--color-100)").style("stroke","var(--color-0)")),!t.show(e))return void t.clear();if(t.svgCircle1.attr("cx",t.point1[0]).attr("cy",t.point1[1]),!t.point2)return void t.clearExceptFirst();t.svgCircle2.attr("cx",t.point2[0]).attr("cy",t.point2[1]),t.svgLine.attr("points",[t.point1,t.point2].join(" "));const i=Ma(t.point1,t.point2);var s;t.svgText.text((s=i)<1200?`${cn(1e3*s,0)}mm`:`${cn(s,3)}m`),t.svgTextAngle.text(`${Math.abs(R1(t.point1,t.point2,0))}\xb0`),t.setClass(t.svg)})()}clear(){this.clearExceptFirst(),this.svgCircle1.attr("cx",-999).attr("cy",-999)}clearExceptFirst(){this.svgCircle2.attr("cx",-999).attr("cy",-999),this.svgText.attr("transform","translate(-999, -999)"),this.svgTextAngle.attr("transform","translate(-999, -999)"),this.svgLine.attr("points",[])}redraw(e){if(this.svgCircle1&&this.svgCircle1.attr("r",4*this.meterPerPixel),this.svgCircle2&&this.svgCircle2.attr("r",4*this.meterPerPixel),this.svgLine&&this.svgLine.attr("stroke-width",2*this.meterPerPixel),this.svgText&&this.svgTextAngle&&this.point2){const[t,i]=we(xh(this.point1,this.point2),[0,-20*this.meterPerPixel]);this.svgText.attr("transform",`translate(${t}, ${i})`).attr("stroke-width",6*this.meterPerPixel).attr("font-size",16*this.meterPerPixel);const[r,s]=we(this.point1,[-20*this.meterPerPixel,0]);this.svgTextAngle.attr("transform",`translate(${r}, ${s})`).attr("stroke-width",6*this.meterPerPixel).attr("font-size",16*this.meterPerPixel)}}}var Bt=(()=>{return(n=Bt||(Bt={})).topFloor="topFloor",n.wallOutside="wallOutside",n.wallInside="wallInside",n.bendInside="bendInside",n.bendOutside="bendOutside",n.topInside="topInside",n.topOutside="topOutside",n.lowestInside="lowestInside",n.lowestOutside="lowestOutside",n.groundFloorInside="groundFloorInside",n.groundFloorOutside="groundFloorOutside",n.topFacade="topFacade",Bt;var n})(),Ti=(()=>{return(n=Ti||(Ti={})).ground="ground",n.crawlerFloor="crawlerFloor",n.crawlerCeiling="crawlerCeiling",n.groundFloor="groundFloor",n.ceiling="ceiling",n.topFloor="topFloor",n.towerTop="towerTop",Ti;var n})(),Z1=(()=>{return(n=Z1||(Z1={})).outer="outer",n.inner="inner",n.sketch="sketch",n.shadow="shadow",Z1;var n})(),u3=(()=>{return(n=u3||(u3={})).roof70="roof70",n.roofCircle="roofCircle",n.roofCircleAnd70="roofCircleAnd70",u3;var n})();class jje{constructor(){this.innerWidth=-1,this.wallOuterThickness=-1,this.ceilingHeight=-1,this.floorAboveGround=-1,this.crawlerHeight=-1,this.crawlerSpace=!1,this.topFloorThickness=.4,this.groundFloorThickness=.48,this.roofCenter=[],this.roofThickness=.4,this.roofCirclePullDown=1,this.roofCircleExtra=-1,this.roofCircleWalls=1,this.roof70offset=.6,this.roof70Extension=1.3,this.roof70Walls=1.4,this.roofRidgeHight=.6,this.roofRidgeWidth=.04,this.bendPoint=[-1,-1],this.bendPointInner=[-1,-1],this.elevations={},this.roofPoints={},this.houseHeight=-1,this.outerWallHeight=-1,this.innerWallHeight=-1,this.gableWallArea=-1,this.minimumHeight=1.5,this.minimumHeightWidth=-1,this.minimumHeightRoom=2.3,this.minimumHeightRoomWidth=-1,this.roofStyle=u3.roof70,this.viewedRoofStyle=u3.roof70,this.parts=[],this.create()}create(){this.drawRoofCircle(),this.drawBuilding(),this.drawRoof70(),this.drawHelpers(),this.parts.push(new jS)}calculate(e){this.house=e,this.innerWidth=this.house.outerBase,this.wallOuterThickness=this.house.wallOuterThickness,this.roofCircleExtra=cn(Math.cos(Ei(65))*this.roofCirclePullDown,3),this.bendPoint=[this.roof70offset,-this.roof70offset*Math.tan(Ei(70))-this.roof70Walls],this.bendPointInner=[this.roof70offset,-this.roof70offset*Math.tan(Ei(70))];const i=0-this.groundFloorThickness,o=i+this.groundFloorThickness+this.ceilingHeight;if(this.elevations={[Ti.ground]:i-(this.crawlerSpace?this.floorAboveGround:0)+this.groundFloorThickness,[Ti.crawlerFloor]:i-(this.crawlerSpace?this.crawlerHeight:0),[Ti.crawlerCeiling]:i,[Ti.groundFloor]:0,[Ti.ceiling]:o,[Ti.topFloor]:o+this.topFloorThickness},this.roofCenter=[cn(this.house.outerBase/2),cn(this.elevations[Ti.topFloor])],this.roofPoints={[Bt.topFloor]:[this.wallOuterThickness,this.roofCenter[1]],[Bt.groundFloorOutside]:[0,0],[Bt.groundFloorInside]:[this.wallOuterThickness,0]},this.viewedRoofStyle===u3.roof70){const c=this.pointOf70Roof();this.roofPoints={...this.roofPoints,[Bt.bendOutside]:c[2],[Bt.bendInside]:c[11],[Bt.topInside]:c[10],[Bt.topOutside]:c[3],[Bt.lowestInside]:c[13],[Bt.lowestOutside]:c[0]}}if(this.viewedRoofStyle===u3.roofCircle){const c=(l,u)=>{const[f,p]=this.pointOnCircleRoof(Math.PI*(-(4-l)/4),u);return[f,p]};this.roofPoints={...this.roofPoints,[Bt.bendOutside]:c(1,Z1.outer),[Bt.bendInside]:c(1,Z1.inner),[Bt.topInside]:c(2,Z1.inner),[Bt.topOutside]:c(2,Z1.outer),[Bt.lowestInside]:c(0,Z1.inner),[Bt.lowestOutside]:c(0,Z1.outer)}}this.roofPoints[Bt.wallInside]=this.calcPointUnderInnerWall(),this.roofPoints[Bt.wallOutside]=this.calcPointUnderOuterWall(),this.roofPoints[Bt.topFacade]=this.calcPointTopFacade(),Object.entries(this.roofPoints).forEach(([c,l],u)=>{this.elevations[c]=cn(l[1])}),this.gableWallArea=this.calculateGable(),this.innerWallHeight=Math.abs(this.roofPoints[Bt.wallInside][1]),this.outerWallHeight=Math.abs(this.roofPoints[Bt.wallOutside][1]),this.elevations[Ti.towerTop]=this.elevations[Bt.topOutside]-.5,this.minimumHeightWidth=cn(this.getIntersectionWithRoof(this.minimumHeight)[0]),this.minimumHeightRoomWidth=cn(this.getIntersectionWithRoof(this.minimumHeightRoom)[0]),this.lowerAngle=cn(R1(this.roofPoints[Bt.lowestOutside],this.roofPoints[Bt.bendOutside]),3),this.upperAngle=cn(R1(this.roofPoints[Bt.bendOutside],this.roofPoints[Bt.topOutside]),3)}calculateGable(){const t=this.roofPoints[Bt.wallInside],i=this.roofPoints[Bt.bendInside],r=this.roofPoints[Bt.topInside];return 2*Iu([t[1]*i[0]+(i[1]-t[1])*i[0]/2+(r[0]-i[0])*i[1]+(r[0]-i[0])*(r[1]-i[1])/2])}calcPointTopFacade(){let[e,t]=c5([[0,0],[0,100]],[this.roofPoints[Bt.lowestOutside],this.roofPoints[Bt.bendOutside]]);return[e,t]}calcPointUnderInnerWall(){const e=this.roofPoints[Bt.lowestInside];let[t,i]=c5([[this.wallOuterThickness,-100],[this.wallOuterThickness,100]],[e,this.roofPoints[Bt.bendInside]]);return[t,i]}calcPointUnderOuterWall(){const e=this.roofPoints[Bt.lowestInside];let[t,i]=c5([[0,-100],[0,100]],[e,this.roofPoints[Bt.bendInside]]);return e[0]>0&&(i=e[1]),[t,i]}drawBuilding(){this.parts.push(new f1({selector:"building-ground-fill",onUpdate:function(e){this.square(e.innerWidth+3,Math.abs(e.elevations[Ti.ground])+1.5,[-1.5,-e.elevations[Ti.ground]])}})),this.parts.push(new f1({selector:"building-ground",onUpdate:function(e){const i=Math.abs(e.elevations[Ti.ground]);this.square(e.innerWidth+3,e.crawlerHeight-i+1.5,[-1.5,i])}})),this.parts.push(new $3({selector:"building-ground-line",onUpdate:function(e){const t=e.elevations[Ti.ground];this.coords=[[-2,-t],[e.innerWidth+2,-t]]}})),this.parts.push(new f1({selector:"building-crawler",onUpdate:function(e){this.visible=e.crawlerSpace,this.square(e.innerWidth-2*e.wallOuterThickness,e.crawlerHeight,[e.wallOuterThickness,-e.elevations[Ti.crawlerCeiling]])}})),this.parts.push(new f1({selector:"building-walls",onUpdate:function(e){const t=e.elevations[Ti.topFloor];this.square(e.innerWidth,t+-e.elevations[Ti.crawlerFloor],[0,-t])}})),this.parts.push(new f1({selector:"building-room",onUpdate:function(e){this.square(e.innerWidth-2*e.wallOuterThickness,e.ceilingHeight,[e.wallOuterThickness,-e.elevations[Ti.ceiling]])}})),this.parts.push(new f1({selector:"building-fill",onUpdate:function(e){const i=e.elevations[Ti.topFloor]+(e.viewedRoofStyle===u3.roof70?e.roof70Walls:e.roofCircleWalls);this.square(e.innerWidth,i-e.elevations[Ti.ground],[0,-i])}})),this.parts.push(new f1({selector:"building-roof-70-wall1",onUpdate:function(e){this.square(e.wallOuterThickness,e.roof70Walls,[0,-e.elevations[Ti.topFloor]-e.roof70Walls])}})),this.parts.push(new f1({selector:"building-roof-70-wall2",onUpdate:function(e){this.square(e.wallOuterThickness,e.roof70Walls,[e.innerWidth-e.wallOuterThickness,-e.elevations[Ti.topFloor]-e.roof70Walls])}})),this.parts.push(new f1({selector:"building-roof-circle-wall1",onUpdate:function(e){this.square(e.wallOuterThickness,e.roofCircleWalls,[e.innerWidth-e.wallOuterThickness,-e.elevations[Ti.topFloor]-e.roofCircleWalls])}})),this.parts.push(new f1({selector:"building-roof-circle-wall2",onUpdate:function(e){this.square(e.wallOuterThickness,e.roofCircleWalls,[0,-e.elevations[Ti.topFloor]-e.roofCircleWalls])}}))}drawHelpers(){this.parts.push(new Qa({selector:"minimum",floor:at.all,direction:0,textRotate:0,decimals:3,onUpdate:function(e){const t=e.elevations[Ti.topFloor];this.offsetPixels=-20;const i=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=-1,this.a=[+e.wallOuterThickness,-t],this.b=[i[0],-i[1]]}})),this.parts.push(new Qa({selector:"minimum-h",floor:at.all,direction:-90,textRotate:0,decimals:3,onUpdate:function(e){const t=e.elevations[Ti.topFloor];this.offsetPixels=0;const i=e.getIntersectionWithRoof(e.minimumHeight);this.offsetMeters=1.5,this.a=[+e.wallOuterThickness,-t],this.b=[i[0],-i[1]]}})),this.parts.push(new Qa({selector:"minimum-room",floor:at.all,direction:0,textRotate:45,decimals:3,onUpdate:function(e){const t=e.elevations[Ti.topFloor];this.offsetPixels=20;const i=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=1;const r=e.innerWidth-i[0];this.a=[e.innerWidth,-t],this.b=[r,-i[1]]}})),this.parts.push(new Qa({selector:"minimum-room-h",floor:at.all,direction:-90,textRotate:0,decimals:3,onUpdate:function(e){this.offsetPixels=0;const t=e.elevations[Ti.topFloor],i=e.getIntersectionWithRoof(e.minimumHeightRoom);this.offsetMeters=1.5;const r=e.innerWidth-i[0];this.a=[r,-i[1]],this.b=[r+i[0]-e.wallOuterThickness,-t]}})),this.parts.push(new Qa({selector:"lower-roof",floor:at.all,textRotate:0,decimals:3,onUpdate:function(e){const t=e.roofPoints[Bt.bendInside],i=e.roofPoints[Bt.wallInside];this.offsetPixels=0,this.offsetMeters=-1.5,this.a=[i[0],-i[1]],this.b=[t[0],-t[1]],this.direction=R1(this.a,this.b)-90}})),this.parts.push(new Qa({selector:"higher-roof",floor:at.all,textRotate:0,decimals:3,onUpdate:function(e){const t=e.roofPoints[Bt.bendInside],i=e.roofPoints[Bt.topInside];this.offsetPixels=0,this.offsetMeters=1.5,this.a=[t[0],-t[1]],this.b=[i[0],-i[1]],this.direction=R1(this.a,this.b)-90}})),this.parts.push(new Qa({selector:"facade",floor:at.all,textRotate:0,decimals:3,onUpdate:function(e){const t=[0,e.elevations[Ti.ground]],i=e.roofPoints[Bt.topFacade];this.offsetPixels=40,this.offsetMeters=-2,this.a=[0,-t[1]],this.b=[0,-i[1]],this.direction=0}})),this.parts.push(new Qa({selector:"height",floor:at.all,textRotate:0,decimals:3,onUpdate:function(e){const t=[0,e.elevations[Ti.ground]],i=e.roofPoints[Bt.topOutside];this.offsetPixels=-0,this.offsetMeters=-5,this.a=[0,-t[1]],this.b=[i[0],-i[1]],this.direction=0}}))}getIntersectionWithRoof(e){const t=this.elevations[Ti.topFloor]+e,i=[];return[[this.roofPoints[Bt.topFloor],this.roofPoints[Bt.wallInside]],[this.roofPoints[Bt.wallInside],this.roofPoints[Bt.bendInside]],[this.roofPoints[Bt.bendInside],this.roofPoints[Bt.topInside]]].forEach((c,l,u)=>{const f=c5(c,[[-100,t],[100,t]]);i.push(f)}),i.sort((c,l)=>l[0]-c[0])[0]}drawRoofCircle(){this.parts.push(new f1({selector:"roof-circle-fill",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),Z1.outer))].map(t=>[t[0],-t[1]])}})),this.parts.push(new f1({selector:"roof-circle-shadow",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),Z1.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),Z1.inner)).reverse()].map(t=>[t[0],-t[1]])}})),this.parts.push(new f1({selector:"roof-circle",onUpdate:function(e){this.coords=[...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),Z1.outer)),...[0,1,2,3,4].map(t=>e.pointOnCircleRoof(Math.PI*(-t/4),Z1.inner)).reverse()].map(t=>[t[0],-t[1]])}})),this.parts.push(new WS({selector:"roof-circle__h-circle",lineThickness:2,onUpdate:function(e){const[t,i]=e.pointOnCircleRoof(0,Z1.outer),r=t-e.innerWidth,s=2*r+e.innerWidth;this.d=`M${s},0 a1,1 0 0,0 ${-s},0`,this.transform=`translate(${-r} ${-i})`}})),this.parts.push(new f1({selector:"roof-circle__h-line",lineThickness:2,onUpdate:function(e){const t=e.pointOnCircleRoof(Math.PI,Z1.outer);this.coords=[e.pointOnCircleRoof(Math.PI*(-3/4),Z1.sketch),[e.roofCenter[0],t[1]],t,e.pointOnCircleRoof(0,Z1.outer),[e.roofCenter[0],t[1]],e.pointOnCircleRoof(Math.PI*(-1/4),Z1.sketch)].map(function(i){return[i[0],-i[1]]})}}))}drawRoof70(){this.parts.push(new f1({selector:"roof-70-fill",onUpdate:function(e){this.coords=e.pointOf70Roof().slice(0,7).map(([t,i])=>[t,-i])}})),this.parts.push(new f1({selector:"roof-70-shadow",onUpdate:function(e){this.coords=e.pointOf70Roof(!0).map(([t,i])=>[t,-i])}})),this.parts.push(new f1({selector:"roof-70",onUpdate:function(e){this.coords=e.pointOf70Roof().map(([t,i])=>[t,-i])}}))}pointOf70Roof(e=!1){const t=this.roofThickness/Math.sin(Ei(70)),i=this.roofThickness/Math.tan(Ei(70)),r=Math.sqrt(i**2+this.roofThickness**2),o=(Math.sin(Ei(30)),this.innerWidth/2),a=this.roof70offset,c=a*Math.tan(Ei(70))+this.roof70Walls,l=po(-40,r),u=a+l[0],f=c+l[1],v=(o-a)*Math.tan(Ei(30))+c;return[this.angle(Ei(110),this.roof70Extension,[0,-this.roof70Walls]),[0,-this.roof70Walls],[a,-c],[o,-v],[this.innerWidth-a,-c],[this.innerWidth,-this.roof70Walls],this.angle(Ei(70),this.roof70Extension,[this.innerWidth,-this.roof70Walls]),this.angle(Ei(70),this.roof70Extension,[this.innerWidth-t,-this.roof70Walls]),[this.innerWidth-t,-this.roof70Walls],[this.innerWidth-u,-f],we([o,-v],[0,this.roofThickness/Math.cos(Ei(30))]),[u,-f],[t,-this.roof70Walls],this.angle(Ei(110),this.roof70Extension,[t,-this.roof70Walls])].map(([_,w])=>[cn(_,40),cn(this.roofCenter[1]+-w,40)])}pointOnCircleRoof(e,t){let i;const r=this.roofThickness/Math.cos(Ei(22.5));t===Z1.outer&&(i=this.innerWidth/2+this.roofCircleExtra),t===Z1.inner&&(i=this.innerWidth/2-r+this.roofCircleExtra),t===Z1.sketch&&(i=this.innerWidth/2+1.5*r+this.roofCircleExtra);const[s,o]=po(kse(e),i);return[cn(this.roofCenter[0]+s),cn(this.roofCenter[1]+Math.abs(o)+this.roofCircleWalls-this.roofCirclePullDown)]}angle(e,t,i=[0,0]){const r=t*Math.cos(e),s=t*Math.sin(e);return[r+i[0],s+i[1]]}}class J1 extends Sl{constructor(e){super(),this.coords=[],this.floor=at.ground,this.hole=!1,this.centralElectricity=[0,0],this.theoretic=!1,this.width=0,this.height=0,this.fontSize=12,this.tooltip=()=>{console.log(this.selector);let t=`Room <b>${this.name}</b> \n    <br>${this.floor}-level\n    <br>${this.area()}m2`;return this.width&&(t+=`<br>width: ${this.width}m`),this.height&&(t+=`<br>height: ${this.height}m`),t},this.area=()=>0===this.coords.length||this.hole?0:Math.abs(cn(Lse(this.coords),1)),this.volume=()=>this.floor===at.top||this.hole||this.floor===at.ground||this.hole?this.area()*this.parent.cross.ceilingHeight:void 0,this.squaredRoom=(t,i)=>{this.width=cn(t),this.height=cn(i),this.coords=[this.northWestCorner,we(this.northWestCorner,[t,0]),we(this.northWestCorner,[t,i]),we(this.northWestCorner,[0,i])],this.center=we(this.northWestCorner,[t/2,i/2]),this.centralElectricity=this.center},Object.assign(this,e)}setup(){}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg&&(t.svg=go(`#${t.selector}`),t.svgRoom=t.svg.append("polygon"),t.function&&(t.svgText=t.svg.append("text"),t.svgText1=t.svgText.append("tspan"),t.svgText2=t.svgText.append("tspan"),t.svgText.attr("class","room-function-text")),t.name||(t.name=t.selector),t.classes=[`floor-${t.floor}`],t.hole&&(t.classes.push("room-hole"),t.svg.attr("filter","url(#inset-shadow)")),t.classes.push("bg-fill")),!t.show(e))return t.svgRoom.attr("points",""),void(t.function&&(t.svgText1.text(""),t.svgText2.text("")));t.svgRoom.attr("points",t.coords.join(" "));const r=t.center?t.center:(()=>{const s=t.coords.map(f=>f[0]),o=t.coords.map(f=>f[1]);return[(Math.min(...s)+Math.max(...s))/2,(Math.min(...o)+Math.max(...o))/2]})();t.function&&(t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${r[0]} ${r[1]}) `),t.svgText1.attr("x",0).attr("dy","0em").text(`${t.function}`),t.area()>5&&t.svgText2.attr("x",0).attr("dy","1.2em").text(`${t.area()} m\xb2`)),t.setClass(t.svg)})()}redraw(e){this.svgText&&this.svgText.attr("font-size",l5(this.fontSize,this.meterPerPixel,this.svgUpdate.print)).attr("stroke-width",6*this.meterPerPixel)}}class $je extends Sl{constructor(e){super(),this.last=!1,this.visible=!0,this.fontSize=14,Object.assign(this,e)}draw(e){var t=this;return(0,wi.Z)(function*(){void 0===t.svg&&(t.svg=go(`#${t.selector}`),t.svgRun=t.svg.select(".step-run"),t.svgRise=t.svg.select(".step-rise"),t.svgText=t.svg.select(".step-text"),t.last&&t.classes.push("last")),t.show(e)?(t.svg.style("display",""),t.svg.attr("transform",`translate(${t.index*t.parent.run}, ${-t.index*t.parent.rise})`),t.setClass(t.svg),t.svgRun.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[0,0],[0,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,t.parent.runThickness],[t.last?t.parent.nose:t.parent.run+t.parent.riseThickness+t.parent.nose,0]].join(" ")),t.svgRise.attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("points",[[t.parent.nose,t.parent.runThickness],[t.parent.nose,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.rise],[t.parent.nose+t.parent.riseThickness,t.parent.runThickness]].join(" ")),t.svgText.attr("font-size",t.fontSize*t.meterPerPixel).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6*t.meterPerPixel).attr("transform",`\n        translate(${t.parent.run/2} ${16*-t.meterPerPixel}) \n        `).text(t.index)):t.svg.style("display","none")})()}}class Fse extends Sl{constructor(e){super(),this.name="",this.cx=0,this.cy=0,this.r=1,this._lineThickness=.2,Object.assign(this,e)}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=go(`#${t.selector}`)}t.svg.attr("cx",t.cx).attr("cy",t.cy).attr("r",t.r).attr("stroke-width",t.meterPerPixel*t.lineThickness).attr("transform",t.transform),t.setClass(t.svg)})()}}class Kje extends Sl{constructor(e){super(),this.floor=at.all,this.name="step",this.last=!1,this.visible=!0,this.fontSize=10,this.walkLineXY=[0,0],this.nextWalkLineXY=[0,0],this.stringerXY=[0,0],this.nextStingerXY=[0,0],Object.assign(this,e)}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg&&(t.svg=go(`#${t.selector}`),t.svgText=t.svg.select(".step-plan-text"),t.svgRise=t.svg.select(".step-plan-rise"),t.svgStep=t.svg.select(".step-plan-lines"),t.last&&t.classes.push("last")),!t.show(e))return t.svgStep.attr("points",""),t.svgRise.attr("points",""),void t.svgText.text("");const i=R1(t.walkLineXY,t.nextWalkLineXY),r=po(i-45,.8*t.parent.run,t.walkLineXY),s=R1(t.stringerXY,t.walkLineXY),o=R1(t.nextStingerXY,t.nextWalkLineXY),a=po(s,10,t.walkLineXY),c=po(o,10,t.nextWalkLineXY),l=Sre(t.stringers.out.coords,[t.stringerXY,a]).map(_=>({xy:_,d:Ma(_,t.stringerXY)})).sort((_,w)=>_.d-w.d).map(_=>_.xy)[0],u=Sre(t.stringers.out.coords,[t.nextStingerXY,c]).map(_=>({xy:_,d:Ma(_,t.nextStingerXY)})).sort((_,w)=>_.d-w.d).map(_=>_.xy)[0],f=t.stringers.out.coords[1],p=t.stringers.out.coords[2];let g=null,v=null;f[1]!==l[1]&&f[1]===u[1]&&(v=t.stringers.in.coords[1],g=t.stringers.out.coords[1]),p[0]!==l[0]&&p[0]===u[0]&&(v=t.stringers.in.coords[2],g=t.stringers.out.coords[2]),t.svgStep.attr("points",[t.walkLineXY,t.stringerXY,v,t.nextStingerXY,t.nextWalkLineXY,u,g,l].join(" ")),t.svgRise.attr("points",[po(s+90,t.parent.nose,l),po(s+90,t.parent.nose,t.stringerXY)].join(" ")),t.svgText.attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`translate(${r[0]}, ${r[1]})`).text(t.index),t.setClass(t.svg)})()}redraw(e){this.svgText&&this.svgText.attr("font-size",this.meterPerPixel*this.fontSize),this.svgRise&&this.svgRise.attr("stroke-width",this.meterPerPixel*this.lineThickness*1),this.svgStep&&this.svgStep.attr("stroke-width",this.meterPerPixel*this.lineThickness*1)}}class qje{constructor(){this.totalRun=4.6,this.steps=19,this.runThickness=.02,this.riseThickness=.02,this.nose=.02,this.walkWidth=.8,this.walkLineOffset=.3,this.totalWidth=2.7,this.stepsFlightRight=9,this.stepsFlightLeft=2,this.stepsFlightMid=10,this.groundFloorTop=-1,this.topFloorTop=-1,this.topFloorBottom=-1,this.groundElevation=-1,this.ceilingHeight=-1,this.floorThickness=-1,this.totalRise=-1,this.run=-1,this.rise=-1,this.stairOrigin=[0,0],this.totalHeight=-1,this.lesserHeight=-1,this.intersections={},this.parts=[],this.create()}create(){this.createBuilding(),this.createStep(),this.createMeasures(),this.createPlan(),this.parts.push(new jS)}calculate(e){this.house=e,this.ceilingHeight=this.house.cross.ceilingHeight,this.floorThickness=this.house.cross.topFloorThickness,this.groundFloorTop=0,this.topFloorTop=this.house.cross.elevations[Ti.topFloor],this.totalRise=this.topFloorTop-this.groundFloorTop,this.stairOrigin=[this.house.stramien.in.we.b,this.house.stramien.in.ns.b-5],this.angle=cn(Math.atan(this.totalRise/this.totalRun)*(180/Math.PI),1),this.run=cn(this.totalRun/this.steps),this.rise=cn(this.totalRise/this.steps),this.optimizedStep=cn(2*this.run+this.run),this.maxSteps=Math.ceil(this.totalRise/.182),this.minSteps=Math.ceil(this.totalRise/.22),this.stepsFlightMid=Math.floor((this.totalWidth-2*this.walkWidth)/this.run),this.stepsFlightRight=this.steps-this.stepsFlightMid-this.stepsFlightLeft;const[t,i]=[this.alongWalkLine(1)[1]-this.stairOrigin[1],this.alongWalkLine(this.steps+1)[1]-this.stairOrigin[1]].map(s=>Math.max(this.walkWidth,s));this.totalHeight=Math.max(t,i),this.lesserHeight=Math.min(t,i);const r={coords:[we(this.stairOrigin,[0*this.totalWidth,t]),we(this.stairOrigin,[0*this.totalWidth,0]),we(this.stairOrigin,[1*this.totalWidth,0]),we(this.stairOrigin,[1*this.totalWidth,i])]};this.stringers={in:{coords:[we(r.coords[0],[1*this.walkWidth,0*this.walkWidth]),we(r.coords[1],[1*this.walkWidth,1*this.walkWidth]),we(r.coords[2],[-1*this.walkWidth,1*this.walkWidth]),we(r.coords[3],[-1*this.walkWidth,0*this.walkWidth])]},out:r}}createBuilding(){this.parts.push(new f1({selector:"floor-groundfloor",floor:at.all,parent:this,onUpdate:function(e){this.coords=[[-e.run,e.groundFloorTop],[10,e.groundFloorTop],[10,e.groundFloorTop+e.floorThickness],[-e.run,e.groundFloorTop+e.floorThickness]]}})),this.parts.push(new f1({selector:"floor-topfloor-shadow",floor:at.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[-e.run,-e.topFloorTop],[-e.run,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new f1({selector:"floor-topfloor",floor:at.all,parent:this,onUpdate:function(e){this.coords=[[e.totalRun,-e.topFloorTop],[10,-e.topFloorTop],[10,-(e.topFloorTop-e.floorThickness)],[e.totalRun,-(e.topFloorTop-e.floorThickness)]]}})),this.parts.push(new WS({selector:"nose-line",floor:at.all,parent:this,onUpdate:function(e){this.d=`M0 0 L${e.totalRun} ${-e.totalRise} `}})),this.parts.push(new WS({selector:"back-line",floor:at.all,parent:this,onUpdate:function(e){const t=1*e.run+.2;this.d=`M${t} 0 L${po(-e.angle,-e.run/Math.tan(e.angle*Math.PI/180),[e.totalRun+t,-e.totalRise])}`}}))}createStep(){for(let e=1;e<25;e++)this.parts.push(new $je({selector:`step-${e}`,floor:at.all,parent:this,index:e,onUpdate:function(t){this.outOfDesign=!(e<t.steps+1),this.last=e===t.steps}}))}createMeasures(){this.parts.push(new Qa({selector:"run-size",floor:at.all,direction:-90,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.rise,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new Qa({selector:"rise-size",floor:at.all,direction:180,offsetPixels:.5,decimals:3,onUpdate:function(e){this.offsetPixels=0,this.offsetMeters=1*e.run,this.distance=0,this.a=[7*e.run,7*-e.rise],this.b=[8*e.run,8*-e.rise]}})),this.parts.push(new Qa({selector:"total-rise-size",floor:at.all,direction:0,offsetPixels:0,onUpdate:function(e){const t=e.totalRun+2*e.run;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[t,0],this.b=[t,-e.totalRise]}})),this.parts.push(new Qa({selector:"total-run-size",floor:at.all,direction:90,onUpdate:function(e){this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[0,0],this.b=[e.totalRun,0]}})),this.parts.push(new Qa({selector:"plateau-width",floor:at.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+0,t],this.b=[e.stairOrigin[0]+e.walkWidth,t]}})),this.parts.push(new Qa({selector:"mid-width",floor:at.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0]+e.walkWidth,t],this.b=[e.stairOrigin[0]+e.totalWidth-e.walkWidth,t]}})),this.parts.push(new Qa({selector:"total-width",floor:at.all,direction:-90,onUpdate:function(e){const t=e.stairOrigin[1]-.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.a=[e.stairOrigin[0],t],this.b=[e.stairOrigin[0]+e.totalWidth,t]}})),this.parts.push(new Qa({selector:"total-height",floor:at.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=16,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.totalHeight]}})),this.parts.push(new Qa({selector:"lesser-height",floor:at.all,direction:0,onUpdate:function(e){const t=e.stairOrigin[0]+e.totalWidth+.5;this.offsetPixels=0,this.offsetMeters=0,this.distance=0,this.b=[t,e.stairOrigin[1]],this.a=[t,e.stairOrigin[1]+e.lesserHeight]}}))}createPlan(){for(let e=1;e<this.steps+1;e++)this.parts.push(new Kje({selector:`step-plan-${e}`,floor:at.all,parent:this,index:e,onUpdate:function(t){this.stringers=t.stringers,this.walkLineXY=t.alongWalkLine(e),this.nextWalkLineXY=t.alongWalkLine(e+1),this.stringerXY=t.alongStinger(e),this.nextStingerXY=t.alongStinger(e+1)}})),this.parts.push(new Fse({selector:"walk-line-"+e,floor:at.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongWalkLine(e)}})),this.parts.push(new Fse({selector:"step-stinger-"+e,floor:at.all,parent:this,onUpdate:function(t){this.r=.2*this.lineThickness,[this.cx,this.cy]=t.alongStinger(e)}}));this.parts.push(new f1({selector:"clip-ground-floor-ref",floor:at.ground,onUpdate:function(e){const[t,i]=e.stairOrigin,r=t+e.walkWidth,s=t+e.totalWidth-e.walkWidth,o=Math.max(e.alongWalkLine(1)[1],i+e.walkWidth);Math.max(e.alongWalkLine(e.steps)[1],i+e.walkWidth),this.coords=[[t,i],[s,i],[s,i+e.walkWidth],[r,i+e.walkWidth],[r,o],[t,o]]}})),this.parts.push(new f1({selector:"outline",floor:at.all,parent:this,onUpdate:function(e){this.coords=[e.stringers.out.coords[0],e.stringers.out.coords[1],e.stringers.out.coords[2],e.stringers.out.coords[3],e.stringers.in.coords[3],e.stringers.in.coords[2],e.stringers.in.coords[1],e.stringers.in.coords[0]]}})),this.parts.push(new WS({selector:"walk-line",floor:at.all,parent:this,onUpdate:function(e){const t=e.walkWidth-e.walkLineOffset,i=e.alongWalkLine(e.steps),r=e.alongWalkLine(1);this.d=`\n        M${r[0]} ${r[1]}\n        L${r[0]} ${e.stairOrigin[1]+e.walkWidth}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${-e.walkLineOffset}\n        L${e.stairOrigin[0]+e.walkWidth} ${e.stairOrigin[1]+t}\n        L${e.stairOrigin[0]+e.totalWidth-e.walkWidth} ${e.stairOrigin[1]+t}\n        a${e.walkLineOffset},${e.walkLineOffset} 0 0 1 ${e.walkLineOffset},${e.walkLineOffset}\n        L${i[0]} ${i[1]}\n        `}}))}calculateCorrectionArray(){const e=this.walkLineOffset*Math.PI/2,t=(this.totalWidth-2*this.walkWidth)/2,i=(this.stepsFlightRight+1)*this.run,s=this.totalRun-i-e-t,o=i-e-t;this.intersections={};const a=this.getEGMethod(s+e/2,this.alongWalkLine(0)[1]-(this.stairOrigin[1]+this.walkWidth),0,0,!1),c=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,a,0,!0),l=this.getEGMethod(t+e/2,this.totalWidth/2-this.walkWidth,a+c,0,!1);this.getEGMethod(o+e/2,this.alongWalkLine(this.steps)[1]-(this.stairOrigin[1]+this.walkWidth),a+0+c+l,0,!0)}getEGMethod(e,t,i,r,s){let o,a,c,l,u;const f=e-r,p=Math.ceil(f/this.run),g=t-r;s?(o=[0,0],a=[0,f],c=[-g,0],l=Mre(g,-a[1]/g,a[1]),l=[-l[0],l[1]]):(o=[0,0],a=[0,f],c=[g,0],l=Mre(g,-a[1]/g,a[1]));const v=[];for(let _=0;_<p+1;_++)u=s?[0,Math.min(this.run*(p-_),f)]:[0,Math.min(this.run*_,f)],v.push(c5([o,l],[u,c]));for(let _=0;_<p+1;_++)if(0!==_)try{let w;w=s?v[_+1]:v[_-1],this.intersections[i+_]=this.run-Ma(w,v[_])}catch{}return p}alongStinger(e){let t=cn((e-1)*this.run);const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsFlightRight+1)*this.run,c=this.alongWalkLine(e),l=this.alongWalkLine(e+1),f=(R1(c,l),isNaN(this.intersections[e])?0:this.intersections[e]);return t<o-r-i/2?[this.stairOrigin[0]+this.walkWidth,c[1]+f]:t===o?[c[0],c[1]+f]:t<o?[c[0]+f,this.stairOrigin[1]+this.walkWidth]:t-o<r+i/2?[c[0]-f,this.stairOrigin[1]+this.walkWidth]:t===this.totalRun?[c[0]-f,c[1]]:[this.stairOrigin[0]+this.totalWidth-this.walkWidth,c[1]+f]}alongWalkLine(e){let t=(e-1)*this.run;const i=this.walkLineOffset*Math.PI/2,r=(this.totalWidth-2*this.walkWidth)/2,o=this.totalRun-(this.stepsFlightRight+1)*this.run,a=o-i-r;if(t<a){const[c,l]=[this.stairOrigin[0]+this.walkWidth-this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[c,l+a-t]}if(t<a+i)return t-=a,po(180+t/i*90,this.walkLineOffset,[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth]);if(t<o){t-=a+i;const[c,l]=[this.stairOrigin[0]+this.walkWidth,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[c+t,l]}if(t<o+r){t-=o;const[c,l]=[this.stairOrigin[0]+this.totalWidth/2,this.stairOrigin[1]+this.walkWidth-this.walkLineOffset];return[c+t,l]}if(t<o+r+i)return t-=o+r,po(t/i*90-90,this.walkLineOffset,[this.stairOrigin[0]+this.totalWidth-this.walkWidth,this.stairOrigin[1]+this.walkWidth]);{t-=o+r+i;const[c,l]=[this.stairOrigin[0]+this.totalWidth-this.walkWidth+this.walkLineOffset,this.stairOrigin[1]+this.walkWidth];return[c,l+t]}}}class Xje extends Sl{constructor(e){super(),this.origin=[0,0],this.scale=[1,1],this.rotate=0,Object.assign(this,e)}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg){if(!t.show(e))return;t.svg=go(`#${t.selector}`),t.svg1=t.svg.select(".house-wind-rose-1"),t.svg2=t.svg.select(".house-wind-rose-2"),t.svgText=t.svg.select(".house-wind-rose-text")}t.svg.style("transform",` \n      translate(${t.origin[0]}px, ${t.origin[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svg1.attr("points",[[0,0],[10,30],[0,20]].map(([r,s])=>[r*t.meterPerPixel,s*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svg2.attr("points",[[0,0],[-10,30],[0,20]].map(([r,s])=>[r*t.meterPerPixel,s*t.meterPerPixel]).join(" ")).attr("stroke-width",1),t.svgText.attr("font-size",12).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("stroke-width",6).attr("transform",`\n          translate(0 ${-8*t.meterPerPixel}) \n          rotate(${t.rotate})\n          `).text("North")})()}}var An=(()=>{return(n=An||(An={})).gips="gips",n.serviceBeams="serviceBeams",n.osb="osb",n.joists="joist",n.outerSheet="outerSheet",n.space="space",n.facade="facade",n.groundFloorEdge="groundFloorEdge",n.roofJoists="roofJoists",An;var n})();class Sh{constructor(e){Object.assign(this,e)}updateR(e){void 0!==e&&("Outside"===e.name&&(this.r=.04),void 0===this.r&&(this.r=this.diameter/this.lambda))}updateT(e,t,i){isNaN(this.r)||(this.deltaT=this.r/t*i,this.temp=e.temp+this.deltaT)}}class Yje{constructor(){this.tempMin=-10,this.tempMax=24,this.Thicknesses=An,this.thickness={[An.gips]:.0125,[An.serviceBeams]:.06,[An.osb]:.015,[An.joists]:.3,[An.outerSheet]:.06,[An.space]:.04,[An.facade]:.04,[An.roofJoists]:.4},this.crossDepth={},this.x=[]}get tempDiff(){return this.tempMax-this.tempMin}getRoofPoint(e){const[t,i]=we(this.cross.roofPoints[e],[-this.cross.wallOuterThickness,0]);return[t,i]}calculate(e){this.cross=e.cross;const t=(r,s,o=!1)=>{this.crossDepth[r]=cn(Math.abs(this.crossDepth[s])+Math.abs(this.thickness[s])),o&&(this.crossDepth[r]=-Math.abs(this.crossDepth[r]))};this.crossDepth[An.joists]=0,this.crossDepth[An.osb]=0,this.crossDepth[An.groundFloorEdge]=.2,t(An.outerSheet,An.joists),t(An.space,An.outerSheet),t(An.facade,An.space),t(An.serviceBeams,An.osb,!0),t(An.gips,An.serviceBeams,!0);const i=[new Sh({name:"Outside",temp:this.tempMin}),new Sh({name:"r<sub>outside</sub>"}),new Sh({name:"Wood",diameter:this.thickness[An.facade],lambda:.13}),new Sh({name:"space",diameter:this.thickness[An.space],lambda:.001}),new Sh({name:"Celit",diameter:this.thickness[An.outerSheet],lambda:.048}),new Sh({name:"CLS+Glass wol",diameter:this.thickness[An.joists],lambda:.032}),new Sh({name:"OBS",diameter:this.thickness[An.osb],lambda:.13}),new Sh({name:"Isolated Installations",diameter:this.thickness[An.serviceBeams],lambda:.035}),new Sh({name:"Dry wall / Gips ",diameter:this.thickness[An.gips],lambda:1.3}),new Sh({name:"r<sub>inside</sub>"}),new Sh({name:"Inside",temp:this.tempMax})];i.forEach((r,s)=>{r.updateR(i[s-1])}),this.rConstruction=cn(Iu(i.map(r=>r.r).filter(r=>r)),1),this.U=cn(1/this.rConstruction,3),this.outerWallThickness=cn(Iu(i.map(r=>r.diameter).filter(r=>r)),3),i.forEach((r,s)=>{r.updateT(i[s-1],this.rConstruction,this.tempDiff)}),this.heatCalcs=i}}var $S=(()=>{return(n=$S||($S={})).a="a",n.b="b",n.c="c",n.d="d",n.toilet="toilet",n.hall="hall",n.walkway="walkway",$S;var n})();class Pse extends class Zje{}{constructor(e){super(),this.outerBase=void 0,this.innerBase=void 0,this.extensionToNorth=void 0,this.extensionToSouth=void 0,this.extensionToWest=void 0,this.extensionToEast=void 0,this.houseWidth=void 0,this.houseLength=void 0,this.gridSizeY=void 0,this.gridSizeX=void 0,this.centerHouse=[void 0,void 0],this.balconyEdge=-.3,this.balconyDepth=2.5,this.westRoomWidth=4,this.midRoomExtended=!0,this.eastRoomExtended=!0,this.serverRoom=[void 0,void 0],this.cross=new jje,this.stair=new qje,this.construction=new Yje,this.stats={wall:{},floor:{}},this.tower={show:void 0,innerCoords:void 0,outerCoords:void 0,outerWallOffset:void 0,width:void 0,houseIncrement:void 0,innerIncrement:void 0,outerIncrement:void 0,innerWallLength:void 0,outerWallLength:void 0,intersectionEast:void 0,intersectionWest:void 0,wallOuterThickness:void 0,footprintVisible:!1},Object.assign(this,e),window.house=this,this.cross.ceilingHeight=e.ceilingHeight,this.cross.floorAboveGround=e.floorAboveGround,this.cross.crawlerHeight=e.crawlerHeight,this.cross.crawlerSpace=e.crawlerSpace,this.calculateHouse(),this.linkParts(),this.calculateStats(),this.createStramien(),this.createGrid(),this.createMeasures(),this.createExtra()}redrawHouse(e){const t=(i,r)=>{r.parts.forEach(function(){var s=(0,wi.Z)(function*(o){void 0!==o&&(yield o.update({...e,theme:i}),void 0!==o.parts&&t(i,o))});return function(o){return s.apply(this,arguments)}}())};e.graphic===yo.house2D&&(t(this,this),t(this.stair,this.stair)),e.graphic===yo.cross&&t(this.cross,this.cross),[yo.stairCross,yo.stairPlan].includes(e.graphic)&&t(this.stair,this.stair)}linkParts(){const e=(t,i)=>{void 0!==t&&(t.parent=i,t.onUpdate(this),t.createSelector(),t.parts&&t.parts.forEach(r=>e(r,t)),this.partsFlatten.push(t))};this.partsFlatten=[],this.parts.forEach(t=>e(t,this))}getLonLat(){return[this.orientation.lng,this.orientation.lat]}createExtra(){this.parts.push(new jS);const e=new $3({selector:"balcony-edge",floor:at.ground,lineThickness:1,dash:[1,8],onUpdate:function(s){const o=s.stramien.in,a=s.balconyWidth+s.balconyEdge;this.coords=[[o.we.b,o.ns.b+a],[o.we.c,o.ns.b+a]]}});this.parts.push(e);const t=new $3({selector:"hall-edge",floor:at.ground,lineThickness:1,dash:[1,8],onUpdate:function(s){const o=s.stramien.in,c=3*s.wallInnerThickness+2;this.coords=[[o.we.b,o.ns.b-c],[o.we.b+(s.stair.totalWidth-s.stair.walkWidth),o.ns.b-c]]}});this.parts.push(t);const i=new $3({selector:"view-lines",floor:at.ground,lineThickness:3,onUpdate:function(s){const o=s.stramien.in,a=3*s.studDistance,c=o.we.b+1,l=o.ns.b+(o.ns.c-o.ns.b)/2;this.coords=[[c,s.stair.stairOrigin[1]],[c,o.ns.d+a],[c,l],[o.we.a-a,l],[o.we.d+a,l]]}});this.parts.push(i);const r=new f1({selector:"tower-walls",floor:at.all,onUpdate:function(s){this.visible=s.tower.footprintVisible,this.coords=[...s.tower.innerCoords,s.tower.innerCoords[0],...[...s.tower.outerCoords].reverse(),s.tower.outerCoords[7]]}});this.parts.push(r),this.parts.push(new $3({selector:"roof-line-1",floor:at.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.b,o.ns.b],l=[o.we.b,o.ns.a];this.coords=[we([o.we.a,o.ns.b],[0,s.cross.minimumHeightWidth]),we(c,[s.cross.minimumHeightWidth,s.cross.minimumHeightWidth]),we(l,[s.cross.minimumHeightWidth,0])]}})),this.parts.push(new $3({selector:"roof-line-2",floor:at.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=s.tower.show?[o.we.c,o.ns.b-s.tower.houseIncrement-s.cross.minimumHeightWidth]:[o.we.c,o.ns.b];this.coords=[we([o.we.c,o.ns.a],[-s.cross.minimumHeightWidth,0]),we(c,[-s.cross.minimumHeightWidth,s.cross.minimumHeightWidth])]}})),this.parts.push(new $3({selector:"roof-line-3",floor:at.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.d,o.ns.b];this.coords=[we(s.tower.show?[o.we.c+s.tower.houseIncrement+s.cross.minimumHeightWidth,o.ns.b]:[o.we.c,o.ns.b],[-s.cross.minimumHeightWidth,s.cross.minimumHeightWidth]),we(c,[0,s.cross.minimumHeightWidth])]}})),this.parts.push(new $3({selector:"roof-line-4",floor:at.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.c,o.ns.c];this.coords=[we([o.we.d,o.ns.c],[0,-s.cross.minimumHeightWidth]),we(c,[0,-s.cross.minimumHeightWidth])]}})),this.parts.push(new $3({selector:"roof-line-5",floor:at.top,lineThickness:1,dash:[10,10],onUpdate:function(s){const o=s.stramien.in,c=[o.we.a,o.ns.c];this.coords=[we([o.we.b,o.ns.c],[0,-s.cross.minimumHeightWidth]),we(c,[0,-s.cross.minimumHeightWidth])]}}))}createMeasures(){this.parts.push(new Qa({selector:"house-total-width",floor:at.all,direction:90,textRotate:0,onUpdate:function(e){const t=e.houseLength+2*e.studDistance;this.offsetPixels=16,this.a=[e.stramien.out.we.a,t],this.b=[e.stramien.out.we.d,t]}}));for(let e=0;e<3;e++){const t=["a","b","c","d"];this.parts.push(new Qa({selector:"house-width-"+(e+1),floor:at.all,direction:90,textRotate:0,onUpdate:function(r){const s=r.houseLength+2*r.studDistance;this.offsetPixels=0,this.a=[r.stramien.out.we[t[e+0]],s],this.b=[r.stramien.out.we[t[e+1]],s]}}))}this.parts.push(new Qa({selector:"house-height-1",floor:at.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.b]}})),this.parts.push(new Qa({selector:"house-height-inner",floor:at.all,direction:180,textRotate:0,onUpdate:function(e){const t=1*-e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.in.ns.b],this.a=[t,e.stramien.in.ns.c]}})),this.parts.push(new Qa({selector:"house-height-2",floor:at.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.b],this.a=[t,e.stramien.out.ns.c]}})),this.parts.push(new Qa({selector:"house-height-3",floor:at.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=8,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.c],this.a=[t,e.stramien.out.ns.d]}})),this.parts.push(new Qa({selector:"house-total-height",floor:at.all,direction:0,textRotate:0,onUpdate:function(e){const t=e.houseWidth+1*e.studDistance;this.offsetPixels=32,this.offsetMeters=e.studDistance,this.b=[t,e.stramien.out.ns.a],this.a=[t,e.stramien.out.ns.d]}}))}createStramien(){const e=3*this.studDistance,t=i=>"in"===i||"out"===i?at.all:"ground"===i?at.ground:"top"===i?at.top:void 0;for(let i of["in","out","ground","top"])for(let r of["we","ns"])for(let s of Object.keys($S)){const o=`house-stramien-${i}-${r}-${s}`;this.parts.push(new $3("ns"===r?{floor:t(i),selector:o,lineThickness:1.5,onUpdate:function(a){this.coords=[[-e,a.stramien[i][r][s]],[a.houseWidth+e,a.stramien[i][r][s]]]}}:{floor:t(i),selector:o,lineThickness:1.5,onUpdate:function(a){this.coords=[[a.stramien[i][r][s],-e],[a.stramien[i][r][s],a.houseLength+e]]}}))}}createGrid(){console.log("createGrid");const e=3*this.studDistance;this.gridSizeY=Math.round(this.houseWidth/this.studDistance+2+1);for(let i=0;i<55;i++){const r=[0,this.studAmountWest,this.studAmountWest+this.studAmount,this.studAmountWest+this.studAmount+this.studAmountEast].includes(i-1),o=new $3({selector:`grid-index-${i}.grid-vertical`,lineThickness:r?.8:.6,index:i,floor:at.all,onUpdate:function(a){const c=(i-1)*a.studDistance;this.coords=this.index<a.gridSizeY?[[c,-e],[c,a.houseLength+e]]:[],this.classes=[r?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}});o.createSelector(),this.parts.push(o)}this.gridSizeX=Math.round(this.houseLength/this.studDistance+2+1);for(let i=0;i<55;i++){const r=[0,this.studAmountNorth,this.studAmountNorth+this.studAmount,this.studAmountNorth+this.studAmount+this.studAmountSouth].includes(i-1);this.parts.push(new $3({lineThickness:r?.8:.6,selector:`grid-index-${i}.grid-horizontal`,index:i,floor:at.all,onUpdate:function(o){const a=(i-1)*o.studDistance;this.coords=this.index<o.gridSizeX?[[-e,a],[o.houseWidth+e,a]]:[],this.classes=[r?"grid-main":(i-1)%5?"grid-sub":"grid-subsub"]}}))}this.parts[".house-wind-rose"]=new Xje({rotate:0,floor:at.all,parent:this,onUpdate:function(i){this.origin=[2,0]}})}calculateTower(){this.tower.wallOuterThickness=this.wallOuterThickness,this.tower.outerWallOffset=cn(this.tower.wallOuterThickness*Math.tan(22.5*Math.PI/180)),this.tower.innerWallLength=this.towerWidth,this.tower.outerWallLength=2*this.tower.outerWallOffset+this.tower.innerWallLength,this.tower.show=this.showTower,this.tower.width=this.towerWidth,this.tower.houseIncrement=cn(this.tower.outerWallLength/Math.sqrt(2)+this.tower.outerWallLength)}calculateHouse(){this.outerBase=cn(this.studAmount*this.studDistance),this.innerBase=cn(this.outerBase-2*this.wallOuterThickness),this.extensionToSouth=this.studAmountSouth*this.studDistance,this.extensionToNorth=this.studAmountNorth*this.studDistance,this.extensionToEast=this.studAmountEast*this.studDistance,this.extensionToWest=this.studAmountWest*this.studDistance,this.calculateTower(),this.tower.show?this.extensionToNorth=Math.max(this.extensionToNorth,Math.ceil(this.tower.houseIncrement)):this.tower.houseIncrement=0;const e={we:{a:this.wallOuterThickness,b:this.extensionToWest+1*this.wallOuterThickness,c:this.extensionToWest+1*this.outerBase+-1*this.wallOuterThickness,d:this.extensionToEast+this.outerBase+this.extensionToWest+-1*this.wallOuterThickness},ns:{a:this.wallOuterThickness,b:this.extensionToNorth+1*this.wallOuterThickness,c:this.extensionToNorth+this.outerBase+-1*this.wallOuterThickness,d:this.extensionToNorth+this.outerBase+this.extensionToSouth+-1*this.wallOuterThickness}};this.stair.totalWidth=this.innerBase/2+this.stair.walkWidth/2;const t=e.we.b+this.stair.totalWidth-this.stair.walkWidth,i=e.ns.b-5;this.stramien={in:e,out:{we:{a:e.we.a-this.wallOuterThickness,b:e.we.b-this.wallOuterThickness,c:e.we.c+this.wallOuterThickness,d:e.we.d+this.wallOuterThickness},ns:{a:e.ns.a-this.wallOuterThickness,b:e.ns.b-this.wallOuterThickness,c:e.ns.c+this.wallOuterThickness,d:e.ns.d+this.wallOuterThickness}},top:{we:{toilet:e.we.b+this.stair.totalWidth-this.stair.walkWidth-.2,hall:e.we.b+this.stair.totalWidth+.2},ns:{hall:i+1.5,walkway:e.ns.b+1+.5}},ground:{we:{hall:t},ns:{hall:i}}},this.centerHouse=[e.we.c-(e.we.c-e.we.b)/2,e.ns.c-(e.ns.c-e.ns.b)/2],this.stair.stairOrigin=[i,t],this.serverRoom=[this.stramien.in.we.c-1,this.stramien.in.ns.b-this.wallInnerThickness],this.houseWidth=cn(this.stramien.out.we.d-this.stramien.out.we.a),this.houseLength=cn(this.stramien.out.ns.d-this.stramien.out.ns.a),this.calculateTowerCoords(),this.cross.calculate(this),this.stair.calculate(this),this.construction.calculate(this)}calculateStats(){this.getWallLength(),this.getWallArea(),this.getFloorArea()}getWallLength(){this.stats.wall.innerLength=Math.ceil(Iu(Object.values(this.partsFlatten).filter(e=>e instanceof si).map(e=>e.type===Hn.outer?e.getLength(lt.in):e.type===Hn.inner?e.getLength(lt.out)+e.getLength(lt.in):0))),this.stats.wall.outerLength=Math.ceil(Iu(Object.values(this.partsFlatten).filter(e=>e instanceof si).filter(e=>e.type===Hn.outer).map(e=>e.getLength(lt.out)),1))}getWallArea(){this.stats.wall.innerArea=Math.ceil(Iu(Object.values(this.partsFlatten).filter(e=>e instanceof si).map(e=>{let t=0;return e.type===Hn.inner&&(t+=e.getArea(lt.out)),t+=e.getArea(lt.in),t}))),this.stats.wall.outerArea=Math.ceil(Iu(Object.values(this.partsFlatten).filter(e=>e instanceof si).filter(e=>e.type===Hn.outer).map(e=>e.getArea(lt.out)),1))}getFloorArea(){let e={};return Object.keys(at).map(t=>{e[t]={area:0,volume:0}}),this.partsFlatten.filter(t=>t instanceof J1).filter(t=>"innerFootprint"!==t.name).filter(t=>!t.hole).forEach(t=>{e[t.floor].area+=t.area(),e[t.floor].volume+=t.volume(),e[at.all].area+=t.area(),e[at.all].volume+=t.volume()}),Object.keys(at).map(t=>{e[t]={area:cn(e[t].area,0),volume:cn(e[t].volume,0)}}),this.stats.floor=e,this.stats.floor}calculateTowerCoords(){!1===this.tower.show&&(this.tower.width=0,this.tower.outerWallOffset=0,this.tower.innerWallLength=0,this.tower.outerWallLength=0,this.tower.houseIncrement=0,this.tower.wallOuterThickness=0);let e=this.tower.wallOuterThickness/Math.cos(22.5*Math.PI/180);this.tower.innerIncrement=Math.sqrt(this.tower.innerWallLength**2/2),this.tower.outerIncrement=Math.sqrt(this.tower.outerWallLength**2/2);const t=[this.stramien.out.we.c+this.tower.outerWallOffset,this.stramien.out.ns.b-this.tower.innerIncrement-this.tower.innerWallLength-this.tower.outerWallOffset],i=t,r=we(t,[this.tower.width,0]),s=po(45,this.tower.width,r),o=we(s,[0,this.tower.width]),a=po(135,this.tower.width,o),c=we(a,[-this.tower.width,0]),l=po(225,this.tower.width,c),u=we(l,[0,-this.tower.width]);this.tower.innerCoords=[i,r,s,o,a,c,l,u],this.tower.outerCoords=[po(-112.5,e,i),po(-67.5,e,r),po(-22.5,e,s),po(22.5,e,o),po(67.5,e,a),po(112.5,e,c),po(157.5,e,l),po(202.5,e,u)],this.tower.intersectionWest=we(this.tower.outerCoords[0],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),this.tower.intersectionEast=we(this.tower.outerCoords[3],[-this.tower.wallOuterThickness,this.tower.wallOuterThickness]),!1===this.tower.show&&(this.tower.intersectionWest=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.intersectionEast=[this.stramien.in.we.c,this.stramien.in.ns.b],this.tower.innerCoords=[...Array(8).keys()].map(f=>[this.stramien.in.we.c,this.stramien.in.ns.b]),this.tower.outerCoords=[...Array(8).keys()].map(f=>[this.stramien.out.we.c,this.stramien.out.ns.b]))}}class ga extends Sl{constructor(e){super(),this.width=.9,this.height=2.3,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.outside=!1,Object.assign(this,e)}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg&&(t.svg=go(`#${t.selector}`),t.svgOpening=t.svg.select(".door-wall-opening"),t.svgSwing=t.svg.select(".door-swing")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgSwing.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,-t.width],[t.parent.thickness,-t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgSwing.attr("d",`M${t.parent.thickness},0 \n        L0,0  \n        L${-t.width},0  \n        A${t.width},${t.width} 0 0,1  \n        0,${-t.width}\n        L${t.parent.thickness},${-t.width}`)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgSwing&&this.svgSwing.attr("stroke-width",1*this.meterPerPixel)}}var B0=(()=>{return(n=B0||(B0={})).windowWall="windowWall",n.standard="standard",n.hexagon="hexagon",B0;var n})();class Wa extends Sl{constructor(e){super(),this.floor=at.ground,this.windowForm=B0.standard,this.width=2,this.height=2,this.elevation=.9,this.origin=[0,0],this.scale=[1,1],this.rotate=0,this.frameThickness=.1,this.frameDepth=.1,this.innerDepthFrame=.1,this.openable=!0,Object.assign(this,e)}get outerDepthFrame(){return this.innerDepthFrame+this.frameDepth}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg&&(t.svg=go(`#${t.selector}`),t.svgOpening=t.svg.select(".window-wall-opening"),t.svgPane=t.svg.select(".window-pane")),!t.show(e))return t.svgOpening.attr("points",""),void t.svgPane.attr("d","");let i;i=1===t.scale[0]?[0,0]:[t.parent.thickness,0],t.svg.style("transform",` \n      translate(${t.origin[0]+i[0]}px, ${t.origin[1]+i[1]}px) \n      rotate(${t.rotate}deg) \n      scale(${t.scale[0]}, ${t.scale[1]})\n      `),t.svgOpening.attr("points",[[0,t.width],[t.parent.thickness,t.width],[t.parent.thickness,0],[0,0]].join(" ")).attr("class","bg-fill"),t.svgPane.attr("d",`M${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.outerDepthFrame},${t.frameThickness}  \n          L${t.outerDepthFrame},0  \n          \n          L${t.outerDepthFrame},${t.width}  \n          L${t.outerDepthFrame},${t.width-t.frameThickness}  \n          L${t.innerDepthFrame},${t.width-t.frameThickness} \n          L${t.innerDepthFrame},${t.width}  \n\n          L${t.innerDepthFrame},0  \n          L${t.innerDepthFrame},${t.frameThickness} \n          L${t.innerDepthFrame+t.frameDepth/2},${t.frameThickness}  \n          L${t.innerDepthFrame+t.frameDepth/2},${t.width-t.frameThickness}  \n          `)})()}redraw(e){this.svgOpening&&this.svgOpening.attr("stroke-width",this.meterPerPixel*this.lineThickness),this.svgPane&&this.svgPane.attr("stroke-width",1*this.meterPerPixel)}}class d2 extends Gt{constructor(e){super(e),this.sensorType=Ye.lightBulb,Object.assign(this,e)}}class Bu extends Gt{constructor(e){super(e),this.sensorType=Ye.ventOut,this.offsetWall=0,this.size=200,Object.assign(this,e)}get lineThickness(){return this.size/1e3/this.meterPerPixel}}class bc extends Gt{constructor(e){super(e),this.offsetWall=0,this.size=20,this.verticalCableLength=0,this.tooltip=()=>{let t=`<b>${this.sensorType.toTitleCase()} `;return this.cableLength>0&&(t+=`<br>Pipe length ${cn(this.cableLength,1)}m`),t+=`<br>vertical pipe: ${cn(this.verticalCableLength,1)}m`,t},Object.assign(this,e)}get lineThickness(){return this.size/1e3/this.meterPerPixel}init(e,t){const i=t.cross.ceilingHeight,r=t.cross.topFloorThickness;this.sensorType===Ye.toilet?(this.size=120,this.elevation=0,this.verticalCableLength+=e===at.top?i+2*r:r):this.sensorType===Ye.waterWarm?(this.size=20,this.elevation=1.6,this.verticalCableLength+=e===at.ground?i-this.elevation+1*r:r+this.elevation):this.sensorType===Ye.drain&&(this.size=40,this.elevation=0,this.verticalCableLength+=e===at.top?i+2*r:r)}}const Jje=[new J1({name:"Toilet-upstairs",function:"WC",floor:at.top,onUpdate:function(n){const t=n.stramien.top.we.toilet-n.stramien.in.we.b-n.wallInnerThickness;this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-n.wallInnerThickness],this.squaredRoom(t,1)},parts:[new si({floor:at.top,type:Hn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=we(this.parent.northWestCorner,[0,0]),this.sides={[lt.out]:[we(this.origin,[0,-n.wallInnerThickness]),we(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[lt.in]:[we(this.origin,[0,0]),we(this.origin,[this.parent.width,0])]}},parts:[new bc({sensorType:Ye.drain,onUpdate:function(n){const e=we(this.parent.getPosition(lt.in,.5,0),[0,0]),t=this.parent.parent;this.points=[e,[e[0],t.northWestCorner[1]+t.height/2]]}}),new bc({sensorType:Ye.waterWarm,onUpdate:function(n){const e=we(this.parent.getPosition(lt.in,.5,0),[0,0]);this.points=[e,ln(n.serverRoom,e,!0),n.serverRoom]}})]}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=we(e.northWestCorner,[e.width,0]),this.sides={[lt.out]:[we(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),we(this.origin,[+n.wallInnerThickness,e.height+n.wallInnerThickness])],[lt.in]:[we(this.origin,[0,0]),we(this.origin,[0,e.height])]}}}),new si({floor:at.top,type:Hn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=we(e.northWestCorner,[e.width,e.height]),this.sides={[lt.out]:[we(this.origin,[+n.wallInnerThickness,n.wallInnerThickness]),we(this.origin,[-e.width,n.wallInnerThickness])],[lt.in]:[we(this.origin,[0,0]),we(this.origin,[-e.width,0])]}},parts:[new Gt({sensorType:Ye.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(lt.in,0,1);this.points=[e,ln(n.serverRoom,e,!0),n.serverRoom]}}),new Gt({offsetWall:-.3,sensorType:Ye.lightSwitch,onUpdate:function(n){const e=we(this.parent.getPosition(lt.in,0,1),[0,n.wallInnerThickness]);this.points=[e,ln(n.serverRoom,e,!0),n.serverRoom]}}),new ga({scale:[-1,1],rotate:-90,onUpdate:function(n){this.origin=we(this.parent.getPosition(lt.in,0,0),[-n.wallInnerThickness,0])}})]}),new si({type:Hn.theoretic,floor:at.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=we(e.northWestCorner,[0*e.width,1*e.height]),this.innerWallLength=e.height,this.sides={[lt.in]:[we(this.origin,[0,0]),we(this.origin,[0,-this.innerWallLength])]}},parts:[new bc({sensorType:Ye.toilet,size:120,onUpdate:function(n){const e=we(this.parent.getPosition(lt.in,.5,0),[n.cross.minimumHeightWidth+.1,0]);this.points=[e,ln(n.serverRoom,e,!0),n.serverRoom]}})]}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({sensorType:Ye.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"storage-upstairs",function:"KLK2",floor:at.top,onUpdate:function(n){const t=n.stramien.top.we.toilet-n.stramien.in.we.b-n.wallInnerThickness;this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b-1-2*n.wallInnerThickness-1],this.squaredRoom(t,1)},parts:[new si({floor:at.top,type:Hn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=we(this.parent.northWestCorner,[0,0]),this.sides={[lt.out]:[we(this.origin,[0,-n.wallInnerThickness]),we(this.origin,[this.parent.width+n.wallInnerThickness,-n.wallInnerThickness])],[lt.in]:[we(this.origin,[0,0]),we(this.origin,[this.parent.width,0])]}}}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=we(e.northWestCorner,[e.width,0]),this.sides={[lt.out]:[we(this.origin,[+n.wallInnerThickness,-n.wallInnerThickness]),we(this.origin,[+n.wallInnerThickness,e.height])],[lt.in]:[we(this.origin,[0,0]),we(this.origin,[0,e.height])]}},parts:[new Gt({sensorType:Ye.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(lt.in,0,.8);this.points=[e,ln(n.serverRoom,e,!1),n.serverRoom]}}),new ga({scale:[-1,1],rotate:180,onUpdate:function(n){this.origin=we(this.parent.getPosition(lt.in,0,0),[-n.wallInnerThickness,0])}})]}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"main-bedroom",function:"Sovrum 1",floor:at.top,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.width=cn(n.stramien.in.we.c-n.stramien.in.we.b),this.height=cn(n.stramien.top.ns.hall-n.stramien.in.ns.a),this.center=we(this.northWestCorner,[this.width/2,this.height/2]),this.centralElectricity=this.center;const e=n.stair.totalWidth+n.wallInnerThickness,t=n.stramien.ground.ns.hall-n.wallInnerThickness-this.northWestCorner[1];this.coords=[this.northWestCorner,we(this.northWestCorner,[this.width,0]),we(this.northWestCorner,[this.width,this.height]),we(this.northWestCorner,[e,this.height]),we(this.northWestCorner,[e,t]),we(this.northWestCorner,[0,t])]},parts:[new si({floor:at.top,type:Hn.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallOuterThickness,this.origin=we(this.parent.northWestCorner,[0,0]),this.sides={[lt.in]:[we(this.origin,[0,0]),we(this.origin,[this.parent.width,0])]}},parts:[new Gt({offset:[0,.3],amount:2,sensorType:Ye.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(lt.in,.5,-.4);this.points=[t,ln(e,t,!0),e]}})]}),new si({floor:at.top,type:Hn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[2],this.innerWallLength=Ma(e.coords[3],e.coords[2]),this.sides={[lt.out]:[we(this.origin,[0,n.wallInnerThickness]),we(this.origin,[-(this.innerWallLength+n.wallInnerThickness),n.wallInnerThickness])],[lt.in]:[we(this.origin,[0,0]),we(this.origin,[-this.innerWallLength,0])]}},parts:[new ga({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=we(this.parent.getPosition(lt.in,1,0),[0,0])}}),...[Ye.lightSwitch,Ye.temperature].map(n=>new Gt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(lt.in,1,-1);this.points=[t,ln(e.serverRoom,t,!1),e.serverRoom]}}))]}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.thickness=n.wallInnerThickness;const e=this.parent;this.origin=e.coords[3],this.innerWallLength=Ma(e.coords[4],e.coords[3]),this.sides={[lt.out]:[we(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),we(this.origin,[-n.wallInnerThickness,-this.innerWallLength+n.wallInnerThickness])],[lt.in]:[we(this.origin,[0,0]),we(this.origin,[0,-this.innerWallLength])]}}}),new si({name:"SouthLeft",floor:at.top,type:Hn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[4],this.innerWallLength=Ma(e.coords[5],e.coords[4]),this.sides={[lt.out]:[we(this.origin,[-n.wallInnerThickness,n.wallInnerThickness]),we(this.origin,[-this.innerWallLength,n.wallInnerThickness])],[lt.in]:[we(this.origin,[0,0]),we(this.origin,[-this.innerWallLength,0])]}},parts:[new Gt({offset:[0,.3],sensorType:Ye.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(lt.in,0,.3);this.points=[t,ln(e,t,!0),e]}}),new Gt({offset:[0,.3],amount:2,sensorType:Ye.socket,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(lt.in,0,0);this.points=[t,ln(e,t,!0),e]}})]}),new Gt({sensorType:Ye.lightSwitch,onUpdate:function(n){const e=this.parent.centralElectricity;this.points=[e,ln(n.serverRoom,e,!1),n.serverRoom]}}),new d2({onUpdate:function(n){const t=we(this.parent.center,[1,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({onUpdate:function(n){const e=this.parent,t=we(e.northWestCorner,[e.width/2,2]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"bathroom",function:"Badrum",floor:at.top,onUpdate:function(n){const i=n.stramien.top.ns.hall+n.wallInnerThickness,s=n.stramien.in.ns.b-.5,o=n.tower.innerCoords[3][0]-2;this.northWestCorner=[n.stramien.top.we.hall+n.wallInnerThickness,i],this.center=we(this.northWestCorner,[2,2]),this.coords=[this.northWestCorner,[n.stramien.in.we.c,i],[n.stramien.in.we.c,n.tower.innerCoords[0][1]],n.tower.innerCoords[1],n.tower.innerCoords[2],[n.tower.innerCoords[3][0],s],[o,s],[o,n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]]},parts:[new si({floor:at.top,type:Hn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=Ma(e.coords[5],e.coords[6]),this.sides={[lt.out]:[we(e.coords[5],[0,n.wallInnerThickness]),we(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness])],[lt.in]:[we(e.coords[5],[0,0]),we(e.coords[6],[0,0])]}},parts:[new bc({sensorType:Ye.shower,onUpdate:function(n){const i=this.parent.getPosition(lt.in,0,n.tower.width);this.points=[we(i,[0,-.3]),i,ln(n.serverRoom,i,!0),n.serverRoom]}}),new bc({sensorType:Ye.drain,size:50,onUpdate:function(n){const i=this.parent.getPosition(lt.in,0,n.tower.width);this.points=[we(i,[0,-.3]),i,ln(n.serverRoom,i,!0),n.serverRoom]}})]}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[6],this.innerWallLength=Ma(e.coords[6],e.coords[7]),this.sides={[lt.out]:[we(e.coords[6],[n.wallInnerThickness,n.wallInnerThickness]),we(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness])],[lt.in]:[we(e.coords[6],[0,0]),we(e.coords[7],[0,0])]}}}),new si({name:"SouthLeft",floor:at.top,type:Hn.inner,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[5],this.innerWallLength=Ma(e.coords[7],e.coords[8]),this.sides={[lt.out]:[we(e.coords[7],[n.wallInnerThickness,n.wallInnerThickness]),we(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness])],[lt.in]:[we(e.coords[7],[0,0]),we(e.coords[8],[0,0])]}},parts:[new ga({scale:[1,1],rotate:90,onUpdate:function(n){this.origin=we(this.parent.getPosition(lt.in,1,0),[0,0])}}),...[Ye.lightSwitch,Ye.temperature].map(n=>new Gt({amount:n===Ye.lightSwitch?2:1,sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(lt.in,1,-1);this.points=[t,ln(e.serverRoom,t,!0),e.serverRoom]}})),...[Ye.lightSwitch,Ye.temperature].map(n=>new Gt({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=we(this.parent.getPosition(lt.in,1,-1),[0,e.wallInnerThickness]);this.points=[t,ln(e.serverRoom,t,!0),e.serverRoom]}}))]}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=e.coords[8],this.innerWallLength=Ma(e.coords[8],e.coords[0]),this.sides={[lt.out]:[we(e.coords[8],[-n.wallInnerThickness,n.wallInnerThickness]),we(e.coords[0],[-n.wallInnerThickness,0])],[lt.in]:[we(e.coords[8],[0,0]),we(e.coords[0],[0,0])]}},parts:[new Gt({offsetWall:-.3,sensorType:Ye.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(lt.in,1,-.5);this.points=[we(t,[-n.wallInnerThickness,0]),ln(e,t,!0),e]}}),...[0,1,2].map(n=>new Gt({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:Ye.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(lt.in,(n+1)/4,0);this.points=[we(i,[1===n?-e.wallInnerThickness:0,0]),we(i,[0,0]),ln(t,i,!1),t]}})),new bc({sensorType:Ye.drain,onUpdate:function(n){const t=this.parent,i=we(t.getPosition(lt.in,2/3,0),[.3,0]),r=we(t.getPosition(lt.in,1/3,0),[.3,0]);this.points=[i,r]}}),new bc({sensorType:Ye.drain,onUpdate:function(n){const i=we(this.parent.getPosition(lt.in,1/3,0),[.3,0]);this.points=[i,[i[0],n.stramien.in.ns.b-(.5+n.wallInnerThickness)]]}}),new bc({sensorType:Ye.waterWarm,onUpdate:function(n){const e=we(this.parent.getPosition(lt.in,.6666666666666666,0),[.3,0]),t=we(this.parent.getPosition(lt.in,1/3,0),[.3,0]);this.points=[e,t]}}),new bc({sensorType:Ye.waterWarm,onUpdate:function(n){const e=we(this.parent.getPosition(lt.in,.3333333333333333,0),[.3,0]);this.points=[e]}}),...[Ye.lightSwitch,Ye.temperature].map(n=>new Gt({offsetWall:-.3,sensorType:n,onUpdate:function(e){const t=we(this.parent.getPosition(lt.in,1,-1),[-e.wallInnerThickness,0]);this.points=[t,ln(e.serverRoom,t,!1),e.serverRoom]}}))]}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({sensorType:Ye.ventIn,size:400,onUpdate:function(n){const t=we(n.serverRoom,[0,-1]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({function:"Sovrum 2",name:"Upper-east",floor:at.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=e.in.we.d-e.in.we.c-t,r=e.in.ns.c-e.top.ns.walkway-t;this.northWestCorner=[e.in.we.c+t,e.top.ns.walkway+t];const s=e.in.we.c-e.top.we.hall,o=e.in.ns.c+n.balconyEdge-n.balconyDepth-this.northWestCorner[1];this.coords=[this.northWestCorner,we(this.northWestCorner,[i,0]),we(this.northWestCorner,[i,r]),we(this.northWestCorner,[0,r])],n.eastRoomExtended&&this.coords.push(we(this.northWestCorner,[0,o]),we(this.northWestCorner,[-s,o]),we(this.northWestCorner,[-s,0])),this.center=we(this.northWestCorner,[i/2,r/2]),this.centralElectricity=this.center},parts:[new si({type:Hn.inner,floor:at.top,onUpdate:function(n){let e=6,t=1;n.eastRoomExtended||(e=0,t=1),this.drawByRoom(e,t,n,ai.outside,ai.straight)},parts:[...[Ye.lightSwitch,Ye.temperature].map(n=>new Gt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(lt.in,0,1);this.points=[t,ln(e.serverRoom,t,!1),e.serverRoom]}})),new Gt({offset:[0,.3],sensorType:Ye.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(lt.in,0,1);this.points=[t,ln(e,t,!1),e]}}),new ga({scale:[1,-1],rotate:-90,onUpdate:function(n){this.origin=we(this.parent.getPosition(lt.in,0,0),[0,0])}})]}),new si({type:Hn.theoretic,floor:at.top,onUpdate:function(n){let e=1,t=2;n.eastRoomExtended||(e=1,t=2),this.drawByRoom(e,t,n,ai.straight,ai.straight)}}),new si({type:Hn.theoretic,floor:at.top,onUpdate:function(n){let e=2,t=3;n.eastRoomExtended||(e=2,t=3),this.drawByRoom(e,t,n,ai.straight,ai.straight)}}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){let e=3,t=4,i=ai.inside;n.eastRoomExtended||(e=3,t=0,i=ai.outside),this.drawByRoom(e,t,n,ai.straight,i)}}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){n.eastRoomExtended||(this.visible=!1),this.drawByRoom(4,5,n,ai.inside,ai.outside)}}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){n.eastRoomExtended||(this.visible=!1),this.drawByRoom(5,6,n,ai.outside,ai.outside)}}),...[0,1,2,3].map(n=>new Gt({offset:[[0,3].includes(n)?.3:-.3,0],group:11,sensorType:Ye.socket,onUpdate:function(e){this.points=[we(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Gt({group:11,sensorType:Ye.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=we(t.coords[0],[1,0]);this.points=[i,t.coords[1],t.coords[2],t.coords[3],t.coords[0],ln(e,t.coords[0],!1),e]}}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({onUpdate:function(n){const e=this.parent,t=we(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,ln(n.serverRoom,i,!0),n.serverRoom]}})]}),new J1({function:"Sovrum 3",name:"upper-mid",floor:at.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=e.in.ns.c-e.top.ns.walkway-t,r=e.in.we.b-e.in.we.a-n.westRoomWidth-2*t;this.northWestCorner=[e.in.we.a+n.westRoomWidth+t,e.top.ns.walkway+t];const s=e.in.ns.c+n.balconyEdge-n.balconyDepth-this.northWestCorner[1],o=e.top.we.toilet-this.northWestCorner[0]-t;this.coords=n.midRoomExtended?[this.northWestCorner,we(this.northWestCorner,[o,0]),we(this.northWestCorner,[o,s]),we(this.northWestCorner,[r,s]),we(this.northWestCorner,[r,i]),we(this.northWestCorner,[0,i])]:[this.northWestCorner,we(this.northWestCorner,[r,0]),we(this.northWestCorner,[r,i]),we(this.northWestCorner,[0,i])],this.center=we(this.northWestCorner,[r/2,i/2]),this.centralElectricity=this.center},parts:[new si({floor:at.top,type:Hn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ai.straight,ai.outside)},parts:[...[Ye.lightSwitch,Ye.temperature].map(n=>new Gt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(lt.in,1,-1);this.points=[t,ln(e.serverRoom,t,!1),e.serverRoom]}})),new Gt({offset:[0,.3],sensorType:Ye.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(lt.in,1,-1);this.points=[t,ln(e,t,!1),e]}}),new ga({scale:[1,1],rotate:-90,onUpdate:function(n){this.origin=we(this.parent.getPosition(lt.in,1,0),[0,0])}})]}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){this.drawByRoom(1,2,n,ai.outside,ai.outside)},parts:[]}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){n.midRoomExtended||(this.visible=!1),this.drawByRoom(2,3,n,ai.outside,ai.inside)},parts:[]}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){n.midRoomExtended||(this.visible=!1),this.drawByRoom(3,4,n,ai.inside,ai.straight)},parts:[]}),new si({type:Hn.theoretic,floor:at.top,onUpdate:function(n){let e=4,t=5;n.midRoomExtended||(e=2,t=3),this.drawByRoom(e,t,n,ai.straight,ai.straight)},parts:[]}),new si({type:Hn.theoretic,floor:at.top,onUpdate:function(n){let e=5,t=0;n.midRoomExtended||(e=3,t=0),this.drawByRoom(e,t,n,ai.straight,ai.straight)},parts:[]}),...[0,1,2,3].map(n=>new Gt({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:Ye.socket,onUpdate:function(e){this.points=[we(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Gt({group:10,sensorType:Ye.socket,cableOnly:!0,onUpdate:function(n){const t=this.parent,i=we(t.coords[1],[-1,0]);this.points=[t.coords[1],t.coords[2],t.coords[3],t.coords[0],i]}}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({onUpdate:function(n){const e=this.parent,t=we(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,ln(n.serverRoom,i,!0),n.serverRoom]}})]}),new J1({function:"Sovrum 3",name:"upper-west",floor:at.top,onUpdate:function(n){const e=n.stramien,t=n.westRoomWidth;this.northWestCorner=[e.in.we.a,e.in.ns.b],this.squaredRoom(t,e.in.ns.c-this.northWestCorner[1])},parts:[new si({floor:at.top,type:Hn.theoretic,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.origin=we(this.parent.northWestCorner,[0,0]),this.sides={[lt.in]:[we(this.origin,[0,0]),we(this.origin,[this.parent.width,0])]}},parts:[new Gt({offset:[0,.3],sensorType:Ye.ethernet,onUpdate:function(n){const e=n.serverRoom,t=this.parent.getPosition(lt.in,1,-1);this.points=[t,ln(e,t,!1),e]}})]}),new si({type:Hn.inner,floor:at.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=we(e.northWestCorner,[e.width,0]),this.sides={[lt.out]:[we(this.origin,[+n.wallInnerThickness,0]),we(this.origin,[+n.wallInnerThickness,e.height])],[lt.in]:[we(this.origin,[0,0]),we(this.origin,[0,e.height])]}},parts:[...[Ye.lightSwitch,Ye.temperature].map(n=>new Gt({sensorType:n,onUpdate:function(e){const t=this.parent.getPosition(lt.in,0,1);this.points=[t,ln(e.serverRoom,t,!1),e.serverRoom]}})),new ga({scale:[1,-1],rotate:0,onUpdate:function(n){this.origin=we(this.parent.getPosition(lt.in,0,0),[0,0])}})]}),new si({type:Hn.theoretic,floor:at.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=we(e.northWestCorner,[e.width,e.height]),this.sides={[lt.in]:[we(this.origin,[0,0]),we(this.origin,[-1*e.width,0*e.height])]}},parts:[]}),new si({type:Hn.theoretic,floor:at.top,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight;const e=this.parent;this.origin=we(e.northWestCorner,[0*e.width,1*e.height]),this.sides={[lt.in]:[we(this.origin,[0,0]),we(this.origin,[0*e.width,-1*e.height])]}},parts:[]}),...[0,1,2,3].map(n=>new Gt({offset:[[0,3].includes(n)?.3:-.3,0],group:10,sensorType:Ye.socket,onUpdate:function(e){this.points=[we(this.parent.coords[n],[0,[0,1].includes(n)?1:-1])]}})),new Gt({group:10,sensorType:Ye.socket,cableOnly:!0,onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=we(t.coords[1],[0,1]);this.points=[i,t.coords[2],t.coords[3],t.coords[0],t.coords[1],ln(e,t.coords[1],!0),e]}}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({onUpdate:function(n){const e=this.parent,t=we(e.northWestCorner,[e.width/2,2]),i=[e.northWestCorner[0]+e.width/2,n.stramien.in.ns.b+n.balconyWidth/2];this.points=[t,i,ln(n.serverRoom,i,!0),n.serverRoom]}})]}),new J1({name:"hall-walkway",function:"Passage",floor:at.top,onUpdate:function(n){const e=n.stramien,t=n.wallInnerThickness,i=[e.in.we.b+n.stair.totalWidth,e.ground.ns.hall+n.stair.totalHeight],r=e.in.ns.c+n.balconyEdge,s=r-n.balconyDepth+t;this.coords=[[e.in.we.a+n.westRoomWidth+t,e.in.ns.b],[e.top.we.toilet,e.in.ns.b],[e.top.we.toilet,i[1]],i,[i[0],e.top.ns.hall],[e.top.we.hall,e.top.ns.hall],[e.top.we.hall,e.in.ns.b],[e.in.we.d,e.in.ns.b],[e.in.we.d,e.top.ns.walkway],[e.in.we.c,e.top.ns.walkway]],n.eastRoomExtended&&this.coords.push([e.top.we.hall,e.top.ns.walkway],[e.top.we.hall,s],[e.in.we.c,s]),this.coords.push([e.in.we.c,r],[e.in.we.b,r]),n.midRoomExtended&&this.coords.push([e.in.we.b,s],[e.top.we.toilet,s],[e.top.we.toilet,e.top.ns.walkway]),this.coords.push([e.in.we.b,e.top.ns.walkway],[e.in.we.a+n.westRoomWidth+t,e.top.ns.walkway])},parts:[new Gt({offset:[0,.3],sensorType:Ye.pir,onUpdate:function(n){const e=n.serverRoom,t=[n.stramien.in.we.b+(n.stramien.in.we.c-n.stramien.in.we.b)/2,n.stramien.in.ns.b];this.points=[we(t,[-n.wallInnerThickness,0]),ln(e,t,!0),e]}}),...[Ye.smoke,Ye.poe,Ye.wifi].map((n,e)=>new Gt({offset:[0,n===Ye.smoke?-1:.3],sensorType:n,onUpdate:function(t){const i=t.serverRoom,r=[t.stramien.in.we.b+(t.stramien.in.we.c-t.stramien.in.we.b)/2,t.stramien.in.ns.b];this.points=[we(r,[-t.wallInnerThickness,0]),ln(i,r,!0),i]}})),new Gt({offset:[0,.3],group:10,sensorType:Ye.socket,onUpdate:function(n){this.points=[we([n.stramien.in.we.b,n.stramien.in.ns.b],[-1,0])]}}),new Gt({offset:[0,.3],group:10,sensorType:Ye.socket,onUpdate:function(n){this.points=[we([n.stramien.in.we.c,n.stramien.in.ns.b],[0,0])]}}),new d2({onUpdate:function(n){const t=we(this.parent.coords[0],[1,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"void",floor:at.top,hole:!0,onUpdate:function(n){const e=[n.stramien.in.we.b,n.stramien.in.ns.c+n.balconyEdge],t=n.stramien.in.ns.d-e[1],i=n.stramien.in.we.c-n.stramien.in.we.b;this.coords=[e,we(e,[1*i,0*t]),we(e,[1*i,1*t]),we(e,[0*i,1*t])]}}),new J1({name:"voidStairs",floor:at.top,hole:!0,onUpdate:function(n){const e=n.stair;this.northWestCorner=e.stairOrigin;const t=n.stramien.in.ns.b-e.stairOrigin[1]-2-3*n.wallInnerThickness,i=e.totalWidth;this.coords=[this.northWestCorner,we(this.northWestCorner,[i-e.walkWidth,0]),we(this.northWestCorner,[i-e.walkWidth,t]),we(this.northWestCorner,[0,t])]},parts:[new d2({onUpdate:function(n){const t=we(this.parent.northWestCorner,[n.stair.totalWidth/2,1]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]})];class gm extends Sl{constructor(e){super(),this.url="assets/svg/",this.filename="dude.svg",this.anchor=[0,0],this.rotation=0,this.scaler=1,this.scale=[1,1],this.lineThickness=.1,Object.assign(this,e)}draw(e){var t=this;return(0,wi.Z)(function*(){if(void 0===t.svg){if(!t.show(e))return;yield t.loader()}t.show(e)?(t.transform=`translate(${t.anchor[0]},${t.anchor[1]}) rotate(${t.rotation}) scale(${t.scale[0]},${t.scale[1]})`,t.svg.attr("transform",t.transform),t.svg.attr("visibility","visible"),t.setClass(t.svg)):t.svg.attr("visibility","hidden")})()}redraw(e){!this.show(e)||this.svg&&this.svg.node().querySelectorAll("path, rect, circle, ellipse, line, polyline, polygon").forEach(t=>{t.style.strokeWidth=this.scaler*this.meterPerPixel*this.lineThickness+"px"})}loader(){var e=this;return(0,wi.Z)(function*(){const t=yield fetch(`${e.url}${e.filename}`).then(a=>a.text());e.svg=go(`#${e.selector}`),e.classes.push(`svg-${e.filename.split(".")[0]}`);const i=/height="([0-9]+)[.]?\d*px"/gi,r=/width="([0-9]+)[.]?\d*px"/gi,s=Number(i.exec(t)[1]),o=Number(r.exec(t)[1]);e.svg.html(t.replace(i,`height="${s/1e3}px"`).replace(r,`width="${o/1e3}px"`)),e.scaler=s})()}}const K3=1.2,UH={studAmount:13,studDistance:.6,towerWidth:1,wallInnerThickness:.07,wallOuterThickness:.5,roofOuterThickness:.5,studAmountNorth:12,studAmountSouth:4,studAmountWest:12,studAmountEast:8,showTower:!0,balconyWidth:6.2,ceilingHeight:3,floorAboveGround:.7,crawlerHeight:1,crawlerSpace:!0,name:"Lindelund",orientation:{lat:55.91832399684094,lng:13.654632669220504,rotation:10},garage:{width:8.7,length:9.7,orientation:{lat:55.91832399684094,lng:13.654632669220504,rotation:45}},parts:[new NH({floor:at.ground,onUpdate:function(n){const e=n.stramien,t=n.tower;this.coords=[[e.in.we.b,e.in.ns.b],[e.in.we.b,e.in.ns.a],[e.in.we.c,e.in.ns.a],[e.in.we.c,t.innerCoords[0][1]],t.innerCoords[0],t.innerCoords[1],t.innerCoords[2],t.innerCoords[3],[t.innerCoords[3][0],e.in.ns.b],[e.in.we.d,e.in.ns.b],[e.in.we.d,e.in.ns.c],[e.in.we.c,e.in.ns.c],[e.in.we.c,e.in.ns.d],[e.in.we.b,e.in.ns.d],[e.in.we.b,e.in.ns.c],[e.in.we.a,e.in.ns.c],[e.in.we.a,e.in.ns.b]]},parts:[...[...Array(17).keys()].map((n,e,t)=>{const i=[3,4,5,6,7];if([3,4,5,6,7].includes(n))return;const s=[0,11,14,17],o=t.length;return new si({type:Hn.outer,floor:at.all,gable:[1,9,12,15].includes(n),tower:i.includes(n),onUpdate:function(a){const c=l=>l===i[0]||l===i[4]+1||s.includes(l)?ai.inside:s.includes(l)?void 0:ai.outside;this.drawByRoom(n,n+1!==o?n+1:0,a,c(n),c(n+1))},parts:[...16===n?[1].map(a=>new Wa({rotate:90,width:K3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(lt.out,a/2,this.width/2)}})):[],...15===n?[new Wa({windowForm:B0.hexagon,floor:at.top,rotate:0,width:K3,elevation:.9,onUpdate:function(a){const c=this.parent;this.height=a.cross.ceilingHeight-.4-this.elevation,this.origin=c.getPosition(lt.out,.5,this.width/2)}}),...[1,2].map(a=>new Wa({rotate:0,width:K3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(lt.out,a/3,this.width/2)}}))]:[],...14===n?[1,2].map(a=>new Wa({rotate:-90,width:K3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.width=l.innerWallLength<5?l.innerWallLength/3-.2:1.4,this.origin=l.getPosition(lt.out,a/3,this.width/2)}})):[],...13===n?[1].map(a=>new Wa({rotate:0,width:K3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=we(l.getPosition(lt.in,1,-.9),[-l.thickness,0])}})):[],...12===n?[1].map(a=>new Wa({rotate:-90,floor:at.all,elevation:0,windowForm:B0.windowWall,onUpdate:function(c){this.height=c.cross.elevations[Bt.topInside];const l=this.parent;this.width=l.innerWallLength,this.origin=l.getPosition(lt.out,a/2,this.width/2)}})):[],...11===n?[1].map(a=>new Wa({rotate:180,width:K3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=we(l.getPosition(lt.in,0,this.width+.9),[l.thickness,0])}})):[],...10===n?[1].map(a=>new Wa({rotate:-90,width:K3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(lt.out,a/2,this.width/2)}})):[],...9===n?[new Wa({windowForm:B0.hexagon,floor:at.top,rotate:180,width:K3,elevation:.9,onUpdate:function(a){const c=this.parent;this.height=a.cross.ceilingHeight-.4-this.elevation,this.origin=c.getPosition(lt.out,.5,this.width/2)}}),...[0,1].map(a=>new Wa({rotate:180,width:K3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(lt.out,a,this.width/2+(this.width+.8)*(0===a?1:-1))}})),...[0,1].map(a=>new ga({floor:at.ground,scale:[-1,0===a?-1:1],outside:!0,onUpdate:function(c){const u=this.parent,f=u.innerWallLength/2;this.origin=we(u.origin,[0,0===a?f-this.width:f+this.width])}}))]:[],...8===n?[1].map(a=>new Wa({rotate:90,width:K3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(lt.out,.5,this.width/2-c.wallOuterThickness/2)}})):[],...2===n?[1,2.5].map(a=>new Wa({rotate:180,width:K3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(lt.out,a/3,this.width/2)}})):[],...1===n?[new Wa({windowForm:B0.hexagon,floor:at.top,rotate:90,width:K3,elevation:.9,onUpdate:function(a){const c=this.parent;this.height=a.cross.ceilingHeight-.4-this.elevation,this.origin=c.getPosition(lt.out,.5,this.width/2)}}),...[1,2].map(a=>new Wa({rotate:90,width:K3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(lt.out,a/3,this.width/2)}}))]:[],...0===n?[new ga({outside:!0,width:1,height:2.7,floor:at.ground,rotate:0,scale:[1,1],onUpdate:function(a){this.origin=we(this.parent.getPosition(lt.in,0,1.2+a.wallInnerThickness),[-a.wallOuterThickness,0])}}),...[2,5].map(a=>new Wa({rotate:0,width:K3,elevation:.9,onUpdate:function(c){const l=this.parent;this.height=c.cross.ceilingHeight-.4-this.elevation,this.origin=l.getPosition(lt.out,(a+1)/8,this.width/2)}}))]:[]]})}).filter(n=>n),...[...Array(8).keys()].map((n,e,t)=>new si({type:Hn.outer,tower:!0,onUpdate:function(i){if(this.ceiling=i.cross.ceilingHeight,this.outOfDesign=!i.showTower,this.floor=n<3?at.all:at.tower,this.outOfDesign)return;const r=i.wallOuterThickness-i.wallInnerThickness,s=JSON.parse(JSON.stringify(i.tower.innerCoords));this.origin=[i.stramien.in.we.c,s[0][1]],this.innerWallLength=i.towerWidth-r;const o=7===n?0:n+1;0===n&&(s[n][0]=i.stramien.in.we.c),2===n&&(s[o][1]=i.stramien.in.ns.b),this.sides={[lt.out]:[i.tower.outerCoords[n],i.tower.outerCoords[o]],[lt.in]:[s[n],s[o]]}},parts:[...0===n?[new Gt({sensorType:Ye.socket,amount:2,group:4,onUpdate:function(i){const r=this.parent,s=r.getPosition(lt.in,0,0);this.points=[r.getPosition(lt.in,1,-.2),s,ln(s,i.serverRoom,!0),i.serverRoom]}})]:[],...1===n?[new ga({outside:!0,rotate:135,scale:[1,1],floor:at.ground,onUpdate:function(i){this.outOfDesign=!i.showTower,this.outOfDesign||(this.origin=this.parent.getPosition(lt.out,.5,-this.width/2))}}),new Wa({rotate:135,scale:[1,1],floor:at.top,width:.8,elevation:1,height:2,onUpdate:function(i){this.outOfDesign=!i.showTower,this.outOfDesign||(this.origin=this.parent.getPosition(lt.out,.5,this.width/2))}})]:[],...2===n?[new Gt({sensorType:Ye.socket,amount:2,group:4,onUpdate:function(i){const s=this.parent.getPosition(lt.in,0,.2);this.points=[s,ln(s,i.serverRoom,!0),i.serverRoom]}})]:[]]})).filter(n=>n)]}),new J1({name:"West",function:"Vardagsrum",floor:at.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.a,e.in.ns.b],this.squaredRoom(e.in.we.b-e.in.we.a-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new Gt({offset:[0,.3],sensorType:Ye.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(lt.in,3/4,0);this.points=[e,ln(n,e,!1),n]}}),new Gt({offset:[0,.3],sensorType:Ye.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(lt.in,1/4,0);this.points=[e,ln(n,e,!1),n]}}),new Gt({group:1,sensorType:Ye.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=we(this.parent.sides[lt.in][1],[-1,0]);this.points=[e]}}),new Gt({group:1,sensorType:Ye.socket,amount:2,offset:[0,.3],onUpdate:function(){const t=we(this.parent.sides[lt.in][1],[-this.parent.parent.width/2,0]);this.points=[t]}}),new Gt({group:1,sensorType:Ye.socket,amount:2,offset:[0,.3],onUpdate:function(){const e=we(this.parent.sides[lt.in][0],[1,0]);this.points=[e]}})]}),new si({type:Hn.inner,floor:at.ground,onUpdate:function(n){this.drawByRoom(1,2,n,ai.straight,ai.straight)},parts:[new Gt({group:2,sensorType:Ye.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=we(this.parent.sides[lt.in][1],[0,-1]);this.points=[e]}}),new Gt({group:1,sensorType:Ye.socket,amount:2,offset:[-.3,0],onUpdate:function(){const e=we(this.parent.sides[lt.in][0],[0,1]);this.points=[e]}}),new ga({floor:at.ground,scale:[1,-1],onUpdate:function(n){this.origin=we(this.parent.sides[lt.in][0],[0,this.parent.parent.height/2-this.width])}}),new ga({floor:at.ground,scale:[1,1],onUpdate:function(n){this.origin=we(this.parent.sides[lt.in][0],[0,this.parent.parent.height/2+this.width])}}),...[Ye.dimmer,Ye.lightSwitch,Ye.temperature].map((n,e)=>new Gt({sensorType:n,offsetWall:Ye.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(lt.in,.3333333333333333,0);this.points=[i,ln(t.serverRoom,i,!1),t.serverRoom]}}))]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Gt({group:2,sensorType:Ye.socket,amount:2,offset:[0,-.3],onUpdate:function(n){const t=we(this.parent.sides[lt.in][0],[-1,0]);this.points=[t]}}),new Gt({group:2,sensorType:Ye.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=we(this.parent.sides[lt.in][0],[-this.parent.parent.width/2,0]);this.points=[e]}}),new Gt({group:2,sensorType:Ye.socket,amount:2,offset:[0,-.3],onUpdate:function(){const e=we(this.parent.sides[lt.in][1],[1,0]);this.points=[e]}})]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new Gt({group:1,sensorType:Ye.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=we(this.parent.sides[lt.in][1],[0,1]);this.points=[e]}}),new Gt({group:2,sensorType:Ye.socket,amount:2,offset:[.3,0],onUpdate:function(){const e=we(this.parent.sides[lt.in][0],[0,-1]);this.points=[e]}})]}),new Gt({sensorType:Ye.smoke,onUpdate:function(n){const e=we(this.parent.northWestCorner,[.8*this.parent.width,.5*this.parent.height]),t=we(e,[0,.5*-this.parent.height]);this.points=[e,t,ln(t,n.serverRoom,!1),n.serverRoom]}}),new Gt({sensorType:Ye.socket,amount:2,cableOnly:!0,group:1,onUpdate:function(n){const e=this.parent;this.points=[we(e.northWestCorner,[e.width,e.height/2-1]),we(e.northWestCorner,[e.width,0]),we(e.northWestCorner,[0,0]),we(e.northWestCorner,[0,e.height/2-1])]}}),new Gt({sensorType:Ye.socket,amount:2,cableOnly:!0,group:2,onUpdate:function(n){const e=this.parent;this.points=[we(e.northWestCorner,[0,e.height/2+1]),we(e.northWestCorner,[0,e.height]),we(e.northWestCorner,[e.width,e.height]),we(e.northWestCorner,[e.width,e.height/2+1])]}}),new Gt({group:1,sensorType:Ye.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=we(e.northWestCorner,[e.width-n.wallInnerThickness,0]);this.points=[t,ln(n.serverRoom,t,!0),n.serverRoom]}}),new Gt({group:2,sensorType:Ye.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=we(e.northWestCorner,[e.width,e.height/2+1]);this.points=[we(e.northWestCorner,[e.width-n.wallInnerThickness,e.height/2+1]),t,ln(n.serverRoom,t,!1),n.serverRoom]}}),...[Ye.camera,Ye.poe].map(n=>new Gt({sensorType:n,cableType:hh.OutsidePOE,offset:[0,-1],onUpdate:function(e){const t=this.parent,i=we(t.northWestCorner,[t.width/2,-e.wallOuterThickness]);this.points=[i,we(i,[0,1]),e.serverRoom]}})),...[Ye.camera,Ye.poe].map(n=>new Gt({sensorType:n,cableType:hh.OutsidePOE,offset:[0,1],onUpdate:function(e){const t=this.parent,i=we(t.northWestCorner,[1,t.height+e.wallOuterThickness]);this.points=[i,we(i,[0,-1]),e.serverRoom]}})),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({sensorType:Ye.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"East",function:"Matplats",floor:at.ground,onUpdate:function(n){const e=n.stramien;this.northWestCorner=[e.in.we.c+n.wallInnerThickness,e.in.ns.b],this.squaredRoom(e.in.we.d-e.in.we.c-n.wallInnerThickness,e.in.ns.c-e.in.ns.b)},parts:[new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new Gt({sensorType:Ye.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(lt.in,.3333333333333333,0);this.points=[e,ln(n.serverRoom,e,!1),n.serverRoom]}}),new Gt({group:3,sensorType:Ye.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(lt.in,1/3,0)]}}),new Gt({group:3,sensorType:Ye.socket,amount:2,onUpdate:function(){this.points=[this.parent.getPosition(lt.in,2/3,0)]}}),new Gt({offset:[0,.3],sensorType:Ye.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(lt.in,3/4,0);this.points=[e,ln(n,e,!0),n]}})]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[Ye.camera,Ye.poe].map(n=>new Gt({sensorType:n,cableType:hh.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(lt.in,0,0);this.points=[we(t,[e.wallOuterThickness,0]),we(t,[-1,1]),e.serverRoom]}})),new Gt({sensorType:Ye.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(lt.in,0,1.5);this.points=[e,ln(n.serverRoom,e,!1),n.serverRoom]}})]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new Gt({group:3,amount:2,sensorType:Ye.socket,onUpdate:function(){this.points=[this.parent.getPosition(lt.in,1/3,0)]}}),new Gt({group:3,sensorType:Ye.socket,amount:2,offset:[0,.3],onUpdate:function(){this.points=[this.parent.getPosition(lt.in,2/3,0)]}}),new Gt({sensorType:Ye.ethernet,onUpdate:function(){const n=this.parent.parent.parent.serverRoom,e=this.parent.getPosition(lt.in,1/4,0),t=this.parent.parent.northWestCorner;this.points=[e,ln(e,t,!0),t,ln(n,t,!0),n]}})]}),new si({type:Hn.inner,floor:at.ground,onUpdate:function(n){this.drawByRoom(3,0,n,ai.straight,ai.straight)},parts:[...[Ye.dimmer,Ye.lightSwitch,Ye.temperature].map((n,e)=>new Gt({sensorType:n,offsetWall:Ye.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(lt.in,1,-1.5);this.points=[i,ln(t.serverRoom,i,!1),t.serverRoom]}})),new ga({floor:at.ground,scale:[1,1],rotate:180,onUpdate:function(n){this.origin=we(this.parent.sides[lt.in][1],[0,this.parent.parent.height/2-this.width])}}),new ga({floor:at.ground,scale:[1,-1],rotate:180,onUpdate:function(n){this.origin=we(this.parent.sides[lt.in][1],[0,this.parent.parent.height/2+this.width])}})]}),new Gt({sensorType:Ye.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[we(e.northWestCorner,[e.width,e.height/2-1]),we(e.northWestCorner,[e.width,0]),we(e.northWestCorner,[0,0]),we(e.northWestCorner,[0,e.height/2-1])]}}),new Gt({sensorType:Ye.socket,amount:2,cableOnly:!0,group:3,onUpdate:function(n){const e=this.parent;this.points=[we(e.northWestCorner,[0,e.height/2+1]),we(e.northWestCorner,[0,e.height]),we(e.northWestCorner,[e.width,e.height]),we(e.northWestCorner,[e.width,e.height/2+1])]}}),new Gt({group:3,sensorType:Ye.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const t=we(this.parent.northWestCorner,[0,0]);this.points=[t,ln(n.serverRoom,t,!0),n.serverRoom]}}),new Gt({group:3,sensorType:Ye.socket,amount:2,cableOnly:!0,classes:["cable-connection"],onUpdate:function(n){const e=this.parent,t=we(e.northWestCorner,[-n.wallInnerThickness,e.height/2+1]);this.points=[we(e.northWestCorner,[0,e.height/2+1]),t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new d2({sensorType:Ye.lightBulb,onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({sensorType:Ye.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"Central",function:"k\xf6k",floor:at.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.b],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.in.ns.d-n.stramien.in.ns.b)},parts:[new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=we(this.parent.northWestCorner,[this.parent.width,n.stramien.in.ns.c-n.stramien.in.ns.b]),this.sides={[lt.in]:[we(this.origin,[n.wallOuterThickness,+n.wallOuterThickness]),we(this.origin,[n.wallOuterThickness,this.innerWallLength+n.wallOuterThickness])],[lt.in]:[we(this.origin,[0,0]),we(this.origin,[0,this.innerWallLength])]}},parts:[new Gt({group:4,amount:3,sensorType:Ye.socket,onUpdate:function(){this.points=[this.parent.getPosition(lt.in,.5,0)]}}),new Gt({group:4,amount:2,sensorType:Ye.socket,onUpdate:function(){this.points=[this.parent.getPosition(lt.in,0,-1)]}})]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[new Gt({sensorType:Ye.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(lt.in,0,1.5);this.points=[e,ln(n.serverRoom,e,!1),n.serverRoom]}})]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("s",n,n.wallOuterThickness)},parts:[new gm({filename:"Table.svg",onUpdate:function(){this.rotation=0;const e=this.parent.getPosition(lt.in,0,2.6+.8);this.anchor=we(e,[0,-.8-1.6])}})]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.ceiling=n.cross.ceilingHeight,this.innerWallLength=n.stramien.in.ns.d-n.stramien.in.ns.c,this.origin=we(this.parent.northWestCorner,[0,n.stramien.in.ns.d-n.stramien.in.ns.b]),this.sides={[lt.in]:[we(this.origin,[-n.wallOuterThickness,+n.wallOuterThickness]),we(this.origin,[-n.wallOuterThickness,-this.innerWallLength+n.wallOuterThickness])],[lt.in]:[we(this.origin,[0,0]),we(this.origin,[0,-this.innerWallLength])]}},parts:[new Gt({group:5,amount:6,sensorType:Ye.socket,onUpdate:function(){this.points=[this.parent.getPosition(lt.in,.5,0)]}}),new Gt({group:5,amount:6,sensorType:Ye.socket,onUpdate:function(){this.points=[this.parent.getPosition(lt.in,1,1)]}}),...[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].map(n=>new gm({filename:"kitchen.svg",onUpdate:function(){let e=.6*n;n>4&&(e=.6*(n-5)),n>8&&(e=.6*(n-8)),n>12&&(e=-1.5);let t=-.6;n>4&&(t=1.2+.6),n>8&&(t=1.8),n>12&&(t=.6*(n-13)),this.rotation=0,n>4&&(this.rotation=180),n>8&&(this.rotation=0),n>12&&(this.rotation=-90),4===n&&(this.scale=[1,.4/.6],e-=.6-.6*this.scale[1]);const r=this.parent.getPosition(lt.in,1,e);this.anchor=we(r,[t,0])}})),new gm({filename:"sink.svg",onUpdate:function(){this.rotation=-90;const e=this.parent.getPosition(lt.in,1,-1.5);this.anchor=we(e,[.6,0])}}),new gm({filename:"induction.svg",onUpdate:function(){this.rotation=180;const e=this.parent.getPosition(lt.in,1,.6);this.anchor=we(e,[1.2+.6,0])}})]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[Ye.dimmer,Ye.lightSwitch,Ye.temperature].map((n,e)=>new Gt({sensorType:n,offsetWall:Ye.dimmer===n?1:.3,onUpdate:function(t){const i=this.parent.getPosition(lt.in,1,-1.5);this.points=[i,ln(t.serverRoom,i,!1),t.serverRoom]}})),...[Ye.lightSwitch,Ye.temperature].map((n,e)=>new Gt({sensorType:n,onUpdate:function(t){const i=this.parent.getPosition(lt.in,0,1.5);this.points=[i,ln(t.serverRoom,i,!1),t.serverRoom]}})),...[Ye.drain,Ye.waterWarm].map(n=>new bc({sensorType:n,onUpdate:function(e){const r=this.parent.getPosition(lt.in,0,1.5);this.points=[r,ln(e.serverRoom,r,!0),e.serverRoom]}}))]}),new si({type:Hn.inner,floor:at.ground,onUpdate:function(n){this.drawByRoom(0,1,n,ai.straight,ai.straight)},parts:[new ga({floor:at.ground,rotate:90,scale:[-1,1],onUpdate:function(n){this.origin=this.parent.getPosition(lt.in,0,0)}})]}),new Gt({group:7,offset:[.6,0],sensorType:Ye.perilex,verticalCableLength:4,onUpdate:function(n){const e=we(this.parent.northWestCorner,[0,this.parent.height-2]);this.points=[e,ln(e,n.serverRoom,!0),n.serverRoom]}}),new Gt({group:4,cableOnly:!0,sensorType:Ye.socket,amount:2,onUpdate:function(n){const e=we(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[we(this.parent.northWestCorner,[this.parent.width,this.parent.height]),we(this.parent.northWestCorner,[this.parent.width,0]),e,ln(e,n.serverRoom,!0),n.serverRoom]}}),new Gt({group:5,cableOnly:!0,sensorType:Ye.socket,amount:2,onUpdate:function(n){const e=we(this.parent.northWestCorner,[.5*this.parent.width,0]);this.points=[we(this.parent.northWestCorner,[0,this.parent.height]),we(this.parent.northWestCorner,[0,0]),e,ln(e,n.serverRoom,!0),n.serverRoom]}}),new Gt({group:5,amount:6,sensorType:Ye.socket,onUpdate:function(n){const e=we(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=we(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,ln(e,t,!0),t]}}),new Gt({group:5,amount:2,offset:[.3,0],sensorType:Ye.socket,onUpdate:function(n){const e=we(this.parent.northWestCorner,[0*this.parent.width,.15*this.parent.height]),t=we(this.parent.northWestCorner,[0,.15*this.parent.height]);this.points=[e,ln(e,t,!0),t]}}),new Gt({group:4,amount:2,offset:[-.3,0],sensorType:Ye.socket,onUpdate:function(n){const e=we(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]),t=we(this.parent.northWestCorner,[1*this.parent.width,.15*this.parent.height]);this.points=[e,ln(e,t,!0),t]}}),new Gt({sensorType:Ye.smoke,verticalCableLength:6,onUpdate:function(n){const e=we(this.parent.northWestCorner,[.3*this.parent.width,.8*this.parent.height]),t=we(this.parent.northWestCorner,[0*this.parent.width,.8*this.parent.height]),i=this.parent.northWestCorner;this.points=[e,t,i,ln(i,n.serverRoom,!0),n.serverRoom]}}),new Gt({sensorType:Ye.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=we(this.parent.northWestCorner,[0,.5*this.parent.height-2]);this.points=[e,ln(n,e,!1),n]}}),new Gt({sensorType:Ye.ethernet,offset:[.3,0],onUpdate:function(){const n=this.parent.parent.serverRoom,e=we(this.parent.northWestCorner,[0,.8*this.parent.height]);this.points=[e,ln(n,e,!1),n]}}),new Gt({offset:[-.3,0],sensorType:Ye.ethernet,onUpdate:function(){const n=this.parent.parent.serverRoom,e=we(this.parent.northWestCorner,[this.parent.width,.5*this.parent.height-2]);this.points=[e,ln(n,e,!1),n]}}),new Gt({sensorType:Ye.pir,cableType:hh.SharedEthernet,offset:[0,.3],onUpdate:function(n){const e=this.parent,t=we(e.northWestCorner,[e.width/2,0]),i=ln(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({sensorType:Ye.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"Hall",function:"Entr\xe9",floor:at.ground,onUpdate:function(n){this.northWestCorner=n.stair.stairOrigin,this.squaredRoom(n.stramien.ground.we.hall-n.stramien.in.we.b,n.stramien.in.ns.b-n.stramien.ground.ns.hall-n.wallInnerThickness)},parts:[new Gt({sensorType:Ye.pir,cableType:hh.SharedEthernet,offset:[-.3,0],onUpdate:function(n){const e=this.parent,t=we(e.northWestCorner,[e.width,e.height-1]),i=we(e.northWestCorner,[e.width,e.height]);this.points=[t,i,n.serverRoom]}}),new si({type:Hn.inner,floor:at.ground,onUpdate:function(n){this.drawByRoom(1,2,n,ai.straight,ai.straight)},parts:[new ga({scale:[1,1],rotate:0,floor:at.ground,onUpdate:function(n){this.origin=we(this.parent.getPosition(lt.in,1,-.2),[-n.wallInnerThickness,0])}}),new ga({scale:[-1,1],rotate:0,floor:at.ground,onUpdate:function(n){this.origin=we(this.parent.getPosition(lt.out,1,-(n.stramien.in.ns.b-n.tower.innerCoords[0][1]-1*n.wallInnerThickness-.9)),[-n.wallInnerThickness,0])}}),...[Ye.lightSwitch,Ye.temperature].map(n=>new Gt({sensorType:n,offsetWall:.3,onUpdate:function(e){const t=this.parent.getPosition(lt.in,1,-2.5);this.points=[t,ln(e.serverRoom,t,!1),e.serverRoom]}})),...[Ye.lightSwitch,Ye.temperature].map(n=>new Gt({sensorType:n,offsetWall:-.3,onUpdate:function(e){const t=we(this.parent.getPosition(lt.in,1,-2.5),[e.wallInnerThickness,0]);this.points=[t,ln(e.serverRoom,t,!1),e.serverRoom]}}))]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[new Gt({sensorType:Ye.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(lt.in,0,2.5);this.points=[e,ln(n.serverRoom,e,!1),n.serverRoom]}})]}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"Office",function:"Office",floor:at.ground,onUpdate:function(n){this.northWestCorner=[n.stramien.in.we.b,n.stramien.in.ns.a],this.squaredRoom(n.stramien.in.we.c-n.stramien.in.we.b,n.stramien.ground.ns.hall-n.stramien.in.ns.a-n.wallInnerThickness)},parts:[new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallOuterThickness)},parts:[...[2/6,4/6].map(n=>new Gt({offsetWall:.3,sensorType:Ye.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(lt.in,n,0);this.points=[t,ln(e,t,!1),e]}}))]}),new si({floor:at.ground,type:Hn.inner,onUpdate:function(n){this.drawByRoom(2,3,n,ai.straight,ai.straight)},parts:[new ga({rotate:90,floor:at.ground,scale:[1,1],onUpdate:function(n){this.origin=this.parent.getPosition(lt.in,1,-(n.stair.totalWidth+n.wallInnerThickness-this.width))}}),...[0,1,2].map(n=>new Gt({amount:2,offsetWall:-.3,sensorType:Ye.socket,onUpdate:function(e){const i=this.parent.getPosition(lt.in,(n+1)/6,0);this.points=[i]}})),...[Ye.lightSwitch,Ye.temperature].map(n=>new Gt({sensorType:n,offsetWall:.3,onUpdate:function(e){const i=this.parent.getPosition(lt.in,.5,0);this.points=[i,ln(e.serverRoom,i,!1),e.serverRoom]}})),new Gt({sensorType:Ye.lightSwitch,offsetWall:-.3,onUpdate:function(n){const t=we(this.parent.getPosition(lt.in,.5,0),[0,n.wallInnerThickness]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("e",n,n.wallOuterThickness)},parts:[...[Ye.camera,Ye.poe].map(n=>new Gt({sensorType:n,cableType:hh.OutsidePOE,offsetWall:-.3,onUpdate:function(e){const t=this.parent.getPosition(lt.in,0,0);this.points=[we(t,[e.wallOuterThickness,0]),we(t,[-1,1]),e.serverRoom]}})),...[2/6,4/6].map(n=>new Gt({offsetWall:-.3,sensorType:Ye.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(lt.in,n,0);this.points=[t,ln(e,t,!1),e]}}))]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[...[1/6,5/6].map(n=>new Gt({offset:[0,.3],sensorType:Ye.ethernet,onUpdate:function(){const e=this.parent.parent.parent.serverRoom,t=this.parent.getPosition(lt.in,n,0);this.points=[t,ln(e,t,!1),e]}}))]}),new Gt({sensorType:Ye.smoke,onUpdate:function(n){const e=we(this.parent.northWestCorner,[.5*this.parent.width,.5*this.parent.height]);this.points=[e,ln(e,n.serverRoom,!0),n.serverRoom]}}),new Gt({sensorType:Ye.socket,amount:2,via:at.ceiling,group:6,offset:[0,.3],onUpdate:function(n){const i=we(this.parent.northWestCorner,[1,0]);this.points=[i]}}),new Gt({sensorType:Ye.socket,amount:2,group:6,offset:[0,.3],onUpdate:function(n){const e=this.parent,i=we(e.northWestCorner,[e.width-1,0]);this.points=[i]}}),new Gt({sensorType:Ye.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const e=this.parent,i=we(e.northWestCorner,[0,e.height-1]);this.points=[i]}}),new Gt({sensorType:Ye.socket,amount:2,group:6,offset:[.3,0],onUpdate:function(n){const i=we(this.parent.northWestCorner,[0,1]);this.points=[i]}}),new Gt({sensorType:Ye.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=we(e.northWestCorner,[e.width,1]);this.points=[i]}}),new Gt({sensorType:Ye.socket,amount:2,group:6,offset:[-.3,0],onUpdate:function(n){const e=this.parent,i=we(e.northWestCorner,[e.width,e.height-1]);this.points=[i]}}),new Gt({sensorType:Ye.socket,amount:2,cableOnly:!0,group:6,onUpdate:function(n){const e=this.parent;this.points=[we(e.northWestCorner,[0,e.height-1]),we(e.northWestCorner,[0,0]),we(e.northWestCorner,[e.width,0]),we(e.northWestCorner,[e.width,e.height]),we(e.northWestCorner,[.5*e.width,e.height]),ln(n.serverRoom,we(e.northWestCorner,[.5*e.width,e.height]),!1),n.serverRoom]}}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({sensorType:Ye.ventOut,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"Toilet",floor:at.ground,function:"WC",onUpdate:function(n){const e=n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9;this.northWestCorner=[n.stramien.in.we.b+n.stair.totalWidth-n.stair.walkWidth+n.wallInnerThickness,n.stramien.in.ns.b-e-n.wallInnerThickness],this.squaredRoom(.8,e)},parts:[new si({floor:at.ground,type:Hn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ai.straight,ai.outside)},parts:[new bc({sensorType:Ye.toilet,size:120,onUpdate:function(n){const e=we(this.parent.getPosition(lt.in,.5,0),[0,.2]);this.points=[e,ln(n.serverRoom,e,!0),n.serverRoom]}})]}),new si({floor:at.ground,type:Hn.inner,onUpdate:function(n){this.drawByRoom(1,2,n,ai.outside,ai.straight)},parts:[new bc({sensorType:Ye.drain,onUpdate:function(n){const e=we(this.parent.getPosition(lt.in,.6666666666666666,0),[0,0]);this.points=[e,[e[0],this.parent.parent.northWestCorner[1]+.2]]}}),new bc({sensorType:Ye.waterWarm,onUpdate:function(n){const e=we(this.parent.getPosition(lt.in,.6666666666666666,0),[0,0]);this.points=[e,ln(n.serverRoom,e,!0),n.serverRoom]}})]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawByRoom(3,0,n,ai.straight,ai.straight)},parts:[new Gt({sensorType:Ye.lightSwitch,onUpdate:function(n){const e=this.parent.getPosition(lt.in,0,.8);this.points=[e,ln(n.serverRoom,e,!1),n.serverRoom]}})]}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({sensorType:Ye.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"Server",function:"KLK",floor:at.ground,onUpdate:function(n){const e=n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9,t=n.stramien.ground.we.hall+.8+2*n.wallInnerThickness;this.northWestCorner=[t,n.stramien.in.ns.b-e-n.wallInnerThickness],this.squaredRoom(n.stramien.in.we.c-t,e)},parts:[new si({floor:at.ground,type:Hn.inner,onUpdate:function(n){this.drawByRoom(0,1,n,ai.straight,ai.straight)},parts:[...[0,1,2].map(n=>new Gt({amount:1===n?2:1,offsetWall:1===n?-.3:.3,sensorType:Ye.socket,onUpdate:function(e){const t=e.serverRoom,i=this.parent.getPosition(lt.in,(n+1)/4,0);this.points=[we(i,[0,1===n?-e.wallInnerThickness:0]),we(i,[0,0]),ln(t,i,!1),t]}}))]}),new Gt({sensorType:Ye.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,ln(e,n.serverRoom,!0),n.serverRoom]}}),...[Ye.poe,Ye.wifi].map(n=>new Gt({offset:[0,.3],sensorType:n,onUpdate:function(e){const t=this.parent.center;this.points=[t,ln(t,e.serverRoom,!0),e.serverRoom]}})),...[Ye.lightSwitch,Ye.temperature].map(n=>new Gt({sensorType:n,offset:[0,.3],onUpdate:function(e){const t=this.parent,i=we(t.northWestCorner,[.2*t.width,0*t.height]),r=we(t.northWestCorner,[0*t.width,0*t.height]);this.points=[i,r,ln(e.serverRoom,r,!1),e.serverRoom]}})),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({sensorType:Ye.ventIn,size:100,onUpdate:function(n){const t=this.parent.center;this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"Tower",floor:at.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,this.outOfDesign||(this.northWestCorner=[n.stramien.out.we.c-(n.wallOuterThickness-n.wallInnerThickness),n.tower.innerCoords[0][1]],this.center=we(this.northWestCorner,[1,1]),this.centralElectricity=this.center,this.coords=[this.northWestCorner,n.tower.innerCoords[0],n.tower.innerCoords[1],n.tower.innerCoords[2],n.tower.innerCoords[3],[n.tower.innerCoords[3][0],n.stramien.in.ns.b-n.wallInnerThickness],[this.northWestCorner[0],n.stramien.in.ns.b-n.wallInnerThickness]])},parts:[new si({type:Hn.inner,floor:at.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(6,0,n,ai.outside,ai.straight)},parts:[new ga({scale:[1,1],rotate:180,floor:at.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=at.ground,this.origin=this.parent.getPosition(lt.in,1,0))}})]}),new si({type:Hn.inner,floor:at.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&this.drawByRoom(5,6,n,ai.straight,ai.outside)},parts:[new ga({scale:[-1,1],rotate:-90,floor:at.ground,onUpdate:function(n){this.outOfDesign=!n.showTower,!this.outOfDesign&&(this.floor=at.ground,this.origin=this.parent.getPosition(lt.in,0,n.wallInnerThickness))}})]}),new Gt({sensorType:Ye.pir,cableType:hh.SharedEthernet,offset:[.3,0],onUpdate:function(n){const e=this.parent,t=we(e.northWestCorner,[0,e.height-1]),i=ln(t,n.serverRoom,!0);this.points=[t,i,n.serverRoom]}}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),new J1({name:"Laundry",function:"Kl\xe4dv\xe5rd",floor:at.ground,onUpdate:function(n){const t=n.stramien.in.we.c-n.stramien.ground.we.hall-n.wallInnerThickness,i=n.stramien.in.ns.b-n.stramien.ground.ns.hall-(n.stramien.in.ns.b-n.tower.innerCoords[0][1]-2*n.wallInnerThickness-.9)-2*n.wallInnerThickness;this.northWestCorner=[n.stramien.ground.we.hall+n.wallInnerThickness,n.stramien.ground.ns.hall],this.squaredRoom(t,i)},parts:[new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("n",n,n.wallOuterThickness)},parts:[new bc({sensorType:Ye.drain,onUpdate:function(n){const t=this.parent.parent.center;this.points=[t,ln(n.serverRoom,t,!0),n.serverRoom]}}),...[Ye.waterCold,Ye.waterRain].map(n=>new bc({sensorType:n,offsetWall:n===Ye.waterRain?0:.3,onUpdate:function(e){const i=this.parent.getPosition(lt.in,n===Ye.waterRain?2/3:3/4,0);this.points=[i,ln(e.serverRoom,i,!1),e.serverRoom]}})),...[Ye.waterCold,Ye.waterRain].map(n=>new bc({sensorType:n,offsetWall:n===Ye.waterRain?0:.3,onUpdate:function(e){const t=this.parent,i=t.getPosition(lt.in,n===Ye.waterRain?1/3:1/4,0),r=t.getPosition(lt.in,n===Ye.waterRain?2/3:3/4,0);this.points=[i,r]}})),new bc({sensorType:Ye.drain,onUpdate:function(n){const e=this.parent,t=e.parent,i=e.getPosition(lt.in,.5,0);this.points=[i,t.center]}})]}),new si({type:Hn.theoretic,floor:at.ground,onUpdate:function(n){this.drawTheoretic("w",n,n.wallInnerThickness)},parts:[]}),new Gt({sensorType:Ye.smoke,onUpdate:function(n){const e=this.parent.center;this.points=[e,ln(e,n.serverRoom,!0),n.serverRoom]}}),new Gt({sensorType:Ye.ethernet,offset:[.3,0],onUpdate:function(n){const e=n.serverRoom,t=this.parent,i=we(t.northWestCorner,[0*t.width,.5*t.height]);this.points=[i,ln(e,i,!1),e]}}),new d2({onUpdate:function(n){const t=we(this.parent.center,[0,0]);this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}}),new Bu({sensorType:Ye.ventIn,size:200,onUpdate:function(n){const t=this.parent.center;this.points=[t,ln(n.serverRoom,t,!1),n.serverRoom]}})]}),...Jje]};var mm=(()=>{return(n=mm||(mm={})).amount="amount",n.name="name",n.sizeOrVersion="sizeOrVersion",n.price="price",n.priceAvg="priceAvg",n.priceMax="priceMax",n.priceTotal="priceTotal",n.remarks="other",n.unit="unit",mm;var n})();class k0{constructor(e){this.sectionFold=!1,Object.assign(this,e)}}class Sa{constructor(e){this.amount=1,this.type="single",Object.assign(this,e)}get calcPrice(){return cn(this.amount*this.price,2)}get calcAmount(){return this.amount}}class KS extends Sa{constructor(e){super(e),this.costs=[],this.type="group",this.collapsed=!1,Object.assign(this,e)}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}get calcPrice(){return AH(this.costs.map(e=>e.calcPrice))}get calcAmount(){return AH(this.costs.map(e=>e.amount))}}class e$e extends KS{constructor(e){super(e),this.costs=[],this.type="total",Object.assign(this,e)}get calcPrice(){return AH(this.costs.map(e=>e.calcPrice))}get calcAmount(){return 0}get folded(){return'<span class="material-icons">remove</span>'}}const t$e={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function zse(n){return t$e[n]}const d5={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},qS=class n$e{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||d5[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},U_=6378137,Am=Math.PI*U_,i$e=[-Am,-Am,Am,Am],r$e=[-180,-85,180,85],XS=U_*Math.log(Math.tan(Math.PI/2));class vm extends qS{constructor(e){super({code:e,units:"m",extent:i$e,global:!0,worldExtent:r$e,getPointResolution:function(t,i){return t/Math.cosh(i[1]/U_)}})}}const Ose=[new vm("EPSG:3857"),new vm("EPSG:102100"),new vm("EPSG:102113"),new vm("EPSG:900913"),new vm("http://www.opengis.net/def/crs/EPSG/0/3857"),new vm("http://www.opengis.net/gml/srs/epsg.xml#3857")];function s$e(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let r=0;r<i;r+=t){e[r]=Am*n[r]/180;let s=U_*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>XS?s=XS:s<-XS&&(s=-XS),e[r+1]=s}return e}function o$e(n,e,t){const i=n.length;t=t>1?t:2,void 0===e&&(e=t>2?n.slice():new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/Am,e[r+1]=360*Math.atan(Math.exp(n[r+1]/U_))/Math.PI-90;return e}const Nse=[-180,-90,180,90],c$e=6378137*Math.PI/180;class p5 extends qS{constructor(e,t){super({code:e,units:"degrees",extent:Nse,axisOrientation:t,global:!0,metersPerUnit:c$e,worldExtent:Nse})}}const Vse=[new p5("CRS:84"),new p5("EPSG:4326","neu"),new p5("urn:ogc:def:crs:OGC:1.3:CRS84"),new p5("urn:ogc:def:crs:OGC:2:84"),new p5("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new p5("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new p5("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let YS={},Eh={};function ZS(n,e,t){const i=n.getCode(),r=e.getCode();i in Eh||(Eh[i]={}),Eh[i][r]=t}const f$e={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class d$e extends Error{constructor(e){const t=f$e[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const Use=d$e;function Kr(n,e){if(!n)throw new Use(e)}function ku(n){const e=[1/0,1/0,-1/0,-1/0];for(let t=0,i=n.length;t<i;++t)ym(e,n[t]);return e}function JS(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function Gse(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function g5(n,e,t){let i,r;return i=e<n[0]?n[0]-e:n[2]<e?e-n[2]:0,r=t<n[1]?n[1]-t:n[3]<t?t-n[3]:0,i*i+r*r}function m5(n,e){return GH(n,e[0],e[1])}function td(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function GH(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function QH(n,e){const o=e[0],a=e[1];let c=0;return o<n[0]?c|=16:o>n[2]&&(c|=4),a<n[1]?c|=8:a>n[3]&&(c|=2),0===c&&(c=1),c}function Th(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function A5(n){return Th(1/0,1/0,-1/0,-1/0,n)}function eE(n,e){const t=n[0],i=n[1];return Th(t,i,t,i,e)}function Qse(n,e,t,i,r){return $se(A5(r),n,e,t,i)}function _m(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function Wse(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function ym(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function $se(n,e,t,i,r){for(;t<i;t+=r)m$e(n,e[t],e[t+1]);return n}function m$e(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function WH(n,e){let t;return t=e(tE(n)),!!(t||(t=e(nE(n)),t)||(t=e(iE(n)),t)||(t=e(v5(n)),t))&&t}function wm(n){let e=0;return G_(n)||(e=Oo(n)*F2(n)),e}function tE(n){return[n[0],n[1]]}function nE(n){return[n[2],n[1]]}function F0(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function A$e(n,e){let t;return"bottom-left"===e?t=tE(n):"bottom-right"===e?t=nE(n):"top-left"===e?t=v5(n):"top-right"===e?t=iE(n):Kr(!1,13),t}function jH(n,e,t,i,r){const[s,o,a,c,l,u,f,p]=$H(n,e,t,i);return Th(Math.min(s,a,l,f),Math.min(o,c,u,p),Math.max(s,a,l,f),Math.max(o,c,u,p),r)}function $H(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),c=r*o,l=r*a,u=s*o,f=s*a,p=n[0],g=n[1];return[p-c+f,g-l-u,p-c-f,g-l+u,p+c-f,g+l+u,p+c+f,g+l-u,p-c+f,g-l-u]}function F2(n){return n[3]-n[1]}function h3(n,e,t){const i=t||[1/0,1/0,-1/0,-1/0];return nl(n,e)?(i[0]=n[0]>e[0]?n[0]:e[0],i[1]=n[1]>e[1]?n[1]:e[1],i[2]=n[2]<e[2]?n[2]:e[2],i[3]=n[3]<e[3]?n[3]:e[3]):A5(i),i}function v5(n){return[n[0],n[3]]}function iE(n){return[n[2],n[3]]}function Oo(n){return n[2]-n[0]}function nl(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function G_(n){return n[2]<n[0]||n[3]<n[1]}function Kse(n,e){const t=e.getExtent(),i=F0(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=Oo(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function d1(n,e,t){return Math.min(Math.max(n,e),t)}function b$e(n,e,t,i,r,s){const o=r-t,a=s-i;if(0!==o||0!==a){const c=((n-t)*o+(e-i)*a)/(o*o+a*a);c>1?(t=r,i=s):c>0&&(t+=o*c,i+=a*c)}return nd(n,e,t,i)}function nd(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function _5(n){return n*Math.PI/180}function O6(n,e){const t=n%e;return t*e<0?t+e:t}function Fu(n,e,t){return n+t*(e-n)}function Q_(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function rE(n,e){return Math.floor(Q_(n,e))}function sE(n,e){return Math.ceil(Q_(n,e))}function qse(n,e){const r=e[0],s=e[1],o=r[0],a=r[1],c=s[0],l=s[1],u=c-o,f=l-a,p=0===u&&0===f?0:(u*(n[0]-o)+f*(n[1]-a))/(u*u+f*f||0);let g,v;return p<=0?(g=o,v=a):p>=1?(g=c,v=l):(g=o+p*u,v=a+p*f),[g,v]}function Lh(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function KH(n,e){const t=Math.cos(e),i=Math.sin(e),s=n[1]*t+n[0]*i;return n[0]=n[0]*t-n[1]*i,n[1]=s,n}function bm(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function oE(n,e){return Math.sqrt(bm(n,e))}function Yse(n,e){if(e.canWrapX()){const t=Oo(e.getExtent()),i=function L$e(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||Oo(i),r=Math.floor((n[0]-i[0])/t)),r}(n,e,t);i&&(n[0]-=i*t)}return n}const aE=6371008.8;function qH(n,e,t){t=t||aE;const i=_5(n[1]),r=_5(e[1]),s=(r-i)/2,o=_5(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function XH(n,e){let t=0;for(let i=0,r=n.length;i<r-1;++i)t+=qH(n[i],n[i+1],e);return t}function Zse(n,e){const t=(e=e||{}).radius||aE,i=e.projection||"EPSG:3857",r=n.getType();"GeometryCollection"!==r&&(n=n.clone().transform(i,"EPSG:4326"));let o,a,c,l,u,f,s=0;switch(r){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":o=n.getCoordinates(),s=XH(o,t);break;case"MultiLineString":case"Polygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)s+=XH(o[c],t);break;case"MultiPolygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)for(a=o[c],u=0,f=a.length;u<f;++u)s+=XH(a[u],t);break;case"GeometryCollection":{const p=n.getGeometries();for(c=0,l=p.length;c<l;++c)s+=Zse(p[c],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}function cE(n,e){let t=0;const i=n.length;let r=n[i-1][0],s=n[i-1][1];for(let o=0;o<i;o++){const a=n[o][0],c=n[o][1];t+=_5(a-r)*(2+Math.sin(_5(s))+Math.sin(_5(c))),r=a,s=c}return t*e*e/2}function Jse(n,e){const t=(e=e||{}).radius||aE,i=e.projection||"EPSG:3857",r=n.getType();"GeometryCollection"!==r&&(n=n.clone().transform(i,"EPSG:4326"));let o,a,c,l,u,f,s=0;switch(r){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(o=n.getCoordinates(),s=Math.abs(cE(o[0],t)),c=1,l=o.length;c<l;++c)s-=Math.abs(cE(o[c],t));break;case"MultiPolygon":for(o=n.getCoordinates(),c=0,l=o.length;c<l;++c)for(a=o[c],s+=Math.abs(cE(a[0],t)),u=1,f=a.length;u<f;++u)s-=Math.abs(cE(a[u],t));break;case"GeometryCollection":{const p=n.getGeometries();for(c=0,l=p.length;c<l;++c)s+=Jse(p[c],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}const W__warn=2,W__error=3;let lE=1;function eoe(...n){lE>W__warn||console.warn(...n)}function toe(...n){lE>W__error||console.error(...n)}let YH=!0;function noe(n){YH=!(void 0===n||n)}function ZH(n,e){if(void 0!==e)for(let t=0,i=n.length;t<i;++t)e[t]=n[t];else e=n.slice();return e}function ioe(n,e){if(void 0!==e&&n!==e){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];n=e}return n}function D$e(n){(function u$e(n,e){YS[n]=e})(n.getCode(),n),ZS(n,n,ZH)}function Ea(n){return"string"==typeof n?function l$e(n){return YS[n]||YS[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(n):n||null}function roe(n,e,t,i){let r;const s=(n=Ea(n)).getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/d5[i])}}else{const o=n.getUnits();if("degrees"==o&&!i||"degrees"==i)r=e;else{const a=Cm(n,Ea("EPSG:4326"));if(a===ioe&&"degrees"!==o)r=e*n.getMetersPerUnit();else{let l=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];l=a(l,l,2),r=(qH(l.slice(0,2),l.slice(2,4))+qH(l.slice(4,6),l.slice(6,8)))/2}const c=i?d5[i]:n.getMetersPerUnit();void 0!==c&&(r/=c)}}return r}function soe(n){(function I$e(n){n.forEach(D$e)})(n),n.forEach(function(e){n.forEach(function(t){e!==t&&ZS(e,t,ZH)})})}function JH(n,e){return n?"string"==typeof n?Ea(n):n:Ea(e)}function xm(n,e){return noe(),$_(n,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function aoe(n,e){const t=$_(n,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=O6(i+180,360)-180),t}function Pu(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||Cm(n,e)===ZH)&&t}function Cm(n,e){let r=function h$e(n,e){let t;return n in Eh&&e in Eh[n]&&(t=Eh[n][e]),t}(n.getCode(),e.getCode());return r||(r=ioe),r}function j_(n,e){return Cm(Ea(n),Ea(e))}function $_(n,e,t){return j_(e,t)(n,void 0,n.length)}let f3=null;function id(){return f3}function Mm(n,e){return n}function xc(n,e){return YH&&!Lh(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(YH=!1,eoe("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function K_(n,e){return n}function M4(n,e){return n}function k$e(n,e){return n}!function F$e(){soe(Ose),soe(Vse),function R$e(n,e,t,i){n.forEach(function(r){e.forEach(function(s){ZS(r,s,t),ZS(s,r,i)})})}(Vse,Ose,s$e,o$e)}();const q3=class P$e{constructor(e){this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},uE=class H$e{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function N6(n,e){return n>e?1:n<e?-1:0}function hE(n,e,t){const i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;let r;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return"function"==typeof t?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}function O$e(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Dh(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function rd(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function P0(){return!0}function Em(){return!1}function Tm(){}function y5(n){for(const e in n)delete n[e]}function Lm(n){let e;for(e in n)return!1;return!e}const Dm=class G$e extends uE{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t="string"==typeof e,i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new q3(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let c;i in o||(o[i]=0,a[i]=0),++o[i];for(let l=0,u=r.length;l<u;++l)if(c="handleEvent"in r[l]?r[l].handleEvent(s):r[l].call(this,s),!1===c||s.propagationStopped){c=!1;break}if(0==--o[i]){let l=a[i];for(delete a[i];l--;)this.removeEventListener(i,Tm);delete o[i]}return c}disposeInternal(){this.listeners_&&y5(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const r=i.indexOf(t);-1!==r&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=Tm,++this.pendingRemovals_[e]):(i.splice(r,1),0===i.length&&delete this.listeners_[e]))}}};function Ks(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function fE(n,e,t,i){return Ks(n,e,t,i,!0)}function na(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),y5(n))}const loe=class dE extends Dm{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ks(this,e[s],t);return r}return Ks(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=fE(this,e[s],t)}else i=fE(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)!function Q$e(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)na(n[e]);else na(n)}(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}};function lr(){throw new Error("Unimplemented abstract method.")}let W$e=0;function nr(n){return n.ol_uid||(n.ol_uid=String(++W$e))}class uoe extends q3{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}const Ih=class j$e extends loe{constructor(e){super(),nr(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new uoe(i,e,t)),i="propertychange",this.hasListener(i)&&this.dispatchEvent(new uoe(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Lm(this.values_)&&(this.values_=null),t||this.notify(e,i)}}},V6=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",$$e=V6.includes("firefox"),K$e=V6.includes("safari")&&!V6.includes("chrom")&&(V6.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(V6)),q$e=V6.includes("webkit")&&!V6.includes("edge"),X$e=V6.includes("macintosh"),hoe=typeof devicePixelRatio<"u"?devicePixelRatio:1,ez=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Y$e=typeof Image<"u"&&Image.prototype.decode,foe=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}(),tz=new Array(6);function pE(n){return q_(n,1,0,0,1,0,0)}function gE(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],c=e[0],l=e[1],u=e[2],f=e[3],p=e[4],g=e[5];return n[0]=t*c+r*l,n[1]=i*c+s*l,n[2]=t*u+r*f,n[3]=i*u+s*f,n[4]=t*p+r*g+o,n[5]=i*p+s*g+a,n}function q_(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n}function jc(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function doe(n,e){const t=Math.cos(e),i=Math.sin(e);return gE(n,q_(tz,t,i,-i,t,0,0))}function nz(n,e,t){return gE(n,q_(tz,e,0,0,t,0,0))}function eKe(n,e,t){return gE(n,q_(tz,1,0,0,1,e,t))}function Hu(n,e,t,i,r,s,o,a){const c=Math.sin(s),l=Math.cos(s);return n[0]=i*l,n[1]=r*c,n[2]=-i*c,n[3]=r*l,n[4]=o*i*l-a*i*c+e,n[5]=o*r*c+a*r*l+t,n}function X_(n,e){const t=function tKe(n){return n[0]*n[3]-n[1]*n[2]}(e);Kr(0!==t,32);const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*c-o*a)/t,n[5]=-(i*c-r*a)/t,n}let poe;function mE(n){const e="matrix("+n.join(", ")+")";if(ez)return e;const t=poe||(poe=document.createElement("div"));return t.style.transform=e,t.style.transform}function w5(n,e,t,i,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=i){const c=n[a],l=n[a+1];s[o++]=r[0]*c+r[2]*l+r[4],s[o++]=r[1]*c+r[3]*l+r[5]}return s&&s.length!=o&&(s.length=o),s}function iz(n,e,t,i,r,s,o){o=o||[];const a=Math.cos(r),c=Math.sin(r),l=s[0],u=s[1];let f=0;for(let p=e;p<t;p+=i){const g=n[p]-l,v=n[p+1]-u;o[f++]=l+g*a-v*c,o[f++]=u+g*c+v*a;for(let _=p+2;_<p+i;++_)o[f++]=n[_]}return o&&o.length!=f&&(o.length=f),o}function goe(n,e,t,i,r,s,o){o=o||[];let a=0;for(let c=e;c<t;c+=i){o[a++]=n[c]+r,o[a++]=n[c+1]+s;for(let l=c+2;l<c+i;++l)o[a++]=n[l]}return o&&o.length!=a&&(o.length=a),o}const moe=[1,0,0,1,0,0],Aoe=class iKe extends Ih{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function V$e(n){let t,i,r,e=!1;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!rd(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}(function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return lr()}closestPointXY(e,t,i,r){return lr()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return this.closestPointXY(e[0],e[1],t=t||[NaN,NaN],1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return lr()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&A5(t),this.extentRevision_=this.getRevision()}return function v$e(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}(this.extent_,e)}rotate(e,t){lr()}scale(e,t,i){lr()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return lr()}getType(){return lr()}applyTransform(e){lr()}intersectsExtent(e){return lr()}translate(e,t){lr()}transform(e,t){const i=Ea(e),r="tile-pixels"==i.getUnits()?function(s,o,a){const c=i.getExtent(),l=i.getWorldExtent(),u=F2(l)/F2(c);return Hu(moe,l[0],l[3],u,-u,0,0,0),w5(s,0,s.length,a,moe,o),j_(i,t)(s,o,a)}:j_(i,t);return this.applyTransform(r),this}};function AE(n){let e;return"XY"==n?e=2:"XYZ"==n||"XYM"==n?e=3:"XYZM"==n&&(e=4),e}const U6=class rKe extends Aoe{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return Qse(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return lr()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=AE(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){lr()}setLayout(e,t,i){let r;if(e)r=AE(e);else{for(let s=0;s<i;++s){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}r=t.length,e=function sKe(n){let e;return 2==n?e="XY":3==n?e="XYZ":4==n&&(e="XYZM"),e}(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();iz(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){void 0===t&&(t=e),i||(i=F0(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();(function nKe(n,e,t,i,r,s,o,a){a=a||[];const c=o[0],l=o[1];let u=0;for(let f=e;f<t;f+=i){const g=n[f+1]-l;a[u++]=c+r*(n[f]-c),a[u++]=l+s*g;for(let v=f+2;v<f+i;++v)a[u++]=n[v]}a&&a.length!=u&&(a.length=u)})(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();goe(i,0,i.length,r,e,t,i),this.changed()}}};function voe(n,e,t,i,r,s,o){const a=n[e],c=n[e+1],l=n[t]-a,u=n[t+1]-c;let f;if(0===l&&0===u)f=e;else{const p=((r-a)*l+(s-c)*u)/(l*l+u*u);if(p>1)f=t;else{if(p>0){for(let g=0;g<i;++g)o[g]=Fu(n[e+g],n[t+g],p);return void(o.length=i)}f=e}}for(let p=0;p<i;++p)o[p]=n[f+p];o.length=i}function rz(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],c=n[e+1],l=nd(s,o,a,c);l>r&&(r=l),s=a,o=c}return r}function sz(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=rz(n,e,a,i,r),e=a}return r}function oz(n,e,t,i,r,s,o,a,c,l,u){if(e==t)return l;let f,p;if(0===r){if(p=nd(o,a,n[e],n[e+1]),p<l){for(f=0;f<i;++f)c[f]=n[e+f];return c.length=i,p}return l}u=u||[NaN,NaN];let g=e+i;for(;g<t;)if(voe(n,g-i,g,i,o,a,u),p=nd(o,a,u[0],u[1]),p<l){for(l=p,f=0;f<i;++f)c[f]=u[f];c.length=i,g+=i}else g+=i*Math.max((Math.sqrt(p)-Math.sqrt(l))/r|0,1);if(s&&(voe(n,t-i,e,i,o,a,u),p=nd(o,a,u[0],u[1]),p<l)){for(l=p,f=0;f<i;++f)c[f]=u[f];c.length=i}return l}function az(n,e,t,i,r,s,o,a,c,l,u){u=u||[NaN,NaN];for(let f=0,p=t.length;f<p;++f){const g=t[f];l=oz(n,e,g,i,r,s,o,a,c,l,u),e=g}return l}function _oe(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function vE(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function cz(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=vE(n,e,t[o],i);r[s++]=c,e=c}return r.length=s,r}function _E(n,e,t,i,r,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const c=new Array(a);c[0]=1,c[a-1]=1;const l=[e,t-i];let u=0;for(;l.length>0;){const f=l.pop(),p=l.pop();let g=0;const v=n[p],_=n[p+1],w=n[f],b=n[f+1];for(let x=p+i;x<f;x+=i){const I=b$e(n[x],n[x+1],v,_,w,b);I>g&&(u=x,g=I)}g>r&&(c[(u-e)/i]=1,p+i<u&&l.push(p,u),u+i<f&&l.push(u,f))}for(let f=0;f<a;++f)c[f]&&(s[o++]=n[e+f*i],s[o++]=n[e+f*i+1]);return o}function b5(n,e){return e*Math.round(n/e)}function hKe(n,e,t,i,r,s,o){if(e==t)return o;let l,u,a=b5(n[e],r),c=b5(n[e+1],r);e+=i,s[o++]=a,s[o++]=c;do{if(l=b5(n[e],r),u=b5(n[e+1],r),(e+=i)==t)return s[o++]=l,s[o++]=u,o}while(l==a&&u==c);for(;e<t;){const f=b5(n[e],r),p=b5(n[e+1],r);if(e+=i,f==l&&p==u)continue;const g=l-a,v=u-c,_=f-a,w=p-c;g*w==v*_&&(g<0&&_<g||g==_||g>0&&_>g)&&(v<0&&w<v||v==w||v>0&&w>v)?(l=f,u=p):(s[o++]=l,s[o++]=u,a=l,c=u,l=f,u=p)}return s[o++]=l,s[o++]=u,o}function woe(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c];o=hKe(n,e,u,i,r,s,o),a.push(o),e=u}return o}function boe(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function G6(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function Y_(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o];r[s++]=G6(n,e,c,i,r[s]),e=c}return r.length=s,r}function lz(n,e,t,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o];r[s++]=1===c.length&&c[0]===e?[]:Y_(n,e,c,i,r[s]),e=c[c.length-1]}return r.length=s,r}function xoe(n,e,t,i,r,s,o){let a,c;const l=(t-e)/i;if(1===l)a=e;else if(2===l)a=e,c=r;else if(0!==l){let u=n[e],f=n[e+1],p=0;const g=[0];for(let w=e+i;w<t;w+=i){const b=n[w],x=n[w+1];p+=Math.sqrt((b-u)*(b-u)+(x-f)*(x-f)),g.push(p),u=b,f=x}const v=r*p,_=function z$e(n,e,t){let i,r;t=t||N6;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+t(n[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}(g,v);_<0?(c=(v-g[-_-2])/(g[-_-1]-g[-_-2]),a=e+(-_-2)*i):a=e+_*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=void 0===a?NaN:void 0===c?n[a+u]:Fu(n[a+u],n[a+i+u],c);return s}function uz(n,e,t,i,r,s){if(t==e)return null;let o;if(r<n[e+i-1])return s?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return s?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,c=t/i;for(;a<c;){const p=a+c>>1;r<n[(p+1)*i-1]?c=p:a=p+1}const l=n[a*i-1];if(r==l)return n.slice((a-1)*i,(a-1)*i+i);const f=(r-l)/(n[(a+1)*i-1]-l);o=[];for(let p=0;p<i-1;++p)o.push(Fu(n[(a-1)*i+p],n[a*i+p],f));return o.push(r),o}function pKe(n,e,t,i,r){return!WH(r,function(o){return!x5(n,e,t,i,o[0],o[1])})}function x5(n,e,t,i,r,s){let o=0,a=n[t-i],c=n[t-i+1];for(;e<t;e+=i){const l=n[e],u=n[e+1];c<=s?u>s&&(l-a)*(s-c)-(r-a)*(u-c)>0&&o++:u<=s&&(l-a)*(s-c)-(r-a)*(u-c)<0&&o--,a=l,c=u}return 0!==o}function hz(n,e,t,i,r,s){if(0===t.length||!x5(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(x5(n,t[o-1],t[o],i,r,s))return!1;return!0}function yE(n,e,t,i,r){const s=$se([1/0,1/0,-1/0,-1/0],n,e,t,i);return!!nl(r,s)&&(!!(td(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3])||boe(n,e,t,i,function(o,a){return function _$e(n,e,t){let i=!1;const r=QH(n,e),s=QH(n,t);if(1===r||1===s)i=!0;else{const o=n[0],a=n[1],c=n[2],l=n[3],p=t[0],g=t[1],v=(g-e[1])/(p-e[0]);let _,w;!!(2&s)&&!(2&r)&&(_=p-(g-l)/v,i=_>=o&&_<=c),!i&&!!(4&s)&&!(4&r)&&(w=g-(p-c)*v,i=w>=a&&w<=l),!i&&!!(8&s)&&!(8&r)&&(_=p-(g-a)/v,i=_>=o&&_<=c),!i&&16&s&&!(16&r)&&(w=g-(p-o)*v,i=w>=a&&w<=l)}return i}(r,o,a)}))}function Coe(n,e,t,i,r){return!!(yE(n,e,t,i,r)||x5(n,e,t,i,r[0],r[1])||x5(n,e,t,i,r[0],r[3])||x5(n,e,t,i,r[2],r[1])||x5(n,e,t,i,r[2],r[3]))}function Moe(n,e,t,i,r){if(!Coe(n,e,t[0],i,r))return!1;if(1===t.length)return!0;for(let s=1,o=t.length;s<o;++s)if(pKe(n,t[s-1],t[s],i,r)&&!yE(n,t[s-1],t[s],i,r))return!1;return!0}function fz(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const c=n[a],l=n[a+1];o+=Math.sqrt((c-r)*(c-r)+(l-s)*(l-s)),r=c,s=l}return o}class wE extends U6{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}appendCoordinate(e){this.flatCoordinates?Dh(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new wE(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<g5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(rz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),oz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return boe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:uz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t=void 0!==t&&t)}getCoordinates(){return G6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return xoe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return fz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=_E(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new wE(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return yE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=vE(this.flatCoordinates,0,e,this.stride),this.changed()}}const zu=wE;class bE extends U6{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(void 0!==t&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{let r=this.getLayout();const s=e,o=[],a=[];for(let c=0,l=s.length;c<l;++c){const u=s[c];0===c&&(r=u.getLayout()),Dh(o,u.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(e){this.flatCoordinates?Dh(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new bE(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<g5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sz(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),az(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function dKe(n,e,t,i,r,s,o){if(o)return uz(n,e,t[t.length-1],i,r,s);let a;if(r<n[i-1])return s?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return s?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let c=0,l=t.length;c<l;++c){const u=t[c];if(e!=u){if(r<n[e+i-1])return null;if(r<=n[u-1])return uz(n,e,u,i,r,!1);e=u}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,t=void 0!==t&&t,i=void 0!==i&&i)}getCoordinates(){return Y_(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new zu(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o],l=new zu(e.slice(s,c),i);r.push(l),s=c}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const c=r[o];Dh(e,xoe(t,i,c,s,.5)),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function yoe(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c];o=_E(n,e,u,i,r,s,o),a.push(o),e=u}return o}(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new bE(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return function mKe(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){if(yE(n,e,t[s],i,r))return!0;e=t[s]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=cz(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const xE=bE;class dz extends Ih{constructor(e){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}clone(){const e=new dz(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(na(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ks(e,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function vKe(n){if("function"==typeof n)return n;let e;return Array.isArray(n)?e=n:(Kr("function"==typeof n.getZIndex,41),e=[n]),function(){return e}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const il=dz;class CE extends Aoe{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(na),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(Ks(this.geometries_[e],"change",this.changed,this))}clone(){const e=new CE(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<g5(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){A5(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)Wse(e,t[i].getExtent());return e}getGeometries(){return Soe(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],c=a.getSimplifiedGeometry(e);t.push(c),c!==a&&(r=!0)}if(r){const s=new CE(null);return s.setGeometriesArray(t),s}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=F0(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(Soe(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Soe(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}const pz=CE;function Eoe(n,e,t){const i=t?Ea(t.featureProjection):null,r=t?Ea(t.dataProjection):null;let s;if(s=i&&r&&!Pu(i,r)?(e?n.clone():n).transform(e?i:r,e?r:i):n,e&&t&&void 0!==t.decimals){const o=Math.pow(10,t.decimals),a=function(c){for(let l=0,u=c.length;l<u;++l)c[l]=Math.round(c[l]*o)/o;return c};s===n&&(s=n.clone()),s.applyTransform(a)}return s}function ME(n){return"string"==typeof n?JSON.parse(n)||null:null!==n?n:null}class gz extends U6{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new gz(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=nd(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let c=0;c<a;++c)i[c]=s[c];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return eE(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return GH(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=_oe(this.flatCoordinates,0,e),this.changed()}}const p3=gz;class mz extends U6{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?Dh(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){const e=new mz(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<g5(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,c=s.length;a<c;a+=o){const l=nd(e,t,s[a],s[a+1]);if(l<r){r=l;for(let u=0;u<o;++u)i[u]=s[a+u];i.length=o}}return r}getCoordinates(){return G6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){return e<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=e?null:new p3(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new p3(e.slice(s,s+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i)if(GH(e,t[r],t[r+1]))return!0;return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=vE(this.flatCoordinates,0,e,this.stride),this.changed()}}const Az=mz;function Toe(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=o*a-s*c,s=a,o=c}return r/2}function Loe(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=Toe(n,e,a,i),e=a}return r}class SE extends U6{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new SE(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<g5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(rz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),oz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return Toe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return G6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=_E(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new SE(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=vE(this.flatCoordinates,0,e,this.stride),this.changed()}}const Doe=SE;function Ioe(n,e,t,i,r,s,o){let a,c,l,u,f,p,g;const v=r[s+1],_=[];for(let x=0,M=t.length;x<M;++x){const E=t[x];for(u=n[E-i],p=n[E-i+1],a=e;a<E;a+=i)f=n[a],g=n[a+1],(v<=p&&g<=v||p<=v&&v<=g)&&(l=(v-p)/(g-p)*(f-u)+u,_.push(l)),u=f,p=g}let w=NaN,b=-1/0;for(_.sort(N6),u=_[0],a=1,c=_.length;a<c;++a){f=_[a];const x=Math.abs(f-u);x>b&&(l=(u+f)/2,hz(n,e,t,i,l,v)&&(w=l,b=x)),u=f}return isNaN(w)&&(w=r[s]),o?(o.push(w,v,b),o):[w,v,b]}function MKe(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function vz(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],c=n[e+1];r+=(a-s)*(c+o),s=a,o=c}return 0===r?void 0:r>0}function Roe(n,e,t,i,r){r=void 0!==r&&r;for(let s=0,o=t.length;s<o;++s){const a=t[s],c=vz(n,e,a,i);if(0===s){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function _z(n,e,t,i,r){r=void 0!==r&&r;for(let s=0,o=t.length;s<o;++s){const a=t[s],c=vz(n,e,a,i);(0===s?r&&c||!r&&!c:r&&!c||!r&&c)&&MKe(n,e,a,i),e=a}return e}function Boe(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s)e=_z(n,e,t[s],i,r);return e}class C5 extends U6{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Dh(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new C5(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<g5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sz(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),az(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return hz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Loe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),_z(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Y_(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=F0(this.getExtent());this.flatInteriorPoint_=Ioe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new p3(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Doe(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const c=i[o],l=new Doe(t.slice(s,c),e);r.push(l),s=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Roe(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=_z(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=woe(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new C5(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return Moe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=cz(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const Q6=C5;function koe(n){const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new C5(s,"XY",[s.length])}function Foe(n,e,t){e=e||32;const i=n.getStride(),r=n.getLayout(),s=n.getCenter(),o=i*(e+1),a=new Array(o);for(let u=0;u<o;u+=i){a[u]=0,a[u+1]=0;for(let f=2;f<i;f++)a[u+f]=s[f]}const l=new C5(a,r,[a.length]);return function EKe(n,e,t,i){const r=n.getFlatCoordinates(),s=n.getStride(),o=r.length/s-1,a=i||0;for(let c=0;c<=o;++c){const l=c*s,u=a+2*O6(c,o)*Math.PI/o;r[l]=e[0]+t*Math.cos(u),r[l+1]=e[1]+t*Math.sin(u)}n.changed()}(l,s,n.getRadius(),t),l}class EE extends U6{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){let r=this.getLayout();const s=e,o=[],a=[];for(let c=0,l=s.length;c<l;++c){const u=s[c];0===c&&(r=u.getLayout());const f=o.length,p=u.getEnds();for(let g=0,v=p.length;g<v;++g)p[g]+=f;Dh(o,u.getFlatCoordinates()),a.push(p)}t=r,e=o,i=a}void 0!==t&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(this.flatCoordinates){const i=this.flatCoordinates.length;Dh(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new EE(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<g5(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function aKe(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=sz(n,e,a,i,r),e=a[a.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function cKe(n,e,t,i,r,s,o,a,c,l,u){u=u||[NaN,NaN];for(let f=0,p=t.length;f<p;++f){const g=t[f];l=az(n,e,g,i,r,s,o,a,c,l,u),e=g[g.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return function gKe(n,e,t,i,r,s){if(0===t.length)return!1;for(let o=0,a=t.length;o<a;++o){const c=t[o];if(hz(n,e,c,i,r,s))return!0;e=c[c.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return function xKe(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=Loe(n,e,a,i),e=a[a.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),Boe(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,lz(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=function TKe(n,e,t,i){const r=[];let s=[1/0,1/0,-1/0,-1/0];for(let o=0,a=t.length;o<a;++o){const c=t[o];s=Qse(n,e,c[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=c[c.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function CKe(n,e,t,i,r){let s=[];for(let o=0,a=t.length;o<a;++o){const c=t[o];s=Ioe(n,e,c,i,r,2*o,s),e=c[c.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Az(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;!function SKe(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!Roe(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}(e,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Boe(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function fKe(n,e,t,i,r,s,o,a){for(let c=0,l=t.length;c<l;++c){const u=t[c],f=[];o=woe(n,e,u,i,r,s,o,f),a.push(f),e=u[u.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new EE(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(0===e)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(0!==t)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new Q6(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const c=i[o].slice(),l=c[c.length-1];if(0!==s)for(let f=0,p=c.length;f<p;++f)c[f]-=s;const u=new Q6(t.slice(s,l),e,c);r.push(u),s=l}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return function AKe(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(Moe(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=function lKe(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=cz(n,e,t[o],i,r[s]);0===c.length&&(c[0]=e),r[s++]=c,e=c[c.length-1]}return r.length=s,r}(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()}}const yz=EE;function wz(n,e){if(!n)return null;let t;switch(n.type){case"Point":t=function IKe(n){return new p3(n.coordinates)}(n);break;case"LineString":t=function RKe(n){return new zu(n.coordinates)}(n);break;case"Polygon":t=function PKe(n){return new Q6(n.coordinates)}(n);break;case"MultiPoint":t=function kKe(n){return new Az(n.coordinates)}(n);break;case"MultiLineString":t=function BKe(n){return new xE(n.coordinates)}(n);break;case"MultiPolygon":t=function FKe(n){return new yz(n.coordinates)}(n);break;case"GeometryCollection":t=function DKe(n,e){const t=n.geometries.map(function(i){return wz(i,e)});return new pz(t)}(n);break;default:throw new Error("Unsupported GeoJSON type: "+n.type)}return Eoe(t,!1,e)}function bz(n,e){const t=(n=Eoe(n,!0,e)).getType();let i;switch(t){case"Point":i=function UKe(n,e){return{type:"Point",coordinates:n.getCoordinates()}}(n);break;case"LineString":i=function zKe(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}(n);break;case"Polygon":i=function GKe(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}(n,e);break;case"MultiPoint":i=function NKe(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}(n);break;case"MultiLineString":i=function OKe(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}(n);break;case"MultiPolygon":i=function VKe(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}(n,e);break;case"GeometryCollection":i=function HKe(n,e){delete(e=Object.assign({},e)).featureProjection;const t=n.getGeometriesArray().map(function(i){return bz(i,e)});return{type:"GeometryCollection",geometries:t}}(n,e);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+t)}return i}const X3=class LKe extends class wKe extends class _Ke{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Ea(t.dataProjection):this.readProjection(e);t.extent&&i&&"tile-pixels"===i.getUnits()&&(i=Ea(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return lr()}readFeature(e,t){return lr()}readFeatures(e,t){return lr()}readGeometry(e,t){return lr()}readProjection(e){return lr()}writeFeature(e,t){return lr()}writeFeatures(e,t){return lr()}writeGeometry(e,t){return lr()}}{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(ME(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(ME(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return lr()}readFeaturesFromObject(e,t){return lr()}readGeometry(e,t){return this.readGeometryFromObject(ME(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return lr()}readProjection(e){return this.readProjectionFromObject(ME(e))}readProjectionFromObject(e){return lr()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return lr()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return lr()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return lr()}}{constructor(e){e=e||{},super(),this.dataProjection=Ea(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ea(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;i="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null};const r=wz(i.geometry,t),s=new il;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){let r=null;if("FeatureCollection"===e.type){r=[];const o=e.features;for(let a=0,c=o.length;a<c;++a)r.push(this.readFeatureFromObject(o[a],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return wz(e,t)}readProjectionFromObject(e){const t=e.crs;let i;return t?"name"==t.type?i=Ea(t.properties.name):"EPSG"===t.type?i=Ea("EPSG:"+t.properties.code):Kr(!1,36):i=this.dataProjection,i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(void 0!==r&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=bz(o,t),delete s[e.getGeometryName()]),Lm(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return bz(e,this.adaptOptions(t))}};var g3=6371008.8,Poe={centimeters:100*g3,centimetres:100*g3,degrees:g3/111325,feet:3.28084*g3,inches:39.37*g3,kilometers:g3/1e3,kilometres:g3/1e3,meters:g3,metres:g3,miles:g3/1609.344,millimeters:1e3*g3,millimetres:1e3*g3,nauticalmiles:g3/1852,radians:1,yards:1.0936*g3};function Y3(n,e,t){void 0===t&&(t={});var i={type:"Feature"};return(0===t.id||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function Ou(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Mz(n[0])||!Mz(n[1]))throw new Error("coordinates must contain numbers");return Y3({type:"Point",coordinates:n},e,t)}function W6(n,e,t){void 0===t&&(t={});for(var i=0,r=n;i<r.length;i++){var s=r[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}return Y3({type:"Polygon",coordinates:n},e,t)}function H0(n,e,t){if(void 0===t&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return Y3({type:"LineString",coordinates:n},e,t)}function S4(n,e){void 0===e&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function xz(n,e,t){return void 0===t&&(t={}),Y3({type:"MultiPolygon",coordinates:n},e,t)}function QKe(n,e,t){return void 0===t&&(t={}),Y3({type:"GeometryCollection",geometries:n},e,t)}function TE(n){return n%(2*Math.PI)*180/Math.PI}function Rh(n){return n%360*Math.PI/180}function Mz(n){return!isNaN(n)&&null!==n&&!Array.isArray(n)}function Sz(n){return!!n&&n.constructor===Object}function j6(n,e,t){if(null!==n)for(var i,r,s,o,a,c,l,p,u=0,f=0,g=n.type,v="FeatureCollection"===g,_="Feature"===g,w=v?n.features.length:1,b=0;b<w;b++){a=(p=!!(l=v?n.features[b].geometry:_?n.geometry:n)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var x=0;x<a;x++){var M=0,E=0;if(null!==(o=p?l.geometries[x]:l)){c=o.coordinates;var I=o.type;switch(u=!t||"Polygon"!==I&&"MultiPolygon"!==I?0:1,I){case null:break;case"Point":if(!1===e(c,f,b,M,E))return!1;f++,M++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===e(c[i],f,b,M,E))return!1;f++,"MultiPoint"===I&&M++}"LineString"===I&&M++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(r=0;r<c[i].length-u;r++){if(!1===e(c[i][r],f,b,M,E))return!1;f++}"MultiLineString"===I&&M++,"Polygon"===I&&E++}"Polygon"===I&&M++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(E=0,r=0;r<c[i].length;r++){for(s=0;s<c[i][r].length-u;s++){if(!1===e(c[i][r][s],f,b,M,E))return!1;f++}E++}M++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===j6(o.geometries[i],e,t))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Z_(n,e){if("Feature"===n.type)e(n,0);else if("FeatureCollection"===n.type)for(var t=0;t<n.features.length&&!1!==e(n.features[t],t);t++);}function sd(n,e){!function Voe(n,e){var t,i,r,s,o,a,c,l,u,f,p=0,g="FeatureCollection"===n.type,v="Feature"===n.type,_=g?n.features.length:1;for(t=0;t<_;t++){for(l=g?n.features[t].properties:v?n.properties:{},u=g?n.features[t].bbox:v?n.bbox:void 0,f=g?n.features[t].id:v?n.id:void 0,o=(c=!!(a=g?n.features[t].geometry:v?n.geometry:n)&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<o;r++)if(null!==(s=c?a.geometries[r]:a))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(s,p,l,u,f))return!1;break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===e(s.geometries[i],p,l,u,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,u,f))return!1;p++}}(n,function(t,i,r,s,o){var c,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Y3(t,r,{bbox:s,id:o}),i,0)&&void 0}switch(a){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var l=0;l<t.coordinates.length;l++)if(!1===e(Y3({type:c,coordinates:t.coordinates[l]},r),i,l))return!1})}function Ez(n){var e=[1/0,1/0,-1/0,-1/0];return j6(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}Ez.default=Ez;const YKe=Ez;function M5(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if("Feature"===n.type&&null!==n.geometry&&"Point"===n.geometry.type)return n.geometry.coordinates;if("Point"===n.type)return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Im(n){if(Array.isArray(n))return n;if("Feature"===n.type){if(null!==n.geometry)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function LE(n,e){return"FeatureCollection"===n.type?"FeatureCollection":"GeometryCollection"===n.type?"GeometryCollection":"Feature"===n.type&&null!==n.geometry?n.geometry.type:n.type}ae(5943);var hqe=ae(1335);function Woe(n,e,t){if(void 0===t&&(t={}),!n)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=M5(n),r=function tqe(n){return"Feature"===n.type?n.geometry:n}(e),s=r.type,o=e.bbox,a=r.coordinates;if(o&&!1===function dqe(n,e){return e[0]<=n[0]&&e[1]<=n[1]&&e[2]>=n[0]&&e[3]>=n[1]}(i,o))return!1;"Polygon"===s&&(a=[a]);for(var c=!1,l=0;l<a.length&&!c;l++)if(joe(i,a[l][0],t.ignoreBoundary)){for(var u=!1,f=1;f<a[l].length&&!u;)joe(i,a[l][f],!t.ignoreBoundary)&&(u=!0),f++;u||(c=!0)}return c}function joe(n,e,t){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,s=e.length-1;r<e.length;s=r++){var o=e[r][0],a=e[r][1],c=e[s][0],l=e[s][1];if(n[1]*(o-c)+a*(c-n[0])+l*(n[0]-o)==0&&(o-n[0])*(c-n[0])<=0&&(a-n[1])*(l-n[1])<=0)return!t;a>n[1]!=l>n[1]&&n[0]<(c-o)*(n[1]-a)/(l-a)+o&&(i=!i)}return i}const $6=function pqe(n,e,t){void 0===t&&(t={});var i=M5(n),r=M5(e),s=Rh(r[1]-i[1]),o=Rh(r[0]-i[0]),a=Rh(i[1]),c=Rh(r[1]),l=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(c);return function Noe(n,e){void 0===e&&(e="kilometers");var t=Poe[e];if(!t)throw new Error(e+" units is invalid");return n*t}(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),t.units)};var $oe=function n(e,t,i){this.a=e,this.b=t,this.c=i;var f,p,r=t.x-e.x,s=t.y-e.y,o=i.x-e.x,a=i.y-e.y,c=r*(e.x+t.x)+s*(e.y+t.y),l=o*(e.x+i.x)+a*(e.y+i.y),u=2*(r*(i.y-t.y)-s*(i.x-t.x));this.x=(a*c-s*l)/u,this.y=(r*l-o*c)/u,this.r=(f=this.x-e.x)*f+(p=this.y-e.y)*p};function mqe(n,e){return e.x-n.x}function Aqe(n){var t,i,r,s,o,e=n.length;e:for(;e;)for(i=n[--e],t=n[--e],r=e;r;)if(o=n[--r],s=n[--r],t===s&&i===o||t===o&&i===s){n.splice(e,2),n.splice(r,2),e-=2;continue e}}function Koe(n){var e={type:"Feature"};return Object.keys(n).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:e[t]=n[t]}}),e.properties=qoe(n.properties),e.geometry=Lz(n.geometry),e}function qoe(n){var e={};return n&&Object.keys(n).forEach(function(t){var i=n[t];e[t]="object"==typeof i?null===i?null:Array.isArray(i)?i.map(function(r){return r}):qoe(i):i}),e}function Lz(n){var e={type:n.type};return n.bbox&&(e.bbox=n.bbox),"GeometryCollection"===n.type?(e.geometries=n.geometries.map(function(t){return Lz(t)}),e):(e.coordinates=Xoe(n.coordinates),e)}function Xoe(n){var e=n;return"object"!=typeof e[0]?e.slice():e.map(function(t){return Xoe(t)})}const Dz=function _qe(n){if(!n)throw new Error("geojson is required");switch(n.type){case"Feature":return Koe(n);case"FeatureCollection":return function yqe(n){var e={type:"FeatureCollection"};return Object.keys(n).forEach(function(t){switch(t){case"type":case"features":return;default:e[t]=n[t]}}),e.features=n.features.map(function(t){return Koe(t)}),e}(n);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Lz(n);default:throw new Error("unknown GeoJSON type")}};function IE(n){return n[0].toString()+","+n[1].toString()}const xqe=function wqe(n,e){if(void 0===e&&(e={}),!Sz(e=e||{}))throw new Error("options is invalid");var t=e.mutate;if("FeatureCollection"!==LE(n))throw new Error("geojson must be a FeatureCollection");if(!n.features.length)throw new Error("geojson is empty");(!1===t||void 0===t)&&(n=Dz(n));var i=[],r=function XKe(n,e,t){var i=t;return function qKe(n,e){if(!n)throw new Error("geojson is required");sd(n,function(t,i,r){if(null!==t.geometry){var o=t.geometry.coordinates;switch(t.geometry.type){case"LineString":if(!1===e(t,i,r,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(H0(o[a],t.properties),i,r,a))return!1}}})}(n,function(r,s,o,a){i=0===s&&void 0===t?r:e(i,r,s,o,a)}),i}(n,function(s,o){var a=function bqe(n,e){var c,t=n.geometry.coordinates,i=e.geometry.coordinates,r=IE(t[0]),s=IE(t[t.length-1]),o=IE(i[0]),a=IE(i[i.length-1]);if(r===a)c=i.concat(t.slice(1));else if(o===s)c=t.concat(i.slice(1));else if(r===o)c=t.slice(1).reverse().concat(i);else{if(s!==a)return null;c=t.concat(i.reverse().slice(1))}return H0(c)}(s,o);return a||(i.push(s),o)});return r&&i.push(r),i.length?1===i.length?i[0]:function zoe(n,e,t){return void 0===t&&(t={}),Y3({type:"MultiLineString",coordinates:n},e,t)}(i.map(function(s){return s.coordinates})):null};function Mqe(n){return n}function Iz(n,e){var t=function Sqe(n){if(null==n)return Mqe;var e,t,i=n.scale[0],r=n.scale[1],s=n.translate[0],o=n.translate[1];return function(a,c){c||(e=t=0);var l=2,u=a.length,f=new Array(u);for(f[0]=(e+=a[0])*i+s,f[1]=(t+=a[1])*r+o;l<u;)f[l]=a[l],++l;return f}}(n.transform),i=n.arcs;function r(u,f){f.length&&f.pop();for(var p=i[u<0?~u:u],g=0,v=p.length;g<v;++g)f.push(t(p[g],g));u<0&&function Cqe(n,e){for(var t,i=n.length,r=i-e;r<--i;)t=n[r],n[r++]=n[i],n[i]=t}(f,v)}function s(u){return t(u)}function o(u){for(var f=[],p=0,g=u.length;p<g;++p)r(u[p],f);return f.length<2&&f.push(f[0]),f}function a(u){for(var f=o(u);f.length<4;)f.push(f[0]);return f}function c(u){return u.map(a)}return function l(u){var p,f=u.type;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(l)};case"Point":p=s(u.coordinates);break;case"MultiPoint":p=u.coordinates.map(s);break;case"LineString":p=o(u.arcs);break;case"MultiLineString":p=u.arcs.map(o);break;case"Polygon":p=c(u.arcs);break;case"MultiPolygon":p=u.arcs.map(c);break;default:return null}return{type:f,coordinates:p}}(e)}function Dqe(n,e){var t={},i=[],r=[];function o(c){c.forEach(function(l){l.forEach(function(u){(t[u=u<0?~u:u]||(t[u]=[])).push(c)})}),i.push(c)}function a(c){return function Tqe(n){for(var i,e=-1,t=n.length,r=n[t-1],s=0;++e<t;)s+=(i=r)[0]*(r=n[e])[1]-i[1]*r[0];return Math.abs(s)}(Iz(n,{type:"Polygon",arcs:[c]}).coordinates[0])}return e.forEach(function s(c){switch(c.type){case"GeometryCollection":c.geometries.forEach(s);break;case"Polygon":o(c.arcs);break;case"MultiPolygon":c.arcs.forEach(o)}}),i.forEach(function(c){if(!c._){var l=[],u=[c];for(c._=1,r.push(l);c=u.pop();)l.push(c),c.forEach(function(f){f.forEach(function(p){t[p<0?~p:p].forEach(function(g){g._||(g._=1,u.push(g))})})})}}),i.forEach(function(c){delete c._}),{type:"MultiPolygon",arcs:r.map(function(c){var u,l=[];if(c.forEach(function(_){_.forEach(function(w){w.forEach(function(b){t[b<0?~b:b].length<2&&l.push(b)})})}),(u=(l=function Eqe(n,e){var t={},i={},r={},s=[],o=-1;function c(l,u){for(var f in l){var p=l[f];delete u[p.start],delete p.start,delete p.end,p.forEach(function(g){t[g<0?~g:g]=1}),s.push(p)}}return e.forEach(function(l,u){var p,f=n.arcs[l<0?~l:l];f.length<3&&!f[1][0]&&!f[1][1]&&(p=e[++o],e[o]=l,e[u]=p)}),e.forEach(function(l){var g,v,u=function a(l){var p,u=n.arcs[l<0?~l:l],f=u[0];return n.transform?(p=[0,0],u.forEach(function(g){p[0]+=g[0],p[1]+=g[1]})):p=u[u.length-1],l<0?[p,f]:[f,p]}(l),f=u[0],p=u[1];if(g=r[f])if(delete r[g.end],g.push(l),g.end=p,v=i[p]){delete i[v.start];var _=v===g?g:g.concat(v);i[_.start=g.start]=r[_.end=v.end]=_}else i[g.start]=r[g.end]=g;else if(g=i[p])if(delete i[g.start],g.unshift(l),g.start=f,v=r[f]){delete r[v.end];var w=v===g?g:v.concat(g);i[w.start=v.start]=r[w.end=g.end]=w}else i[g.start]=r[g.end]=g;else i[(g=[l]).start=f]=r[g.end=p]=g}),c(r,i),c(i,r),e.forEach(function(l){t[l<0?~l:l]||s.push([l])}),s}(n,l)).length)>1)for(var g,v,f=1,p=a(l[0]);f<u;++f)(g=a(l[f]))>p&&(v=l[0],l[0]=l[f],l[f]=v,p=g);return l}).filter(function(c){return c.length>0})}}var RE=Object.prototype.hasOwnProperty;function Rz(n,e,t,i,r,s){3===arguments.length&&(i=s=Array,r=null);for(var o=new i(n=1<<Math.max(4,Math.ceil(Math.log(n)/Math.LN2))),a=new s(n),c=n-1,l=0;l<n;++l)o[l]=r;function u(v,_){for(var w=e(v)&c,b=o[w],x=0;b!=r;){if(t(b,v))return a[w]=_;if(++x>=n)throw new Error("full hashmap");b=o[w=w+1&c]}return o[w]=v,a[w]=_,_}function f(v,_){for(var w=e(v)&c,b=o[w],x=0;b!=r;){if(t(b,v))return a[w];if(++x>=n)throw new Error("full hashmap");b=o[w=w+1&c]}return o[w]=v,a[w]=_,_}function p(v,_){for(var w=e(v)&c,b=o[w],x=0;b!=r;){if(t(b,v))return a[w];if(++x>=n)break;b=o[w=w+1&c]}return _}function g(){for(var v=[],_=0,w=o.length;_<w;++_){var b=o[_];b!=r&&v.push(b)}return v}return{set:u,maybeSet:f,get:p,keys:g}}function S5(n,e){return n[0]===e[0]&&n[1]===e[1]}var Zoe=new ArrayBuffer(16),Joe=new Float64Array(Zoe),BE=new Uint32Array(Zoe);function Bz(n){Joe[0]=n[0],Joe[1]=n[1];var e=BE[0]^BE[1];return 2147483647&(e<<5^e>>7^BE[2]^BE[3])}function Fqe(n,e,t,i){kz(n,e,t),kz(n,e,e+i),kz(n,e+i,t)}function kz(n,e,t){for(var r,i=e+(t---e>>1);e<i;++e,--t)r=n[e],n[e]=n[t],n[t]=r}function Nqe(n){return null==n?{type:null}:("FeatureCollection"===n.type?Vqe:"Feature"===n.type?eae:Fz)(n)}function Vqe(n){var e={type:"GeometryCollection",geometries:n.features.map(eae)};return null!=n.bbox&&(e.bbox=n.bbox),e}function eae(n){var t,e=Fz(n.geometry);for(t in null!=n.id&&(e.id=n.id),null!=n.bbox&&(e.bbox=n.bbox),n.properties){e.properties=n.properties;break}return e}function Fz(n){if(null==n)return{type:null};var e="GeometryCollection"===n.type?{type:"GeometryCollection",geometries:n.geometries.map(Fz)}:"Point"===n.type||"MultiPoint"===n.type?{type:n.type,coordinates:n.coordinates}:{type:n.type,arcs:n.coordinates};return null!=n.bbox&&(e.bbox=n.bbox),e}function Gqe(n,e){var t=function Iqe(n){var e=1/0,t=1/0,i=-1/0,r=-1/0;function s(f){null!=f&&RE.call(o,f.type)&&o[f.type](f)}var o={GeometryCollection:function(f){f.geometries.forEach(s)},Point:function(f){a(f.coordinates)},MultiPoint:function(f){f.coordinates.forEach(a)},LineString:function(f){c(f.arcs)},MultiLineString:function(f){f.arcs.forEach(c)},Polygon:function(f){f.arcs.forEach(c)},MultiPolygon:function(f){f.arcs.forEach(l)}};function a(f){var p=f[0],g=f[1];p<e&&(e=p),p>i&&(i=p),g<t&&(t=g),g>r&&(r=g)}function c(f){f.forEach(a)}function l(f){f.forEach(c)}for(var u in n)s(n[u]);return i>=e&&r>=t?[e,t,i,r]:void 0}(n=function Oqe(n){var t,e={};for(t in n)e[t]=Nqe(n[t]);return e}(n)),i=e>0&&t&&function Uqe(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=s-i?(t-1)/(s-i):1,c=o-r?(t-1)/(o-r):1;function l(b){return[Math.round((b[0]-i)*a),Math.round((b[1]-r)*c)]}function u(b,x){for(var O,R,P,Q,J,M=-1,E=0,I=b.length,k=new Array(I);++M<I;)O=b[M],Q=Math.round((O[0]-i)*a),J=Math.round((O[1]-r)*c),(Q!==R||J!==P)&&(k[E++]=[R=Q,P=J]);for(k.length=E;E<x;)E=k.push([k[0][0],k[0][1]]);return k}function f(b){return u(b,2)}function p(b){return u(b,4)}function g(b){return b.map(p)}function v(b){null!=b&&RE.call(_,b.type)&&_[b.type](b)}var _={GeometryCollection:function(b){b.geometries.forEach(v)},Point:function(b){b.coordinates=l(b.coordinates)},MultiPoint:function(b){b.coordinates=b.coordinates.map(l)},LineString:function(b){b.arcs=f(b.arcs)},MultiLineString:function(b){b.arcs=b.arcs.map(f)},Polygon:function(b){b.arcs=g(b.arcs)},MultiPolygon:function(b){b.arcs=b.arcs.map(g)}};for(var w in n)v(n[w]);return{scale:[1/a,1/c],translate:[i,r]}}(n,t,e),r=function Pqe(n){var i,s,a,c,e=n.coordinates,t=n.lines,r=n.rings,o=t.length+r.length;for(delete n.lines,delete n.rings,a=0,c=t.length;a<c;++a)for(i=t[a];i=i.next;)++o;for(a=0,c=r.length;a<c;++a)for(s=r[a];s=s.next;)++o;var l=Rz(2*o*1.4,Bz,S5),u=n.arcs=[];for(a=0,c=t.length;a<c;++a){i=t[a];do{f(i)}while(i=i.next)}for(a=0,c=r.length;a<c;++a)if((s=r[a]).next)do{f(s)}while(s=s.next);else p(s);function f(x){var M,E,I,k,O,R,P,Q;if(I=l.get(M=e[x[0]]))for(P=0,Q=I.length;P<Q;++P)if(g(k=I[P],x))return x[0]=k[0],void(x[1]=k[1]);if(O=l.get(E=e[x[1]]))for(P=0,Q=O.length;P<Q;++P)if(v(R=O[P],x))return x[1]=R[0],void(x[0]=R[1]);I?I.push(x):l.set(M,[x]),O?O.push(x):l.set(E,[x]),u.push(x)}function p(x){var M,E,I,k,O;if(E=l.get(e[x[0]]))for(k=0,O=E.length;k<O;++k){if(_(I=E[k],x))return x[0]=I[0],void(x[1]=I[1]);if(w(I,x))return x[0]=I[1],void(x[1]=I[0])}if(E=l.get(M=e[x[0]+b(x)]))for(k=0,O=E.length;k<O;++k){if(_(I=E[k],x))return x[0]=I[0],void(x[1]=I[1]);if(w(I,x))return x[0]=I[1],void(x[1]=I[0])}E?E.push(x):l.set(M,[x]),u.push(x)}function g(x,M){var E=x[0],I=M[0],k=x[1];if(E-k!=I-M[1])return!1;for(;E<=k;++E,++I)if(!S5(e[E],e[I]))return!1;return!0}function v(x,M){var E=x[0],k=x[1],O=M[1];if(E-k!=M[0]-O)return!1;for(;E<=k;++E,--O)if(!S5(e[E],e[O]))return!1;return!0}function _(x,M){var E=x[0],I=M[0],R=x[1]-E;if(R!==M[1]-I)return!1;for(var P=b(x),Q=b(M),J=0;J<R;++J)if(!S5(e[E+(J+P)%R],e[I+(J+Q)%R]))return!1;return!0}function w(x,M){var E=x[0],O=M[1],R=x[1]-E;if(R!==O-M[0])return!1;for(var P=b(x),Q=R-b(M),J=0;J<R;++J)if(!S5(e[E+(J+P)%R],e[O-(J+Q)%R]))return!1;return!0}function b(x){for(var M=x[0],E=x[1],I=M,k=I,O=e[I];++I<E;){var R=e[I];(R[0]<O[0]||R[0]===O[0]&&R[1]<O[1])&&(k=I,O=R)}return k-M}return n}(function kqe(n){var s,o,a,e=function Bqe(n){var u,f,g,v,e=n.coordinates,t=n.lines,i=n.rings,r=function k(){for(var J=Rz(1.4*e.length,O,R,Int32Array,-1,Int32Array),Ce=new Int32Array(e.length),Ae=0,G=e.length;Ae<G;++Ae)Ce[Ae]=J.maybeSet(Ae,Ae);return Ce}(),s=new Int32Array(e.length),o=new Int32Array(e.length),a=new Int32Array(e.length),c=new Int8Array(e.length),l=0;for(u=0,f=e.length;u<f;++u)s[u]=o[u]=a[u]=-1;for(u=0,f=t.length;u<f;++u){var _=t[u],w=_[0],b=_[1];for(g=r[w],v=r[++w],++l,c[g]=1;++w<=b;)I(u,g,g=v,v=r[w]);++l,c[v]=1}for(u=0,f=e.length;u<f;++u)s[u]=-1;for(u=0,f=i.length;u<f;++u){var x=i[u],M=x[0]+1,E=x[1];for(I(u,r[E-1],g=r[M-1],v=r[M]);++M<=E;)I(u,g,g=v,v=r[M])}function I(J,Ce,Ae,G){if(s[Ae]!==J){s[Ae]=J;var ue=o[Ae];if(ue>=0){var X=a[Ae];(ue!==Ce||X!==G)&&(ue!==G||X!==Ce)&&(++l,c[Ae]=1)}else o[Ae]=Ce,a[Ae]=G}}function O(J){return Bz(e[J])}function R(J,Ce){return S5(e[J],e[Ce])}s=o=a=null;var Q,P=function Rqe(n,e,t,i,r){3===arguments.length&&(i=Array,r=null);for(var s=new i(n=1<<Math.max(4,Math.ceil(Math.log(n)/Math.LN2))),o=n-1,a=0;a<n;++a)s[a]=r;function c(f){for(var p=e(f)&o,g=s[p],v=0;g!=r;){if(t(g,f))return!0;if(++v>=n)throw new Error("full hashset");g=s[p=p+1&o]}return s[p]=f,!0}function l(f){for(var p=e(f)&o,g=s[p],v=0;g!=r;){if(t(g,f))return!0;if(++v>=n)break;g=s[p=p+1&o]}return!1}function u(){for(var f=[],p=0,g=s.length;p<g;++p){var v=s[p];v!=r&&f.push(v)}return f}return{add:c,has:l,values:u}}(1.4*l,Bz,S5);for(u=0,f=e.length;u<f;++u)c[Q=r[u]]&&P.add(e[Q]);return P}(n),t=n.coordinates,i=n.lines,r=n.rings;for(o=0,a=i.length;o<a;++o)for(var c=i[o],l=c[0],u=c[1];++l<u;)e.has(t[l])&&(s={0:l,1:c[1]},c[1]=l,c=c.next=s);for(o=0,a=r.length;o<a;++o)for(var f=r[o],p=f[0],g=p,v=f[1],_=e.has(t[p]);++g<v;)e.has(t[g])&&(_?(s={0:g,1:f[1]},f[1]=g,f=f.next=s):(Fqe(t,p,v,v-g),t[v]=t[p],_=!0,g=p));return n}(function zqe(n){var e=-1,t=[],i=[],r=[];function s(f){f&&RE.call(o,f.type)&&o[f.type](f)}var o={GeometryCollection:function(f){f.geometries.forEach(s)},LineString:function(f){f.arcs=a(f.arcs)},MultiLineString:function(f){f.arcs=f.arcs.map(a)},Polygon:function(f){f.arcs=f.arcs.map(c)},MultiPolygon:function(f){f.arcs=f.arcs.map(l)}};function a(f){for(var p=0,g=f.length;p<g;++p)r[++e]=f[p];var v={0:e-g+1,1:e};return t.push(v),v}function c(f){for(var p=0,g=f.length;p<g;++p)r[++e]=f[p];var v={0:e-g+1,1:e};return i.push(v),v}function l(f){return f.map(c)}for(var u in n)s(n[u]);return{type:"Topology",coordinates:r,lines:t,rings:i,objects:n}}(n))),s=r.coordinates,o=Rz(1.4*r.arcs.length,Qqe,Wqe);function a(p){p&&RE.call(c,p.type)&&c[p.type](p)}n=r.objects,r.bbox=t,r.arcs=r.arcs.map(function(p,g){return o.set(p,g),s.slice(p[0],p[1]+1)}),delete r.coordinates,s=null;var c={GeometryCollection:function(p){p.geometries.forEach(a)},LineString:function(p){p.arcs=l(p.arcs)},MultiLineString:function(p){p.arcs=p.arcs.map(l)},Polygon:function(p){p.arcs=p.arcs.map(l)},MultiPolygon:function(p){p.arcs=p.arcs.map(u)}};function l(p){var g=[];do{var v=o.get(p);g.push(p[0]<p[1]?v:~v)}while(p=p.next);return g}function u(p){return p.map(l)}for(var f in n)a(n[f]);return i&&(r.transform=i,r.arcs=function Hqe(n){for(var e=-1,t=n.length;++e<t;){for(var u,f,i=n[e],r=0,s=1,o=i.length,a=i[0],c=a[0],l=a[1];++r<o;)f=(a=i[r])[1],((u=a[0])!==c||f!==l)&&(i[s++]=[u-c,f-l],c=u,l=f);1===s&&(i[s++]=[0,0]),i.length=s}return n}(r.arcs)),r}function Qqe(n){var i,e=n[0],t=n[1];return t<e&&(i=e,e=t,t=i),e+31*t}function Wqe(n,e){var o,t=n[0],i=n[1],r=e[0],s=e[1];return i<t&&(o=t,t=i,i=o),s<r&&(o=r,r=s,s=o),t===r&&i===s}const qqe=function $qe(n,e){if(void 0===e&&(e={}),!Sz(e=e||{}))throw new Error("options is invalid");var t=e.mutate;if("FeatureCollection"!==LE(n))throw new Error("geojson must be a FeatureCollection");if(!n.features.length)throw new Error("geojson is empty");(!1===t||void 0===t)&&(n=Dz(n));var i=function Kqe(n){var e={};sd(n,function(i){e[i.geometry.type]=!0});var t=Object.keys(e);return 1===t.length?t[0]:null}(n);if(!i)throw new Error("geojson must be homogenous");var r=n;switch(i){case"LineString":return xqe(r,e);case"Polygon":return function jqe(n,e){if(void 0===e&&(e={}),"FeatureCollection"!==LE(n))throw new Error("geojson must be a FeatureCollection");if(!n.features.length)throw new Error("geojson is empty");(!1===e.mutate||void 0===e.mutate)&&(n=Dz(n));var t=[];sd(n,function(s){t.push(s.geometry)});var i=Gqe({geoms:QKe(t).geometry}),r=function Lqe(n){return Iz(n,Dqe.apply(this,arguments))}(i,i.objects.geoms.geometries);return r}(r,e);default:throw new Error(i+" is not supported")}},Zqe=function Xqe(n,e){void 0===e&&(e={});var t=e.maxEdge||1/0,i=function Yqe(n){var e=[],t={};return Z_(n,function(i){if(i.geometry){var r=i.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(t,r)||(e.push(i),t[r]=!0)}}),S4(e)}(n),r=function gqe(n,e){var t=!1;return S4(function vqe(n){if(n.length<3)return[];n.sort(mqe);for(var a,c,l,e=n.length-1,t=n[e].x,i=n[0].x,r=n[e].y,s=r;e--;)n[e].y<r&&(r=n[e].y),n[e].y>s&&(s=n[e].y);var I,g=i-t,v=s-r,_=g>v?g:v,w=.5*(i+t),b=.5*(s+r),x=[new $oe({__sentinel:!0,x:w-20*_,y:b-_},{__sentinel:!0,x:w,y:b+20*_},{__sentinel:!0,x:w+20*_,y:b-_})],M=[],E=[];for(e=n.length;e--;){for(E.length=0,I=x.length;I--;)(g=n[e].x-x[I].x)>0&&g*g>x[I].r?(M.push(x[I]),x.splice(I,1)):!(g*g+(v=n[e].y-x[I].y)*v>x[I].r)&&(E.push(x[I].a,x[I].b,x[I].b,x[I].c,x[I].c,x[I].a),x.splice(I,1));for(Aqe(E),I=E.length;I;)c=E[--I],a=E[--I],l=n[e],Math.abs(2*((c.x-a.x)*(l.y-c.y)-(c.y-a.y)*(l.x-c.x)))>1e-12&&x.push(new $oe(a,c,l))}for(Array.prototype.push.apply(M,x),e=M.length;e--;)(M[e].a.__sentinel||M[e].b.__sentinel||M[e].c.__sentinel)&&M.splice(e,1);return M}(n.features.map(function(i){var r={x:i.geometry.coordinates[0],y:i.geometry.coordinates[1]};return e?r.z=i.properties[e]:3===i.geometry.coordinates.length&&(t=!0,r.z=i.geometry.coordinates[2]),r})).map(function(i){var r=[i.a.x,i.a.y],s=[i.b.x,i.b.y],o=[i.c.x,i.c.y],a={};return t?(r.push(i.a.z),s.push(i.b.z),o.push(i.c.z)):a={a:i.a.z,b:i.b.z,c:i.c.z},W6([[r,s,o,r]],a)}))}(i);if(r.features=r.features.filter(function(o){var a=o.geometry.coordinates[0][0],c=o.geometry.coordinates[0][1],l=o.geometry.coordinates[0][2],u=$6(a,c,e),f=$6(c,l,e),p=$6(a,l,e);return u<=t&&f<=t&&p<=t}),r.features.length<1)return null;var s=qqe(r);return 1===s.coordinates.length&&(s.coordinates=s.coordinates[0],s.type="Polygon"),Y3(s)};ae(915),function(){function n(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var t=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(t=0;t<this.length-1;t++){var i=this.points[t],r=this.points[t+1];this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),t=0;t<this.centers.length-1;t++){var s=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,o=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,a=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+s),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+a)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+s),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}n.prototype.cacheSteps=function(e){var t=[],i=this.pos(0);t.push(0);for(var r=0;r<this.duration;r+=10){var s=this.pos(r);Math.sqrt((s.x-i.x)*(s.x-i.x)+(s.y-i.y)*(s.y-i.y)+(s.z-i.z)*(s.z-i.z))>e&&(t.push(r),i=s)}return t},n.prototype.vector=function(e){var t=this.pos(e+10),i=this.pos(e-10);return{angle:180*Math.atan2(t.y-i.y,t.x-i.x)/3.14,speed:Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y)+(i.z-t.z)*(i.z-t.z))}},n.prototype.pos=function(e){var t=e-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var i=t/this.duration;if(i>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*i);return function sXe(n,e,t,i,r){var s=function oXe(n){var e=n*n;return[e*n,3*e*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}(n);return{x:r.x*s[0]+i.x*s[1]+t.x*s[2]+e.x*s[3],y:r.y*s[0]+i.y*s[1]+t.y*s[2]+e.y*s[3],z:r.z*s[0]+i.z*s[1]+t.z*s[2]+e.z*s[3]}}((this.length-1)*i-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();function sae(n,e,t,i){void 0===i&&(i={});var r=M5(n),s=Rh(r[0]),o=Rh(r[1]),a=Rh(t),c=function Cz(n,e){void 0===e&&(e="kilometers");var t=Poe[e];if(!t)throw new Error(e+" units is invalid");return n/t}(e,i.units),l=Math.asin(Math.sin(o)*Math.cos(c)+Math.cos(o)*Math.sin(c)*Math.cos(a));return Ou([TE(s+Math.atan2(Math.sin(a)*Math.sin(c)*Math.cos(o),Math.cos(c)-Math.sin(o)*Math.sin(l))),TE(l)],i.properties)}function oae(n,e,t){if(void 0===t&&(t={}),!0===t.final)return function hXe(n,e){return(oae(e,n)+180)%360}(n,e);var i=M5(n),r=M5(e),s=Rh(i[0]),o=Rh(r[0]),a=Rh(i[1]),c=Rh(r[1]),l=Math.sin(o-s)*Math.cos(c),u=Math.cos(a)*Math.sin(c)-Math.sin(a)*Math.cos(c)*Math.cos(o-s);return TE(Math.atan2(l,u))}const aae=function fXe(n,e){void 0===e&&(e={});var t=0,i=0,r=0;return j6(n,function(s){t+=s[0],i+=s[1],r++},!0),Ou([t/r,i/r],e.properties)},dXe=function cae(n,e){switch(void 0===e&&(e={}),LE(n)){case"Point":return Ou(M5(n),e.properties);case"Polygon":var t=[];j6(n,function(E){t.push(E)});var c,l,u,f,p,g,v,_,i=aae(n,{properties:e.properties}),r=i.geometry.coordinates,s=0,o=0,a=0,w=t.map(function(E){return[E[0]-r[0],E[1]-r[1]]});for(c=0;c<t.length-1;c++)a+=_=(f=(l=w[c])[0])*(v=(u=w[c+1])[1])-(p=u[0])*(g=l[1]),s+=(f+p)*_,o+=(g+v)*_;if(0===a)return i;var x=1/(.5*a*6);return Ou([r[0]+x*s,r[1]+x*o],e.properties);default:var M=function fqe(n,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var t=[];if(j6(n,function(r){t.push([r[0],r[1]])}),!t.length)return null;var i=hqe(t,e.concavity);return i.length>3?W6([i]):null}(n);return M?cae(M,{properties:e.properties}):aae(n,{properties:e.properties})}};ae(5469);const uae=function gXe(n){if(!n)throw new Error("geojson is required");var e=[];return sd(n,function(t){!function mXe(n,e){var t=[],i=n.geometry;if(null!==i){switch(i.type){case"Polygon":t=Im(i);break;case"LineString":t=[Im(i)]}t.forEach(function(r){var s=function AXe(n,e){var t=[];return n.reduce(function(i,r){var s=H0([i,r],e);return s.bbox=function vXe(n,e){var t=n[0],i=n[1],r=e[0],s=e[1];return[t<r?t:r,i<s?i:s,t>r?t:r,i>s?i:s]}(i,r),t.push(s),r}),t}(r,n.properties);s.forEach(function(o){o.id=e.length,e.push(o)})})}}(t,e)}),S4(e)};var _Xe=ae(5406);function hae(n,e){var t=Im(n),i=Im(e);if(2!==t.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=t[0][0],s=t[0][1],o=t[1][0],a=t[1][1],c=i[0][0],l=i[0][1],u=i[1][0],f=i[1][1],p=(f-l)*(o-r)-(u-c)*(a-s);if(0===p)return null;var _=((u-c)*(s-l)-(f-l)*(r-c))/p,w=((o-r)*(s-l)-(a-s)*(r-c))/p;return _>=0&&_<=1&&w>=0&&w<=1?Ou([r+_*(o-r),s+_*(a-s)]):null}const fae=function yXe(n,e){var t={},i=[];if("LineString"===n.type&&(n=Y3(n)),"LineString"===e.type&&(e=Y3(e)),"Feature"===n.type&&"Feature"===e.type&&null!==n.geometry&&null!==e.geometry&&"LineString"===n.geometry.type&&"LineString"===e.geometry.type&&2===n.geometry.coordinates.length&&2===e.geometry.coordinates.length){var r=hae(n,e);return r&&i.push(r),S4(i)}var s=_Xe();return s.load(uae(e)),Z_(uae(n),function(o){Z_(s.search(o),function(a){var c=hae(o,a);if(c){var l=Im(c).join(",");t[l]||(t[l]=!0,i.push(c))}})}),S4(i)},yae=function OXe(n){if(!n)throw new Error("geojson is required");var e=[];return sd(n,function(t){e.push(t)}),S4(e)};ae(3237);var xae=Math.PI/180,Cae=180/Math.PI,ty=function(n,e){this.lon=n,this.lat=e,this.x=xae*n,this.y=xae*e};ty.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ty.prototype.antipode=function(){return new ty(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var Mae=function(){this.coords=[],this.length=0};Mae.prototype.move_to=function(n){this.length++,this.coords.push(n)};var Vz=function(n){this.properties=n||{},this.geometries=[]};Vz.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],e=0;e<this.geometries.length;e++)n.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}},Vz.prototype.wkt=function(){for(var n="",e="LINESTRING(",t=function(s){e+=s[0]+" "+s[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(t),n+=e.substring(0,e.length-1)+")"}return n};var Uz=function(n,e,t){if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ty(n.x,n.y),this.end=new ty(e.x,e.y),this.properties=t||{};var i=this.start.x-this.end.x,s=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(s)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+e)};Uz.prototype.interpolate=function(n){var e=Math.sin((1-n)*this.g)/Math.sin(this.g),t=Math.sin(n*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+t*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+t*Math.cos(this.end.y)*Math.sin(this.end.x),s=e*Math.sin(this.start.y)+t*Math.sin(this.end.y),o=Cae*Math.atan2(s,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[Cae*Math.atan2(r,i),o]},Uz.prototype.Arc=function(n,e){var t=[];if(!n||n<=2)t.push([this.start.lon,this.start.lat]),t.push([this.end.lon,this.end.lat]);else for(var i=1/(n-1),r=0;r<n;++r){var o=this.interpolate(i*r);t.push(o)}for(var a=!1,c=0,l=e&&e.offset?e.offset:10,u=180-l,f=-180+l,p=360-l,g=1;g<t.length;++g){var v=t[g-1][0],_=t[g][0],w=Math.abs(_-v);w>p&&(_>u&&v<f||v>u&&_<f)?a=!0:w>c&&(c=w)}var b=[];if(a&&c<l){var x=[];b.push(x);for(var M=0;M<t.length;++M){var E=parseFloat(t[M][0]);if(M>0&&Math.abs(E-t[M-1][0])>p){var I=parseFloat(t[M-1][0]),k=parseFloat(t[M-1][1]),O=parseFloat(t[M][0]),R=parseFloat(t[M][1]);if(I>-180&&I<f&&180===O&&M+1<t.length&&t[M-1][0]>-180&&t[M-1][0]<f){x.push([-180,t[M][1]]),M++,x.push([t[M][0],t[M][1]]);continue}if(I>u&&I<180&&-180===O&&M+1<t.length&&t[M-1][0]>u&&t[M-1][0]<180){x.push([180,t[M][1]]),M++,x.push([t[M][0],t[M][1]]);continue}if(I<f&&O>u){var P=I;I=O,O=P;var Q=k;k=R,R=Q}if(I>u&&O<f&&(O+=360),I<=180&&O>=180&&I<O){var J=(180-I)/(O-I),Ce=J*R+(1-J)*k;x.push([t[M-1][0]>u?180:-180,Ce]),(x=[]).push([t[M-1][0]>u?-180:180,Ce]),b.push(x)}else b.push(x=[]);x.push([E,t[M][1]])}else x.push([t[M][0],t[M][1]])}}else{var Ae=[];b.push(Ae);for(var G=0;G<t.length;++G)Ae.push([t[G][0],t[G][1]])}for(var ue=new Vz(this.properties),X=0;X<b.length;++X){var le=new Mae;ue.geometries.push(le);for(var de=b[X],pe=0;pe<de.length;++pe)le.move_to(de[pe])}return ue},ae(6952);var ts=[],ns=[],is=[],rs=[],ss=[],os=[],as=[],cs=[],ls=[],us=[],hs=[],fs=[],ds=[],ps=[],gs=[],ms=[],As=[],vs=[],_s=[],ys=[],ws=[],bs=[],xs=[],Cs=[];as[85]=us[85]=-1,cs[85]=hs[85]=0,ls[85]=fs[85]=1,_s[85]=bs[85]=1,ys[85]=xs[85]=0,ws[85]=Cs[85]=1,ts[85]=rs[85]=0,ns[85]=ss[85]=-1,is[85]=gs[85]=0,ms[85]=ds[85]=0,As[85]=ps[85]=1,os[85]=vs[85]=1,bs[1]=bs[169]=0,xs[1]=xs[169]=-1,Cs[1]=Cs[169]=0,ds[1]=ds[169]=-1,ps[1]=ps[169]=0,gs[1]=gs[169]=0,us[4]=us[166]=0,hs[4]=hs[166]=-1,fs[4]=fs[166]=1,ms[4]=ms[166]=1,As[4]=As[166]=0,vs[4]=vs[166]=0,as[16]=as[154]=0,cs[16]=cs[154]=1,ls[16]=ls[154]=1,rs[16]=rs[154]=1,ss[16]=ss[154]=0,os[16]=os[154]=1,_s[64]=_s[106]=0,ys[64]=ys[106]=1,ws[64]=ws[106]=0,ts[64]=ts[106]=-1,ns[64]=ns[106]=0,is[64]=is[106]=1,_s[2]=_s[168]=0,ys[2]=ys[168]=-1,ws[2]=ws[168]=1,bs[2]=bs[168]=0,xs[2]=xs[168]=-1,Cs[2]=Cs[168]=0,ds[2]=ds[168]=-1,ps[2]=ps[168]=0,gs[2]=gs[168]=0,ms[2]=ms[168]=-1,As[2]=As[168]=0,vs[2]=vs[168]=1,as[8]=as[162]=0,cs[8]=cs[162]=-1,ls[8]=ls[162]=0,us[8]=us[162]=0,hs[8]=hs[162]=-1,fs[8]=fs[162]=1,ds[8]=ds[162]=1,ps[8]=ps[162]=0,gs[8]=gs[162]=1,ms[8]=ms[162]=1,As[8]=As[162]=0,vs[8]=vs[162]=0,as[32]=as[138]=0,cs[32]=cs[138]=1,ls[32]=ls[138]=1,us[32]=us[138]=0,hs[32]=hs[138]=1,fs[32]=fs[138]=0,ts[32]=ts[138]=1,ns[32]=ns[138]=0,is[32]=is[138]=0,rs[32]=rs[138]=1,ss[32]=ss[138]=0,os[32]=os[138]=1,bs[128]=bs[42]=0,xs[128]=xs[42]=1,Cs[128]=Cs[42]=1,_s[128]=_s[42]=0,ys[128]=ys[42]=1,ws[128]=ws[42]=0,ts[128]=ts[42]=-1,ns[128]=ns[42]=0,is[128]=is[42]=1,rs[128]=rs[42]=-1,ss[128]=ss[42]=0,os[128]=os[42]=0,us[5]=us[165]=-1,hs[5]=hs[165]=0,fs[5]=fs[165]=0,bs[5]=bs[165]=1,xs[5]=xs[165]=0,Cs[5]=Cs[165]=0,ms[20]=ms[150]=0,As[20]=As[150]=1,vs[20]=vs[150]=1,rs[20]=rs[150]=0,ss[20]=ss[150]=-1,os[20]=os[150]=1,as[80]=as[90]=-1,cs[80]=cs[90]=0,ls[80]=ls[90]=1,_s[80]=_s[90]=1,ys[80]=ys[90]=0,ws[80]=ws[90]=1,ds[65]=ds[105]=0,ps[65]=ps[105]=1,gs[65]=gs[105]=0,ts[65]=ts[105]=0,ns[65]=ns[105]=-1,is[65]=is[105]=0,as[160]=as[10]=-1,cs[160]=cs[10]=0,ls[160]=ls[10]=1,us[160]=us[10]=-1,hs[160]=hs[10]=0,fs[160]=fs[10]=0,bs[160]=bs[10]=1,xs[160]=xs[10]=0,Cs[160]=Cs[10]=0,_s[160]=_s[10]=1,ys[160]=ys[10]=0,ws[160]=ws[10]=1,ms[130]=ms[40]=0,As[130]=As[40]=1,vs[130]=vs[40]=1,ds[130]=ds[40]=0,ps[130]=ps[40]=1,gs[130]=gs[40]=0,ts[130]=ts[40]=0,ns[130]=ns[40]=-1,is[130]=is[40]=0,rs[130]=rs[40]=0,ss[130]=ss[40]=-1,os[130]=os[40]=1,us[37]=us[133]=0,hs[37]=hs[133]=1,fs[37]=fs[133]=1,bs[37]=bs[133]=0,xs[37]=xs[133]=1,Cs[37]=Cs[133]=0,ts[37]=ts[133]=-1,ns[37]=ns[133]=0,is[37]=is[133]=0,rs[37]=rs[133]=1,ss[37]=ss[133]=0,os[37]=os[133]=0,ms[148]=ms[22]=-1,As[148]=As[22]=0,vs[148]=vs[22]=0,bs[148]=bs[22]=0,xs[148]=xs[22]=-1,Cs[148]=Cs[22]=1,_s[148]=_s[22]=0,ys[148]=ys[22]=1,ws[148]=ws[22]=1,rs[148]=rs[22]=-1,ss[148]=ss[22]=0,os[148]=os[22]=1,as[82]=as[88]=0,cs[82]=cs[88]=-1,ls[82]=ls[88]=1,ms[82]=ms[88]=1,As[82]=As[88]=0,vs[82]=vs[88]=1,ds[82]=ds[88]=-1,ps[82]=ps[88]=0,gs[82]=gs[88]=1,_s[82]=_s[88]=0,ys[82]=ys[88]=-1,ws[82]=ws[88]=0,as[73]=as[97]=0,cs[73]=cs[97]=1,ls[73]=ls[97]=0,us[73]=us[97]=0,hs[73]=hs[97]=-1,fs[73]=fs[97]=0,ds[73]=ds[97]=1,ps[73]=ps[97]=0,gs[73]=gs[97]=0,ts[73]=ts[97]=1,ns[73]=ns[97]=0,is[73]=is[97]=1,as[145]=as[25]=0,cs[145]=cs[25]=-1,ls[145]=ls[25]=0,ds[145]=ds[25]=1,ps[145]=ps[25]=0,gs[145]=gs[25]=1,bs[145]=bs[25]=0,xs[145]=xs[25]=1,Cs[145]=Cs[25]=1,rs[145]=rs[25]=-1,ss[145]=ss[25]=0,os[145]=os[25]=0,us[70]=us[100]=0,hs[70]=hs[100]=1,fs[70]=fs[100]=0,ms[70]=ms[100]=-1,As[70]=As[100]=0,vs[70]=vs[100]=1,_s[70]=_s[100]=0,ys[70]=ys[100]=-1,ws[70]=ws[100]=1,ts[70]=ts[100]=1,ns[70]=ns[100]=0,is[70]=is[100]=0,us[101]=us[69]=0,hs[101]=hs[69]=1,fs[101]=fs[69]=0,ts[101]=ts[69]=1,ns[101]=ns[69]=0,is[101]=is[69]=0,bs[149]=bs[21]=0,xs[149]=xs[21]=1,Cs[149]=Cs[21]=1,rs[149]=rs[21]=-1,ss[149]=ss[21]=0,os[149]=os[21]=0,ms[86]=ms[84]=-1,As[86]=As[84]=0,vs[86]=vs[84]=1,_s[86]=_s[84]=0,ys[86]=ys[84]=-1,ws[86]=ws[84]=1,as[89]=as[81]=0,cs[89]=cs[81]=-1,ls[89]=ls[81]=0,ds[89]=ds[81]=1,ps[89]=ps[81]=0,gs[89]=gs[81]=1,as[96]=as[74]=0,cs[96]=cs[74]=1,ls[96]=ls[74]=0,us[96]=us[74]=-1,hs[96]=hs[74]=0,fs[96]=fs[74]=1,_s[96]=_s[74]=1,ys[96]=ys[74]=0,ws[96]=ws[74]=0,ts[96]=ts[74]=1,ns[96]=ns[74]=0,is[96]=is[74]=1,as[24]=as[146]=0,cs[24]=cs[146]=-1,ls[24]=ls[146]=1,ms[24]=ms[146]=1,As[24]=As[146]=0,vs[24]=vs[146]=1,ds[24]=ds[146]=0,ps[24]=ps[146]=1,gs[24]=gs[146]=1,rs[24]=rs[146]=0,ss[24]=ss[146]=-1,os[24]=os[146]=0,us[6]=us[164]=-1,hs[6]=hs[164]=0,fs[6]=fs[164]=1,ms[6]=ms[164]=-1,As[6]=As[164]=0,vs[6]=vs[164]=0,bs[6]=bs[164]=0,xs[6]=xs[164]=-1,Cs[6]=Cs[164]=1,_s[6]=_s[164]=1,ys[6]=ys[164]=0,ws[6]=ws[164]=0,ds[129]=ds[41]=0,ps[129]=ps[41]=1,gs[129]=gs[41]=1,bs[129]=bs[41]=0,xs[129]=xs[41]=1,Cs[129]=Cs[41]=0,ts[129]=ts[41]=-1,ns[129]=ns[41]=0,is[129]=is[41]=0,rs[129]=rs[41]=0,ss[129]=ss[41]=-1,os[129]=os[41]=0,ms[66]=ms[104]=0,As[66]=As[104]=1,vs[66]=vs[104]=0,ds[66]=ds[104]=-1,ps[66]=ps[104]=0,gs[66]=gs[104]=1,_s[66]=_s[104]=0,ys[66]=ys[104]=-1,ws[66]=ws[104]=0,ts[66]=ts[104]=0,ns[66]=ns[104]=-1,is[66]=is[104]=1,as[144]=as[26]=-1,cs[144]=cs[26]=0,ls[144]=ls[26]=0,bs[144]=bs[26]=1,xs[144]=xs[26]=0,Cs[144]=Cs[26]=1,_s[144]=_s[26]=0,ys[144]=ys[26]=1,ws[144]=ws[26]=1,rs[144]=rs[26]=-1,ss[144]=ss[26]=0,os[144]=os[26]=1,us[36]=us[134]=0,hs[36]=hs[134]=1,fs[36]=fs[134]=1,ms[36]=ms[134]=0,As[36]=As[134]=1,vs[36]=vs[134]=0,ts[36]=ts[134]=0,ns[36]=ns[134]=-1,is[36]=is[134]=1,rs[36]=rs[134]=1,ss[36]=ss[134]=0,os[36]=os[134]=0,as[9]=as[161]=-1,cs[9]=cs[161]=0,ls[9]=ls[161]=0,us[9]=us[161]=0,hs[9]=hs[161]=-1,fs[9]=fs[161]=0,ds[9]=ds[161]=1,ps[9]=ps[161]=0,gs[9]=gs[161]=0,bs[9]=bs[161]=1,xs[9]=xs[161]=0,Cs[9]=Cs[161]=1,as[136]=0,cs[136]=1,ls[136]=1,us[136]=0,hs[136]=1,fs[136]=0,ms[136]=-1,As[136]=0,vs[136]=1,ds[136]=-1,ps[136]=0,gs[136]=0,bs[136]=0,xs[136]=-1,Cs[136]=0,_s[136]=0,ys[136]=-1,ws[136]=1,ts[136]=1,ns[136]=0,is[136]=0,rs[136]=1,ss[136]=0,os[136]=1,as[34]=0,cs[34]=-1,ls[34]=0,us[34]=0,hs[34]=-1,fs[34]=1,ms[34]=1,As[34]=0,vs[34]=0,ds[34]=1,ps[34]=0,gs[34]=1,bs[34]=0,xs[34]=1,Cs[34]=1,_s[34]=0,ys[34]=1,ws[34]=0,ts[34]=-1,ns[34]=0,is[34]=1,rs[34]=-1,ss[34]=0,os[34]=0,as[35]=0,cs[35]=1,ls[35]=1,us[35]=0,hs[35]=-1,fs[35]=1,ms[35]=1,As[35]=0,vs[35]=0,ds[35]=-1,ps[35]=0,gs[35]=0,bs[35]=0,xs[35]=-1,Cs[35]=0,_s[35]=0,ys[35]=1,ws[35]=0,ts[35]=-1,ns[35]=0,is[35]=1,rs[35]=1,ss[35]=0,os[35]=1,as[153]=0,cs[153]=1,ls[153]=1,ds[153]=-1,ps[153]=0,gs[153]=0,bs[153]=0,xs[153]=-1,Cs[153]=0,rs[153]=1,ss[153]=0,os[153]=1,us[102]=0,hs[102]=-1,fs[102]=1,ms[102]=1,As[102]=0,vs[102]=0,_s[102]=0,ys[102]=1,ws[102]=0,ts[102]=-1,ns[102]=0,is[102]=1,as[155]=0,cs[155]=-1,ls[155]=0,ds[155]=1,ps[155]=0,gs[155]=1,bs[155]=0,xs[155]=1,Cs[155]=1,rs[155]=-1,ss[155]=0,os[155]=0,us[103]=0,hs[103]=1,fs[103]=0,ms[103]=-1,As[103]=0,vs[103]=1,_s[103]=0,ys[103]=-1,ws[103]=1,ts[103]=1,ns[103]=0,is[103]=0,as[152]=0,cs[152]=1,ls[152]=1,ms[152]=-1,As[152]=0,vs[152]=1,ds[152]=-1,ps[152]=0,gs[152]=0,bs[152]=0,xs[152]=-1,Cs[152]=0,_s[152]=0,ys[152]=-1,ws[152]=1,rs[152]=1,ss[152]=0,os[152]=1,as[156]=0,cs[156]=-1,ls[156]=1,ms[156]=1,As[156]=0,vs[156]=1,ds[156]=-1,ps[156]=0,gs[156]=0,bs[156]=0,xs[156]=-1,Cs[156]=0,_s[156]=0,ys[156]=1,ws[156]=1,rs[156]=-1,ss[156]=0,os[156]=1,as[137]=0,cs[137]=1,ls[137]=1,us[137]=0,hs[137]=1,fs[137]=0,ds[137]=-1,ps[137]=0,gs[137]=0,bs[137]=0,xs[137]=-1,Cs[137]=0,ts[137]=1,ns[137]=0,is[137]=0,rs[137]=1,ss[137]=0,os[137]=1,as[139]=0,cs[139]=1,ls[139]=1,us[139]=0,hs[139]=-1,fs[139]=0,ds[139]=1,ps[139]=0,gs[139]=0,bs[139]=0,xs[139]=1,Cs[139]=0,ts[139]=-1,ns[139]=0,is[139]=0,rs[139]=1,ss[139]=0,os[139]=1,as[98]=0,cs[98]=-1,ls[98]=0,us[98]=0,hs[98]=-1,fs[98]=1,ms[98]=1,As[98]=0,vs[98]=0,ds[98]=1,ps[98]=0,gs[98]=1,_s[98]=0,ys[98]=1,ws[98]=0,ts[98]=-1,ns[98]=0,is[98]=1,as[99]=0,cs[99]=1,ls[99]=0,us[99]=0,hs[99]=-1,fs[99]=1,ms[99]=1,As[99]=0,vs[99]=0,ds[99]=-1,ps[99]=0,gs[99]=1,_s[99]=0,ys[99]=-1,ws[99]=0,ts[99]=1,ns[99]=0,is[99]=1,us[38]=0,hs[38]=-1,fs[38]=1,ms[38]=1,As[38]=0,vs[38]=0,bs[38]=0,xs[38]=1,Cs[38]=1,_s[38]=0,ys[38]=1,ws[38]=0,ts[38]=-1,ns[38]=0,is[38]=1,rs[38]=-1,ss[38]=0,os[38]=0,us[39]=0,hs[39]=1,fs[39]=1,ms[39]=-1,As[39]=0,vs[39]=0,bs[39]=0,xs[39]=-1,Cs[39]=1,_s[39]=0,ys[39]=1,ws[39]=0,ts[39]=-1,ns[39]=0,is[39]=1,rs[39]=1,ss[39]=0,os[39]=0;var jz=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},$z=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},Kz=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},qz=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},Xz=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},Yz=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},Zz=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},Jz=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},ci=[],ii=[],Fi=[],Ci=[],tr=[],Ji=[],Ms=[],Rs=[];Ci[1]=tr[1]=18,Ci[169]=tr[169]=18,Fi[4]=ii[4]=12,Fi[166]=ii[166]=12,ci[16]=Rs[16]=4,ci[154]=Rs[154]=4,Ji[64]=Ms[64]=22,Ji[106]=Ms[106]=22,Fi[2]=Ji[2]=17,Ci[2]=tr[2]=18,Fi[168]=Ji[168]=17,Ci[168]=tr[168]=18,ci[8]=Ci[8]=9,ii[8]=Fi[8]=12,ci[162]=Ci[162]=9,ii[162]=Fi[162]=12,ci[32]=Rs[32]=4,ii[32]=Ms[32]=1,ci[138]=Rs[138]=4,ii[138]=Ms[138]=1,tr[128]=Rs[128]=21,Ji[128]=Ms[128]=22,tr[42]=Rs[42]=21,Ji[42]=Ms[42]=22,ii[5]=tr[5]=14,ii[165]=tr[165]=14,Fi[20]=Rs[20]=6,Fi[150]=Rs[150]=6,ci[80]=Ji[80]=11,ci[90]=Ji[90]=11,Ci[65]=Ms[65]=3,Ci[105]=Ms[105]=3,ci[160]=Ji[160]=11,ii[160]=tr[160]=14,ci[10]=Ji[10]=11,ii[10]=tr[10]=14,Fi[130]=Rs[130]=6,Ci[130]=Ms[130]=3,Fi[40]=Rs[40]=6,Ci[40]=Ms[40]=3,ii[101]=Ms[101]=1,ii[69]=Ms[69]=1,tr[149]=Rs[149]=21,tr[21]=Rs[21]=21,Fi[86]=Ji[86]=17,Fi[84]=Ji[84]=17,ci[89]=Ci[89]=9,ci[81]=Ci[81]=9,ci[96]=Ms[96]=0,ii[96]=Ji[96]=15,ci[74]=Ms[74]=0,ii[74]=Ji[74]=15,ci[24]=Fi[24]=8,Ci[24]=Rs[24]=7,ci[146]=Fi[146]=8,Ci[146]=Rs[146]=7,ii[6]=Ji[6]=15,Fi[6]=tr[6]=16,ii[164]=Ji[164]=15,Fi[164]=tr[164]=16,Ci[129]=Rs[129]=7,tr[129]=Ms[129]=20,Ci[41]=Rs[41]=7,tr[41]=Ms[41]=20,Fi[66]=Ms[66]=2,Ci[66]=Ji[66]=19,Fi[104]=Ms[104]=2,Ci[104]=Ji[104]=19,ci[144]=tr[144]=10,Ji[144]=Rs[144]=23,ci[26]=tr[26]=10,Ji[26]=Rs[26]=23,ii[36]=Rs[36]=5,Fi[36]=Ms[36]=2,ii[134]=Rs[134]=5,Fi[134]=Ms[134]=2,ci[9]=tr[9]=10,ii[9]=Ci[9]=13,ci[161]=tr[161]=10,ii[161]=Ci[161]=13,ii[37]=Rs[37]=5,tr[37]=Ms[37]=20,ii[133]=Rs[133]=5,tr[133]=Ms[133]=20,Fi[148]=tr[148]=16,Ji[148]=Rs[148]=23,Fi[22]=tr[22]=16,Ji[22]=Rs[22]=23,ci[82]=Fi[82]=8,Ci[82]=Ji[82]=19,ci[88]=Fi[88]=8,Ci[88]=Ji[88]=19,ci[73]=Ms[73]=0,ii[73]=Ci[73]=13,ci[97]=Ms[97]=0,ii[97]=Ci[97]=13,ci[145]=Ci[145]=9,tr[145]=Rs[145]=21,ci[25]=Ci[25]=9,tr[25]=Rs[25]=21,ii[70]=Ms[70]=1,Fi[70]=Ji[70]=17,ii[100]=Ms[100]=1,Fi[100]=Ji[100]=17,ci[34]=Ci[34]=9,ii[34]=Fi[34]=12,tr[34]=Rs[34]=21,Ji[34]=Ms[34]=22,ci[136]=Rs[136]=4,ii[136]=Ms[136]=1,Fi[136]=Ji[136]=17,Ci[136]=tr[136]=18,ci[35]=Rs[35]=4,ii[35]=Fi[35]=12,Ci[35]=tr[35]=18,Ji[35]=Ms[35]=22,ci[153]=Rs[153]=4,Ci[153]=tr[153]=18,ii[102]=Fi[102]=12,Ji[102]=Ms[102]=22,ci[155]=Ci[155]=9,tr[155]=Rs[155]=23,ii[103]=Ms[103]=1,Fi[103]=Ji[103]=17,ci[152]=Rs[152]=4,Fi[152]=Ji[152]=17,Ci[152]=tr[152]=18,ci[156]=Fi[156]=8,Ci[156]=tr[156]=18,Ji[156]=Rs[156]=23,ci[137]=Rs[137]=4,ii[137]=Ms[137]=1,Ci[137]=tr[137]=18,ci[139]=Rs[139]=4,ii[139]=Ci[139]=13,tr[139]=Ms[139]=20,ci[98]=Ci[98]=9,ii[98]=Fi[98]=12,Ji[98]=Ms[98]=22,ci[99]=Ms[99]=0,ii[99]=Fi[99]=12,Ci[99]=Ji[99]=19,ii[38]=Fi[38]=12,tr[38]=Rs[38]=21,Ji[38]=Ms[38]=22,ii[39]=Rs[39]=5,Fi[39]=tr[39]=16,Ji[39]=Ms[39]=22;var Vn=[];function nO(n,e,t){return function eZe(n){return(n>0)-(n<0)||+n}((e[0]-n[0])*(t[1]-e[1])-(t[0]-e[0])*(e[1]-n[1]))}function Vae(n,e){return e.geometry.coordinates[0].every(function(t){return Woe(Ou(t),n)})}Vn[1]=Vn[169]=jz,Vn[4]=Vn[166]=$z,Vn[16]=Vn[154]=Kz,Vn[64]=Vn[106]=qz,Vn[168]=Vn[2]=Xz,Vn[162]=Vn[8]=Yz,Vn[138]=Vn[32]=Zz,Vn[42]=Vn[128]=Jz,Vn[5]=Vn[165]=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},Vn[20]=Vn[150]=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},Vn[80]=Vn[90]=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},Vn[65]=Vn[105]=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Vn[160]=Vn[10]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},Vn[130]=Vn[40]=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},Vn[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Vn[101]=Vn[69]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},Vn[149]=Vn[21]=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},Vn[86]=Vn[84]=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},Vn[89]=Vn[81]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},Vn[96]=Vn[74]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},Vn[24]=Vn[146]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},Vn[6]=Vn[164]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},Vn[129]=Vn[41]=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},Vn[66]=Vn[104]=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Vn[144]=Vn[26]=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Vn[36]=Vn[134]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},Vn[9]=Vn[161]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},Vn[37]=Vn[133]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Vn[148]=Vn[22]=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Vn[82]=Vn[88]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},Vn[73]=Vn[97]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Vn[145]=Vn[25]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Vn[70]=Vn[100]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Vn[34]=function(n){return[Jz(n),Yz(n)]},Vn[35]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},Vn[136]=function(n){return[Zz(n),Xz(n)]},Vn[153]=function(n){return[Kz(n),jz(n)]},Vn[102]=function(n){return[$z(n),qz(n)]},Vn[155]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Vn[103]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Vn[152]=function(n){return[Kz(n),Xz(n)]},Vn[156]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Vn[137]=function(n){return[Zz(n),jz(n)]},Vn[139]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Vn[98]=function(n){return[Yz(n),qz(n)]},Vn[99]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Vn[38]=function(n){return[$z(n),Jz(n)]},Vn[39]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]};var iZe=function(){function n(e){this.id=n.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n.buildId=function(e){return e.join(",")},n.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})},n.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})},n.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var e=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,i){var r=t.to,s=i.to;if(r.coordinates[0]-e.coordinates[0]>=0&&s.coordinates[0]-e.coordinates[0]<0)return 1;if(r.coordinates[0]-e.coordinates[0]<0&&s.coordinates[0]-e.coordinates[0]>=0)return-1;if(r.coordinates[0]-e.coordinates[0]==0&&s.coordinates[0]-e.coordinates[0]==0)return r.coordinates[1]-e.coordinates[1]>=0||s.coordinates[1]-e.coordinates[1]>=0?r.coordinates[1]-s.coordinates[1]:s.coordinates[1]-r.coordinates[1];var o=nO(e.coordinates,r.coordinates,s.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-e.coordinates[0],2)+Math.pow(r.coordinates[1]-e.coordinates[1],2)-(Math.pow(s.coordinates[0]-e.coordinates[0],2)+Math.pow(s.coordinates[1]-e.coordinates[1],2))}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},n.prototype.addInnerEdge=function(e){this.innerEdges.push(e)},n}();const Uae=iZe;var rZe=function(){function n(e,t){this.from=e,this.to=t,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},n.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return H0([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(e){return nO(e.from.coordinates,e.to.coordinates,this.to.coordinates)},n}();const sZe=rZe;var oZe=function(){function n(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return n.prototype.push=function(e){this.edges.push(e),this.polygon=this.envelope=void 0},n.prototype.get=function(e){return this.edges[e]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(e){this.edges.forEach(e)},n.prototype.map=function(e){return this.edges.map(e)},n.prototype.some=function(e){return this.edges.some(e)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var e=this,t=this.edges.reduce(function(o,a,c){return a.from.coordinates[1]>e.edges[o].from.coordinates[1]&&(o=c),o},0),i=(0===t?this.length:t)-1,r=(t+1)%this.length,s=nO(this.edges[i].from.coordinates,this.edges[t].from.coordinates,this.edges[r].from.coordinates);return 0===s?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:s>0},n.prototype.toMultiPoint=function(){return function Ooe(n,e,t){return void 0===t&&(t={}),Y3({type:"MultiPoint",coordinates:n},e,t)}(this.edges.map(function(e){return e.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(t){return t.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=W6([e])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=function lXe(n){return function cXe(n,e){void 0===e&&(e={});var t=Number(n[0]),i=Number(n[1]),r=Number(n[2]),s=Number(n[3]);if(6===n.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[t,i];return W6([[o,[r,i],[r,s],[t,s],o]],e.properties,{bbox:n,id:e.id})}(YKe(n))}(this.toPolygon())},n.findEdgeRingContaining=function(e,t){var r,s,i=e.getEnvelope();return t.forEach(function(o){var a=o.getEnvelope();if(s&&(r=s.getEnvelope()),!function tZe(n,e){var t=n.geometry.coordinates[0].map(function(o){return o[0]}),i=n.geometry.coordinates[0].map(function(o){return o[1]}),r=e.geometry.coordinates[0].map(function(o){return o[0]}),s=e.geometry.coordinates[0].map(function(o){return o[1]});return Math.max.apply(null,t)===Math.max.apply(null,r)&&Math.max.apply(null,i)===Math.max.apply(null,s)&&Math.min.apply(null,t)===Math.min.apply(null,r)&&Math.min.apply(null,i)===Math.min.apply(null,s)}(a,i)&&Vae(a,i)){for(var c=e.map(function(v){return v.from.coordinates}),l=void 0,u=function(v){o.some(function(_){return function nZe(n,e){return n[0]===e[0]&&n[1]===e[1]}(v,_.from.coordinates)})||(l=v)},f=0,p=c;f<p.length;f++)u(p[f]);l&&o.inside(Ou(l))&&(!s||Vae(r,a))&&(s=o)}}),s},n.prototype.inside=function(e){return Woe(e,this.toPolygon())},n}();const aZe=oZe;function Yae(n){for(var e=n,t=[];e.parent;)t.unshift(e),e=e.parent;return t}!function(){function n(){this.edges=[],this.nodes={}}n.fromGeoJson=function(e){!function cZe(n){if(!n)throw new Error("No geojson passed");if("FeatureCollection"!==n.type&&"GeometryCollection"!==n.type&&"MultiLineString"!==n.type&&"LineString"!==n.type&&"Feature"!==n.type)throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var t=new n;return sd(e,function(i){(function JKe(n,e,t){if(!n)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.geometry.type)})(i,"LineString","Graph::fromGeoJson"),function jKe(n,e,t,i){var r=t;j6(n,function(s,o,a,c,l){r=0===o&&void 0===t?s:e(r,s,o,a,c,l)},i)}(i,function(r,s){if(r){var o=t.getNode(r),a=t.getNode(s);t.addEdge(o,a)}return s})}),t},n.prototype.getNode=function(e){var t=Uae.buildId(e),i=this.nodes[t];return i||(i=this.nodes[t]=new Uae(e)),i},n.prototype.addEdge=function(e,t){var i=new sZe(e,t),r=i.getSymetric();this.edges.push(i),this.edges.push(r)},n.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})},n.prototype._removeIfDangle=function(e){var t=this;if(e.innerEdges.length<=1){var i=e.getOuterEdges().map(function(r){return r.to});this.removeNode(e),i.forEach(function(r){return t._removeIfDangle(r)})}},n.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})},n.prototype._computeNextCWEdges=function(e){var t=this;typeof e>"u"?Object.keys(this.nodes).forEach(function(i){return t._computeNextCWEdges(t.nodes[i])}):e.getOuterEdges().forEach(function(i,r){e.getOuterEdge((0===r?e.getOuterEdges().length:r)-1).symetric.next=i})},n.prototype._computeNextCCWEdges=function(e,t){for(var r,s,i=e.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],c=a.symetric,l=void 0,u=void 0;a.label===t&&(l=a),c.label===t&&(u=c),l&&u&&(u&&(s=u),l&&(s&&(s.next=l,s=void 0),r||(r=l)))}s&&(s.next=r)},n.prototype._findLabeledEdgeRings=function(){var e=[],t=0;return this.edges.forEach(function(i){if(!(i.label>=0)){e.push(i);var r=i;do{r.label=t,r=r.next}while(!i.isEqual(r));t++}}),e},n.prototype.getEdgeRings=function(){var e=this;this._computeNextCWEdges(),this.edges.forEach(function(i){i.label=void 0}),this._findLabeledEdgeRings().forEach(function(i){e._findIntersectionNodes(i).forEach(function(r){e._computeNextCCWEdges(r,i.label)})});var t=[];return this.edges.forEach(function(i){i.ring||t.push(e._findEdgeRing(i))}),t},n.prototype._findIntersectionNodes=function(e){var t=[],i=e,r=function(){var s=0;i.from.getOuterEdges().forEach(function(o){o.label===e.label&&++s}),s>1&&t.push(i.from),i=i.next};do{r()}while(!e.isEqual(i));return t},n.prototype._findEdgeRing=function(e){var t=e,i=new aZe;do{i.push(t),t.ring=i,t=t.next}while(!e.isEqual(t));return i},n.prototype.removeNode=function(e){var t=this;e.getOuterEdges().forEach(function(i){return t.removeEdge(i)}),e.innerEdges.forEach(function(i){return t.removeEdge(i)}),delete this.nodes[e.id]},n.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()}}(),ae(5013),ae(7470),ae(9475);var HE={search:function(n,e,t,i){n.cleanDirty();var r=(i=i||{}).heuristic||HE.heuristics.manhattan,s=i.closest||!1,o=function CZe(){return new Zae(function(n){return n.f})}(),a=e;for(e.h=r(e,t),o.push(e);o.size()>0;){var c=o.pop();if(c===t)return Yae(c);c.closed=!0;for(var l=n.neighbors(c),u=0,f=l.length;u<f;++u){var p=l[u];if(!p.closed&&!p.isWall()){var g=c.g+p.getCost(c),v=p.visited;(!v||g<p.g)&&(p.visited=!0,p.parent=c,p.h=p.h||r(p,t),p.g=g,p.f=p.g+p.h,n.markDirty(p),s&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),v?o.rescoreElement(p):o.push(p))}}}return s?Yae(a):[]},heuristics:{manhattan:function(n,e){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)},diagonal:function(n,e){var i=Math.sqrt(2),r=Math.abs(e.x-n.x),s=Math.abs(e.y-n.y);return 1*(r+s)+(i-2)*Math.min(r,s)}},cleanNode:function(n){n.f=0,n.g=0,n.h=0,n.visited=!1,n.closed=!1,n.parent=null}};function Bm(n,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var t=0;t<n.length;t++){this.grid[t]=[];for(var i=0,r=n[t];i<r.length;i++){var s=new zE(t,i,r[i]);this.grid[t][i]=s,this.nodes.push(s)}}this.init()}function zE(n,e,t){this.x=n,this.y=e,this.weight=t}function Zae(n){this.content=[],this.scoreFunction=n}function rO(){this._=null}function OE(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function iy(n,e){var t=e,i=e.R,r=t.U;r?r.L===t?r.L=i:r.R=i:n._=i,i.U=r,t.U=i,t.R=i.L,t.R&&(t.R.U=t),i.L=t}function ry(n,e){var t=e,i=e.L,r=t.U;r?r.L===t?r.L=i:r.R=i:n._=i,i.U=r,t.U=i,t.L=i.R,t.L&&(t.L.U=t),i.R=t}function Jae(n){for(;n.L;)n=n.L;return n}Bm.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)HE.cleanNode(this.nodes[n])},Bm.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)HE.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]},Bm.prototype.markDirty=function(n){this.dirtyNodes.push(n)},Bm.prototype.neighbors=function(n){var e=[],t=n.x,i=n.y,r=this.grid;return r[t-1]&&r[t-1][i]&&e.push(r[t-1][i]),r[t+1]&&r[t+1][i]&&e.push(r[t+1][i]),r[t]&&r[t][i-1]&&e.push(r[t][i-1]),r[t]&&r[t][i+1]&&e.push(r[t][i+1]),this.diagonal&&(r[t-1]&&r[t-1][i-1]&&e.push(r[t-1][i-1]),r[t+1]&&r[t+1][i-1]&&e.push(r[t+1][i-1]),r[t-1]&&r[t-1][i+1]&&e.push(r[t-1][i+1]),r[t+1]&&r[t+1][i+1]&&e.push(r[t+1][i+1])),e},Bm.prototype.toString=function(){for(var t,i,r,s,n=[],e=this.grid,o=0,a=e.length;o<a;o++){for(t=[],r=0,s=(i=e[o]).length;r<s;r++)t.push(i[r].weight);n.push(t.join(" "))}return n.join("\n")},zE.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},zE.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?1.41421*this.weight:this.weight},zE.prototype.isWall=function(){return 0===this.weight},Zae.prototype={push:function(n){this.content.push(n),this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),n},remove:function(n){var e=this.content.indexOf(n),t=this.content.pop();e!==this.content.length-1&&(this.content[e]=t,this.scoreFunction(t)<this.scoreFunction(n)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var e=this.content[n];n>0;){var t=(n+1>>1)-1,i=this.content[t];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[t]=e,this.content[n]=i,n=t}},bubbleUp:function(n){for(var e=this.content.length,t=this.content[n],i=this.scoreFunction(t);;){var a,r=n+1<<1,s=r-1,o=null;if(s<e&&(a=this.scoreFunction(this.content[s]))<i&&(o=s),r<e&&this.scoreFunction(this.content[r])<(null===o?i:a)&&(o=r),null===o)break;this.content[n]=this.content[o],this.content[o]=t,n=o}}},rO.prototype={constructor:rO,insert:function(n,e){var t,i,r;if(n){if(e.P=n,e.N=n.N,n.N&&(n.N.P=e),n.N=e,n.R){for(n=n.R;n.L;)n=n.L;n.L=e}else n.R=e;t=n}else this._?(n=Jae(this._),e.P=null,e.N=n,n.P=n.L=e,t=n):(e.P=e.N=null,this._=e,t=null);for(e.L=e.R=null,e.U=t,e.C=!0,n=e;t&&t.C;)t===(i=t.U).L?(r=i.R)&&r.C?(t.C=r.C=!1,i.C=!0,n=i):(n===t.R&&(iy(this,t),t=(n=t).U),t.C=!1,i.C=!0,ry(this,i)):(r=i.L)&&r.C?(t.C=r.C=!1,i.C=!0,n=i):(n===t.L&&(ry(this,t),t=(n=t).U),t.C=!1,i.C=!0,iy(this,i)),t=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,s,o,e=n.U,i=n.L,r=n.R;if(s=i?r?Jae(r):i:r,e?e.L===n?e.L=s:e.R=s:this._=s,i&&r?(o=s.C,s.C=n.C,s.L=i,i.U=s,s!==r?(e=s.U,s.U=n.U,e.L=n=s.R,s.R=r,r.U=s):(s.U=e,e=s,n=s.R)):(o=n.C,n=s),n&&(n.U=e),!o){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===e.L){if((t=e.R).C&&(t.C=!1,e.C=!0,iy(this,e),t=e.R),t.L&&t.L.C||t.R&&t.R.C){(!t.R||!t.R.C)&&(t.L.C=!1,t.C=!0,ry(this,t),t=e.R),t.C=e.C,e.C=t.R.C=!1,iy(this,e),n=this._;break}}else if((t=e.L).C&&(t.C=!1,e.C=!0,ry(this,e),t=e.L),t.L&&t.L.C||t.R&&t.R.C){(!t.L||!t.L.C)&&(t.R.C=!1,t.C=!0,iy(this,t),t=e.L),t.C=e.C,e.C=t.L.C=!1,ry(this,e),n=this._;break}t.C=!0,n=e,e=e.U}while(!n.C);n&&(n.C=!1)}}};const e1e=rO;function sy(n,e,t,i){var r=[null,null],s=Tl.push(r)-1;return r.left=n,r.right=e,t&&NE(r,n,e,t),i&&NE(r,e,n,i),Nu[n.index].halfedges.push(s),Nu[e.index].halfedges.push(s),r}function oy(n,e,t){var i=[e,t];return i.left=n,i}function NE(n,e,t,i){n[0]||n[1]?n.left===t?n[1]=i:n[0]=i:(n[0]=i,n.left=e,n.right=t)}function SZe(n,e,t,i,r){var _,s=n[0],o=n[1],a=s[0],c=s[1],f=0,p=1,g=o[0]-a,v=o[1]-c;if(_=e-a,g||!(_>0)){if(_/=g,g<0){if(_<f)return;_<p&&(p=_)}else if(g>0){if(_>p)return;_>f&&(f=_)}if(_=i-a,g||!(_<0)){if(_/=g,g<0){if(_>p)return;_>f&&(f=_)}else if(g>0){if(_<f)return;_<p&&(p=_)}if(_=t-c,v||!(_>0)){if(_/=v,v<0){if(_<f)return;_<p&&(p=_)}else if(v>0){if(_>p)return;_>f&&(f=_)}if(_=r-c,v||!(_<0)){if(_/=v,v<0){if(_>p)return;_>f&&(f=_)}else if(v>0){if(_<f)return;_<p&&(p=_)}return!(f>0)&&!(p<1)||(f>0&&(n[0]=[a+f*g,c+f*v]),p<1&&(n[1]=[a+p*g,c+p*v])),!0}}}}}function EZe(n,e,t,i,r){var s=n[1];if(s)return!0;var _,w,o=n[0],a=n.left,c=n.right,l=a[0],u=a[1],f=c[0],p=c[1],g=(l+f)/2;if(p===u){if(g<e||g>=i)return;if(l>f){if(o){if(o[1]>=r)return}else o=[g,t];s=[g,r]}else{if(o){if(o[1]<t)return}else o=[g,r];s=[g,t]}}else if(w=(u+p)/2-(_=(l-f)/(p-u))*g,_<-1||_>1)if(l>f){if(o){if(o[1]>=r)return}else o=[(t-w)/_,t];s=[(r-w)/_,r]}else{if(o){if(o[1]<t)return}else o=[(r-w)/_,r];s=[(t-w)/_,t]}else if(u<p){if(o){if(o[0]>=i)return}else o=[e,_*e+w];s=[i,_*i+w]}else{if(o){if(o[0]<e)return}else o=[i,_*i+w];s=[e,_*e+w]}return n[0]=o,n[1]=s,!0}function DZe(n,e){var t=n.site,i=e.left,r=e.right;return t===r&&(r=i,i=t),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(t===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function t1e(n,e){return e[+(e.left!==n.site)]}function IZe(n,e){return e[+(e.left===n.site)]}var sO,n1e=[];function kZe(){OE(this),this.x=this.y=this.arc=this.site=this.cy=null}function km(n){var e=n.P,t=n.N;if(e&&t){var i=e.site,r=n.site,s=t.site;if(i!==s){var o=r[0],a=r[1],c=i[0]-o,l=i[1]-a,u=s[0]-o,f=s[1]-a,p=2*(c*f-l*u);if(!(p>=-OZe)){var g=c*c+l*l,v=u*u+f*f,_=(f*g-l*v)/p,w=(c*v-u*g)/p,b=n1e.pop()||new kZe;b.arc=n,b.site=r,b.x=_+o,b.y=(b.cy=w+a)+Math.sqrt(_*_+w*w),n.circle=b;for(var x=null,M=ay._;M;)if(b.y<M.y||b.y===M.y&&b.x<=M.x){if(!M.L){x=M.P;break}M=M.L}else{if(!M.R){x=M;break}M=M.R}ay.insert(x,b),x||(sO=b)}}}}function Fm(n){var e=n.circle;e&&(e.P||(sO=e.N),ay.remove(e),n1e.push(e),OE(e),n.circle=null)}var i1e=[];function FZe(){OE(this),this.edge=this.site=this.circle=null}function r1e(n){var e=i1e.pop()||new FZe;return e.site=n,e}function oO(n){Fm(n),Pm.remove(n),i1e.push(n),OE(n)}function PZe(n){var e=n.circle,t=e.x,i=e.cy,r=[t,i],s=n.P,o=n.N,a=[n];oO(n);for(var c=s;c.circle&&Math.abs(t-c.circle.x)<p1&&Math.abs(i-c.circle.cy)<p1;)s=c.P,a.unshift(c),oO(c),c=s;a.unshift(c),Fm(c);for(var l=o;l.circle&&Math.abs(t-l.circle.x)<p1&&Math.abs(i-l.circle.cy)<p1;)o=l.N,a.push(l),oO(l),l=o;a.push(l),Fm(l);var f,u=a.length;for(f=1;f<u;++f)NE((l=a[f]).edge,(c=a[f-1]).site,l.site,r);(l=a[u-1]).edge=sy((c=a[0]).site,l.site,null,r),km(c),km(l)}function HZe(n){for(var i,r,s,o,e=n[0],t=n[1],a=Pm._;a;)if((s=s1e(a,t)-e)>p1)a=a.L;else{if(!((o=e-zZe(a,t))>p1)){s>-p1?(i=a.P,r=a):o>-p1?(i=a,r=a.N):i=r=a;break}if(!a.R){i=a;break}a=a.R}!function LZe(n){Nu[n.index]={site:n,halfedges:[]}}(n);var c=r1e(n);if(Pm.insert(i,c),i||r){if(i===r)return Fm(i),r=r1e(i.site),Pm.insert(c,r),c.edge=r.edge=sy(i.site,c.site),km(i),void km(r);if(!r)return void(c.edge=sy(i.site,c.site));Fm(i),Fm(r);var l=i.site,u=l[0],f=l[1],p=n[0]-u,g=n[1]-f,v=r.site,_=v[0]-u,w=v[1]-f,b=2*(p*w-g*_),x=p*p+g*g,M=_*_+w*w,E=[(w*x-g*M)/b+u,(p*M-_*x)/b+f];NE(r.edge,l,v,E),c.edge=sy(l,n,null,E),r.edge=sy(n,v,null,E),km(i),km(r)}}function s1e(n,e){var t=n.site,i=t[0],r=t[1],s=r-e;if(!s)return i;var o=n.P;if(!o)return-1/0;var a=(t=o.site)[0],c=t[1],l=c-e;if(!l)return a;var u=a-i,f=1/s-1/l,p=u/l;return f?(-p+Math.sqrt(p*p-2*f*(u*u/(-2*l)-c+l/2+r-s/2)))/f+i:(i+a)/2}function zZe(n,e){var t=n.N;if(t)return s1e(t,e);var i=n.site;return i[1]===e?i[0]:1/0}var Pm,Nu,ay,Tl,p1=1e-6,OZe=1e-12;function NZe(n,e,t){return(n[0]-t[0])*(e[1]-n[1])-(n[0]-e[0])*(t[1]-n[1])}function VZe(n,e){return e[1]-n[1]||e[0]-n[0]}function o1e(n,e){var i,r,s,t=n.sort(VZe).pop();for(Tl=[],Nu=new Array(n.length),Pm=new e1e,ay=new e1e;;)if(s=sO,t&&(!s||t[1]<s.y||t[1]===s.y&&t[0]<s.x))(t[0]!==i||t[1]!==r)&&(HZe(t),i=t[0],r=t[1]),t=n.pop();else{if(!s)break;PZe(s.arc)}if(function RZe(){for(var t,i,r,s,n=0,e=Nu.length;n<e;++n)if((t=Nu[n])&&(s=(i=t.halfedges).length)){var o=new Array(s),a=new Array(s);for(r=0;r<s;++r)o[r]=r,a[r]=DZe(t,Tl[i[r]]);for(o.sort(function(c,l){return a[l]-a[c]}),r=0;r<s;++r)a[r]=i[o[r]];for(r=0;r<s;++r)i[r]=a[r]}}(),e){var o=+e[0][0],a=+e[0][1],c=+e[1][0],l=+e[1][1];(function TZe(n,e,t,i){for(var s,r=Tl.length;r--;)EZe(s=Tl[r],n,e,t,i)&&SZe(s,n,e,t,i)&&(Math.abs(s[0][0]-s[1][0])>p1||Math.abs(s[0][1]-s[1][1])>p1)||delete Tl[r]})(o,a,c,l),function BZe(n,e,t,i){var s,o,a,c,l,u,f,p,g,v,_,w,r=Nu.length,b=!0;for(s=0;s<r;++s)if(o=Nu[s]){for(a=o.site,c=(l=o.halfedges).length;c--;)Tl[l[c]]||l.splice(c,1);for(c=0,u=l.length;c<u;)_=(v=IZe(o,Tl[l[c]]))[0],w=v[1],p=(f=t1e(o,Tl[l[++c%u]]))[0],g=f[1],(Math.abs(_-p)>p1||Math.abs(w-g)>p1)&&(l.splice(c,0,Tl.push(oy(a,v,Math.abs(_-n)<p1&&i-w>p1?[n,Math.abs(p-n)<p1?g:i]:Math.abs(w-i)<p1&&t-_>p1?[Math.abs(g-i)<p1?p:t,i]:Math.abs(_-t)<p1&&w-e>p1?[t,Math.abs(p-t)<p1?g:e]:Math.abs(w-e)<p1&&_-n>p1?[Math.abs(g-e)<p1?p:n,e]:null))-1),++u);u&&(b=!1)}if(b){var x,M,E,I=1/0;for(s=0,b=null;s<r;++s)(o=Nu[s])&&(E=(x=(a=o.site)[0]-n)*x+(M=a[1]-e)*M)<I&&(I=E,b=o);if(b){var k=[n,e],O=[n,i],R=[t,i],P=[t,e];b.halfedges.push(Tl.push(oy(a=b.site,k,O))-1,Tl.push(oy(a,O,R))-1,Tl.push(oy(a,R,P))-1,Tl.push(oy(a,P,k))-1)}}for(s=0;s<r;++s)(o=Nu[s])&&(o.halfedges.length||delete Nu[s])}(o,a,c,l)}this.edges=Tl,this.cells=Nu,Pm=ay=Tl=Nu=null}o1e.prototype={constructor:o1e,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(i){return t1e(e,n[i])});return t.data=e.site.data,t})},triangles:function(){var n=[],e=this.edges;return this.cells.forEach(function(t,i){if(a=(s=t.halfedges).length)for(var s,a,c,r=t.site,o=-1,l=e[s[a-1]],u=l.left===r?l.right:l.left;++o<a;)c=u,u=(l=e[s[o]]).left===r?l.right:l.left,c&&u&&i<c.index&&i<u.index&&NZe(r,c,u)<0&&n.push([r.data,c.data,u.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,e,t){for(var r,a,i=this,s=i._found||0,o=i.cells.length;!(a=i.cells[s]);)if(++s>=o)return null;var c=n-a.site[0],l=e-a.site[1],u=c*c+l*l;do{a=i.cells[r=s],s=null,a.halfedges.forEach(function(f){var p=i.edges[f],g=p.left;if(g!==a.site&&g||(g=p.right)){var v=n-g[0],_=e-g[1],w=v*v+_*_;w<u&&(u=w,s=g.index)}})}while(null!==s);return i._found=r,null==t||u<=t*t?a.site:null}};var A1e=ae(9855);function K6(){return new VE}function VE(){this.reset()}ae(770),VE.prototype={constructor:VE,reset:function(){this.s=this.t=0},add:function(n){v1e(UE,n,this.t),v1e(this,UE.s,this.s),this.s?this.t+=UE.t:this.s=UE.t},valueOf:function(){return this.s}};var UE=new VE;function v1e(n,e,t){var i=n.s=e+t,r=i-e;n.t=e-(i-r)+(t-r)}var B1=Math.PI,Z3=B1/2,Hm=2*B1,ja=B1/180,cy=(Math,Math.atan),zm=Math.atan2,xo=Math.cos,Bs=(Math,Math,Math,Math,Math,Math.sin),od=(Math,Math.sqrt);Math;function Om(n){return n>1?Z3:n<-1?-Z3:Math.asin(n)}function yO(n,e){return[n>B1?n-Hm:n<-B1?n+Hm:n,e]}function W1e(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}K6(),K6(),K6(),yO.invert=yO,function _Je(n){1===n.length&&(n=function yJe(n){return function(e,t){return W1e(n(e),t)}}(n))}(W1e),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);K6();function OO(){}function Ace(n){return function(e,t){var i=xo(e),r=xo(t),s=n(i*r);return[s*r*Bs(e),s*Bs(t)]}}function vy(n){return function(e,t){var i=od(e*e+t*t),r=n(i),s=Bs(r),o=xo(r);return[zm(e*s,i*o),Om(i&&t*s/i)]}}K6(),K6(),K6(),K6(),function pce(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}(4.5),OO.prototype={constructor:OO,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},xo(30*ja),function gce(n){return function(e){var t=new OO;for(var i in n)t[i]=n[i];return t.stream=e,t}}({point:function(n,e){this.stream.point(n*ja,e*ja)}});var vce=Ace(function(n){return od(2/(1+n))});vce.invert=vy(function(n){return 2*Om(n/2)});var _ce=Ace(function(n){return(n=function tJe(n){return n>1?0:n<-1?B1:Math.acos(n)}(n))&&n/Bs(n)});function VO(n,e){return[n,e]}_ce.invert=vy(function(n){return n}),VO.invert=VO,vy(cy),vy(Om),vy(function(n){return 2*cy(n)});let pT=(()=>{class n{hull(t){const i=new X3,r=S4(t.map(a=>Ou(a))),s=Zqe(r);return i.readFeatures(s)[0].getGeometry()}getCenterOfMass(t){const i=new X3,r=dXe(W6([t]));return i.readFeatures(r)[0].getGeometry()}lineIntersect(t,i){const r=new X3,s=H0(t.getCoordinates()),o=H0(i.getCoordinates()),a=fae(s,o);return r.readFeatures(a)[0].getGeometry()}coordsDissolveToPolygon(t){const i=new X3;var s=function uet(n,e){if(!Sz(e=e||{}))throw new Error("options is invalid");var t=e.propertyName;!function eqe(n,e,t){if(!n)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!n||"FeatureCollection"!==n.type)throw new Error("Invalid input to "+t+", FeatureCollection required");for(var i=0,r=n.features;i<r.length;i++){var s=r[i];if(!s||"Feature"!==s.type||!s.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!s.geometry||s.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+s.geometry.type)}}(n,"Polygon","dissolve");var i=[];if(!e.propertyName)return yae(xz(A1e.union.apply(null,n.features.map(function(c){return c.geometry.coordinates}))));var r={};Z_(n,function(c){Object.prototype.hasOwnProperty.call(r,c.properties[t])||(r[c.properties[t]]=[]),r[c.properties[t]].push(c)});for(var s=Object.keys(r),o=0;o<s.length;o++){var a=xz(A1e.union.apply(null,r[s[o]].map(function(c){return c.geometry.coordinates})));a.properties[t]=s[o],i.push(a)}return yae(S4(i))}(S4([W6([t])]));return i.readFeatures(s)[0].getGeometry()}pointToLineDistance(t,i){const r=new X3,a=function wXe(n,e,t){void 0===t&&(t={});var i=Ou([1/0,1/0],{dist:1/0}),r=0;return sd(n,function(s){for(var o=Im(s),a=0;a<o.length-1;a++){var c=Ou(o[a]);c.properties.dist=$6(e,c,t);var l=Ou(o[a+1]);l.properties.dist=$6(e,l,t);var u=$6(c,l,t),f=Math.max(c.properties.dist,l.properties.dist),p=oae(c,l),g=sae(e,f,p+90,t),v=sae(e,f,p-90,t),_=fae(H0([g.geometry.coordinates,v.geometry.coordinates]),H0([c.geometry.coordinates,l.geometry.coordinates])),w=null;_.features.length>0&&((w=_.features[0]).properties.dist=$6(e,w,t),w.properties.location=r+$6(c,w,t)),c.properties.dist<i.properties.dist&&((i=c).properties.index=a,i.properties.location=r),l.properties.dist<i.properties.dist&&((i=l).properties.index=a+1,i.properties.location=r+u),w&&w.properties.dist<i.properties.dist&&((i=w).properties.index=a),r+=u}}),i}(Y3({type:"LineString",coordinates:i}),Y3({type:"Point",coordinates:t}));return r.readFeatures(a)[0].getGeometry()}closestPointBetweenPointsAndPolygon(t,i){return t.map((o,a)=>{const c=o.getCoordinates(),l=i.getClosestPoint(c);return{housePoint:c,linePoint:l,dist:cn(Ma(l,c),0),i:a}}).sort((o,a)=>o.dist-a.dist)[0]}closestPointBetweenLineAndPolygon(t,i){return i.getCoordinates()[0].map((o,a)=>{const c=t.getClosestPoint(o);return{housePoint:o,linePoint:c,dist:cn(Ma(c,o),0),i:a}}).sort((o,a)=>o.dist-a.dist)[0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),No=(()=>{class n{constructor(t,i,r){this.appService=t,this.turfService=i,this.cookieService=r,this.cookieKey="house",this.house$=new Vs(this.getStore(UH)),this.roomKeys=this.house$.value.partsFlatten.filter(s=>s instanceof J1).map(s=>s.selector),this.wallKeys=this.house$.value.partsFlatten.filter(s=>s instanceof si).map(s=>s.selector),this.doorKeys=this.house$.value.partsFlatten.filter(s=>s instanceof ga).map(s=>s.selector),this.windowKeys=this.house$.value.partsFlatten.filter(s=>s instanceof Wa).map(s=>s.selector),this.sensorKeys=this.house$.value.partsFlatten.filter(s=>s instanceof Gt).map(s=>s.selector).sort((s,o)=>s.localeCompare(o)),this.exampleKeys=this.house$.value.partsFlatten.filter(s=>s instanceof gm).map(s=>s.selector).sort((s,o)=>s.localeCompare(o)),this.house$.subscribe(s=>{this.setStore()})}getStore(t){const i=this.cookieService.get(this.cookieKey);if(""===i)return new Pse(t);const r=JSON.parse(i),s={...t};return Object.keys(UH).forEach(a=>{"parts"===a||("orientation"===a?(s[a].lat=r[a].lat,s[a].lng=r[a].lng,s[a].rotation=r[a].rotation):"garage"===a?(s[a].width=r[a].width,s[a].length=r[a].length,s[a].orientation=r[a].orientation):s[a]=r[a])}),new Pse(s)}setStore(){let t={};Object.keys(UH).forEach(i=>{"parts"!==i&&(t[i]=this.house$.value[i])}),this.cookieService.set(this.cookieKey,JSON.stringify(t))}update(t="house",i,r,s){console.log("updates");const o=this.house$.value;"house"===t&&(o[i]=r),"stair"===t&&(o.stair[i]=r),"cross"===t&&(o.cross[i]=r),"construction"===t&&(o.construction[i]=r),o.calculateHouse(),o.calculateStats(),this.house$.next(o),void 0!==s&&(this.appService.tag$.next(s),clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.appService.tag$.next(void 0)},600))}destroyParts(){const t=r=>{r.parts.forEach(function(){var s=(0,wi.Z)(function*(o){o.svg=void 0,void 0!==o.parts&&t(o)});return function(o){return s.apply(this,arguments)}}())},i=this.house$.value;t(i),t(i.cross),t(i.stair)}getGroups(t){return[...new Set(Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof Gt).filter(r=>r.sensorType===t).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s)}getOutlets(t){return Object.values(this.house$.value.partsFlatten).filter(r=>r instanceof Gt).filter(r=>r.sensorType===t).map(r=>r.amount).reduce((r,s)=>r+s,0)}getCable(t,i=1){return cn(Object.values(this.house$.value.partsFlatten).filter(s=>s instanceof Gt).filter(s=>s.sensorType===t).map(s=>s.cableLength).reduce((s,o)=>s+o,0),i)}getWallLength(){const t=this.house$.value;return{innerLength:Math.ceil(Iu(Object.values(t.partsFlatten).filter(s=>s instanceof si).map(s=>{let o=0;return s.type===Hn.inner&&(o+=s.getLength(lt.out)),o+=s.getLength(lt.in),o}))),outerLength:Math.ceil(Iu(Object.values(t.partsFlatten).filter(s=>s instanceof si).filter(s=>s.type===Hn.outer).map(s=>s.getLength(lt.out)),1))}}getWallArea(){const t=this.house$.value;return{innerArea:Math.ceil(Iu(Object.values(t.partsFlatten).filter(s=>s instanceof si).map(s=>{let o=0;return s.type===Hn.inner&&(o+=s.getArea(lt.out)),o+=s.getArea(lt.in),o}))),outerArea:Math.ceil(Iu(Object.values(t.partsFlatten).filter(s=>s instanceof si).filter(s=>s.type===Hn.outer).map(s=>s.getArea(lt.out)),1))}}getT(t,i,r,s=(()=>!0),o=!0){const a=VH(),c=Object.values(this.house$.value.partsFlatten.filter(l=>l instanceof t).filter(l=>s(l)).reduce((l,u)=>{const f=i.map(p=>`${u[p]}`).join(",");return f in l||(l[f]={count:0,part:u}),l[f].count+=t!==Gt||o?1:u.getLength(),l},{})).map(l=>{const u=new Sa(r(l.part));return u.amount=cn(l.count,1),u.uuid=a,u});if(c.length>1){const l=new KS({uuid:a,name:`${c[0].name}`,costs:c});return l[c[0].name]=!1,l}{if(!c[0])return;const l=c[0];return l.uuid=void 0,l}}fromLonLatToLocal(t){const i=this.house$.value,{lat:r,lng:s}=i.orientation,[o,a]=xm([s,r]);return pH(t,[o,a],-i.orientation.rotation)}fromLocalToLonLat(t,i,r){const{lat:o,lng:a}=i;var c=6378.137,l=Math.PI;const u=o+(t=[t[0]-r[0],t[1]-r[1]])[1]/c*(180/l)/1e3;return[xm([a+t[0]/c*(180/l)/Math.cos(o*l/180)/1e3,u]),t]}getGaragePolygon(){const i=this.house$.value.garage,r=i.orientation,o=[[0,0],[0,i.width],[i.length,i.width],[i.length,0],[0,0]].map(l=>pH(l,[0,0],180-r.rotation)).map(l=>this.fromLocalToLonLat(l,r,[0,0])),a=o.map(l=>l[0]);return a.push(a[0]),{polygon:this.turfService.coordsDissolveToPolygon(a),localAndGlobal:o}}getFootPrintPolygon(){const t=this.house$.value,i=t.orientation,o=t.partsFlatten.filter(p=>p instanceof si&&p.type===Hn.outer).filter(p=>p.floor===at.all).flatMap(p=>p.sides[lt.out]).map(p=>pH(p,t.centerHouse,180-i.rotation)).map(p=>this.fromLocalToLonLat(p,i,t.centerHouse)),a=o.map(p=>p[0]);a.push(a[0]);const c=this.turfService.coordsDissolveToPolygon(a),l=new zu([xh(a[2],a[3]),xh(a[14],a[15])]),u=new zu([xh(a[8],a[9]),xh(a[20],a[21])]);return{polygon:c,roofLines:new xE([l,u]),localAndGlobal:o}}}return n.\u0275fac=function(t){return new(t||n)(Xe(io),Xe(pT),Xe(U3))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),X6=(()=>{class n{constructor(t,i){this.overlay=t,this.houseService=i,this.tooltipHTML$=new Vs(void 0),this.unsubscribe=new $e}attachPopup([t,i],r){this.detachOverlay(),this.origin=r instanceof Gt?r.svgIcon.node():r.svg.node(),this.overlayRef=this.overlay.create({positionStrategy:this.getPositionStrategy([t,i]),scrollStrategy:this.overlay.scrollStrategies.reposition(),hasBackdrop:!1}),this.overlayRef.backdropClick().pipe(Ua(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.attachOverlay(r)}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.detach()}updateOverlay(){}attachOverlay(t){if(this.overlayRef&&!this.overlayRef.hasAttached()){const i=new iv(Vje);this.componentRef=this.overlayRef.attach(i),this.componentRef.instance.html=t.tooltip(this.houseService.house$.value)}}getPositionStrategy([t,i]){return this.overlay.position().flexibleConnectedTo(this.origin).withPositions([new Ix({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"},0,-20),new Ix({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"},0,20,"flipped")]).withPush(!0)}}return n.\u0275fac=function(t){return new(t||n)(Xe(Mu),Xe(No))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),met=(()=>{class n{constructor(t,i){this.appService=t,this.houseService=i,this.appService.states$.subscribe(r=>{this.states=r,this.house=this.houseService.house$.value,this.cross=this.house.cross,this.filterOut(),this.appService.update$.next()})}updateStateBasedOnSection(t,i){if(this.section===t)return;this.section=t;const r=this.appService.states$.value;this.buildState(r,[Z2.grid],[Ct.mainBasics].includes(t)),this.buildState(r,[Z2.silhouette],[Ct.roofEdge].includes(t)),this.buildState(r,[Z2.measure,Z2.minimumHeight],[Ct.stairBasic,Ct.stairCheck,Ct.stairPlan,Ct.mainBasics].includes(t)),this.buildState(r,[Z2.doors],![Ct.mainPassiv,Ct.mainWelcome].includes(t)),this.buildState(r,[Ye.socket,Ye.perilex],[Ct.wiredPower].includes(t)),this.buildState(r,[Ye.poe,Ye.ethernet,Ye.wifi],[Ct.wiredEthernet].includes(t)),this.buildState(r,[Ye.ventIn,Ye.ventOut],[Ct.wiredVent].includes(t)),this.buildState(r,[Ye.dimmer,Ye.dlc,Ye.lightBulb,Ye.lightSwitch],[Ct.wiredLight].includes(t)),this.buildState(r,[Ye.toilet,Ye.shower,Ye.drain,Ye.waterCold,Ye.waterRain,Ye.waterWarm],[Ct.wiredWater].includes(t)),this.buildState(r,[Ye.camera,Ye.alarm,Ye.smoke],[Ct.wiredSafety].includes(t)),this.buildState(r,[Ye.pir],[Ct.wiredExtra,Ct.wiredSafety].includes(t)),this.buildState(r,[Ye.blinds,Ye.temperature],[Ct.wiredExtra].includes(t)),this.statesForConstruction(r,t),this.appService.commitState(r)}statesForConstruction(t,i){const r=[];r.push(Ct.constructionWallGips),this.buildState(t,[Oi.gips],[...r].includes(i)),r.push(Ct.constructionWallService),this.buildState(t,[Oi.serviceBeams,Oi.serviceInsulation],[...r].includes(i)),r.push(Ct.constructionWallFacade),this.buildState(t,[Oi.facade],[...r].includes(i)),r.push(Ct.constructionWallSpace),this.buildState(t,[Oi.space],[...r].includes(i)),r.push(Ct.constructionRoofTiles),this.buildState(t,[Oi.roofTiles],[...r].includes(i)),r.push(Ct.constructionRoofSpace),this.buildState(t,[Oi.roofSpace],[...r].includes(i)),r.push(Ct.constructionRoofOuterSheet),r.push(Ct.constructionWallOuterSheet),this.buildState(t,[Oi.outerSheet,Oi.roofOuterSheets],[...r].includes(i)),r.push(Ct.constructionWallInsulation),this.buildState(t,[Oi.insulation],[...r].includes(i)),r.push(Ct.constructionRoofInside),this.buildState(t,[Oi.roofOSB],[...r].includes(i)),r.push(Ct.constructionRoofJoist),this.buildState(t,[Oi.roofJoists],[...r].includes(i)),r.push(Ct.constructionRoofRidge),this.buildState(t,[Oi.roofRidge],[...r].includes(i)),r.push(Ct.constructionFloor),this.buildState(t,[Oi.topFloorJoists,Oi.topFloorOSB],[...r].includes(i)),r.push(Ct.constructionFloorLVL),this.buildState(t,[Oi.floorLVL],[...r].includes(i)),r.push(Ct.constructionWallTape),this.buildState(t,[Oi.tapes],[...r].includes(i)),r.push(Ct.constructionWallOSB),this.buildState(t,[Oi.osbWall],[...r].includes(i)),r.push(Ct.constructionWallJoists),this.buildState(t,[Oi.joists],[...r].includes(i)),r.push(Ct.constructionWallSole),this.buildState(t,[Oi.sole],[...r].includes(i)),r.push(Ct.constructionGroundFloor),this.buildState(t,[Oi.groundFloor],[...r].includes(i)),r.push(Ct.constructionCrawlerSpace),this.buildState(t,[Oi.crawlerSpace],[...r].includes(i)),r.push(Ct.constructionFoundation),this.buildState(t,[Oi.foundation],[...r].includes(i))}filterOut(){this.house.tower.footprintVisible=this.states[Z2.towerFootprint],this.house.partsFlatten.filter(t=>t instanceof ga).forEach(t=>t.visible=this.states[Z2.doors]),this.house.partsFlatten.filter(t=>t instanceof si).filter(t=>t.type===Hn.theoretic).forEach(t=>t.outOfDesign=!this.states[Z2.theoreticalWalls]),[...this.house.parts,...this.cross.parts,...this.house.stair.parts].filter(t=>t instanceof Qa).forEach(t=>t.visible=this.states[Z2.measure]),this.house.parts.filter(t=>t.selector.includes("house-stramien-")).forEach(t=>{t.visible=this.states[Z2.stramien]}),this.house.parts.filter(t=>t.selector.includes("grid-index")).forEach(t=>{t.visible=this.states[Z2.grid]}),this.house.partsFlatten.filter(t=>t instanceof Gt).forEach(t=>{t.visible=this.states[t.sensorType]}),this.house.partsFlatten.filter(t=>t instanceof gm).forEach(t=>{t.visible=this.states[Z2.examplePlan]})}buildState(t,i,r){i.forEach(s=>{t[s]=r})}getSide(t){return[yo.cross].includes(t)?d6.left:[yo.none].includes(t)?d6.none:d6.right}setGraphic(t){if([Ct.mainWelcome,Ct.mainPassiv,Ct.mainBasics,Ct.mainExtensions,Ct.mainTower,Ct.wiredWelcome,Ct.wiredPower,Ct.wiredEthernet,Ct.wiredExtra,Ct.wiredLight,Ct.wiredSafety,Ct.wiredVent,Ct.wiredWater].includes(t))return yo.house2D;if([Ct.roof70,Ct.roofBasics,Ct.roofChoice,Ct.roofCircle,Ct.roofEdge,Ct.roofIntermezzo,Ct.EndOfPageHouse].includes(t))return yo.cross;if([Ct.roof70].includes(t))this.houseService.update("cross","viewedRoofStyle",u3.roof70);else if([Ct.roofBasics,Ct.roofCircle].includes(t))this.houseService.update("cross","viewedRoofStyle",u3.roofCircle);else{if([Ct.stairStart,Ct.stairBasic,Ct.stairCheck].includes(t))return yo.stairCross;if([Ct.stairPlan].includes(t))return yo.stairPlan;if([Ct.constructionParameters,Ct.facadeStart,Ct.facadeWindow,Ct.facadeDoor].includes(t))return yo.none;if([Ct.constructionWelcome,Ct.constructionFoundation,Ct.constructionCrawlerSpace,Ct.constructionFloor,Ct.constructionRoof,Ct.constructionWallFinish,Ct.constructionWallSole,Ct.constructionWallJoists,Ct.constructionWallOSB,Ct.constructionWallTape,Ct.constructionWallOuterSheet,Ct.constructionWallSpace,Ct.constructionWallFacade,Ct.constructionWallInsulation,Ct.constructionWallService,Ct.constructionWallGips,Ct.constructionFloor,Ct.constructionFloorLVL,Ct.constructionGroundFloor,Ct.constructionRoofRidge,Ct.constructionRoofJoist,Ct.constructionRoofInside,Ct.constructionRoofOuterSheet,Ct.constructionRoofSpace,Ct.constructionRoofTiles].includes(t))return yo.construction;if([Ct.House3D].includes(t))return yo.House3D;if([Ct.installationDrinkWater,Ct.installationElectricity,Ct.installationGreyWater,Ct.installationHeating,Ct.installationSmartHome,Ct.installationVentilation].includes(t))return yo.none;if(t.startsWith("energy"))return yo.scrollerHeat}return yo.none}}return n.\u0275fac=function(t){return new(t||n)(Xe(io),Xe(No))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var gT={prefix:"fab",iconName:"discord",icon:[640,512,[],"f392","M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"]},GO={prefix:"fab",iconName:"patreon",icon:[512,512,[],"f3d9","M512 194.8c0 101.3-82.4 183.8-183.8 183.8-101.7 0-184.4-82.4-184.4-183.8 0-101.6 82.7-184.3 184.4-184.3C429.6 10.5 512 93.2 512 194.8zM0 501.5h90v-491H0v491z"]},QO={prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]},WO={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},jO={prefix:"fab",iconName:"youtube",icon:[576,512,[61802],"f167","M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"]};function a2e(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function vi(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a2e(Object(t),!0).forEach(function(i){m2(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a2e(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function mT(n){return(mT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function c2e(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function m2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $O(n,e){return function Y1t(n){if(Array.isArray(n))return n}(n)||function J1t(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,a,i=[],r=!0,s=!1;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(c){s=!0,a=c}finally{try{!r&&null!=t.return&&t.return()}finally{if(s)throw a}}return i}}(n,e)||l2e(n,e)||function tct(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yy(n){return function X1t(n){if(Array.isArray(n))return KO(n)}(n)||function Z1t(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||l2e(n)||function ect(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l2e(n,e){if(n){if("string"==typeof n)return KO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KO(n,e)}}function KO(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var u2e=function(){},qO={},h2e={},f2e=null,d2e={mark:u2e,measure:u2e};try{typeof window<"u"&&(qO=window),typeof document<"u"&&(h2e=document),typeof MutationObserver<"u"&&(f2e=MutationObserver),typeof performance<"u"&&(d2e=performance)}catch{}var _T,yT,wT,bT,xT,p2e=(qO.navigator||{}).userAgent,g2e=void 0===p2e?"":p2e,Y6=qO,$a=h2e,m2e=f2e,vT=d2e,ld=!!$a.documentElement&&!!$a.head&&"function"==typeof $a.addEventListener&&"function"==typeof $a.createElement,A2e=~g2e.indexOf("MSIE")||~g2e.indexOf("Trident/"),ud="___FONT_AWESOME___",_2e="svg-inline--fa",I5="data-fa-i2svg",YO="data-fa-pseudo-element",ZO="data-prefix",JO="data-icon",y2e="fontawesome-i2svg",sct=["HTML","HEAD","STYLE","SCRIPT"],w2e=function(){try{return!0}catch{return!1}}(),Ka="classic",tc="sharp",eN=[Ka,tc];function wy(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[Ka]}})}var by=wy((m2(_T={},Ka,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),m2(_T,tc,{fa:"solid",fass:"solid","fa-solid":"solid"}),_T)),xy=wy((m2(yT={},Ka,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),m2(yT,tc,{solid:"fass"}),yT)),Cy=wy((m2(wT={},Ka,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),m2(wT,tc,{fass:"fa-solid"}),wT)),oct=wy((m2(bT={},Ka,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),m2(bT,tc,{"fa-solid":"fass"}),bT)),act=/fa(s|r|l|t|d|b|k|ss)?[\-\ ]/,b2e="fa-layers-text",cct=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,lct=wy((m2(xT={},Ka,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),m2(xT,tc,{900:"fass"}),xT)),x2e=[1,2,3,4,5,6,7,8,9,10],uct=x2e.concat([11,12,13,14,15,16,17,18,19,20]),hct=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],My=new Set;Object.keys(xy[Ka]).map(My.add.bind(My)),Object.keys(xy[tc]).map(My.add.bind(My));var fct=[].concat(eN,yy(My),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","duotone-group","swap-opacity","primary","secondary"]).concat(x2e.map(function(n){return"".concat(n,"x")})).concat(uct.map(function(n){return"w-".concat(n)})),Sy=Y6.FontAwesomeConfig||{};$a&&"function"==typeof $a.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=$O(n,2),i=e[1],r=function pct(n){return""===n||"false"!==n&&("true"===n||n)}(function dct(n){var e=$a.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(Sy[i]=r)});var C2e={styleDefault:"solid",familyDefault:"classic",cssPrefix:"fa",replacementClass:_2e,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Sy.familyPrefix&&(Sy.cssPrefix=Sy.familyPrefix);var Qm=vi(vi({},C2e),Sy);Qm.autoReplaceSvg||(Qm.observeMutations=!1);var ki={};Object.keys(C2e).forEach(function(n){Object.defineProperty(ki,n,{enumerable:!0,set:function(t){Qm[n]=t,Ey.forEach(function(i){return i(ki)})},get:function(){return Qm[n]}})}),Object.defineProperty(ki,"familyPrefix",{enumerable:!0,set:function(e){Qm.cssPrefix=e,Ey.forEach(function(t){return t(ki)})},get:function(){return Qm.cssPrefix}}),Y6.FontAwesomeConfig=ki;var Ey=[],U0={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Ty(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function Wm(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function tN(n){return n.classList?Wm(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function M2e(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function CT(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function nN(n){return n.size!==U0.size||n.x!==U0.x||n.y!==U0.y||n.rotate!==U0.rotate||n.flipX||n.flipY}function S2e(){var n="fa",e=_2e,t=ki.cssPrefix,i=ki.replacementClass,r=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(t!==n||i!==e){var s=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(i))}return r}var E2e=!1;function iN(){ki.autoAddCss&&!E2e&&(function Act(n){if(n&&ld){var e=$a.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=$a.head.childNodes,i=null,r=t.length-1;r>-1;r--){var s=t[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}$a.head.insertBefore(e,i)}}(S2e()),E2e=!0)}var xct={mixout:function(){return{dom:{css:S2e,insertCss:iN}}},hooks:function(){return{beforeDOMElementCreation:function(){iN()},beforeI2svg:function(){iN()}}}},hd=Y6||{};hd[ud]||(hd[ud]={}),hd[ud].styles||(hd[ud].styles={}),hd[ud].hooks||(hd[ud].hooks={}),hd[ud].shims||(hd[ud].shims=[]);var kh=hd[ud],T2e=[],MT=!1;function Mct(n){!ld||(MT?setTimeout(n,0):T2e.push(n))}function Ly(n){var e=n.tag,t=n.attributes,i=void 0===t?{}:t,r=n.children,s=void 0===r?[]:r;return"string"==typeof n?M2e(n):"<".concat(e," ").concat(function _ct(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(M2e(n[t]),'" ')},"").trim()}(i),">").concat(s.map(Ly).join(""),"</").concat(e,">")}function L2e(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}ld&&((MT=($a.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test($a.readyState))||$a.addEventListener("DOMContentLoaded",function n(){$a.removeEventListener("DOMContentLoaded",n),MT=1,T2e.map(function(e){return e()})}));var rN=function(e,t,i,r){var c,l,u,s=Object.keys(e),o=s.length,a=void 0!==r?function(e,t){return function(i,r,s,o){return e.call(t,i,r,s,o)}}(t,r):t;for(void 0===i?(c=1,u=e[s[0]]):(c=0,u=i);c<o;c++)u=a(u,e[l=s[c]],l,e);return u};function sN(n){var e=function Ect(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var s=n.charCodeAt(t++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),t--)}else e.push(r)}return e}(n);return 1===e.length?e[0].toString(16):null}function D2e(n){return Object.keys(n).reduce(function(e,t){var i=n[t];return i.icon?e[i.iconName]=i.icon:e[t]=i,e},{})}function oN(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.skipHooks,r=void 0!==i&&i,s=D2e(e);"function"!=typeof kh.hooks.addPack||r?kh.styles[n]=vi(vi({},kh.styles[n]||{}),s):kh.hooks.addPack(n,D2e(e)),"fas"===n&&oN("fa",e)}var ST,ET,TT,jm=kh.styles,Lct=kh.shims,Dct=(m2(ST={},Ka,Object.values(Cy[Ka])),m2(ST,tc,Object.values(Cy[tc])),ST),aN=null,I2e={},R2e={},B2e={},k2e={},F2e={},Ict=(m2(ET={},Ka,Object.keys(by[Ka])),m2(ET,tc,Object.keys(by[tc])),ET);function Bct(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i!==n||""===r||function Rct(n){return~fct.indexOf(n)}(r)?null:r}var P2e=function(){var e=function(s){return rN(jm,function(o,a,c){return o[c]=rN(a,s,{}),o},{})};I2e=e(function(r,s,o){return s[3]&&(r[s[3]]=o),s[2]&&s[2].filter(function(c){return"number"==typeof c}).forEach(function(c){r[c.toString(16)]=o}),r}),R2e=e(function(r,s,o){return r[o]=o,s[2]&&s[2].filter(function(c){return"string"==typeof c}).forEach(function(c){r[c]=o}),r}),F2e=e(function(r,s,o){var a=s[2];return r[o]=o,a.forEach(function(c){r[c]=o}),r});var t="far"in jm||ki.autoFetchSvg,i=rN(Lct,function(r,s){var o=s[0],a=s[1],c=s[2];return"far"===a&&!t&&(a="fas"),"string"==typeof o&&(r.names[o]={prefix:a,iconName:c}),"number"==typeof o&&(r.unicodes[o.toString(16)]={prefix:a,iconName:c}),r},{names:{},unicodes:{}});B2e=i.names,k2e=i.unicodes,aN=LT(ki.styleDefault,{family:ki.familyDefault})};function cN(n,e){return(I2e[n]||{})[e]}function B5(n,e){return(F2e[n]||{})[e]}function H2e(n){return B2e[n]||{prefix:null,iconName:null}}function J6(){return aN}function LT(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.family,i=void 0===t?Ka:t,r=by[i][n],s=xy[i][n]||xy[i][r],o=n in kh.styles?n:null;return s||o||null}(function mct(n){Ey.push(n)})(function(n){aN=LT(n.styleDefault,{family:ki.familyDefault})}),P2e();var z2e=(m2(TT={},Ka,Object.keys(Cy[Ka])),m2(TT,tc,Object.keys(Cy[tc])),TT);function DT(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.skipLookups,r=void 0!==i&&i,s=(m2(e={},Ka,"".concat(ki.cssPrefix,"-").concat(Ka)),m2(e,tc,"".concat(ki.cssPrefix,"-").concat(tc)),e),o=null,a=Ka;(n.includes(s[Ka])||n.some(function(l){return z2e[Ka].includes(l)}))&&(a=Ka),(n.includes(s[tc])||n.some(function(l){return z2e[tc].includes(l)}))&&(a=tc);var c=n.reduce(function(l,u){var f=Bct(ki.cssPrefix,u);if(jm[u]?(u=Dct[a].includes(u)?oct[a][u]:u,o=u,l.prefix=u):Ict[a].indexOf(u)>-1?(o=u,l.prefix=LT(u,{family:a})):f?l.iconName=f:u!==ki.replacementClass&&u!==s[Ka]&&u!==s[tc]&&l.rest.push(u),!r&&l.prefix&&l.iconName){var p="fa"===o?H2e(l.iconName):{},g=B5(l.prefix,l.iconName);p.prefix&&(o=null),l.iconName=p.iconName||g||l.iconName,l.prefix=p.prefix||l.prefix,"far"===l.prefix&&!jm.far&&jm.fas&&!ki.autoFetchSvg&&(l.prefix="fas")}return l},{prefix:null,iconName:null,rest:[]});return(n.includes("fa-brands")||n.includes("fab"))&&(c.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(c.prefix="fad"),!c.prefix&&a===tc&&(jm.fass||ki.autoFetchSvg)&&(c.prefix="fass",c.iconName=B5(c.prefix,c.iconName)||c.iconName),("fa"===c.prefix||"fa"===o)&&(c.prefix=J6()||"fas"),c}var Pct=function(){function n(){(function $1t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function K1t(n,e,t){e&&c2e(n.prototype,e),t&&c2e(n,t),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=vi(vi({},t.definitions[a]||{}),o[a]),oN(a,o[a]);var c=Cy[Ka][a];c&&oN(c,o[a]),P2e()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var o=r[s],a=o.prefix,c=o.iconName,l=o.icon,u=l[2];t[a]||(t[a]={}),u.length>0&&u.forEach(function(f){"string"==typeof f&&(t[a][f]=l)}),t[a][c]=l}),t}}]),n}(),O2e=[],$m={},Km={},Hct=Object.keys(Km);function uN(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var s=$m[n]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(i))}),e}function k5(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=$m[n]||[];r.forEach(function(s){s.apply(null,t)})}function fd(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Km[n]?Km[n].apply(null,e):void 0}function hN(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||J6();if(e)return e=B5(t,e)||e,L2e(N2e.definitions,t,e)||L2e(kh.styles,t,e)}var N2e=new Pct,Nct={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ld?(k5("beforeI2svg",e),fd("pseudoElements2svg",e),fd("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===ki.autoReplaceSvg&&(ki.autoReplaceSvg=!0),ki.observeMutations=!0,Mct(function(){Uct({autoReplaceSvgRoot:t}),k5("watch",e)})}},Vct={icon:function(e){if(null===e)return null;if("object"===mT(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:B5(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],i=LT(e[0]);return{prefix:i,iconName:B5(i,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(ki.cssPrefix,"-"))>-1||e.match(act))){var r=DT(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||J6(),iconName:B5(r.prefix,r.iconName)||r.iconName}}if("string"==typeof e){var s=J6();return{prefix:s,iconName:B5(s,e)||e}}}},Gu={noAuto:function(){ki.autoReplaceSvg=!1,ki.observeMutations=!1,k5("noAuto")},config:ki,dom:Nct,parse:Vct,library:N2e,findIconDefinition:hN,toHtml:Ly},Uct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,i=void 0===t?$a:t;(Object.keys(kh.styles).length>0||ki.autoFetchSvg)&&ld&&ki.autoReplaceSvg&&Gu.dom.i2svg({node:i})};function IT(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return Ly(i)})}}),Object.defineProperty(n,"node",{get:function(){if(ld){var i=$a.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function fN(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,s=n.iconName,o=n.transform,a=n.symbol,c=n.title,l=n.maskId,u=n.titleId,f=n.extra,p=n.watchable,g=void 0!==p&&p,v=i.found?i:t,_=v.width,w=v.height,b="fak"===r,x=[ki.replacementClass,s?"".concat(ki.cssPrefix,"-").concat(s):""].filter(function(P){return-1===f.classes.indexOf(P)}).filter(function(P){return""!==P||!!P}).concat(f.classes).join(" "),M={children:[],attributes:vi(vi({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:x,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(_," ").concat(w)})},E=b&&!~f.classes.indexOf("fa-fw")?{width:"".concat(_/w*16*.0625,"em")}:{};g&&(M.attributes[I5]=""),c&&(M.children.push({tag:"title",attributes:{id:M.attributes["aria-labelledby"]||"title-".concat(u||Ty())},children:[c]}),delete M.attributes.title);var I=vi(vi({},M),{},{prefix:r,iconName:s,main:t,mask:i,maskId:l,transform:o,symbol:a,styles:vi(vi({},E),f.styles)}),k=i.found&&t.found?fd("generateAbstractMask",I)||{children:[],attributes:{}}:fd("generateAbstractIcon",I)||{children:[],attributes:{}},R=k.attributes;return I.children=k.children,I.attributes=R,a?function Qct(n){var t=n.iconName,i=n.children,r=n.attributes,s=n.symbol,o=!0===s?"".concat(n.prefix,"-").concat(ki.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:vi(vi({},r),{},{id:o}),children:i}]}]}(I):function Gct(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,s=n.styles,o=n.transform;if(nN(o)&&t.found&&!i.found){var l={x:t.width/t.height/2,y:.5};r.style=CT(vi(vi({},s),{},{"transform-origin":"".concat(l.x+o.x/16,"em ").concat(l.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(I)}function V2e(n){var e=n.content,t=n.width,i=n.height,r=n.transform,s=n.title,o=n.extra,a=n.watchable,c=void 0!==a&&a,l=vi(vi(vi({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});c&&(l[I5]="");var u=vi({},o.styles);nN(r)&&(u.transform=function wct(n){var e=n.transform,t=n.width,r=n.height,s=void 0===r?16:r,o=n.startCentered,a=void 0!==o&&o,c="";return c+=a&&A2e?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-s/2,"em) "):a?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(c+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var f=CT(u);f.length>0&&(l.style=f);var p=[];return p.push({tag:"span",attributes:l,children:[e]}),s&&p.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),p}function Wct(n){var e=n.content,t=n.title,i=n.extra,r=vi(vi(vi({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),s=CT(i.styles);s.length>0&&(r.style=s);var o=[];return o.push({tag:"span",attributes:r,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var dN=kh.styles;function pN(n){var e=n[0],t=n[1],s=$O(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(ki.cssPrefix,"-").concat("duotone-group")},children:[{tag:"path",attributes:{class:"".concat(ki.cssPrefix,"-").concat("secondary"),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(ki.cssPrefix,"-").concat("primary"),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var jct={found:!1,width:512,height:512};function gN(n,e){var t=e;return"fa"===e&&null!==ki.styleDefault&&(e=J6()),new Promise(function(i,r){if(fd("missingIconAbstract"),"fa"===t){var o=H2e(n)||{};n=o.iconName||n,e=o.prefix||e}if(n&&e&&dN[e]&&dN[e][n])return i(pN(dN[e][n]));(function $ct(n,e){!w2e&&!ki.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),i(vi(vi({},jct),{},{icon:ki.showMissingIcons&&n&&fd("missingIconAbstract")||{}}))})}var U2e=function(){},mN=ki.measurePerformance&&vT&&vT.mark&&vT.measure?vT:{mark:U2e,measure:U2e},Dy='FA "6.2.0"',AN_begin=function(e){return mN.mark("".concat(Dy," ").concat(e," begins")),function(){return function(e){mN.mark("".concat(Dy," ").concat(e," ends")),mN.measure("".concat(Dy," ").concat(e),"".concat(Dy," ").concat(e," begins"),"".concat(Dy," ").concat(e," ends"))}(e)}},RT=function(){};function Q2e(n){return"string"==typeof(n.getAttribute?n.getAttribute(I5):null)}function Zct(n){return $a.createElementNS("http://www.w3.org/2000/svg",n)}function Jct(n){return $a.createElement(n)}function W2e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.ceFn,i=void 0===t?"svg"===n.tag?Zct:Jct:t;if("string"==typeof n)return $a.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(o){r.setAttribute(o,n.attributes[o])});var s=n.children||[];return s.forEach(function(o){r.appendChild(W2e(o,{ceFn:i}))}),r}var BT={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(W2e(r),t)}),null===t.getAttribute(I5)&&ki.keepOriginalSource){var i=$a.createComment(function e2t(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~tN(t).indexOf(ki.replacementClass))return BT.replace(e);var r=new RegExp("".concat(ki.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(a,c){return c===ki.replacementClass||c.match(r)?a.toSvg.push(c):a.toNode.push(c),a},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),0===s.toNode.length?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}var o=i.map(function(a){return Ly(a)}).join("\n");t.setAttribute(I5,""),t.innerHTML=o}};function j2e(n){n()}function $2e(n,e){var t="function"==typeof e?e:RT;if(0===n.length)t();else{var i=j2e;"async"===ki.mutateApproach&&(i=Y6.requestAnimationFrame||j2e),i(function(){var r=function Yct(){return!0===ki.autoReplaceSvg?BT.replace:BT[ki.autoReplaceSvg]||BT.replace}(),s=AN_begin("mutate");n.map(r),s(),t()})}}var vN=!1;function K2e(){vN=!0}function _N(){vN=!1}var kT=null;function q2e(n){if(m2e&&ki.observeMutations){var e=n.treeCallback,t=void 0===e?RT:e,i=n.nodeCallback,r=void 0===i?RT:i,s=n.pseudoElementsCallback,o=void 0===s?RT:s,a=n.observeMutationsRoot,c=void 0===a?$a:a;kT=new m2e(function(l){if(!vN){var u=J6();Wm(l).forEach(function(f){if("childList"===f.type&&f.addedNodes.length>0&&!Q2e(f.addedNodes[0])&&(ki.searchPseudoElements&&o(f.target),t(f.target)),"attributes"===f.type&&f.target.parentNode&&ki.searchPseudoElements&&o(f.target.parentNode),"attributes"===f.type&&Q2e(f.target)&&~hct.indexOf(f.attributeName))if("class"===f.attributeName&&function qct(n){var e=n.getAttribute?n.getAttribute(ZO):null,t=n.getAttribute?n.getAttribute(JO):null;return e&&t}(f.target)){var p=DT(tN(f.target)),v=p.iconName;f.target.setAttribute(ZO,p.prefix||u),v&&f.target.setAttribute(JO,v)}else(function Xct(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(ki.replacementClass)})(f.target)&&r(f.target)})}}),ld&&kT.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function n2t(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),t}function i2t(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=void 0!==n.innerText?n.innerText.trim():"",r=DT(tN(n));return r.prefix||(r.prefix=J6()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function kct(n,e){return(R2e[n]||{})[e]}(r.prefix,n.innerText)||cN(r.prefix,sN(n.innerText))),!r.iconName&&ki.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}function r2t(n){var e=Wm(n.attributes).reduce(function(r,s){return"class"!==r.name&&"style"!==r.name&&(r[s.name]=s.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return ki.autoA11y&&(t?e["aria-labelledby"]="".concat(ki.replacementClass,"-title-").concat(i||Ty()):(e["aria-hidden"]="true",e.focusable="false")),e}function X2e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=i2t(n),i=t.iconName,r=t.prefix,s=t.rest,o=r2t(n),a=uN("parseNodeAttributes",{},n),c=e.styleParser?n2t(n):[];return vi({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:U0,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:c,attributes:o}},a)}var o2t=kh.styles;function Y2e(n){var e="nest"===ki.autoReplaceSvg?X2e(n,{styleParser:!1}):X2e(n);return~e.extra.classes.indexOf(b2e)?fd("generateLayersText",n,e):fd("generateSvgReplacementMutation",n,e)}var e8=new Set;function Z2e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!ld)return Promise.resolve();var t=$a.documentElement.classList,i=function(f){return t.add("".concat(y2e,"-").concat(f))},r=function(f){return t.remove("".concat(y2e,"-").concat(f))},s=ki.autoFetchSvg?e8:eN.map(function(u){return"fa-".concat(u)}).concat(Object.keys(o2t));s.includes("fa")||s.push("fa");var o=[".".concat(b2e,":not([").concat(I5,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(I5,"])")})).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=Wm(n.querySelectorAll(o))}catch{}if(!(a.length>0))return Promise.resolve();i("pending"),r("complete");var c=AN_begin("onTree"),l=a.reduce(function(u,f){try{var p=Y2e(f);p&&u.push(p)}catch(g){w2e||"MissingIcon"===g.name&&console.error(g)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(p){$2e(p,function(){i("active"),i("complete"),r("pending"),"function"==typeof e&&e(),c(),u()})}).catch(function(p){c(),f(p)})})}function a2t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Y2e(n).then(function(t){t&&$2e([t],e)})}eN.map(function(n){e8.add("fa-".concat(n))}),Object.keys(by[Ka]).map(e8.add.bind(e8)),Object.keys(by[tc]).map(e8.add.bind(e8)),e8=yy(e8);var l2t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,r=void 0===i?U0:i,s=t.symbol,o=void 0!==s&&s,a=t.mask,c=void 0===a?null:a,l=t.maskId,u=void 0===l?null:l,f=t.title,p=void 0===f?null:f,g=t.titleId,v=void 0===g?null:g,_=t.classes,w=void 0===_?[]:_,b=t.attributes,x=void 0===b?{}:b,M=t.styles,E=void 0===M?{}:M;if(e){var I=e.prefix,k=e.iconName,O=e.icon;return IT(vi({type:"icon"},e),function(){return k5("beforeDOMElementCreation",{iconDefinition:e,params:t}),ki.autoA11y&&(p?x["aria-labelledby"]="".concat(ki.replacementClass,"-title-").concat(v||Ty()):(x["aria-hidden"]="true",x.focusable="false")),fN({icons:{main:pN(O),mask:c?pN(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:I,iconName:k,transform:vi(vi({},U0),r),symbol:o,title:p,maskId:u,titleId:v,extra:{attributes:x,styles:E,classes:w}})})}},u2t={mixout:function(){return{icon:(n=l2t,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:hN(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:hN(r||{})),n(i,vi(vi({},t),{},{mask:r}))})};var n},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=Z2e,t.nodeCallback=a2t,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,s=t.callback;return Z2e(void 0===i?$a:i,void 0===s?function(){}:s)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,s=i.title,o=i.titleId,a=i.prefix,c=i.transform,l=i.symbol,u=i.mask,f=i.maskId,p=i.extra;return new Promise(function(g,v){Promise.all([gN(r,a),u.iconName?gN(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(_){var w=$O(_,2);g([t,fN({icons:{main:w[0],mask:w[1]},prefix:a,iconName:r,transform:c,symbol:l,maskId:f,title:s,titleId:o,extra:p,watchable:!0})])}).catch(v)})},e.generateAbstractIcon=function(t){var l,i=t.children,r=t.attributes,s=t.main,o=t.transform,c=CT(t.styles);return c.length>0&&(r.style=c),nN(o)&&(l=fd("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),i.push(l||s.icon),{children:i,attributes:r}}}},h2t={mixout:function(){return{layer:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,s=void 0===r?[]:r;return IT({type:"layer"},function(){k5("beforeDOMElementCreation",{assembler:t,params:i});var o=[];return t(function(a){Array.isArray(a)?a.map(function(c){o=o.concat(c.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(ki.cssPrefix,"-layers")].concat(yy(s)).join(" ")},children:o}]})}}}},f2t={mixout:function(){return{counter:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,s=void 0===r?null:r,o=i.classes,a=void 0===o?[]:o,c=i.attributes,l=void 0===c?{}:c,u=i.styles,f=void 0===u?{}:u;return IT({type:"counter",content:t},function(){return k5("beforeDOMElementCreation",{content:t,params:i}),Wct({content:t.toString(),title:s,extra:{attributes:l,styles:f,classes:["".concat(ki.cssPrefix,"-layers-counter")].concat(yy(a))}})})}}}},d2t={mixout:function(){return{text:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,s=void 0===r?U0:r,o=i.title,a=void 0===o?null:o,c=i.classes,l=void 0===c?[]:c,u=i.attributes,f=void 0===u?{}:u,p=i.styles,g=void 0===p?{}:p;return IT({type:"text",content:t},function(){return k5("beforeDOMElementCreation",{content:t,params:i}),V2e({content:t,transform:vi(vi({},U0),s),title:a,extra:{attributes:f,styles:g,classes:["".concat(ki.cssPrefix,"-layers-text")].concat(yy(l))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,s=i.transform,o=i.extra,a=null,c=null;if(A2e){var l=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();a=u.width/l,c=u.height/l}return ki.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,V2e({content:t.innerHTML,width:a,height:c,transform:s,title:r,extra:o,watchable:!0})])}}},p2t=new RegExp('"',"ug"),J2e=[1105920,1112319];function ele(n,e){var t="".concat("data-fa-pseudo-element-pending").concat(e.replace(":","-"));return new Promise(function(i,r){if(null!==n.getAttribute(t))return i();var o=Wm(n.children).filter(function(O){return O.getAttribute(YO)===e})[0],a=Y6.getComputedStyle(n,e),c=a.getPropertyValue("font-family").match(cct),l=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!c)return n.removeChild(o),i();if(c&&"none"!==u&&""!==u){var f=a.getPropertyValue("content"),p=~["Sharp"].indexOf(c[2])?tc:Ka,g=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?xy[p][c[2].toLowerCase()]:lct[p][l],v=function g2t(n){var e=n.replace(p2t,""),t=function Tct(n,e){var r,t=n.length,i=n.charCodeAt(e);return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(e,0),i=t>=J2e[0]&&t<=J2e[1],r=2===e.length&&e[0]===e[1];return{value:sN(r?e[0]:e),isSecondary:i||r}}(f),_=v.value,w=v.isSecondary,b=c[0].startsWith("FontAwesome"),x=cN(g,_),M=x;if(b){var E=function Fct(n){var e=k2e[n],t=cN("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(_);E.iconName&&E.prefix&&(x=E.iconName,g=E.prefix)}if(!x||w||o&&o.getAttribute(ZO)===g&&o.getAttribute(JO)===M)i();else{n.setAttribute(t,M),o&&n.removeChild(o);var I=function s2t(){return{iconName:null,title:null,titleId:null,prefix:null,transform:U0,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),k=I.extra;k.attributes[YO]=e,gN(x,g).then(function(O){var R=fN(vi(vi({},I),{},{icons:{main:O,mask:{prefix:null,iconName:null,rest:[]}},prefix:g,iconName:M,extra:k,watchable:!0})),P=$a.createElement("svg");"::before"===e?n.insertBefore(P,n.firstChild):n.appendChild(P),P.outerHTML=R.map(function(Q){return Ly(Q)}).join("\n"),n.removeAttribute(t),i()}).catch(r)}}else i()})}function m2t(n){return Promise.all([ele(n,"::before"),ele(n,"::after")])}function A2t(n){return!(n.parentNode===document.head||~sct.indexOf(n.tagName.toUpperCase())||n.getAttribute(YO)||n.parentNode&&"svg"===n.parentNode.tagName)}function tle(n){if(ld)return new Promise(function(e,t){var i=Wm(n.querySelectorAll("*")).filter(A2t).map(m2t),r=AN_begin("searchPseudoElements");K2e(),Promise.all(i).then(function(){r(),_N(),e()}).catch(function(){r(),_N(),t()})})}var v2t={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=tle,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node;ki.searchPseudoElements&&tle(void 0===i?$a:i)}}},nle=!1,_2t={mixout:function(){return{dom:{unwatch:function(){K2e(),nle=!0}}}},hooks:function(){return{bootstrap:function(){q2e(uN("mutationObserverCallbacks",{}))},noAuto:function(){!function t2t(){!kT||kT.disconnect()}()},watch:function(t){var i=t.observeMutationsRoot;nle?_N():q2e(uN("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},ile=function(e){return e.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&"h"===a)return i.flipX=!0,i;if(o&&"v"===a)return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},y2t={mixout:function(){return{parse:{transform:function(t){return ile(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=ile(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,o=t.iconWidth,a={transform:"translate(".concat(t.containerWidth/2," 256)")},c="translate(".concat(32*r.x,", ").concat(32*r.y,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),g={outer:a,inner:{transform:"".concat(c," ").concat(l," ").concat(u)},path:{transform:"translate(".concat(o/2*-1," -256)")}};return{tag:"g",attributes:vi({},g.outer),children:[{tag:"g",attributes:vi({},g.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:vi(vi({},i.icon.attributes),g.path)}]}]}}}},yN={x:0,y:0,width:"100%",height:"100%"};function rle(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}var b2t={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),s=r?DT(r.split(" ").map(function(o){return o.trim()})):{prefix:null,iconName:null,rest:[]};return s.prefix||(s.prefix=J6()),t.mask=s,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n,i=t.children,r=t.attributes,s=t.main,o=t.mask,a=t.maskId,u=s.icon,p=o.icon,g=function yct(n){var e=n.transform,i=n.iconWidth,r={transform:"translate(".concat(n.containerWidth/2," 256)")},s="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:t.transform,containerWidth:o.width,iconWidth:s.width}),v={tag:"rect",attributes:vi(vi({},yN),{},{fill:"white"})},_=u.children?{children:u.children.map(rle)}:{},w={tag:"g",attributes:vi({},g.inner),children:[rle(vi({tag:u.tag,attributes:vi(vi({},u.attributes),g.path)},_))]},b={tag:"g",attributes:vi({},g.outer),children:[w]},x="mask-".concat(a||Ty()),M="clip-".concat(a||Ty()),E={tag:"mask",attributes:vi(vi({},yN),{},{id:x,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[v,b]},I={tag:"defs",children:[{tag:"clipPath",attributes:{id:M},children:(n=p,"g"===n.tag?n.children:[n])},E]};return i.push(I,{tag:"rect",attributes:vi({fill:"currentColor","clip-path":"url(#".concat(M,")"),mask:"url(#".concat(x,")")},yN)}),{children:i,attributes:r}}}},x2t={provides:function(e){var t=!1;Y6.matchMedia&&(t=Y6.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:vi(vi({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=vi(vi({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:vi(vi({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:vi(vi({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:vi(vi({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:vi(vi({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:vi(vi({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:vi(vi({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:vi(vi({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},M2t=[xct,u2t,h2t,f2t,d2t,v2t,_2t,y2t,b2t,x2t,{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol");return t.symbol=null!==r&&(""===r||r),t}}}}];!function zct(n,e){var t=e.mixoutsTo;O2e=n,$m={},Object.keys(Km).forEach(function(i){-1===Hct.indexOf(i)&&delete Km[i]}),O2e.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(o){"function"==typeof r[o]&&(t[o]=r[o]),"object"===mT(r[o])&&Object.keys(r[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=r[o][a]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(o){$m[o]||($m[o]=[]),$m[o].push(s[o])})}i.provides&&i.provides(Km)})}(M2t,{mixoutsTo:Gu});var S2t=Gu.parse,E2t=Gu.icon;const T2t=["*"],I2t=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let k2t=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),F2t=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const i of t){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const r of i.icon[2])"string"==typeof r&&(this.definitions[i.prefix][r]=i)}}addIconPacks(...t){for(const i of t){const r=Object.keys(i).map(s=>i[s]);this.addIcons(...r)}}getIconDefinition(t,i){return t in this.definitions&&i in this.definitions[t]?this.definitions[t][i]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P2t=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=gt({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[Ir]}),n})(),H2t=(()=>{class n{constructor(t,i){this.renderer=t,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(U(pa),U(mn))},n.\u0275cmp=Sn({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[Ir],ngContentSelectors:T2t,decls:1,vars:0,template:function(t,i){1&t&&(T1(),Do(0))},encapsulation:2}),n})(),wN=(()=>{class n{constructor(t,i,r,s,o){this.sanitizer=t,this.config=i,this.iconLibrary=r,this.stackItem=s,this.classes=[],null!=o&&null==s&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let i=null;if(i=this.icon??this.config.fallbackIcon,t){const r=this.findIconDefinition(i);if(null!=r){const s=this.buildParams();this.renderIcon(r,s)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const i=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);return"icon"in i?i:this.iconLibrary.getIconDefinition(i.prefix,i.iconName)??((n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(i),null)}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?S2t.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...I2t(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,i){const r=E2t(t,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(r.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(U(Mf),U(k2t),U(F2t),U(P2t,8),U(H2t,8))},n.\u0275cmp=Sn({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,i){2&t&&(sp("innerHTML",i.renderedIconHTML,k3),Jr("title",i.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[Ir],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),z2t=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=hi({type:n}),n.\u0275inj=xn({}),n})(),sle=(()=>{class n{constructor(t){this.appService=t,this.year=(new Date).getFullYear(),this.discord=this.appService.discord,this.github=this.appService.github,this.youtube=this.appService.youtube,this.patreon=this.appService.patreon,this.instagram=this.appService.instagram,this.faDiscord=gT,this.faGithub=WO,this.faYoutube=jO,this.faPatreon=GO,this.faInstagram=QO,this.onStart=!0}}return n.\u0275fac=function(t){return new(t||n)(U(io))},n.\u0275cmp=Sn({type:n,selectors:[["app-footer"]],decls:24,vars:9,consts:[["fxLayout","column","fxLayoutAlign","center center"],[2,"font-size","1.3em","margin-bottom","24px"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],[3,"icon"],[2,"font-size","1em","margin-bottom","24px"],["target","_blank",1,"larger-link",2,"background","#FF0000",3,"href"],["target","_blank",1,"larger-link",2,"background","rgb(240 0 117)",3,"href"],["target","_blank",1,"larger-link",3,"href"]],template:function(t,i){1&t&&(B(0,"footer")(1,"mat-toolbar",0)(2,"div",1),H(3,"Join us on our "),B(4,"a",2),Ue(5,"fa-icon",3),H(6," Discord "),z()(),B(7,"div",4),H(8," In cooperation with 2_plings "),B(9,"a",5),Ue(10,"fa-icon",3),H(11," Youtube "),z(),H(12," or "),B(13,"a",6),Ue(14,"fa-icon",3),H(15," Instagram "),z()(),B(16,"div"),H(17," Everything is free and open source. See "),B(18,"a",7),Ue(19,"fa-icon",3),H(20," GitHub "),z()(),B(21,"div"),H(22),Ue(23,"br"),z()()()),2&t&&(K(4),Yl("href",i.discord,E1),K(1),ge("icon",i.faDiscord),K(4),Yl("href",i.youtube,E1),K(1),ge("icon",i.faYoutube),K(3),Yl("href",i.instagram,E1),K(1),ge("icon",i.faInstagram),K(4),Yl("href",i.github,E1),K(1),ge("icon",i.faGithub),K(3),Nn(" PassiveOpen.com 2019 - ",i.year,""))},dependencies:[qLe,m6,w0,wN],styles:["footer[_ngcontent-%COMP%]{z-index:1000;position:relative}footer[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{padding:26px 0 80px;font-size:.8rem;opacity:.8;font-weight:400;height:initial}"]}),n})();function dd(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ole(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var bN,L4,$c,F1,I4,EN,TN,dle,mle,eA,Oy,c,l,u,f,p,g,n,e,t,i,r,s,o,a,v,Qu={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},qm={duration:.5,overwrite:!1,delay:0},D4=1e8,Ta=1e-8,xN=2*Math.PI,O2t=xN/4,N2t=0,ale=Math.sqrt,V2t=Math.cos,U2t=Math.sin,H2=function(e){return"string"==typeof e},nc=function(e){return"function"==typeof e},pd=function(e){return"number"==typeof e},CN=function(e){return typeof e>"u"},G0=function(e){return"object"==typeof e},eu=function(e){return!1!==e},cle=function(){return typeof window<"u"},FT=function(e){return nc(e)||H2(e)},lle="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Ll=Array.isArray,MN=/(?:-?\.?\d|\.)+/gi,ule=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Xm=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,SN=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,hle=/[+-]=-?[.\d]+/,fle=/[^,'"\[\]\s]+/gi,G2t=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Wu={},PT={},ple=function(e){return(PT=P5(e,Wu))&&Ku},LN=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},HT=function(e,t){return!t&&console.warn(e)},gle=function(e,t){return e&&(Wu[e]=t)&&PT&&(PT[e]=t)||Wu},Iy=function(){return 0},Q2t={suppressEvents:!0,isStart:!0},Ry={suppressEvents:!0},DN={},t8=[],IN={},ju={},RN={},Ale=30,zT=[],BN="",kN=function(e){var i,r,t=e[0];if(G0(t)||nc(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=zT.length;r--&&!zT[r].targetTest(t););i=zT[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new Qle(e[r],i)))||e.splice(r,1);return e},F5=function(e){return e._gsap||kN(k4(e))[0]._gsap},vle=function(e,t,i){return(i=e[t])&&nc(i)?e[t]():CN(i)&&e.getAttribute&&e.getAttribute(t)||i},tu=function(e,t){return(e=e.split(",")).forEach(t)||e},Mc=function(e){return Math.round(1e5*e)/1e5||0},sl=function(e){return Math.round(1e7*e)/1e7||0},Ym=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===i?e+r:"-"===i?e-r:"*"===i?e*r:e/r},W2t=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},OT=function(){var i,r,e=t8.length,t=t8.slice(0);for(IN={},t8.length=0,i=0;i<e;i++)(r=t[i])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},_le=function(e,t,i,r){t8.length&&OT(),e.render(t,i,r||L4),t8.length&&OT()},yle=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(fle).length<2?t:H2(e)?e.trim():e},wle=function(e){return e},R4=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},P5=function(e,t){for(var i in t)e[i]=t[i];return e},ble=function n(e,t){for(var i in t)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=G0(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},NT=function(e,t){var r,i={};for(r in e)r in t||(i[r]=e[r]);return i},By=function(e){var t=e.parent||F1,i=e.keyframes?function(e){return function(t,i){for(var r in i)r in t||"duration"===r&&e||"ease"===r||(t[r]=i[r])}}(Ll(e.keyframes)):R4;if(eu(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},xle=function(e,t,i,r,s){void 0===i&&(i="_first"),void 0===r&&(r="_last");var a,o=e[r];if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},VT=function(e,t,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},gd=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},H5=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},K2t=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},FN=function(e,t,i,r){return e._startAt&&(L4?e._startAt.revert(Ry):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},q2t=function n(e){return!e||e._ts&&n(e.parent)},Cle=function(e){return e._repeat?Zm(e._tTime,e=e.duration()+e._rDelay)*e:0},Zm=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},UT=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},GT=function(e){return e._end=sl(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ta)||0))},QT=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=sl(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),GT(e),i._dirty||H5(i,e)),e},Mle=function(e,t){var i;if((t._time||t._initted&&!t._dur)&&(i=UT(e.rawTime(),t),(!t._dur||Fy(0,t.totalDuration(),i)-t._tTime>Ta)&&t.render(i,!0)),H5(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Ta}},Q0=function(e,t,i,r){return t.parent&&gd(t),t._start=sl((pd(i)?i:i||e!==F1?B4(e,i,t):e._time)+t._delay),t._end=sl(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),xle(e,t,"_first","_last",e._sort?"_start":0),PN(t)||(e._recent=t),r||Mle(e,t),e._ts<0&&QT(e,e._tTime),e},Sle=function(e,t){return(Wu.ScrollTrigger||LN("scrollTrigger",t))&&Wu.ScrollTrigger.create(t,e)},Ele=function(e,t,i,r){return WN(e,t),e._initted?!i&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&mle!==$u.frame?(t8.push(e),e._lazy=[t,r],1):void 0:1},X2t=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},PN=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Jm=function(e,t,i,r){var s=e._repeat,o=sl(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:sl(o*(s+1)+e._rDelay*s):o,a>0&&!r?QT(e,e._tTime=e._tDur*a):e.parent&&GT(e),i||H5(e.parent,e),e},Tle=function(e){return e instanceof nu?H5(e):Jm(e,e._dur)},J2t={_start:0,endTime:Iy,totalDuration:Iy},B4=function n(e,t,i){var a,c,l,r=e.labels,s=e._recent||J2t,o=e.duration()>=D4?s.endTime(!1):e._dur;return H2(t)&&(isNaN(t)||t in r)?(c=t.charAt(0),l="%"===t.substr(-1),a=t.indexOf("="),"<"===c||">"===c?(a>=0&&(t=t.replace(/=/,"")),("<"===c?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(c=parseFloat(t.charAt(a-1)+t.substr(a+1)),l&&i&&(c=c/100*(Ll(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+c:o+c)):null==t?o:+t},ky=function(e,t,i){var a,c,r=pd(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s];if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,c=i;c&&!("immediateRender"in a);)a=c.vars.defaults||{},c=eu(c.vars.inherit)&&c.parent;o.immediateRender=eu(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new A2(t[0],o,t[s+1])},n8=function(e,t){return e||0===e?t(e):t},Fy=function(e,t,i){return i<e?e:i>t?t:i},Dl=function(e,t){return H2(e)&&(t=G2t.exec(e))?t[1]:""},HN=[].slice,Lle=function(e,t){return e&&G0(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&G0(e[0]))&&!e.nodeType&&e!==I4},k4=function(e,t,i){return $c&&!t&&$c.selector?$c.selector(e):!H2(e)||i||!EN&&tA()?Ll(e)?function(e,t,i){return void 0===i&&(i=[]),e.forEach(function(r){var s;return H2(r)&&!t||Lle(r,1)?(s=i).push.apply(s,k4(r)):i.push(r)})||i}(e,i):Lle(e)?HN.call(e,0):e?[e]:[]:HN.call((t||TN).querySelectorAll(e),0)},zN=function(e){return e=k4(e)[0]||HT("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return k4(t,i.querySelectorAll?i:i===e?HT("Invalid scope")||TN.createElement("div"):e)}},Dle=function(e){return e.sort(function(){return.5-Math.random()})},Ile=function(e){if(nc(e))return e;var t=G0(e)?e:{each:e},i=z5(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,c=isNaN(r)||a,l=t.axis,u=r,f=r;return H2(r)?u=f={center:.5,edges:.5,end:1}[r]||0:!a&&c&&(u=r[0],f=r[1]),function(p,g,v){var b,x,M,E,I,k,O,R,P,_=(v||t).length,w=o[_];if(!w){if(!(P="auto"===t.grid?0:(t.grid||[1,D4])[1])){for(O=-D4;O<(O=v[P++].getBoundingClientRect().left)&&P<_;);P--}for(w=o[_]=[],b=c?Math.min(P,_)*u-.5:r%P,x=P===D4?0:c?_*f/P-.5:r/P|0,O=0,R=D4,k=0;k<_;k++)M=k%P-b,E=x-(k/P|0),w[k]=I=l?Math.abs("y"===l?E:M):ale(M*M+E*E),I>O&&(O=I),I<R&&(R=I);"random"===r&&Dle(w),w.max=O-R,w.min=R,w.v=_=(parseFloat(t.amount)||parseFloat(t.each)*(P>_?_-1:l?"y"===l?_/P:P:Math.max(P,_/P))||0)*("edges"===r?-1:1),w.b=_<0?s-_:s,w.u=Dl(t.amount||t.each)||0,i=i&&_<0?Vle(i):i}return _=(w[p]-w.min)/w.max||0,sl(w.b+(i?i(_):_)*w.v)+w.u}},ON=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=sl(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(pd(i)?0:Dl(i))}},Rle=function(e,t){var r,s,i=Ll(e);return!i&&G0(e)&&(r=i=e.radius||D4,e.values?(e=k4(e.values),(s=!pd(e[0]))&&(r*=r)):e=ON(e.increment)),n8(t,i?nc(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var p,g,a=parseFloat(s?o.x:o),c=parseFloat(s?o.y:0),l=D4,u=0,f=e.length;f--;)(p=s?(p=e[f].x-a)*p+(g=e[f].y-c)*g:Math.abs(e[f]-a))<l&&(l=p,u=f);return u=!r||l<=r?e[u]:o,s||u===o||pd(o)?u:u+Dl(o)}:ON(e))},Ble=function(e,t,i,r){return n8(Ll(e)?!t:!0===i?!!(i=0):!r,function(){return Ll(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*r)/r})},kle=function(e,t,i){return n8(i,function(r){return e[~~t(r)]})},Py=function(e){for(var r,s,o,a,t=0,i="";~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a="["===e.charAt(r+7),s=e.substr(r+7,o-r-7).match(a?fle:MN),i+=e.substr(t,r-t)+Ble(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},Fle=function(e,t,i,r,s){var o=t-e,a=r-i;return n8(s,function(c){return i+((c-e)/o*a||0)})},Ple=function(e,t,i){var o,a,c,r=e.labels,s=D4;for(o in r)(a=r[o]-t)<0==!!i&&a&&s>(a=Math.abs(a))&&(c=o,s=a);return c},F4=function(e,t,i){var c,l,u,r=e.vars,s=r[t],o=$c,a=e._ctx;if(s)return c=r[t+"Params"],l=r.callbackScope||e,i&&t8.length&&OT(),a&&($c=a),u=c?s.apply(l,c):s.call(l),$c=o,u},Hy=function(e){return gd(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&F4(e,"onInterrupt"),e},clt=function(e){var t=(e=!e.name&&e.default||e).name,i=nc(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:Iy,render:KN,add:GN,kill:Clt,modifier:xlt,rawVars:0},o={targetTest:0,get:0,getSetter:$N,aliases:{},register:0};if(tA(),e!==r){if(ju[t])return;R4(r,R4(NT(e,s),o)),P5(r.prototype,P5(s,NT(e,o))),ju[r.prop=t]=r,e.targetTest&&(zT.push(r),DN[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}gle(t,r),e.register&&e.register(Ku,r,iu)},La=255,zy={aqua:[0,La,La],lime:[0,La,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,La],navy:[0,0,128],white:[La,La,La],olive:[128,128,0],yellow:[La,La,0],orange:[La,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[La,0,0],pink:[La,192,203],cyan:[0,La,La],transparent:[La,La,La,0]},NN=function(e,t,i){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)*La+.5|0},Hle=function(e,t,i){var s,o,a,c,l,u,f,p,g,v,r=e?pd(e)?[e>>16,e>>8&La,e&La]:0:zy.black;if(!r){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),zy[e])r=zy[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(r=parseInt(e.substr(1,6),16))>>16,r>>8&La,r&La,parseInt(e.substr(7),16)/255];r=[(e=parseInt(e.substr(1),16))>>16,e>>8&La,e&La]}else if("hsl"===e.substr(0,3))if(r=v=e.match(MN),t){if(~e.indexOf("="))return r=e.match(ule),i&&r.length<4&&(r[3]=1),r}else c=+r[0]%360/360,l=+r[1]/100,s=2*(u=+r[2]/100)-(o=u<=.5?u*(l+1):u+l-u*l),r.length>3&&(r[3]*=1),r[0]=NN(c+1/3,s,o),r[1]=NN(c,s,o),r[2]=NN(c-1/3,s,o);else r=e.match(MN)||zy.transparent;r=r.map(Number)}return t&&!v&&(s=r[0]/La,o=r[1]/La,a=r[2]/La,u=((f=Math.max(s,o,a))+(p=Math.min(s,o,a)))/2,f===p?c=l=0:(g=f-p,l=u>.5?g/(2-f-p):g/(f+p),c=f===s?(o-a)/g+(o<a?6:0):f===o?(a-s)/g+2:(s-o)/g+4,c*=60),r[0]=~~(c+.5),r[1]=~~(100*l+.5),r[2]=~~(100*u+.5)),i&&r.length<4&&(r[3]=1),r},zle=function(e){var t=[],i=[],r=-1;return e.split(r8).forEach(function(s){var o=s.match(Xm)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},Ole=function(e,t,i){var c,l,u,f,r="",s=(e+r).match(r8),o=t?"hsla(":"rgba(",a=0;if(!s)return e;if(s=s.map(function(p){return(p=Hle(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(u=zle(e),(c=i.c).join(r)!==u.c.join(r)))for(f=(l=e.replace(r8,"1").split(Xm)).length-1;a<f;a++)r+=l[a]+(~c.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!l)for(f=(l=e.split(r8)).length-1;a<f;a++)r+=l[a]+s[a];return r+l[f]},r8=function(){var e,n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in zy)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),llt=/hsl[a]?\(/,Nle=function(e){var i,t=e.join(" ");if(r8.lastIndex=0,r8.test(t))return i=llt.test(t),e[1]=Ole(e[1],i),e[0]=Ole(e[0],i,zle(e[1])),!0},$u=(n=Date.now,e=500,t=33,i=n(),r=i,o=s=1e3/240,v=function _(w){var M,E,I,k,b=n()-r,x=!0===w;if(b>e&&(i+=b-t),((M=(I=(r+=b)-i)-o)>0||x)&&(k=++f.frame,p=I-1e3*f.time,f.time=I/=1e3,o+=M+(M>=s?4:s-M),E=1),x||(c=l(_)),E)for(g=0;g<a.length;g++)a[g](I,p,k,w)},f={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(w){return p/(1e3/(w||60))},wake:function(){dle&&(!EN&&cle()&&(I4=EN=window,TN=I4.document||{},Wu.gsap=Ku,(I4.gsapVersions||(I4.gsapVersions=[])).push(Ku.version),ple(PT||I4.GreenSockGlobals||!I4.gsap&&I4||{}),u=I4.requestAnimationFrame),c&&f.sleep(),l=u||function(w){return setTimeout(w,o-1e3*f.time+1|0)},Oy=1,v(2))},sleep:function(){(u?I4.cancelAnimationFrame:clearTimeout)(c),Oy=0,l=Iy},lagSmoothing:function(w,b){e=w||1/Ta,t=Math.min(b,e,0)},fps:function(w){o=1e3*f.time+(s=1e3/(w||240))},add:function(w,b,x){var M=b?function(E,I,k,O){w(E,I,k,O),f.remove(M)}:w;return f.remove(w),a[x?"unshift":"push"](M),tA(),M},remove:function(w,b){~(b=a.indexOf(w))&&a.splice(b,1)&&g>=b&&g--},_listeners:a=[]}),tA=function(){return!Oy&&$u.wake()},ro={},ult=/^[\d.\-M][\d.\-,\s]/,hlt=/["']/g,flt=function(e){for(var a,c,l,t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length;s<o;s++)c=i[s],a=s!==o-1?c.lastIndexOf(","):c.length,l=c.substr(0,a),t[r]=isNaN(l)?l.replace(hlt,"").trim():+l,r=c.substr(a+1).trim();return t},Vle=function(e){return function(t){return 1-e(1-t)}},Ule=function n(e,t){for(var r,i=e._first;i;)i instanceof nu?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},z5=function(e,t){return e&&(nc(e)?e:ro[e]||function(e){var t=(e+"").split("("),i=ro[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[flt(t[1])]:function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)}(e).split(",").map(yle)):ro._CE&&ult.test(e)?ro._CE("",e):i}(e))||t},O5=function(e,t,i,r){void 0===i&&(i=function(c){return 1-t(1-c)}),void 0===r&&(r=function(c){return c<.5?t(2*c)/2:1-t(2*(1-c))/2});var o,s={easeIn:t,easeOut:i,easeInOut:r};return tu(e,function(a){for(var c in ro[a]=Wu[a]=s,ro[o=a.toLowerCase()]=i,s)ro[o+("easeIn"===c?".in":"easeOut"===c?".out":".inOut")]=ro[a+"."+c]=s[c]}),s},Gle=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},VN=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/xN*(Math.asin(1/r)||0),a=function(u){return 1===u?1:r*Math.pow(2,-10*u)*U2t((u-o)*s)+1},c="out"===e?a:"in"===e?function(l){return 1-a(1-l)}:Gle(a);return s=xN/s,c.config=function(l,u){return n(e,l,u)},c},UN=function n(e,t){void 0===t&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r="out"===e?i:"in"===e?function(s){return 1-i(1-s)}:Gle(i);return r.config=function(s){return n(e,s)},r};tu("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;O5(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(2*i,t)/2:1-Math.pow(2*(1-i),t)/2})}),ro.Linear.easeNone=ro.none=ro.Linear.easeIn,O5("Elastic",VN("in"),VN("out"),VN()),function(n,e){var s=function(a){return a<.36363636363636365?n*a*a:a<.7272727272727273?n*Math.pow(a-1.5/e,2)+.75:a<.9090909090909092?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};O5("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),O5("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),O5("Circ",function(n){return-(ale(1-n*n)-1)}),O5("Sine",function(n){return 1===n?1:1-V2t(n*O2t)}),O5("Back",UN("in"),UN("out"),UN()),ro.SteppedEase=ro.steps=Wu.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0;return function(a){return((r*Fy(0,.99999999,a)|0)+s)*i}}},qm.ease=ro["quad.out"],tu("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return BN+=n+","+n+"Params,"});var Qle=function(e,t){this.id=N2t++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:vle,this.set=t?t.getSetter:$N},nA=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Jm(this,+t.duration,1,1),this.data=t.data,$c&&(this._ctx=$c,$c.data.push(this)),Oy||$u.wake()}var e=n.prototype;return e.delay=function(i){return i||0===i?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Jm(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(tA(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(QT(this,i),!s._dp||s.parent||Mle(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Q0(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Ta||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),_le(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Cle(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?i:1-i)+Cle(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Zm(this._tTime,s)+1:1},e.timeScale=function(i){if(!arguments.length)return this._rts===-Ta?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?UT(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Ta?0:this._rts,this.totalTime(Fy(-this._delay,this._tDur,r),!0),GT(this),K2t(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(tA(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Ta&&(this._tTime-=Ta)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Q0(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(eu(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?UT(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){void 0===i&&(i=Ry);var r=L4;return L4=i,this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents),"nested"!==this.data&&gd(this),L4=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this.vars.immediateRender?-1:s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Tle(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,Tle(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(B4(this,i),eu(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,eu(r))},e.play=function(i,r){return null!=i&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return null!=i&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return null!=i&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Ta:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ta,this},e.isActive=function(){var s,i=this.parent||this._dp,r=this._start;return!(i&&!(this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-Ta))},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),"onUpdate"===i&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=nc(i)?i:wle,a=function(){var l=r.then;r.then=null,nc(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=l),s(o),r.then=l};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Hy(this)},n}();R4(nA.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ta,_prom:0,_ps:!1,_rts:1});var nu=function(n){function e(i,r){var s;return void 0===i&&(i={}),(s=n.call(this,i)||this).labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=eu(i.sortChildren),F1&&Q0(i.parent||F1,dd(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&Sle(dd(s),i.scrollTrigger),s}ole(e,n);var t=e.prototype;return t.to=function(r,s,o){return ky(0,arguments,this),this},t.from=function(r,s,o){return ky(1,arguments,this),this},t.fromTo=function(r,s,o,a){return ky(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,By(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new A2(r,s,B4(this,o),1),this},t.call=function(r,s,o){return Q0(this,A2.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,c,l,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=u,o.parent=this,new A2(r,o,B4(this,c)),this},t.staggerFrom=function(r,s,o,a,c,l,u){return o.runBackwards=1,By(o).immediateRender=eu(o.immediateRender),this.staggerTo(r,s,o,a,c,l,u)},t.staggerFromTo=function(r,s,o,a,c,l,u,f){return a.startAt=o,By(a).immediateRender=eu(a.immediateRender),this.staggerTo(r,s,a,c,l,u,f)},t.render=function(r,s,o){var p,g,v,_,w,b,x,M,E,I,k,O,a=this._time,c=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=r<=0?0:sl(r),f=this._zTime<0!=r<0&&(this._initted||!l);if(this!==F1&&u>c&&r>=0&&(u=c),u!==this._tTime||o||f){if(a!==this._time&&l&&(u+=this._time-a,r+=this._time-a),p=u,E=this._start,b=!(M=this._ts),f&&(l||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(k=this._yoyo,w=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*w+r,s,o);if(p=sl(u%w),u===c?(_=this._repeat,p=l):((_=~~(u/w))&&_===u/w&&(p=l,_--),p>l&&(p=l)),I=Zm(this._tTime,w),!a&&this._tTime&&I!==_&&(I=_),k&&1&_&&(p=l-p,O=1),_!==I&&!this._lock){var R=k&&1&I,P=R===(k&&1&_);if(_<I&&(R=!R),a=R?0:l,this._lock=1,this.render(a||(O?0:sl(_*w)),s,!l)._lock=0,this._tTime=u,!s&&this.parent&&F4(this,"onRepeat"),this.vars.repeatRefresh&&!O&&(this.invalidate()._lock=1),a&&a!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,c=this._tDur,P&&(this._lock=2,this.render(a=R?l:-1e-4,!0),this.vars.repeatRefresh&&!O&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;Ule(this,O)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(x=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,sl(a),sl(p)),x&&(u-=p-(p=x._start))),this._tTime=u,this._time=p,this._act=!M,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&p&&!s&&(F4(this,"onStart"),this._tTime!==u))return this;if(p>=a&&r>=0)for(g=this._first;g;){if(v=g._next,(g._act||p>=g._start)&&g._ts&&x!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(p-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(p-g._start)*g._ts,s,o),p!==this._time||!this._ts&&!b){x=0,v&&(u+=this._zTime=-Ta);break}}g=v}else{o=o||L4,g=this._last;for(var Q=r<0?r:p;g;){if(v=g._prev,(g._act||Q<=g._end)&&g._ts&&x!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(Q-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(Q-g._start)*g._ts,s,o),p!==this._time||!this._ts&&!b){x=0,v&&(u+=this._zTime=Q?-Ta:Ta);break}}g=v}}if(x&&!s&&(this.pause(),x.render(p>=a?0:-Ta)._zTime=p>=a?1:-1,this._ts))return this._start=E,GT(this),this.render(r,s,o);this._onUpdate&&!s&&F4(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&a)&&(E===this._start||Math.abs(M)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(u===c&&this._ts>0||!u&&this._ts<0)&&gd(this,1),!s&&(!(r<0)||a)&&(u||a||!c)&&(F4(this,u===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(pd(s)||(s=B4(this,s,r)),!(r instanceof nA)){if(Ll(r))return r.forEach(function(a){return o.add(a,s)}),this;if(H2(r))return this.addLabel(r,s);if(!nc(r))return this;r=A2.delayedCall(0,r)}return this!==r?Q0(this,r,s):this},t.getChildren=function(r,s,o,a){void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-D4);for(var c=[],l=this._first;l;)l._start>=a&&(l instanceof A2?s&&c.push(l):(o&&c.push(l),r&&c.push.apply(c,l.getChildren(!0,s,o)))),l=l._next;return c},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return H2(r)?this.removeLabel(r):nc(r)?this.killTweensOf(r):(VT(this,r),r===this._recent&&(this._recent=this._last),H5(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=sl($u.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=B4(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=A2.delayedCall(0,s||Iy,o);return a.data="isPause",this._hasPause=1,Q0(this,a,B4(this,r))},t.removePause=function(r){var s=this._first;for(r=B4(this,r);s;)s._start===r&&"isPause"===s.data&&gd(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),c=a.length;c--;)s8!==a[c]&&a[c].kill(r,s);return this},t.getTweensOf=function(r,s){for(var u,o=[],a=k4(r),c=this._first,l=pd(s);c;)c instanceof A2?W2t(c._targets,a)&&(l?(!s8||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&o.push(c):(u=c.getTweensOf(a,s)).length&&o.push.apply(o,u),c=c._next;return o},t.tweenTo=function(r,s){s=s||{};var g,o=this,a=B4(o,r),l=s.startAt,u=s.onStart,f=s.onStartParams,p=s.immediateRender,v=A2.to(o,R4({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||Ta,onStart:function(){if(o.pause(),!g){var w=s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());v._dur!==w&&Jm(v,w,0,1).render(v._time,!0,!0),g=1}u&&u.apply(v,f||[])}},s));return p?v.render(0):v},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,R4({startAt:{time:B4(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return void 0===r&&(r=this._time),Ple(this,B4(this,r))},t.previousLabel=function(r){return void 0===r&&(r=this._time),Ple(this,B4(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Ta)},t.shiftChildren=function(r,s,o){void 0===o&&(o=0);for(var l,a=this._first,c=this.labels;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(l in c)c[l]>=o&&(c[l]+=r);return H5(this)},t.invalidate=function(){var r=this._first;for(this._lock=0;r;)r.invalidate(),r=r._next;return n.prototype.invalidate.call(this)},t.clear=function(r){void 0===r&&(r=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),H5(this)},t.totalDuration=function(r){var l,u,f,s=0,o=this,a=o._last,c=D4;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(f=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>c&&o._sort&&a._ts&&!o._lock?(o._lock=1,Q0(o,a,u-a._delay,1)._lock=0):c=u,u<0&&a._ts&&(s-=u,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),c=0),a._end>s&&a._ts&&(s=a._end),a=l;Jm(o,o===F1&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(F1._ts&&(_le(F1,UT(r,F1)),mle=$u.frame),$u.frame>=Ale){Ale+=Qu.autoSleep||120;var s=F1._first;if((!s||!s._ts)&&Qu.autoSleep&&$u._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||$u.sleep()}}},e}(nA);R4(nu.prototype,{_lock:0,_hasPause:0,_forcing:0});var s8,QN,glt=function(e,t,i,r,s,o,a){var f,p,g,v,_,w,b,x,c=new iu(this._pt,e,t,0,1,Xle,null,s),l=0,u=0;for(c.b=i,c.e=r,i+="",(b=~(r+="").indexOf("random("))&&(r=Py(r)),o&&(o(x=[i,r],e,t),i=x[0],r=x[1]),p=i.match(SN)||[];f=SN.exec(r);)v=f[0],_=r.substring(l,f.index),g?g=(g+1)%5:"rgba("===_.substr(-5)&&(g=1),v!==p[u++]&&(w=parseFloat(p[u-1])||0,c._pt={_next:c._pt,p:_||1===u?_:",",s:w,c:"="===v.charAt(1)?Ym(w,v)-w:parseFloat(v)-w,m:g&&g<4?Math.round:0},l=SN.lastIndex);return c.c=l<r.length?r.substring(l,r.length):"",c.fp=a,(hle.test(r)||b)&&(c.e=0),this._pt=c,c},GN=function(e,t,i,r,s,o,a,c,l,u){nc(r)&&(r=r(s||0,e,o));var v,f=e[t],p="get"!==i?i:nc(f)?l?e[t.indexOf("set")||!nc(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():f,g=nc(f)?l?ylt:Kle:jN;if(H2(r)&&(~r.indexOf("random(")&&(r=Py(r)),"="===r.charAt(1)&&((v=Ym(p,r)+(Dl(p)||0))||0===v)&&(r=v)),!u||p!==r||QN)return isNaN(p*r)||""===r?(!f&&!(t in e)&&LN(t,r),glt.call(this,e,t,p,r,g,c||Qu.stringFilter,l)):(v=new iu(this._pt,e,t,+p||0,r-(p||0),"boolean"==typeof f?blt:qle,0,g),l&&(v.fp=l),a&&v.modifier(a,this,e),this._pt=v)},Wle=function(e,t,i,r,s,o){var a,c,l,u;if(ju[e]&&!1!==(a=new ju[e]).init(s,a.rawVars?t[e]:function(e,t,i,r,s){if(nc(e)&&(e=Ny(e,s,t,i,r)),!G0(e)||e.style&&e.nodeType||Ll(e)||lle(e))return H2(e)?Ny(e,s,t,i,r):e;var a,o={};for(a in e)o[a]=Ny(e[a],s,t,i,r);return o}(t[e],r,s,o,i),i,r,o)&&(i._pt=c=new iu(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==eA))for(l=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)l[a._props[u]]=c;return a},WN=function n(e,t){var k,O,R,P,Q,J,Ce,Ae,G,ue,X,le,de,i=e.vars,r=i.ease,s=i.startAt,o=i.immediateRender,a=i.lazy,c=i.onUpdate,l=i.onUpdateParams,u=i.callbackScope,f=i.runBackwards,p=i.yoyoEase,g=i.keyframes,v=i.autoRevert,_=e._dur,w=e._startAt,b=e._targets,x=e.parent,M=x&&"nested"===x.data?x.vars.targets:b,E="auto"===e._overwrite&&!bN,I=e.timeline;if(I&&(!g||!r)&&(r="none"),e._ease=z5(r,qm.ease),e._yEase=p?Vle(z5(!0===p?r:p,qm.ease)):0,p&&e._yoyo&&!e._repeat&&(p=e._yEase,e._yEase=e._ease,e._ease=p),e._from=!I&&!!i.runBackwards,!I||g&&!i.stagger){if(le=(Ae=b[0]?F5(b[0]).harness:0)&&i[Ae.prop],k=NT(i,DN),w&&(t<0&&f&&o&&!v?w.render(-1,!0):w.revert(f&&_?Ry:Q2t),w._lazy=0),s){if(gd(e._startAt=A2.set(b,R4({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:eu(a),startAt:null,delay:0,onUpdate:c,onUpdateParams:l,callbackScope:u,stagger:0},s))),t<0&&(L4||!o&&!v)&&e._startAt.revert(Ry),o&&_&&t<=0)return void(t&&(e._zTime=t))}else if(f&&_&&!w)if(t&&(o=!1),R=R4({overwrite:!1,data:"isFromStart",lazy:o&&eu(a),immediateRender:o,stagger:0,parent:x},k),le&&(R[Ae.prop]=le),gd(e._startAt=A2.set(b,R)),t<0&&(L4?e._startAt.revert(Ry):e._startAt.render(-1,!0)),e._zTime=t,o){if(!t)return}else n(e._startAt,Ta);for(e._pt=e._ptCache=0,a=_&&eu(a)||a&&!_,O=0;O<b.length;O++){if(Ce=(Q=b[O])._gsap||kN(b)[O]._gsap,e._ptLookup[O]=ue={},IN[Ce.id]&&t8.length&&OT(),X=M===b?O:M.indexOf(Q),Ae&&!1!==(G=new Ae).init(Q,le||k,e,X,M)&&(e._pt=P=new iu(e._pt,Q,G.name,0,1,G.render,G,0,G.priority),G._props.forEach(function(pe){ue[pe]=P}),G.priority&&(J=1)),!Ae||le)for(R in k)ju[R]&&(G=Wle(R,k,e,X,Q,M))?G.priority&&(J=1):ue[R]=P=GN.call(e,Q,R,"get",k[R],X,M,0,i.stringFilter);e._op&&e._op[O]&&e.kill(Q,e._op[O]),E&&e._pt&&(s8=e,F1.killTweensOf(Q,ue,e.globalTime(t)),de=!e.parent,s8=0),e._pt&&a&&(IN[Ce.id]=1)}J&&Yle(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!de,g&&t<=0&&I.render(D4,!0,!0)},_lt=function(e,t,i,r){var o,a,s=t.ease||r||"power1.inOut";if(Ll(t))a=i[e]||(i[e]=[]),t.forEach(function(c,l){return a.push({t:l/(t.length-1)*100,v:c,e:s})});else for(o in t)a=i[o]||(i[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:s})},Ny=function(e,t,i,r,s){return nc(e)?e.call(t,i,r,s):H2(e)&&~e.indexOf("random(")?Py(e):e},jle=BN+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",$le={};tu(jle+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return $le[n]=1});var A2=function(n){function e(i,r,s,o){var a;"number"==typeof r&&(s.duration=r,r=s,s=null);var E,I,k,O,R,P,Q,J,c=(a=n.call(this,o?r:By(r))||this).vars,l=c.duration,u=c.delay,f=c.immediateRender,p=c.stagger,g=c.overwrite,v=c.keyframes,_=c.defaults,w=c.scrollTrigger,b=c.yoyoEase,x=r.parent||F1,M=(Ll(i)||lle(i)?pd(i[0]):"length"in r)?[i]:k4(i);if(a._targets=M.length?kN(M):HT("GSAP target "+i+" not found. https://greensock.com",!Qu.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=g,v||p||FT(l)||FT(u)){if(r=a.vars,(E=a.timeline=new nu({data:"nested",defaults:_||{},targets:x&&"nested"===x.data?x.vars.targets:M})).kill(),E.parent=E._dp=dd(a),E._start=0,p||FT(l)||FT(u)){if(O=M.length,Q=p&&Ile(p),G0(p))for(R in p)~jle.indexOf(R)&&(J||(J={}),J[R]=p[R]);for(I=0;I<O;I++)(k=NT(r,$le)).stagger=0,b&&(k.yoyoEase=b),J&&P5(k,J),P=M[I],k.duration=+Ny(l,dd(a),I,P,M),k.delay=(+Ny(u,dd(a),I,P,M)||0)-a._delay,!p&&1===O&&k.delay&&(a._delay=u=k.delay,a._start+=u,k.delay=0),E.to(P,k,Q?Q(I,P,M):0),E._ease=ro.none;E.duration()?l=u=0:a.timeline=0}else if(v){By(R4(E.vars.defaults,{ease:"none"})),E._ease=z5(v.ease||r.ease||"none");var Ae,G,ue,Ce=0;if(Ll(v))v.forEach(function(X){return E.to(M,X,">")}),E.duration();else{for(R in k={},v)"ease"===R||"easeEach"===R||_lt(R,v[R],k,v.easeEach);for(R in k)for(Ae=k[R].sort(function(X,le){return X.t-le.t}),Ce=0,I=0;I<Ae.length;I++)(ue={ease:(G=Ae[I]).e,duration:(G.t-(I?Ae[I-1].t:0))/100*l})[R]=G.v,E.to(M,ue,Ce),Ce+=ue.duration;E.duration()<l&&E.to({},{duration:l-E.duration()})}}l||a.duration(l=E.duration())}else a.timeline=0;return!0===g&&!bN&&(s8=dd(a),F1.killTweensOf(M),s8=0),Q0(x,dd(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(f||!l&&!v&&a._start===sl(x._time)&&eu(f)&&q2t(dd(a))&&"nested"!==x.data)&&(a._tTime=-Ta,a.render(Math.max(0,-u))),w&&Sle(dd(a),w),a}ole(e,n);var t=e.prototype;return t.render=function(r,s,o){var p,g,v,_,w,b,x,M,E,a=this._time,c=this._tDur,l=this._dur,u=r<0,f=r>c-Ta&&!u?c:r<Ta?0:r;if(l){if(f!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(p=f,M=this.timeline,this._repeat){if(_=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*_+r,s,o);if(p=sl(f%_),f===c?(v=this._repeat,p=l):((v=~~(f/_))&&v===f/_&&(p=l,v--),p>l&&(p=l)),(b=this._yoyo&&1&v)&&(E=this._yEase,p=l-p),w=Zm(this._tTime,_),p===a&&!o&&this._initted)return this._tTime=f,this;v!==w&&(M&&this._yEase&&Ule(M,b),this.vars.repeatRefresh&&!b&&!this._lock&&(this._lock=o=1,this.render(sl(_*v),!0).invalidate()._lock=0))}if(!this._initted){if(Ele(this,u?r:p,o,s))return this._tTime=0,this;if(a!==this._time)return this;if(l!==this._dur)return this.render(r,s,o)}if(this._tTime=f,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=x=(E||this._ease)(p/l),this._from&&(this.ratio=x=1-x),p&&!a&&!s&&(F4(this,"onStart"),this._tTime!==f))return this;for(g=this._pt;g;)g.r(x,g.d),g=g._next;M&&M.render(r<0?r:!p&&b?-Ta:M._dur*M._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&FN(this,r,0,o),F4(this,"onUpdate")),this._repeat&&v!==w&&this.vars.onRepeat&&!s&&this.parent&&F4(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&FN(this,r,0,!0),(r||!l)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&gd(this,1),!s&&(!u||a)&&(f||a)&&(F4(this,f===c?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,i,r){var l,u,f,s=e.ratio,o=t<0||!t&&(!e._start&&X2t(e)&&(e._initted||!PN(e))||(e._ts<0||e._dp._ts<0)&&!PN(e))?0:1,a=e._rDelay,c=0;if(a&&e._repeat&&(c=Fy(0,e._tDur,t),u=Zm(c,a),e._yoyo&&1&u&&(o=1-o),u!==Zm(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||L4||r||e._zTime===Ta||!t&&e._zTime){if(!e._initted&&Ele(e,t,r,i))return;for(f=e._zTime,e._zTime=t||(i?Ta:0),i||(i=t&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,l=e._pt;l;)l.r(o,l.d),l=l._next;t<0&&FN(e,t,0,!0),e._onUpdate&&!i&&F4(e,"onUpdate"),c&&e._repeat&&!i&&e.parent&&F4(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&gd(e,1),!i&&!L4&&(F4(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,r,s,o);return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),n.prototype.invalidate.call(this)},t.resetTo=function(r,s,o,a){Oy||$u.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||WN(this,c),function(e,t,i,r,s,o,a){var l,u,f,p,c=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,p=e._targets.length;p--;){if((l=f[p][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return QN=1,e.vars[t]="+=0",WN(e,a),QN=0,1;c.push(l)}for(p=c.length;p--;)(l=(u=c[p])._pt||u).s=!r&&0!==r||s?l.s+(r||0)+o*l.c:r,l.c=i-l.s,u.e&&(u.e=Mc(i)+Dl(u.e)),u.b&&(u.b=l.s+Dl(u.b))}(this,r,s,o,a,this._ease(c/this._dur),c)?this.resetTo(r,s,o,a):(QT(this,0),this.parent||xle(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(void 0===s&&(s="all"),!(r||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?Hy(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,s8&&!0!==s8.vars.overwrite)._first||Hy(this),this.parent&&o!==this.timeline.totalDuration()&&Jm(this,this._dur*this.timeline._tDur/o,0,1),this}var f,p,g,v,_,w,b,a=this._targets,c=r?k4(r):a,l=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0}(a,c))return"all"===s&&(this._pt=0),Hy(this);for(f=this._op=this._op||[],"all"!==s&&(H2(s)&&(_={},tu(s,function(x){return _[x]=1}),s=_),s=function(e,t){var s,o,a,c,i=e[0]?F5(e[0]).harness:0,r=i&&i.aliases;if(!r)return t;for(o in s=P5({},t),r)if(o in s)for(a=(c=r[o].split(",")).length;a--;)s[c[a]]=s[o];return s}(a,s)),b=a.length;b--;)if(~c.indexOf(a[b]))for(_ in p=l[b],"all"===s?(f[b]=s,v=p,g={}):(g=f[b]=f[b]||{},v=s),v)(w=p&&p[_])&&((!("kill"in w.d)||!0===w.d.kill(_))&&VT(this,w,"_pt"),delete p[_]),"all"!==g&&(g[_]=1);return this._initted&&!this._pt&&u&&Hy(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return ky(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return ky(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return F1.killTweensOf(r,s,o)},e}(nA);R4(A2.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),tu("staggerTo,staggerFrom,staggerFromTo",function(n){A2[n]=function(){var e=new nu,t=HN.call(arguments,0);return t.splice("staggerFromTo"===n?5:4,0,0),e[n].apply(e,t)}});var jN=function(e,t,i){return e[t]=i},Kle=function(e,t,i){return e[t](i)},ylt=function(e,t,i,r){return e[t](r.fp,i)},wlt=function(e,t,i){return e.setAttribute(t,i)},$N=function(e,t){return nc(e[t])?Kle:CN(e[t])&&e.setAttribute?wlt:jN},qle=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},blt=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Xle=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},KN=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},xlt=function(e,t,i,r){for(var o,s=this._pt;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},Clt=function(e){for(var i,r,t=this._pt;t;)r=t._next,t.p===e&&!t.op||t.op===e?VT(this,t,"_pt"):t.dep||(i=1),t=r;return!i},Mlt=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},Yle=function(e){for(var i,r,s,o,t=e._pt;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},iu=function(){function n(t,i,r,s,o,a,c,l,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||qle,this.d=c||this,this.set=l||jN,this.pr=u||0,this._next=t,t&&(t._prev=this)}return n.prototype.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=Mlt,this.m=i,this.mt=s,this.tween=r},n}();tu(BN+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return DN[n]=1}),Wu.TweenMax=Wu.TweenLite=A2,Wu.TimelineLite=Wu.TimelineMax=nu,F1=new nu({sortChildren:!1,defaults:qm,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Qu.stringFilter=Nle;var iA=[],WT={},Slt=[],Zle=0,qN=function(e){return(WT[e]||Slt).map(function(t){return t()})},XN=function(){var e=Date.now(),t=[];e-Zle>2&&(qN("matchMediaInit"),iA.forEach(function(i){var o,a,c,l,r=i.queries,s=i.conditions;for(a in r)(o=I4.matchMedia(r[a]).matches)&&(c=1),o!==s[a]&&(s[a]=o,l=1);l&&(i.revert(),c&&t.push(i))}),qN("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i)}),Zle=e,qN("matchMedia"))},Jle=function(){function n(t,i){this.selector=i&&zN(i),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){nc(i)&&(s=r,r=i,i=nc);var o=this,a=function(){var f,l=$c,u=o.selector;return l&&l!==o&&l.data.push(o),s&&(o.selector=zN(s)),$c=o,f=r.apply(o,arguments),nc(f)&&o._r.push(f),$c=l,o.selector=u,o.isReverted=!1,f};return o.last=a,i===nc?a(o):i?o[i]=a:a},e.ignore=function(i){var r=$c;$c=null,i(this),$c=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof A2&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?(this.getTweens().map(function(a){return{g:a.globalTime(0),t:a}}).sort(function(a,c){return c.g-a.g||-1}).forEach(function(a){return a.t.revert(i)}),this.data.forEach(function(a){return!(a instanceof nA)&&a.revert&&a.revert(i)}),this._r.forEach(function(a){return a(i,s)}),this.isReverted=!0):this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r){var o=iA.indexOf(this);~o&&iA.splice(o,1)}},e.revert=function(i){this.kill(i||{})},n}(),Elt=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(i,r,s){G0(i)||(i={matches:i});var c,l,u,o=new Jle(0,s||this.scope),a=o.conditions={};for(l in this.contexts.push(o),r=o.add("onMatch",r),o.queries=i,i)"all"===l?u=1:(c=I4.matchMedia(i[l]))&&(iA.indexOf(o)<0&&iA.push(o),(a[l]=c.matches)&&(u=1),c.addListener?c.addListener(XN):c.addEventListener("change",XN));return u&&r(o),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),jT={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return clt(r)})},timeline:function(e){return new nu(e)},getTweensOf:function(e,t){return F1.getTweensOf(e,t)},getProperty:function(e,t,i,r){H2(e)&&(e=k4(e)[0]);var s=F5(e||{}).get,o=i?wle:yle;return"native"===i&&(i=""),e&&(t?o((ju[t]&&ju[t].get||s)(e,t,i,r)):function(a,c,l){return o((ju[a]&&ju[a].get||s)(e,a,c,l))})},quickSetter:function(e,t,i){if((e=k4(e)).length>1){var r=e.map(function(u){return Ku.quickSetter(u,t,i)}),s=r.length;return function(u){for(var f=s;f--;)r[f](u)}}var o=ju[t],a=F5(e=e[0]||{}),c=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(u){var f=new o;eA._pt=0,f.init(e,i?u+i:u,eA,0,[e]),f.render(1,f),eA._pt&&KN(1,eA)}:a.set(e,c);return o?l:function(u){return l(e,c,i?u+i:u,a,1)}},quickTo:function(e,t,i){var r,s=Ku.to(e,P5(((r={})[t]="+=0.1",r.paused=!0,r),i||{})),o=function(c,l,u){return s.resetTo(t,c,l,u)};return o.tween=s,o},isTweening:function(e){return F1.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=z5(e.ease,qm.ease)),ble(qm,e||{})},config:function(e){return ble(Qu,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!ju[a]&&!Wu[a]&&HT(t+" effect requires "+a+" plugin.")}),RN[t]=function(a,c,l){return i(k4(a),R4(c||{},s),l)},o&&(nu.prototype[t]=function(a,c,l){return this.add(RN[t](a,G0(c)?c:(l=c)&&{},this),l)})},registerEase:function(e,t){ro[e]=z5(t)},parseEase:function(e,t){return arguments.length?z5(e,t):ro},getById:function(e){return F1.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,s,i=new nu(e);for(i.smoothChildTiming=eu(e.smoothChildTiming),F1.remove(i),i._dp=0,i._time=i._tTime=F1._time,r=F1._first;r;)s=r._next,(t||!(!r._dur&&r instanceof A2&&r.vars.onComplete===r._targets[0]))&&Q0(i,r,r._start-r._delay),r=s;return Q0(F1,i,0),i},context:function(e,t){return e?new Jle(e,t):$c},matchMedia:function(e){return new Elt(e)},matchMediaRefresh:function(){return iA.forEach(function(e){var i,r,t=e.conditions;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||XN()},addEventListener:function(e,t){var i=WT[e]||(WT[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=WT[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:function n(e,t,i){var r=t-e;return Ll(e)?kle(e,n(0,e.length),t):n8(i,function(s){return(r+(s-e)%r)%r+e})},wrapYoyo:function n(e,t,i){var r=t-e,s=2*r;return Ll(e)?kle(e,n(0,e.length-1),t):n8(i,function(o){return e+((o=(s+(o-e)%s)%s||0)>r?s-o:o)})},distribute:Ile,random:Ble,snap:Rle,normalize:function(e,t,i){return Fle(e,t,0,1,i)},getUnit:Dl,clamp:function(e,t,i){return n8(i,function(r){return Fy(e,t,r)})},splitColor:Hle,toArray:k4,selector:zN,mapRange:Fle,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||Dl(i))}},interpolate:function n(e,t,i,r){var s=isNaN(e+t)?0:function(g){return(1-g)*e+g*t};if(!s){var c,l,u,f,p,o=H2(e),a={};if(!0===i&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(Ll(e)&&!Ll(t)){for(u=[],p=(f=e.length)-2,l=1;l<f;l++)u.push(n(e[l-1],e[l]));f--,s=function(v){v*=f;var _=Math.min(p,~~v);return u[_](v-_)},i=t}else r||(e=P5(Ll(e)?[]:{},e));if(!u){for(c in t)GN.call(a,e,c,"get",t[c]);s=function(v){return KN(v,a)||(o?e.p:e)}}}return n8(i,s)},shuffle:Dle},install:ple,effects:RN,ticker:$u,updateRoot:nu.updateRoot,plugins:ju,globalTimeline:F1,core:{PropTween:iu,globals:gle,Tween:A2,Timeline:nu,Animation:nA,getCache:F5,_removeLinkedListItem:VT,reverting:function(){return L4},context:function(e){return e&&$c&&($c.data.push(e),e._ctx=$c),$c},suppressOverwrites:function(e){return bN=e}}};tu("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return jT[n]=A2[n]}),$u.add(nu.updateRoot),eA=jT.to({},{duration:0});var Tlt=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},YN=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var c,l;if(H2(s)&&(c={},tu(s,function(u){return c[u]=1}),s=c),t){for(l in c={},s)c[l]=t(s[l]);s=c}!function(e,t){var r,s,o,i=e._targets;for(r in t)for(s=i.length;s--;)(o=e._ptLookup[s][r])&&(o=o.d)&&(o._pt&&(o=Tlt(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))}(a,s)}}}},Ku=jT.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,c;for(o in this.tween=i,t)c=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(c||0)+"",t[o],r,s,0,0,o)).op=o,a.b=c,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)L4?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},YN("roundProps",ON),YN("modifiers"),YN("snap",Rle))||jT;A2.version=nu.version=Ku.version="3.11.1",dle=1,cle()&&tA();var e3e,o8,rA,ZN,N5,t3e,JN,a3e,md={},V5=180/Math.PI,sA=Math.PI/180,oA=Math.atan2,eV=/([A-Z])/g,Rlt=/(left|right|width|margin|padding|x)/i,Blt=/[\s,\(]\S/,Ad={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},tV=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},klt=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Flt=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Plt=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},i3e=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},r3e=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Hlt=function(e,t,i){return e.style[t]=i},zlt=function(e,t,i){return e.style.setProperty(t,i)},Olt=function(e,t,i){return e._gsap[t]=i},Nlt=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},Vlt=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},Ult=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},ic="transform",Fh=ic+"Origin",Glt=function(e){var t=this,i=this.target,r=i.style;if(e in md){if(this.tfm=this.tfm||{},"transform"!==e&&(~(e=Ad[e]||e).indexOf(",")?e.split(",").forEach(function(s){return t.tfm[s]=vd(i,s)}):this.tfm[e]=i._gsap.x?i._gsap[e]:vd(i,e)),this.props.indexOf(ic)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Fh,"")),e=ic}r&&this.props.push(e,r[e])},s3e=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Qlt=function(){var s,o,e=this.props,t=this.target,i=t.style,r=t._gsap;for(s=0;s<e.length;s+=2)e[s+1]?i[e[s]]=e[s+1]:i.removeProperty(e[s].replace(eV,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(s=JN())&&!s.isStart&&!i[ic]&&(s3e(i),r.uncache=1)}},o3e=function(e,t){var i={target:e,props:[],revert:Qlt,save:Glt};return t&&t.split(",").forEach(function(r){return i.save(r)}),i},nV=function(e,t){var i=o8.createElementNS?o8.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):o8.createElement(e);return i.style?i:o8.createElement(e)},W0=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(eV,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,aA(t)||t,1)||""},c3e="O,Moz,ms,Ms,Webkit".split(","),aA=function(e,t,i){var s=(t||N5).style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(c3e[o]+e in s););return o<0?null:(3===o?"ms":o>=0?c3e[o]:"")+e},iV=function(){typeof window<"u"&&window.document&&(e3e=window,rA=(o8=e3e.document).documentElement,N5=nV("div")||{style:{}},nV("div"),ic=aA(ic),Fh=ic+"Origin",N5.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",a3e=!!aA("perspective"),JN=Ku.core.reverting,ZN=1)},rV=function n(e){var o,t=nV("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(rA.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),rA.removeChild(t),this.style.cssText=s,o},l3e=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},u3e=function(e){var t;try{t=e.getBBox()}catch{t=rV.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===rV||(t=rV.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+l3e(e,["x","cx","x1"])||0,y:+l3e(e,["y","cy","y1"])||0,width:0,height:0}},h3e=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!u3e(e))},Vy=function(e,t){if(t){var i=e.style;t in md&&t!==Fh&&(t=ic),i.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),i.removeProperty(t.replace(eV,"-$1").toLowerCase())):i.removeAttribute(t)}},a8=function(e,t,i,r,s,o){var a=new iu(e._pt,t,i,0,1,o?r3e:i3e);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},f3e={deg:1,rad:1,turn:1},Wlt={grid:1,flex:1},c8=function n(e,t,i,r){var v,_,w,b,s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=N5.style,c=Rlt.test(t),l="svg"===e.tagName.toLowerCase(),u=(l?"client":"offset")+(c?"Width":"Height"),f=100,p="px"===r,g="%"===r;return r===o||!s||f3e[r]||f3e[o]?s:("px"!==o&&!p&&(s=n(e,t,i,"px")),b=e.getCTM&&h3e(e),!g&&"%"!==o||!md[t]&&!~t.indexOf("adius")?(a[c?"width":"height"]=f+(p?o:r),_=~t.indexOf("adius")||"em"===r&&e.appendChild&&!l?e:e.parentNode,b&&(_=(e.ownerSVGElement||{}).parentNode),(!_||_===o8||!_.appendChild)&&(_=o8.body),(w=_._gsap)&&g&&w.width&&c&&w.time===$u.time&&!w.uncache?Mc(s/w.width*f):((g||"%"===o)&&!Wlt[W0(_,"display")]&&(a.position=W0(e,"position")),_===e&&(a.position="static"),_.appendChild(N5),v=N5[u],_.removeChild(N5),a.position="absolute",c&&g&&((w=F5(_)).time=$u.time,w.width=_[u]),Mc(p?v*s/f:v&&s?f/v*s:0))):(v=b?e.getBBox()[c?"width":"height"]:e[u],Mc(g?s/v*f:s/100*v)))},vd=function(e,t,i,r){var s;return ZN||iV(),t in Ad&&"transform"!==t&&~(t=Ad[t]).indexOf(",")&&(t=t.split(",")[0]),md[t]&&"transform"!==t?(s=Gy(e,r),s="transformOrigin"!==t?s[t]:s.svg?s.origin:KT(W0(e,Fh))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=$T[t]&&$T[t](e,t,i)||W0(e,t)||vle(e,t)||("opacity"===t?1:0)),i&&!~(s+"").trim().indexOf(" ")?c8(e,t,s,i)+i:s},jlt=function(e,t,i,r){if(!i||"none"===i){var s=aA(t,e,1),o=s&&W0(e,s,1);o&&o!==i?(t=s,i=o):"borderColor"===t&&(i=W0(e,"borderTopColor"))}var u,f,p,g,v,_,w,b,x,M,E,a=new iu(this._pt,e.style,t,0,1,Xle),c=0,l=0;if(a.b=i,a.e=r,i+="","auto"==(r+="")&&(e.style[t]=r,r=W0(e,t)||r,e.style[t]=i),Nle(u=[i,r]),r=u[1],p=(i=u[0]).match(Xm)||[],(r.match(Xm)||[]).length){for(;f=Xm.exec(r);)w=f[0],x=r.substring(c,f.index),v?v=(v+1)%5:("rgba("===x.substr(-5)||"hsla("===x.substr(-5))&&(v=1),w!==(_=p[l++]||"")&&(g=parseFloat(_)||0,E=_.substr((g+"").length),"="===w.charAt(1)&&(w=Ym(g,w)+E),b=parseFloat(w),M=w.substr((b+"").length),c=Xm.lastIndex-M.length,M||(M=M||Qu.units[t]||E,c===r.length&&(r+=M,a.e+=M)),E!==M&&(g=c8(e,t,_,M)||0),a._pt={_next:a._pt,p:x||1===l?x:",",s:g,c:b-g,m:v&&v<4||"zIndex"===t?Math.round:0});a.c=c<r.length?r.substring(c,r.length):""}else a.r="display"===t&&"none"===r?r3e:i3e;return hle.test(r)&&(a.e=0),this._pt=a,a},d3e={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},$lt=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return("top"===i||"bottom"===i||"left"===r||"right"===r)&&(e=i,i=r,r=e),t[0]=d3e[i]||i,t[1]=d3e[r]||r,t.join(" ")},Klt=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var a,c,l,i=t.t,r=i.style,s=t.u,o=i._gsap;if("all"===s||!0===s)r.cssText="",c=1;else for(l=(s=s.split(",")).length;--l>-1;)md[a=s[l]]&&(c=1,a="transformOrigin"===a?Fh:ic),Vy(i,a);c&&(Vy(i,ic),o&&(o.svg&&i.removeAttribute("transform"),Gy(i,1),o.uncache=1,s3e(r)))}},$T={clearProps:function(e,t,i,r,s){if("isFromStart"!==s.data){var o=e._pt=new iu(e._pt,t,i,0,0,Klt);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},Uy=[1,0,0,1,0,0],p3e={},g3e=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},m3e=function(e){var t=W0(e,ic);return g3e(t)?Uy:t.substr(7).match(ule).map(Mc)},sV=function(e,t){var o,a,c,l,i=e._gsap||F5(e),r=e.style,s=m3e(e);return i.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(c=e.transform.baseVal.consolidate().matrix).a,c.b,c.c,c.d,c.e,c.f]).join(",")?Uy:s:(s===Uy&&!e.offsetParent&&e!==rA&&!i.svg&&(c=r.display,r.display="block",(!(o=e.parentNode)||!e.offsetParent)&&(l=1,a=e.nextElementSibling,rA.appendChild(e)),s=m3e(e),c?r.display=c:Vy(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):rA.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},oV=function(e,t,i,r,s,o){var k,O,P,a=e._gsap,c=s||sV(e,!0),l=a.xOrigin||0,u=a.yOrigin||0,f=a.xOffset||0,p=a.yOffset||0,g=c[0],v=c[1],_=c[2],w=c[3],b=c[4],x=c[5],M=t.split(" "),E=parseFloat(M[0])||0,I=parseFloat(M[1])||0;i?c!==Uy&&(O=g*w-v*_)&&(P=E*(-v/O)+I*(g/O)-(g*x-v*b)/O,E=E*(w/O)+I*(-_/O)+(_*x-w*b)/O,I=P):(E=(k=u3e(e)).x+(~M[0].indexOf("%")?E/100*k.width:E),I=k.y+(~(M[1]||M[0]).indexOf("%")?I/100*k.height:I)),r||!1!==r&&a.smooth?(a.xOffset=f+((b=E-l)*g+(x=I-u)*_)-b,a.yOffset=p+(b*v+x*w)-x):a.xOffset=a.yOffset=0,a.xOrigin=E,a.yOrigin=I,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[Fh]="0px 0px",o&&(a8(o,a,"xOrigin",l,E),a8(o,a,"yOrigin",u,I),a8(o,a,"xOffset",f,a.xOffset),a8(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",E+" "+I)},Gy=function(e,t){var i=e._gsap||new Qle(e);if("x"in i&&!t&&!i.uncache)return i;var u,f,p,g,v,_,w,b,x,M,E,I,k,O,R,P,Q,J,Ce,Ae,G,ue,X,le,de,pe,Fe,st,ze,_t,pt,kt,r=e.style,s=i.scaleX<0,o="px",a="deg",c=getComputedStyle(e),l=W0(e,Fh)||"0";return u=f=p=_=w=b=x=M=E=0,g=v=1,i.svg=!(!e.getCTM||!h3e(e)),c.translate&&(("none"!==c.translate||"none"!==c.scale||"none"!==c.rotate)&&(r[ic]=("none"!==c.translate?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==c.rotate?"rotate("+c.rotate+") ":"")+("none"!==c.scale?"scale("+c.scale.split(" ").join(",")+") ":"")+c[ic]),r.scale=r.rotate=r.translate="none"),O=sV(e,i.svg),i.svg&&(i.uncache?(de=e.getBBox(),l=i.xOrigin-de.x+"px "+(i.yOrigin-de.y)+"px",le=""):le=!t&&e.getAttribute("data-svg-origin"),oV(e,le||l,!!le||i.originIsAbsolute,!1!==i.smooth,O)),I=i.xOrigin||0,k=i.yOrigin||0,O!==Uy&&(J=O[0],Ce=O[1],Ae=O[2],G=O[3],u=ue=O[4],f=X=O[5],6===O.length?(g=Math.sqrt(J*J+Ce*Ce),v=Math.sqrt(G*G+Ae*Ae),_=J||Ce?oA(Ce,J)*V5:0,(x=Ae||G?oA(Ae,G)*V5+_:0)&&(v*=Math.abs(Math.cos(x*sA))),i.svg&&(u-=I-(I*J+k*Ae),f-=k-(I*Ce+k*G))):(_t=O[7],Fe=O[8],st=O[9],pt=O[11],u=O[12],f=O[13],p=O[14],w=(R=oA(kt=O[6],ze=O[10]))*V5,R&&(le=ue*(P=Math.cos(-R))+Fe*(Q=Math.sin(-R)),de=X*P+st*Q,pe=kt*P+ze*Q,Fe=ue*-Q+Fe*P,st=X*-Q+st*P,ze=kt*-Q+ze*P,pt=_t*-Q+pt*P,ue=le,X=de,kt=pe),b=(R=oA(-Ae,ze))*V5,R&&(P=Math.cos(-R),pt=G*(Q=Math.sin(-R))+pt*P,J=le=J*P-Fe*Q,Ce=de=Ce*P-st*Q,Ae=pe=Ae*P-ze*Q),_=(R=oA(Ce,J))*V5,R&&(le=J*(P=Math.cos(R))+Ce*(Q=Math.sin(R)),de=ue*P+X*Q,Ce=Ce*P-J*Q,X=X*P-ue*Q,J=le,ue=de),w&&Math.abs(w)+Math.abs(_)>359.9&&(w=_=0,b=180-b),g=Mc(Math.sqrt(J*J+Ce*Ce+Ae*Ae)),v=Mc(Math.sqrt(X*X+kt*kt)),R=oA(ue,X),x=Math.abs(R)>2e-4?R*V5:0,E=pt?1/(pt<0?-pt:pt):0),i.svg&&(le=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!g3e(W0(e,ic)),le&&e.setAttribute("transform",le))),Math.abs(x)>90&&Math.abs(x)<270&&(s?(g*=-1,x+=_<=0?180:-180,_+=_<=0?180:-180):(v*=-1,x+=x<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=f-((i.yPercent=f&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=p+o,i.scaleX=Mc(g),i.scaleY=Mc(v),i.rotation=Mc(_)+a,i.rotationX=Mc(w)+a,i.rotationY=Mc(b)+a,i.skewX=x+a,i.skewY=M+a,i.transformPerspective=E+o,(i.zOrigin=parseFloat(l.split(" ")[2])||0)&&(r[Fh]=KT(l)),i.xOffset=i.yOffset=0,i.force3D=Qu.force3D,i.renderTransform=i.svg?Xlt:a3e?A3e:qlt,i.uncache=0,i},KT=function(e){return(e=e.split(" "))[0]+" "+e[1]},aV=function(e,t,i){var r=Dl(t);return Mc(parseFloat(t)+parseFloat(c8(e,"x",i+"px",r)))+r},qlt=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,A3e(e,t)},U5="0deg",Qy="0px",G5=") ",A3e=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,c=i.z,l=i.rotation,u=i.rotationY,f=i.rotationX,p=i.skewX,g=i.skewY,v=i.scaleX,_=i.scaleY,w=i.transformPerspective,b=i.force3D,x=i.target,M=i.zOrigin,E="",I="auto"===b&&e&&1!==e||!0===b;if(M&&(f!==U5||u!==U5)){var P,k=parseFloat(u)*sA,O=Math.sin(k),R=Math.cos(k);k=parseFloat(f)*sA,P=Math.cos(k),o=aV(x,o,O*P*-M),a=aV(x,a,-Math.sin(k)*-M),c=aV(x,c,R*P*-M+M)}w!==Qy&&(E+="perspective("+w+G5),(r||s)&&(E+="translate("+r+"%, "+s+"%) "),(I||o!==Qy||a!==Qy||c!==Qy)&&(E+=c!==Qy||I?"translate3d("+o+", "+a+", "+c+") ":"translate("+o+", "+a+G5),l!==U5&&(E+="rotate("+l+G5),u!==U5&&(E+="rotateY("+u+G5),f!==U5&&(E+="rotateX("+f+G5),(p!==U5||g!==U5)&&(E+="skew("+p+", "+g+G5),(1!==v||1!==_)&&(E+="scale("+v+", "+_+G5),x.style[ic]=E||"translate(0, 0)"},Xlt=function(e,t){var I,k,O,R,P,i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,c=i.rotation,l=i.skewX,u=i.skewY,f=i.scaleX,p=i.scaleY,g=i.target,v=i.xOrigin,_=i.yOrigin,w=i.xOffset,b=i.yOffset,x=i.forceCSS,M=parseFloat(o),E=parseFloat(a);c=parseFloat(c),l=parseFloat(l),(u=parseFloat(u))&&(l+=u=parseFloat(u),c+=u),c||l?(c*=sA,l*=sA,I=Math.cos(c)*f,k=Math.sin(c)*f,O=Math.sin(c-l)*-p,R=Math.cos(c-l)*p,l&&(u*=sA,P=Math.tan(l-u),O*=P=Math.sqrt(1+P*P),R*=P,u&&(P=Math.tan(u),I*=P=Math.sqrt(1+P*P),k*=P)),I=Mc(I),k=Mc(k),O=Mc(O),R=Mc(R)):(I=f,R=p,k=O=0),(M&&!~(o+"").indexOf("px")||E&&!~(a+"").indexOf("px"))&&(M=c8(g,"x",o,"px"),E=c8(g,"y",a,"px")),(v||_||w||b)&&(M=Mc(M+v-(v*I+_*O)+w),E=Mc(E+_-(v*k+_*R)+b)),(r||s)&&(P=g.getBBox(),M=Mc(M+r/100*P.width),E=Mc(E+s/100*P.height)),g.setAttribute("transform",P="matrix("+I+","+k+","+O+","+R+","+M+","+E+")"),x&&(g.style[ic]=P)},Ylt=function(e,t,i,r,s){var f,p,o=360,a=H2(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?V5:1)-r,u=r+l+"deg";return a&&("short"===(f=s.split("_")[1])&&(l%=o)!=l%180&&(l+=l<0?o:-o),"cw"===f&&l<0?l=(l+36e9)%o-~~(l/o)*o:"ccw"===f&&l>0&&(l=(l-36e9)%o-~~(l/o)*o)),e._pt=p=new iu(e._pt,t,i,r,l,klt),p.e=u,p.u="deg",e._props.push(i),p},v3e=function(e,t){for(var i in t)e[i]=t[i];return e},Zlt=function(e,t,i){var a,c,l,u,f,p,v,r=v3e({},i._gsap),o=i.style;for(c in r.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),o[ic]=t,a=Gy(i,1),Vy(i,ic),i.setAttribute("transform",l)):(l=getComputedStyle(i)[ic],o[ic]=t,a=Gy(i,1),o[ic]=l),md)(l=r[c])!==(u=a[c])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(c)<0&&(f=Dl(l)!==(v=Dl(u))?c8(i,c,l,v):parseFloat(l),p=parseFloat(u),e._pt=new iu(e._pt,a,c,f,p-f,tV),e._pt.u=v||0,e._props.push(c));v3e(a,r)};tu("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});$T[e>1?"border"+n:n]=function(a,c,l,u,f){var p,g;if(arguments.length<4)return p=o.map(function(v){return vd(a,v,l)}),5===(g=p.join(" ")).split(p[0]).length?p[0]:g;p=(u+"").split(" "),g={},o.forEach(function(v,_){return g[v]=p[_]=p[_]||p[(_-1)/2|0]}),a.init(c,g,f)}});var _3e={name:"css",register:iV,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var l,u,f,p,g,v,_,w,b,x,M,E,I,k,O,R,o=this._props,a=e.style,c=i.vars.startAt;for(_ in ZN||iV(),this.styles=this.styles||o3e(e),R=this.styles.props,this.tween=i,t)if("autoRound"!==_&&(u=t[_],!ju[_]||!Wle(_,t,i,r,e,s)))if(v=$T[_],"function"==(g=typeof u)&&(g=typeof(u=u.call(i,r,e,s))),"string"===g&&~u.indexOf("random(")&&(u=Py(u)),v)v(this,e,_,u,i)&&(O=1);else if("--"===_.substr(0,2))l=(getComputedStyle(e).getPropertyValue(_)+"").trim(),u+="",r8.lastIndex=0,r8.test(l)||(w=Dl(l),b=Dl(u)),b?w!==b&&(l=c8(e,_,l,b)+b):w&&(u+=w),this.add(a,"setProperty",l,u,r,s,0,0,_),o.push(_),R.push(_,a[_]);else if("undefined"!==g){if(c&&_ in c?(l="function"==typeof c[_]?c[_].call(i,r,e,s):c[_],H2(l)&&~l.indexOf("random(")&&(l=Py(l)),Dl(l+"")||(l+=Qu.units[_]||Dl(vd(e,_))||""),"="===(l+"").charAt(1)&&(l=vd(e,_))):l=vd(e,_),p=parseFloat(l),(x="string"===g&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),f=parseFloat(u),_ in Ad&&("autoAlpha"===_&&(1===p&&"hidden"===vd(e,"visibility")&&f&&(p=0),R.push("visibility",a.visibility),a8(this,a,"visibility",p?"inherit":"hidden",f?"inherit":"hidden",!f)),"scale"!==_&&"transform"!==_&&~(_=Ad[_]).indexOf(",")&&(_=_.split(",")[0])),M=_ in md)if(this.styles.save(_),E||((I=e._gsap).renderTransform&&!t.parseTransform||Gy(e,t.parseTransform),k=!1!==t.smoothOrigin&&I.smooth,(E=this._pt=new iu(this._pt,a,ic,0,1,I.renderTransform,I,0,-1)).dep=1),"scale"===_)this._pt=new iu(this._pt,I,"scaleY",I.scaleY,(x?Ym(I.scaleY,x+f):f)-I.scaleY||0,tV),this._pt.u=0,o.push("scaleY",_),_+="X";else{if("transformOrigin"===_){R.push(Fh,a[Fh]),u=$lt(u),I.svg?oV(e,u,0,k,0,this):((b=parseFloat(u.split(" ")[2])||0)!==I.zOrigin&&a8(this,I,"zOrigin",I.zOrigin,b),a8(this,a,_,KT(l),KT(u)));continue}if("svgOrigin"===_){oV(e,u,1,k,0,this);continue}if(_ in p3e){Ylt(this,I,_,p,x?Ym(p,x+u):u);continue}if("smoothOrigin"===_){a8(this,I,"smooth",I.smooth,u);continue}if("force3D"===_){I[_]=u;continue}if("transform"===_){Zlt(this,u,e);continue}}else _ in a||(_=aA(_)||_);if(M||(f||0===f)&&(p||0===p)&&!Blt.test(u)&&_ in a)f||(f=0),(w=(l+"").substr((p+"").length))!==(b=Dl(u)||(_ in Qu.units?Qu.units[_]:w))&&(p=c8(e,_,l,b)),this._pt=new iu(this._pt,M?I:a,_,p,(x?Ym(p,x+f):f)-p,M||"px"!==b&&"zIndex"!==_||!1===t.autoRound?tV:Plt),this._pt.u=b||0,w!==b&&"%"!==b&&(this._pt.b=l,this._pt.r=Flt);else if(_ in a)jlt.call(this,e,_,l,x?x+u:u);else{if(!(_ in e)){LN(_,u);continue}this.add(e,_,l||e[_],x?x+u:u,r,s)}M||R.push(_,a[_]),o.push(_)}O&&Yle(this)},render:function(e,t){if(t.tween._time||!JN())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:vd,aliases:Ad,getSetter:function(e,t,i){var r=Ad[t];return r&&r.indexOf(",")<0&&(t=r),t in md&&t!==Fh&&(e._gsap.x||vd(e,"x"))?i&&t3e===i?"scale"===t?Nlt:Olt:(t3e=i||{})&&("scale"===t?Vlt:Ult):e.style&&!CN(e.style[t])?Hlt:~t.indexOf("-")?zlt:$N(e,t)},core:{_removeProperty:Vy,_getMatrix:sV}};Ku.utils.checkPrefix=aA,Ku.core.getStyleSaver=o3e,function(n,e,t,i){var r=tu(n+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){md[s]=1});tu(e,function(s){Qu.units[s]="deg",p3e[s]=1}),Ad[r[13]]=n+","+e,tu("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");Ad[o[1]]=r[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),tu("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Qu.units[n]="px"}),Ku.registerPlugin(_3e);var Ph=Ku.registerPlugin(_3e)||Ku;let Jlt=(()=>{class n extends fo{constructor(t,i={}){super(t),this.isReflector=!0,this.type="Reflector",this.camera=new f2;const r=this,s=new In(void 0!==i.color?i.color:8355711),o=i.textureWidth||512,a=i.textureHeight||512,c=i.clipBias||0,l=i.shader||n.ReflectorShader,u=void 0!==i.multisample?i.multisample:4,f=new wh,p=new be,g=new be,v=new be,_=new Zi,w=new be(0,0,-1),b=new Wo,x=new be,M=new be,E=new Wo,I=new Zi,k=this.camera,O=new w4(o,a,{samples:u,type:M0}),R=new tl({uniforms:B6.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});R.uniforms.tDiffuse.value=O.texture,R.uniforms.color.value=s,R.uniforms.textureMatrix.value=I,this.material=R,this.onBeforeRender=function(P,Q,J){if(g.setFromMatrixPosition(r.matrixWorld),v.setFromMatrixPosition(J.matrixWorld),_.extractRotation(r.matrixWorld),p.set(0,0,1),p.applyMatrix4(_),x.subVectors(g,v),x.dot(p)>0)return;x.reflect(p).negate(),x.add(g),_.extractRotation(J.matrixWorld),w.set(0,0,-1),w.applyMatrix4(_),w.add(v),M.subVectors(g,w),M.reflect(p).negate(),M.add(g),k.position.copy(x),k.up.set(0,1,0),k.up.applyMatrix4(_),k.up.reflect(p),k.lookAt(M),k.far=J.far,k.updateMatrixWorld(),k.projectionMatrix.copy(J.projectionMatrix),I.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),I.multiply(k.projectionMatrix),I.multiply(k.matrixWorldInverse),I.multiply(r.matrixWorld),f.setFromNormalAndCoplanarPoint(p,g),f.applyMatrix4(k.matrixWorldInverse),b.set(f.normal.x,f.normal.y,f.normal.z,f.constant);const Ce=k.projectionMatrix;E.x=(Math.sign(b.x)+Ce.elements[8])/Ce.elements[0],E.y=(Math.sign(b.y)+Ce.elements[9])/Ce.elements[5],E.z=-1,E.w=(1+Ce.elements[10])/Ce.elements[14],b.multiplyScalar(2/b.dot(E)),Ce.elements[2]=b.x,Ce.elements[6]=b.y,Ce.elements[10]=b.z+1-c,Ce.elements[14]=b.w,r.visible=!1;const Ae=P.getRenderTarget(),G=P.xr.enabled,ue=P.shadowMap.autoUpdate,X=P.outputEncoding,le=P.toneMapping;P.xr.enabled=!1,P.shadowMap.autoUpdate=!1,P.outputEncoding=zf,P.toneMapping=0,P.setRenderTarget(O),P.state.buffers.depth.setMask(!0),!1===P.autoClear&&P.clear(),P.render(Q,k),P.xr.enabled=G,P.shadowMap.autoUpdate=ue,P.outputEncoding=X,P.toneMapping=le,P.setRenderTarget(Ae);const de=J.viewport;void 0!==de&&P.state.viewport(de),r.visible=!0},this.getRenderTarget=function(){return O},this.dispose=function(){O.dispose(),r.material.dispose()}}}return n.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}"},n})();class e3t{constructor(e){this.height=1.2,this.width=.8,this.bottom=1.2,this.thicknessOSB=.015,this.gap=.1,Object.assign(this,e),this.top=this.bottom+this.height,this.roughHeight=this.height+2*this.gap,this.roughHeightOSB=this.roughHeight+2*this.thicknessOSB,this.roughWidth=this.width+2*this.gap,this.roughWidthOSB=this.roughWidth+2*this.thicknessOSB,this.roughBottom=this.bottom-this.gap,this.roughBottomOSB=this.roughBottom-this.thicknessOSB,this.roughTop=this.top+this.gap,this.roughTopOSB=this.roughTop+this.thicknessOSB}}var vn=(()=>(function(n){n.ground="ground",n.pine="pine",n.osb="osb",n.gips="gips",n.insulation="insulation",n.outerSheet="outerSheet",n.facade="facade",n.tape="tape",n.foam="foam",n.hollowCoreSlap="hollowCoreSlap",n.concrete="concrete",n.white="white",n.whiteWood="whiteWood",n.ral9016="ral9016",n.normals="normals",n.unknown="unknown",n.window="window",n.floor="floor",n.roof="roof",n.wireFrame="wireFrame",n.windowDarkFrame="windowDarkFrame"}(vn||(vn={})),vn))(),Co=(()=>(function(n){n.hollowCoreSlap="hollowCoreSlap",n.hollowCoreSlapSide="hollowCoreSlapSide",n.foam="foam",n.gips="gips",n.pine="pine",n.concrete="concrete",n.osb="osb",n.whiteWood="whiteWood",n.insulation="insulation",n.roof="roof",n.fishbone="fishbone"}(Co||(Co={})),Co))();const t3t=[{key:Co.hollowCoreSlap,url:"assets/textures/hollowCoreSlap.jpg",offset:[0,0],scale:[.7,1]},{key:Co.hollowCoreSlapSide,url:"assets/textures/hollowCoreSlapSide.jpg"},{key:Co.foam,url:"assets/textures/foam.jpg"},{key:Co.gips,url:"assets/textures/gips.jpg"},{key:Co.pine,url:"assets/textures/western-yellow-pine.jpg"},{key:Co.concrete,url:"assets/textures/hollowCoreSlapPlain.jpg"},{key:Co.whiteWood,url:"assets/textures/whiteWood.jpg"},{key:Co.osb,url:"assets/textures/osb.jpg"},{key:Co.fishbone,url:"assets/textures/fishbone.jpg",rotation:90,scale:[.6,.6]},{key:Co.insulation,url:"assets/textures/insulation.png"},{key:Co.roof,url:"assets/textures/roof.png",rotation:90,scale:[.4,.4]}];let qT=(()=>{class n{constructor(t,i){this.cookieService=t,this.httpClient=i,this.colors={},this.textures={},[0,5,10,15,20,30,40,50,60,70,80,90,100].forEach(r=>{this.colors[r]=getComputedStyle(document.body).getPropertyValue(`--color-${r}`).trim()}),this.generateTextures()}generateTextures(){t3t.forEach(t=>{var i=new Image,r=new y4;r.image=i,i.onload=function(){t.scale||(t.scale=[1,1]),t.offset||(t.offset=[0,0]),r.wrapS=r.wrapT=C0,r.offset.set(t.offset[0],t.offset[1]),r.repeat.set(t.scale[0],t.scale[1]),t.rotation&&(r.rotation=Ei(t.rotation)),r.needsUpdate=!0},this.textures[t.key]=r,this.httpClient.get(t.url,{responseType:"arraybuffer",headers:{"cache-control":"private, max-age=3600"}}).subscribe(s=>{const o=new Uint8Array(s);this.cookieService.set(`texture-${t.key}`,`${JSON.stringify(o).slice(0,100)}`);var a=new Blob([o.buffer],{type:"image/png"}),c=URL.createObjectURL(a);this.textures[t.key].image.src=c})})}getMaterial(t,i=!1){let r=[new Pa({color:65280})];if(t===vn.pine&&(r=[new Pa({map:this.textures[Co.pine]})]),t===vn.floor&&(r=[new Pa({map:this.textures[Co.fishbone]})]),t===vn.ral9016&&(r=[new Pa({color:15855850,bumpMap:this.textures[Co.pine],bumpScale:.05})]),t===vn.white&&(r=[new Pa({color:16777215,bumpMap:this.textures[Co.pine],bumpScale:.05})]),t===vn.windowDarkFrame&&(r=[new Pa({color:3355443})]),t===vn.normals&&(r=[new eH({})]),t===vn.roof&&(r=[new Pa({color:15592934,map:this.textures[Co.roof],bumpMap:this.textures[Co.roof]})]),t===vn.wireFrame&&(r=[new Pa({wireframe:!0})]),t===vn.whiteWood&&(r=[new Pa({map:this.textures[Co.whiteWood]})]),t===vn.osb&&(r=[new Pa({map:this.textures[Co.osb]})]),t===vn.hollowCoreSlap){const s=this.textures[Co.hollowCoreSlapSide],o=this.textures[Co.concrete],a=this.textures[Co.hollowCoreSlap],c=this.textures[Co.foam];r=[new Pa({map:s}),new Pa({map:s}),new Pa({map:o}),new Pa({map:c}),new Pa({map:a}),new Pa({map:a})]}if(t===vn.gips&&(r=[new Pa({map:this.textures[Co.gips]})]),t===vn.ground&&(r=[new Pa({color:this.colors[10]})]),t===vn.concrete&&(r=[new Pa({map:this.textures[Co.concrete]})]),t===vn.tape&&(r=[new Pa({color:7829367})]),t===vn.foam&&(r=[new Pa({map:this.textures[Co.foam]})]),t===vn.insulation&&(r=[new Pa({map:this.textures[Co.insulation]})]),t===vn.window&&(r=[new Kf({depthWrite:!1,color:16777215,transmission:.9,opacity:.5,metalness:0,roughness:0,ior:1.5,transparent:!0,specularIntensity:1,specularColor:new In(16777215)})]),t===vn.outerSheet){const s=new Pa({map:this.textures[Co.insulation]});r=[s],s.color=new In(6372634)}if(t===vn.facade){const s=this.textures[Co.pine];s.rotation=Ei(90),s.repeat.set(4,.3);const o=new Pa({map:s});r=[o],o.color=new In(8394776)}return 1===r.length&&(r=[r[0],r[0],r[0],r[0],r[0],r[0]]),r.forEach(s=>{s.transparent=!0,s.needsUpdate=!0}),i?r[0]:r}}return n.\u0275fac=function(t){return new(t||n)(Xe(U3),Xe(dh))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class cV{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y,this.array[this.top++]=e.z}}class n3t{constructor(e){this.top=0,this.array=new Float32Array(e)}write(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y}}class j0{constructor(e){this.plane=null,this.front=null,this.back=null,this.polygons=[],e&&this.build(e)}clone(){const e=new j0;return e.plane=this.plane&&this.plane.clone(),e.front=this.front&&this.front.clone(),e.back=this.back&&this.back.clone(),e.polygons=this.polygons.map(t=>t.clone()),e}invert(){for(let t=0;t<this.polygons.length;t++)this.polygons[t].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();const e=this.front;this.front=this.back,this.back=e}clipPolygons(e){if(!this.plane)return e.slice();let t=new Array,i=new Array;for(let r=0;r<e.length;r++)this.plane.splitPolygon(e[r],t,i,t,i);return this.front&&(t=this.front.clipPolygons(t)),i=this.back?this.back.clipPolygons(i):[],t.concat(i)}clipTo(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)}allPolygons(){let e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e}build(e){if(!e.length)return;this.plane||(this.plane=e[0].plane.clone());const t=[],i=[];for(let r=0;r<e.length;r++)this.plane.splitPolygon(e[r],this.polygons,this.polygons,t,i);t.length&&(this.front||(this.front=new j0),this.front.build(t)),i.length&&(this.back||(this.back=new j0),this.back.build(i))}}class ru{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}clone(){return new ru(this.x,this.y,this.z)}negate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}times(e){return this.x*=e,this.y*=e,this.z*=e,this}dividedBy(e){return this.x/=e,this.y/=e,this.z/=e,this}lerp(e,t){return this.add((new ru).copy(e).sub(this).times(t))}unit(){return this.dividedBy(this.length())}length(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))}normalize(){return this.unit()}cross(e){const t=this.clone(),i=t.x,r=t.y,s=t.z,o=e.x,a=e.y,c=e.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}toVector3(){return new be(this.x,this.y,this.z)}}let i3t=(()=>{class n{constructor(t,i){this.normal=t,this.w=i,this.normal=t,this.w=i}clone(){return new n(this.normal.clone(),this.w)}flip(){this.normal.negate(),this.w=-this.w}splitPolygon(t,i,r,s,o){let f=0;const p=[];for(let g=0;g<t.vertices.length;g++){const v=this.normal.dot(t.vertices[g].pos)-this.w,_=v<-n.EPSILON?2:v>n.EPSILON?1:0;f|=_,p.push(_)}switch(f){case 0:(this.normal.dot(t.plane.normal)>0?i:r).push(t);break;case 1:s.push(t);break;case 2:o.push(t);break;case 3:{const g=[],v=[];for(let _=0;_<t.vertices.length;_++){const w=(_+1)%t.vertices.length,b=p[_],x=p[w],M=t.vertices[_],E=t.vertices[w];if(2!=b&&g.push(M),1!=b&&v.push(2!=b?M.clone():M),3==(b|x)){const I=(this.w-this.normal.dot(M.pos))/this.normal.dot((new ru).copy(E.pos).sub(M.pos)),k=M.interpolate(E,I);g.push(k),v.push(k.clone())}}g.length>=3&&s.push(new cA(g,t.shared)),v.length>=3&&o.push(new cA(v,t.shared));break}}}static fromPoints(t,i,r){const s=(new ru).copy(i).sub(t).cross((new ru).copy(r).sub(t)).normalize();return new n(s.clone(),s.dot(t))}}return n.EPSILON=1e-5,n})();class cA{constructor(e,t){this.vertices=e,this.shared=t,this.plane=i3t.fromPoints(e[0].pos,e[1].pos,e[2].pos)}clone(){return new cA(this.vertices.map(e=>e.clone()),this.shared)}flip(){this.vertices.reverse().map(e=>e.flip()),this.plane.flip()}}class XT{constructor(e,t,i,r){this.pos=(new ru).copy(e),this.normal=(new ru).copy(t),this.uv=(new ru).copy(i),this.uv.z=0,r&&(this.color=(new ru).copy(r))}clone(){return new XT(this.pos,this.normal,this.uv,this.color)}flip(){this.normal.negate()}interpolate(e,t){return new XT(this.pos.clone().lerp(e.pos,t),this.normal.clone().lerp(e.normal,t),this.uv.clone().lerp(e.uv,t),this.color&&e.color&&this.color.clone().lerp(e.color,t))}}class g1{constructor(){this.polygons=new Array}static fromPolygons(e){const t=new g1;return t.polygons=e,t}static fromGeometry(e,t){let i=[];const r=e.attributes.position,s=e.attributes.normal,o=e.attributes.uv,a=e.attributes.color,c=e.groups;let l;if(e.index)l=e.index.array;else{l=new Array(r.array.length/r.itemSize|0);for(let f=0;f<l.length;f++)l[f]=f}i=new Array(l.length/3|0);for(let f=0,p=0,g=l.length;f<g;f+=3,p++){const v=new Array(3);for(let _=0;_<3;_++){const w=l[f+_],b=3*w,x=2*w,k=s.array[b],O=s.array[b+1],R=s.array[b+2],P=o?.array[x],Q=o?.array[x+1];v[_]=new XT(new ru(r.array[b],r.array[b+1],r.array[b+2]),new ru(k,O,R),new ru(P,Q,0),a&&new ru(a.array[x],a.array[x+1],a.array[x+2]))}if(void 0===t&&c&&c.length>0)for(const _ of c)f>=_.start&&f<_.start+_.count&&(i[p]=new cA(v,_.materialIndex));else i[p]=new cA(v,t)}return g1.fromPolygons(i.filter(f=>!isNaN(f.plane.normal.x)))}static toGeometry(e,t){let i=0;const r=e.polygons;for(const g of r)i+=g.vertices.length-2;const s=new Tr,o=new cV(3*i*3),a=new cV(3*i*3),c=new n3t(2*i*3);let l;const u=[],f=[];for(const g of r){const v=g.vertices,_=v.length;void 0!==g.shared&&(u[g.shared]||(u[g.shared]=[])),_&&void 0!==v[0].color&&(l||(l=new cV(3*i*3)));for(let w=3;w<=_;w++)(void 0===g.shared?f:u[g.shared]).push(o.top/3,o.top/3+1,o.top/3+2),o.write(v[0].pos),o.write(v[w-2].pos),o.write(v[w-1].pos),a.write(v[0].normal),a.write(v[w-2].normal),a.write(v[w-1].normal),c&&(c.write(v[0].uv),c.write(v[w-2].uv),c.write(v[w-1].uv)),l&&(l.write(v[0].color),l.write(v[w-2].color),l.write(v[w-1].color))}s.setAttribute("position",new h1(o.array,3)),s.setAttribute("normal",new h1(a.array,3)),c&&s.setAttribute("uv",new h1(c.array,2)),l&&s.setAttribute("color",new h1(l.array,3));for(let g=0;g<u.length;g++)void 0===u[g]&&(u[g]=[]);if(u.length){let g=[],v=0;for(let _=0;_<u.length;_++)s.addGroup(v,u[_].length,_),v+=u[_].length,g=g.concat(u[_]);s.addGroup(v,f.length,u.length),g=g.concat(f),s.setIndex(g)}const p=(new Zi).copy(t).invert();return s.applyMatrix4(p),s.computeBoundingSphere(),s.computeBoundingBox(),s}static fromMesh(e,t){const i=g1.fromGeometry(e.geometry,t),r=new be,s=new Q3;s.getNormalMatrix(e.matrix);for(let o=0;o<i.polygons.length;o++){const a=i.polygons[o];for(let c=0;c<a.vertices.length;c++){const l=a.vertices[c];l.pos.copy(r.copy(l.pos.toVector3()).applyMatrix4(e.matrix)),l.normal.copy(r.copy(l.normal.toVector3()).applyMatrix3(s))}}return i}static toMesh(e,t,i){const r=g1.toGeometry(e,t),s=new fo(r,i);return s.matrix.copy(t),s.matrix.decompose(s.position,s.quaternion,s.scale),s.rotation.setFromQuaternion(s.quaternion),s.updateMatrixWorld(),s.castShadow=s.receiveShadow=!0,s}static union(e,t){const i=g1.fromMesh(e),r=g1.fromMesh(t);return g1.toMesh(i.union(r),e.matrix,e.material)}static subtract(e,t){const i=g1.fromMesh(e),r=g1.fromMesh(t);return g1.toMesh(i.subtract(r),e.matrix,e.material)}static intersect(e,t){const i=g1.fromMesh(e),r=g1.fromMesh(t);return g1.toMesh(i.intersect(r),e.matrix,e.material)}clone(){const e=new g1;return e.polygons=this.polygons.map(t=>t.clone()).filter(t=>Number.isFinite(t.plane.w)),e}toPolygons(){return this.polygons}union(e){const t=new j0(this.clone().polygons),i=new j0(e.clone().polygons);return t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),g1.fromPolygons(t.allPolygons())}subtract(e){const t=new j0(this.clone().polygons),i=new j0(e.clone().polygons);return t.invert(),t.clipTo(i),i.clipTo(t),i.invert(),i.clipTo(t),i.invert(),t.build(i.allPolygons()),t.invert(),g1.fromPolygons(t.allPolygons())}intersect(e){const t=new j0(this.clone().polygons),i=new j0(e.clone().polygons);return t.invert(),i.clipTo(t),i.invert(),t.clipTo(i),i.clipTo(t),t.build(i.allPolygons()),t.invert(),g1.fromPolygons(t.allPolygons())}inverse(){const e=this.clone();for(const t of e.polygons)t.flip();return e}toMesh(e,t){return g1.toMesh(this,e,t)}toGeometry(e){return g1.toGeometry(this,e)}}const y3e={type:"change"},lV={type:"start"},w3e={type:"end"};class r3t extends Op{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new be,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Pe){Pe.addEventListener("keydown",Ss),this._domElementKeyEvents=Pe},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(y3e),i.update(),s=r.NONE},this.update=function(){const Pe=new be,nn=(new J2).setFromUnitVectors(e.up,new be(0,1,0)),dn=nn.clone().invert(),Yn=new be,Zn=new J2,ur=2*Math.PI;return function(){const ia=i.object.position;Pe.copy(ia).sub(i.target),Pe.applyQuaternion(nn),a.setFromVector3(Pe),i.autoRotate&&s===r.NONE&&P(function O(){return 2*Math.PI/60/60*i.autoRotateSpeed}()),i.enableDamping?(a.theta+=c.theta*i.dampingFactor,a.phi+=c.phi*i.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let ut=i.minAzimuthAngle,Fn=i.maxAzimuthAngle;return isFinite(ut)&&isFinite(Fn)&&(ut<-Math.PI?ut+=ur:ut>Math.PI&&(ut-=ur),Fn<-Math.PI?Fn+=ur:Fn>Math.PI&&(Fn-=ur),a.theta=ut<=Fn?Math.max(ut,Math.min(Fn,a.theta)):a.theta>(ut+Fn)/2?Math.max(ut,a.theta):Math.min(Fn,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),Pe.setFromSpherical(a),Pe.applyQuaternion(dn),ia.copy(i.target).add(Pe),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),u.set(0,0,0)),l=1,!!(f||Yn.distanceToSquared(i.object.position)>o||8*(1-Zn.dot(i.object.quaternion))>o)&&(i.dispatchEvent(y3e),Yn.copy(i.object.position),Zn.copy(i.object.quaternion),f=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",It),i.domElement.removeEventListener("pointerdown",wn),i.domElement.removeEventListener("pointercancel",Cn),i.domElement.removeEventListener("wheel",mr),i.domElement.removeEventListener("pointermove",ei),i.domElement.removeEventListener("pointerup",Tn),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",Ss)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new gre,c=new gre;let l=1;const u=new be;let f=!1;const p=new Yt,g=new Yt,v=new Yt,_=new Yt,w=new Yt,b=new Yt,x=new Yt,M=new Yt,E=new Yt,I=[],k={};function R(){return Math.pow(.95,i.zoomSpeed)}function P(Pe){c.theta-=Pe}function Q(Pe){c.phi-=Pe}const J=function(){const Pe=new be;return function(dn,Yn){Pe.setFromMatrixColumn(Yn,0),Pe.multiplyScalar(-dn),u.add(Pe)}}(),Ce=function(){const Pe=new be;return function(dn,Yn){!0===i.screenSpacePanning?Pe.setFromMatrixColumn(Yn,1):(Pe.setFromMatrixColumn(Yn,0),Pe.crossVectors(i.object.up,Pe)),Pe.multiplyScalar(dn),u.add(Pe)}}(),Ae=function(){const Pe=new be;return function(dn,Yn){const Zn=i.domElement;if(i.object.isPerspectiveCamera){Pe.copy(i.object.position).sub(i.target);let Xr=Pe.length();Xr*=Math.tan(i.object.fov/2*Math.PI/180),J(2*dn*Xr/Zn.clientHeight,i.object.matrix),Ce(2*Yn*Xr/Zn.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(J(dn*(i.object.right-i.object.left)/i.object.zoom/Zn.clientWidth,i.object.matrix),Ce(Yn*(i.object.top-i.object.bottom)/i.object.zoom/Zn.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function G(Pe){i.object.isPerspectiveCamera?l/=Pe:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*Pe)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ue(Pe){i.object.isPerspectiveCamera?l*=Pe:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/Pe)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function X(Pe){p.set(Pe.clientX,Pe.clientY)}function de(Pe){_.set(Pe.clientX,Pe.clientY)}function pt(){1===I.length?p.set(I[0].pageX,I[0].pageY):p.set(.5*(I[0].pageX+I[1].pageX),.5*(I[0].pageY+I[1].pageY))}function kt(){1===I.length?_.set(I[0].pageX,I[0].pageY):_.set(.5*(I[0].pageX+I[1].pageX),.5*(I[0].pageY+I[1].pageY))}function wt(){const Pe=I[0].pageX-I[1].pageX,nn=I[0].pageY-I[1].pageY,dn=Math.sqrt(Pe*Pe+nn*nn);x.set(0,dn)}function _n(Pe){if(1==I.length)g.set(Pe.pageX,Pe.pageY);else{const dn=Mi(Pe);g.set(.5*(Pe.pageX+dn.x),.5*(Pe.pageY+dn.y))}v.subVectors(g,p).multiplyScalar(i.rotateSpeed);const nn=i.domElement;P(2*Math.PI*v.x/nn.clientHeight),Q(2*Math.PI*v.y/nn.clientHeight),p.copy(g)}function an(Pe){if(1===I.length)w.set(Pe.pageX,Pe.pageY);else{const nn=Mi(Pe);w.set(.5*(Pe.pageX+nn.x),.5*(Pe.pageY+nn.y))}b.subVectors(w,_).multiplyScalar(i.panSpeed),Ae(b.x,b.y),_.copy(w)}function bi(Pe){const nn=Mi(Pe),dn=Pe.pageX-nn.x,Yn=Pe.pageY-nn.y,Zn=Math.sqrt(dn*dn+Yn*Yn);M.set(0,Zn),E.set(0,Math.pow(M.y/x.y,i.zoomSpeed)),G(E.y),x.copy(M)}function wn(Pe){!1!==i.enabled&&(0===I.length&&(i.domElement.setPointerCapture(Pe.pointerId),i.domElement.addEventListener("pointermove",ei),i.domElement.addEventListener("pointerup",Tn)),function yn(Pe){I.push(Pe)}(Pe),"touch"===Pe.pointerType?function Ge(Pe){switch(kn(Pe),I.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;pt(),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;kt(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Xt(){i.enableZoom&&wt(),i.enablePan&&kt()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function un(){i.enableZoom&&wt(),i.enableRotate&&pt()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(lV)}(Pe):function $n(Pe){let nn;switch(Pe.button){case 0:nn=i.mouseButtons.LEFT;break;case 1:nn=i.mouseButtons.MIDDLE;break;case 2:nn=i.mouseButtons.RIGHT;break;default:nn=-1}switch(nn){case 1:if(!1===i.enableZoom)return;(function le(Pe){x.set(Pe.clientX,Pe.clientY)})(Pe),s=r.DOLLY;break;case 0:if(Pe.ctrlKey||Pe.metaKey||Pe.shiftKey){if(!1===i.enablePan)return;de(Pe),s=r.PAN}else{if(!1===i.enableRotate)return;X(Pe),s=r.ROTATE}break;case 2:if(Pe.ctrlKey||Pe.metaKey||Pe.shiftKey){if(!1===i.enableRotate)return;X(Pe),s=r.ROTATE}else{if(!1===i.enablePan)return;de(Pe),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(lV)}(Pe))}function ei(Pe){!1!==i.enabled&&("touch"===Pe.pointerType?function Me(Pe){switch(kn(Pe),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;_n(Pe),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;an(Pe),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Vt(Pe){i.enableZoom&&bi(Pe),i.enablePan&&an(Pe)})(Pe),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Pt(Pe){i.enableZoom&&bi(Pe),i.enableRotate&&_n(Pe)})(Pe),i.update();break;default:s=r.NONE}}(Pe):function yi(Pe){switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function pe(Pe){g.set(Pe.clientX,Pe.clientY),v.subVectors(g,p).multiplyScalar(i.rotateSpeed);const nn=i.domElement;P(2*Math.PI*v.x/nn.clientHeight),Q(2*Math.PI*v.y/nn.clientHeight),p.copy(g),i.update()}(Pe);break;case r.DOLLY:if(!1===i.enableZoom)return;!function Fe(Pe){M.set(Pe.clientX,Pe.clientY),E.subVectors(M,x),E.y>0?G(R()):E.y<0&&ue(R()),x.copy(M),i.update()}(Pe);break;case r.PAN:if(!1===i.enablePan)return;!function st(Pe){w.set(Pe.clientX,Pe.clientY),b.subVectors(w,_).multiplyScalar(i.panSpeed),Ae(b.x,b.y),_.copy(w),i.update()}(Pe)}}(Pe))}function Tn(Pe){Mn(Pe),0===I.length&&(i.domElement.releasePointerCapture(Pe.pointerId),i.domElement.removeEventListener("pointermove",ei),i.domElement.removeEventListener("pointerup",Tn)),i.dispatchEvent(w3e),s=r.NONE}function Cn(Pe){Mn(Pe)}function mr(Pe){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(Pe.preventDefault(),i.dispatchEvent(lV),function ze(Pe){Pe.deltaY<0?ue(R()):Pe.deltaY>0&&G(R()),i.update()}(Pe),i.dispatchEvent(w3e))}function Ss(Pe){!1===i.enabled||!1===i.enablePan||function _t(Pe){let nn=!1;switch(Pe.code){case i.keys.UP:Ae(0,i.keyPanSpeed),nn=!0;break;case i.keys.BOTTOM:Ae(0,-i.keyPanSpeed),nn=!0;break;case i.keys.LEFT:Ae(i.keyPanSpeed,0),nn=!0;break;case i.keys.RIGHT:Ae(-i.keyPanSpeed,0),nn=!0}nn&&(Pe.preventDefault(),i.update())}(Pe)}function It(Pe){!1!==i.enabled&&Pe.preventDefault()}function Mn(Pe){delete k[Pe.pointerId];for(let nn=0;nn<I.length;nn++)if(I[nn].pointerId==Pe.pointerId)return void I.splice(nn,1)}function kn(Pe){let nn=k[Pe.pointerId];void 0===nn&&(nn=new Yt,k[Pe.pointerId]=nn),nn.set(Pe.pageX,Pe.pageY)}function Mi(Pe){return k[(Pe.pointerId===I[0].pointerId?I[1]:I[0]).pointerId]}i.domElement.addEventListener("contextmenu",It),i.domElement.addEventListener("pointerdown",wn),i.domElement.addEventListener("pointercancel",Cn),i.domElement.addEventListener("wheel",mr,{passive:!1}),this.update()}}class s3t extends bUe{constructor(e){super(e),this.type=M0}parse(e){const a=function(M,E){switch(M){case 1:console.error("THREE.RGBELoader Read Error: "+(E||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(E||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(E||""));break;default:console.error("THREE.RGBELoader: Error: "+(E||""))}return-1},p=function(M,E,I){E=E||1024;let O=M.pos,R=-1,P=0,Q="",J=String.fromCharCode.apply(null,new Uint16Array(M.subarray(O,O+128)));for(;0>(R=J.indexOf("\n"))&&P<E&&O<M.byteLength;)Q+=J,P+=J.length,O+=128,J+=String.fromCharCode.apply(null,new Uint16Array(M.subarray(O,O+128)));return-1<R&&(!1!==I&&(M.pos+=P+R+1),Q+J.slice(0,R))},_=function(M,E,I,k){const R=Math.pow(2,M[E+3]-128)/255;I[k+0]=M[E+0]*R,I[k+1]=M[E+1]*R,I[k+2]=M[E+2]*R,I[k+3]=1},w=function(M,E,I,k){const R=Math.pow(2,M[E+3]-128)/255;I[k+0]=bS.toHalfFloat(Math.min(M[E+0]*R,65504)),I[k+1]=bS.toHalfFloat(Math.min(M[E+1]*R,65504)),I[k+2]=bS.toHalfFloat(Math.min(M[E+2]*R,65504)),I[k+3]=bS.toHalfFloat(1)},b=new Uint8Array(e);b.pos=0;const x=function(M){const I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,k=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,O=/^\s*FORMAT=(\S+)\s*$/,R=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,P={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Q,J;if(M.pos>=M.byteLength||!(Q=p(M)))return a(1,"no header found");if(!(J=Q.match(/^#\?(\S+)/)))return a(3,"bad initial token");for(P.valid|=1,P.programtype=J[1],P.string+=Q+"\n";Q=p(M),!1!==Q;)if(P.string+=Q+"\n","#"!==Q.charAt(0)){if((J=Q.match(I))&&(P.gamma=parseFloat(J[1])),(J=Q.match(k))&&(P.exposure=parseFloat(J[1])),(J=Q.match(O))&&(P.valid|=2,P.format=J[1]),(J=Q.match(R))&&(P.valid|=4,P.height=parseInt(J[1],10),P.width=parseInt(J[2],10)),2&P.valid&&4&P.valid)break}else P.comments+=Q+"\n";return 2&P.valid?4&P.valid?P:a(3,"missing image size specifier"):a(3,"missing format specifier")}(b);if(-1!==x){const M=x.width,E=x.height,I=function(M,E,I){const k=E;if(k<8||k>32767||2!==M[0]||2!==M[1]||128&M[2])return new Uint8Array(M);if(k!==(M[2]<<8|M[3]))return a(3,"wrong scanline width");const O=new Uint8Array(4*E*I);if(!O.length)return a(4,"unable to allocate buffer space");let R=0,P=0;const Q=4*k,J=new Uint8Array(4),Ce=new Uint8Array(Q);let Ae=I;for(;Ae>0&&P<M.byteLength;){if(P+4>M.byteLength)return a(1);if(J[0]=M[P++],J[1]=M[P++],J[2]=M[P++],J[3]=M[P++],2!=J[0]||2!=J[1]||(J[2]<<8|J[3])!=k)return a(3,"bad rgbe scanline format");let ue,G=0;for(;G<Q&&P<M.byteLength;){ue=M[P++];const le=ue>128;if(le&&(ue-=128),0===ue||G+ue>Q)return a(3,"bad scanline data");if(le){const de=M[P++];for(let pe=0;pe<ue;pe++)Ce[G++]=de}else Ce.set(M.subarray(P,P+ue),G),G+=ue,P+=ue}const X=k;for(let le=0;le<X;le++){let de=0;O[R]=Ce[le+de],de+=k,O[R+1]=Ce[le+de],de+=k,O[R+2]=Ce[le+de],de+=k,O[R+3]=Ce[le+de],R+=4}Ae--}return O}(b.subarray(b.pos),M,E);if(-1!==I){let k,O,R;switch(this.type){case _4:R=I.length/4;const P=new Float32Array(4*R);for(let J=0;J<R;J++)_(I,4*J,P,4*J);k=P,O=_4;break;case M0:R=I.length/4;const Q=new Uint16Array(4*R);for(let J=0;J<R;J++)w(I,4*J,Q,4*J);k=Q,O=M0;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:M,height:E,data:k,header:x.string,gamma:x.gamma,exposure:x.exposure,type:O}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,r){return super.load(e,function s(o,a){switch(o.type){case _4:case M0:o.encoding=zf,o.minFilter=u1,o.magFilter=u1,o.generateMipmaps=!1,o.flipY=!0}t&&t(o,a)},i,r)}}class $0{constructor(e,t,i,r,s="div"){this.parent=e,this.object=t,this.property=i,this._disabled=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),$0.nextNameID=$0.nextNameID||0,this.$name.id="lil-gui-name-"+ ++$0.nextNameID,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback),this.updateDisplay()}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class o3t extends $0{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function uV(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!t&&"#"+t}const a3t={isPrimitive:!0,match:n=>"string"==typeof n,fromHexString:uV,toHexString:uV},Wy={isPrimitive:!0,match:n=>"number"==typeof n,fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},c3t={isPrimitive:!1,match:Array.isArray,fromHexString(n,e,t=1){const i=Wy.fromHexString(n);e[0]=(i>>16&255)/255*t,e[1]=(i>>8&255)/255*t,e[2]=(255&i)/255*t},toHexString:([n,e,t],i=1)=>Wy.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)},l3t={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){const i=Wy.fromHexString(n);e.r=(i>>16&255)/255*t,e.g=(i>>8&255)/255*t,e.b=(255&i)/255*t},toHexString:({r:n,g:e,b:t},i=1)=>Wy.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)},u3t=[a3t,Wy,c3t,l3t];class h3t extends $0{constructor(e,t,i,r){var s;super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(s=this.initialValue,u3t.find(o=>o.match(s))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const o=uV(this.$text.value);o&&this._setValueFromHexString(o)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class hV extends $0{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{}),this.$disable=this.$button}}class f3t extends $0{constructor(e,t,i,r,s,o){super(e,t,i,"number"),this._initInput(),this.min(r),this.max(s);const a=void 0!==o;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=e),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=u=>{const f=parseFloat(this.$input.value);isNaN(f)||(this._snapClampSetValue(f+u),this.$input.value=this.getValue())};let t,i,r,s,o,a=!1;const c=u=>{if(a){const f=u.clientX-t;Math.abs(u.clientY-i)>5?(u.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(f)>5&&l()}a||(o-=(u.clientY-r)*this._step*this._arrowKeyMultiplier(u),s+o>this._max?o=this._max-s:s+o<this._min&&(o=this._min-s),this._snapClampSetValue(s+o)),r=u.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",()=>{const u=parseFloat(this.$input.value);isNaN(u)||this.setValue(this._clamp(u))}),this.$input.addEventListener("keydown",u=>{"Enter"===u.code&&this.$input.blur(),"ArrowUp"===u.code&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u))),"ArrowDown"===u.code&&(u.preventDefault(),e(this._step*this._arrowKeyMultiplier(u)*-1))}),this.$input.addEventListener("wheel",u=>{this._inputFocused&&(u.preventDefault(),e(this._step*this._normalizeMouseWheel(u)))}),this.$input.addEventListener("mousedown",u=>{t=u.clientX,i=r=u.clientY,a=!0,s=this.getValue(),o=0,window.addEventListener("mousemove",c),window.addEventListener("mouseup",l)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=p=>{const g=this.$slider.getBoundingClientRect();let v=(p-(w=g.left))/(g.right-w)*(this._max-(x=this._min))+x;var w,x;this._snapClampSetValue(v)},t=p=>{e(p.clientX)},i=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",i)};let r,s,o=!1;const a=p=>{p.preventDefault(),this._setDraggingStyle(!0),e(p.touches[0].clientX),o=!1},c=p=>{if(o){const v=p.touches[0].clientY-s;Math.abs(p.touches[0].clientX-r)>Math.abs(v)?a(p):(window.removeEventListener("touchmove",c),window.removeEventListener("touchend",l))}else p.preventDefault(),e(p.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",l)},u=this._callOnFinishChange.bind(this);let f;this.$slider.addEventListener("mousedown",p=>{this._setDraggingStyle(!0),e(p.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",i)}),this.$slider.addEventListener("touchstart",p=>{p.touches.length>1||(this._hasScrollBar?(r=p.touches[0].clientX,s=p.touches[0].clientY,o=!0):a(p),window.addEventListener("touchmove",c),window.addEventListener("touchend",l))}),this.$slider.addEventListener("wheel",p=>{if(Math.abs(p.deltaX)<Math.abs(p.deltaY)&&this._hasScrollBar)return;p.preventDefault();const g=this._normalizeMouseWheel(p)*this._step;this._snapClampSetValue(this.getValue()+g),this.$input.value=this.getValue(),clearTimeout(f),f=setTimeout(u,400)})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+t,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),t+-i}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class d3t extends $0{constructor(e,t,i,r){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(s=>{const o=document.createElement("option");o.innerHTML=s,this.$select.appendChild(o)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class p3t extends $0{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{"Enter"===r.code&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let b3e=!1;class fV{constructor({parent:e,autoPlace:t=void 0===e,container:i,width:r,title:s="Controls",injectStyles:o=!0,touchStyles:a=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",c=>{"Enter"!==c.code&&"Space"!==c.code||(c.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!b3e&&o&&(function(c){const l=document.createElement("style");l.innerHTML='.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"\u2195";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"\u25be";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"\u25b8"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"\u2713";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}';const u=document.querySelector("head link[rel=stylesheet], head style");u?document.head.insertBefore(l,u):document.head.appendChild(l)}(),b3e=!0),i?i.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",c=>c.stopPropagation()),this.domElement.addEventListener("keyup",c=>c.stopPropagation())}add(e,t,i,r,s){if(Object(i)===i)return new d3t(this,e,t,i);const o=e[t];switch(typeof o){case"number":return new f3t(this,e,t,i,r,s);case"boolean":return new o3t(this,e,t);case"string":return new p3t(this,e,t);case"function":return new hV(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",o)}addColor(e,t,i=1){return new h3t(this,e,t,i)}addFolder(e){return new fV({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(i=>{i instanceof hV||i._name in e.controllers&&i.load(e.controllers[i._name])}),t&&e.folders&&this.folders.forEach(i=>{i._title in e.folders&&i.load(e.folders[i._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof hV)){if(i._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);t.controllers[i._name]=i.save()}}),e&&this.folders.forEach(i=>{if(i._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);t.folders[i._title]=i.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{this.$children.style.height=this.$children.clientHeight+"px",this.domElement.classList.add("transition");const i=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(t=>t.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}const jy={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class YT{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const g3t=new $p(-1,1,1,-1,0,1),dV=new Tr;dV.setAttribute("position",new fi([-1,3,0,-1,-1,0,3,-1,0],3)),dV.setAttribute("uv",new fi([0,2,0,0,2,0],2));class x3e{constructor(e){this._mesh=new fo(dV,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,g3t)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class C3e extends YT{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof tl?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=B6.clone(e.uniforms),this.material=new tl({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new x3e(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class M3e extends YT{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const r=e.getContext(),s=e.state;let o,a;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class m3t extends YT{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class A3t{constructor(e,t){if(this.renderer=e,void 0===t){const i=e.getSize(new Yt);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,(t=new w4(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===jy&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===C3e&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new C3e(jy),this.clock=new lre}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==M3e&&(o instanceof M3e?i=!0:o instanceof m3t&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new Yt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new $p(-1,1,1,-1,0,1);const pV=new Tr;pV.setAttribute("position",new fi([-1,3,0,-1,-1,0,3,-1,0],3)),pV.setAttribute("uv",new fi([0,2,0,0,2,0],2));class S3e{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(let t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,t,i){return e[0]*t+e[1]*i}dot3(e,t,i,r){return e[0]*t+e[1]*i+e[2]*r}dot4(e,t,i,r,s){return e[0]*t+e[1]*i+e[2]*r+e[3]*s}noise(e,t){let i,r,s;const a=(e+t)*(.5*(Math.sqrt(3)-1)),c=Math.floor(e+a),l=Math.floor(t+a),u=(3-Math.sqrt(3))/6,f=(c+l)*u,v=e-(c-f),_=t-(l-f);let w,b;v>_?(w=1,b=0):(w=0,b=1);const x=v-w+u,M=_-b+u,E=v-1+2*u,I=_-1+2*u,k=255&c,O=255&l,P=this.perm[k+w+this.perm[O+b]]%12,Q=this.perm[k+1+this.perm[O+1]]%12;let J=.5-v*v-_*_;J<0?i=0:(J*=J,i=J*J*this.dot(this.grad3[this.perm[k+this.perm[O]]%12],v,_));let Ce=.5-x*x-M*M;Ce<0?r=0:(Ce*=Ce,r=Ce*Ce*this.dot(this.grad3[P],x,M));let Ae=.5-E*E-I*I;return Ae<0?s=0:(Ae*=Ae,s=Ae*Ae*this.dot(this.grad3[Q],E,I)),70*(i+r+s)}noise3d(e,t,i){let r,s,o,a;const l=.3333333333333333*(e+t+i),u=Math.floor(e+l),f=Math.floor(t+l),p=Math.floor(i+l),g=1/6,v=(u+f+p)*g,x=e-(u-v),M=t-(f-v),E=i-(p-v);let I,k,O,R,P,Q;x>=M?M>=E?(I=1,k=0,O=0,R=1,P=1,Q=0):x>=E?(I=1,k=0,O=0,R=1,P=0,Q=1):(I=0,k=0,O=1,R=1,P=0,Q=1):M<E?(I=0,k=0,O=1,R=0,P=1,Q=1):x<E?(I=0,k=1,O=0,R=0,P=1,Q=1):(I=0,k=1,O=0,R=1,P=1,Q=0);const J=x-I+g,Ce=M-k+g,Ae=E-O+g,G=x-R+2*g,ue=M-P+2*g,X=E-Q+2*g,le=x-1+.5,de=M-1+.5,pe=E-1+.5,Fe=255&u,st=255&f,ze=255&p,pt=this.perm[Fe+I+this.perm[st+k+this.perm[ze+O]]]%12,kt=this.perm[Fe+R+this.perm[st+P+this.perm[ze+Q]]]%12,wt=this.perm[Fe+1+this.perm[st+1+this.perm[ze+1]]]%12;let Xt=.6-x*x-M*M-E*E;Xt<0?r=0:(Xt*=Xt,r=Xt*Xt*this.dot3(this.grad3[this.perm[Fe+this.perm[st+this.perm[ze]]]%12],x,M,E));let un=.6-J*J-Ce*Ce-Ae*Ae;un<0?s=0:(un*=un,s=un*un*this.dot3(this.grad3[pt],J,Ce,Ae));let _n=.6-G*G-ue*ue-X*X;_n<0?o=0:(_n*=_n,o=_n*_n*this.dot3(this.grad3[kt],G,ue,X));let an=.6-le*le-de*de-pe*pe;return an<0?a=0:(an*=an,a=an*an*this.dot3(this.grad3[wt],le,de,pe)),32*(r+s+o+a)}noise4d(e,t,i,r){const s=this.grad4,o=this.simplex,a=this.perm,c=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20;let u,f,p,g,v;const _=(e+t+i+r)*c,w=Math.floor(e+_),b=Math.floor(t+_),x=Math.floor(i+_),M=Math.floor(r+_),E=(w+b+x+M)*l,P=e-(w-E),Q=t-(b-E),J=i-(x-E),Ce=r-(M-E),pe=(P>Q?32:0)+(P>J?16:0)+(Q>J?8:0)+(P>Ce?4:0)+(Q>Ce?2:0)+(J>Ce?1:0),Fe=o[pe][0]>=3?1:0,st=o[pe][1]>=3?1:0,ze=o[pe][2]>=3?1:0,_t=o[pe][3]>=3?1:0,pt=o[pe][0]>=2?1:0,kt=o[pe][1]>=2?1:0,wt=o[pe][2]>=2?1:0,Xt=o[pe][3]>=2?1:0,un=o[pe][0]>=1?1:0,_n=o[pe][1]>=1?1:0,an=o[pe][2]>=1?1:0,bi=o[pe][3]>=1?1:0,Vt=P-Fe+l,Pt=Q-st+l,wn=J-ze+l,ei=Ce-_t+l,Tn=P-pt+2*l,Cn=Q-kt+2*l,$n=J-wt+2*l,yi=Ce-Xt+2*l,mr=P-un+3*l,Ss=Q-_n+3*l,Ge=J-an+3*l,Me=Ce-bi+3*l,It=P-1+4*l,yn=Q-1+4*l,Mn=J-1+4*l,kn=Ce-1+4*l,Mi=255&w,Pe=255&b,nn=255&x,dn=255&M,Zn=a[Mi+Fe+a[Pe+st+a[nn+ze+a[dn+_t]]]]%32,ur=a[Mi+pt+a[Pe+kt+a[nn+wt+a[dn+Xt]]]]%32,Xr=a[Mi+un+a[Pe+_n+a[nn+an+a[dn+bi]]]]%32,ia=a[Mi+1+a[Pe+1+a[nn+1+a[dn+1]]]]%32;let ut=.6-P*P-Q*Q-J*J-Ce*Ce;ut<0?u=0:(ut*=ut,u=ut*ut*this.dot4(s[a[Mi+a[Pe+a[nn+a[dn]]]]%32],P,Q,J,Ce));let Fn=.6-Vt*Vt-Pt*Pt-wn*wn-ei*ei;Fn<0?f=0:(Fn*=Fn,f=Fn*Fn*this.dot4(s[Zn],Vt,Pt,wn,ei));let Qt=.6-Tn*Tn-Cn*Cn-$n*$n-yi*yi;Qt<0?p=0:(Qt*=Qt,p=Qt*Qt*this.dot4(s[ur],Tn,Cn,$n,yi));let Wn=.6-mr*mr-Ss*Ss-Ge*Ge-Me*Me;Wn<0?g=0:(Wn*=Wn,g=Wn*Wn*this.dot4(s[Xr],mr,Ss,Ge,Me));let Un=.6-It*It-yn*yn-Mn*Mn-kn*kn;return Un<0?v=0:(Un*=Un,v=Un*Un*this.dot4(s[ia],It,yn,Mn,kn)),27*(u+f+p+g+v)}}const $y={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new Yt},cameraProjectionMatrix:{value:new Zi},cameraInverseProjectionMatrix:{value:new Zi},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tNormal;\n\t\tuniform sampler2D tDepth;\n\t\tuniform sampler2D tNoise;\n\n\t\tuniform vec3 kernel[ KERNEL_SIZE ];\n\n\t\tuniform vec2 resolution;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float kernelRadius;\n\t\tuniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference\n\t\tuniform float maxDistance; // avoid the influence of fragments which are too far away\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t}\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec2 screenPosition ) {\n\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tfloat viewZ = getViewZ( depth );\n\n\t\t\tvec3 viewPosition = getViewPosition( vUv, depth, viewZ );\n\t\t\tvec3 viewNormal = getViewNormal( vUv );\n\n\t\t\tvec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );\n\t\t\tvec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );\n\n\t\t\t// compute matrix used to reorient a kernel vector\n\n\t\t\tvec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );\n\t\t\tvec3 bitangent = cross( viewNormal, tangent );\n\t\t\tmat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );\n\n\t\t float occlusion = 0.0;\n\n\t\t for ( int i = 0; i < KERNEL_SIZE; i ++ ) {\n\n\t\t\t\tvec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space\n\t\t\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point\n\n\t\t\t\tvec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC\n\t\t\t\tsamplePointNDC /= samplePointNDC.w;\n\n\t\t\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates\n\n\t\t\t\tfloat realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture\n\t\t\t\tfloat sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value\n\t\t\t\tfloat delta = sampleDepth - realDepth;\n\n\t\t\t\tif ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion\n\n\t\t\t\t\tocclusion += 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tocclusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );\n\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );\n\n\t\t}"},ZT_defines={PERSPECTIVE_CAMERA:1},ZT_uniforms={tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},ZT_vertexShader="varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",ZT_fragmentShader="uniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getLinearDepth( vUv );\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );\n\n\t\t}",JT={uniforms:{tDiffuse:{value:null},resolution:{value:new Yt}},vertexShader:"varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"uniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 texelSize = ( 1.0 / resolution );\n\t\t\tfloat result = 0.0;\n\n\t\t\tfor ( int i = - 2; i <= 2; i ++ ) {\n\n\t\t\t\tfor ( int j = - 2; j <= 2; j ++ ) {\n\n\t\t\t\t\tvec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;\n\t\t\t\t\tresult += texture2D( tDiffuse, vUv + offset ).r;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );\n\n\t\t}"};let _3t=(()=>{class n extends YT{constructor(t,i,r,s){super(),this.width=void 0!==r?r:512,this.height=void 0!==s?s:512,this.clear=!0,this.camera=i,this.scene=t,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const o=new lie;o.format=Hp,o.type=Fp,this.beautyRenderTarget=new w4(this.width,this.height),this.normalRenderTarget=new w4(this.width,this.height,{minFilter:X1,magFilter:X1,depthTexture:o}),this.ssaoRenderTarget=new w4(this.width,this.height),this.blurRenderTarget=this.ssaoRenderTarget.clone(),void 0===$y&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),this.ssaoMaterial=new tl({defines:Object.assign({},$y.defines),uniforms:B6.clone($y.uniforms),vertexShader:$y.vertexShader,fragmentShader:$y.fragmentShader,blending:0}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new eH,this.normalMaterial.blending=0,this.blurMaterial=new tl({defines:Object.assign({},JT.defines),uniforms:B6.clone(JT.uniforms),vertexShader:JT.vertexShader,fragmentShader:JT.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new tl({defines:Object.assign({},ZT_defines),uniforms:B6.clone(ZT_uniforms),vertexShader:ZT_vertexShader,fragmentShader:ZT_fragmentShader,blending:0}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new tl({uniforms:B6.clone(jy.uniforms),vertexShader:jy.vertexShader,fragmentShader:jy.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:208,blendDst:200,blendEquation:x6,blendSrcAlpha:206,blendDstAlpha:200,blendEquationAlpha:x6}),this.fsQuad=new x3e(null),this.originalClearColor=new In}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(t,i){switch(!1===t.capabilities.isWebGL2&&(this.noiseTexture.format=1024),t.setRenderTarget(this.beautyRenderTarget),t.clear(),t.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(t,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(t,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(t,this.blurMaterial,this.blurRenderTarget),this.output){case n.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Depth:this.renderPass(t,this.depthRenderMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;case n.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=0,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=5,this.renderPass(t,this.copyMaterial,this.renderToScreen?null:i);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(t,i,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),c=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,null!=s&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.fsQuad.material=i,this.fsQuad.render(t),t.autoClear=c,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}renderOverride(t,i,r,s,o){t.getClearColor(this.originalClearColor);const a=t.getClearAlpha(),c=t.autoClear;t.setRenderTarget(r),t.autoClear=!1,o=i.clearAlpha||o,null!=(s=i.clearColor||s)&&(t.setClearColor(s),t.setClearAlpha(o||0),t.clear()),this.scene.overrideMaterial=i,t.render(this.scene,this.camera),this.scene.overrideMaterial=null,t.autoClear=c,t.setClearColor(this.originalClearColor),t.setClearAlpha(a)}setSize(t,i){this.width=t,this.height=i,this.beautyRenderTarget.setSize(t,i),this.ssaoRenderTarget.setSize(t,i),this.normalRenderTarget.setSize(t,i),this.blurRenderTarget.setSize(t,i),this.ssaoMaterial.uniforms.resolution.value.set(t,i),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(t,i)}generateSampleKernel(){const t=this.kernelSize,i=this.kernel;for(let r=0;r<t;r++){const s=new be;s.x=2*Math.random()-1,s.y=2*Math.random()-1,s.z=Math.random(),s.normalize();let o=r/t;o=yM.lerp(.1,1,o*o),s.multiplyScalar(o),i.push(s)}}generateRandomKernelRotations(){void 0===S3e&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");const r=new S3e,o=new Float32Array(16);for(let a=0;a<16;a++){const c=2*Math.random()-1,l=2*Math.random()-1;o[a]=r.noise3d(c,l,0)}this.noiseTexture=new rm(o,4,4,1028,_4),this.noiseTexture.wrapS=C0,this.noiseTexture.wrapT=C0,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const i=this._visibilityCache;this.scene.traverse(function(r){i.set(r,r.visible),(r.isPoints||r.isLine)&&(r.visible=!1)})}restoreVisibility(){const i=this._visibilityCache;this.scene.traverse(function(r){const s=i.get(r);r.visible=s}),i.clear()}}return n.OUTPUT={Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5},n})();var Ky=function(){var n=0,e=document.createElement("div");function t(u){return e.appendChild(u.dom),u}function i(u){for(var f=0;f<e.children.length;f++)e.children[f].style.display=f===u?"block":"none";n=u}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++n%e.children.length)},!1);var r=(performance||Date).now(),s=r,o=0,a=t(new Ky.Panel("FPS","#0ff","#002")),c=t(new Ky.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=t(new Ky.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){o++;var u=(performance||Date).now();if(c.update(u-r,200),u>=s+1e3&&(a.update(1e3*o/(u-s),100),s=u,o=0,l)){var f=performance.memory;l.update(f.usedJSHeapSize/1048576,f.jsHeapSizeLimit/1048576)}return u},update:function(){r=this.end()},domElement:e,setMode:i}};Ky.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,c=48*o,l=3*o,u=2*o,f=3*o,p=15*o,g=74*o,v=30*o,_=document.createElement("canvas");_.width=a,_.height=c,_.style.cssText="width:80px;height:48px";var w=_.getContext("2d");return w.font="bold "+9*o+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=t,w.fillRect(0,0,a,c),w.fillStyle=e,w.fillText(n,l,u),w.fillRect(f,p,g,v),w.fillStyle=t,w.globalAlpha=.9,w.fillRect(f,p,g,v),{dom:_,update:function(b,x){i=Math.min(i,b),r=Math.max(r,b),w.fillStyle=t,w.globalAlpha=1,w.fillRect(0,0,a,p),w.fillStyle=e,w.fillText(s(b)+" "+n+" ("+s(i)+"-"+s(r)+")",l,u),w.drawImage(_,f+o,p,g-o,v,f,p,g-o,v),w.fillRect(f+g-o,p,o,v),w.fillStyle=t,w.globalAlpha=.9,w.fillRect(f+g-o,p,o,s((1-b/x)*v))}}};class eL extends fo{constructor(){const e=eL.SkyShader,t=new tl({name:"SkyShader",fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:B6.clone(e.uniforms),side:1,depthWrite:!1});super(new S0(1,1,1),t),this.isSky=!0}}eL.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new be},up:{value:new be(0,1,0)}},vertexShader:"\n\t\tuniform vec3 sunPosition;\n\t\tuniform float rayleigh;\n\t\tuniform float turbidity;\n\t\tuniform float mieCoefficient;\n\t\tuniform vec3 up;\n\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\t// constants for atmospheric scattering\n\t\tconst float e = 2.71828182845904523536028747135266249775724709369995957;\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\t// wavelength of used primaries, according to preetham\n\t\tconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n\t\t// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n\t\t// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n\t\tconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n\t\t// mie stuff\n\t\t// K coefficient for the primaries\n\t\tconst float v = 4.0;\n\t\tconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n\t\t// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n\t\tconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n\t\t// earth shadow hack\n\t\t// cutoffAngle = pi / 1.95;\n\t\tconst float cutoffAngle = 1.6110731556870734;\n\t\tconst float steepness = 1.5;\n\t\tconst float EE = 1000.0;\n\n\t\tfloat sunIntensity( float zenithAngleCos ) {\n\t\t\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n\t\t\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n\t\t}\n\n\t\tvec3 totalMie( float T ) {\n\t\t\tfloat c = ( 0.2 * T ) * 10E-18;\n\t\t\treturn 0.434 * c * MieConst;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvWorldPosition = worldPosition.xyz;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n\t\t\tvSunDirection = normalize( sunPosition );\n\n\t\t\tvSunE = sunIntensity( dot( vSunDirection, up ) );\n\n\t\t\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n\t\t\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n\t\t\t// extinction (absorbtion + out scattering)\n\t\t\t// rayleigh coefficients\n\t\t\tvBetaR = totalRayleigh * rayleighCoefficient;\n\n\t\t\t// mie coefficients\n\t\t\tvBetaM = totalMie( turbidity ) * mieCoefficient;\n\n\t\t}",fragmentShader:"\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\tuniform float mieDirectionalG;\n\t\tuniform vec3 up;\n\n\t\tconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n\t\t// constants for atmospheric scattering\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\tconst float n = 1.0003; // refractive index of air\n\t\tconst float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n\t\t// optical length at zenith for molecules\n\t\tconst float rayleighZenithLength = 8.4E3;\n\t\tconst float mieZenithLength = 1.25E3;\n\t\t// 66 arc seconds -> degrees, and the cosine of that\n\t\tconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n\t\t// 3.0 / ( 16.0 * pi )\n\t\tconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n\t\t// 1.0 / ( 4.0 * pi )\n\t\tconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\n\t\tfloat rayleighPhase( float cosTheta ) {\n\t\t\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n\t\t}\n\n\t\tfloat hgPhase( float cosTheta, float g ) {\n\t\t\tfloat g2 = pow( g, 2.0 );\n\t\t\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n\t\t\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec3 direction = normalize( vWorldPosition - cameraPos );\n\n\t\t\t// optical length\n\t\t\t// cutoff angle at 90 to avoid singularity in next formula.\n\t\t\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n\t\t\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n\t\t\tfloat sR = rayleighZenithLength * inverse;\n\t\t\tfloat sM = mieZenithLength * inverse;\n\n\t\t\t// combined extinction factor\n\t\t\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n\t\t\t// in scattering\n\t\t\tfloat cosTheta = dot( direction, vSunDirection );\n\n\t\t\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n\t\t\tvec3 betaRTheta = vBetaR * rPhase;\n\n\t\t\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\n\t\t\tvec3 betaMTheta = vBetaM * mPhase;\n\n\t\t\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n\t\t\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n\t\t\t// nightsky\n\t\t\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n\t\t\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n\t\t\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n\t\t\tvec3 L0 = vec3( 0.1 ) * Fex;\n\n\t\t\t// composition + solar disc\n\t\t\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n\t\t\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n\t\t\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n\t\t\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n\t\t\tgl_FragColor = vec4( retColor, 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}"};var za=(()=>(function(n){n.left="left",n.right="right",n.top="top",n.bottom="bottom",n.back="back",n.front="front"}(za||(za={})),za))();const E3e=new B2({color:3355443}),w3t=new o3({side:2,visible:!1}),b3t=new o3({visible:!1}),x3t=new o3({visible:!1});class C3t extends jo{constructor(){super(),this.width=20,this.height=8,this.depth=5,this.onChange$=new $e,this.drag=!1,this.controlEnabled=!1,this.xyz=[1,1,1],this.rayCaster=new XUe,this.activeSide=void 0,this.mouse=new Yt(0,0),this.edges={},this.planes={},this.dragPlane=new fo(new W3(1e3,1e3,1,1),x3t),this.startPoint=new be(0,0,0),this.setToNormalizedDeviceCoordinates=function(e,t,i){return i.x=void 0!==e.clientX?e.clientX:e.touches&&e.touches[0].clientX,i.y=void 0!==e.clientY?e.clientY:e.touches&&e.touches[0].clientY,i.x=i.x/t.innerWidth*2-1,i.y=-i.y/t.innerHeight*2+1,i},this.init(),this.startDrag=this.startDrag.bind(this),this.onDrag=this.onDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(){this.box=new fo(new S0(this.width,this.height,this.depth),b3t),this.box.userData.side="box",this.setPosition(),this.add(this.box),this.add(this.dragPlane),this.dragPlane.castShadow=!1,this.dragPlane.receiveShadow=!1,Object.keys(za).forEach(e=>{this.edges[e]=new k6(new Tr,E3e.clone()),this.edges[e].userData.side=e,this.add(this.edges[e]),e!==za.top&&(this.planes[e]=new fo(new W3(this.width,this.height,this.depth),w3t.clone()),this.planes[e].userData.side=e,this.add(this.planes[e]))}),this.drawBox(),window.addEventListener("pointermove",e=>{this.mouse=this.setToNormalizedDeviceCoordinates(e,window,this.mouse)})}states(e){this.enabled=e.clipBoxEnabled,this.show=e.clipBoxShow,this.drawBox()}drawBox(){this.box.geometry.dispose(),this.box.geometry=new S0(this.width,this.height,this.depth),this.box.position.set(this.width/2,this.height/2,this.depth/2),this.drawPlanesAroundBox(),this.drawLinesAroundBox()}drawPlanesAroundBox(){Object.keys(za).forEach(i=>{let r;i===za.front?(r=new W3(this.width,this.height),r.rotateY(0),r.translate(0,0,this.depth/2)):i===za.back&&(r=new W3(this.width,this.height),r.rotateY(Math.PI),r.translate(0,0,-this.depth/2)),i===za.left?(r=new W3(this.depth,this.height),r.rotateY(-Math.PI/2),r.translate(-this.width/2,0,0)):i===za.right&&(r=new W3(this.depth,this.height),r.rotateY(Math.PI/2),r.translate(this.width/2,0,0)),i!==za.top&&(i===za.bottom&&(r=new W3(this.width,this.depth),r.rotateX(Math.PI/2),r.translate(0,-this.height/2,0)),this.planes[i].geometry.dispose(),this.show&&(this.planes[i].geometry=r,this.planes[i].position.set(this.width/2,this.height/2,this.depth/2)))})}drawLinesAroundBox(){Object.keys(za).forEach(e=>{if(void 0===this.planes[e])return;let t=Array.from(this.planes[e].geometry.attributes.position.array).reduce((i,r,s)=>(s%3?i[i.length-1].push(r):i.push([r]))&&i,[]).map(i=>new be(i[0],i[1],i[2]));this.show?(this.edges[e].geometry.setFromPoints([...t.slice(0,2),...t.slice(2).reverse(),t[0]]),this.edges[e].position.set(this.width/2,this.height/2,this.depth/2)):this.edges[e].geometry.setFromPoints([])})}onMouseOver(e,t,i,r,s){if(!this.enabled)return void s();if(!0===this.drag||!1===this.show)return;this.camera=e,this.callbackUpdate=i,this.rayCaster.setFromCamera(this.mouse,this.camera);const o=this.rayCaster.intersectObjects(Object.values(this.planes));if(this.activeSide=o.length>0?o[0].object.userData.side:void 0,this.previousSide===this.activeSide)return;this.previousSide=this.activeSide,Object.keys(za).forEach(c=>{c===this.activeSide?(this.edges[c].material.color.set(3065014),this.edges[c].renderOrder=1):(this.edges[c].material.color.set(E3e.color),this.edges[c].renderOrder=0)});const a=t.domElement;void 0!==this.activeSide?(a.addEventListener("mousedown",this.startDrag),a.addEventListener("mousemove",this.onDrag),a.addEventListener("mouseup",this.endDrag),r()):(a.removeEventListener("mousedown",this.startDrag),a.removeEventListener("mousemove",this.onDrag),a.removeEventListener("mouseup",this.endDrag),s())}startDrag(e){if(1===e.buttons){this.drag=!0,this.rayCaster.setFromCamera(this.mouse,this.camera);var t=this.rayCaster.intersectObjects(Object.values(this.planes));if(t.length>0){const r=t[0].point;this.widthStart=this.width,this.heightStart=this.height,this.depthStart=this.depth,this.startPoint=t[0].point;let s=new be;this.dragPlane.parent.getWorldPosition(s),this.dragPlane.position.set(r.x-s.x,r.y-s.y,r.z-s.z),this.dragPlane.geometry.center();let o=new be(0,0,1);(this.activeSide===za.front||this.activeSide===za.back)&&(o=new be(0,0,1)),(this.activeSide===za.left||this.activeSide===za.right)&&(o=new be(1,0,0)),(this.activeSide===za.top||this.activeSide===za.bottom)&&(o=new be(0,1,0));var i=this.camera.position.clone().sub(this.camera.position.clone().projectOnVector(o));this.dragPlane.lookAt(i.add(r))}}}onDrag(e){if(!1!==this.drag){this.rayCaster.setFromCamera(this.mouse,this.camera);var t=this.rayCaster.intersectObject(this.dragPlane);t.length>0&&this.change(t[0].point)}}endDrag(e){this.drag=!1,0===e.buttons&&this.onChange$.next()}change(e){if(void 0===this.activeSide)return;const t=e.x-this.startPoint.x,i=e.y-this.startPoint.y,r=e.z-this.startPoint.z;this.activeSide===za.right&&(this.width=this.widthStart+t),this.activeSide===za.top&&(this.height=this.heightStart+i),this.activeSide===za.front&&(this.depth=this.depthStart+r),this.activeSide===za.left&&(this.width=this.widthStart-t,this.xyz[0]=e.x),this.activeSide===za.bottom&&(this.height=this.heightStart-i,this.xyz[1]=e.y),this.activeSide===za.back&&(this.depth=this.depthStart-r,this.xyz[2]=e.z),this.width=Math.max(this.width,2),this.height=Math.max(this.height,2),this.depth=Math.max(this.depth,2),this.drawBox(),this.setPosition(),this.callbackUpdate()}setPosition(){this.position.set(this.xyz[0],this.xyz[1],this.xyz[2])}setCookie(e){this.height=e.height,this.width=e.width,this.depth=e.depth,this.xyz=e.xyz,this.setPosition()}}class M3t extends t5{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new D3t(t)}),this.register(function(t){return new H3t(t)}),this.register(function(t){return new z3t(t)}),this.register(function(t){return new R3t(t)}),this.register(function(t){return new B3t(t)}),this.register(function(t){return new k3t(t)}),this.register(function(t){return new F3t(t)}),this.register(function(t){return new L3t(t)}),this.register(function(t){return new P3t(t)}),this.register(function(t){return new I3t(t)}),this.register(function(t){return new E3t(t)}),this.register(function(t){return new O3t(t)})}load(e,t,i,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Xf.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new bh(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if("string"==typeof e)s=e;else if(Xf.decodeText(new Uint8Array(e,0,4))===T3e){try{o[Gs.KHR_BINARY_GLTF]=new N3t(e)}catch(f){return void(r&&r(f))}s=o[Gs.KHR_BINARY_GLTF].content}else s=Xf.decodeText(new Uint8Array(e));const c=JSON.parse(s);if(void 0===c.asset||c.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new J3t(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](l);a[f.name]=f,o[f.name]=!0}if(c.extensionsUsed)for(let u=0;u<c.extensionsUsed.length;++u){const f=c.extensionsUsed[u],p=c.extensionsRequired||[];switch(f){case Gs.KHR_MATERIALS_UNLIT:o[f]=new T3t;break;case Gs.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[f]=new G3t;break;case Gs.KHR_DRACO_MESH_COMPRESSION:o[f]=new V3t(c,this.dracoLoader);break;case Gs.KHR_TEXTURE_TRANSFORM:o[f]=new U3t;break;case Gs.KHR_MESH_QUANTIZATION:o[f]=new Q3t;break;default:p.indexOf(f)>=0&&void 0===a[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function S3t(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Gs={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class E3t{constructor(e){this.parser=e,this.name=Gs.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const u=new In(16777215);void 0!==c.color&&u.fromArray(c.color);const f=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new oH(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new ire(u),l.distance=f;break;case"spot":l=new tre(u),l.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class T3t{constructor(){this.name=Gs.KHR_MATERIALS_UNLIT}getMaterialType(){return o3}extendParams(e,t,i){const r=[];e.color=new In(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,ta))}return Promise.all(r)}}class L3t{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class D3t{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Yt(a,a)}return Promise.all(s)}}class I3t{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class R3t{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new In(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,ta)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class B3t{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class k3t{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new In(a[0],a[1],a[2]),Promise.all(s)}}class F3t{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kf:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class P3t{constructor(e){this.parser=e,this.name=Gs.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kf:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new In(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,ta)),Promise.all(s)}}class H3t{constructor(e){this.parser=e,this.name=Gs.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class z3t{constructor(e){this.parser=e,this.name=Gs.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class O3t{constructor(e){this.name=Gs.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,f=r.byteStride,p=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,p,r.mode,r.filter).then(function(g){return g.buffer}):o.ready.then(function(){const g=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(g),u,f,p,r.mode,r.filter),g})})}return null}}const T3e="glTF";class N3t{constructor(e){this.name=Gs.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:Xf.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==T3e)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,1313821514===a){const c=new Uint8Array(e,12+s,o);this.content=Xf.decodeText(c)}else if(5130562===a){const c=12+s;this.body=e.slice(c,c+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class V3t{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Gs.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(const u in o){const f=mV[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=mV[u]||u.toLowerCase();if(void 0!==o[u]){const p=i.accessors[e.attributes[u]];l[f]=Xy[p.componentType].name,c[f]=!0===p.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f){r.decodeDracoFile(u,function(p){for(const g in p.attributes){const v=p.attributes[g],_=c[g];void 0!==_&&(v.normalized=_)}f(p)},a,l)})})}}class U3t{constructor(){this.name=Gs.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class gV extends x_{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new In).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(c){for(const l in a)c.uniforms[l]=a[l];c.fragmentShader=c.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(c){a.specular.value=c}},specularMap:{get:function(){return a.specularMap.value},set:function(c){a.specularMap.value=c,c?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(c){a.glossiness.value=c}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(c){a.glossinessMap.value=c,c?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class G3t{constructor(){this.name=Gs.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return gV}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new In(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(i.assignTexture(e,"map",r.diffuseTexture,ta)),e.emissive=new In(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new In(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,ta))}return Promise.all(s)}createMaterial(e){const t=new gV(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class Q3t{constructor(){this.name=Gs.KHR_MESH_QUANTIZATION}}class D3e extends C_{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=2*a,l=3*a,u=r-t,f=(i-t)/u,p=f*f,g=p*f,v=e*l,_=v-l,w=-2*g+3*p,b=g-p,x=1-w,M=b-p+f;for(let E=0;E!==a;E++)s[E]=x*o[_+E+a]+M*(o[_+E+c]*u)+w*o[v+E+a]+b*(o[v+E]*u);return s}}const W3t=new J2;class j3t extends D3e{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return W3t.fromArray(s).normalize().toArray(s),s}}const Xy={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},I3e={9728:X1,9729:u1,9984:1004,9985:1007,9986:1005,9987:C6},R3e={33071:s3,33648:1002,10497:C0},B3e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},mV={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},l8={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},$3t={CUBICSPLINE:void 0,LINEAR:R7,STEP:t_};function K3t(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new x_({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function Yy(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Q5(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function X3t(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Y3t(n){const e=n.extensions&&n.extensions[Gs.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+k3e(e.attributes):n.indices+":"+k3e(n.attributes)+":"+n.mode,t}function k3e(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function vV(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class J3t{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new S3t,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new xUe(this.options.manager):new kUe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new bh(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};Yy(s,a,r),Q5(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const c=this.associations.get(o);null!=c&&this.associations.set(a,c);for(const[l,u]of o.children.entries())s(u,a.children[l])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Gs.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(Xf.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=B3e[r.type],l=Xy[r.componentType],u=l.BYTES_PER_ELEMENT,p=r.byteOffset||0,g=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,v=!0===r.normalized;let _,w;if(g&&g!==u*c){const b=Math.floor(p/g),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+b+":"+r.count;let M=t.cache.get(x);M||(_=new l(a,b*g,r.count*g/u),M=new LP(_,g/u),t.cache.add(x,M)),w=new Xp(M,c,p%g/u,v)}else _=null===a?new l(r.count*c):new l(a,p,r.count*c),w=new h1(_,c,v);if(void 0!==r.sparse){const E=r.sparse.values.byteOffset||0,I=new(0,Xy[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*B3e.SCALAR),k=new l(o[2],E,r.sparse.count*c);null!==a&&(w=new h1(w.array.slice(),w.itemSize,w.normalized));for(let O=0,R=I.length;O<R;O++){const P=I[O];if(w.setX(P,k[O*c]),c>=2&&w.setY(P,k[O*c+1]),c>=3&&w.setZ(P,k[O*c+2]),c>=4&&w.setW(P,k[O*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=this.options.manager.getHandler(o.uri);null!==c&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,o.name&&(u.name=o.name);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=I3e[p.magFilter]||u1,u.minFilter=I3e[p.minFilter]||C6,u.wrapS=R3e[p.wrapS]||C0,u.wrapT=R3e[p.wrapT]||C0,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(f=>f.clone());const o=r.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=this.getDependency("bufferView",o.bufferView).then(function(f){l=!0;const p=new Blob([f],{type:o.mimeType});return c=a.createObjectURL(p),c});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(f){return new Promise(function(p,g){let v=p;!0===t.isImageBitmapLoader&&(v=function(_){const w=new y4(_);w.needsUpdate=!0,p(w)}),t.load(Xf.resolveURL(f,s.path),v,void 0,g)})}).then(function(f){return!0===l&&a.revokeObjectURL(c),f.userData.mimeType=o.mimeType||function Z3t(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(void 0!==i.texCoord&&0!=i.texCoord&&!("aoMap"===t&&1==i.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[Gs.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[Gs.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[Gs.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return void 0!==r&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new Yp,bl.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new B2,bl.prototype.copy.call(c,i),c.color.copy(i.color),this.cache.add(a,c)),i=c}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return x_}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},c=s.extensions||{},l=[];if(c[Gs.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const f=r[Gs.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=f.getMaterialType(),l.push(f.extendParams(a,s,t))}else if(c[Gs.KHR_MATERIALS_UNLIT]){const f=r[Gs.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),l.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new In(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}void 0!==f.baseColorTexture&&l.push(t.assignTexture(a,"map",f.baseColorTexture,ta)),a.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,a.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==o3&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Yt(1,1),void 0!==s.normalTexture.scale)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return void 0!==s.occlusionTexture&&o!==o3&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==o3&&(a.emissive=(new In).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&o!==o3&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,ta)),Promise.all(l).then(function(){let f;return f=o===gV?r[Gs.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),s.name&&(f.name=s.name),Q5(f,s),t.associations.set(f,{materials:e}),s.extensions&&Yy(r,f,s),f})}createUniqueName(e){const t=Ha.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Gs.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return P3e(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=Y3t(l),f=r[u];if(f)o.push(f.promise);else{let p;p=l.extensions&&l.extensions[Gs.KHR_DRACO_MESH_COMPRESSION]?s(l):P3e(new Tr,l,t),r[u]={primitive:l,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){const u=void 0===o[c].material?K3t(this.cache):this.getDependency("material",o[c].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],f=[];for(let g=0,v=u.length;g<v;g++){const _=u[g],w=o[g];let b;const x=l[g];if(4===w.mode||5===w.mode||6===w.mode||void 0===w.mode)b=!0===s.isSkinnedMesh?new wie(_,x):new fo(_,x),!0===b.isSkinnedMesh&&!b.geometry.attributes.skinWeight.normalized&&b.normalizeSkinWeights(),5===w.mode?b.geometry=H3e(b.geometry,1):6===w.mode&&(b.geometry=H3e(b.geometry,2));else if(1===w.mode)b=new sm(_,x);else if(3===w.mode)b=new k6(_,x);else if(2===w.mode)b=new Die(_,x);else{if(0!==w.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);b=new p_(_,x)}Object.keys(b.geometry.morphAttributes).length>0&&X3t(b,s),b.name=t.createUniqueName(s.name||"mesh_"+e),Q5(b,s),w.extensions&&Yy(r,b,w),t.assignFinalMaterial(b),f.push(b)}for(let g=0,v=f.length;g<v;g++)t.associations.set(f[g],{meshes:e,primitives:g});if(1===f.length)return f[0];const p=new jo;t.associations.set(p,{meshes:e});for(let g=0,v=f.length;g<v;g++)p.add(f[g]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new f2(yM.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new $p(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Q5(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],c=[];for(let l=0,u=i.channels.length;l<u;l++){const f=i.channels[l],p=i.samplers[f.sampler],g=f.target,_=void 0!==i.parameters?i.parameters[p.input]:p.input,w=void 0!==i.parameters?i.parameters[p.output]:p.output;r.push(this.getDependency("node",g.node)),s.push(this.getDependency("accessor",_)),o.push(this.getDependency("accessor",w)),a.push(p),c.push(g)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const u=l[0],f=l[1],p=l[2],g=l[3],v=l[4],_=[];for(let b=0,x=u.length;b<x;b++){const M=u[b],E=f[b],I=p[b],k=g[b],O=v[b];if(void 0===M)continue;let R;switch(M.updateMatrix(),l8[O.path]){case l8.weights:R=M_;break;case l8.rotation:R=e5;break;default:R=S_}const P=M.name?M.name:M.uuid,Q=void 0!==k.interpolation?$3t[k.interpolation]:R7,J=[];l8[O.path]===l8.weights?M.traverse(function(Ae){Ae.morphTargetInfluences&&J.push(Ae.name?Ae.name:Ae.uuid)}):J.push(P);let Ce=I.array;if(I.normalized){const Ae=vV(Ce.constructor),G=new Float32Array(Ce.length);for(let ue=0,X=Ce.length;ue<X;ue++)G[ue]=Ce[ue]*Ae;Ce=G}for(let Ae=0,G=J.length;Ae<G;Ae++){const ue=new R(J[Ae]+"."+l8[O.path],E.array,Ce,Q);"CUBICSPLINE"===k.interpolation&&(ue.createInterpolant=function(le){return new(this instanceof e5?j3t:D3e)(this.times,this.values,this.getValueSize()/3,le)},ue.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push(ue)}}return new E_(i.name?i.name:"animation_"+e,void 0,_)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const i=this.extensions,r=this,s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),Promise.all(a)}().then(function(a){let c;if(c=!0===s.isBone?new IP:a.length>1?new jo:1===a.length?a[0]:new el,c!==a[0])for(let l=0,u=a.length;l<u;l++)c.add(a[l]);if(s.name&&(c.userData.name=s.name,c.name=o),Q5(c,s),s.extensions&&Yy(i,c,s),void 0!==s.matrix){const l=new Zi;l.fromArray(s.matrix),c.applyMatrix4(l)}else void 0!==s.translation&&c.position.fromArray(s.translation),void 0!==s.rotation&&c.quaternion.fromArray(s.rotation),void 0!==s.scale&&c.scale.fromArray(s.scale);return r.associations.has(c)||r.associations.set(c,{}),r.associations.get(c).nodes=e,c})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new jo;r.name&&(o.name=s.createUniqueName(r.name)),Q5(o,r),r.extensions&&Yy(i,o,r);const a=r.nodes||[],c=[];for(let l=0,u=a.length;l<u;l++)c.push(F3e(a[l],o,t,s));return Promise.all(c).then(function(){return s.associations=(u=>{const f=new Map;for(const[p,g]of s.associations)(p instanceof bl||p instanceof y4)&&f.set(p,g);return u.traverse(p=>{const g=s.associations.get(p);null!=g&&f.set(p,g)}),f})(o),o})}}function F3e(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(void 0===r.skin)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const c=[];for(let l=0,u=o.joints.length;l<u;l++)c.push(i.getDependency("node",o.joints[l]));return Promise.all(c)}).then(function(a){return s.traverse(function(c){if(!c.isMesh)return;const l=[],u=[];for(let f=0,p=a.length;f<p;f++){const g=a[f];if(g){l.push(g);const v=new Zi;void 0!==o.inverseBindMatrices&&v.fromArray(o.inverseBindMatrices.array,16*f),u.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[f])}c.bind(new YM(l,u),c.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let c=0,l=a.length;c<l;c++)o.push(F3e(a[c],s,t,i))}return Promise.all(o)})}function P3e(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in i){const a=mV[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Q5(n,e),function eut(n,e,t){const i=e.attributes,r=new Up;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new be(c[0],c[1],c[2]),new be(l[0],l[1],l[2])),a.normalized){const u=vV(Xy[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new be,c=new be;for(let l=0,u=s.length;l<u;l++){const f=s[l];if(void 0!==f.POSITION){const p=t.json.accessors[f.POSITION],g=p.min,v=p.max;if(void 0!==g&&void 0!==v){if(c.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),c.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),c.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),p.normalized){const _=vV(Xy[p.componentType]);c.multiplyScalar(_)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new jp;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function q3t(n,e,t){let i=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){const f=e[l];if(void 0!==f.POSITION&&(i=!0),void 0!==f.NORMAL&&(r=!0),void 0!==f.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];if(i){const p=void 0!==f.POSITION?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(p)}if(r){const p=void 0!==f.NORMAL?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=void 0!==f.COLOR_0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;c.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const f=l[1],p=l[2];return i&&(n.morphAttributes.position=l[0]),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}function H3e(n,e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const tut=/^[og]\s*(.+)?/,nut=/^mtllib /,iut=/^usemtl /,rut=/^usemap /,z3e=/\s+/,O3e=new be,_V=new be,N3e=new be,V3e=new be,P4=new be,tL=new In;function sut(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(c){const l={index:"number"==typeof c?c:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return l.clone=this.clone.bind(l),l}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&"function"==typeof i.clone){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;O3e.fromArray(r,e),_V.fromArray(r,t),N3e.fromArray(r,i),P4.subVectors(N3e,_V),V3e.subVectors(O3e,_V),P4.cross(V3e),P4.normalize(),s.push(P4.x,P4.y,P4.z),s.push(P4.x,P4.y,P4.z),s.push(P4.x,P4.y,P4.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[i]&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,o,a,c,l){const u=this.vertices.length;let f=this.parseVertexIndex(e,u),p=this.parseVertexIndex(t,u),g=this.parseVertexIndex(i,u);if(this.addVertex(f,p,g),this.addColor(f,p,g),void 0!==a&&""!==a){const v=this.normals.length;f=this.parseNormalIndex(a,v),p=this.parseNormalIndex(c,v),g=this.parseNormalIndex(l,v),this.addNormal(f,p,g)}else this.addFaceNormal(f,p,g);if(void 0!==r&&""!==r){const v=this.uvs.length;f=this.parseUVIndex(r,v),p=this.parseUVIndex(s,v),g=this.parseUVIndex(o,v),this.addUV(f,p,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class out extends t5{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,o=new bh(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new sut;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const i=e.split("\n");let r=[];for(let a=0,c=i.length;a<c;a++){const l=i[a].trimStart();if(0===l.length)continue;const u=l.charAt(0);if("#"!==u)if("v"===u){const f=l.split(z3e);switch(f[0]){case"v":t.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7?(tL.setRGB(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6])).convertSRGBToLinear(),t.colors.push(tL.r,tL.g,tL.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":t.uvs.push(parseFloat(f[1]),parseFloat(f[2]))}}else if("f"===u){const p=l.slice(1).trim().split(z3e),g=[];for(let _=0,w=p.length;_<w;_++){const b=p[_];if(b.length>0){const x=b.split("/");g.push(x)}}const v=g[0];for(let _=1,w=g.length-1;_<w;_++){const b=g[_],x=g[_+1];t.addFace(v[0],b[0],x[0],v[1],b[1],x[1],v[2],b[2],x[2])}}else if("l"===u){const f=l.substring(1).trim().split(" ");let p=[];const g=[];if(-1===l.indexOf("/"))p=f;else for(let v=0,_=f.length;v<_;v++){const w=f[v].split("/");""!==w[0]&&p.push(w[0]),""!==w[1]&&g.push(w[1])}t.addLineGeometry(p,g)}else if("p"===u){const p=l.slice(1).trim().split(" ");t.addPointGeometry(p)}else if(null!==(r=tut.exec(l))){const f=(" "+r[0].slice(1).trim()).slice(1);t.startObject(f)}else if(iut.test(l))t.object.startMaterial(l.substring(7).trim(),t.materialLibraries);else if(nut.test(l))t.materialLibraries.push(l.substring(7).trim());else if(rut.test(l))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(r=l.split(" "),r.length>1){const p=r[1].trim().toLowerCase();t.object.smooth="0"!==p&&"off"!==p}else t.object.smooth=!0;const f=t.object.currentMaterial();f&&(f.smooth=t.object.smooth)}else{if("\0"===l)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+l+'"')}}t.finalize();const s=new jo;if(s.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,c=t.objects.length;a<c;a++){const l=t.objects[a],u=l.geometry,f=l.materials,p="Line"===u.type,g="Points"===u.type;let v=!1;if(0===u.vertices.length)continue;const _=new Tr;_.setAttribute("position",new fi(u.vertices,3)),u.normals.length>0&&_.setAttribute("normal",new fi(u.normals,3)),u.colors.length>0&&(v=!0,_.setAttribute("color",new fi(u.colors,3))),!0===u.hasUVIndices&&_.setAttribute("uv",new fi(u.uvs,2));const w=[];for(let x=0,M=f.length;x<M;x++){const E=f[x],I=E.name+"_"+E.smooth+"_"+v;let k=t.materials[I];if(null!==this.materials)if(k=this.materials.create(E.name),!p||!k||k instanceof B2){if(g&&k&&!(k instanceof Yp)){const O=new Yp({size:10,sizeAttenuation:!1});bl.prototype.copy.call(O,k),O.color.copy(k.color),O.map=k.map,k=O}}else{const O=new B2;bl.prototype.copy.call(O,k),O.color.copy(k.color),k=O}void 0===k&&(k=p?new B2:g?new Yp({size:1,sizeAttenuation:!1}):new jie,k.name=E.name,k.flatShading=!E.smooth,k.vertexColors=v,t.materials[I]=k),w.push(k)}let b;if(w.length>1){for(let x=0,M=f.length;x<M;x++){const E=f[x];_.addGroup(E.groupStart,E.groupCount,x)}b=p?new sm(_,w):g?new p_(_,w):new fo(_,w)}else b=p?new sm(_,w[0]):g?new p_(_,w[0]):new fo(_,w[0]);b.name=l.name,s.add(b)}else if(t.vertices.length>0){const a=new Yp({size:1,sizeAttenuation:!1}),c=new Tr;c.setAttribute("position",new fi(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(c.setAttribute("color",new fi(t.colors,3)),a.vertexColors=!0);const l=new p_(c,a);s.add(l)}return s}}let Zy=(()=>{class n{constructor(t,i,r,s){this.threeMaterialService=t,this.cookieService=i,this.httpClient=r,this.appService=s,this.textures={},this.cameraPerspective=!0,this.update$=new $e}swapCamera(){this.cameraPerspective=!this.cameraPerspective,this.update$.next(void 0)}filter(t,i){t.children.forEach(r=>{console.log(r.name,i),r.visible=!!r.name.includes(i)})}unionAll(t){let i=t[0];return t.forEach(r=>{void 0!==r&&(r.updateMatrix(),r!==i&&(i=g1.union(i,r)))}),i}flatShapeCross(t,i,r){const s=this.flatShape(t,i,r,i);return this.rotateAroundAxis(s,Ei(-90),ea.blue),this.rotateAroundAxis(s,Ei(-90),ea.red),s}flatShape(t,i=0,r=[vn.insulation],s){if(t.length<3)return;const o=new jf,a=t[0];o.moveTo(0,0),t.forEach(p=>{o.lineTo(p[0]-a[0],p[1]-a[1])}),o.lineTo(0,0);const c={steps:2,depth:s,bevelEnabled:!1},l=r.flatMap(p=>this.threeMaterialService.getMaterial(p,r.length>1)),u=new w_(o,c),f=new fo(u,l);return f.rotateX(Math.PI/2),f.receiveShadow=!0,f.castShadow=!0,this.translate(f,a[0],i,a[1]),f}extrudedShape(t){const{material:i,coords:r,xyz:s,depth:o}=t;if(r.length<3)return;const a=new jf,c=r[0];a.moveTo(0,0),r.forEach(p=>{a.lineTo(p[0]-c[0],p[1]-c[1])}),a.lineTo(0,0);const u=new w_(a,{steps:1,depth:o,bevelEnabled:!1}),f=new fo(u,this.threeMaterialService.getMaterial(i));return f.receiveShadow=!0,f.castShadow=!0,this.translate(f,s[0],s[1],s[2]-o),f}translate(t,i,r,s){t.applyMatrix4((new Zi).makeTranslation(i,r,s))}createPane(t){const{material:i,coords:r,xyz:s}=t,o=new jf,a=r[0];o.moveTo(0,0),r.forEach(u=>{o.lineTo(u[0]-a[0],u[1]-a[1])}),o.lineTo(0,0);const c=new fS(o),l=new fo(c,this.threeMaterialService.getMaterial(i)[0]);return this.translate(l,s[0],s[1],s[2]),l}createBox(t){const{material:i,whd:r,xyz:s}=t,[o,a,c]=r,[l,u,f]=s||[0,0,0],p=new S0(o,a,c),g=new fo(p,this.threeMaterialService.getMaterial(i));return g.position.set(o/2+l,a/2+u,c/2+f),g.castShadow=!0,g.receiveShadow=!0,g}createCube(t){const{material:i,whd:r,xyz:s}=t,[o,a,c]=r,[l,u,f]=s||[0,0,0],g=this.flatShape([[0,0],[o,0],[o,c],[0,c]],0,[i],a);return g.position.set(l,u+a,f),g.castShadow=!0,g.receiveShadow=!0,g}importGLTF(t,i){(new M3t).load(`/assets/models/${t}`,s=>{const o=s.scene;o.children.forEach(a=>{a.castShadow=!0,a.receiveShadow=!0}),o.castShadow=!0,o.receiveShadow=!0,o.name=t,i(o)})}importOBJ(t,i,r){(new out).load(`/assets/models/${i}`,o=>{o.children.forEach(a=>{a.castShadow=!0,a.receiveShadow=!0}),o.castShadow=!0,o.receiveShadow=!0,o.name=i,r(o)})}basicGround(t,i){const s=new W3(100,100,1,1),o=this.threeMaterialService.getMaterial(vn.whiteWood),a=new fo(s,o[0]);a.position.set(0,i,0),a.rotateX(-Math.PI/2),a.receiveShadow=!0,t.add(a)}rotateAroundAxis(t,i,r=ea.green,s=new be(0,0,0)){var o=new J2;o.setFromAxisAngle((n=>{switch(n){case ea.x:return new be(1,0,0);case ea.y:return new be(0,1,0);case ea.z:return new be(0,0,1);case ea.red:return new be(1,0,0);case ea.green:return new be(0,1,0);case ea.blue:return new be(0,0,1)}})(r),i),t.applyQuaternion(o),t.position.sub(s),t.position.applyQuaternion(o),t.position.add(s)}}return n.\u0275fac=function(t){return new(t||n)(Xe(qT),Xe(U3),Xe(dh),Xe(io))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aut=["rendererContainer"];var qr=(()=>(function(n){n.East="East",n.West="West",n.North="North",n.South="South",n.Top="Top",n.Bottom="Bottom"}(qr||(qr={})),qr))();const U3e={[qr.North]:0,[qr.West]:90,[qr.South]:180,[qr.East]:270};let G3e=(()=>{class n{constructor(t,i,r,s,o,a){this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.subscriptions=[],this.modelName="base",this.resize$=new Vs(void 0),this.renderer=new uie({antialias:!0,alpha:!0}),this.scene=new hie,this.subModels={},this.animations={},this.house$=this.houseService.house$,this.animationDuration=1.5,this.clipBox=new C3t,this.cameraMargin=2}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer.unobserve(this.host.nativeElement),this.gui.destroy()}AfterViewInitCallback(){}OnSectionChangeCallback(){}defaultCamera(){this.camera.position.set(10,10,10),this.controls.target.set(1,1,1)}loadManager(){}ngAfterViewInit(){this.house=this.house$.value,this.cross=this.house.cross,this.construction=this.house.construction,this.keys.forEach(t=>{this.subModels[t]=[],this.animations[t]=Ph.timeline()}),this.createScene(),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.subscriptions.push(this.appService.floor$.subscribe(t=>{this.floor=t,this.filterOnFloor()}),this.clipBox.onChange$.subscribe(()=>{this.drawAndClip()}),this.threeService.update$.subscribe(()=>{this.onUpdate()}),this.appService.states$.subscribe(t=>{this.clipBox.states(t),this.setVisibility(t,this.animationDuration),this.drawAndClip()}),this.resize$.subscribe(()=>{this.onResize()}),this.appService.fullscreen$.subscribe(t=>{this.onResize(),this.controls.enableZoom=t}),this.appService.tag$.subscribe(()=>{this.tag=this.appService.tag$.value}),this.appService.scroll$.subscribe(()=>{const t=this.appService.scroll$.value;this.section!==t.section&&(this.section=t.section,this.OnSectionChangeCallback())})),this.initDraw(),T_.onError=function(t){console.log("There was an error loading "+t)}}filterOnFloor(){const t=r=>{r.children.forEach(s=>{i(s),s instanceof jo&&t(s)})},i=r=>{const s=r.userData.floor;s&&(r.visible=s===at.all||this.floor===at.top||s===this.floor)};t(this.scene)}clearScene(){console.log("clearScene");try{this.scene.children.forEach(t=>{!0===t.userData.clipped&&this.scene.remove(t)})}catch(t){console.log(t)}}env(){(new s3t).setPath("assets/").load("scythian_tombs_2_4k.hdr",(t,i)=>{const r=new xP(this.renderer),s=r.fromEquirectangular(t);r.compileCubemapShader(),this.threeMaterialService.envTexture=s.texture,this.scene.background=this.threeMaterialService.envTexture})}onUpdate(){this.setCamera()}initDraw(){this.scene.add(this.clipBox);const t=Object.values(this.cross.elevations),i=this.cookieService.get(`${this.modelName}_clip-box`);if(""!==i){const r=JSON.parse(i);this.clipBox.setCookie(r)}else this.clipBox.height=Math.max(...t)-Math.min(...t),this.clipBox.xyz[1]=Math.min(...t);this.clipBox.enabled&&this.clipBox.drawBox(),this.AfterViewInitCallback(),this.scene.traverse(r=>{r.isMesh&&(r.castShadow=!0)}),this.drawAndClip(),this.filterOnFloor()}drawAndClip(){const t=this.appService.states$.value,i=this.clipBox.box.clone();this.clipBox.enabled&&(this.clearScene(),this.clipBox.box.getWorldPosition(i.position)),Object.values(this.keys).forEach(r=>{this.subModels[r].forEach(s=>{if(this.clipBox.enabled){try{this.clipBox.box.updateMatrixWorld(!0),s instanceof fo?s=this.clip(s,i):s instanceof jo?s=this.clipGroup(s,i):console.log(s)}catch(o){console.log(o)}this.scaleFromSomewhere(r,s),s.userData.clipped=!0}this.scene.add(s)}),this.animations[r].progress(!0===t[r]?0:1)})}onResize(){const t=this.host.nativeElement.getBoundingClientRect(),i=t.height,r=t.width;this.camera&&this.setCamera(),this.renderer.setSize(r,i),this.composer.setSize(r,i)}debug(t){const i=c1.debug;(t=t.clone()).material=new Pa({color:65280,opacity:.5,transparent:!0,side:2,wireframe:!0}),this.add(i,[t]),this.scaleFromSomewhere(i,t,.5)}animate(){window.requestAnimationFrame(()=>this.animate()),this.clipBox&&!this.controlsAreActive&&this.clipBox.onMouseOver(this.camera,this.renderer,()=>{this.cookieService.set(`${this.modelName}_clip-box`,JSON.stringify({xyz:this.clipBox.xyz,height:this.clipBox.height,width:this.clipBox.width,depth:this.clipBox.depth}))},()=>{this.controls.enableRotate=!1,this.renderer.domElement.style.cursor="move"},()=>{this.controls.enableRotate=!0,this.renderer.domElement.style.cursor="auto"}),this.renderer.render(this.scene,this.camera)}setCamera(){const t=this.host.nativeElement.getBoundingClientRect(),s=t.width/t.height;if(this.threeService.cameraPerspective)this.camera=new f2(50,s,.1,1e3);else{const o=Math.max(this.house.houseWidth,this.house.houseLength)+2*this.cameraMargin,a=o/s;this.camera=new $p(-o/2,o/2,a/2,-a/2,-1e3,1e3)}if(this.setControls(),window.camera=this.camera,this.threeService.cameraPerspective){this.orbitControlsCookie=this.cookieService.get(`${this.modelName}_orbitControls`);try{if(""!==this.orbitControlsCookie){const o=JSON.parse(this.orbitControlsCookie)[0];this.camera.matrix.fromArray(o.camera),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.controls.target.fromArray(o.target)}else this.defaultCamera()}catch(o){console.error(o),this.defaultCamera()}}else this.orthographicCameraSnap(qr.North,!1);this.controls.update()}setControls(){this.controls=new r3t(this.camera,this.renderer.domElement),window.control=this.controls,this.subscriptions.push(xa(this.controls,"change").pipe(lC(1e3)).subscribe(t=>{if(!this.threeService.cameraPerspective)return;const i=JSON.stringify([{camera:this.camera.matrix.toArray(),target:this.controls.target.toArray()}]);this.cookieService.set(`${this.modelName}_orbitControls`,i)})),this.controls.addEventListener("start",t=>{this.controlsAreActive=!0,this.cameraAnimation&&this.cameraAnimation.kill(),this.cameraZoomAnimation&&this.cameraZoomAnimation.kill(),this.cameraTargetAnimation&&this.cameraTargetAnimation.kill()}),this.controls.addEventListener("end",t=>{this.controlsAreActive=!1,this.orthographicCameraSnap()})}orthographicCameraSnap(t,i=!1){const r=this.camera;if(this.threeService.cameraPerspective)return;const s=this.house.houseWidth,o=this.house.houseLength,a=this.cross.elevations[Bt.topOutside];if(void 0===t){i=!0;const[p,g]=function tGe(n,e,t=3){const r=Math.atan2(e.y-n.y,Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.z-n.z,2)))*(180/Math.PI);let o=Math.atan2(e.x-n.x,e.z-n.z)*(180/Math.PI);return o<0&&(o=360+o),[cn(-r,t),cn(o,t)]}(r.position,this.controls.target),v=(w,b)=>{const x=U3e[b];return w>315&&(w-=360),w<x+45&&w>x-45},_=(w,b,x,M)=>{const E=U3e[b];return w>315&&(w-=360),Math.abs(w-E)<=10?b:w-E>0?M:x};p>45?t=qr.Top:v(g,qr.North)?t=qr.North:v(g,qr.West)?t=qr.West:v(g,qr.South)?t=qr.South:v(g,qr.East)&&(t=qr.East),this.cameraViewSide===t&&(t===qr.East?t=_(g,qr.East,qr.South,qr.North):t===qr.South?t=_(g,qr.South,qr.West,qr.East):t===qr.West?t=_(g,qr.West,qr.North,qr.South):t===qr.North&&(t=_(g,qr.North,qr.East,qr.West))),this.cameraViewSide=t}let c={x:0,y:0,z:0};t==qr.North?c={x:s/2,y:a/2,z:0*o}:t==qr.West?c={x:0*s,y:a/2,z:o/2}:t==qr.East?c={x:s/1,y:a/2,z:o/2}:t==qr.South?c={x:s/2,y:a/2,z:o/1}:t==qr.Top&&(c={x:s/2,y:a/1,z:o/2+.01});const l=([qr.North,qr.South].includes(t)?s:o)+2*this.cameraMargin,u=(r.right-r.left)/l,f={x:s/2,y:a/2,z:o/2};i?(this.cameraAnimation=Ph.to(r.position,{duration:1,...c,onUpdate:()=>this.controls.update()}),this.cameraZoomAnimation=Ph.to(r,{duration:1,zoom:(r.right-r.left)/l,onUpdate:()=>r.updateProjectionMatrix()}),this.cameraTargetAnimation=Ph.to(this.controls.target,{duration:1,...f,onUpdate:()=>this.controls.update()}),this.cameraAnimation.play(),this.cameraZoomAnimation.play(),this.cameraTargetAnimation.play()):(r.position.set(c.x,c.y,c.z),r.zoom=u,this.controls.target.set(f.x,f.y,f.z),r.updateProjectionMatrix(),this.controls.update())}initSky(){const t=new eL;t.scale.setScalar(45e4),this.scene.add(t);const i=new be,r={turbidity:10,rayleigh:1,mieCoefficient:.008,mieDirectionalG:.68,elevation:20,azimuth:13,exposure:this.renderer.toneMappingExposure},s=()=>{const a=t.material.uniforms;a.turbidity.value=r.turbidity,a.rayleigh.value=r.rayleigh,a.mieCoefficient.value=r.mieCoefficient,a.mieDirectionalG.value=r.mieDirectionalG;const c=yM.degToRad(90-r.elevation),l=yM.degToRad(r.azimuth);i.setFromSphericalCoords(1,c,l),a.sunPosition.value.copy(i),this.renderer.toneMappingExposure=r.exposure,this.renderer.render(this.scene,this.camera)},o=this.gui.addFolder("Sky");o.add(r,"turbidity",0,20,.1).onChange(s),o.add(r,"rayleigh",0,4,.001).onChange(s),o.add(r,"mieCoefficient",0,.1,.001).onChange(s),o.add(r,"mieDirectionalG",0,1,.001).onChange(s),o.add(r,"elevation",0,90,.1).onChange(s),o.add(r,"azimuth",-180,180,.1).onChange(s),o.add(r,"exposure",0,1,1e-4).onChange(s),s(),o.close()}lights(t=1){const i=new Yie(16777215,7829367,1.1*t);i.position.set(0,50,35),this.scene.add(i);const r=this.gui.addFolder("Lighting");r.close(),r.add(i,"intensity",0,3,.01);const s=new oH(16777215,.4*t);s.position.set(15,30,45),s.target.position.set(0,0,0),s.castShadow=!0,s.shadow.mapSize.width=2048,s.shadow.mapSize.height=2048,s.shadow.camera.near=.5,s.shadow.camera.far=5e3,s.shadow.bias=-1e-4,s.shadow.camera.top=30,s.shadow.camera.bottom=-30,s.shadow.camera.left=30,s.shadow.camera.right=-30,this.initSky(),this.scene.add(s)}sky(){scene.fog=new jM(scene.background,10,100);const t=document.getElementById("vertexShader").textContent,i=document.getElementById("fragmentShader").textContent,r={topColor:{value:new In(30532)},bottomColor:{value:new In(16729167)},offset:{value:33},exponent:{value:.6}},s=new b_(400,32,15),o=new tl({uniforms:r,vertexShader:t,fragmentShader:i,side:1}),a=new fo(s,o);this.scene.add(a)}createScene(){this.setCamera(),this.renderer.shadowMap.enabled=!0,this.renderer.toneMapping=4,this.renderer.toneMappingExposure=.8,this.renderer.localClippingEnabled=!0,this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),window.camera=this.camera,window.renderer=this.renderer,window.scene=this.scene,this.composer=new A3t(this.renderer);const t=window.innerWidth,i=window.innerHeight,r=new _3t(this.scene,this.camera,t,i);r.kernelRadius=.6,r.minDistance=1e-4,r.maxDistance=.001,this.composer.addPass(r),this.gui=new fV,this.gui.close(),this.animate(),this.rendererContainer.nativeElement.querySelector(".loader").remove(),this.gui.hide()}yoyo(t){setTimeout(()=>{this.animations[t].yoyo(!0).repeat(-1).repeatDelay(.3).play()},1e3)}add(t,i,r=!1){i.forEach(s=>{s.userData.key=t,this.forEachMeshOrGroup(s,o=>{o.geometry&&(o.geometry.userData.key=t)})}),this.subModels[t].push(...i.filter(s=>s)),r&&i.forEach(s=>this.scene.add(s))}forEachMeshOrGroup(t,i){t instanceof fo&&i(t),t instanceof jo&&t.children.forEach(r=>this.forEachMeshOrGroup(r,i))}clip(t,i){return t.updateMatrix(),t.updateWorldMatrix(!0,!0),i.updateMatrix(),i.updateWorldMatrix(!0,!0),g1.subtract(t,i)}intersect(t,i){return t.updateMatrix(),i.updateMatrix(),g1.intersect(t,i)}intersectGroup(t,i){const r=t.clone();return r.children=t.children.map(o=>o instanceof fo?this.intersect(o,i):o instanceof jo?this.intersectGroup(o,i):void 0),r}clipGroup(t,i){const r=t.clone();return r.children=t.children.map(o=>o instanceof fo?this.clip(o,i):o instanceof jo?this.clipGroup(o,i):void 0),r}mergeAll(t){let i=t[0];return t.forEach((r,s)=>{0!==s&&(i=this.merge(i,r))}),i}merge(t,i){return t.updateMatrix(),i.updateMatrix(),g1.union(t,i)}translate(t,i,r,s){t.applyMatrix4((new Zi).makeTranslation(i,r,s))}scale(t,i,r,s){t.applyMatrix4((new Zi).scale(new be(i,r,s)))}pauseAll(){this.keys.forEach(t=>{this.animations[t].pause()})}debugMeasureBlock(t=1,i=1,r=1,s=1){const o=this.threeService.createCube({material:vn.floor,whd:[s,s,s],xyz:[t,i,r]});this.scene.add(o)}setVisibility(t,i=1.2){this.pauseAll(),this.keys.forEach(r=>{const s=this.animations[r],o=!0===t[r],a=1!==s.progress(),c=1===s.progress();o?c||0===i?s.timeScale(1).reverse():Ph.to(s,{progress:0,duration:i}):a||0===i?s.timeScale(2).play():Ph.to(s,{progress:1,duration:i})})}group(t){const i=new jo;return t.forEach(r=>{r&&i.add(r)}),i}scaleZInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{z:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleYInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{y:0,duration:r,ease:s}),this.animations[t].to(i.scale,{y:0,z:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleXInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{x:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleFromSomewhere(t,i,r=.3,s="linear",o=!1){this.animations[t].to(i.position,{y:o?10:-10,duration:r,ease:s}),this.animations[t].to(i,{visible:!1,duration:0})}}return n.\u0275fac=function(t){return new(t||n)(U(Zy),U(No),U(mn),U(io),U(U3),U(qT))},n.\u0275cmp=Sn({type:n,selectors:[["app-three-house-base"]],viewQuery:function(t,i){if(1&t&&_o(aut,5),2&t){let r;Gi(r=Qi())&&(i.rendererContainer=r.first)}},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),cut=(()=>{class n extends G3e{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a),this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.modelName="Construction3D",this.keys=Object.values(Oi),this.demoDepth=3,this.joistFlangeHeight=.04,this.window=new e3t({}),this.windowRoughOSBClip=this.threeService.createCube({material:vn.unknown,whd:[this.window.roughWidthOSB-(this.window.gap+this.window.thicknessOSB),this.window.roughHeightOSB,2],xyz:[0,this.window.roughBottomOSB,-1]}),this.windowRoughClip=this.threeService.createCube({material:vn.unknown,whd:[this.window.roughWidth-this.window.gap,this.window.roughHeight,2],xyz:[0,this.window.roughBottom,-1]}),this.offsetDistanceBend=(c,l,u=!1)=>{const f=this.construction.getRoofPoint(l);let p=0,g=0;[Bt.bendInside,Bt.bendOutside].includes(l)&&(p=(this.lowerAngle-this.upperAngle)/2,g=this.edgeAngle+90),[Bt.topInside,Bt.topOutside].includes(l)&&(p=0,g=90),[Bt.lowestInside,Bt.lowestOutside].includes(l)&&(p=0,g=this.lowerAngle+180),[Bt.groundFloorInside,Bt.groundFloorOutside,Bt.wallInside,Bt.wallOutside].includes(l)&&(p=0,g=180);let v=c/Math.cos(Ei(p));return u&&(v=c),po(g,v,f)},this.appService.setState([p6.clipBoxShow,p6.clipBoxEnabled],!1,!1,!0)}handleKeyboardEvent(t){"F4"===t.key&&(console.log("reset camera"),this.camera.position.set(10,10,10),this.camera.lookAt(0,0,0)),"1"===t.key&&this.focusCamera("in"),"2"===t.key&&this.focusCamera("out")}AfterViewInitCallback(){this.threeService.basicGround(this.scene,-3),this.thickness=this.construction.thickness,this.crossDepth=this.construction.crossDepth,this.amountOfStuds=6,this.outerWallHeight=this.cross.outerWallHeight,this.innerWallHeight=this.cross.innerWallHeight,this.solePlateThickness=.03,this.demoWith=this.amountOfStuds*this.house.studDistance,this.studDistance=this.house.studDistance,this.ceilingHeight=this.cross.ceilingHeight,this.floorThickness=this.cross.topFloorThickness,this.floorLVLThickness=.07,this.joistFlangeWidth=.06,this.center=new be(this.demoWith/2,this.outerWallHeight/3,this.crossDepth[An.facade]/2),this.lowerAngle=cn(R1(this.construction.getRoofPoint(Bt.lowestOutside),this.construction.getRoofPoint(Bt.bendOutside))-90,3),this.upperAngle=cn(R1(this.construction.getRoofPoint(Bt.bendOutside),this.construction.getRoofPoint(Bt.topOutside))-90,3),this.edgeAngle=180-((180-this.lowerAngle+this.upperAngle)/2-this.upperAngle),this.lights(1),this.demoDepth=this.construction.getRoofPoint(Bt.topOutside)[0],this.buildFoundation(),this.buildICF(),this.buildGroundFloor(),this.buildTapes(),this.buildWindowOSB(),this.buildOSB(),this.buildOSBRoof(),this.buildTopFloor(),this.buildFloorLVL(),this.buildTopFloorOSB(),this.buildSole(),this.buildJoist(),this.buildRoofJoists(),this.buildInsulation(),this.buildServiceInsulation(),this.buildServiceBeams(),this.buildOuterSheet(),this.buildSpace(),this.buildRoofSpace(),this.buildFacade(),this.buildGips(),this.buildRoofTiles(),this.createMirror(),this.importDude();const t=new dH(.5);t.position.set(0,0,0),this.scene.add(t)}OnSectionChangeCallback(){[Ct.constructionFoundation,Ct.constructionCrawlerSpace].includes(this.section)?this.focusCamera("subGround"):[Ct.constructionFloorLVL,Ct.constructionRoof,Ct.constructionWallOSB,Ct.constructionWallTape,Ct.constructionWallService,Ct.constructionWallGips,Ct.constructionFloor].includes(this.section)?this.focusCamera("in"):[Ct.constructionWallSole,Ct.constructionWallJoists,Ct.constructionGroundFloor,Ct.constructionWallInsulation,Ct.constructionWallOuterSheet,Ct.constructionWallSpace,Ct.constructionWallFacade].includes(this.section)&&this.focusCamera("out")}focusCamera(t){var i=Ph.timeline();let s=this.center.z;["in"].includes(t)&&(s+=-10),["subGround"].includes(t)&&(s+=1),["out"].includes(t)&&(s+=10),this.pauseAll(),i.to(this.camera.position,{duration:.4,x:this.center.x-10,y:["subGround"].includes(t)?0:1.8,z:s,onUpdate:()=>{this.camera.lookAt(this.center.x,this.center.y,this.center.z)},onComplete:()=>{Ph.globalTimeline.play()}})}getRoofAndOffsetPoints(t){let i={};return Object.keys(Bt).forEach(r=>{i[r]=this.construction.getRoofPoint(r),i[`${r}Offset`]=this.offsetDistanceBend(t,r)}),i}getAngledProperties(t,i,r){const s=this.getRoofAndOffsetPoints(r),o=Ma(s[`${t}Offset`],s[`${i}Offset`]),a=R1(s[t],s[i]);return{totalWidth:o,angle:a,origin:this.useOppositeCorner(s[`${t}Offset`],r,a),rotation:[a-90,0,0]}}useOppositeCorner(t,i,r){const[s,o]=po(r-90,i,t);return[0,o,-s]}plotRoofPoints(){const t=-this.cross.roofPoints[Bt.wallInside][0];Object.entries(this.cross.roofPoints).map(([i,r])=>{if(!i.includes("Inside"))return;console.log(i);const s=new dH(1);s.position.set(0,r[1],-r[0]-t),this.scene.add(s)})}scaleZInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{z:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleYInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{y:0,duration:r,ease:s}),this.animations[t].to(i.scale,{y:0,z:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}scaleXInOut(t,i,r=.3,s="power3"){this.animations[t].to(i.position,{x:0,duration:r,ease:s}),this.animations[t].to(i.scale,{z:0,x:0,duration:r,ease:s},"<"),this.animations[t].to(i,{visible:!1,duration:0})}importDude(){this.threeService.importGLTF("Male_Standing.glb",t=>{this.scene.add(t),t.scale.set(.5,.5,.5),t.rotateY(Ei(-110)),t.position.set(this.demoWith/2,this.cross.elevations[Ti.topFloor],-2)})}createMirror(){this.mirror=new Jlt(new W3(30,30),{color:new In(8355711),textureWidth:window.innerWidth*window.devicePixelRatio,textureHeight:window.innerHeight*window.devicePixelRatio}),this.mirror.visible=this.appService.states$.value[p6.mirror],this.mirror.position.set(-2,0,-this.construction.getRoofPoint(Bt.topOutside)[0]),this.scene.add(this.mirror)}createJoist(t,i,r=.04,s=.005){const o=this.joistFlangeWidth,a=[{material:vn.pine,whd:[o,t,r],xyz:[0,0,0]},{material:vn.pine,whd:[o,t,r],xyz:[0,0,i-r]},{material:vn.osb,whd:[s,t,i-2*r],xyz:[o/2-s/2,0,r]}],c=new jo;return a.forEach((l,u)=>{const f=this.threeService.createCube(l);c.add(f),2===u&&(f.material[0].color=new In(14277081))}),c}createCornerTape(t,i,r,s){const o=new jo,a=this.threeService.createCube({material:vn.tape,whd:[s,t,r]});a.rotateX(Ei(0)),this.translate(a,0,-t,0),o.add(a);const c=this.threeService.createCube({material:vn.tape,whd:[s,i,r]});return c.rotateX(Ei(90)),this.translate(c,0,-i/2-r/2,-i/2+r/2),o.add(c),o}createIFCblock(t,i,r,s){const o=new jo,a=this.threeService.createCube({material:vn.foam,whd:[i,r,s]}),c=this.threeService.createCube({material:vn.foam,whd:[i,r,s]});return this.translate(a,0,0,0),this.translate(c,0,0,t+s),o.add(a),o.add(c),this.scene.add(o),o}buildFoundation(){const t=Oi.foundation,c=this.threeService.createCube({material:vn.concrete,whd:[this.demoWith,.3,.4],xyz:[0,this.cross.elevations[Ti.crawlerFloor]-.3,this.crossDepth[An.groundFloorEdge]-.4*.8]});this.add(t,[c]),this.animations[t].to(c.scale,{z:0,y:0,duration:.6,ease:"power3"}),this.animations[t].to(c,{visible:!1,duration:0})}buildRoofJoists(){const t=Oi.roofJoists;this.buildRoofHigherJoists(),this.buildRoofLowerJoists(),this.subModels[t].flatMap(r=>r.children).sort((r,s)=>r.position.x-s.position.x).forEach((r,s)=>{this.scaleZInOut(t,r,.1)}),this.buildRoofLVL()}buildRoofLowerJoists(){const t=Oi.roofJoists,s=(this.construction.getRoofPoint(Bt.wallInside),this.construction.getRoofPoint(Bt.wallInside),this.construction.getRoofPoint(Bt.wallOutside)),o=this.construction.getRoofPoint(Bt.bendInside),a=this.construction.getRoofPoint(Bt.bendOutside),c=this.thickness[An.roofJoists],l=new jo;this.add(t,[l]),l.rotateX(Ei(this.lowerAngle)),this.translate(l,0,s[1],-s[0]);const u=Ma(s,a),f=[],p=-(90-R1(o,a)),g=new wh(new be(0,0,1),0);f.push(g);let v=(new Zi).makeRotationX(Ei(p));g.applyMatrix4(v.setPosition(new be(0,o[1],-o[0]))),this.threeService.createCube({whd:[this.demoDepth,this.cross.elevations[Bt.wallInside],this.thickness[An.joists]],material:vn.unknown});const E=c-2*this.joistFlangeHeight-.1;for(let I of[...Array(this.amountOfStuds+1).keys()]){let k=I*this.studDistance-this.joistFlangeWidth/2;0===I&&(k=0);let O=this.createJoist(u+0,c);O.position.set(0,-0,0);const R=this.threeService.createCube({material:vn.pine,whd:[this.joistFlangeWidth,.5,E],xyz:[0,0,this.joistFlangeHeight+.05]});O.add(R);const P=this.threeService.createCube({material:vn.pine,whd:[this.joistFlangeWidth,.5,E],xyz:[0,u+0-.5,this.joistFlangeHeight+.05]});O.add(P),O.children.flatMap(Q=>Q.material).forEach(Q=>{Q.side=2,Q.clippingPlanes=f,Q.clipIntersection=!1,Q.clipShadows=!0}),this.translate(O,k,0,0),l.add(O)}}buildRoofHigherJoists(){const t=Oi.roofJoists,i=this.construction.getRoofPoint(Bt.bendInside),r=this.construction.getRoofPoint(Bt.bendOutside),o=(this.construction.getRoofPoint(Bt.topInside),this.construction.getRoofPoint(Bt.topOutside)),a=new jo;this.add(t,[a]);const c=R1(r,o)-90;a.rotateX(Ei(c)),this.translate(a,0,r[1],-r[0]);const l=this.thickness[An.roofJoists],u=Ma(r,o),f=[],p=new wh(new be(0,0,1),o[0]-this.cross.roofRidgeWidth/2);f.push(p);const g=R1(i,r)-90,v=new wh(new be(0,0,-1),0);f.push(v);let _=(new Zi).makeRotationX(Ei(g));v.applyMatrix4(_.setPosition(new be(0,i[1],-i[0])));const E=l-2*this.joistFlangeHeight-.1;for(let I of[...Array(this.amountOfStuds+1).keys()]){let k=I*this.studDistance-this.joistFlangeWidth/2;0===I&&(k=0);const O=this.createJoist(u+2,l);O.position.set(0,-1,-l);const R=this.threeService.createCube({material:vn.pine,whd:[this.joistFlangeWidth,1.5,E],xyz:[0,0,this.joistFlangeHeight+.05]});O.add(R);const P=this.threeService.createCube({material:vn.pine,whd:[this.joistFlangeWidth,1.5,E],xyz:[0,u+1-.5,this.joistFlangeHeight+.05]});O.add(P),O.children.flatMap(Q=>Q.material).forEach(Q=>{Q.side=2,Q.clippingPlanes=f,Q.clipIntersection=!1,Q.clipShadows=!0}),this.translate(O,k,0,0),a.add(O)}}buildICF(){const t=Oi.crawlerSpace,i=.2,c=this.cross.crawlerHeight,l=this.demoWith,p=Math.ceil(c/.3),g=Math.ceil(l/.6),v=this.cross.elevations[Ti.crawlerCeiling],_=v-c,w=this.crossDepth[An.groundFloorEdge]-i,b=Number(`${p}${g+1}`),x=this.threeService.createCube({material:vn.concrete,whd:[this.demoWith,c,i]});this.translate(x,0,v-c,w),this.scene.add(x),this.animations[t].to(x.scale,{y:0,duration:1,ease:"Back.easeIn"}),this.animations[t].to(x.position,{y:_,ease:"Back.easeIn",duration:1},"<"),this.animations[t].to(x.scale,{z:0}),this.animations[t].to(x,{visible:!1,duration:0});for(let M of[...Array(p).keys()]){M=p-1-M;for(let E of[...Array(g+1).keys()]){E=g-E;const I=Number(`${M}${E}`);let O=.6*E+(M%2?-.3:0),R=_+.3*M,P=.6,Q=.3;if(O<0&&(P=.3,O+=.3),O+P>l&&(P=l-O),R+Q>v&&(Q=v-R),0===P||0===Q)continue;const J=this.createIFCblock(i,P,Q,.067);this.translate(J,O,R,w-.067),this.add(t,[J]);const Ce=(b-I)/b,Ae=cn(.02+.2*Math.pow(Ce,4)+.4*Math.pow(Ce,16));this.animations[t].to(J.position,{y:0,x:0,duration:Ae,ease:"power3"}),this.animations[t].to(J.children[0].position,{x:.5,z:i,duration:Ae,ease:"power3"}),this.animations[t].to(J.scale,{z:0,x:0,duration:Ae})}}}buildTapes(){const t=Oi.tapes,i=.07,r=.01,s=1.2,a=.05,c=this.crossDepth[An.serviceBeams]-r,l=Math.ceil(this.cross.innerWallHeight/s),u=Math.ceil(this.demoWith/2.4),f=this.createCornerTape(i,1*i,r,this.window.roughWidth-this.window.gap+i);f.scale.set(1,1,-1),this.translate(f,0,this.window.roughBottom+r,this.crossDepth[An.serviceBeams]),this.add(t,[f]),this.scaleXInOut(t,f,a);const p=this.createCornerTape(i,1*i,r,this.window.roughWidth-this.window.gap+i);p.scale.set(1,-1,-1),this.translate(p,0,this.window.roughTop-r,this.crossDepth[An.serviceBeams]),this.add(t,[p]),this.scaleXInOut(t,p,a);const g=this.createCornerTape(i,1*i,r,this.window.roughTop-this.window.roughBottom+2*i-2*r);g.rotateZ(Ei(90)),g.scale.set(1,1,-1),this.translate(g,this.window.roughWidth-this.window.gap-r,this.window.roughBottom-i+r,this.crossDepth[An.serviceBeams]),this.add(t,[g]),this.scaleXInOut(t,g,a);const v=this.createCornerTape(i,1*i,r,this.thickness[An.joists]+this.thickness[An.osb]);v.rotateY(Ei(-90)),v.scale.set(1,-1,-1),this.translate(v,this.window.roughWidth-this.window.gap-r,this.window.roughBottom,this.crossDepth[An.serviceBeams]),this.add(t,[v]),this.scaleXInOut(t,v,a);const _=this.createCornerTape(i,1*i,r,this.thickness[An.joists]+this.thickness[An.osb]);_.rotateY(Ei(-90)),_.scale.set(1,1,-1),this.translate(_,this.window.roughWidth-this.window.gap-r,this.window.roughTop,this.crossDepth[An.serviceBeams]),this.add(t,[_]),this.scaleXInOut(t,_,a);for(let w of[...Array(l).keys()]){const b=s*w,x=this.clip(this.threeService.createCube({material:vn.tape,whd:[this.demoWith,i,r],xyz:[0,b,c]}),this.windowRoughOSBClip);this.add(t,[x]),this.scaleXInOut(t,x,a);for(let M of[...Array(u).keys()]){const E=w%2?2.4*M:1.2+2.4*M;if(E+i>this.demoWith)continue;let I=s;b+s>this.cross.innerWallHeight&&(I=this.cross.innerWallHeight-b);const k=this.clip(this.threeService.createCube({material:vn.tape,whd:[i,I,r],xyz:[E,b,c]}),this.windowRoughOSBClip);this.add(t,[k]),this.scaleYInOut(t,k,a)}}}buildRoofTapes(){}buildInsulation(){const t=Oi.insulation,i=this.cross.elevations;let o=this.studDistance-this.joistFlangeWidth/2;const a=vn.insulation,c=.95*this.thickness[An.joists],u=.95*this.thickness[An.roofJoists];console.log(this.cross.roofPoints[Bt.bendInside],[0,i[Bt.wallInside]]),[{desc:"wall",t:this.thickness[An.joists],w:o,coords:[[0,2*this.solePlateThickness],[0,i[Bt.wallInside]],[c,i[Bt.wallInside]],[c,2*this.solePlateThickness]]},{desc:"roofLower",t:this.thickness[An.roofJoists],w:o,coords:[this.offsetDistanceBend(0,Bt.wallInside,!0),this.offsetDistanceBend(0,Bt.bendInside,!0),this.offsetDistanceBend(u,Bt.bendInside,!0),this.offsetDistanceBend(u,Bt.wallInside,!0)].map(f=>[-f[0],f[1]])},{desc:"roofHigher",t:this.thickness[An.roofJoists],w:o,coords:[this.offsetDistanceBend(0,Bt.bendInside,!0),this.offsetDistanceBend(0,Bt.topInside,!0),this.offsetDistanceBend(u,Bt.topInside,!0),this.offsetDistanceBend(u,Bt.bendInside,!0)].map(f=>[-f[0],f[1]])}].forEach(f=>{for(let p of[...Array(this.amountOfStuds).keys()]){let g=p*this.studDistance-this.joistFlangeWidth/2+this.joistFlangeWidth;0===p&&(g=this.joistFlangeWidth,f.w-=this.joistFlangeWidth/2);let v=this.threeService.flatShapeCross(f.coords,f.w,[a]);this.translate(v,g,0,0),"wall"===f.desc&&(v=this.clip(v,this.windowRoughOSBClip)),this.add(t,[v])}}),this.animations[t].to(this.subModels[t].map(f=>f.position),{z:2,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(f=>f.scale),{x:0,z:0,ease:"power3",stagger:{each:.4},delay:.5},"<"),this.animations[t].to(this.subModels[t].map(f=>f),{visible:!1,duration:0})}buildJoist(){const t=Oi.joists,r=this.thickness[An.joists],s=this.cross.elevations[Ti.groundFloor]+this.solePlateThickness,o=this.construction.getRoofPoint(Bt.wallInside)[1],a=new jo;this.translate(a,0,s,this.crossDepth[An.joists]),this.add(t,[a]),this.animations[t].to(a.rotation,{x:Ei(-90),duration:.8});const c=this.thickness[An.osb],l=this.construction.thickness[An.joists],u=this.amountOfStuds+2;for(let f of[...Array(u).keys()]){let p=o-s-2*this.solePlateThickness,g=this.solePlateThickness,v=f*this.studDistance-this.joistFlangeWidth/2;if(f===u-1&&(v=this.window.roughWidth-this.window.gap+this.window.thicknessOSB),0===f&&(v=0),v<this.window.roughWidth-this.window.gap){g=l+this.window.roughTopOSB-this.solePlateThickness,p=p+this.solePlateThickness-g;const w=this.createJoist(p,this.construction.thickness[An.joists]);this.translate(w,v,g,0),a.add(w),this.scaleZInOut(t,w,.2),g=this.solePlateThickness,p=this.window.roughBottom-2*this.solePlateThickness-c}const _=this.createJoist(p,l);this.translate(_,v,g,0),a.add(_),this.scaleZInOut(t,_,.2)}for(let f of[...Array(2).keys()]){let g=l+this.window.roughTopOSB-this.solePlateThickness,v=this.joistFlangeWidth;0===f&&(v=l);const _=this.createJoist(this.window.roughWidth-this.window.gap+this.window.thicknessOSB,l);_.rotation.set(Ei(90),0,Ei(-90)),this.translate(_,0,g,v),a.add(_),this.scaleZInOut(t,_,.2)}for(let f of[0,1]){const p=this.threeService.createCube({material:vn.pine,whd:[this.demoWith,this.solePlateThickness,r]});this.translate(p,0,0===f?0:o-2*this.solePlateThickness,0),a.add(p),this.scaleZInOut(t,p,.2)}}buildTopFloor(){const t=Oi.topFloorJoists,i=new jo,r=this.floorThickness,s=this.crossDepth[An.serviceBeams]-this.floorLVLThickness,o=this.demoDepth+s,a=o+s;for(let c of[...Array(this.amountOfStuds+1).keys()]){let l=c*this.studDistance-this.joistFlangeWidth/2;0===c&&(l=0);const u=this.createJoist(o,r);u.rotateX(Ei(-90)),this.translate(u,l,this.ceilingHeight,s),i.add(u),this.animations[t].to(u.position,{z:-a,duration:.2,ease:"power3"},">"),this.animations[t].to(u.scale,{z:0,x:0,duration:.2},"<"),this.animations[t].to(u,{visible:!1,duration:0})}this.add(t,[i])}buildTopFloorOSB(){this.buildRoofTapes();const t=Oi.topFloorOSB;this.brickPattern(t,[0,this.cross.elevations[Ti.topFloor],this.crossDepth[An.serviceBeams]],2.4,1.2,this.thickness[An.osb],this.demoDepth,this.demoWith,[-90,0,0],vn.osb,(u,f,p,g,v,_)=>{this.scaleZInOut(t,u,.3+(f+p)/_*.2)})}brickPattern(t,i,r,s,o,a,c,l,u,f,p){const g=new jo,v=Math.ceil(c/r),_=Math.ceil(a/s),w=r/2;for(let b of[...Array(_+1).keys()])for(let x of[...Array(v+1).keys()]){let E=(v-x)*r+(b%2?-w:0),I=(_-b)*s,k=0,O=s,R=r,P=!1;const Q=Number(`${b+1}${x+1}`);if(E<0&&(R=w,E=0),I+s>a&&(O=a-I,P=!0),E+r>=c&&(R=c-E,P=!0),I>=a||E>=c)continue;let J=this.threeService.createCube({material:u,whd:[R,O,o]});this.translate(J,E,I,k),p&&(J=this.clip(J,p)),g.add(J),f(J,b,x,R,O,Q,P)}g.rotation.set(Ei(l[0]),Ei(l[1]),Ei(l[2])),this.translate(g,i[0],i[1],i[2]),this.add(t,[g])}buildRoofTiles(){const t=Oi.roofTiles,l=this.thickness[An.outerSheet]+this.thickness[An.space]+.02,u=this.getRoofAndOffsetPoints(l);this.threeService.importGLTF("rooftile.glb",f=>{f.scale.set(1,1,1),[[Bt.lowestOutside,Bt.bendOutside],[Bt.bendOutside,Bt.topOutside]].map((g,v)=>{const{totalWidth:_,rotation:b,angle:x}=this.getAngledProperties(g[0],g[1],l),M=Math.ceil(_/.308);for(let E of[...Array(M).keys()]){const I=Math.ceil(this.demoWith/.204);for(let k of[...Array(I).keys()]){const O=.204*k,R=.308*E,P=f.clone();P.rotateX(Ei(b[0]+90+-4)),this.add(t,[P]);const[Q,J]=po(x,R,u[`${g[0]}Offset`]);P.position.set(O,J+.01,-Q)}}}),this.animations[t].to(this.subModels[t].map(g=>g.position),{z:2,ease:"power3",stagger:{amount:1}}),this.animations[t].to(this.subModels[t].map(g=>g.scale),{z:0,x:0,stagger:{amount:1}},"<+=0.3"),this.subModels[t].forEach(g=>this.scene.add(g)),this.animations[t].progress(!0===this.appService.states$.value[t]?0:1)})}buildOSBRoof(){const t=Oi.roofOSB,s=this.demoWith,o=this.thickness[An.osb],a=(x,M,E,I,k,O)=>{this.animations[t].to(x.scale,{x:0,y:0,z:0,duration:.3}),this.animations[t].to(x,{visible:!1,duration:0})},c=this.construction.getRoofPoint(Bt.bendInside),l=this.construction.getRoofPoint(Bt.topInside),u=[0,c[1],-c[0]-this.crossDepth[An.osb]-o],f=Ma(c,l),p=[R1(c,l)-90,0,0];this.brickPattern(t,u,2.4,1.2,o,f,s,p,vn.osb,a);const g=this.construction.getRoofPoint(Bt.wallInside),v=this.construction.getRoofPoint(Bt.bendInside),_=[0,g[1],-g[0]-this.crossDepth[An.osb]-o],w=Ma(g,v),b=[R1(g,v)-90,0,0];this.brickPattern(t,_,2.4,1.2,o,w,s,b,vn.osb,a)}buildOSB(){const t=Oi.osbWall,s=this.construction.getRoofPoint(Bt.wallInside)[1],a=this.thickness[An.osb];let f=0,p=0,g=0;this.brickPattern(t,[0,this.cross.elevations[Ti.groundFloor],this.crossDepth[An.osb]-a],2.4,1.2,a,s,this.demoWith,[0,0,0],vn.osb,(v,_,w,b,x,M)=>{const E=.3+(_+w)/M*.2;this.animations[t].to(v.rotation,{x:Ei(90),duration:E});const I=1.05*b<2.4,k=1.05*x<1.2;this.animations[t].to(v.position,{x:(I?2.4:0)+b/2,y:a*f,z:-(.6+(k?1.2:0)+x/2),duration:E},"<"),I?g+=1:k?p+=1:f+=1},this.windowRoughOSBClip),this.animations[t].to(this.subModels[t].flatMap(v=>v.position),{y:-.5}),this.animations[t].to(this.subModels[t],{visible:!1,duration:0})}buildWindowOSB(){const t=Oi.osbWall,i=this.thickness[An.osb],r=this.crossDepth[An.serviceBeams],s=this.crossDepth[An.outerSheet]-r,o=this.threeService.createCube({material:vn.osb,whd:[this.window.roughWidth-this.window.gap+i,i,s],xyz:[0,this.window.roughBottomOSB,r]});this.add(t,[o]);const a=this.threeService.createCube({material:vn.osb,whd:[this.window.roughWidth-this.window.gap+i,i,s],xyz:[0,this.window.roughTop,r]});this.add(t,[a]);const c=this.threeService.createCube({material:vn.osb,whd:[i,this.window.roughHeight,s],xyz:[this.window.roughWidth-this.window.gap,this.window.roughBottom,r]});this.add(t,[c]),[o,a,c].forEach(l=>{this.animations[t].to(l.position,{z:-1,duration:.6}),this.animations[t].to(l.scale,{x:0,z:0,duration:.6}),this.animations[t].to(l,{visible:!1,duration:0})})}buildServiceBeams(){const t=Oi.serviceBeams,i=this.thickness[An.serviceBeams];for(let r of[...Array(this.amountOfStuds+1).keys()]){let s=r*this.studDistance-this.joistFlangeWidth/2;0===r&&(s=0);let o=this.threeService.createCube({material:vn.osb,whd:[this.joistFlangeWidth,this.ceilingHeight,i]});this.translate(o,s,0,this.crossDepth[An.serviceBeams]-i),o=this.clip(o,this.windowRoughClip),this.add(t,[o])}this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-1,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(r=>r.scale),{z:0,x:0,stagger:{each:.4}},"<+=0.3")}buildServiceInsulation(){const t=Oi.serviceInsulation,i=this.thickness[An.serviceBeams];for(let r of[...Array(this.amountOfStuds).keys()]){let s=this.studDistance-this.joistFlangeWidth,o=r*this.studDistance-this.joistFlangeWidth/2+this.joistFlangeWidth;0===r&&(o=this.joistFlangeWidth,s-=this.joistFlangeWidth/2);let a=this.threeService.createCube({material:vn.insulation,whd:[s,this.ceilingHeight,i]});this.translate(a,o,0,this.crossDepth[An.serviceBeams]-i),a=this.clip(a,this.windowRoughClip),this.add(t,[a])}this.animations[Oi.serviceBeams].to(this.subModels[t].map(r=>r.position),{y:0,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[Oi.serviceBeams].to(this.subModels[t].map(r=>r.scale),{z:0,y:0,duration:.7,ease:"power3",stagger:{each:.4}},"<"),this.animations[Oi.serviceBeams].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildGroundFloor(){const t=Oi.groundFloor,i=this.cross.groundFloorThickness,s=this.cross.elevations[Ti.groundFloor]-i,a=this.demoDepth+this.crossDepth[An.groundFloorEdge],c=Math.ceil(this.demoWith/1.2);for(let l of[...Array(c).keys()]){l=c-1-l;const u=this.threeService.createBox({material:vn.hollowCoreSlap,whd:[1.2,i,a]});this.translate(u,1.2*l,s,this.crossDepth[An.groundFloorEdge]-a),this.add(t,[u]),this.animations[t].to(u.position,{y:.5,duration:.3}),this.animations[t].to(u.scale,{z:0,duration:.3}),this.animations[t].to(u.position,{z:this.demoDepth,duration:.3},"<"),this.animations[t].to(u.scale,{y:0,duration:.1}),this.animations[t].to(u,{visible:!1,duration:0})}}buildSole(){const t=Oi.sole,i=this.cross.elevations[Ti.groundFloor],r=this.threeService.createCube({material:vn.pine,whd:[this.demoWith,this.solePlateThickness,this.thickness[An.joists]]});this.translate(r,0,i,this.crossDepth[An.joists]),r.material[0].color=new In(9083745),this.add(t,[r]),this.animations[t].to(this.subModels[t].map(s=>s.position),{y:.5,duration:.6,ease:"power3"}),this.animations[t].to(this.subModels[t].map(s=>s.material),{opacity:0,duration:.4,ease:"power3"},"-=0.6"),this.animations[t].to(this.subModels[t].map(s=>s),{visible:!1,duration:0})}buildRoofLVL(){const t=Oi.roofRidge,i=this.cross.roofRidgeHight,r=this.cross.roofRidgeWidth,s=this.construction.getRoofPoint(Bt.topOutside),o=this.threeService.createCube({material:vn.pine,whd:[this.demoWith,i,r],xyz:[0,s[1]-i,-s[0]-r/2]});this.add(t,[o]),this.animations[t].to(this.subModels[t].map(a=>a.position),{y:0,duration:.6}),this.animations[t].to(this.subModels[t].map(a=>a.scale),{x:0,y:0,duration:.4}),this.animations[t].to(this.subModels[t].map(a=>a),{visible:!1,duration:0})}buildFloorLVL(){const t=Oi.floorLVL,i=this.threeService.createCube({material:vn.pine,whd:[this.demoWith,this.floorThickness,this.floorLVLThickness]});this.translate(i,0,this.ceilingHeight,this.crossDepth[An.serviceBeams]-this.floorLVLThickness),this.add(t,[i]),this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-1,duration:.6}),this.animations[t].to(this.subModels[t].map(r=>r.scale),{x:0,y:0,duration:.4}),this.animations[t].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildGips(){const t=Oi.gips,i=this.thickness[An.gips];for(let r of[...Array(this.amountOfStuds/2).keys()]){let s=this.threeService.createCube({material:vn.gips,whd:[1.2,this.ceilingHeight,i]});this.translate(s,r*this.studDistance*2,0,this.crossDepth[An.gips]-i),s=this.clip(s,this.windowRoughClip),this.add(t,[s])}this.animations[t].to(this.subModels[t].map(r=>r.position),{z:-2,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(r=>r.material),{opacity:0,duration:.4,ease:"power3",stagger:{each:.4}},"-=0.8"),this.animations[t].to(this.subModels[t].map(r=>r),{visible:!1,duration:0})}buildOuterSheet(){const t=Oi.outerSheet,i=this.demoWith,r=this.thickness[An.outerSheet];let s=0,o=0,a=0;const p=(g,v,_,w,b,x)=>{const M=.3+(v+_)/x*.2;this.animations[t].to(g.rotation,{x:Ei(90),duration:M});const E=1.05*w<2.4,I=1.05*b<1.2;this.animations[t].to(g.position,{x:(E?2.4:0)+w/2,y:r*s,z:.6+(I?1.2:0)+b/2,duration:M},"<"),E?a+=1:I?o+=1:s+=1};[[Bt.groundFloorInside,Bt.wallInside],[Bt.lowestOutside,Bt.bendOutside],[Bt.bendOutside,Bt.topOutside]].map((g,v)=>{let{totalWidth:_,origin:w,rotation:b}=this.getAngledProperties(g[0],g[1],r);g[0]===Bt.groundFloorInside&&(w[2]=this.crossDepth[An.outerSheet]),this.brickPattern(t,w,2.4,1.2,r,_,i,b,vn.outerSheet,0===v?p:(x,M,E,I,k,O)=>{this.scaleZInOut(t,x,.1)},0===v?this.windowRoughOSBClip:void 0)}),this.animations[t].to(this.subModels[t].flatMap(g=>g.position),{y:-.5}),this.animations[t].to(this.subModels[t],{visible:!1,duration:0})}buildSpace(){const t=Oi.space,i=this.joistFlangeWidth,r=this.thickness[An.space]/2;for(let s of[...Array(4).keys()]){const a=this.clip(this.threeService.createCube({material:vn.osb,whd:[this.demoWith,i,r],xyz:[0,s/3*(this.outerWallHeight-i),this.crossDepth[An.space]+r]}),this.windowRoughOSBClip);this.add(t,[a])}for(let s of[...Array(this.amountOfStuds+1).keys()]){let o=s*this.studDistance-i/2;0===s&&(o=0);const a=this.clip(this.threeService.createCube({material:vn.pine,whd:[i,this.outerWallHeight,r],xyz:[o,0,this.crossDepth[An.space]]}),this.windowRoughOSBClip);this.add(t,[a])}this.add(t,[this.threeService.createCube({material:vn.osb,whd:[this.window.roughWidth+i,i,r],xyz:[0,this.window.roughBottom-i,this.crossDepth[An.space]+r]})]),this.add(t,[this.threeService.createCube({material:vn.osb,whd:[this.window.roughWidth+i,i,r],xyz:[0,this.window.roughTop+i/2,this.crossDepth[An.space]+r]})]),this.add(t,[this.threeService.createCube({material:vn.osb,whd:[i,this.window.roughHeight+2*i,r],xyz:[this.window.roughWidth,this.window.roughBottom-i,this.crossDepth[An.space]]})]),this.animations[t].to(this.subModels[t].map(s=>s.position),{z:1,duration:.7,ease:"power3",stagger:{each:.4}}),this.animations[t].to(this.subModels[t].map(s=>s.scale),{z:0,x:0,stagger:{each:.4}},"<+=0.3")}buildRoofSpace(){const t=Oi.roofSpace,i=this.thickness[An.space]/2,s=this.getRoofAndOffsetPoints(this.thickness[An.outerSheet]+i);[[Bt.lowestOutside,Bt.bendOutside],[Bt.bendOutside,Bt.topOutside]].map(([o,a])=>{const c=Ma(s[`${o}Offset`],s[`${a}Offset`]),l=R1(s[o],s[a]),u=this.useOppositeCorner(s[`${o}Offset`],i,l),p=Math.ceil(c/.204);for(let g of[...Array(p).keys()]){const _=this.threeService.createCube({material:vn.osb,whd:[this.demoWith,this.joistFlangeWidth/2,i],xyz:[0,.204*g-this.joistFlangeWidth/2,i]});let w=(new Zi).makeRotationX(Ei(l-90));_.applyMatrix4(w.setPosition(new be(...u))),this.add(t,[_])}for(let g of[...Array(this.amountOfStuds+1).keys()]){let v=g*this.studDistance-this.joistFlangeWidth/2;0===g&&(v=0);const _=this.threeService.createCube({material:vn.pine,whd:[this.joistFlangeWidth,c,i],xyz:[v,0,0]});let w=(new Zi).makeRotationX(Ei(l-90));_.applyMatrix4(w.setPosition(new be(...u))),this.add(t,[_])}}),this.animations[t].to(this.subModels[t].map(o=>o.position),{z:1,duration:.7,ease:"power3",stagger:{amount:1}}),this.animations[t].to(this.subModels[t].map(o=>o.scale),{z:0,x:0,stagger:{amount:1}},"<+=0.3")}buildFacade(){const t=Oi.facade,i=.3,r=.02,o=.15,a=this.threeService.createCube({material:vn.unknown,whd:[this.window.roughWidth-this.window.gap+o,this.window.roughHeight+.3,2],xyz:[0,this.window.roughBottom-o,-1]}),c=this.thickness[An.facade];let l=Math.ceil(this.demoWith/(i+r));for(let u of[...Array(l).keys()]){if(0===u)continue;const p=this.clip(this.threeService.createCube({material:vn.facade,whd:[.05,this.outerWallHeight,c],xyz:[u*(i+r)-.025-r/2,0,this.crossDepth[An.facade]+c]}),a);this.add(t,[p])}for(let u of[...Array(l).keys()]){let f=u*i+u*r;0===u&&(f=0);const p=this.clip(this.threeService.createCube({material:vn.facade,whd:[i,this.outerWallHeight,c],xyz:[f,0,this.crossDepth[An.facade]]}),this.windowRoughClip);this.add(t,[p])}this.add(t,[this.threeService.createCube({material:vn.whiteWood,whd:[this.window.roughWidth-this.window.gap,o,1.1*c],xyz:[0,this.window.roughBottom-o,this.crossDepth[An.facade]+c]})]),this.add(t,[this.threeService.createCube({material:vn.whiteWood,whd:[this.window.roughWidth-this.window.gap+.18,o,1.1*c],xyz:[0,this.window.roughTop,this.crossDepth[An.facade]+c]})]),this.add(t,[this.threeService.createCube({material:vn.whiteWood,whd:[o,this.window.roughHeight+.18,1.1*c],xyz:[this.window.roughWidth-this.window.gap,this.window.roughBottom-.18,this.crossDepth[An.facade]+c]})]),this.animations[t].to(this.subModels[t].map(u=>u.position),{z:this.crossDepth[An.facade]+i/2,ease:"power3",stagger:{amount:1.2}}),this.animations[t].to(this.subModels[t].map(u=>u.rotation),{y:Ei(90),stagger:{amount:1.2}},"<+=0.3"),this.animations[t].to(this.subModels[t].map(u=>u.scale),{z:0,x:0,stagger:{amount:1.2}},"<+=0.3")}}return n.\u0275fac=function(t){return new(t||n)(U(Zy),U(No),U(mn),U(io),U(U3),U(qT))},n.\u0275cmp=Sn({type:n,selectors:[["app-three-construction"]],hostBindings:function(t,i){1&t&&Kt("keydown",function(s){return i.handleKeyboardEvent(s)},0,cI)},features:[jt],decls:4,vars:0,consts:[["rendererContainer",""],[1,"loader"]],template:function(t,i){1&t&&(B(0,"div",null,0)(2,"div",1),H(3,"Loading"),z()())},styles:["[_nghost-%COMP%]{height:100%;width:100%}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})();var Qs=(()=>(function(n){n.below="below",n.above="above",n.inner="inner",n.outer="outer",n.roof="roof",n.roofAndBelow="roofAndBelow",n.inBetweenAndBelow="inBetweenAndBelow",n.roofAndAbove="roofAndAbove"}(Qs||(Qs={})),Qs))(),H4=(()=>(function(n){n.northSouth="northSouth",n.westEast="westEast"}(H4||(H4={})),H4))();let lut=(()=>{class n extends G3e{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a),this.threeService=t,this.houseService=i,this.host=r,this.appService=s,this.cookieService=o,this.threeMaterialService=a,this.modelName="House3D",this.keys=Object.values(c1),this.roofMeshes={},this.animationDuration=.1,this.windowParts={},this.windows=[],this.appService.fullscreen$.next(!0),this.setInitStates(),this.preLoadWindow(),this.importDude()}handleKeyboardEvent(t){"F4"===t.key&&(console.log("reset camera"),this.camera.position.set(10,10,10),this.camera.lookAt(0,0,0)),"1"===t.key&&this.focusCamera("in"),"2"===t.key&&this.focusCamera("out")}setInitStates(){const t=this.appService.states$.value;console.log(Object.keys(c1).map(i=>t[i]),!Object.keys(c1).some(i=>!0===t[i])),Object.keys(c1).some(i=>!0===t[i])||(console.log("Reset states"),this.appService.states$.next({...this.appService.states$.value,[c1.roof]:!0,[c1.outerWall]:!0,[c1.innerWall]:!0,[c1.topFloor]:!0,[c1.groundFloor]:!0}))}importDude(){this.threeService.importGLTF("Male_Standing.glb",t=>{this.scene.add(t),t.scale.set(.5,.5,.5),t.position.set(0,.02,0),t.updateMatrix(),t.rotateY(Ei(0)),this.threeService.translate(t,this.house.centerHouse[0],this.house.cross.elevations[Ti.topFloor],this.house.houseLength-4)})}defaultCamera(){const t=this.house.houseWidth/2,r=this.house.houseLength/2;this.camera.position.set(-10,10,-10),this.controls.target.set(t,2,r)}AfterViewInitCallback(){this.threeService.basicGround(this.scene,this.house.cross.elevations[Ti.ground]),this.lights(1),this.createTowerClip(),this.createRoofShape(),this.createFloors(),this.createWalls();const t=new dH(1);t.position.set(0,0,0),this.scene.add(t)}hexagonWindows(){const r=.6*Math.tan(Ei(30)),o=this.threeService.flatShape([[0,0],[.6,-r],[1.2,0],[1.2,1],[.6,1+r],[0,1]],1.1,[vn.osb],1.1);return this.threeService.rotateAroundAxis(o,Ei(90),ea.red),this.threeService.rotateAroundAxis(o,Ei(90),ea.green),this.threeService.translate(o,0,1+r,1.2),o}focusCamera(t){console.log("camera to",t);var i=Ph.timeline();let s=this.center.z;["in"].includes(t)&&(s+=-10),["subGround"].includes(t)&&(s+=1),["out"].includes(t)&&(s+=10),this.pauseAll(),i.to(this.camera.position,{duration:.4,x:this.center.x-10,y:["subGround"].includes(t)?0:1.8,z:s,onUpdate:()=>{this.camera.lookAt(this.center.x,this.center.y,this.center.z)},onComplete:()=>{Ph.globalTimeline.play()}})}OnSectionChangeCallback(){console.log("OnSectionChangeCallback"),[Ct.constructionFoundation,Ct.constructionCrawlerSpace].includes(this.section)&&this.focusCamera("subGround")}getWindow(t){const i=new jo,r=t.height-1,s=t.width-1,a=1.4/3;return Object.keys(this.windowParts).forEach(c=>{const l=this.windowParts[c].clone();["leftMid","rightMid"].includes(c)&&(l.scale.set(1,t.height/a,1),l.translateY(-t.height/2-.2)),["topMid","bottomMid"].includes(c)&&(l.scale.set(t.width/a,1,1),l.translateX(-t.width/2)),["topLeft","topMid","topRight"].includes(c)&&this.threeService.translate(l,0,r,0),["topRight","rightMid","bottomRight"].includes(c)&&this.threeService.translate(l,0,0,s),i.add(l)}),this.threeService.rotateAroundAxis(i,-Ei(t.rotate),ea.green),this.threeService.translate(i,t.x,t.y,t.z),i.userData.key="WindowFrame",i.name=t.selector,i}preLoadWindow(){const t=this.threeMaterialService.getMaterial(vn.white);this.threeService.importGLTF("window.glb",i=>{this.windowParts={},i.children.forEach(s=>{s.material=t}),[...Array(3).keys()].forEach(s=>{[...Array(3).keys()].forEach(o=>{const a=i.clone();let c;0===s&&0===o&&(c="bottomLeft"),1===s&&0===o&&(c="bottomMid"),2===s&&0===o&&(c="bottomRight"),0===s&&1===o&&(c="leftMid"),1===s&&1===o&&(c="center"),2===s&&1===o&&(c="rightMid"),0===s&&2===o&&(c="topLeft"),1===s&&2===o&&(c="topMid"),2===s&&2===o&&(c="topRight");const l=1.4/3,u=this.threeService.createCube({material:vn.unknown,whd:[l,l,l],xyz:[l*s-.2,l*o-.2,-l/3]}),f=this.intersectGroup(a,u);this.threeService.rotateAroundAxis(f,Ei(-90),ea.green),this.windowParts[c]=f})}),this.windows.map(s=>{})})}createTowerClip(){const t=c1.tower,r=this.cross.elevations[Ti.towerTop],s=this.threeService.flatShape(this.house.tower.outerCoords,r,[vn.concrete],r);this.add(t,[s]),this.scaleFromSomewhere(t,s,.1),this.towerClip=s}createRoofShape(){const t=c1.roof,i=this.cross.roofPoints,r=this.house.stramien.out.we,s=this.house.stramien.out.ns,a={},c=[i.topOutside,i.bendOutside,i.lowestOutside],l=[i.topInside,i.bendInside,i.lowestInside],u=[xh(i.topOutside,i.topInside,.8),xh(i.bendOutside,i.bendInside,.8),xh(i.lowestOutside,i.lowestInside,.8)],f=[we(i.topOutside,[0,3]),we(i.bendOutside,[-1,3]),we(i.lowestOutside,[0,0])],p=Ma(u[0],i.topOutside),g=O=>{const R=O[0];return[...O,...O.map(P=>[2*R[0]-P[0],P[1]]).slice().reverse()].map(P=>[R[0]-P[0],R[1]-P[1]])},v={[Qs.below]:g([...l,we(i.lowestInside,[0,-1])]),[Qs.above]:g([...c,...f.slice().reverse()]),[Qs.outer]:g([...c,...u.slice().reverse()]),[Qs.inner]:g([...l,...u.slice().reverse()]),[Qs.roof]:g([...l,...c.slice().reverse()]),[Qs.roofAndAbove]:g([...l,...f.slice().reverse()]),[Qs.roofAndBelow]:g([...c,we(i.lowestOutside,[0,-1])]),[Qs.inBetweenAndBelow]:g([...u,we(i.lowestOutside,[0,-1])])},_=this.threeService.flatShape([we(this.house.centerHouse,[10,10]),we(this.house.centerHouse,[-10,10]),this.house.centerHouse,we(this.house.centerHouse,[-10,-10]),we(this.house.centerHouse,[10,-10]),this.house.centerHouse],10,[vn.concrete],10),w=this.threeService.flatShape([we(this.house.centerHouse,[10,10]),we(this.house.centerHouse,[10,-10]),this.house.centerHouse,we(this.house.centerHouse,[-10,-10]),we(this.house.centerHouse,[-10,10]),this.house.centerHouse],10,[vn.concrete],10);Object.values(H4).map(O=>{a[O]={},Object.values(Qs).map((R,P)=>{let Q;const J=v[R],Ce=O===H4.northSouth?s.d-s.a:r.d-r.a,Ae=O===H4.northSouth?r.b+(r.c-r.b)/2:s.b+(s.c-s.b)/2;Q=[Qs.below,Qs.inner,Qs.roof,Qs.roofAndAbove].includes(R)?this.cross.elevations[Bt.topInside]:R===Qs.inBetweenAndBelow?this.cross.elevations[Bt.topOutside]-p:this.cross.elevations[Bt.topOutside];const G=this.threeService.flatShape(J,0,R===Qs.outer?[vn.roof]:[vn.white],Ce+1.6);this.threeService.rotateAroundAxis(G,Ei(90),ea.red),O===H4.westEast&&this.threeService.rotateAroundAxis(G,Ei(90),ea.green),this.threeService.translate(G,O===H4.northSouth?Ae:Ce+.8,Q,O===H4.northSouth?Ce+.8:Ae),a[O][R]=this.clip(G,O===H4.westEast?_:w)})}),Object.values(Qs).map((O,R)=>{this.roofMeshes[O]=this.merge(a[H4.northSouth][O],a[H4.westEast][O])});let[b,x]=this.towerRoofInlay();const M=x.clone();this.threeService.translate(M,0,-.3,0);const E=this.towerRoof(),I=(O,R)=>{this.roofMeshes[O]=this.clip(this.roofMeshes[O].clone(),R.clone())};I(Qs.outer,x),I(Qs.inner,x),I(Qs.above,x),I(Qs.roofAndAbove,M),I(Qs.roofAndAbove,this.towerClip),I(Qs.above,this.towerClip),I(Qs.outer,this.towerClip),I(Qs.inner,this.towerClip),this.roofMeshes[Qs.roofAndBelow]=this.merge(this.roofMeshes[Qs.roofAndBelow],x);const k=new jo;k.add(this.roofMeshes[Qs.inner]),k.add(this.roofMeshes[Qs.outer]),k.add(b),k.add(E),this.scaleFromSomewhere(t,k,1,void 0,!0),this.add(t,[k])}towerRoof(){return this.threeService.flatShape(this.house.tower.outerCoords,this.cross.elevations[Ti.towerTop]+.2,[vn.roof],.2)}splitTowerRoofInlay(t){const i=t.clone();this.threeService.translate(i,0,-.1,0);const r=this.clip(t,i);return this.threeService.translate(i,0,-.4,0),[this.clip(this.clip(t,i),r),r].map(o=>this.clip(o,this.roofMeshes[Qs.inBetweenAndBelow]))}towerRoofInlay(){const r=this.house.stramien.out,s=xh(this.house.tower.outerCoords[4],this.house.tower.outerCoords[7]),o=[r.we.c-(r.we.c-r.we.b)/2,r.ns.c-(r.ns.c-r.ns.b)/2],a=Ma(s,o),c=Ma(this.house.tower.outerCoords[0],this.house.tower.outerCoords[3]);let u=this.threeService.flatShape([[-c/2,-2],[-c/2,0],[0,1],[c/2,0],[c/2,-2]],0,[vn.unknown],a);this.threeService.rotateAroundAxis(u,Ei(90),ea.blue),this.threeService.rotateAroundAxis(u,Ei(-90),ea.red),this.threeService.rotateAroundAxis(u,Ei(45),ea.green),this.translate(u,o[0],this.cross.elevations[Bt.topInside]-1,o[1]);const f=new jo,[p,g]=this.splitTowerRoofInlay(this.clip(u.clone(),this.towerClip));return p.material=this.threeMaterialService.getMaterial(vn.white),g.material=this.threeMaterialService.getMaterial(vn.roof),f.add(p),f.add(g),[f,u]}createAllStuds(){const t=new jo,i=this.house.stramien.in,r=this.house.construction.thickness[An.joists],s=i.ns.c-i.ns.b,o=Math.max(this.house.studAmountWest,this.house.studAmountEast,this.house.studAmountNorth,this.house.studAmountSouth);["North","South","East","West"].forEach(a=>{for(let c=0;c<o;c++){const l=this.house.studDistance*(c+1);let u=[0,0],f=[0,0],p=0;if("West"===a){if(c>this.house.studAmountWest)return;u=[i.we.b-l,i.ns.b-r],f=[u[0],u[1]+s]}if("East"===a){if(c>this.house.studAmountEast)return;u=[i.we.c+l,i.ns.b],f=[u[0],u[1]+s]}if("North"===a){if(c>this.house.studAmountNorth)return;u=[i.we.b,i.ns.b-l],f=[u[0]+s,u[1]],p=Ei(90)}if("South"===a){if(c>this.house.studAmountSouth)return;u=[i.we.b,i.ns.c+l],f=[u[0]+s,u[1]],p=Ei(90)}const g=this.createStud(),v=this.createStud();this.threeService.rotateAroundAxis(g,p,ea.green),this.threeService.rotateAroundAxis(v,p,ea.green),this.threeService.translate(g,u[0],0,u[1]),this.threeService.translate(v,f[0],0,f[1]),t.add(g),t.add(v)}})}createStud(t=1,i=.3,r=.012,s=.04,o=.03){const a=new jo,c=this.threeService.createCube({material:vn.pine,whd:[s,t,o],xyz:[0,0,0]});a.add(c);const l=this.threeService.createCube({material:vn.osb,whd:[r,t,i-2*o],xyz:[s/2-r/2,0,o]});a.add(l);const u=this.threeService.createCube({material:vn.pine,whd:[s,t,o],xyz:[0,0,i-o]});return a.add(u),a}createFloors(){[{floor:at.ground,key:c1.groundFloor,z:Ti.groundFloor,t:this.cross.groundFloorThickness},{floor:at.top,key:c1.topFloor,z:Ti.topFloor,t:this.cross.topFloorThickness}].forEach(i=>{const r=new jo;[!0,!1].forEach(s=>{const o=i.t*(s?.19999999999999996:.8),a=this.cross.elevations[i.z],c=s?a:a-i.t*(1-.8),l=this.house.partsFlatten.find(p=>p instanceof NH);let u=this.threeService.flatShape(l.coords,c,s?[vn.floor]:[vn.ral9016],o);this.house.partsFlatten.filter(p=>p instanceof J1&&!0===p.hole&&[i.floor].includes(p.floor)).forEach(p=>{const g=this.threeService.flatShape(p.coords,c+1,[vn.unknown],o+2);if(u=this.clip(u,g),i.floor===at.top&&"L1-void"===p.selector&&!s){const v=p.coords[1][0]-p.coords[0][0],_=this.threeService.flatShape([[0,0],[0,-o],[Math.tan(Ei(56))*o,0]],v,[vn.unknown],v);this.threeService.rotateAroundAxis(_,Ei(90),ea.red),this.threeService.rotateAroundAxis(_,Ei(90),ea.green),this.translate(_,p.coords[0][0],c-o,p.coords[0][1]),u=this.clip(u,_)}}),r.add(u)}),this.scaleFromSomewhere(i.key,r,1,void 0,i.floor===at.top),this.add(i.key,[r])})}curtainWall(t){const i=t.parts.find(E=>E instanceof Wa),r=this.house,o=.1,a=i.width,c=this.threeService.createBox({material:vn.windowDarkFrame,whd:[a,.3,o],xyz:[i.origin[0],r.cross.ceilingHeight,i.origin[1]-o-.1]}),u=(this.threeService.createBox({material:vn.windowDarkFrame,whd:[a,.2,o],xyz:[i.origin[0],r.cross.elevations[Bt.bendInside]-.2,i.origin[1]-o-.1]}),this.cross.roofPoints),p=u[Bt.wallInside][0],g=i.elevation,v=u[Bt.bendInside];let _=[[0,0],we(u[Bt.wallInside],[-p,-g]),we(u[Bt.bendInside],[-p,-g]),we(u[Bt.topInside],[-p,-g]),[this.house.outerBase-v[0]-p,v[1]+-g],[i.width,u[Bt.wallInside][1]+-g],[i.width,0],[0,0],[0,-1],[i.width+2,-1],[i.width+2,u[Bt.wallInside][1]+-g],[this.house.outerBase-v[0]-p+2,v[1]+-g+2],we(u[Bt.topInside],[-p,2-g]),we(u[Bt.bendInside],[-p-2,2-g]),we(u[Bt.wallInside],[-p-2,-g]),[-2,0],[-2,-1],[0,-1]];const w=this.threeService.extrudedShape({material:vn.unknown,coords:_,xyz:[i.origin[0],0,i.origin[1]],depth:1});return this.debug(w),[c,...Array.from(Array(6).keys()).map((E,I)=>{let O=this.threeService.createBox({material:vn.windowDarkFrame,whd:[.1,this.house.cross.elevations[Bt.topInside],o],xyz:[i.origin[0]+(a-.1)/5*I,0,i.origin[1]-o-.1]});return O=this.clip(O,w),O})]}createWalls(){const t=this.house.partsFlatten.filter(p=>p instanceof si),i=this.cross.elevations[Ti.groundFloor],r=this.cross.elevations[Ti.topFloor],s=[],o=[],a=[],c=this.threeService.flatShape([this.house.tower.outerCoords[0],...this.house.tower.outerCoords.slice(3)],this.cross.elevations[Ti.towerTop],[vn.concrete],this.cross.elevations[Ti.towerTop]-this.cross.elevations[Bt.wallInside]);t.forEach(p=>{let g=p.getFootPrint();if(g.length<4)return;const v=p.type===Hn.outer,_=!0===p.tower,w=p.floor===at.tower&&_;let b=this.cross.elevations[Ti.groundFloor];v&&(b=this.cross.elevations[Ti.ground]),[at.top].includes(p.floor)&&(b=this.cross.elevations[Ti.topFloor]),[at.tower].includes(p.floor)&&(b=this.cross.elevations[Ti.topFloor]),w&&(b=this.cross.elevations[Bt.wallInside]);let x=p.ceiling-b;(p.gable||[at.top,at.all].includes(p.floor))&&(x=this.cross.elevations[Bt.topInside]-b),(w||_)&&(x=this.cross.elevations[Ti.towerTop]-b),x=Math.max(x,0);const M=([R,P,Q,J],Ce,Ae)=>{const G=xh(R,J,Ae),ue=xh(P,Q,Ae);return Ce?[R,P,ue,G]:[G,ue,Q,J]};let k,I=this.threeService.flatShape(M(g,!0,1.8),x+b,[vn.ral9016],x);if(I=this.clip(I,w?this.roofMeshes[Qs.roofAndBelow]:_?c:this.roofMeshes[Qs.roofAndAbove]),v&&(k=this.threeService.flatShape(M(g,!1,1.8),x+b,[vn.facade],x),k=this.clip(k,w?this.roofMeshes[Qs.roofAndBelow]:_?c:this.roofMeshes[Qs.roofAndAbove])),(p.parts?p.parts.filter(R=>R instanceof Wa||R instanceof ga):[]).forEach(R=>{let P,Q;const J=R.height,Ce=R.width,Ae=R.origin[0],G=R.origin[1],ue=[at.ground,at.all].includes(R.floor)?i:r;R instanceof Wa&&(P=ue+R.elevation,Q=0),R instanceof ga&&(P=ue,Q=1===R.scale[1]?-R.width:0,R.floor===at.ground&&.1===R.width&&console.log(R.width));let le=this.threeService.createCube({material:vn.white,whd:[2,J,Ce],xyz:[-1,0,Q]});const de=p.gable&&R.floor===at.top;de&&(le=this.hexagonWindows()),this.threeService.rotateAroundAxis(le,Ei(-R.rotate),ea.green),this.threeService.translate(le,Ae,P,G),I=this.clip(I,le),k&&(k=this.clip(k,le)),R instanceof ga&&a.push(this.createDoor(R,Ae,P,G,Q)),R instanceof Wa&&this.windows.push({height:R.height,width:R.width,x:Ae,y:P,z:G,rotate:R.rotate,selector:R.selector,noFraming:"L0-outer-SouthWall-2-Window-14"===R.selector||de})}),I.userData={floor:p.floor},v||w){const R=this.group([I,k]);R.name=p.selector,o.push(R)}else{const R=this.group([I,k]);R.name=p.selector,s.push(R)}});const l=this.createPilasters(),u=this.group([...o,...l,...a,...this.curtainWall(t.find(p=>"L0-outer-SouthWall-2"===p.selector))]);this.scaleFromSomewhere(c1.outerWall,u),this.add(c1.outerWall,[u]);const f=this.group(s);this.scaleFromSomewhere(c1.innerWall,f),this.add(c1.innerWall,[f])}createDoor(t,i,r,s,o){if(!t.outside)return;const a=this.threeService.createCube({material:vn.ral9016,whd:[t.width,t.height,.1],xyz:[-1===t.scale[1]?-t.width:0,0,0]});return this.threeService.rotateAroundAxis(a,Ei(90-t.rotate),ea.green),this.translate(a,i,r,s),a}createWindowPlane(t,i,r,s){let o=[];if("L0-outer-SouthWall-2-Window-14"===t.selector){const c=this.cross.roofPoints,u=c[Bt.wallInside][0],f=t.elevation,p=c[Bt.bendInside];o=[[0,0],we(c[Bt.wallInside],[-u,-f]),we(p,[-u,-f]),we(c[Bt.topInside],[-u,-f]),[this.house.outerBase-p[0]-u,p[1]+-f],[t.width,c[Bt.wallInside][1]+-f],[t.width,0]]}else o=[[0,0],[0,t.height],[t.width,t.height],[t.width,0]];const a=this.threeService.createPane({material:vn.window,coords:o,xyz:[0,0,-.2]});return this.threeService.rotateAroundAxis(a,Ei(-(t.rotate+90)),ea.green),this.translate(a,i,r,s),a}createPilasters(){const t=this.house.stramien.out,s=.04,o=[];return[[t.we.b,t.ns.a,0],[t.we.c,t.ns.a,-90],[t.we.d,t.ns.b,-90],[t.we.d,t.ns.c,180],[t.we.c,t.ns.d,180],[t.we.b,t.ns.d,90],[t.we.a,t.ns.c,90],[t.we.a,t.ns.b,0]].forEach(([a,c,l])=>{let u=this.threeService.createCube({material:vn.white,whd:[s,7,.2+s],xyz:[-s,this.cross.elevations[Ti.ground],-s]}),f=this.threeService.createCube({material:vn.unknown,whd:[.2,7,s],xyz:[0,this.cross.elevations[Ti.ground],-s]}),p=this.merge(u,f);this.threeService.rotateAroundAxis(p,Ei(l),ea.green),this.translate(p,a,0,c),p=this.clip(p,this.roofMeshes[Qs.roofAndAbove]),o.push(p)}),o}}return n.\u0275fac=function(t){return new(t||n)(U(Zy),U(No),U(mn),U(io),U(U3),U(qT))},n.\u0275cmp=Sn({type:n,selectors:[["app-three-house"]],hostBindings:function(t,i){1&t&&Kt("keydown",function(s){return i.handleKeyboardEvent(s)},0,cI)},features:[jt],decls:4,vars:0,consts:[["rendererContainer",""],[1,"loader"]],template:function(t,i){1&t&&(B(0,"div",null,0)(2,"div",1),H(3,"Loading"),z()())},styles:["[_nghost-%COMP%]{height:100%;width:100%}.loader[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;top:0;left:0;z-index:1;background:var(--color-0);display:flex;justify-content:center;align-items:center;font-size:1.3rem}"]}),n})();const Q3e={leading:!0,trailing:!1};function W3e(n,e=ev,t=Q3e){const i=uB(n,e);return function uut(n,e=Q3e){return sn((t,i)=>{const{leading:r,trailing:s}=e;let o=!1,a=null,c=null,l=!1;const u=()=>{c?.unsubscribe(),c=null,s&&(g(),l&&i.complete())},f=()=>{c=null,l&&i.complete()},p=v=>c=Bo(n(v)).subscribe(on(i,u,f)),g=()=>{if(o){o=!1;const v=a;a=null,i.next(v),!l&&p(v)}};t.subscribe(on(i,v=>{o=!0,a=v,(!c||c.closed)&&(r?g():p(v))},()=>{l=!0,(!(s&&o&&c)||c.closed)&&i.complete()}))})}(()=>i,t)}let W5=(()=>{class n{constructor(t,i,r,s){this.houseService=t,this.appService=i,this.cookieService=r,this.httpClient=s}loadSVG(t,i,r){const s=new hut(i,r);return s.get(this.httpClient,t),s}}return n.\u0275fac=function(t){return new(t||n)(Xe(No),Xe(io),Xe(U3),Xe(dh))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hut{constructor(e,t){this.selector=e,this.callback=t}get(e,t){e.get(t,{responseType:"text"}).pipe(vc(1)).subscribe(i=>{go(this.selector).html(i.replace(/height="\d+px"/gi,'height="0px"').replace(/width="\d+px"/gi,'width="0px"')),this.update()})}update(){this.callback(this.selector)}}let u8=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.distanceSubscriptions=[],this.isDistance=!1,this.distanceMouseFirst="first",this.coords=[]}stop(){this.distanceSubscriptions.forEach(t=>t.unsubscribe()),this.distanceSVG.visible=!1,this.isDistance=!1,this.distanceSubscriptions=[],this.appService.update$.next()}click(t){"first"===this.distanceMouseFirst?this.distanceMouseFirst="second":"second"===this.distanceMouseFirst?this.distanceMouseFirst="fixed":"fixed"===this.distanceMouseFirst&&(this.distanceMouseFirst="first"),this.appService.update$.next()}mousemove(t){const[i,r]=z6(t);let s=[cn(i),cn(r)],o=.2;try{const c=t.composedPath().find(u=>"svg"===u.tagName);o=10*Number(c.getAttribute("meterPerPixel"))}catch(c){console.log(c)}const a=this.coords.filter(c=>c).map(c=>({coords:c,d:Ma(s,c)})).filter(c=>c.d<=o).sort((c,l)=>c.d-l.d).map(c=>c.coords);a.length>0&&(s=a[0]),["first"].includes(this.distanceMouseFirst)&&(this.distanceSVG.point1=s,this.distanceSVG.point2=void 0),["second"].includes(this.distanceMouseFirst)&&(this.distanceSVG.point2=s),this.appService.update$.next()}getParts(t){this.distanceSVG=t.find(i=>i instanceof jS),this.distanceSVG?(this.coords=[],t.forEach(i=>{i instanceof $3&&this.coords.push(...i.coords),i instanceof f1&&this.coords.push(...i.coords)})):console.error("distanceSVG not found",t)}start(){if(this.distanceSubscriptions.length>0)return void this.stop();const t=this.appService.scroll$.value.graphic,i=document.querySelector(`svg.${t}`);if(!i)return void console.error("svg not found",`svg.${t}`);const r=i.querySelector("g");t===yo.cross&&this.getParts(this.houseService.house$.value.cross.parts),t===yo.house2D&&this.getParts(this.houseService.house$.value.parts),t===yo.stairCross&&this.getParts(this.houseService.house$.value.stair.cross.parts),t===yo.stairPlan&&this.getParts(this.houseService.house$.value.stair.parts),this.distanceSVG.clear(),this.distanceMouseFirst="first",this.isDistance=!0,this.distanceSVG.visible=!0,this.distanceSubscriptions.push(xa(r,"mousemove").subscribe(s=>{this.mousemove(s)}),xa(r,"click").subscribe(s=>{this.click(s)}),xa(document,"keydown").subscribe(s=>{this.stop()}))}}return n.\u0275fac=function(t){return new(t||n)(Xe(No),Xe(io))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fut=(()=>{class n{constructor(t,i,r){this.appService=t,this.d3Service=i,this.contextMenuService=r}ngOnInit(){}measure(){this.d3Service.start(),this.contextMenuService.closeMenu()}whatIsHere(){this.contextMenuService.closeMenu();const[t,i]=this.xy,r=new MouseEvent("click",{clientX:t,clientY:i,bubbles:!0});document.elementFromPoint(t,i).dispatchEvent(r)}}return n.\u0275fac=function(t){return new(t||n)(U(io),U(u8),U(j5))},n.\u0275cmp=Sn({type:n,selectors:[["context-menu"]],decls:13,vars:0,consts:[["fxLayout","column","fxLayoutAlign","start start","fxFlex","1 1"],["mat-list-item","","color","accent",3,"click"],["fxLayoutAlign","start center","fxLayoutGap","8px"]],template:function(t,i){1&t&&(B(0,"mat-action-list",0)(1,"button",1),Kt("click",function(){return i.whatIsHere()}),B(2,"span",2)(3,"mat-icon"),H(4,"question_mark"),z(),B(5,"div"),H(6,"What is here?"),z()()(),B(7,"button",1),Kt("click",function(){return i.measure()}),B(8,"span",2)(9,"mat-icon"),H(10,"square_foot"),z(),B(11,"div"),H(12,"Start measure"),z()()()())},dependencies:[v7,Eee,Dee,m6,Sv,w0,Ak],styles:["[_nghost-%COMP%]{background:var(--color-0);padding:4px;border:1px solid;border-color:var(--color-80);border-radius:4px;box-shadow:2px 2px 0 2px #0006}.mat-list-base[_ngcontent-%COMP%]{padding:0}"]}),n})(),j5=(()=>{class n{constructor(t,i){this.overlay=t,this.d3Service=i,this.isOpen=!1}click(t){this.clientXY=[t.clientX,t.clientY],this.closeMenu(),this.d3Service.isDistance?this.d3Service.stop():this.createMenu()}createMenu(){this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy()});const t=new iv(fut);this.overlayRef.addPanelClass("example-overlay"),this.overlayRef.attach(t).instance.xy=this.clientXY,this.isOpen=!0}closeMenu(){!this.overlayRef||(this.overlayRef.detach(),this.isOpen=!1)}positionStrategy(){return this.overlay.position().global().left(this.clientXY[0]+"px").top(this.clientXY[1]+"px")}}return n.\u0275fac=function(t){return new(t||n)(Xe(Mu),Xe(u8))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dut=["svg"];let nL=(()=>{class n{constructor(t,i,r,s,o,a,c){this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.stringCache="",this.showingImage=!1,this.printPreview=!1,this.isChild=!1,this.marginInMeters=[0,0,0,0],this.marginInPixels=[0,0,0,0],this.house$=this.houseService.house$,this.sections=Object.values(Ct),this.tags=Object.values(l2),this.resize$=new Vs(void 0),this.subscriptions=[],this.svgHouseSize=[[0,0],[200,100]],this.loaded=!1}onClick(t){if(this.contextMenuService.closeMenu(),this.d3DistanceService.isDistance)return;const i=a=>{if(a&&a!==this.svgEl.nativeElement)return"id"in a&&`${a.id}`.length>0?a.id:i(a.parentNode)},r=i(t.target),s=()=>{this.tooltipService.detachOverlay(),document.body.classList.remove("selection-active"),document.querySelectorAll("svg .selected").forEach((a,c)=>{a.classList.remove("selected")})};if(!r)return s();const o=this.house.partsFlatten.find(a=>a.selector===r);if(!o)return console.log(`Couldnt find [${r}] in `,t.target,"probably its only a part of its full ID"),s();document.body.classList.add("selection-active"),o.select(),this.tooltipService.attachPopup([t.pageX,t.pageY],o),console.log(o)}preventContextMenu(t){return this.contextMenuService.click(t),!1}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.observer&&this.observer.unobserve(this.host.nativeElement),console.log("destroyParts",this.graphic),this.houseService.destroyParts()}svgUpdateMarginAndSize(){}setUp(){console.log("setUp"),this.svg=go(this.svgEl.nativeElement),this.g=this.svg.select("g"),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.resize$.pipe(lh(t=>di(void 0))),this.subscriptions.push(Jc(this.appService.fullscreen$.pipe(Jo(t=>{t?this.svg.call(Rse().on("zoom",i=>{this.setTransform(i.transform,0)})):(this.svg.on(".zoom",null),this.setTransform())})),this.appService.scroll$.pipe(Jo(t=>{this.section=this.appService.scroll$.value.section}))).subscribe(t=>{}),Jc(this.appService.update$,this.house$).pipe(Jo(t=>{const i=this.house$.value;this.house=i,this.cross=i.cross,this.stair=i.stair})).subscribe(t=>{this.updateSVG(!0)}),Jc(this.appService.states$,this.appService.svgTransform$.pipe(Jo(t=>{if(!this.loaded&&this.graphic in t){const i=t[this.graphic];this.setTransform(new R0(i.k,i.x,i.y))}})),this.resize$.pipe(zo(t=>!this.showingImage),W3e(10))).pipe(zo(t=>void 0!==this.house),A0()).subscribe(t=>{this.updateSVG()})),this.loaded=!0}setTransform(t="translate(0,0) scale(1)",i=1e4){this.printPreview||(this.loaded&&this.appService.setTransformCookie(t,this.graphic),this.g.transition().duration(i).attr("transform",t),console.log("setTransform",t))}updateSVG(t=!1){this.tooltipService.updateOverlay(),this.svgUpdateMarginAndSize(),this.svgSpecificUpdate();const[[i,r],[s,o]]=this.svgHouseSize,a=-this.marginInMeters[3]+i,c=-this.marginInMeters[0]+r,l=s+this.marginInMeters[3]+this.marginInMeters[1],u=o+this.marginInMeters[0]+this.marginInMeters[2],f="translate(0,0) scale(1)"===this.g.attr("transform"),p=this.showingImage||f?window.outerWidth/2:this.svgEl.nativeElement.clientWidth,g=this.showingImage||f?window.outerHeight/2:this.svgEl.nativeElement.clientHeight,v=Math.abs(cn(p,0)-this.marginInPixels[1]-this.marginInPixels[3]),_=Math.abs(cn(g,0)-this.marginInPixels[0]-this.marginInPixels[2]),w=cn(l/v),b=cn(u/_),x=Math.max(w,b)/this.getScale(),M=this.meterPerPixel!==x;this.meterPerPixel=x,this.svgEl.nativeElement.setAttribute("meterPerPixel",`${x}`);const E=this.marginInPixels.map(O=>cn(O*this.meterPerPixel));if(!this.isChild)if(this.printPreview){const O=[21,29.7];this.svg.attr("viewBox",`-2 -2 ${O[1]} ${O[0]}`)}else this.svg.transition().duration(1e3).attr("viewBox",`\n          ${-E[3]+a} \n          ${-E[0]+c} \n          ${Math.abs(l+(E[3]+E[1]))} \n          ${Math.abs(u+(E[0]+E[2]))}`);const I=[this.appService.floor$.value,this.appService.scroll$.value.section,Object.entries(this.appService.states$.value).filter(([O,R])=>!0===R).map(([O,R])=>O),this.graphic].join("-"),k=this.stringCache!==I||""===this.stringCache;this.stringCache=I,(!1!==t||k||M)&&this.house.redrawHouse({floor:this.appService.floor$.value,graphic:this.graphic,redrawAll:k||t,meterPerPixel:this.meterPerPixel,theme:void 0,print:this.printPreview})}svgSpecificUpdate(){}getScale(){const t=/scale\(\d+\.?\d*/g.exec(this.g.attr("transform"));return t?Number(t[0].replace("scale(","").replace(")","")):1}}return n.\u0275fac=function(t){return new(t||n)(U(No),U(io),U(X6),U(mn),U(W5),U(u8),U(j5))},n.\u0275cmp=Sn({type:n,selectors:[["app-svg-base"]],viewQuery:function(t,i){if(1&t&&_o(dut,5),2&t){let r;Gi(r=Qi())&&(i.svgEl=r.first)}},hostVars:4,hostBindings:function(t,i){1&t&&Kt("click",function(s){return i.onClick(s)})("contextmenu",function(s){return i.preventContextMenu(s)}),2&t&&$r("imaged",i.showingImage)("print-preview",i.printPreview)},inputs:{isChild:"isChild"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();var put=ae(4159),gut=ae.n(put);let mut=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i}print(t){console.log("Printing the SVG"),this.prepareToPrint(t)}prepareToPrint(t){t.printPreview=!0,this.appService.floor$.next(at.ground),this.appService.states$.next({...this.appService.states$.value,measure:!0,doors:!0,towerFootprint:!1,stramien:!1,examplePlan:!0,theoreticalWalls:!1,grid:!1}),this.appService.setDarkMode(!1,!1),t.updateSVG(!0),t.setTransform("translate(0,0) scale(1)")}saveToCavnas(t,i){const r=t.getBoundingClientRect().width,s=t.getBoundingClientRect().height;gut()(t.parentElement,{width:r,height:s}).then(function(o){o.style.position="absolute",o.style.top="30px",o.style.left="30px",o.style.zIndex="9999",o.style.border="12px solid darkcyan",console.log(o),console.log(r,s),i(o)})}openNewTap(t){var i=new Image;i.src=t.toDataURL("image/png",1),window.open("").document.write(i.outerHTML)}}return n.\u0275fac=function(t){return new(t||n)(Xe(No),Xe(io))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Aut=["render"];function vut(n,e){1&n&&(eo(),Ue(0,"g",88)),2&n&&Ur("id","icon-",e.$implicit,"")}function _ut(n,e){1&n&&(eo(),Ue(0,"polyline",89)),2&n&&Ur("id","grid-index-",e.index,"")}function yut(n,e){1&n&&(eo(),Ue(0,"polyline",90)),2&n&&Ur("id","grid-index-",e.index,"")}function wut(n,e){1&n&&(eo(),Ue(0,"g",88)),2&n&&ge("id",e.$implicit)}function but(n,e){1&n&&(eo(),B(0,"g",88),Ue(1,"polyline",91)(2,"polyline",92)(3,"polygon",93)(4,"circle",94),z()),2&n&&ge("id",e.$implicit)}function xut(n,e){1&n&&(eo(),B(0,"g",88),Ue(1,"polygon",95)(2,"path",96),z()),2&n&&ge("id",e.$implicit)}function Cut(n,e){1&n&&(eo(),B(0,"g",88),Ue(1,"polygon",97)(2,"path",98),z()),2&n&&ge("id",e.$implicit)}function Mut(n,e){1&n&&(eo(),Ue(0,"polyline",99)),2&n&&Yl("id",e.$implicit)}function Sut(n,e){if(1&n&&(eo(),B(0,"g",100),Ue(1,"use",101),z()),2&n){const t=e.$implicit;Yl("id",t),K(1),Yl("id",t)}}function Eut(n,e){1&n&&(eo(),Ue(0,"g",102)),2&n&&Yl("id",e.$implicit)}const j3e=function(){return[]};let Tut=(()=>{class n extends nL{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.printService=l,this.marginInMeters=[0,0,0,0],this.marginInPixels=[72,64,64,8],this.gridSizeX$=new Vs(100),this.gridSizeY$=new Vs(100),this.roomKeys=this.houseService.roomKeys,this.doorKeys=this.houseService.doorKeys,this.wallKeys=this.houseService.wallKeys,this.windowKeys=this.houseService.windowKeys,this.sensorKeys=this.houseService.sensorKeys,this.exampleKeys=this.houseService.exampleKeys,this.SensorTypes=Object.values(Ye),this.graphic=yo.house2D,this.transformOrigin=[0,0],this.svgLoaders=[]}handleKeyboardEvent(t){var i=this;return(0,wi.Z)(function*(){t.ctrlKey&&"z"===t.key&&(console.clear(),t.preventDefault(),i.printService.print(i))})()}svgSpecificUpdate(){!0!==this.appService.fullscreen$.value&&(this.appService.scroll$.value.section===Ct.mainWelcome?(this.setTransform("translate(-1, -4) scale(0.8)",1e3),this.showingImage=!0):(this.setTransform(void 0,1e3),this.showingImage=!1))}addLayout(t="2023-01-01"){const r=this.g.append("g").attr("class","print-layout");r.attr("transform","translate(-2,-2) scale(1)");const s=[21,29.7],o=s[1]-2,a=s[0]-2,u=l5(10,0,!0),f=l5(12,0,!0),p=l5(18,0,!0),g="black";r.append("rect").attr("x",0).attr("y",0).attr("width",s[1]).attr("height",s[0]).attr("fill","none").attr("stroke",g).attr("stroke-width",1*this.meterPerPixel),r.append("rect").attr("x",1).attr("y",1).attr("width",o).attr("height",a).attr("fill","none").attr("stroke",g).attr("stroke-width",2*this.meterPerPixel);const _=2.8;(()=>{const M=r.append("g").attr("transform",`translate(${1+o-1}, ${1+a-_-1.2})`);[...Array(5).keys()].forEach((I,k)=>{M.append("line").attr("x1",-k).attr("y1",0).attr("x2",-k).attr("y2",-.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("text").attr("fill",g).attr("font-size",.7*u).attr("x",-k).attr("y",.3).attr("text-anchor","middle").attr("font-family","sans-serif").text(4-k)}),M.append("line").attr("x1",0).attr("y1",0).attr("x2",-4).attr("y2",0).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("text").attr("fill",g).attr("font-size",.8*u).attr("x",-4).attr("y",-.3).attr("text-anchor","left").attr("font-family","sans-serif").text("Meter")})(),(()=>{const I=1+o-9,k=1+a-_;r.append("rect").attr("fill","white").attr("stroke",g).attr("stroke-width",2*this.meterPerPixel).attr("x",I).attr("y",k).attr("width",9).attr("height",_),r.append("line").attr("x1",I+.2).attr("y1",1+a-.4-.2).attr("x2",1+o-.2).attr("y2",1+a-.4-.2).attr("stroke",g).attr("stroke-width",1*this.meterPerPixel);const O=r.append("text").attr("fill",g).attr("font-size",u).attr("font-family","sans-serif");O.clone().attr("x",1+o-.2).attr("y",k-.1).attr("font-size",f).attr("text-anchor","end").text("F\xf6rhandsbesked"),O.clone().attr("x",1+o-.2).attr("y",k+.2*3).attr("font-size",p).attr("text-anchor","end").attr("font-weight","bold").text(`Passive House ${this.house.name}`),O.clone().attr("x",I+9-.2).attr("y",k+.2*6).attr("font-size",f).attr("text-anchor","end").text("Floor plan Top floor"),O.clone().attr("x",I+9-.2).attr("y",1+a-.4-.4).attr("text-anchor","end").text("Scale 1:100"),O.clone().attr("x",I+4.5+.2).attr("y",1+a-.4-.4).attr("text-anchor","middle").text(`REV: ${(new Date).toISOString().slice(0,10)}`),O.clone().attr("x",I+.2).attr("y",1+a-.4-.4).attr("font-size",f).attr("text-anchor","start").text("Drawing A1"),O.clone().attr("x",I+.2).attr("y",1+a-.2).attr("text-anchor","start").text(t),O.clone().attr("x",1+o-.2).attr("y",1+a-.2).attr("text-anchor","end").text("Drawn by: GeoDev AB")})(),(()=>{const M=r.append("g").attr("transform",`translate(${1+o-.5}, ${1+a-_-1.2})`);M.append("text").attr("fill",g).attr("font-size",u).attr("x",0).attr("y",0).attr("text-anchor","middle").attr("font-family","sans-serif").text("N"),M.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",.5).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("line").attr("x1",0).attr("y1",0).attr("x2",.1).attr("y2",.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel),M.append("line").attr("x1",0).attr("y1",0).attr("x2",-.1).attr("y2",.1).attr("stroke",g).attr("stroke-width",2*this.meterPerPixel)})()}ngAfterViewInit(){this.svgLoaders.push(this.d3Service.loadSVG("assets/models/sun.svg",".g-sun",t=>{const i=this.house$.value,r=40*this.meterPerPixel;go(t).selectChild("svg").attr("height",r+"px").attr("width",r+"px").attr("x",i.houseWidth/2+"px").attr("y",i.houseLength+1*i.studDistance+"px")}));for(let t of Object.values(Ye))this.svgLoaders.push(this.d3Service.loadSVG(`assets/svg/${t}.svg`,`#icon-${t}`,i=>{const s=20*this.meterPerPixel;go(i).selectChild("svg").attr("x",-s/2+"px").attr("y",-s/2+"px").attr("height",s+"px").attr("width",s+"px")}));this.setUp(),this.setStairs(),this.renderImg=this.svg.select(".render-img").attr("xlink:href","/assets/img/top_render.jpg"),this.scaleRenderImage()}svgUpdateMarginAndSize(){this.gridSizeX$.next(this.house.gridSizeX),this.gridSizeY$.next(this.house.gridSizeY);const t=3*this.house.studDistance;this.marginInMeters=[t,t,t,t],this.svgHouseSize=[[0,0],[this.house.houseWidth,this.house.houseLength]],this.scaleRenderImage(),this.scaleStairs(),this.svgLoaders.forEach(i=>i.update())}setStairs(){const t=document.querySelector(".svg-plan-stair-plan").firstChild;this.svg.select(".plan-stair-plan").select(".plan-stair-plan").node().replaceWith(t),t.classList.add("plan-stair-plan")}scaleStairs(){this.svg.select(".plan-stair-plan").attr("transform-origin",`${this.stair.stairOrigin[0]+this.stair.totalWidth/2} ${this.house.stair.stairOrigin[1]+this.stair.totalHeight/2}`)}scaleRenderImage(){const t=this.house.stramien.out,i=[582,240],c=cn(this.house.houseWidth/this.meterPerPixel),l=cn(this.house.houseLength/this.meterPerPixel),u=[0,0],f=cn(549/c,5),p=cn(481/l,5),g=Math.max(p,f);if(!this.renderImg)return;const _=M=>[cn(M[0]/this.meterPerPixel,4),cn(M[1]/this.meterPerPixel,4)],b=[po(45,100,[t.we.d,t.ns.c]),[t.we.d,t.ns.c],[t.we.b+(t.we.c-t.we.b)/2,t.ns.b+(t.ns.c-t.ns.b)/2],[t.we.b,t.ns.b],po(200,100,[t.we.b,t.ns.b])],x=(M=>[u[0]-cn(M[0]*this.meterPerPixel/g),u[1]-cn(M[1]*this.meterPerPixel/g)])(i);this.renderImg.attr("x",x[0]).attr("y",x[1]).attr("width",1920*this.meterPerPixel/g).attr("height",1080*this.meterPerPixel/g).attr("clip-path",`polygon(\n0% 0%,\n100% 0%,\n100% 100%,\n${b.map(M=>(M=>{const E=_(M);return[(E[0]*g+i[0])/1920*100,(E[1]*g+i[1])/1080*100].map(I=>`${cn(I,0)}%`).join(" ")})(M)).join(", \n")}\n      )`),console.log(123)}}return n.\u0275fac=function(t){return new(t||n)(U(No),U(io),U(X6),U(mn),U(W5),U(u8),U(j5),U(mut))},n.\u0275cmp=Sn({type:n,selectors:[["app-svg-plan"]],viewQuery:function(t,i){if(1&t&&_o(Aut,5),2&t){let r;Gi(r=Qi())&&(i.renderEl=r.first)}},hostBindings:function(t,i){1&t&&Kt("keydown",function(s){return i.handleKeyboardEvent(s)},0,aI)},features:[jt],decls:93,vars:15,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet"],["svg",""],["id","MyGradient","gradientTransform","rotate(90)"],["offset","-10%",1,"alt-stop"],["offset","30%",1,"alt-stop"],["offset","100%",1,"main-stop"],["id","inset-shadow"],["stdDeviation","0.5","result","offset-blur"],["operator","out","in","SourceGraphic","in2","offset-blur","result","inverse"],["flood-color","black","flood-opacity","1","result","color"],["operator","in","in","color","in2","inverse","result","shadow"],["in","shadow","result","shadow"],["type","linear","slope",".175"],["transform","rotate(0)",1,"all"],[1,"icons",2,"display","none"],[3,"id",4,"ngFor","ngForOf"],[1,"house-stramien"],["clas","house-stramien",1,"house-stramien-in"],["clas","house-stramien","id","house-stramien-in-we-a"],["clas","house-stramien","id","house-stramien-in-we-b"],["clas","house-stramien","id","house-stramien-in-we-c"],["clas","house-stramien","id","house-stramien-in-we-d"],["clas","house-stramien","id","house-stramien-in-ns-a"],["clas","house-stramien","id","house-stramien-in-ns-b"],["clas","house-stramien","id","house-stramien-in-ns-c"],["clas","house-stramien","id","house-stramien-in-ns-d"],["clas","house-stramien",1,"house-stramien-ground"],["clas","house-stramien","id","house-stramien-ground-we-hall"],["clas","house-stramien","id","house-stramien-ground-ns-hall"],["clas","house-stramien","id","house-stramien-ground-we-toilet"],["clas","house-stramien","id","house-stramien-ground-ns-toilet"],["clas","house-stramien","id","house-stramien-top-we-hall"],["clas","house-stramien","id","house-stramien-top-ns-hall"],["clas","house-stramien","id","house-stramien-top-we-toilet"],["clas","house-stramien","id","house-stramien-top-ns-toilet"],["clas","house-stramien","id","house-stramien-top-we-walkway"],["clas","house-stramien","id","house-stramien-top-ns-walkway"],["clas","house-stramien",1,"house-stramien-out"],["clas","house-stramien","id","house-stramien-out-we-a"],["clas","house-stramien","id","house-stramien-out-we-b"],["clas","house-stramien","id","house-stramien-out-we-c"],["clas","house-stramien","id","house-stramien-out-we-d"],["clas","house-stramien","id","house-stramien-out-ns-a"],["clas","house-stramien","id","house-stramien-out-ns-b"],["clas","house-stramien","id","house-stramien-out-ns-c"],["clas","house-stramien","id","house-stramien-out-ns-d"],[1,"g-grid"],["class","grid-vertical",3,"id",4,"ngFor","ngForOf"],["class","grid-horizontal",3,"id",4,"ngFor","ngForOf"],[1,"house-wind-rose"],[1,"house-wind-rose-1"],[1,"house-wind-rose-2"],[1,"house-wind-rose-text"],[1,"g-room"],[1,"plan-stair-plan","included-stairs-plan"],[1,"plan-stair-plan"],[1,"g-wall"],[1,"g-door"],[1,"g-window"],[1,"extra"],["id","balcony-edge"],["id","hall-edge"],["id","view-lines"],["id","central-void","filter","url(#inset-shadow)"],["id","tower-walls"],["id","roof-line-1"],["id","roof-line-2"],["id","roof-line-3"],["id","roof-line-4"],["id","roof-line-5"],[1,"house-measure"],["id","house-total-height"],["id","house-total-width"],["id","house-width-1"],["id","house-width-2"],["id","house-width-3"],["id","house-height-1"],["id","house-height-2"],["id","house-height-inner"],["id","house-height-3"],[1,"g-sensor"],["class","sensor-cable",3,"id",4,"ngFor","ngForOf"],["class","sensor-g",3,"id",4,"ngFor","ngForOf"],[1,"g-example"],["class","example-g",3,"id",4,"ngFor","ngForOf"],[1,"render-img"],[1,"g-sun"],["id","g-distance"],[3,"id"],[1,"grid-vertical",3,"id"],[1,"grid-horizontal",3,"id"],[1,"wall-left"],[1,"wall-right"],[1,"wall-fill"],[1,"wall-origin"],[1,"door-wall-opening"],[1,"door-swing"],[1,"window-wall-opening"],[1,"window-pane"],[1,"sensor-cable",3,"id"],[1,"sensor-g",3,"id"],[1,"sensor-icon",3,"id"],[1,"example-g",3,"id"]],template:function(t,i){1&t&&(eo(),B(0,"svg",0,1)(2,"defs")(3,"linearGradient",2),Ue(4,"stop",3)(5,"stop",4)(6,"stop",5),z(),B(7,"filter",6),Ue(8,"feGaussianBlur",7)(9,"feComposite",8)(10,"feFlood",9)(11,"feComposite",10),B(12,"feComponentTransfer",11),Ue(13,"feFuncA",12),z()()(),B(14,"g",13)(15,"g",14),Dt(16,vut,1,1,"g",15),z(),B(17,"g",16)(18,"g",17),Ue(19,"polyline",18)(20,"polyline",19)(21,"polyline",20)(22,"polyline",21)(23,"polyline",22)(24,"polyline",23)(25,"polyline",24)(26,"polyline",25),z(),B(27,"g",26),Ue(28,"polyline",27)(29,"polyline",28)(30,"polyline",29)(31,"polyline",30)(32,"polyline",31)(33,"polyline",32)(34,"polyline",33)(35,"polyline",34)(36,"polyline",35)(37,"polyline",36),z(),B(38,"g",37),Ue(39,"polyline",38)(40,"polyline",39)(41,"polyline",40)(42,"polyline",41)(43,"polyline",42)(44,"polyline",43)(45,"polyline",44)(46,"polyline",45),z()(),B(47,"g",46),Dt(48,_ut,1,1,"polyline",47),Dt(49,yut,1,1,"polyline",48),z(),B(50,"g",49),Ue(51,"polygon",50)(52,"polygon",51)(53,"text",52),z(),B(54,"g",53),Dt(55,wut,1,1,"g",15),z(),B(56,"g",54),Ue(57,"svg",55),z(),B(58,"g",56),Dt(59,but,5,1,"g",15),z(),B(60,"g",57),Dt(61,xut,3,1,"g",15),z(),B(62,"g",58),Dt(63,Cut,3,1,"g",15),z(),B(64,"g",59),Ue(65,"polyline",60)(66,"polyline",61)(67,"polyline",62)(68,"polygon",63)(69,"polygon",64)(70,"polyline",65)(71,"polyline",66)(72,"polyline",67)(73,"polyline",68)(74,"polyline",69),z(),B(75,"g",70),Ue(76,"g",71)(77,"g",72)(78,"g",73)(79,"g",74)(80,"g",75)(81,"g",76)(82,"g",77)(83,"g",78)(84,"g",79),z(),B(85,"g",80),Dt(86,Mut,1,1,"polyline",81),Dt(87,Sut,2,2,"g",82),z(),B(88,"g",83),Dt(89,Eut,1,1,"g",84),z(),Ue(90,"image",85)(91,"g",86)(92,"g",87),z()()),2&t&&(rp(i.graphic),K(16),ge("ngForOf",i.SensorTypes),K(32),ge("ngForOf",bu(13,j3e).constructor(55)),K(1),ge("ngForOf",bu(14,j3e).constructor(55)),K(6),ge("ngForOf",i.roomKeys),K(4),ge("ngForOf",i.wallKeys),K(2),ge("ngForOf",i.doorKeys),K(2),ge("ngForOf",i.windowKeys),K(23),ge("ngForOf",i.sensorKeys),K(1),ge("ngForOf",i.sensorKeys),K(2),ge("ngForOf",i.exampleKeys))},dependencies:[t3],styles:[".print-preview{position:absolute!important;top:0;height:auto!important}  .floor-top .included-stairs-plan .floor-clip{clip-path:inherit}  .included-stairs-plan{pointer-events:none}  .sensor-water-cold,   .sensor-dimmer,   .sensor-pir,   .sensor-vent-out,   .sensor-ethernet,   .sensor-perilex,   .sensor-light-switch{fill:var(--primary-color)}  .sensor-water-cold.sensor-cable,   .sensor-dimmer.sensor-cable,   .sensor-pir.sensor-cable,   .sensor-vent-out.sensor-cable,   .sensor-ethernet.sensor-cable,   .sensor-perilex.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--primary-color)!important}  .sensor-water-warm,   .sensor-vent-in,   .sensor-camera,   .sensor-poe,   .sensor-socket,   .sensor-light-bulb{fill:var(--accent-color)}  .sensor-water-warm.sensor-cable,   .sensor-vent-in.sensor-cable,   .sensor-camera.sensor-cable,   .sensor-poe.sensor-cable,   .sensor-socket.sensor-cable,   .sensor-light-bulb.sensor-cable{stroke:var(--accent-color)!important}  .sensor-drain,   .sensor-alarm,   .sensor-light-switch{fill:var(--first-color)}  .sensor-drain.sensor-cable,   .sensor-alarm.sensor-cable,   .sensor-light-switch.sensor-cable{stroke:var(--first-color)!important}  .sensor-shower,   .sensor-dlc,   .sensor-wifi,   .sensor-blinds{fill:var(--second-color)}  .sensor-shower.sensor-cable,   .sensor-dlc.sensor-cable,   .sensor-wifi.sensor-cable,   .sensor-blinds.sensor-cable{stroke:var(--second-color)!important}  .sensor-water-rain,   .sensor-temperature{fill:var(--third-color)}  .sensor-water-rain.sensor-cable,   .sensor-temperature.sensor-cable{stroke:var(--third-color)!important}  .sensor-smoke{fill:#a80000}  .sensor-smoke.sensor-cable{stroke:#a80000!important}  .selection-active .g-sensor>*:not(.selected){opacity:0!important}  svg.house2D{height:100%;width:100%;position:relative}  svg.house2D polyline[id^=roof-line-]{fill:none;stroke:var(--primary-color)}  svg.house2D #hall-edge,   svg.house2D #balcony-edge{stroke:var(--color-60)}  svg.house2D .g-sun{transition:.4s;opacity:0}  svg.house2D .g-sun g{transform-origin:center;fill:#fdc865}  svg.house2D #view-lines{fill:none;stroke:var(--primary-color);opacity:0}  svg.house2D .render-img{pointer-events:none;transition:.4s;opacity:0}  svg.house2D .house-wind-rose{fill:none;transition:.4s,stroke-width 1ms;stroke:#000;stroke-linecap:square}  svg.house2D #tower-walls{fill:var(--accent-color);stroke:none;pointer-events:none;opacity:.6}  svg.house2D .house-stramien{transition:.4s,stroke-width 1ms;stroke:var(--first-color);stroke-linecap:square}  svg.house2D .house-stramien .house-stramien-out{stroke:var(--second-color)}  svg.house2D .house-stramien .house-stramien-top,   svg.house2D .house-stramien .house-stramien-ground{stroke:var(--accent-color)}  svg.house2D .house-wind-rose{opacity:0}  svg.house2D .house-wind-rose .house-wind-rose-text{stroke:none;fill:currentColor}  svg.house2D .house-wind-rose .house-wind-rose-1{fill:currentColor}  svg.house2D .g-grid .grid-main{stroke:var(--color-50)}  svg.house2D .g-grid .grid-sub{stroke:var(--color-10)}  svg.house2D .g-grid .grid-subsub{stroke:var(--color-30)}  svg.house2D .g-sensor polyline{transition:.5s;fill:none;stroke:#00f}  svg.house2D .g-sensor polyline.cable-connection{stroke:#079372}  svg.house2D .g-example svg *{stroke:var(--color-70)!important}  svg.house2D .g-example .svg-Table *{stroke:var(--color-10)}  svg.house2D .g-example .svg-Table path{fill:var(--color-20)!important;stroke:var(--color-10)}  svg.house2D .g-example .svg-Table ellipse{fill:var(--color-30)!important}  svg.house2D .g-room .room-hole polygon{fill:var(--color-20)}  svg.house2D .g-room polygon{stroke:none!important;transition:.4s;fill:var(--color-0)}  svg.house2D .g-room polygon:hover{fill:var(--primary-lighter-color)}  svg.house2D .g-room polygon.selected{fill:var(--primary-color)}  svg.house2D .g-room text{fill:var(--color-80)}  svg.house2D .g-wall{transition:.4s;opacity:1}  svg.house2D .g-wall .selected polygon{fill:var(--primary-color)}  svg.house2D .g-wall .selected circle{opacity:1}  svg.house2D .g-wall polygon{transition:.5s;fill-rule:nonzero}  svg.house2D .g-wall polygon:hover{fill:var(--primary-lighter-color)}  svg.house2D .g-wall circle{stroke:none;fill:var(--color-50);opacity:0}  svg.house2D .g-wall .type-outer{fill:var(--color-30);stroke:var(--color-60)}  svg.house2D .g-wall .type-outer .side-out{stroke:var(--color-60)}  svg.house2D .g-wall .side-out{transition:.6s}  svg.house2D .g-wall .type-inner{fill:var(--color-20);stroke:#565656}  svg.house2D .g-wall .type-theoretic{opacity:1;stroke:#0091b6;stroke-width:3px}  svg.house2D .g-wall .wall-fill{stroke:none}  svg.house2D .g-door g{transition:opacity .4s}  svg.house2D .g-door polygon{transition:.5s;fill:var(--color-0);stroke:none}  svg.house2D .g-door path{fill:none;stroke:var(--color-70);stroke-linecap:square}  svg.house2D .g-window polygon{transition:.5s;fill:var(--color-20);stroke:var(--color-60)}  svg.house2D .g-window path{fill:none;stroke:var(--color-60);stroke-linecap:square}  svg.house2D .plan-stair-plan #walk-line,   svg.house2D .plan-stair-plan .measure-stair{display:none}  .section-main-welcome:not(.fullscreen) .render-img{opacity:1!important}  .section-main-welcome:not(.fullscreen) .room-function-text{opacity:0!important}  .section-main-basics .house-wind-rose,   .section-main-basics .g-grid{transition:2s;opacity:.7!important}  .section-main-tower .room-f{transition:2s;fill:var(--primary-color)!important}  .tag-base-dimension #L0-outer-WestWall-3 .side-out,   .tag-base-dimension #L0-outer-NorthWall .side-out,   .tag-base-dimension #L0-outer-SouthWall-2 .side-out,   .tag-base-dimension #L0-outer-EastWall-2 .side-out{transition:.4s;stroke-width:1!important;stroke:var(--primary-color)!important;stroke-linecap:round}  .tag-orientation .main-stop{stop-color:#fdc865}  .tag-orientation .alt-stop{stop-color:var(--color-0)}  .tag-orientation .house-wind-rose{opacity:.7!important}  .tag-orientation #L0-Central{fill:#fdc865!important}  .tag-orientation #L0-West,   .tag-orientation #L0-Central,   .tag-orientation #L0-East{shape-rendering:crispEdges;fill:url(#MyGradient)!important}  .tag-orientation .g-sun{opacity:.7!important}  .tag-orientation .g-sun g{animation:spin-animation 12s infinite}  .tag-insulated .g-wall *:not(.type-inner) polygon{fill:var(--primary-color);stroke:none!important}  .tag-viewlines #view-lines{opacity:.7!important}@keyframes spin-animation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}"]}),n})();function Lut(n,e){1&n&&(eo(),Ue(0,"circle",44)),2&n&&Ur("id","roof-point-",e.$implicit,"")}function Dut(n,e){1&n&&(eo(),Ue(0,"circle",44)),2&n&&Ur("id","debug-point-",e.$implicit,"")}const $3e=function(n){return{opacity:n}},Iut=function(){return[0,1,2,3,4,5,6,7,8,9,10]},Rut=function(){return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]};let But=(()=>{class n extends nL{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.marginInMeters=[3,3,3,3],this.graphic=yo.cross,this.RoofStyle=u3}ngAfterViewInit(){this.loadFigure(),this.setUp()}loadFigure(){this.figure=this.d3Service.loadSVG("assets/models/dude.svg",".g-figure",t=>{let s,o,a;const c=.3913732394366197;[Ct.roofBasics].includes(this.section)?(s=this.house$.value.cross.elevations[Ti.groundFloor],o=3*this.house$.value.cross.topFloorThickness,a=!0):(s=this.house$.value.cross.elevations[Ti.topFloor],o=this.house$.value.cross.innerWidth/2-c/2+.5,a=!1),go(t).selectChild("svg").attr("height","1.9px").attr("y",-s-1.9+"px").attr("x",o+"px").attr("width",c+"px").selectChild("g").attr("transform",a?"translate(117,0) scale(-1 1)":"")})}svgUpdateMarginAndSize(){this.svgHouseSize=[[0,-this.cross.elevations[Bt.topOutside]],[this.house.outerBase,-this.cross.elevations[Ti.crawlerFloor]+this.cross.elevations[Bt.topOutside]]],this.marginInMeters=[3,3,3,3],this.drawBendPoint(),this.figure.update()}debugDrawPoints(){this.house.cross.pointOf70Roof().forEach((t,i)=>{go(`#debug-point-${i}`).attr("cx",t[0]).attr("cy",-t[1]).attr("r",.051).style("fill","var(--primary-color)").attr("stroke-width",0)})}drawBendPoint(){const i=this.cross.elevations[Ti.topFloor];go("#bend-point__h-line").attr("points",[[0,-i-this.cross.roof70Walls],[this.cross.bendPoint[0],-i-this.cross.roof70Walls],[this.cross.bendPoint[0],-i+this.cross.bendPoint[1]+.1]].join(" ")).attr("stroke-width",2*this.meterPerPixel),go("#bend-point__h-point").attr("cx",this.cross.bendPoint[0]).attr("cy",-i+this.cross.bendPoint[1]).attr("r",.1).attr("stroke-width",2*this.meterPerPixel)}roofCheck(t){return this.section===Ct.roof70?t===u3.roof70?1:0:this.section===Ct.roofCircle?t===u3.roofCircle?1:0:[u3.roofCircleAnd70,t].includes(this.house$.value.cross.roofStyle)?1:0}}return n.\u0275fac=function(t){return new(t||n)(U(No),U(io),U(X6),U(mn),U(W5),U(u8),U(j5))},n.\u0275cmp=Sn({type:n,selectors:[["app-svg-cross"]],features:[jt],decls:46,vars:10,consts:[["preserveAspectRatio","xMidYMid meet",1,"cross"],["svg",""],["id","diagonalHatch","patternUnits","userSpaceOnUse","width","4","height","4","patternTransform","scale(0.1)"],["d","M-1,1 l2,-2\n               M0,4 l4,-4\n               M3,5 l2,-2",2,"stroke","black","stroke-width","0.1"],["transform","rotate(0)",1,"all"],[1,"g-figure"],[1,"g-building"],["id","building-walls"],["id","building-room"],["id","building-crawler"],["id","building-ground-line"],["id","building-fill"],["id","building-ground-fill"],["id","building-ground","fill","url(#diagonalHatch)"],[1,"g-roof-circle",3,"ngStyle"],["id","building-roof-circle-wall1"],["id","building-roof-circle-wall2"],["id","roof-circle","clip-path","url(#clip-roof2)"],["id","roof-circle-shadow"],["id","roof-circle-fill"],[1,"g-roof-70",3,"ngStyle"],["id","building-roof-70-wall1"],["id","building-roof-70-wall2"],["id","roof-70","clip-path","url(#clip-roof2)"],["id","roof-70-fill"],["id","roof-70-shadow"],[1,"g-helper"],[3,"id",4,"ngFor","ngForOf"],[1,"g-h-circle-roof"],["id","roof-circle__h-line"],["id","roof-circle__h-circle"],[1,"g-h-bend-point"],["id","bend-point__h-line"],["id","bend-point__h-point"],[1,"cross-measure"],["id","lower-roof"],["id","higher-roof"],["id","minimum"],["id","minimum-h"],["id","minimum-room"],["id","facade"],["id","height"],["id","minimum-room-h"],["id","g-distance"],[3,"id"]],template:function(t,i){1&t&&(eo(),B(0,"svg",0,1)(2,"defs")(3,"pattern",2),Ue(4,"path",3),z()(),B(5,"g",4),Ue(6,"g",5),B(7,"g",6),Ue(8,"polygon",7)(9,"polygon",8)(10,"polygon",9)(11,"polyline",10)(12,"polygon",11)(13,"polygon",12)(14,"polygon",13),z(),B(15,"g",14),Ue(16,"polygon",15)(17,"polygon",16)(18,"polygon",17)(19,"polygon",18)(20,"polygon",19),z(),B(21,"g",20),Ue(22,"polygon",21)(23,"polygon",22)(24,"polygon",23)(25,"polygon",24)(26,"polygon",25),z(),B(27,"g",26),Dt(28,Lut,1,1,"circle",27),B(29,"g",28),Ue(30,"polyline",29)(31,"path",30),z(),B(32,"g",31),Ue(33,"polyline",32)(34,"circle",33),z()(),B(35,"g",34),Ue(36,"g",35)(37,"g",36)(38,"g",37)(39,"g",38)(40,"g",39)(41,"g",40)(42,"g",41)(43,"g",42),z(),Dt(44,Dut,1,1,"circle",27),Ue(45,"g",43),z()()),2&t&&(K(15),ge("ngStyle",xu(4,$3e,i.roofCheck(i.RoofStyle.roofCircle))),K(6),ge("ngStyle",xu(6,$3e,i.roofCheck(i.RoofStyle.roof70))),K(7),ge("ngForOf",bu(8,Iut)),K(16),ge("ngForOf",bu(9,Rut)))},dependencies:[t3,r6,Xv],styles:["svg.cross{width:100%;height:100%;position:relative}  svg.cross *[id*=-fill]{stroke:none;opacity:0}  svg.cross *[id*=-fill]#building-ground-fill{opacity:1;fill:var(--color-0)}  svg.cross *{transition:fill .4s}  svg.cross .g-roof-circle,   svg.cross .g-roof-70,   svg.cross .g-building{stroke:var(--color-70);fill:var(--color-30)}  svg.cross .g-roof-circle #building-crawler,   svg.cross .g-roof-circle #building-room,   svg.cross .g-roof-70 #building-crawler,   svg.cross .g-roof-70 #building-room,   svg.cross .g-building #building-crawler,   svg.cross .g-building #building-room{fill:var(--color-0)}  svg.cross .g-helper>*{stroke:var(--primary-color)!important;opacity:0;fill:none}  svg.cross .g-helper>*[id^=roof-point-]{opacity:1!important}  .section-roof-basics #building-ground-fill{fill:transparent!important}  .tag-roof-both #roof-70-shadow,   .section-roof-choice #roof-70-shadow{opacity:.6;fill:var(--primary-color)!important}  .tag-roof-both #roof-circle-shadow,   .section-roof-choice #roof-circle-shadow{opacity:1;fill:var(--accent-color)!important}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-silhouette #building-roof-circle-wall1,   .state-silhouette #building-roof-circle-wall2,   .state-silhouette #building-roof-70-wall1,   .state-silhouette #building-roof-70-wall2,   .state-silhouette *[id*=-fill]:not(#building-ground-fill){fill:var(--color-90)!important;opacity:1!important;stroke:var(--color-90)!important}  .state-silhouette *[id*=-shadow]{stroke:var(--color-90)!important;fill:var(--color-90)!important}"]}),n})();function kut(n,e){1&n&&(eo(),B(0,"g",16),Ue(1,"polygon",17)(2,"polygon",18)(3,"text",19),z()),2&n&&Ur("id","step-",e.index,"")}const Fut=function(){return[]};let Put=(()=>{class n extends nL{constructor(t,i,r,s,o,a,c,l){super(t,i,r,s,a,c,l),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.httpClient=o,this.d3Service=a,this.d3DistanceService=c,this.contextMenuService=l,this.graphic=yo.stairCross,this.floor=at.all,this.steps=new Vs(1)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){const t=this.stair.totalRise/Math.tan(Math.PI/180*30);[Ct.stairCheck,Ct.stairPlan].includes(this.section)?this.svgHouseSize=[[5*this.stair.run,9*-this.stair.rise],[4*this.stair.run,4*this.stair.rise]]:(this.svgHouseSize=[[-this.stair.run,-this.stair.totalRise],[t,this.stair.totalRise+this.stair.floorThickness]],this.marginInPixels=[40,40,80,40]),this.marginInMeters=[0,2*this.stair.run,0,0],[Ct.stairPlan].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(U(No),U(io),U(X6),U(mn),U(dh),U(W5),U(u8),U(j5))},n.\u0275cmp=Sn({type:n,selectors:[["app-svg-stair-steps"]],features:[jt],decls:17,vars:5,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-step"],["svg",""],[1,"g-building"],["id","floor-groundfloor"],["id","floor-topfloor-shadow"],["id","floor-topfloor"],[1,"g-step"],[3,"id",4,"ngFor","ngForOf"],[1,"g-helper"],["id","nose-line"],["id","back-line"],["id","run-size",1,"measure"],["id","rise-size",1,"measure"],["id","total-run-size",1,"measure"],["id","total-rise-size",1,"measure"],["id","g-distance"],[3,"id"],[1,"step-run"],[1,"step-rise"],[1,"step-text"]],template:function(t,i){1&t&&(eo(),B(0,"svg",0,1)(2,"g")(3,"g",2),Ue(4,"polygon",3)(5,"polygon",4)(6,"polygon",5),z(),B(7,"g",6),Dt(8,kut,4,1,"g",7),z(),B(9,"g",8),Ue(10,"path",9)(11,"path",10)(12,"g",11)(13,"g",12)(14,"g",13)(15,"g",14),z(),Ue(16,"g",15),z()()),2&t&&(rp(i.graphic),K(8),ge("ngForOf",bu(4,Fut).constructor(25)))},dependencies:[t3],styles:["svg.stairs-step{width:100%;height:100%;position:relative;transition:.2s}  svg.stairs-step .g-helper,   svg.stairs-step .g-building,   svg.stairs-step .g-step{fill:var(--color-80);transition:.4s,stroke-width 1ms;stroke:var(--color-100)}  svg.stairs-step .g-step{fill:var(--color-100);stroke:none}  svg.stairs-step .g-step text{transition:.4s;opacity:0}  svg.stairs-step #back-line,   svg.stairs-step #nose-line{stroke:var(--color-30)}  svg.stairs-step .g-building{stroke:none;fill:var(--color-20)}  svg.stairs-step .g-building #floor-topfloor-shadow{fill:var(--color-5)}  svg.stairs-step .measure text{stroke:var(--color-0);paint-order:stroke}  svg.stairs-step .measure#rise-size,   svg.stairs-step .measure#run-size{transition:.4s 0s;opacity:0}  .section-stair-check #rise-size,   .section-stair-check #run-size{transition:.4s .6s!important;opacity:1!important}  .section-stair-check #step-8 polygon:nth-of-type(2),   .section-stair-check #step-7 polygon{fill:var(--accent)}  .tag-amount-steps text{opacity:1!important}  .tag-amount-steps .measure{opacity:0}"]}),n})();function Hut(n,e){if(1&n&&(eo(),B(0,"g",18),Ue(1,"polygon",19)(2,"polyline",20)(3,"text",21)(4,"circle",22),z()),2&n){const t=e.index;Ur("id","step-plan-",t,""),K(4),Ur("id","step-stinger-",t,"")}}function zut(n,e){1&n&&(eo(),Ue(0,"circle",23)),2&n&&Ur("id","walk-line-",e.index,"")}function Out(n,e){1&n&&(eo(),B(0,"g",24),Ue(1,"g",25)(2,"g",26)(3,"g",27)(4,"g",28)(5,"g",29),z())}const K3e=function(){return[]};function Nut(n,e){if(1&n&&(eo(),B(0,"g",9)(1,"g",10),Dt(2,Hut,5,2,"g",11),z(),B(3,"g",12),Ue(4,"path",13),Dt(5,zut,1,1,"circle",14),z(),Ue(6,"polygon",15),Dt(7,Out,6,0,"g",16),Ue(8,"g",17),z()),2&n){const t=Ft();K(2),ge("ngForOf",bu(3,K3e).constructor(25)),K(3),ge("ngForOf",bu(4,K3e).constructor(25)),K(2),ge("ngIf",!t.isChild)}}let Vut=(()=>{class n extends nL{constructor(t,i,r,s,o,a,c){super(t,i,r,s,o,a,c),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.graphic=yo.stairPlan,this.floor=at.all,this.marginInMeters=[0,0,0,0],this.marginInPixels=[64,64,0,0],this.steps=new Vs(25)}ngAfterViewInit(){setTimeout(()=>{this.setUp()},0)}svgUpdateMarginAndSize(){this.svgHouseSize=[this.stair.stairOrigin,[this.stair.totalWidth,this.stair.totalHeight]],this.marginInMeters=[2*this.stair.run,2*this.stair.run,2*this.stair.run,2*this.stair.run],[Ct.stairStart,Ct.stairBasic,Ct.stairCheck].includes(this.section)?(this.svg.style("opacity",0),this.svg.style("pointer-events","none")):(this.svg.style("pointer-events",""),this.svg.style("opacity",1))}}return n.\u0275fac=function(t){return new(t||n)(U(No),U(io),U(X6),U(mn),U(W5),U(u8),U(j5))},n.\u0275cmp=Sn({type:n,selectors:[["app-svg-stair-plan"]],features:[jt],decls:11,vars:6,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-plan"],["svg",""],["id","clip-roof-ref"],["id","clip-ground-floor-ref"],["id","clip-roof"],[0,"xlink","href","#clip-roof-ref","overflow","visible"],["id","clip-ground-floor"],[0,"xlink","href","#clip-ground-floor-ref","overflow","visible"],["class","floor-clip","clip-path","url(#clip-ground-floor)",4,"ngIf"],["clip-path","url(#clip-ground-floor)",1,"floor-clip"],[1,"g-step-plan"],[3,"id",4,"ngFor","ngForOf"],[1,"g-walk-line"],["id","walk-line"],["class","walk-line-dot",3,"id",4,"ngFor","ngForOf"],["id","outline",1,"outline"],["class","measure-stair",4,"ngIf"],["id","g-distance"],[3,"id"],[1,"step-plan-lines"],[1,"step-plan-rise"],[1,"step-plan-text"],[1,"step-stinger",3,"id"],[1,"walk-line-dot",3,"id"],[1,"measure-stair"],["id","plateau-width"],["id","mid-width"],["id","total-width"],["id","total-height"],["id","lesser-height"]],template:function(t,i){1&t&&(eo(),B(0,"svg",0,1)(2,"defs"),Ue(3,"polygon",2)(4,"polygon",3),z(),B(5,"clipPath",4),Ue(6,"use",5),z(),B(7,"clipPath",6),Ue(8,"use",7),z(),Dt(9,Nut,9,5,"g",8),zi(10,"async"),z()),2&t&&(rp(i.graphic),K(9),ge("ngIf",Er(10,4,i.house$)))},dependencies:[t3,D2,g0],styles:["[_nghost-%COMP%]     .floor-clip{clip-path:inherit}  svg.stairs-plan{width:100%;height:100%;position:relative;transition:.4s}  svg.stairs-plan .left-corner-line,   svg.stairs-plan .right-corner-line,   svg.stairs-plan .middleLine{stroke:var(--primary-color)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .outline,   svg.stairs-plan .step-plan-lines{fill:none;stroke:var(--color-50)}  svg.stairs-plan .step-plan-lines{fill:var(--color-5);stroke:var(--color-50)}  svg.stairs-plan .outline{stroke:var(--color-10)}  svg.stairs-plan .step-plan-rise,   svg.stairs-plan .step-stinger,   svg.stairs-plan .walk-line-dot,   svg.stairs-plan .walk-line,   svg.stairs-plan .step-plan-text{display:none}  .section-stair-plan .step-plan-rise,   .section-stair-plan .step-stinger,   .section-stair-plan .walk-line-dot,   .section-stair-plan .walk-line,   .section-stair-plan .step-plan-text{display:initial!important}  .section-stair-plan .walk-line-dot{opacity:0;fill:var(--first-color)}  .section-stair-plan #walk-line{fill:none;transition:0s;opacity:0;stroke:var(--first-color)}  .section-stair-plan .step-stinger{opacity:0;fill:var(--third-color)}  .section-stair-plan .step-plan-text{display:initial}  .section-stair-plan .step-plan-rise{stroke-dasharray:1%}  .tag-half-circle .g-h-circle-roof{opacity:1!important}  .tag-bend-point .g-h-bend-point{opacity:1!important}  .state-walkLine .walk-line-dot,   .state-walkLine .step-stinger,   .state-walkLine #walk-line{opacity:1}"]}),n})();var Q4e={prefix:"fas",iconName:"temperature-high",icon:[512,512,[],"f769","M416 128c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm0 64c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96s43 96 96 96zM96 112c0-26.5 21.5-48 48-48s48 21.5 48 48V276.5c0 17.3 7.1 31.9 15.3 42.5C217.8 332.6 224 349.5 224 368c0 44.2-35.8 80-80 80s-80-35.8-80-80c0-18.5 6.2-35.4 16.7-48.9C88.9 308.4 96 293.8 96 276.5V112zM144 0C82.1 0 32 50.2 32 112V276.5c0 .1-.1 .3-.2 .6c-.2 .6-.8 1.6-1.7 2.8C11.2 304.2 0 334.8 0 368c0 79.5 64.5 144 144 144s144-64.5 144-144c0-33.2-11.3-63.8-30.1-88.1c-.9-1.2-1.5-2.2-1.7-2.8c-.1-.3-.2-.5-.2-.6V112C256 50.2 205.9 0 144 0zm0 416c26.5 0 48-21.5 48-48c0-20.9-13.4-38.7-32-45.3V112c0-8.8-7.2-16-16-16s-16 7.2-16 16V322.7c-18.6 6.6-32 24.4-32 45.3c0 26.5 21.5 48 48 48z"]},ude={prefix:"fas",iconName:"mound",icon:[576,512,[],"e52d","M144.1 179.2C173.8 127.7 228.6 96 288 96s114.2 31.7 143.9 83.2L540.4 368c12.3 21.3-3.1 48-27.7 48H63.3c-24.6 0-40-26.6-27.7-48L144.1 179.2z"]},_3=(()=>(function(n){n.OSM="OSM",n.Google="Google",n.OSMSatellite="OSMSatellite",n.GoogleSatellite="GoogleSatellite",n.Horby1940="Horby1940",n.Horby1960="Horby1960",n.Horby1975="Horby1975",n.Horby2017="Horby2021",n.none="none"}(_3||(_3={})),_3))(),P1=(()=>(function(n){n.House="House",n.parcel="parcel",n.parcelBorders="parcelBorders",n.test="test",n.dem="dem",n.dem2="dem2",n.heightLines="heightLines",n.water="water",n.waterArea="waterArea",n.roads="roads",n.roadFills="roadFills",n.building="building",n.threes="threes",n.distanceLines="distanceLines",n.kallmurar="kallmurar",n.shadow="shadow"}(P1||(P1={})),P1))();class rc{constructor(e){this.basemap=!1,this.maptip=!1,Object.assign(this,e),this.name||(this.name=`${this.key}`)}}function b8e(n){return n[0]>0&&n[1]>0}function v2(n,e){return Array.isArray(n)?n:(void 0===e?e=[n,n]:(e[0]=n,e[1]=n),e)}class fU{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=v2(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new fU({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return lr()}getImage(e){return lr()}getHitDetectionImage(){return lr()}getPixelRatio(e){return 1}getImageState(){return lr()}getImageSize(){return lr()}getOrigin(){return lr()}getSize(){return lr()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=v2(e)}listenImageChange(e){lr()}load(){lr()}unlistenImageChange(e){lr()}}const x8e=fU,C8e=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,M8e=/^([a-z]*)$|^hsla?\(.*\)$/i;function S8e(n){return"string"==typeof n?n:D8e(n)}function E8e(n){const e=document.createElement("div");if(e.style.color=n,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const T8e=function(){const e={};let t=0;return function(i){let r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=1024){let s=0;for(const o in e)0==(3&s++)&&(delete e[o],--t)}r=function uIt(n){let e,t,i,r,s;if(M8e.exec(n)&&(n=E8e(n)),C8e.exec(n)){const o=n.length-1;let a;a=o<=4?1:2;const c=4===o||8===o;e=parseInt(n.substr(1+0*a,a),16),t=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),r=c?parseInt(n.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,c&&(r=(r<<4)+r)),s=[e,t,i,r/255]}else n.startsWith("rgba(")?(s=n.slice(5,-1).split(",").map(Number),L8e(s)):n.startsWith("rgb(")?(s=n.slice(4,-1).split(",").map(Number),s.push(1),L8e(s)):Kr(!1,14);return s}(i),e[i]=r,++t}return r}}();function rw(n){return Array.isArray(n)?n:T8e(n)}function L8e(n){return n[0]=d1(n[0]+.5|0,0,255),n[1]=d1(n[1]+.5|0,0,255),n[2]=d1(n[2]+.5|0,0,255),n[3]=d1(n[3],0,1),n}function D8e(n){let e=n[0];e!=(0|e)&&(e=e+.5|0);let t=n[1];t!=(0|t)&&(t=t+.5|0);let i=n[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+t+","+i+","+(void 0===n[3]?1:Math.round(100*n[3])/100)+")"}function K0(n){return Array.isArray(n)?D8e(n):n}function _2(n,e,t,i){let r;return r=t&&t.length?t.shift():ez?new OffscreenCanvas(n||300,e||300):document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function lA(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function fIt(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function dIt(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function I8e(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function _L(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function R8e(n){for(;n.lastChild;)n.removeChild(n.lastChild)}const yL="ol-hidden",wL="ol-unselectable",dU="ol-control",B8e="ol-collapsed",mIt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),k8e=["style","variant","weight","size","lineHeight","family"],F8e=function(n){const e=n.match(mIt);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=k8e.length;i<r;++i){const s=e[i+1];void 0!==s&&(t[k8e[i]]=s)}return t.families=t.family.split(/,\s?/),t},P8e="10px sans-serif",yd="#000",bL="round",sw=[],uA="round",cw="#000",lw="center",xL="middle",$5=[0,0,0,0],wd=new Ih;let pU,hA=null;const gU={},AIt=function(){const e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";let s,o;function a(l,u,f){let p=!0;for(let g=0;g<i;++g){const v=t[g];if(o=CL(l+" "+u+" "+e+v,r),f!=v){const _=CL(l+" "+u+" "+e+f+","+v,r);p=p&&_!=o}}return!!p}function c(){let l=!0;const u=wd.getKeys();for(let f=0,p=u.length;f<p;++f){const g=u[f];wd.get(g)<100&&(a.apply(this,g.split("\n"))?(y5(gU),hA=null,pU=void 0,wd.set(g,100)):(wd.set(g,wd.get(g)+1,!0),l=!1))}l&&(clearInterval(s),s=void 0)}return function(l){const u=F8e(l);if(!u)return;const f=u.families;for(let p=0,g=f.length;p<g;++p){const v=f[p],_=u.style+"\n"+u.weight+"\n"+v;void 0===wd.get(_)&&(wd.set(_,100,!0),a(u.style,u.weight,v)||(wd.set(_,0,!0),void 0===s&&(s=setInterval(c,32))))}}}(),vIt=function(){let n;return function(e){let t=gU[e];if(null==t){if(ez){const i=F8e(e),r=H8e(e,"\u017dg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);gU[e]=t}return t}}();function H8e(n,e){return hA||(hA=_2(1,1)),n!=pU&&(hA.font=n,pU=hA.font),hA.measureText(e)}function CL(n,e){return H8e(n,e).width}function z8e(n,e,t){if(e in t)return t[e];const i=e.split("\n").reduce((r,s)=>Math.max(r,CL(n,s)),0);return t[e]=i,i}class mU extends x8e{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new mU({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,r=_2(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;let r=this.radius_,s=void 0===this.radius2_?r:this.radius2_;if(r<s){const k=r;r=s,s=k}const a=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),c=s*Math.sin(a),u=r-Math.sqrt(s*s-c*c),f=Math.sqrt(c*c+u*u),p=f/c;if("miter"===e&&p<=i)return p*t;const g=t/2/p,v=t/2*(u/f),w=Math.sqrt((r+g)*(r+g)+v*v)-r;if(void 0===this.radius2_||"bevel"===e)return 2*w;const b=r*Math.sin(a),M=s-Math.sqrt(r*r-b*b),I=Math.sqrt(b*b+M*M)/b;return I<=i?2*Math.max(w,I*t/2-s-r):2*w}createRenderOptions(){let s,e=uA,t=0,i=null,r=0,o=0;this.stroke_&&(s=this.stroke_.getColor(),null===s&&(s=cw),s=K0(s),o=this.stroke_.getWidth(),void 0===o&&(o=1),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=uA),t=this.stroke_.getMiterLimit(),void 0===t&&(t=10));const a=this.calculateLineJoinSize_(e,o,t),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:s,strokeWidth:o,size:Math.ceil(2*c+a),lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();null===r&&(r=yd),t.fillStyle=K0(r),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if("string"==typeof t&&(t=rw(t)),null===t?i=1:Array.isArray(t)&&(i=4===t.length?t[3]:1),0===i){const r=_2(e.size,e.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(e,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const c=s+a*o,l=a%2==0?i:r;e.lineTo(l*Math.cos(c),l*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=yd,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const hw=mU;class AU extends hw{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new AU({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const h8=AU;class vU{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null}clone(){const e=this.getColor();return new vU({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const ks=vU;class _U{constructor(e){this.color_=void 0!==(e=e||{}).color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new _U({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const Ro=_U;class f8{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=O8e,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new f8({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=O8e,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let yU=null;function xIt(n,e){if(!yU){const t=new ks({color:"rgba(255,255,255,0.4)"}),i=new Ro({color:"#3399CC",width:1.25});yU=[new f8({image:new h8({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return yU}function wU(){const n={},e=[255,255,255,1],t=[0,153,255,1];return n.Polygon=[new f8({fill:new ks({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new f8({stroke:new Ro({color:e,width:5})}),new f8({stroke:new Ro({color:t,width:3})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new f8({image:new h8({radius:6,fill:new ks({color:t}),stroke:new Ro({color:e,width:1.5})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function O8e(n){return n.getGeometry()}const $o=f8;class bU{constructor(e){this.font_=(e=e||{}).font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=v2(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new ks({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}clone(){const e=this.getScale();return new bU({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=v2(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Hh=bU;class ML extends q3{constructor(e,t,i){super(e),this.element=t,this.index=i}}const sc=class MIt extends Ih{constructor(e,t){if(super(),this.unique_=!!(t=t||{}).unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get("length")}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new ML("add",t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new ML("remove",t,e)),t}setAt(e,t){if(e>=this.getLength())return void this.insertAt(e,t);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new ML("remove",r,e)),this.dispatchEvent(new ML("add",t,e))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Use(58)}},so={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};function V8e(n){return Math.pow(n,3)}function fA(n){return 1-V8e(1-n)}function xU(n){return 3*n*n-2*n*n*n}function SIt(n){return n}function CU(n,e,t,i){const r=n.getZoom();if(void 0===r)return;const s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:void 0!==i?i:250,easing:fA})}const dA=class EIt extends Ih{constructor(e){super(),e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set("active",e)}setMap(e){this.map_=e}};function MU(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}const bd=class LIt extends dA{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==so.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==so.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==so.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==so.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};var U8e=ae(2402);const SU=class DIt{constructor(e){this.rbush_=new U8e(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[nr(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],c={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=c,this.items_[nr(a)]=c}this.rbush_.load(i)}remove(e){const t=nr(e),i=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(i)}update(e,t){const i=this.items_[nr(t)];_m([i.minX,i.minY,i.maxX,i.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){return this.rbush_.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return Lm(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Th(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}},G8e=class IIt extends Ih{constructor(e){super(),this.background_=e.background;const t=Object.assign({},e);"object"==typeof e.properties&&(delete t.properties,Object.assign(t,e.properties)),t.opacity=void 0!==e.opacity?e.opacity:1,Kr("number"==typeof t.opacity,64),t.visible=void 0===e.visible||e.visible,t.zIndex=e.zIndex,t.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,t.minResolution=void 0!==e.minResolution?e.minResolution:0,t.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,t.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},i=this.getZIndex();return t.opacity=d1(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==i||t.managed?i:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return lr()}getLayerStatesArray(e){return lr()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return lr()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set("extent",e)}setMaxResolution(e){this.set("maxResolution",e)}setMinResolution(e){this.set("minResolution",e)}setMaxZoom(e){this.set("maxZoom",e)}setMinZoom(e){this.set("minZoom",e)}setOpacity(e){Kr("number"==typeof e,64),this.set("opacity",e)}setVisible(e){this.set("visible",e)}setZIndex(e){this.set("zIndex",e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},zh={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Q8e(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const c=e?0:s[0]*r,l=e?0:s[1]*r,u=a?a[0]:0,f=a?a[1]:0;let p=n[0]+c/2+u,g=n[2]-c/2+u,v=n[1]+l/2+f,_=n[3]-l/2+f;p>g&&(p=(g+p)/2,g=p),v>_&&(v=(_+v)/2,_=v);let w=d1(i[0],p,g),b=d1(i[1],v,_);if(o&&t&&r){const x=30*r;w+=-x*Math.log(1+Math.max(0,p-i[0])/x)+x*Math.log(1+Math.max(0,i[0]-g)/x),b+=-x*Math.log(1+Math.max(0,v-i[1])/x)+x*Math.log(1+Math.max(0,i[1]-_)/x)}return[w,b]}}function BIt(n){return n}function TU(n,e,t,i){const r=Oo(e)/t[0],s=F2(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function LU(n,e,t){let i=Math.min(n,e);return i*=Math.log(1+50*Math.max(0,n/e-1))/50+1,t&&(i=Math.max(i,t),i/=Math.log(1+50*Math.max(0,t/n-1))/50+1),d1(i,t/2,2*e)}function W8e(n,e,t,i,r){return t=void 0===t||t,function(s,o,a,c){if(void 0!==s){const l=i?TU(n,i,a,r):n;return t&&c?LU(s,l,e):d1(s,e,l)}}}function DU(n){if(void 0!==n)return 0}function j8e(n){if(void 0!==n)return n}function EL(n,e){setTimeout(function(){n(e)},0)}function UIt(n){return!(n.sourceCenter&&n.targetCenter&&!Lh(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function RU(n,e,t,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,c=n[1]*s+n[0]*o;return a+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,o=-o,[a*s-c*o,c*s+a*o]}const q0=class zIt extends Ih{constructor(e){super(),e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.projection_=JH(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,e.projection&&noe(),e.center&&(e.center=xc(e.center)),e.extent&&(e.extent=M4(e.extent)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in zh)delete t[a];this.setProperties(t,!0);const i=function NIt(n){let e,t,i,o=void 0!==n.minZoom?n.minZoom:0,a=void 0!==n.maxZoom?n.maxZoom:28;const c=void 0!==n.zoomFactor?n.zoomFactor:2,l=void 0!==n.multiWorld&&n.multiWorld,u=void 0===n.smoothResolutionConstraint||n.smoothResolutionConstraint,f=void 0!==n.showFullExtent&&n.showFullExtent,p=JH(n.projection,"EPSG:3857"),g=p.getExtent();let v=n.constrainOnlyCenter,_=n.extent;if(!l&&!_&&p.isGlobal()&&(v=!1,_=g),void 0!==n.resolutions){const w=n.resolutions;t=w[o],i=void 0!==w[a]?w[a]:w[w.length-1],e=n.constrainResolution?function kIt(n,e,t,i){return e=void 0===e||e,function(r,s,o,a){if(void 0!==r){const c=n[0],l=n[n.length-1],u=t?TU(c,t,o,i):c;if(a)return e?LU(r,u,l):d1(r,l,u);const f=Math.min(u,r),p=Math.floor(hE(n,f,s));return n[p]>u&&p<n.length-1?n[p+1]:n[p]}}}(w,u,!v&&_,f):W8e(t,i,u,!v&&_,f)}else{const b=(g?Math.max(Oo(g),F2(g)):360*d5.degrees/p.getMetersPerUnit())/256/Math.pow(2,0),x=b/Math.pow(2,28);t=n.maxResolution,void 0!==t?o=0:t=b/Math.pow(c,o),i=n.minResolution,void 0===i&&(i=void 0!==n.maxZoom?void 0!==n.maxResolution?t/Math.pow(c,a):b/Math.pow(c,a):x),a=o+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,a-o),e=n.constrainResolution?function FIt(n,e,t,i,r,s){return i=void 0===i||i,t=void 0!==t?t:0,function(o,a,c,l){if(void 0!==o){const u=r?TU(e,r,c,s):e;if(l)return i?LU(o,u,t):d1(o,t,u);const f=1e-9,p=Math.ceil(Math.log(e/u)/Math.log(n)-f),g=-a*(.5-f)+.5,v=Math.min(u,o),_=Math.floor(Math.log(e/v)/Math.log(n)+g),w=Math.max(p,_);return d1(e/Math.pow(n,w),t,u)}}}(c,t,i,u,!v&&_,f):W8e(t,i,u,!v&&_,f)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:c}}(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=function OIt(n){if(void 0!==n.extent)return Q8e(n.extent,n.constrainOnlyCenter,void 0===n.smoothExtentConstraint||n.smoothExtentConstraint);const e=JH(n.projection,"EPSG:3857");if(!0!==n.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Q8e(t,!1,!1)}return BIt}(e),s=i.constraint,o=function VIt(n){if(void 0===n.enableRotation||n.enableRotation){const t=n.constrainRotation;return void 0===t||!0===t?function HIt(n){return n=n||_5(5),function(e,t){return t?e:void 0!==e?Math.abs(e)<=n?0:e:void 0}}():!1===t?j8e:"number"==typeof t?function PIt(n){const e=2*Math.PI/n;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(t):j8e}return DU}(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution();this.setCenterInternal([i[0]+s/2*(r[3]-t[3]+t[1]-r[1]),i[1]-s/2*(r[0]-t[0]+t[2]-r[2])])}}getUpdatedOptions_(e){const t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=xc(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=xc(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let i,t=arguments.length;t>1&&"function"==typeof arguments[t-1]&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),void 0!==u.zoom?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),void 0!==u.rotation&&this.setRotation(u.rotation)}if(r===t)return void(i&&EL(i,!0));let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const l=[];for(;r<t;++r){const u=arguments[r],f={start:s,complete:!1,anchor:u.anchor,duration:void 0!==u.duration?u.duration:1e3,easing:u.easing||xU,callback:i};if(u.center&&(f.sourceCenter=o,f.targetCenter=u.center.slice(),o=f.targetCenter),void 0!==u.zoom?(f.sourceResolution=a,f.targetResolution=this.getResolutionForZoom(u.zoom),a=f.targetResolution):u.resolution&&(f.sourceResolution=a,f.targetResolution=u.resolution,a=f.targetResolution),void 0!==u.rotation){f.sourceRotation=c;const p=O6(u.rotation-c+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=c+p,c=f.targetRotation}UIt(f)?f.complete=!0:s+=f.duration,l.push(f)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let e;this.setHint(0,-this.hints_[0]);for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&EL(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const c=r[o];if(c.complete)continue;const l=e-c.start;let u=c.duration>0?l/c.duration:1;u>=1?(c.complete=!0,u=1):s=!1;const f=c.easing(u);if(c.sourceCenter){const p=c.sourceCenter[0],g=c.sourceCenter[1],v=c.targetCenter[0],_=c.targetCenter[1];this.nextCenter_=c.targetCenter,this.targetCenter_=[p+f*(v-p),g+f*(_-g)]}if(c.sourceResolution&&c.targetResolution){const p=1===f?c.targetResolution:c.sourceResolution+f*(c.targetResolution-c.sourceResolution);if(c.anchor){const g=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(p,0,g,!0);this.targetCenter_=this.calculateCenterZoom(v,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(void 0!==c.sourceRotation&&void 0!==c.targetRotation){const p=1===f?O6(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+f*(c.targetRotation-c.sourceRotation);if(c.anchor){const g=this.constraints_.rotation(p,!0);this.targetCenter_=this.calculateCenterRotate(g,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=p}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(s){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&EL(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return void 0!==r&&(i=[r[0]-t[0],r[1]-t[1]],KH(i,e-this.getRotation()),function C$e(n,e){n[0]+=+e[0],n[1]+=+e[1]}(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();return void 0!==r&&void 0!==s&&(i=[t[0]-e*(t[0]-r[0])/s,t[1]-e*(t[1]-r[1])/s]),i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Mm(e,this.getProjection())}getCenterInternal(){return this.get(zh.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return K_(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Kr(t,1);const i=this.getResolution();Kr(void 0!==i,2);const r=this.getRotation();return Kr(void 0!==r,3),jH(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(zh.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(M4(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Oo(e)/t[0],r=F2(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=Math.log(t/this.minResolution_)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(zh.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),s=Math.log(i/this.minResolution_)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=RU(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let i,r,t=this.minZoom_||0;if(this.resolutions_){const s=hE(this.resolutions_,e,1);t=s,i=this.resolutions_[s],r=s==this.resolutions_.length-1?2:i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=d1(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[t]/Math.pow(this.resolutions_[t]/this.resolutions_[t+1],d1(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Kr(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e))Kr(!G_(e),25),i=koe(M4(e,this.getProjection()));else if("Circle"===e.getType()){const r=M4(e.getExtent(),this.getProjection());i=koe(r),i.rotate(this.getRotation(),F0(r))}else{const r=id();i=r?e.clone().transform(r,this.getProjection()):e}this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,c=1/0,l=-1/0,u=-1/0;for(let f=0,p=s.length;f<p;f+=o){const g=s[f]*i-s[f+1]*r,v=s[f]*r+s[f+1]*i;a=Math.min(a,g),c=Math.min(c,v),l=Math.max(l,g),u=Math.max(u,v)}return[a,c,l,u]}fitInternal(e,t){let i=(t=t||{}).size;i||(i=this.getViewportSizeMinusPadding_());const r=void 0!==t.padding?t.padding:[0,0,0,0],s=void 0!==t.nearest&&t.nearest;let o;o=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);c=isNaN(c)?o:Math.max(c,o),c=this.getConstrainedResolution(c,s?0:1);const l=this.getRotation(),u=Math.sin(l),f=Math.cos(l),p=F0(a);p[0]+=(r[1]-r[3])/2*c,p[1]+=(r[0]-r[2])/2*c;const _=this.getConstrainedCenter([p[0]*f-p[1]*u,p[1]*f+p[0]*u],c),w=t.callback?t.callback:Tm;void 0!==t.duration?this.animateInternal({resolution:c,center:_,duration:t.duration,easing:t.easing},w):(this.targetResolution_=c,this.targetCenter_=_,this.applyTargetState_(!1,!0),EL(w,!0))}centerOn(e,t,i){this.centerOnInternal(xc(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(RU(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),c=RU(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-c[0],e[1]-c[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=Mm(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&xc(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=xc(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&xc(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(zh.ROTATION)!==r&&this.set(zh.ROTATION,r),this.get(zh.RESOLUTION)!==o&&(this.set(zh.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(zh.CENTER)||!Lh(this.get(zh.CENTER),a))&&this.set(zh.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=void 0!==e?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),c=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=c,void this.applyTargetState_();i=i||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Lh(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:c,resolution:a,duration:e,easing:fA,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(e,t,i){i=i&&xc(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){!this.getInteracting()||(this.setHint(1,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}};function BU(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const fw=class GIt extends G8e{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(e.source?e.source:null)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(na(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ks(e,"change",this.handleSourceChange_,this),"ready"===e.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}isVisible(e){let t;t=e instanceof q0?{viewState:e.getState(),extent:e.calculateExtent()}:e;const i=this.getExtent();return this.getVisible()&&BU(this.getLayerState(),t.viewState)&&(!i||nl(i,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const i=this.getSource();if(i&&(t=i.getAttributions()),!t)return[];let s=t(e instanceof q0?e.getViewStateAndExtent():e);return Array.isArray(s)||(s=[s]),s}render(e,t){const i=this.getRenderer();if(i.prepareFrame(e))return this.rendered=!0,i.renderFrame(e,t)}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set("map",e)}getMapInternal(){return this.get("map")}setMap(e){this.mapPrecomposeKey_&&(na(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(na(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ks(e,"precompose",function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);Kr(!r.some(function(o){return o.layer===s.layer}),67),r.push(s)},this),this.mapRenderKey_=Ks(this,"change",e.render,e),this.changed())}setSource(e){this.set("source",e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function $8e(n,e,t){return e+":"+n+":"+(t?S8e(t):"null")}const TL=new class QIt{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];0==(3&e++)&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=$8e(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=$8e(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}},K8e=class WIt extends Dm{constructor(e,t,i,r){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=r}changed(){this.dispatchEvent("change")}getExtent(){return this.extent}getImage(){return lr()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){lr()}};function kU(n,e,t){const i=n;let r=!0,s=!1,o=!1;const a=[fE(i,"load",function(){o=!0,s||e()})];return i.src&&Y$e?(s=!0,i.decode().then(function(){r&&e()}).catch(function(c){r&&(o?e():t())})):a.push(fE(i,"error",t)),function(){r=!1,a.forEach(na)}}const $It=class jIt extends K8e{constructor(e,t,i,r,s,o,a){super(e,t,i,0),this.src_=r,this.image_=new Image,null!==s&&(this.image_.crossOrigin=s),this.context_=a,this.unlisten_=null,this.state=0,this.imageLoadFunction_=o}getImage(){if(2==this.state&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){const e=this.context_.canvas;e.width=this.image_.width,e.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}handleImageError_(){this.state=3,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=F2(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()}load(){(0==this.state||3==this.state)&&(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=kU(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(e){this.image_=e,this.resolution=F2(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};let dw=null;class KIt extends Dm{constructor(e,t,i,r,s,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=t}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){dw||(dw=_2(1,1,void 0,{willReadFrequently:!0})),dw.drawImage(this.image_,0,0);try{dw.getImageData(0,0,1,1),this.tainted_=!1}catch{dw=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=_2(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=kU(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||2!==this.imageState_)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=S8e(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}class FU extends x8e{constructor(e){super({opacity:void 0!==(e=e||{}).opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const o=void 0!==e.img?e.img:null;this.imgSize_=e.imgSize;let a=e.src;Kr(!(void 0!==a&&o),4),Kr(!o||o&&this.imgSize_,5),(void 0===a||0===a.length)&&o&&(a=o.src||nr(o)),Kr(void 0!==a&&a.length>0,6),Kr(!((void 0!==e.width||void 0!==e.height)&&void 0!==e.scale),69);const c=void 0!==e.src?0:2;if(this.color_=void 0!==e.color?rw(e.color):null,this.iconImage_=function qIt(n,e,t,i,r,s){let o=TL.get(e,i,s);return o||(o=new KIt(n,e,t,i,r,s),TL.set(e,i,s,o)),o}(o,a,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,c,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null,this.width_=e.width,this.height_=e.height,void 0!==this.width_||void 0!==this.height_){const l=this.getImage(1),u=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};l.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):l.addEventListener("load",u)}}clone(){let e=this.getScale();return e=Array.isArray(e)?e.slice():e,(void 0!==this.width_||void 0!==this.height_)&&(e=void 0),new FU({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(e,t){const i=this.getImage(1);super.setScale(void 0!==e&&void 0!==t?[e/i.width,t/i.height]:void 0!==e?[e/i.width,e/i.width]:void 0!==t?[t/i.height,t/i.height]:[1,1])}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!r)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=r[0]),"fraction"==this.anchorYUnits_&&(e[1]*=r[1])}if("top-left"!=this.anchorOrigin_){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+r[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=i[0]-t[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(e){this.width_=e,this.updateScaleFromWidthAndHeight(e,this.height_)}setHeight(e){this.height_=e,this.updateScaleFromWidthAndHeight(this.width_,e)}setScale(e){super.setScale(e);const t=this.getImage(1);if(t){const i=Array.isArray(e)?e[0]:e;void 0!==i&&(this.width_=i*t.width);const r=Array.isArray(e)?e[1]:e;void 0!==r&&(this.height_=r*t.height)}}listenImageChange(e){this.iconImage_.addEventListener("change",e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener("change",e)}}const q8e=FU;function X8e(n){return new $o({fill:pw(n,""),stroke:gw(n,""),text:XIt(n),image:YIt(n)})}function pw(n,e){const t=n[e+"fill-color"];if(t)return new ks({color:t})}function gw(n,e){const t=n[e+"stroke-width"],i=n[e+"stroke-color"];if(t||i)return new Ro({width:t,color:i,lineCap:n[e+"stroke-line-cap"],lineJoin:n[e+"stroke-line-join"],lineDash:n[e+"stroke-line-dash"],lineDashOffset:n[e+"stroke-line-dash-offset"],miterLimit:n[e+"stroke-miter-limit"]})}function XIt(n){const e=n["text-value"];return e?new Hh({text:e,font:n["text-font"],maxAngle:n["text-max-angle"],offsetX:n["text-offset-x"],offsetY:n["text-offset-y"],overflow:n["text-overflow"],placement:n["text-placement"],repeat:n["text-repeat"],scale:n["text-scale"],rotateWithView:n["text-rotate-with-view"],rotation:n["text-rotation"],textAlign:n["text-align"],justify:n["text-justify"],textBaseline:n["text-baseline"],padding:n["text-padding"],fill:pw(n,"text-"),backgroundFill:pw(n,"text-background-"),stroke:gw(n,"text-"),backgroundStroke:gw(n,"text-background-")}):void 0}function YIt(n){const e=n["icon-src"],t=n["icon-img"];if(e||t)return new q8e({src:e,img:t,imgSize:n["icon-img-size"],anchor:n["icon-anchor"],anchorOrigin:n["icon-anchor-origin"],anchorXUnits:n["icon-anchor-x-units"],anchorYUnits:n["icon-anchor-y-units"],color:n["icon-color"],crossOrigin:n["icon-cross-origin"],offset:n["icon-offset"],displacement:n["icon-displacement"],opacity:n["icon-opacity"],scale:n["icon-scale"],rotation:n["icon-rotation"],rotateWithView:n["icon-rotate-with-view"],size:n["icon-size"],declutterMode:n["icon-declutter-mode"]});const i=n["shape-points"];if(i){const s="shape-";return new hw({points:i,fill:pw(n,s),stroke:gw(n,s),radius:n["shape-radius"],radius1:n["shape-radius1"],radius2:n["shape-radius2"],angle:n["shape-angle"],displacement:n["shape-displacement"],rotation:n["shape-rotation"],rotateWithView:n["shape-rotate-with-view"],scale:n["shape-scale"],declutterMode:n["shape-declutter-mode"]})}const r=n["circle-radius"];if(r){const s="circle-";return new h8({radius:r,fill:pw(n,s),stroke:gw(n,s),displacement:n["circle-displacement"],scale:n["circle-scale"],rotation:n["circle-rotation"],rotateWithView:n["circle-rotate-with-view"],declutterMode:n["circle-declutter-mode"]})}}const JIt=class ZIt extends fw{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new U8e(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set("renderOrder",e)}setStyle(e){let t;if(void 0===e)t=xIt;else if(null===e)t=null;else if("function"==typeof e)t=e;else if(e instanceof $o)t=e;else if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s){const o=e[s];r[s]=o instanceof $o?o:X8e(o)}t=r}else t=X8e(e);this.style_=t,this.styleFunction_=null===e?void 0:function bIt(n){let e;if("function"==typeof n)e=n;else{let t;Array.isArray(n)?t=n:(Kr("function"==typeof n.getZIndex,41),t=[n]),e=function(){return t}}return e}(this.style_),this.changed()}},mw={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},LL=[mw.FILL],d8=[mw.STROKE],K5=[mw.BEGIN_PATH],Z8e=[mw.CLOSE_PATH],gr=mw,J8e=class eRt{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},Aw=class tRt extends J8e{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return 1==t?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,c=e.length;a<c;a+=t)r[0]=e[a],r[1]=e[a+1],m5(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const a=this.coordinates;let c=a.length;const l=this.getBufferedMaxExtent();o&&(t+=r);let u=e[t],f=e[t+1];const p=this.tmpCoordinate_;let v,_,w,g=!0;for(v=t+r;v<i;v+=r)p[0]=e[v],p[1]=e[v+1],w=QH(l,p),w!==_?(g&&(a[c++]=u,a[c++]=f,g=!1),a[c++]=p[0],a[c++]=p[1]):1===w?(a[c++]=p[0],a[c++]=p[1],g=!1):g=!0,u=p[0],f=p[1],_=w;return(s&&g||v===t+r)&&(a[c++]=u,a[c++]=f),c}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,a=i.length;o<a;++o){const c=i[o],l=this.appendFlatLineCoordinates(e,t,c,r,!1,!1);s.push(l),t=c}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let c,l,u,f,p;switch(s){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),f=[];const g=e.getEndss();p=0;for(let v=0,_=g.length;v<_;++v){const w=[];p=this.drawCustomCoordinates_(c,p,g[v],o,w),f.push(w)}this.instructions.push([gr.CUSTOM,a,f,e,i,lz]),this.hitDetectionInstructions.push([gr.CUSTOM,a,f,e,r||i,lz]);break;case"Polygon":case"MultiLineString":u=[],c="Polygon"==s?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,e.getEnds(),o,u),this.instructions.push([gr.CUSTOM,a,u,e,i,Y_]),this.hitDetectionInstructions.push([gr.CUSTOM,a,u,e,r||i,Y_]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),l=this.appendFlatLineCoordinates(c,0,c.length,o,!1,!1),this.instructions.push([gr.CUSTOM,a,l,e,i,G6]),this.hitDetectionInstructions.push([gr.CUSTOM,a,l,e,r||i,G6]);break;case"MultiPoint":c=e.getFlatCoordinates(),l=this.appendFlatPointCoordinates(c,o),l>a&&(this.instructions.push([gr.CUSTOM,a,l,e,i,G6]),this.hitDetectionInstructions.push([gr.CUSTOM,a,l,e,r||i,G6]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),l=this.coordinates.length,this.instructions.push([gr.CUSTOM,a,l,e,i]),this.hitDetectionInstructions.push([gr.CUSTOM,a,l,e,r||i])}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[gr.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[gr.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let t;e.reverse();const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==gr.END_GEOMETRY?o=t:s==gr.BEGIN_GEOMETRY&&(r[2]=t,O$e(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=K0(r||yd)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=K0(r||cw);const s=t.getLineCap();i.lineCap=void 0!==s?s:bL;const o=t.getLineDash();i.lineDash=o?o.slice():sw;const a=t.getLineDashOffset();i.lineDashOffset=a||0;const c=t.getLineJoin();i.lineJoin=void 0!==c?c:uA;const l=t.getWidth();i.lineWidth=void 0!==l?l:1;const u=t.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[gr.SET_FILL_STYLE,t];return"string"!=typeof t&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[gr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;("string"!=typeof i||e.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,c=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!rd(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=c||e.currentMiterLimit!=l)&&(void 0!==i&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=c,e.currentMiterLimit=l)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[gr.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Gse(this.maxExtent),this.maxLineWidth>0)&&JS(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},epe=class oRt extends Aw{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=void 0!==s.fillStyle,a=void 0!==s.strokeStyle,c=i.length;this.instructions.push(K5),this.hitDetectionInstructions.push(K5);for(let l=0;l<c;++l){const u=i[l],f=this.coordinates.length,p=this.appendFlatLineCoordinates(e,t,u,r,!0,!a),g=[gr.MOVE_TO_LINE_TO,f,p];this.instructions.push(g),this.hitDetectionInstructions.push(g),a&&(this.instructions.push(Z8e),this.hitDetectionInstructions.push(Z8e)),t=u}return o&&(this.instructions.push(LL),this.hitDetectionInstructions.push(LL)),a&&(this.instructions.push(d8),this.hitDetectionInstructions.push(d8)),t}drawCircle(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([gr.SET_FILL_STYLE,yd]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const l=[gr.CIRCLE,c];this.instructions.push(K5,l),this.hitDetectionInstructions.push(K5,l),void 0!==i.fillStyle&&(this.instructions.push(LL),this.hitDetectionInstructions.push(LL)),void 0!==i.strokeStyle&&(this.instructions.push(d8),this.hitDetectionInstructions.push(d8)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([gr.SET_FILL_STYLE,yd]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(a,0,o,c),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([gr.SET_FILL_STYLE,yd]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),c=e.getStride();let l=0;for(let u=0,f=o.length;u<f;++u)l=this.drawFlatCoordinatess_(a,l,o[u],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=b5(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}};function aRt(n,e,t,i,r){const s=[];let o=t,a=0,c=e.slice(t,2);for(;a<n&&o+r<i;){const[l,u]=c.slice(-2),f=e[o+r],p=e[o+r+1],g=Math.sqrt((f-l)*(f-l)+(p-u)*(p-u));if(a+=g,a>=n){const v=(n-a+g)/g,_=Fu(l,f,v),w=Fu(u,p,v);c.push(_,w),s.push(c),c=[_,w],a==n&&(o+=r),a=0}else if(a<n)c.push(e[o+r],e[o+r+1]),o+=r;else{const v=g-a,_=Fu(l,f,v/g),w=Fu(u,p,v/g);c.push(_,w),s.push(c),c=[_,w],a=0,o+=r}}return a>0&&s.push(c),s}function cRt(n,e,t,i,r){let u,f,p,g,v,_,w,b,x,M,s=t,o=t,a=0,c=0,l=t;for(f=t;f<i;f+=r){const E=e[f],I=e[f+1];void 0!==v&&(x=E-v,M=I-_,g=Math.sqrt(x*x+M*M),void 0!==w&&(c+=p,u=Math.acos((w*x+b*M)/(p*g)),u>n&&(c>a&&(a=c,s=l,o=f),c=0,l=f-r)),p=g,w=x,b=M),v=E,_=I}return c+=g,c>a?[l,f]:[s,o]}const vw={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},uRt={Circle:epe,Default:Aw,Image:class nRt extends Aw{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([gr.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([gr.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([gr.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([gr.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},LineString:class rRt extends Aw{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[gr.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,sw,0],K5);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(d8),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([gr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],K5);const o=e.getEnds(),a=e.getFlatCoordinates(),c=e.getStride();let l=0;for(let u=0,f=o.length;u<f;++u)l=this.drawFlatCoordinates_(a,l,o[u],c);this.hitDetectionInstructions.push(d8),this.endGeometry(t)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(d8),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(d8),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(K5)}},Polygon:epe,Text:class lRt extends Aw{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const s=this.textState_;if(""===this.text_||!s||!this.textFillState_&&!this.textStrokeState_)return;const o=this.coordinates;let a=o.length;const c=e.getType();let l=null,u=e.getStride();if("line"!==s.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){let f=s.overflow?null:[];switch(c){case"Point":case"MultiPoint":l=e.getFlatCoordinates();break;case"LineString":l=e.getFlatMidpoint();break;case"Circle":l=e.getCenter();break;case"MultiLineString":l=e.getFlatMidpoints(),u=2;break;case"Polygon":l=e.getFlatInteriorPoint(),s.overflow||f.push(l[2]/this.resolution),u=3;break;case"MultiPolygon":const w=e.getFlatInteriorPoints();l=[];for(let b=0,x=w.length;b<x;b+=3)s.overflow||f.push(w[b+2]/this.resolution),l.push(w[b],w[b+1]);if(0===l.length)return;u=2}const p=this.appendFlatPointCoordinates(l,u);if(p===a)return;if(f&&(p-a)/2!=l.length/u){let w=a/2;f=f.filter((b,x)=>{const M=o[2*(w+x)]===l[x*u]&&o[2*(w+x)+1]===l[x*u+1];return M||--w,M})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let g=s.padding;if(g!=$5&&(s.scale[0]<0||s.scale[1]<0)){let w=s.padding[0],b=s.padding[1],x=s.padding[2],M=s.padding[3];s.scale[0]<0&&(b=-b,M=-M),s.scale[1]<0&&(w=-w,x=-x),g=[w,b,x,M]}const v=this.pixelRatio;this.instructions.push([gr.DRAW_IMAGE,a,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,g==$5?$5:g.map(function(w){return w*v}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const _=1/v;this.hitDetectionInstructions.push([gr.DRAW_IMAGE,a,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[_,_],NaN,void 0,this.declutterImageWithText_,g,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),this.endGeometry(t)}else{if(!nl(this.getBufferedMaxExtent(),e.getExtent()))return;let f;if(l=e.getFlatCoordinates(),"LineString"==c)f=[l.length];else if("MultiLineString"==c)f=e.getEnds();else if("Polygon"==c)f=e.getEnds().slice(0,1);else if("MultiPolygon"==c){const _=e.getEndss();f=[];for(let w=0,b=_.length;w<b;++w)f.push(_[w][0])}this.beginGeometry(e,t);const p=s.repeat,g=p?void 0:s.textAlign;let v=0;for(let _=0,w=f.length;_<w;++_){let b;b=p?aRt(p*this.resolution,l,v,f[_],u):[l.slice(v,f[_])];for(let x=0,M=b.length;x<M;++x){const E=b[x];let I=0,k=E.length;if(null==g){const R=cRt(s.maxAngle,E,0,E.length,2);I=R[0],k=R[1]}for(let R=I;R<k;R+=u)o.push(E[R],E[R+1]);const O=o.length;v=f[_],this.drawChars_(a,O),a=O}}this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||lw,justify:t.justify,textBaseline:t.textBaseline||xL,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,l=vw[r.textBaseline],u=this.textOffsetY_*c,f=this.text_,p=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([gr.DRAW_CHARS,e,t,l,r.overflow,a,r.maxAngle,c,u,s,p*c,f,o,1]),this.hitDetectionInstructions.push([gr.DRAW_CHARS,e,t,l,r.overflow,a,r.maxAngle,1,u,s,p,f,o,1/c])}setTextStyle(e,t){let i,r,s;if(e){const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=K0(o.getColor()||yd)):(r=null,this.textFillState_=r);const a=e.getStroke();if(a){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const v=a.getLineDash(),_=a.getLineDashOffset(),w=a.getWidth(),b=a.getMiterLimit();s.lineCap=a.getLineCap()||bL,s.lineDash=v?v.slice():sw,s.lineDashOffset=void 0===_?0:_,s.lineJoin=a.getLineJoin()||uA,s.lineWidth=void 0===w?1:w,s.miterLimit=void 0===b?10:b,s.strokeStyle=K0(a.getColor()||cw)}else s=null,this.textStrokeState_=s;i=this.textState_;const c=e.getFont()||P8e;AIt(c);const l=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||xL,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||$5,i.scale=void 0===l?[1,1]:l;const u=e.getOffsetX(),f=e.getOffsetY(),p=e.getRotateWithView(),g=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===u?0:u,this.textOffsetY_=void 0===f?0:f,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0===g?0:g,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:nr(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+nr(r.fillStyle):""}else this.text_="";this.declutterImageWithText_=t}}},tpe=class hRt{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=void 0!==e?e.toString():"0";let r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];return void 0===s&&(s=new(0,uRt[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s),s}},npe=class fRt extends loe{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return lr()}getData(e){return null}prepareFrame(e){return lr()}renderFrame(e,t){return lr()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,o)}}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){2===e.target.getState()&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return 2!=t&&3!=t&&e.addEventListener("change",this.boundHandleImageChange_),0==t&&(e.load(),t=e.getState()),2==t}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},_w=class dRt extends q3{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}},ipe=[];let pA=null;const PU=class gRt extends npe{constructor(e){super(e),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){let r;pA||function pRt(){pA=_2(1,1,void 0,{willReadFrequently:!0})}(),pA.clearRect(0,0,1,1);try{pA.drawImage(e,t,i,1,1,0,0,1,1),r=pA.getImageData(0,0,1,1).data}catch{return pA=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return"function"==typeof i&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&rd(rw(e.style.backgroundColor),rw(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=_2();const c=o.canvas;s.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=v5(i),s=iE(i),o=nE(i),a=tE(i);jc(t.coordinateToPixelTransform,r),jc(t.coordinateToPixelTransform,s),jc(t.coordinateToPixelTransform,o),jc(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;jc(c,r),jc(c,s),jc(c,o),jc(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new _w(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_("prerender",e,t)}postRender(e,t){this.dispatchRenderEvent_("postrender",e,t)}getRenderTransform(e,t,i,r,s,o,a){const u=r/t;return Hu(this.tempTransform,s/2,o/2,u,-u,-i,-e[0]+a,-e[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}};function mRt(n,e,t,i,r,s,o,a,c,l,u,f){let p=n[e],g=n[e+1],v=0,_=0,w=0,b=0;function x(){v=p,_=g,p=n[e+=i],g=n[e+1],b+=w,w=Math.sqrt((p-v)*(p-v)+(g-_)*(g-_))}do{x()}while(e<t-i&&b+w<s);let M=0===w?0:(s-b)/w;const E=Fu(v,p,M),I=Fu(_,g,M),k=e-i,O=b,R=s+a*c(l,r,u);for(;e<t-i&&b+w<R;)x();M=0===w?0:(R-b)/w;const P=Fu(v,p,M),Q=Fu(_,g,M);let J;if(f){const X=[E,I,P,Q];iz(X,0,4,2,f,X,X),J=X[0]>X[2]}else J=E>P;const Ce=Math.PI,Ae=[],G=k+i===e;let ue;if(w=0,b=O,p=n[e=k],g=n[e+1],G)return x(),ue=Math.atan2(g-_,p-v),J&&(ue+=ue>0?-Ce:Ce),Ae[0]=[(P+E)/2,(Q+I)/2,(R-s)/2,ue,r],Ae;for(let X=0,le=(r=r.replace(/\n/g," ")).length;X<le;){x();let de=Math.atan2(g-_,p-v);if(J&&(de+=de>0?-Ce:Ce),void 0!==ue){let pt=de-ue;if(pt+=pt>Ce?-2*Ce:pt<-Ce?2*Ce:0,Math.abs(pt)>o)return null}ue=de;const pe=X;let Fe=0;for(;X<le;++X){const kt=a*c(l,r[J?le-X-1:X],u);if(e+i<t&&b+w<s+Fe+kt/2)break;Fe+=kt}if(X===pe)continue;const st=J?r.substring(le-pe,le-X):r.substring(pe,X);M=0===w?0:(s+Fe/2-b)/w;const ze=Fu(v,p,M),_t=Fu(_,g,M);Ae.push([ze,_t,Fe/2,de,st]),s+=Fe}return Ae}const gA=[1/0,1/0,-1/0,-1/0],p8=[],xd=[],Cd=[],g8=[];function rpe(n){return n[3].declutterBox}const ARt=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function spe(n,e){return("start"===e||"end"===e)&&!ARt.test(n)&&(e="start"===e?"left":"right"),vw[e]}function vRt(n,e,t){return t>0&&n.push("\n",""),n.push(e,""),n}const yRt=class _Rt{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,c=this.textStates[t],l=this.pixelRatio,u=[c.scale[0]*l,c.scale[1]*l],f=Array.isArray(e),p=c.justify?vw[c.justify]:spe(Array.isArray(e)?e[0]:e,c.textAlign||lw),g=r&&o.lineWidth?o.lineWidth:0,v=f?e:e.split("\n").reduce(vRt,[]),{width:_,height:w,widths:b,heights:x,lineWidths:M}=function _It(n,e){const t=[],i=[],r=[];let s=0,o=0,a=0,c=0;for(let l=0,u=e.length;l<=u;l+=2){const f=e[l];if("\n"===f||l===u){s=Math.max(s,o),r.push(o),o=0,a+=c;continue}const p=e[l+1]||n.font,g=CL(p,f);t.push(g),o+=g;const v=vIt(p);i.push(v),c=Math.max(c,v)}return{width:s,height:a,widths:t,heights:i,lineWidths:r}}(c,v),E=_+g,I=[],k=(E+2)*u[0],O=(w+g)*u[1],R={width:k<0?Math.floor(k):Math.ceil(k),height:O<0?Math.floor(O):Math.ceil(O),contextInstructions:I};(1!=u[0]||1!=u[1])&&I.push("scale",u),r&&(I.push("strokeStyle",o.strokeStyle),I.push("lineWidth",g),I.push("lineCap",o.lineCap),I.push("lineJoin",o.lineJoin),I.push("miterLimit",o.miterLimit),I.push("setLineDash",[o.lineDash]),I.push("lineDashOffset",o.lineDashOffset)),i&&I.push("fillStyle",a.fillStyle),I.push("textBaseline","middle"),I.push("textAlign","center");const P=.5-p;let Q=p*E+P*g;const J=[],Ce=[];let le,Ae=0,G=0,ue=0,X=0;for(let de=0,pe=v.length;de<pe;de+=2){const Fe=v[de];if("\n"===Fe){G+=Ae,Ae=0,Q=p*E+P*g,++X;continue}const st=v[de+1]||c.font;st!==le&&(r&&J.push("font",st),i&&Ce.push("font",st),le=st),Ae=Math.max(Ae,x[ue]);const ze=[Fe,Q+P*b[ue]+p*(b[ue]-M[X]),.5*(g+Ae)+G];Q+=b[ue],r&&J.push("strokeText",ze),i&&Ce.push("fillText",ze),++ue}return Array.prototype.push.apply(I,J),Array.prototype.push.apply(I,Ce),this.labels_[s]=R,R}replayTextBackground_(e,t,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,a,c,l,u,f,p,g,v,_,w){let b=i-(a*=p[0]),x=r-(c*=p[1]);const M=s+l>e?e-l:s,E=o+u>t?t-u:o,I=v[3]+M*p[0]+v[1],k=v[0]+E*p[1]+v[2],O=b-v[3],R=x-v[0];let P;return(_||0!==f)&&(p8[0]=O,g8[0]=O,p8[1]=R,xd[1]=R,xd[0]=O+I,Cd[0]=xd[0],Cd[1]=R+k,g8[1]=Cd[1]),0!==f?(P=Hu([1,0,0,1,0,0],i,r,1,1,f,-i,-r),jc(P,p8),jc(P,xd),jc(P,Cd),jc(P,g8),Th(Math.min(p8[0],xd[0],Cd[0],g8[0]),Math.min(p8[1],xd[1],Cd[1],g8[1]),Math.max(p8[0],xd[0],Cd[0],g8[0]),Math.max(p8[1],xd[1],Cd[1],g8[1]),gA)):Th(Math.min(O,O+I),Math.min(R,R+k),Math.max(O,O+I),Math.max(R,R+k),gA),g&&(b=Math.round(b),x=Math.round(x)),{drawImageX:b,drawImageY:x,drawImageW:M,drawImageH:E,originX:l,originY:u,declutterBox:{minX:gA[0],minY:gA[1],maxX:gA[2],maxY:gA[3],value:w},canvasTransform:P,scale:p}}replayImageOrLabel_(e,t,i,r,s,o,a){const l=r.declutterBox,u=e.canvas,f=a?a[2]*r.scale[0]/2:0;return l.minX-f<=u.width/t&&l.maxX+f>=0&&l.minY-f<=u.height/t&&l.maxY+f>=0&&(!(!o&&!a)&&this.replayTextBackground_(e,p8,xd,Cd,g8,o,a),function yIt(n,e,t,i,r,s,o,a,c,l,u){n.save(),1!==t&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(c,l),n.scale(u[0],u[1]),function wIt(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}(i,n)):u[0]<0||u[1]<0?(n.translate(c,l),n.scale(u[0],u[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,c,l,o*u[0],a*u[1]),n.restore()}(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=jc(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),a=this.strokeStates[i],c=this.pixelRatio,l=spe(Array.isArray(e)?e[0]:e,s.textAlign||lw),u=vw[s.textBaseline||xL],f=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:l*(o.width/c-2*s.scale[0])+2*(.5-l)*f,anchorY:u*o.height/c+2*(.5-u)*f}}execute_(e,t,i,r,s,o,a,c){let l;this.pixelCoordinates_&&rd(i,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=w5(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),function Z$e(n,e){n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5]}(this.renderedTransform_,i));let u=0;const f=r.length;let g,v,_,w,b,x,M,E,I,k,O,R,p=0,P=0,Q=0,J=null,Ce=null;const Ae=this.coordinateCache_,G=this.viewRotation_,ue=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,X={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:G},le=this.instructions!=r||this.overlaps?0:200;let de,pe,Fe,st;for(;u<f;){const ze=r[u];switch(ze[0]){case gr.BEGIN_GEOMETRY:de=ze[1],st=ze[3],de.getGeometry()?void 0===a||nl(a,st.getExtent())?++u:u=ze[2]+1:u=ze[2];break;case gr.BEGIN_PATH:P>le&&(this.fill_(e),P=0),Q>le&&(e.stroke(),Q=0),!P&&!Q&&(e.beginPath(),w=NaN,b=NaN),++u;break;case gr.CIRCLE:p=ze[1];const pt=l[p],kt=l[p+1],un=l[p+2]-pt,_n=l[p+3]-kt,an=Math.sqrt(un*un+_n*_n);e.moveTo(pt+an,kt),e.arc(pt,kt,an,0,2*Math.PI,!0),++u;break;case gr.CLOSE_PATH:e.closePath(),++u;break;case gr.CUSTOM:p=ze[1],g=ze[2];const Vt=ze[4],Pt=6==ze.length?ze[5]:void 0;X.geometry=ze[3],X.feature=de,u in Ae||(Ae[u]=[]);const wn=Ae[u];Pt?Pt(l,p,g,2,wn):(wn[0]=l[p],wn[1]=l[p+1],wn.length=2),Vt(wn,X),++u;break;case gr.DRAW_IMAGE:p=ze[1],g=ze[2],E=ze[3],v=ze[4],_=ze[5];let ei=ze[6];const Tn=ze[7],Cn=ze[8],$n=ze[9],yi=ze[10];let mr=ze[11];const Ss=ze[12];let Ge=ze[13];const Me=ze[14],It=ze[15];if(!E&&ze.length>=20){I=ze[19],k=ze[20],O=ze[21],R=ze[22];const oc=this.drawLabelWithPointPlacement_(I,k,O,R);E=oc.label,ze[3]=E,v=(oc.anchorX-ze[23])*this.pixelRatio,ze[4]=v,_=(oc.anchorY-ze[24])*this.pixelRatio,ze[5]=_,ei=E.height,ze[6]=ei,Ge=E.width,ze[13]=Ge}let yn,Mn,kn,Mi;ze.length>25&&(yn=ze[25]),ze.length>17?(Mn=ze[16],kn=ze[17],Mi=ze[18]):(Mn=$5,kn=!1,Mi=!1),yi&&ue?mr+=G:!yi&&!ue&&(mr-=G);let Pe=0;for(;p<g;p+=2){if(yn&&yn[Pe++]<Ge/this.pixelRatio)continue;const oc=this.calculateImageOrLabelDimensions_(E.width,E.height,l[p],l[p+1],Ge,ei,v,_,Cn,$n,mr,Ss,s,Mn,kn||Mi,de),ra=[e,t,E,oc,Tn,kn?J:null,Mi?Ce:null];if(c){if("none"===Me)continue;if("obstacle"===Me){c.insert(oc.declutterBox);continue}{let ac,cc;if(It){const w3=g-p;if(!It[w3]){It[w3]=ra;continue}if(ac=It[w3],delete It[w3],cc=rpe(ac),c.collides(cc))continue}if(c.collides(oc.declutterBox))continue;ac&&(c.insert(cc),this.replayImageOrLabel_.apply(this,ac)),c.insert(oc.declutterBox)}}this.replayImageOrLabel_.apply(this,ra)}++u;break;case gr.DRAW_CHARS:const nn=ze[1],dn=ze[2],Yn=ze[3],Zn=ze[4];R=ze[5];const ur=ze[6],Xr=ze[7],ia=ze[8];O=ze[9];const ut=ze[10];I=ze[11],k=ze[12];const Fn=[ze[13],ze[13]],Qt=this.textStates[k],Wn=Qt.font,Un=[Qt.scale[0]*Xr,Qt.scale[1]*Xr];let Fs;Wn in this.widths_?Fs=this.widths_[Wn]:(Fs={},this.widths_[Wn]=Fs);const Ec=fz(l,nn,dn,2),A1=Math.abs(Un[0])*z8e(Wn,I,Fs);if(Zn||A1<=Ec){const ac=mRt(l,nn,dn,2,I,(Ec-A1)*vw[this.textStates[k].textAlign],ur,Math.abs(Un[0]),z8e,Wn,Fs,ue?0:this.viewRotation_);e:if(ac){const cc=[];let w3,Ld,J5,Bl,au;if(O)for(w3=0,Ld=ac.length;w3<Ld;++w3){au=ac[w3],J5=au[4],Bl=this.createLabel(J5,k,"",O),v=au[2]+(Un[0]<0?-ut:ut),_=Yn*Bl.height+2*(.5-Yn)*ut*Un[1]/Un[0]-ia;const Vh=this.calculateImageOrLabelDimensions_(Bl.width,Bl.height,au[0],au[1],Bl.width,Bl.height,v,_,0,0,au[3],Fn,!1,$5,!1,de);if(c&&c.collides(Vh.declutterBox))break e;cc.push([e,t,Bl,Vh,1,null,null])}if(R)for(w3=0,Ld=ac.length;w3<Ld;++w3){au=ac[w3],J5=au[4],Bl=this.createLabel(J5,k,R,""),v=au[2],_=Yn*Bl.height-ia;const Vh=this.calculateImageOrLabelDimensions_(Bl.width,Bl.height,au[0],au[1],Bl.width,Bl.height,v,_,0,0,au[3],Fn,!1,$5,!1,de);if(c&&c.collides(Vh.declutterBox))break e;cc.push([e,t,Bl,Vh,1,null,null])}c&&c.load(cc.map(rpe));for(let Vh=0,Ne=cc.length;Vh<Ne;++Vh)this.replayImageOrLabel_.apply(this,cc[Vh])}}++u;break;case gr.END_GEOMETRY:if(void 0!==o){de=ze[1];const oc=o(de,st);if(oc)return oc}++u;break;case gr.FILL:le?P++:this.fill_(e),++u;break;case gr.MOVE_TO_LINE_TO:for(p=ze[1],g=ze[2],pe=l[p],Fe=l[p+1],x=pe+.5|0,M=Fe+.5|0,(x!==w||M!==b)&&(e.moveTo(pe,Fe),w=x,b=M),p+=2;p<g;p+=2)pe=l[p],Fe=l[p+1],x=pe+.5|0,M=Fe+.5|0,(p==g-2||x!==w||M!==b)&&(e.lineTo(pe,Fe),w=x,b=M);++u;break;case gr.SET_FILL_STYLE:J=ze,this.alignFill_=ze[2],P&&(this.fill_(e),P=0,Q&&(e.stroke(),Q=0)),e.fillStyle=ze[1],++u;break;case gr.SET_STROKE_STYLE:Ce=ze,Q&&(e.stroke(),Q=0),this.setStrokeStyle_(e,ze),++u;break;case gr.STROKE:le?Q++:e.stroke(),++u;break;default:++u}}P&&this.fill_(e),Q&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}},HU=["Polygon","Circle","LineString","Image","Text","Default"],zU={},ope=class wRt{constructor(e,t,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];void 0===i&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r)i[s]=new yRt(this.resolution_,this.pixelRatio_,this.overlaps_,r[s])}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){const a=2*(r=Math.round(r))+1,c=Hu(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=_2(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;let f;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):l||u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(f=[1/0,1/0,-1/0,-1/0],ym(f,e),JS(f,t*(this.renderBuffer_+r),f));const p=function bRt(n){if(void 0!==zU[n])return zU[n];const e=2*n+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let c=i[a];c||(c=[],i[a]=c),c.push(4*((n+s)*e+(n+o))+3),s>0&&c.push(4*((n-s)*e+(n+o))+3),o>0&&(c.push(4*((n+s)*e+(n-o))+3),s>0&&c.push(4*((n-s)*e+(n-o))+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return zU[n]=r,r}(r);let g;function v(I,k){const O=u.getImageData(0,0,a,a).data;for(let R=0,P=p.length;R<P;R++)if(O[p[R]]>0){if(!o||"Image"!==g&&"Text"!==g||o.includes(I)){const Q=(p[R]-3)/4,J=r-Q%a,Ce=r-(Q/a|0),Ae=s(I,k,J*J+Ce*Ce);if(Ae)return Ae}u.clearRect(0,0,a,a);break}}const _=Object.keys(this.executorsByZIndex_).map(Number);let w,b,x,M,E;for(_.sort(N6),w=_.length-1;w>=0;--w){const I=_[w].toString();for(x=this.executorsByZIndex_[I],b=HU.length-1;b>=0;--b)if(g=HU[b],M=x[g],void 0!==M&&(E=M.executeHitDetection(u,c,i,v,f),E))return E}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],a=[i,r,i,o,s,o,s,r];return w5(a,0,8,2,e,a),a}isEmpty(){return Lm(this.executorsByZIndex_)}execute(e,t,i,r,s,o,a){const c=Object.keys(this.executorsByZIndex_).map(Number);let l,u,f,p,g,v;for(c.sort(N6),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||HU,a&&c.reverse(),l=0,u=c.length;l<u;++l){const _=c[l].toString();for(g=this.executorsByZIndex_[_],f=0,p=o.length;f<p;++f)v=g[o[f]],void 0!==v&&v.execute(e,t,i,r,s,a)}this.maxExtent_&&e.restore()}},ape=class xRt extends J8e{constructor(e,t,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?Q_(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,t,i,r){if(!this.image_)return;const s=w5(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,c=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=c*this.imageOpacity_);let l=this.imageRotation_;0===this.transformRotation_&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_);for(let u=0,f=s.length;u<f;u+=2){const p=s[u]-this.imageAnchorX_,g=s[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const v=p+this.imageAnchorX_,_=g+this.imageAnchorY_;Hu(a,v,_,1,1,l,-v,-_),o.setTransform.apply(o,a),o.translate(v,_),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,g,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=c)}drawText_(e,t,i,r){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=w5(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(0===this.transformRotation_&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const c=s[t]+this.textOffsetX_,l=s[t+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(c-this.textOffsetX_,l-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,c,l),this.textFillState_&&o.fillText(this.text_,c,l))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,a=w5(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let c=a.length;s&&(c-=2);for(let l=2;l<c;l+=2)o.lineTo(a[l],a[l+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(nl(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=function oKe(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return w5(i,0,i.length,r,e,t)}(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,t){const i=t.getGeometryFunction()(e);!i||!nl(this.extent_,i.getExtent())||(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),nl(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(nl(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let c=0,l=o.length;c<l;++c)s=this.moveToLineTo_(r,s,o[c],a,!1);i.stroke()}if(""!==this.text_){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),nl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),nl(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,c=s.length;a<c;++a)r=this.drawRings_(i,r,s[a],o);this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),rd(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:lw;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e){const i=e.getColor();this.fillState_={fillStyle:K0(i||yd)}}else this.fillState_=null;if(t){const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),c=t.getWidth(),l=t.getMiterLimit(),u=s||sw;this.strokeState_={lineCap:void 0!==r?r:bL,lineDash:1===this.pixelRatio_?u:u.map(f=>f*this.pixelRatio_),lineDashOffset:(o||0)*this.pixelRatio_,lineJoin:void 0!==a?a:uA,lineWidth:(void 0!==c?c:1)*this.pixelRatio_,miterLimit:void 0!==l?l:10,strokeStyle:K0(i||cw)}}else this.strokeState_=null}setImageStyle(e){let t;if(!e||!(t=e.getSize()))return void(this.image_=null);const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(e){const t=e.getFill();if(t){const g=t.getColor();this.textFillState_={fillStyle:K0(g||yd)}}else this.textFillState_=null;const i=e.getStroke();if(i){const g=i.getColor(),v=i.getLineCap(),_=i.getLineDash(),w=i.getLineDashOffset(),b=i.getLineJoin(),x=i.getWidth(),M=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==v?v:bL,lineDash:_||sw,lineDashOffset:w||0,lineJoin:void 0!==b?b:uA,lineWidth:void 0!==x?x:1,miterLimit:void 0!==M?M:10,strokeStyle:K0(g||cw)}}else this.textStrokeState_=null;const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),c=e.getRotation(),l=e.getScaleArray(),u=e.getText(),f=e.getTextAlign(),p=e.getTextBaseline();this.textState_={font:void 0!==r?r:P8e,textAlign:void 0!==f?f:lw,textBaseline:void 0!==p?p:xL},this.text_=void 0!==u?Array.isArray(u)?u.reduce((g,v,_)=>g+(_%2?" ":v),""):u:"",this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==c?c:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}},X0=.5,cpe={Point:function kRt(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(2!=s.getImageState())return;let c=n;if(r){const u=s.getDeclutterMode();if("none"!==u)if(c=r,"obstacle"===u){const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(s,a),f.drawPoint(e,i)}else o&&o.getText()&&(a={})}const l=c.getBuilder(t.getZIndex(),"Image");l.setImageStyle(s,a),l.drawPoint(e,i)}if(o&&o.getText()){let c=n;r&&(c=r);const l=c.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(e,i)}},LineString:function IRt(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},Polygon:function PRt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(s,o),c.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}},MultiPoint:function FRt(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(2!=s.getImageState())return;let c=n;if(r){const u=s.getDeclutterMode();if("none"!==u)if(c=r,"obstacle"===u){const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(s,a),f.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const l=c.getBuilder(t.getZIndex(),"Image");l.setImageStyle(s,a),l.drawMultiPoint(e,i)}if(o&&o.getText()){let c=n;r&&(c=r);const l=c.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(e,i)}},MultiLineString:function RRt(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}},MultiPolygon:function BRt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const c=n.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(s,o),c.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}},GeometryCollection:function DRt(n,e,t,i,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o)(0,cpe[s[o].getType()])(n,s[o],t,i,r)},Circle:function TRt(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const c=n.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(s,o),c.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const c=(r||n).getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,i)}}};function ERt(n,e){return parseInt(nr(n),10)-parseInt(nr(e),10)}function lpe(n,e){const t=OU(n,e);return t*t}function OU(n,e){return.5*n/e}function upe(n,e,t,i,r,s,o){let a=!1;const c=t.getImage();if(c){const l=c.getImageState();2==l||3==l?c.unlistenImageChange(r):(0==l&&c.load(),c.listenImageChange(r),a=!0)}return function LRt(n,e,t,i,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,r);t.getRenderer()?hpe(n,a,t,e):(0,cpe[a.getType()])(n,a,t,e,s)}(n,e,t,i,s,o),a}function hpe(n,e,t,i){if("GeometryCollection"!=e.getType())n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer());else{const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)hpe(n,s[o],t,i)}}const zRt=class HRt extends PU{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,c=s.projection,l=s.rotation,u=c.getExtent(),f=this.getLayer().getSource(),p=t.pixelRatio,g=t.viewHints,v=!(g[0]||g[1]),_=this.compositionContext_,w=Math.round(t.size[0]*p),b=Math.round(t.size[1]*p),x=f.getWrapX()&&c.canWrapX(),M=x?Oo(u):null,E=x?Math.ceil((r[2]-u[2])/M)+1:1;let I=x?Math.floor((r[0]-u[0])/M):0;do{const k=this.getRenderTransform(o,a,l,p,w,b,I*M);e.execute(_,1,k,l,v,void 0,i)}while(++I<E)}setupCompositionContext_(){if(1!==this.opacity_){const e=_2(this.context.canvas.width,this.context.canvas.height,ipe);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,lA(this.compositionContext_),ipe.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];(function J$e(n,e,t){q_(n,e,0,0,t,0,0)})(this.pixelTransform,1/i,1/i),X_(this.inversePixelTransform,this.pixelTransform);const s=mE(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,a=o.canvas,c=this.replayGroup_,l=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!l||l.isEmpty()))return null;const u=Math.round(e.size[0]*i),f=Math.round(e.size[1]*i);a.width!=u||a.height!=f?(a.width=u,a.height=f,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,u,f),this.preRender(o,e);const p=e.viewState;this.opacity_=r.opacity,this.setupCompositionContext_();let v=!1,_=!0;if(r.extent&&this.clipping){const w=M4(r.extent);_=nl(w,e.extent),v=_&&!td(w,e.extent),v&&this.clipUnrotated(this.compositionContext_,e,w)}return _&&this.renderWorlds(c,e),v&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];jc(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,c=this.wrappedRenderedExtent_,l=this.getLayer(),u=[],f=i[0]*X0,p=i[1]*X0;u.push(this.getRenderTransform(r,s,o,X0,f,p,0).slice());const g=l.getSource(),v=a.getExtent();if(g.getWrapX()&&a.canWrapX()&&!td(v,c)){let _=c[0];const w=Oo(v);let x,b=0;for(;_<v[0];)--b,x=w*b,u.push(this.getRenderTransform(r,s,o,X0,f,p,x).slice()),_+=w;for(b=0,_=c[2];_>v[2];)++b,x=w*b,u.push(this.getRenderTransform(r,s,o,X0,f,p,x).slice()),_-=w}this.hitDetectionImageData_=function CRt(n,e,t,i,r,s,o){const l=_2(n[0]*X0,n[1]*X0);l.imageSmoothingEnabled=!1;const u=l.canvas,f=new ape(l,X0,r,null,o),p=t.length,g=Math.floor(16777215/p),v={};for(let w=1;w<=p;++w){const b=t[w-1],x=b.getStyleFunction()||i;if(!i)continue;let M=x(b,s);if(!M)continue;Array.isArray(M)||(M=[M]);const I=(w*g).toString(16).padStart(7,"#00000");for(let k=0,O=M.length;k<O;++k){const R=M[k],P=R.getGeometryFunction()(b);if(!P||!nl(r,P.getExtent()))continue;const Q=R.clone(),J=Q.getFill();J&&J.setColor(I);const Ce=Q.getStroke();Ce&&(Ce.setColor(I),Ce.setLineDash(null)),Q.setText(void 0);const Ae=R.getImage();if(Ae&&0!==Ae.getOpacity()){const le=Ae.getImageSize();if(!le)continue;const de=_2(le[0],le[1],void 0,{alpha:!1}),pe=de.canvas;de.fillStyle=I,de.fillRect(0,0,pe.width,pe.height),Q.setImage(new q8e({img:pe,imgSize:le,anchor:Ae.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ae.getOrigin(),opacity:1,size:Ae.getSize(),scale:Ae.getScale(),rotation:Ae.getRotation(),rotateWithView:Ae.getRotateWithView()}))}const G=Q.getZIndex()||0;let ue=v[G];ue||(ue={},v[G]=ue,ue.Polygon=[],ue.Circle=[],ue.LineString=[],ue.Point=[]);const X=P.getType();if("GeometryCollection"===X){const le=P.getGeometriesArrayRecursive();for(let de=0,pe=le.length;de<pe;++de){const Fe=le[de];ue[Fe.getType().replace("Multi","")].push(Fe,Q)}}else ue[X.replace("Multi","")].push(P,Q)}}const _=Object.keys(v).map(Number).sort(N6);for(let w=0,b=_.length;w<b;++w){const x=v[_[w]];for(const M in x){const E=x[M];for(let I=0,k=E.length;I<k;I+=2){f.setStyle(E[I+1]);for(let O=0,R=e.length;O<R;++O)f.setTransform(e[O]),f.drawGeometry(E[I])}}}return l.getImageData(0,0,u.width,u.height)}(i,u,this.renderedFeatures_,l.getStyleFunction(),c,s,o)}t(function MRt(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*X0),s=Math.floor(Math.round(n[1])*X0),o=4*(d1(r,0,t.width-1)+d1(s,0,t.height-1)*t.width),u=t.data[o+2]+256*(t.data[o+1]+256*t.data[o]),f=Math.floor(16777215/e.length);u&&u%f==0&&i.push(e[u/f-1])}return i}(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,c=this.getLayer(),l={},u=function(g,v,_){const w=nr(g),b=l[w];if(b){if(!0!==b&&_<b.distanceSq){if(0===_)return l[w]=!0,s.splice(s.lastIndexOf(b),1),r(g,c,v);b.geometry=v,b.distanceSq=_}}else{if(0===_)return l[w]=!0,r(g,c,v);s.push(l[w]={feature:g,layer:c,geometry:v,distanceSq:_,callback:r})}};let f;const p=[this.replayGroup_];return this.declutterExecutorGroup&&p.push(this.declutterExecutorGroup),p.some(g=>f=g.forEachFeatureAtCoordinate(e,o,a,i,u,g===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(v=>v.value):null)),f}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[0],s=e.viewHints[1],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,l=e.viewState,u=l.projection,f=l.resolution,p=e.pixelRatio,g=t.getRevision(),v=t.getRenderBuffer();let _=t.getRenderOrder();void 0===_&&(_=ERt);const w=l.center.slice(),b=JS(c,v*f),x=b.slice(),M=[b.slice()],E=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!td(E,e.extent)){const X=Oo(E),le=Math.max(Oo(b)/2,X);b[0]=E[0]-le,b[2]=E[2]+le,Yse(w,u);const de=Kse(M[0],u);de[0]<E[0]&&de[2]<E[2]?M.push([de[0]+X,de[1],de[2]+X,de[3]]):de[0]>E[0]&&de[2]>E[2]&&M.push([de[0]-X,de[1],de[2]-X,de[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==g&&this.renderedRenderOrder_==_&&td(this.wrappedRenderedExtent_,b))return rd(this.renderedExtent_,x)||(this.hitDetectionImageData_=null,this.renderedExtent_=x),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const I=new tpe(OU(f,p),b,f,p);let k;this.getLayer().getDeclutter()&&(k=new tpe(OU(f,p),b,f,p));const O=id();let R;if(O){for(let X=0,le=M.length;X<le;++X){const pe=K_(M[X]);i.loadFeatures(pe,k$e(f),O)}R=Cm(O,u)}else for(let X=0,le=M.length;X<le;++X)i.loadFeatures(M[X],f,u);const P=lpe(f,p);let Q=!0;const J=X=>{let le;const de=X.getStyleFunction()||t.getStyleFunction();if(de&&(le=de(X,f)),le){const pe=this.renderFeature(X,P,le,I,R,k);Q=Q&&!pe}},Ce=K_(b),Ae=i.getFeaturesInExtent(Ce);_&&Ae.sort(_);for(let X=0,le=Ae.length;X<le;++X)J(Ae[X]);this.renderedFeatures_=Ae,this.ready=Q;const G=I.finish(),ue=new ope(b,f,p,i.getOverlaps(),G,t.getRenderBuffer());return k&&(this.declutterExecutorGroup=new ope(b,f,p,i.getOverlaps(),k.finish(),t.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=g,this.renderedRenderOrder_=_,this.renderedExtent_=x,this.wrappedRenderedExtent_=b,this.renderedCenter_=w,this.renderedProjection_=u,this.replayGroup_=ue,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let c=0,l=i.length;c<l;++c)a=upe(r,e,i[c],t,this.boundHandleStyleImageChange_,s,o)||a;else a=upe(r,e,i,t,this.boundHandleStyleImageChange_,s,o);return a}},O2=class ORt extends JIt{constructor(e){super(e)}createRenderer(){return new zRt(this)}};function fpe(n){return n?Array.isArray(n)?function(e){return n}:"function"==typeof n?n:function(e){return[n]}:null}const NU=class NRt extends Ih{constructor(e){super(),this.projection=Ea(e.projection),this.attributions_=fpe(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=fpe(e),this.changed()}setState(e){this.state_=e,this.changed()}};function VRt(n,e){return[[-1/0,-1/0,1/0,1/0]]}function ppe(n,e){return function(t,i,r,s,o){const a=this;!function URt(n,e,t,i,r,s,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof n?n(t,i,r):n,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){const l=e.getType();let u;"json"==l||"text"==l?u=a.responseText:"xml"==l?(u=a.responseXML,u||(u=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==l&&(u=a.response),u?s(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}(n,e,t,i,r,function(c,l){a.addFeatures(c),void 0!==s&&s(c)},o||Tm)}}class m8 extends q3{constructor(e,t,i){super(e),this.feature=t,this.features=i}}const ol=class GRt extends NU{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=Tm,this.format_=e.format,this.overlaps_=void 0===e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(Kr(this.format_,7),this.loader_=ppe(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:VRt;const t=void 0===e.useSpatialIndex||e.useSpatialIndex;let i,r;this.featuresRtree_=t?new SU:null,this.loadedExtentsRtree_=new SU,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&void 0===i&&(i=new sc(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=nr(e);if(!this.addToIndex_(t,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new m8("addfeature",e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[Ks(t,"change",this.handleFeatureChange_,this),Ks(t,"propertychange",this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const r=t.getId();return void 0!==r&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=t),i&&(Kr(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],c=nr(a);this.addToIndex_(c,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],c=nr(a);this.setupChangeEvents_(c,a);const l=a.getGeometry();if(l){const u=l.getExtent();t.push(u),r.push(a)}else this.nullGeometryFeatures_[c]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener("addfeature"))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new m8("addfeature",i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener("addfeature",function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener("removefeature",function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener("add",i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener("remove",i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(na);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new m8("clear");this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Lm(this.nullGeometryFeatures_)||Dh(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=function w$e(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];Kse(n,e);const i=Oo(t);if(Oo(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||P0,this.featuresRtree_.forEachInExtent(c,function(l){if(t(l)){const u=l.getGeometry(),f=a;if(a=u.closestPointXY(i,r,o,a),a<f){s=l;const p=Math.sqrt(a);c[0]=i-p,c[1]=r-p,c[2]=i+p,c[3]=r+p}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=nr(t),r=t.getGeometry();if(r){const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);const s=t.getId();if(void 0!==s){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new m8("changefeature",t))}hasFeature(e){const t=e.getId();return void 0!==t?t in this.idIndex_:nr(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Lm(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const c=s[o];r.forEachInExtent(c,function(u){return td(u.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new m8("featuresloadstart")),this.loader_.call(this,c,t,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new m8("featuresloadend",void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new m8("featuresloaderror"))}),r.insert(c,{extent:c.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(_m(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=nr(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=nr(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(na),delete this.featureChangeKeys_[t];const r=e.getId();return void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new m8("removefeature",e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){Kr(this.format_,7),this.url_=e,this.setLoader(ppe(e,this.format_))}};function VU(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),i);++r);return i}}const WRt=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},gpe=function(n){return!n.map.getTargetElement().hasAttribute("tabindex")||function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)}(n)},mA=P0,mpe=function(n){const e=n.originalEvent;return 0==e.button&&!(q$e&&X$e&&e.ctrlKey)},UU=Em,Ape=function(n){return n.type==so.SINGLECLICK},GU=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},QU=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},vpe=function(n){const e=n.originalEvent,t=e.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&!e.target.isContentEditable},DL=function(n){const e=n.originalEvent;return Kr(void 0!==e,56),"mouse"==e.pointerType},_pe=function(n){const e=n.originalEvent;return Kr(void 0!==e,56),e.isPrimary&&0===e.button},wpe=[0,0,0,0],AA=[];class jU extends q3{constructor(e,t,i){super(e),this.features=t,this.mapBrowserEvent=i}}function KRt(n,e){return n.index-e.index}function bpe(n,e,t){const i=e.geometry;if("Circle"===i.getType()){let s=i;if(1===e.index){const o=id();o&&(s=s.clone().transform(o,t));const a=bm(s.getCenter(),xc(n)),c=Math.sqrt(a)-s.getRadius();return c*c}}const r=xc(n);return AA[0]=xc(e.segment[0]),AA[1]=xc(e.segment[1]),function E$e(n,e){return bm(n,qse(n,e))}(r,AA)}function xpe(n,e,t){const i=e.geometry;if("Circle"===i.getType()&&1===e.index){let s=i;const o=id();return o&&(s=s.clone().transform(o,t)),Mm(s.getClosestPoint(xc(n)))}const r=xc(n);return AA[0]=xc(e.segment[0]),AA[1]=xc(e.segment[1]),Mm(qse(r,AA))}function qRt(){const n=wU();return function(e,t){return n.Point}}const Cpe=class $Rt extends bd{constructor(e){let t;if(super(e),this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:_pe,this.defaultDeleteCondition_=function(i){return function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}(i)&&Ape(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:mA,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new SU,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new O2({source:new ol({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:qRt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,e.features?t=e.features:e.source&&(this.source_=e.source,t=new sc(this.source_.getFeatures()),this.source_.addEventListener("addfeature",this.handleSourceAdd_.bind(this)),this.source_.addEventListener("removefeature",this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener("add",this.handleFeatureAdd_.bind(this)),this.features_.addEventListener("remove",this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===e.snapToPointer?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),e.addEventListener("change",this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new sc;const i=this.featuresBeingModified_.getArray();for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0,c=o.length;a<c;++a){const l=o[a].feature;l&&!i.includes(l)&&this.featuresBeingModified_.push(l)}}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new jU("modifystart",this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener("change",this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(r){e===r.feature&&i.push(r)});for(let r=i.length-1;r>=0;--r){const s=i[r];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const i=t.getCoordinates(),r={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),r)}writeMultiPointGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r],a={feature:e,geometry:t,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length-1;r<s;++r){const o=i.slice(r,r+2),a={feature:e,geometry:t,index:r,segment:o};this.rBush_.insert(ku(o),a)}}writeMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length-1;a<c;++a){const l=o.slice(a,a+2),u={feature:e,geometry:t,depth:[r],index:a,segment:l};this.rBush_.insert(ku(l),u)}}}writePolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length-1;a<c;++a){const l=o.slice(a,a+2),u={feature:e,geometry:t,depth:[r],index:a,segment:l};this.rBush_.insert(ku(l),u)}}}writeMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length;a<c;++a){const l=o[a];for(let u=0,f=l.length-1;u<f;++u){const p=l.slice(u,u+2),g={feature:e,geometry:t,depth:[a,r],index:u,segment:p};this.rBush_.insert(ku(p),g)}}}}writeCircleGeometry_(e,t){const i=t.getCenter(),r={feature:e,geometry:t,index:0,segment:[i,i]},s={feature:e,geometry:t,index:1,segment:[i,i]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.rBush_.insert(eE(i),r);let a=t;const c=id();if(c&&this.getMap()){const l=this.getMap().getView().getProjection();a=a.clone().transform(c,l),a=Foe(a).transform(l,c)}this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let r=0;r<i.length;++r){const s=i[r];(0,this.SEGMENT_WRITERS_[s.getType()])(e,s)}}createOrUpdateVertexFeature_(e,t,i){let r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(e):(r=new il(new p3(e)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r.set("features",t),r.set("geometries",i),r}handleEvent(e){if(!e.originalEvent)return!0;let t;return this.lastPointerEvent_=e,!e.map.getView().getInteracting()&&e.type==so.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=so.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==so.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],r=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){const a=this.dragSegments_[s],c=a[0],l=c.feature;i.includes(l)||i.push(l);const u=c.geometry;r.includes(u)||r.push(u);const f=c.depth;let p;const g=c.segment,v=a[1];for(;t.length<u.getStride();)t.push(g[v][t.length]);switch(u.getType()){case"Point":p=t,g[0]=t,g[1]=t;break;case"MultiPoint":p=u.getCoordinates(),p[c.index]=t,g[0]=t,g[1]=t;break;case"LineString":p=u.getCoordinates(),p[c.index+v]=t,g[v]=t;break;case"MultiLineString":case"Polygon":p=u.getCoordinates(),p[f[0]][c.index+v]=t,g[v]=t;break;case"MultiPolygon":p=u.getCoordinates(),p[f[1]][f[0]][c.index+v]=t,g[v]=t;break;case"Circle":if(g[0]=t,g[1]=t,0===c.index)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;const _=e.map.getView().getProjection();let w=oE(xc(u.getCenter()),xc(t));const b=id();if(b){const x=u.clone().transform(b,_);x.setRadius(w),w=x.transform(_,b).getRadius()}u.setRadius(w),this.changingFeature_=!1}}p&&this.setGeometryCoordinates_(u,p)}this.createOrUpdateVertexFeature_(t,i,r)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const i=this.vertexFeature_;if(i){const r=e.map.getView().getProjection(),s=[],o=i.getGeometry().getCoordinates(),a=ku([o]),c=this.rBush_.getInExtent(a),l={};c.sort(KRt);for(let u=0,f=c.length;u<f;++u){const p=c[u],g=p.segment;let v=nr(p.geometry);const _=p.depth;if(_&&(v+="-"+_.join("-")),l[v]||(l[v]=new Array(2)),"Circle"!==p.geometry.getType()||1!==p.index)if(!Lh(g[0],o)||l[v][0])if(!Lh(g[1],o)||l[v][1])nr(g)in this.vertexSegments_&&!l[v][0]&&!l[v][1]&&this.insertVertexCondition_(e)&&s.push(p);else{if(l[v][0]&&0===l[v][0].index){let w=p.geometry.getCoordinates();switch(p.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":w=w[_[1]];case"Polygon":if(p.index!==w[_[0]].length-2)continue}}this.dragSegments_.push([p,1]),l[v][1]=p}else this.dragSegments_.push([p,0]),l[v][0]=p;else Lh(xpe(t,p,r),o)&&!l[v][0]&&(this.dragSegments_.push([p,0]),l[v][0]=p)}s.length&&this.willModifyFeatures_(e,[s]);for(let u=s.length-1;u>=0;--u)this.insertVertex_(s[u],o)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const i=this.dragSegments_[t][0],r=i.geometry;if("Circle"===r.getType()){const s=r.getCenter(),o=i.featureSegments[0],a=i.featureSegments[1];o.segment[0]=s,o.segment[1]=s,a.segment[0]=s,a.segment[1]=s,this.rBush_.update(eE(s),o);let c=r;const l=id();if(l){const u=e.map.getView().getProjection();c=c.clone().transform(l,u),c=Foe(c).transform(u,l)}this.rBush_.update(c.getExtent(),a)}else this.rBush_.update(ku(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new jU("modifyend",this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,i){const r=i||t.getCoordinateFromPixel(e),s=t.getView().getProjection(),o=function(l,u){return bpe(r,l,s)-bpe(r,u,s)};let a,c;if(this.hitDetection_){const l="object"==typeof this.hitDetection_?u=>u===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(u,f,p)=>{const g=p||u.getGeometry();if("Point"===g.getType()&&u instanceof il&&this.features_.getArray().includes(u)){c=g;const v=c.getFlatCoordinates().slice(0,2);a=[{feature:u,geometry:c,segment:[v,v]}]}return!0},{layerFilter:l})}if(!a){const f=K_(JS(M4(eE(r,wpe)),t.getView().getResolution()*this.pixelTolerance_,wpe));a=this.rBush_.getInExtent(f)}if(a&&a.length>0){const l=a.sort(o)[0],u=l.segment;let f=xpe(r,l,s);const p=t.getPixelFromCoordinate(f);let g=oE(e,p);if(c||g<=this.pixelTolerance_){const v={};if(v[nr(u)]=!0,this.snapToPointer_||(this.delta_[0]=f[0]-r[0],this.delta_[1]=f[1]-r[1]),"Circle"===l.geometry.getType()&&1===l.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(f,[l.feature],[l.geometry]);else{const _=t.getPixelFromCoordinate(u[0]),w=t.getPixelFromCoordinate(u[1]),b=bm(p,_),x=bm(p,w);g=Math.sqrt(Math.min(b,x)),this.snappedToVertex_=g<=this.pixelTolerance_,this.snappedToVertex_&&(f=b>x?u[1]:u[0]),this.createOrUpdateVertexFeature_(f,[l.feature],[l.geometry]);const M={};M[nr(l.geometry)]=!0;for(let E=1,I=a.length;E<I;++E){const k=a[E].segment;if(!(Lh(u[0],k[0])&&Lh(u[1],k[1])||Lh(u[0],k[1])&&Lh(u[1],k[0])))break;{const O=nr(a[E].geometry);O in M||(M[O]=!0,v[nr(k)]=!0)}}}return void(this.vertexSegments_=v)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const i=e.segment,r=e.feature,s=e.geometry,o=e.depth,a=e.index;let c;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":case"Polygon":c=s.getCoordinates(),c[o[0]].splice(a+1,0,t);break;case"MultiPolygon":c=s.getCoordinates(),c[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":c=s.getCoordinates(),c.splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(s,c);const l=this.rBush_;l.remove(e),this.updateSegmentIndices_(s,a,o,1);const u={segment:[i[0],t],feature:r,geometry:s,depth:o,index:a};l.insert(ku(u.segment),u),this.dragSegments_.push([u,1]);const f={segment:[t,i[1]],feature:r,geometry:s,depth:o,index:a+1};l.insert(ku(f.segment),f),this.dragSegments_.push([f,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=so.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new jU("modifyend",this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let r,s,o,a,c,l,u,f,p,g,v,i=!1;for(c=e.length-1;c>=0;--c)o=e[c],g=o[0],v=nr(g.feature),g.depth&&(v+="-"+g.depth.join("-")),v in t||(t[v]={}),0===o[1]?(t[v].right=g,t[v].index=g.index):1==o[1]&&(t[v].left=g,t[v].index=g.index+1);for(v in t){switch(p=t[v].right,u=t[v].left,l=t[v].index,f=l-1,g=void 0!==u?u:p,f<0&&(f=0),a=g.geometry,s=a.getCoordinates(),r=s,i=!1,a.getType()){case"MultiLineString":s[g.depth[0]].length>2&&(s[g.depth[0]].splice(l,1),i=!0);break;case"LineString":s.length>2&&(s.splice(l,1),i=!0);break;case"MultiPolygon":r=r[g.depth[1]];case"Polygon":r=r[g.depth[0]],r.length>4&&(l==r.length-1&&(l=0),r.splice(l,1),i=!0,0===l&&(r.pop(),r.push(r[0]),f=r.length-1))}if(i){this.setGeometryCoordinates_(a,s);const _=[];if(void 0!==u&&(this.rBush_.remove(u),_.push(u.segment[0])),void 0!==p&&(this.rBush_.remove(p),_.push(p.segment[1])),void 0!==u&&void 0!==p){const w={depth:g.depth,feature:g.feature,geometry:g.geometry,index:f,segment:_};this.rBush_.insert(ku(w.segment),w)}this.updateSegmentIndices_(a,l,g.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,i,r){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(void 0===i||void 0===s.depth||rd(s.depth,i))&&s.index>t&&(s.index+=r)})}};class IL extends U6{constructor(e,t,i){super(),void 0!==i&&void 0===t?this.setFlatCoordinates(i,e):this.setCenterAndRadius(e,t=t||0,i)}clone(){const e=new IL(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],c=o*o+a*a;if(c<r){if(0===c)for(let l=0;l<this.stride;++l)i[l]=s[l];else{const l=this.getRadius()/Math.sqrt(c);i[0]=s[0]+l*o,i[1]=s[1]+l*a;for(let u=2;u<this.stride;++u)i[u]=s[u]}return i.length=this.stride,c}return r}containsXY(e,t){const i=this.flatCoordinates,r=e-i[0],s=t-i[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return Th(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){if(nl(e,this.getExtent())){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]||WH(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+i;for(let s=1;s<t;++s)r[t+s]=e[s];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let s=_oe(r,0,e);r[s++]=r[0]+t;for(let o=1,a=this.stride;o<a;++o)r[s++]=r[o];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),r=this.getStride();this.setCenter(iz(i,0,i.length,r,e,t,i)),this.changed()}translate(e,t){const i=this.getCenter(),r=this.getStride();this.setCenter(goe(i,0,i.length,r,e,t,i)),this.changed()}}const XRt=IL,vA=class YRt extends q3{constructor(e,t,i){super(e),this.map=t,this.frameState=void 0!==i?i:null}},Md=class ZRt extends vA{constructor(e,t,i,r,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==r&&r,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}};class BL extends q3{constructor(e,t){super(e),this.feature=t}}function kL(n,e){return nd(n[0],n[1],e[0],e[1])}function _A(n,e){const t=n.length;return e<0?n[e+t]:e>=t?n[e-t]:n[e]}function FL(n,e,t){let i,r;e<t?(i=e,r=t):(i=t,r=e);const s=Math.ceil(i),o=Math.floor(r);if(s>o)return kL(yA(n,i),yA(n,r));let a=0;i<s&&(a+=kL(yA(n,i),_A(n,s))),o<r&&(a+=kL(_A(n,o),yA(n,r)));for(let c=s;c<o-1;++c)a+=kL(_A(n,c),_A(n,c+1));return a}function Mpe(n,e,t){if(e instanceof zu)PL(n,e.getCoordinates(),!1,t);else if(e instanceof xE){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)PL(n,i[r],!1,t)}else if(e instanceof Q6){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)PL(n,i[r],!0,t)}else if(e instanceof yz){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,c=o.length;a<c;++a)PL(n,o[a],!0,t)}}else if(e instanceof pz){const i=e.getGeometries();for(let r=0;r<i.length;++r)Mpe(n,i[r],t)}}const $U={index:-1,endIndex:NaN};function PL(n,e,t,i){const r=n[0],s=n[1];for(let o=0,a=e.length-1;o<a;++o){const u=Spe(r,s,e[o],e[o+1]);if(0===u.squaredDistance){const f=o+u.along;return void i.push({coordinates:e,ring:t,startIndex:f,endIndex:f})}}}const KU={along:0,squaredDistance:0};function Spe(n,e,t,i){const r=t[0],s=t[1],c=i[0]-r,l=i[1]-s;let u=0,f=r,p=s;return(0!==c||0!==l)&&(u=d1(((n-r)*c+(e-s)*l)/(c*c+l*l),0,1),f+=c*u,p+=l*u),KU.along=u,KU.squaredDistance=Q_(nd(n,e,f,p),10),KU}function yA(n,e){const t=n.length;let i=Math.floor(e);const r=e-i;i>=t?i-=t:i<0&&(i+=t);let s=i+1;s>=t&&(s-=t);const o=n[i],a=o[0],c=o[1],l=n[s];return[a+(l[0]-a)*r,c+(l[1]-c)*r]}function nBt(){const n=wU();return function(e,t){return n[e.getGeometry().getType()]}}const Epe=class tBt extends bd{constructor(e){const t=e;t.stopDown||(t.stopDown=Em),super(t),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function iBt(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:P0,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const r=this.mode_;if("Circle"===r)i=function(s,o,a){const c=o||new XRt([NaN,NaN]),l=xc(s[0]),u=bm(l,xc(s[s.length-1]));c.setCenterAndRadius(l,Math.sqrt(u),this.geometryLayout_);const f=id();return f&&c.transform(a,f),c};else{let s;"Point"===r?s=p3:"LineString"===r?s=zu:"Polygon"===r&&(s=Q6),i=function(o,a,c){return a?a.setCoordinates("Polygon"===r?o[0].length?[o[0].concat([o[0][0]])]:[]:o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a}}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new O2({source:new ol({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:nBt(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:GU,this.freehandCondition_=e.freehand?mA:e.freehandCondition?e.freehandCondition:QU,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener("active",this.updateState_)}setTrace(e){let t;t=e?!0===e?mA:e:UU,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){"contextmenu"===e.originalEvent.type&&e.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(e);let t=e.type===so.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===so.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===so.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===so.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===so.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===so.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===so.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Md(so.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active)return void this.deactivateTrace_();const t=this.getMap(),s=ku([t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_])]),o=this.traceSource_.getFeaturesInExtent(s);if(0===o.length)return;const a=function JRt(n,e){const t=[];for(let i=0;i<e.length;++i)Mpe(n,e[i].getGeometry(),t);return t}(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex;i===e.startIndex<=t?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const r=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-r+1}else{const r=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=r-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const r=[];if(t<i){const s=Math.ceil(t);let o=Math.floor(i);o===i&&(o-=1);for(let a=s;a<=o;++a)r.push(_A(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(i);o===i&&(o+=1);for(let a=s;a>=o;--a)r.push(_A(e.coordinates,a))}r.length&&this.appendCoordinates(r)}updateTrace_(e){const t=this.traceState_;if(!t.active||-1===t.targetIndex&&oE(t.startPx,e.pixel)<this.snapTolerance_)return;const i=function eBt(n,e,t,i){const r=n[0],s=n[1];let o=1/0,a=-1,c=NaN;for(let f=0;f<e.targets.length;++f){const p=e.targets[f],g=p.coordinates;let _,v=1/0;for(let w=0;w<g.length-1;++w){const M=Spe(r,s,g[w],g[w+1]);M.squaredDistance<v&&(v=M.squaredDistance,_=w+M.along)}v<o&&(o=v,p.ring&&e.targetIndex===f&&(p.endIndex>p.startIndex?_<p.startIndex&&(_+=g.length):p.endIndex<p.startIndex&&_>p.startIndex&&(_-=g.length)),c=_,a=f)}const l=e.targets[a];let u=l.ring;if(e.targetIndex===a&&u){const f=yA(l.coordinates,c);oE(t.getPixelFromCoordinate(f),e.startPx)>i&&(u=!1)}if(u){const f=l.coordinates,p=f.length,g=l.startIndex,v=c;if(g<v){const _=FL(f,g,v);FL(f,g,v-p)<_&&(c-=p)}else{const _=FL(f,g,v);FL(f,g,v+p)<_&&(c+=p)}}return $U.index=a,$U.endIndex=c,$U}(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(-1!==t.targetIndex){const c=t.targets[t.targetIndex];this.removeTracedCoordinates_(c.startIndex,c.endIndex)}const a=t.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else this.addOrRemoveTracedCoordinates_(t.targets[t.targetIndex],i.endIndex);t.targetIndex=i.index;const r=t.targets[t.targetIndex];r.endIndex=i.endIndex;const s=yA(r.coordinates,r.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const r=!this.finishCoordinate_;r&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||"Point"===this.mode_)&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,r=t[0]-i[0],s=t[1]-i[1],o=r*r+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(e),this.modifyDrawing_(e.coordinate)):this.createOrUpdateSketchPoint_(e.coordinate.slice())}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let r=!1,s=[this.finishCoordinate_];const o=this.mode_;if("Point"===o)i=!0;else if("Circle"===o)i=2===this.sketchCoords_.length;else if("LineString"===o)r=!t&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){const a=this.sketchCoords_;r=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],s=t?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(r){const a=this.getMap();for(let c=0,l=s.length;c<l;c++){const u=s[c],f=a.getPixelFromCoordinate(u),p=e[0]-f[0],g=e[1]-f[1],v=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(p*p+g*g)<=v,i){this.finishCoordinate_=u;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new il(new p3(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new il);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new zu(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=AE(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,"Point"===this.mode_?this.sketchCoords_=e.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new il(new zu(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new il,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new BL("drawstart",this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),r=t.getView().getProjection(),s=AE(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);"Point"===this.mode_?a=this.sketchCoords_:"Polygon"===this.mode_?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),"Polygon"===i.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let r,s;const o=this.mode_;"LineString"===o||"Circle"===o?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),this.geometryFunction_(s,t,i)):"Polygon"===o&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),r&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),r&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r=this.mode_;for(let s=0;s<e;++s){let o;if("LineString"===r||"Circle"===r){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,i),"Polygon"===t.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if("Polygon"===r){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const c=o[o.length-2].slice();o[o.length-1]=c,this.createOrUpdateSketchPoint_(c)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,i)}if(1===o.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const i=e.getGeometry(),r=this.getMap().getView().getProjection();"LineString"===this.mode_?(t.pop(),this.geometryFunction_(t,i,r)):"Polygon"===this.mode_&&(t[0].pop(),this.geometryFunction_(t,i,r),t=i.getCoordinates()),"MultiPoint"===this.type_?e.setGeometry(new Az([t])):"MultiLineString"===this.type_?e.setGeometry(new xE([t])):"MultiPolygon"===this.type_&&e.setGeometry(new yz([t])),this.dispatchEvent(new BL("drawend",e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new BL("drawabort",e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;let r;if(i&&this.startDrawing_(e[0]),"LineString"===t||"Circle"===t)r=this.sketchCoords_;else{if("Polygon"!==t)return;r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&r.shift(),r.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new il(new p3(r)),this.updateSketchFeatures_(),this.dispatchEvent(new BL("drawstart",this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}};class sBt extends q3{constructor(e,t,i,r){super(e),this.selected=t,this.deselected=i,this.mapBrowserEvent=r}}const HL={};class qU extends dA{constructor(e){let t;if(super(),e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:Ape,this.addCondition_=e.addCondition?e.addCondition:UU,this.removeCondition_=e.removeCondition?e.removeCondition:UU,this.toggleCondition_=e.toggleCondition?e.toggleCondition:QU,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:P0,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=void 0!==e.style?e.style:function oBt(){const n=wU();return Dh(n.Polygon,n.LineString),Dh(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}(),this.features_=e.features||new sc,e.layers)if("function"==typeof e.layers)t=e.layers;else{const i=e.layers;t=function(r){return i.includes(r)}}else t=P0;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[nr(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[nr(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener("add",this.boundAddFeature_),this.features_.addEventListener("remove",this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener("add",this.boundAddFeature_),this.features_.removeEventListener("remove",this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const i=this.getMap().getAllLayers().find(function(r){if(r instanceof O2&&r.getSource()&&r.getSource().hasFeature(t))return r});i&&this.addFeatureLayerAssociation_(t,i)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=nr(e);t in HL||(HL[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let r=t.length-1;r>=0;--r){const s=t[r];if(s!==this&&s instanceof qU&&s.getStyle()&&-1!==s.getFeatures().getArray().lastIndexOf(e))return void e.setStyle(s.getStyle())}const i=nr(e);e.setStyle(HL[i]),delete HL[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[nr(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),i=this.removeCondition_(e),r=this.toggleCondition_(e),s=!t&&!i&&!r,o=e.map,a=this.getFeatures(),c=[],l=[];if(s){y5(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(u,f)=>{if(u instanceof il&&this.filter_(u,f))return this.addFeatureLayerAssociation_(u,f),l.push(u),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=a.getLength()-1;u>=0;--u){const f=a.item(u),p=l.indexOf(f);p>-1?l.splice(p,1):(a.remove(f),c.push(f))}0!==l.length&&a.extend(l)}else{o.forEachFeatureAtPixel(e.pixel,(u,f)=>{if(u instanceof il&&this.filter_(u,f))return!t&&!r||a.getArray().includes(u)?(i||r)&&a.getArray().includes(u)&&(c.push(u),this.removeFeatureLayerAssociation_(u)):(this.addFeatureLayerAssociation_(u,f),l.push(u)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=c.length-1;u>=0;--u)a.remove(c[u]);a.extend(l)}return(l.length>0||c.length>0)&&this.dispatchEvent(new sBt("select",l,c,e)),!0}}const Tpe=qU;var Xu=(()=>(function(n){n.Length="LineString",n.Area="Polygon",n.Point="Point"}(Xu||(Xu={})),Xu))(),wA=(()=>(function(n){n.km="km",n.ha="ha"}(wA||(wA={})),wA))();let zL=(()=>{class n{constructor(){this.DrawType=Xu,this.active=!1,this.showSegments=!0,this.clearPrevious=!0,this.idle=!0,this.drawType=Xu.Length,this.segmentStyles=[],this.source=new ol,this.tip="",this.halfAreaTip="Click to start",this.unit=wA.ha,this.onDraw$=new $e,this.subscriptions=[],this.style=new $o({fill:new ks({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Ro({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new h8({radius:5,stroke:new Ro({color:"rgba(0, 0, 0, 0.7)"}),fill:new ks({color:"rgba(255, 255, 255, 0.2)"})})}),this.labelStyle=new $o({text:new Hh({font:"14px Calibri,sans-serif",fill:new ks({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new ks({color:"rgba(0, 0, 0, 0.7)"}),padding:[3,3,3,3],textBaseline:"bottom",offsetY:-15}),image:new hw({radius:8,points:3,angle:Math.PI,displacement:[0,8],fill:new ks({color:"rgba(0, 0, 0, 0.7)"})})}),this.tipStyle=new $o({text:new Hh({font:"12px Calibri,sans-serif",fill:new ks({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new ks({color:"rgba(0, 0, 0, 0.4)"}),padding:[2,2,2,2],textAlign:"left",offsetX:15})}),this.modifyStyle=new $o({image:new h8({radius:5,stroke:new Ro({color:"rgba(0, 0, 0, 0.7)"}),fill:new ks({color:"rgba(0, 0, 0, 0.4)"})}),text:new Hh({text:"Drag to modify",font:"12px Calibri,sans-serif",fill:new ks({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new ks({color:"rgba(0, 0, 0, 0.7)"}),padding:[2,2,2,2],textAlign:"left",offsetX:15})}),this.segmentStyle=new $o({text:new Hh({font:"12px Calibri,sans-serif",fill:new ks({color:"rgba(255, 255, 255, 1)"}),backgroundFill:new ks({color:"rgba(0, 0, 0, 0.4)"}),padding:[2,2,2,2],textBaseline:"bottom",offsetY:-12}),image:new hw({radius:6,points:3,angle:Math.PI,displacement:[0,7],fill:new ks({color:"rgba(0, 0, 0, 0.4)"})})}),this.modify=new Cpe({source:this.source,style:this.modifyStyle})}get type(){return this.drawType===Xu.Area?"area":"distance"}get idleTip(){return`Start measurement of ${this.type}`}get activeTip(){return`Double click to close ${this.type}`}init(t){this.map=t,this.addVectorLayers()}onDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}nextType(){this.drawType=this.drawType===Xu.Area?Xu.Length:Xu.Area,this.source.clear(),this.activate(!1),this.activate(!0)}addVectorLayers(){this.vectorLayer=new O2({source:this.source,style:t=>this.styleFunction(t),zIndex:9990,className:"measureTool",properties:{key:"measureTool"}}),this.map.addLayer(this.vectorLayer)}activate(t){void 0===t&&(t=!this.active),t?(this.stopMeasure(),this.active=!0,this.segmentStyles=[this.segmentStyle],this.draw=new Epe({geometryName:"measure",source:this.source,type:this.drawType,style:i=>this.styleFunction(i),condition:i=>1===i.activePointers[0].buttons}),this.subscriptions.push(xa(this.map.getViewport(),"contextmenu").subscribe(i=>{this.idle||this.segmentStyles.length-1==0?(this.activate(!1),i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()):this.draw.finishDrawing()}),xa(this.draw,"drawstart").subscribe(()=>{this.modify.setActive(!1),this.idle=!1,console.log(this.clearPrevious),this.clearPrevious&&(this.source.clear(),this.segmentStyles=[this.segmentStyle])}),xa(this.draw,"drawend").subscribe(()=>{console.log("12 ",this.segmentStyles.length),this.idle=!0,this.modify.setActive(!0),this.modifyStyle.setGeometry(this.tipPoint),this.map.once("pointermove",()=>{this.modifyStyle.setGeometry(void 0)}),this.tip=this.idleTip})),this.map.addInteraction(this.modify),this.map.addInteraction(this.draw),this.tip=this.idleTip):(this.stopMeasure(),this.active=!1),this.modify.setActive(this.active),this.activateOtherInteractions()}stopMeasure(){this.map.removeInteraction(this.modify),this.map.removeInteraction(this.draw),this.source.clear(),this.subscriptions.forEach(t=>t.unsubscribe())}activateOtherInteractions(){this.map.getInteractions().getArray().filter(t=>t instanceof Tpe||t instanceof Cpe||t instanceof Epe).filter(t=>t!==this.draw&&t!==this.modify).forEach(t=>{t.setActive(!this.active)})}formatLength(t){const i=Zse(t);return i>100?Math.round(i/1e3*100)/100+" km":Math.round(100*i)/100+" m"}formatArea(t){const i=Jse(t);return i>1e4?this.unit===wA.km?`${cn(i/1e6,3)} km\xb2`:this.unit===wA.ha?`${cn(i/1e4,3)} ha`:void 0:Math.round(100*i)/100+" m\xb2"}styleFunction(t){const i=[this.style],r=t.getGeometry(),s=r.getType();let o,a,c;if(s===Xu.Area?(o=r.getInteriorPoint(),a=this.formatArea(r),c=new zu(r.getCoordinates()[0]),this.tip=c.getCoordinates().length<4?this.halfAreaTip:this.activeTip):s===Xu.Length&&(o=new p3(r.getLastCoordinate()),a=this.formatLength(r),c=r,this.tip=this.idle?this.idleTip:this.activeTip),this.onDraw$.next(void 0),this.showSegments&&c){let l=0;c.forEachSegment((u,f)=>{const p=new zu([u,f]),g=`${this.formatLength(p)}`;this.segmentStyles.length-1<l&&this.segmentStyles.push(this.segmentStyle.clone());const v=new p3(p.getCoordinateAt(.5));this.segmentStyles[l].setGeometry(v),this.segmentStyles[l].getText().setText(g),i.push(this.segmentStyles[l]),l++})}return a&&(this.labelStyle.setGeometry(o),this.labelStyle.getText().setText(a),i.push(this.labelStyle)),this.tip&&s===Xu.Point&&!this.modify.getOverlay().getSource().getFeatures().length&&(this.tipPoint=r,this.tipStyle.getText().setText(this.tip),i.push(this.tipStyle)),i}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lpe=class aBt extends fw{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(e){this.set("preload",e)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(e){this.set("useInterimTilesOnError",e)}getData(e){return super.getData(e)}},XU=class cBt extends Dm{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?t=e:0==e.getState()?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){lr()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(i){if(-1===i)return 1}else i=t,this.transitionStarts_[e]=i;const r=t-i+1e3/60;return r>=this.transition_?1:V8e(r/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}},NL=class lBt extends XU{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function uBt(){const n=_2(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=kU(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},ZU=class fBt{constructor(e,t,i,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const c=j_(this.targetProj_,this.sourceProj_);this.transformInv_=function(x){const M=x[0]+"/"+x[1];return a[M]||(a[M]=c(x)),a[M]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Oo(r)==Oo(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Oo(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Oo(this.targetProj_.getExtent()):null;const l=v5(i),u=iE(i),f=nE(i),p=tE(i),g=this.transformInv_(l),v=this.transformInv_(u),_=this.transformInv_(f),w=this.transformInv_(p),b=10+(o?Math.max(0,Math.ceil(Math.log2(wm(i)/(o*o*256*256)))):0);if(this.addQuad_(l,u,f,p,g,v,_,w,b),this.wrapsXInSource_){let x=1/0;this.triangles_.forEach(function(M,E,I){x=Math.min(x,M.source[0][0],M.source[1][0],M.source[2][0])}),this.triangles_.forEach(M=>{if(Math.max(M.source[0][0],M.source[1][0],M.source[2][0])-x>this.sourceWorldWidth_/2){const E=[[M.source[0][0],M.source[0][1]],[M.source[1][0],M.source[1][1]],[M.source[2][0],M.source[2][1]]];E[0][0]-x>this.sourceWorldWidth_/2&&(E[0][0]-=this.sourceWorldWidth_),E[1][0]-x>this.sourceWorldWidth_/2&&(E[1][0]-=this.sourceWorldWidth_),E[2][0]-x>this.sourceWorldWidth_/2&&(E[2][0]-=this.sourceWorldWidth_);const I=Math.min(E[0][0],E[1][0],E[2][0]);Math.max(E[0][0],E[1][0],E[2][0])-I<this.sourceWorldWidth_/2&&(M.source=E)}})}a={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,c,l){const u=ku([s,o,a,c]),f=this.sourceWorldWidth_?Oo(u)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&f>.5&&f<1;let v=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(v=Oo(ku([e,t,i,r]))/this.targetWorldWidth_>.25||v),!g&&this.sourceProj_.isGlobal()&&f&&(v=f>.25||v)),!v&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!nl(u,this.maxSourceExtent_))return;let _=0;if(!(v||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(c[0])&&isFinite(c[1])))if(l>0)v=!0;else if(_=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(c[0])&&isFinite(c[1])?0:1),1!=_&&2!=_&&4!=_&&8!=_)return;if(l>0){if(!v){const b=this.transformInv_([(e[0]+i[0])/2,(e[1]+i[1])/2]);let x;x=g?(O6(s[0],p)+O6(a[0],p))/2-O6(b[0],p):(s[0]+a[0])/2-b[0];const M=(s[1]+a[1])/2-b[1];v=x*x+M*M>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const w=[(t[0]+i[0])/2,(t[1]+i[1])/2],b=this.transformInv_(w),x=[(r[0]+e[0])/2,(r[1]+e[1])/2],M=this.transformInv_(x);this.addQuad_(e,t,w,x,s,o,b,M,l-1),this.addQuad_(x,w,i,r,M,b,a,c,l-1)}else{const w=[(e[0]+t[0])/2,(e[1]+t[1])/2],b=this.transformInv_(w),x=[(i[0]+r[0])/2,(i[1]+r[1])/2],M=this.transformInv_(x);this.addQuad_(e,w,x,r,s,b,M,c,l-1),this.addQuad_(w,t,i,x,b,o,a,M,l-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&_)&&this.addTriangle_(e,i,r,s,a,c),0==(14&_)&&this.addTriangle_(e,i,t,s,a,o),_&&(0==(13&_)&&this.addTriangle_(t,r,e,o,c,s),0==(7&_)&&this.addTriangle_(t,r,i,o,c,a))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(t,i,r){const s=t.source;ym(e,s[0]),ym(e,s[1]),ym(e,s[2])}),e}getTriangles(){return this.triangles_}};let JU;const Sd=[];function Ipe(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function eG(n,e){return Math.abs(n[4*e]-210)>2||Math.abs(n[4*e+3]-191.25)>2}function tG(n,e,t,i){const r=$_(t,e,n);let s=roe(e,i,t);const o=e.getMetersPerUnit();void 0!==o&&(s*=o);const a=n.getMetersPerUnit();void 0!==a&&(s/=a);const c=n.getExtent();if(!c||m5(c,r)){const l=roe(n,s,r)/s;isFinite(l)&&l>0&&(s/=l)}return s}function Rpe(n,e,t,i){const r=F0(t);let s=tG(n,e,r,i);return(!isFinite(s)||s<=0)&&WH(t,function(o){return s=tG(n,e,o,i),isFinite(s)&&s>0}),s}function nG(n,e,t,i,r,s,o,a,c,l,u,f){const p=_2(Math.round(t*n),Math.round(t*e),Sd);if(f||(p.imageSmoothingEnabled=!1),0===c.length)return p.canvas;function g(E){return Math.round(E*t)/t}p.scale(t,t),p.globalCompositeOperation="lighter";const v=[1/0,1/0,-1/0,-1/0];c.forEach(function(E,I,k){Wse(v,E.extent)});const _=Oo(v),w=F2(v),b=_2(Math.round(t*_/i),Math.round(t*w/i),Sd);f||(b.imageSmoothingEnabled=!1);const x=t/i;c.forEach(function(E,I,k){const O=E.extent[0]-v[0],R=-(E.extent[3]-v[3]),P=Oo(E.extent),Q=F2(E.extent);E.image.width>0&&E.image.height>0&&b.drawImage(E.image,l,l,E.image.width-2*l,E.image.height-2*l,O*x,R*x,P*x,Q*x)});const M=v5(o);return a.getTriangles().forEach(function(E,I,k){const O=E.source,R=E.target;let P=O[0][0],Q=O[0][1],J=O[1][0],Ce=O[1][1],Ae=O[2][0],G=O[2][1];const ue=g((R[0][0]-M[0])/s),X=g(-(R[0][1]-M[1])/s),le=g((R[1][0]-M[0])/s),de=g(-(R[1][1]-M[1])/s),pe=g((R[2][0]-M[0])/s),Fe=g(-(R[2][1]-M[1])/s),st=P,ze=Q;P=0,Q=0,J-=st,Ce-=ze,Ae-=st,G-=ze;const pt=function x$e(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const c=Math.abs(n[a][i]);c>s&&(s=c,r=a)}if(0===s)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const c=-n[a][i]/n[i][i];for(let l=i;l<e+1;l++)i==l?n[a][l]=0:n[a][l]+=c*n[i][l]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}([[J,Ce,0,0,le-ue],[Ae,G,0,0,pe-ue],[0,0,J,Ce,de-X],[0,0,Ae,G,Fe-X]]);if(pt){if(p.save(),p.beginPath(),function dBt(){if(void 0===JU){const n=_2(6,6,Sd);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Ipe(n,4,5,4,0),Ipe(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;JU=eG(e,0)||eG(e,4)||eG(e,8),lA(n),Sd.push(n.canvas)}return JU}()||!f){p.moveTo(le,de);const kt=4,wt=ue-le,Xt=X-de;for(let un=0;un<kt;un++)p.lineTo(le+g((un+1)*wt/kt),de+g(un*Xt/(kt-1))),un!=kt-1&&p.lineTo(le+g((un+1)*wt/kt),de+g((un+1)*Xt/(kt-1)));p.lineTo(pe,Fe)}else p.moveTo(le,de),p.lineTo(ue,X),p.lineTo(pe,Fe);p.clip(),p.transform(pt[0],pt[2],pt[1],pt[3],ue,X),p.translate(v[0]-st,v[3]-ze),p.scale(i/t,-i/t),p.drawImage(b.canvas,0,0),p.restore()}}),lA(b),Sd.push(b.canvas),u&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(E,I,k){const O=E.target,R=(O[0][0]-M[0])/s,P=-(O[0][1]-M[1])/s,Q=(O[1][0]-M[0])/s,J=-(O[1][1]-M[1])/s,Ce=(O[2][0]-M[0])/s,Ae=-(O[2][1]-M[1])/s;p.beginPath(),p.moveTo(Q,J),p.lineTo(R,P),p.lineTo(Ce,Ae),p.closePath(),p.stroke()}),p.restore()),p.canvas}const bA=class pBt extends XU{constructor(e,t,i,r,s,o,a,c,l,u,f,p){super(s,0,{interpolate:!!p}),this.renderEdges_=void 0!==f&&f,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const g=r.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let _=this.sourceTileGrid_.getExtent();const w=v?h3(g,v):g;if(0===wm(w))return void(this.state=4);const b=e.getExtent();b&&(_=_?h3(_,b):b);const x=r.getResolution(this.wrappedTileCoord_[0]),M=Rpe(e,i,w,x);if(!isFinite(M)||M<=0)return void(this.state=4);if(this.triangulation_=new ZU(e,i,w,_,M*(void 0!==u?u:.5),x),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=t.getZForResolution(M);let I=this.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(I[1]=d1(I[1],_[1],_[3]),I[3]=d1(I[3],_[1],_[3])):I=h3(I,_)),wm(I)){const k=t.getTileRangeForExtentAndZ(I,this.sourceZ_);for(let O=k.minX;O<=k.maxX;O++)for(let R=k.minY;R<=k.maxY;R++){const P=l(this.sourceZ_,O,R,a);P&&this.sourceTiles_.push(P)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&2==t.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=nG(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const i=t.getState();if(0==i||1==i){e++;const r=Ks(t,"change",function(s){const o=t.getState();(2==o||3==o||4==o)&&(na(r),e--,0===e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){0==t.getState()&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(na),this.sourcesListenerKeys_=null}release(){this.canvas_&&(lA(this.canvas_.getContext("2d")),Sd.push(this.canvas_),this.canvas_=null),super.release()}};class Bpe{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function xA(n,e,t,i,r){return void 0!==r?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new Bpe(n,e,t,i)}const iG=Bpe,mBt=class gBt extends PU{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new iG(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!r}getTile(e,t,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let l=a.getSource().getTile(e,t,i,s,o);return 3==l.getState()&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=jc(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!m5(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,c=t.viewState,l=i.getRenderSource(),u=l.getTileGridForProjection(c.projection),f=l.getTilePixelRatio(t.pixelRatio);for(let p=u.getZForResolution(c.resolution);p>=u.getMinZoom();--p){const g=u.getTileCoordForCoordAndZ(r,p),v=l.getTile(p,g[1],g[2],o,a);if(!(v instanceof NL||v instanceof bA)||v instanceof bA&&4===v.getState())return null;if(2!==v.getState())continue;const _=u.getOrigin(p),w=v2(u.getTileSize(p)),b=u.getResolution(p),x=Math.floor(f*((r[0]-_[0])/b-g[1]*w[0])),M=Math.floor(f*((_[1]-r[1])/b-g[2]*w[1])),E=Math.round(f*l.getGutterForProjection(c.projection));return this.getImageData(v.getImage(),x+E,M+E)}return null}loadedTileCallback(e,t,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(e,t,i)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,c=r.rotation,l=e.pixelRatio,u=this.getLayer(),f=u.getSource(),p=f.getRevision(),g=f.getTileGridForProjection(s),v=g.getZForResolution(o,f.zDirection),_=g.getResolution(v);let w=e.extent;const b=e.viewState.resolution,x=f.getTilePixelRatio(l),M=Math.round(Oo(w)/b*l),E=Math.round(F2(w)/b*l),I=i.extent&&M4(i.extent);I&&(w=h3(w,M4(i.extent)));const k=_*M/2/x,O=_*E/2/x,R=[a[0]-k,a[1]-O,a[0]+k,a[1]+O],P=g.getTileRangeForExtentAndZ(w,v),Q={};Q[v]={};const J=this.createLoadedTileFinder(f,s,Q),Ce=this.tmpExtent,Ae=this.tmpTileRange_;this.newTiles_=!1;const G=c?$H(r.center,b,c,e.size):void 0;for(let _t=P.minX;_t<=P.maxX;++_t)for(let pt=P.minY;pt<=P.maxY;++pt){if(c&&!g.tileCoordIntersectsViewport([v,_t,pt],G))continue;const kt=this.getTile(v,_t,pt,e);if(this.isDrawableTile(kt)){const un=nr(this);if(2==kt.getState()){Q[v][kt.tileCoord.toString()]=kt;let _n=kt.inTransition(un);_n&&1!==i.opacity&&(kt.endTransition(un),_n=!1),!this.newTiles_&&(_n||!this.renderedTiles.includes(kt))&&(this.newTiles_=!0)}if(1===kt.getAlpha(un,e.time))continue}const wt=g.getTileCoordChildTileRange(kt.tileCoord,Ae,Ce);let Xt=!1;wt&&(Xt=J(v+1,wt)),Xt||g.forEachTileCoordParentTileRange(kt.tileCoord,J,Ae,Ce)}const ue=_/o*l/x;Hu(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,c,-M/2,-E/2);const X=mE(this.pixelTransform);this.useContainer(t,X,this.getBackground(e));const le=this.context,de=le.canvas;X_(this.inversePixelTransform,this.pixelTransform),Hu(this.tempTransform,M/2,E/2,ue,ue,0,-M/2,-E/2),de.width!=M||de.height!=E?(de.width=M,de.height=E):this.containerReused||le.clearRect(0,0,M,E),I&&this.clipUnrotated(le,e,I),f.getInterpolate()||(le.imageSmoothingEnabled=!1),this.preRender(le,e),this.renderedTiles.length=0;let Fe,st,ze,pe=Object.keys(Q).map(Number);pe.sort(N6),1!==i.opacity||this.containerReused&&!f.getOpaque(e.viewState.projection)?(Fe=[],st=[]):pe=pe.reverse();for(let _t=pe.length-1;_t>=0;--_t){const pt=pe[_t],kt=f.getTilePixelSize(pt,l,s),Xt=g.getResolution(pt)/_,un=kt[0]*Xt*ue,_n=kt[1]*Xt*ue,an=g.getTileCoordForCoordAndZ(v5(R),pt),bi=g.getTileCoordExtent(an),Vt=jc(this.tempTransform,[x*(bi[0]-R[0])/_,x*(R[3]-bi[3])/_]),Pt=x*f.getGutterForProjection(s),wn=Q[pt];for(const ei in wn){const Tn=wn[ei],Cn=Tn.tileCoord,$n=an[1]-Cn[1],yi=Math.round(Vt[0]-($n-1)*un),mr=an[2]-Cn[2],Ss=Math.round(Vt[1]-(mr-1)*_n),Ge=Math.round(Vt[0]-$n*un),Me=Math.round(Vt[1]-mr*_n),It=yi-Ge,yn=Ss-Me,Mn=v===pt,kn=Mn&&1!==Tn.getAlpha(nr(this),e.time);let Mi=!1;if(!kn)if(Fe){ze=[Ge,Me,Ge+It,Me,Ge+It,Me+yn,Ge,Me+yn];for(let Pe=0,nn=Fe.length;Pe<nn;++Pe)if(v!==pt&&pt<st[Pe]){const dn=Fe[Pe];nl([Ge,Me,Ge+It,Me+yn],[dn[0],dn[3],dn[4],dn[7]])&&(Mi||(le.save(),Mi=!0),le.beginPath(),le.moveTo(ze[0],ze[1]),le.lineTo(ze[2],ze[3]),le.lineTo(ze[4],ze[5]),le.lineTo(ze[6],ze[7]),le.moveTo(dn[6],dn[7]),le.lineTo(dn[4],dn[5]),le.lineTo(dn[2],dn[3]),le.lineTo(dn[0],dn[1]),le.clip())}Fe.push(ze),st.push(pt)}else le.clearRect(Ge,Me,It,yn);this.drawTileImage(Tn,e,Ge,Me,It,yn,Pt,Mn),Fe&&!kn?(Mi&&le.restore(),this.renderedTiles.unshift(Tn)):this.renderedTiles.push(Tn),this.updateUsedTiles(e.usedTiles,f,Tn)}}return this.renderedRevision=p,this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!_m(this.renderedExtent_,R),this.renderedExtent_=R,this.renderedPixelRatio=l,this.renderedProjection=s,this.manageTilePyramid(e,f,g,l,s,w,v,u.getPreload()),this.scheduleExpireCache(e,f),this.postRender(le,e),i.extent&&le.restore(),le.imageSmoothingEnabled=!0,X!==de.style.transform&&(de.style.transform=X),this.container}drawTileImage(e,t,i,r,s,o,a,c){const l=this.getTileImage(e);if(!l)return;const u=nr(this),f=t.layerStatesArray[t.layerIndex],p=f.opacity*(c?e.getAlpha(u,t.time):1),g=p!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,i,r,s,o),g&&this.context.restore(),p!==f.opacity?t.animate=!0:c&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(r,s,o){const a=nr(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const r=nr(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,t,i,r,s,o,a,c,l){const u=nr(t);u in e.wantedTiles||(e.wantedTiles[u]={});const f=e.wantedTiles[u],p=e.tileQueue,g=i.getMinZoom(),v=e.viewState.rotation,_=v?$H(e.viewState.center,e.viewState.resolution,v,e.size):void 0;let b,x,M,E,I,k,w=0;for(k=g;k<=a;++k)for(x=i.getTileRangeForExtentAndZ(o,k,x),M=i.getResolution(k),E=x.minX;E<=x.maxX;++E)for(I=x.minY;I<=x.maxY;++I)v&&!i.tileCoordIntersectsViewport([k,E,I],_)||(a-k<=c?(++w,b=t.getTile(k,E,I,r,s),0==b.getState()&&(f[b.getKey()]=!0,p.isKeyQueued(b.getKey())||p.enqueue([b,u,i.getTileCoordCenter(b.tileCoord),M])),void 0!==l&&l(b)):t.useTile(k,E,I,s));t.updateCacheSize(w,s)}},VL=class ABt extends Lpe{constructor(e){super(e)}createRenderer(){return new mBt(this)}},kpe=class vBt{constructor(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Kr(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Kr(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let i,t=0;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Kr(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}};function UL(n,e,t,i){return void 0!==i?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function q5(n,e,t){return n+"/"+e+"/"+t}function ww(n){return q5(n[0],n[1],n[2])}const rG=class bBt extends kpe{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const i=function _Bt(n){return n.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(ww(r.tileCoord)),r.release())})}},MA=[0,0,0],sG=class xBt{constructor(e){let t;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,Kr(function N$e(n,e,t){const i=e||N6;return n.every(function(r,s){if(0===s)return!0;const o=i(n[s-1],r);return!(o>0||t&&0===o)})}(this.resolutions_,function(r,s){return s-r},!0),17),!e.origins)for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(t){if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}else t=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,Kr(this.origins_.length==this.resolutions_.length,20));const i=e.extent;void 0!==i&&!this.origin_&&!this.origins_&&(this.origin_=v5(i)),Kr(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,Kr(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:256,Kr(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(r,s){const o=new iG(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,c=r.maxY;a<=c;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,c=null,l=e[0]-1;for(2===this.zoomFactor_?(o=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);l>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),a=Math.floor(a/2),s=xA(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(c,l,i),t(l,s))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const s=2*e[1],o=2*e[2];return xA(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return xA(s,o,s,o,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),l=Math.floor(s*c),u=Math.floor(o*c);return t<r?xA(l,l,u,u,i):xA(l,Math.floor(c*(s+1))-1,u,Math.floor(c*(o+1))-1,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeExtent(e,t,i){const r=this.getOrigin(e),s=this.getResolution(e),o=v2(this.getTileSize(e),this.tmpSize_);return Th(r[0]+t.minX*o[0]*s,r[1]+t.minY*o[1]*s,r[0]+(t.maxX+1)*o[0]*s,r[1]+(t.maxY+1)*o[1]*s,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,MA);const r=MA[1],s=MA[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,MA),xA(r,MA[1],s,MA[2],i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=v2(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=v2(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r;return Th(o,a,o+s[0]*r,a+s[1]*r,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),c=this.getOrigin(o),l=v2(this.getTileSize(o),this.tmpSize_);let u=a*(e-c[0])/i/l[0],f=a*(c[1]-t)/i/l[1];return r?(u=sE(u,5)-1,f=sE(f,5)-1):(u=rE(u,5),f=rE(f,5)),UL(o,u,f,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),c=v2(this.getTileSize(i),this.tmpSize_);let l=(e-o[0])/a/c[0],u=(o[1]-t)/a/c[1];return r?(l=sE(l,5)-1,u=sE(u,5)-1):(l=rE(l,5),u=rE(u,5)),UL(i,l,u,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){return d1(hE(this.resolutions_,e,t||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Coe(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}};function oG(n){let e=n.getDefaultTileGrid();return e||(e=function SBt(n,e,t,i){return function MBt(n,e,t,i){i=void 0!==i?i:"top-left";const r=Ppe(n,e,t);return new sG({extent:n,origin:A$e(n,i),resolutions:r,tileSize:t})}(GL(n),e,t,i)}(n),n.setDefaultTileGrid(e)),e}function Fpe(n){const e=n||{},t=e.extent||Ea("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Ppe(t,e.maxZoom,e.tileSize,e.maxResolution)};return new sG(i)}function Ppe(n,e,t,i){e=void 0!==e?e:42,t=v2(void 0!==t?t:256);const r=F2(n),s=Oo(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let c=0;c<o;++c)a[c]=i/Math.pow(2,c);return a}function GL(n){let e=(n=Ea(n)).getExtent();if(!e){const t=180*d5.degrees/n.getMetersPerUnit();e=Th(-t,-t,t,t)}return e}class Hpe extends q3{constructor(e,t){super(e),this.tile=t}}const zpe=class EBt extends NU{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&v2(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new rG(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let a,c,l,o=!0;for(let u=i.minX;u<=i.maxX;++u)for(let f=i.minY;f<=i.maxY;++f)c=q5(t,u,f),l=!1,s.containsKey(c)&&(a=s.get(c),l=2===a.getState(),l&&(l=!1!==r(a))),l||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,s){return lr()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:oG(e)}getTileCacheForProjection(e){const t=this.getProjection();return Kr(null===t||Pu(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=v2(r.getTileSize(e),this.tmpSize);return 1==s?o:function lIt(n,e,t){return void 0===t&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=void 0!==t?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=function CBt(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=GL(t);if(!m5(s,r)){const o=Oo(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}return e}(i,e,t)),function wBt(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return!s||s.containsXY(i,r)}(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}};function TBt(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,c){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const u=e.getFullTileRange(o[0]);return Kr(u,55),(u.getHeight()-o[2]-1).toString()})}}class aG extends zpe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===aG.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=nr(t),r=t.getState();let s;1==r?(this.tileLoadingKeys_[i]=!0,s="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=3==r?"tileloaderror":2==r?"tileloadend":void 0),null!=s&&this.dispatchEvent(new Hpe(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=function IBt(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function LBt(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=TBt(n[r],e);return function DBt(n){return 1===n.length?n[0]:function(e,t,i){if(!e)return;const r=function yBt(n){return(n[1]<<n[0])+n[2]}(e),s=O6(r,n.length);return n[s](e,t,i)}}(i)}(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=q5(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const RBt=aG;function kBt(n,e){n.getImage().src=e}const FBt=class BBt extends RBt{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:kBt,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:NL,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Pu(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return!(this.getProjection()&&e&&!Pu(this.getProjection(),e))&&super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Pu(t,e)))return this.tileGrid;const i=nr(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=oG(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Pu(t,e))return this.tileCache;const i=nr(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new rG(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,t,i,r,s,o){const a=[e,t,i],c=this.getTileCoordForTileUrlFunction(a,s),l=c?this.tileUrlFunction(c,r,s):void 0,u=new this.tileClass(a,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener("change",this.handleTileChange.bind(this)),u}getTile(e,t,i,r,s){const o=this.getProjection();if(!o||!s||Pu(o,s))return this.getTileInternal(e,t,i,r,o||s);const a=this.getTileCacheForProjection(s),c=[e,t,i];let l;const u=ww(c);a.containsKey(u)&&(l=a.get(u));const f=this.getKey();if(l&&l.key==f)return l;const p=this.getTileGridForProjection(o),g=this.getTileGridForProjection(s),v=this.getTileCoordForTileUrlFunction(c,s),_=new bA(o,p,s,g,c,v,this.getTilePixelRatio(r),this.getGutter(),(w,b,x,M)=>this.getTileInternal(w,b,x,M,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return _.key=f,l?(_.interimTile=l,_.refreshInterimChain(),a.replace(u,_)):a.set(u,_),_}getTileInternal(e,t,i,r,s){let o=null;const a=q5(e,t,i),c=this.getKey();if(this.tileCache.containsKey(a)){if(o=this.tileCache.get(a),o.key!=c){const l=o;o=this.createTile_(e,t,i,r,s,c),o.interimTile=0==l.getState()?l.interimTile:l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(e,t,i,r,s,c),this.tileCache.set(a,o);return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=Ea(e);if(i){const r=nr(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}},QL=class PBt extends FBt{constructor(e){const t=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",i=void 0!==e.tileGrid?e.tileGrid:Fpe({extent:GL(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0}getGutter(){return this.gutter_}},VBt=class NBt extends fw{constructor(e){super(e=e||{})}},GBt=class UBt extends PU{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,r=e.viewState,s=r.resolution,o=this.getLayer().getSource(),a=e.viewHints;let c=e.extent;if(void 0!==t.extent&&(c=h3(c,M4(t.extent))),!a[0]&&!a[1]&&!G_(c))if(o){const u=o.getImage(c,s,i,r.projection);u&&(this.loadImage(u)?this.image_=u:4===u.getState()&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=jc(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!m5(s,r))return null;const o=this.image_.getExtent(),a=this.getImage(),c=Oo(o),l=Math.floor(a.width*((r[0]-o[0])/c));if(l<0||l>=a.width)return null;const u=F2(o),f=Math.floor(a.height*((o[3]-r[1])/u));return f<0||f>=a.height?null:this.getImageData(a,l,f)}renderFrame(e,t){const i=this.image_,r=i.getExtent(),s=i.getResolution(),o=i.getPixelRatio(),a=e.layerStatesArray[e.layerIndex],c=e.pixelRatio,l=e.viewState,u=l.center,p=c*s/(l.resolution*o),g=e.extent,v=l.resolution,_=l.rotation,w=Math.round(Oo(g)/v*c),b=Math.round(F2(g)/v*c);Hu(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,_,-w/2,-b/2),X_(this.inversePixelTransform,this.pixelTransform);const x=mE(this.pixelTransform);this.useContainer(t,x,this.getBackground(e));const M=this.context,E=M.canvas;E.width!=w||E.height!=b?(E.width=w,E.height=b):this.containerReused||M.clearRect(0,0,w,b);let I=!1,k=!0;if(a.extent){const J=M4(a.extent);k=nl(J,e.extent),I=k&&!td(J,e.extent),I&&this.clipUnrotated(M,e,J)}const O=this.getImage(),R=Hu(this.tempTransform,w/2,b/2,p,p,0,o*(r[0]-u[0])/s,o*(u[1]-r[3])/s);this.renderedResolution=s*c/o;const P=O.width*R[0],Q=O.height*R[3];if(this.getLayer().getSource().getInterpolate()||(M.imageSmoothingEnabled=!1),this.preRender(M,e),k&&P>=.5&&Q>=.5){const J=R[4],Ce=R[5],Ae=a.opacity;let G;1!==Ae&&(G=M.globalAlpha,M.globalAlpha=Ae),M.drawImage(O,0,0,+O.width,+O.height,J,Ce,P,Q),1!==Ae&&(M.globalAlpha=G)}return this.postRender(M,e),I&&M.restore(),M.imageSmoothingEnabled=!0,x!==E.style.transform&&(E.style.transform=x),this.container}},bw=class QBt extends VBt{constructor(e){super(e)}createRenderer(){return new GBt(this)}getData(e){return super.getData(e)}},jBt=class WBt extends K8e{constructor(e,t,i,r,s,o,a){const c=e.getExtent(),l=t.getExtent(),u=l?h3(i,l):i,p=tG(e,t,F0(u),r),v=new ZU(e,t,u,c,.5*p,r),w=o(v.calculateSourceExtent(),p,s),b=w?0:4,x=w?w.getPixelRatio():1;super(i,r,x,b),this.targetProj_=t,this.maxSourceExtent_=c,this.triangulation_=v,this.targetResolution_=r,this.targetExtent_=i,this.sourceImage_=w,this.sourcePixelRatio_=x,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){1==this.state&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(2==e){const t=Oo(this.targetExtent_)/this.targetResolution_,i=F2(this.targetExtent_)/this.targetResolution_;this.canvas_=nG(t,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),0,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=e,this.changed()}load(){if(0==this.state){this.state=1,this.changed();const e=this.sourceImage_.getState();2==e||3==e?this.reproject_():(this.sourceListenerKey_=Ks(this.sourceImage_,"change",function(t){const i=this.sourceImage_.getState();(2==i||3==i)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){na(this.sourceListenerKey_),this.sourceListenerKey_=null}};class $Bt extends q3{constructor(e,t){super(e),this.image=t}}function qBt(n,e){n.getImage().src=e}const XBt=class KBt extends NU{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:void 0===e.interpolate||e.interpolate}),this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();return t&&(e=t[hE(t,e,0)]),e}getImage(e,t,i,r){const s=this.getProjection();if(!s||!r||Pu(s,r))return s&&(r=s),this.getImageInternal(e,t,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Pu(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&_m(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new jBt(s,r,e,t,i,(o,a,c)=>this.getImageInternal(o,a,c,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,r){return lr()}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case 1:this.loading=!0,i="imageloadstart";break;case 2:this.loading=!1,i="imageloadend";break;case 3:this.loading=!1,i="imageloaderror";break;default:return}this.hasListener(i)&&this.dispatchEvent(new $Bt(i,t))}},SA=class ZBt extends XBt{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.context_=_2(1,1),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.hidpi_=void 0===e.hidpi||e.hidpi,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:qBt,this.params_=e.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5}getParams(){return this.params_}getImageInternal(e,t,i,r){if(void 0===this.url_)return null;t=this.findNearestResolution(t),i=this.hidpi_?i:1;const s=this.image_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==t&&s.getPixelRatio()==i&&td(s.getExtent(),e))return s;const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(o,this.params_);const a=((e=e.slice())[0]+e[2])/2,c=(e[1]+e[3])/2;if(1!=this.ratio_){const g=this.ratio_*Oo(e)/2,v=this.ratio_*F2(e)/2;e[0]=a-g,e[1]=c-v,e[2]=a+g,e[3]=c+v}const l=t/i,u=Math.ceil(Oo(e)/l),f=Math.ceil(F2(e)/l);e[0]=a-l*u/2,e[2]=a+l*u/2,e[1]=c-l*f/2,e[3]=c+l*f/2,this.imageSize_[0]=u,this.imageSize_[1]=f;const p=this.getRequestUrl_(e,this.imageSize_,i,r,o);return this.image_=new $It(e,t,i,p,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener("change",this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(e,t,i,r,s){const o=r.getCode().split(/:(?=\d+$)/).pop();s.SIZE=t[0]+","+t[1],s.BBOX=e.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(90*i);const a=this.url_,c=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return c==a&&Kr(!1,50),function YBt(n,e){const t=[];Object.keys(e).forEach(function(r){null!=e[r]&&t.push(r+"="+encodeURIComponent(e[r]))});const i=t.join("&");return n=n.replace(/[?&]$/,""),(n+=n.includes("?")?"&":"?")+i}(c,s)}getUrl(){return this.url_}setImageLoadFunction(e){this.image_=null,this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.image_=null,this.changed()}},JBt=[new VL({visible:!1,properties:new rc({basemap:!0,key:_3.OSM}),source:new class zBt extends QL{constructor(e){let t;t=void 0!==(e=e||{}).attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX,zDirection:e.zDirection})}}}),new VL({visible:!1,properties:new rc({basemap:!0,key:_3.OSMSatellite}),source:new QL({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:19})})];new VL({visible:!1,properties:new rc({basemap:!0,key:_3.Google}),source:new QL({url:"http://mt0.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}"})}),new VL({visible:!1,properties:new rc({basemap:!0,key:_3.GoogleSatellite}),source:new QL({url:"http://mt0.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}"})}),new bw({visible:!1,properties:new rc({basemap:!0,key:_3.Horby1960}),source:new SA({url:"https://maps.geoinfomittskane.se/arcgis/rest/services/sde_orto_DBO_Ortofoto_Hby_1960/ImageServer"})}),new bw({visible:!1,properties:new rc({basemap:!0,key:_3.Horby1940}),source:new SA({url:"https://raster.unikom.se/arcgis/rest/services/Orto/Orto1940_1m_wgs84/ImageServer"})}),new bw({visible:!1,properties:new rc({basemap:!0,key:_3.Horby1975}),source:new SA({url:"https://maps.geoinfomittskane.se/arcgis/rest/services/sde_orto_DBO_Ortofoto_Hby_1975/ImageServer"})}),new bw({visible:!1,properties:new rc({basemap:!0,key:_3.Horby2017}),source:new SA({url:"https://raster.unikom.se/arcgis/rest/services/Orto/Orto2017_16cm_wgs84/ImageServer"})});let lG=(()=>{class n{constructor(t){this.cookieService=t,this.cookieKey="ol-basemap",this.basemap$=new Vs(_3.OSM),this.basemap$.subscribe(()=>this.onChangeBasemap())}onDestroy(){}setBasemap(t){this.basemap$.next(t)}nextBasemap(){const t=Object.values(_3),i=t.indexOf(this.basemap$.value);this.basemap$.next(t[(i+1)%t.length])}initBaseLayers(){this.getStore();return JBt}getBaselayers(){return this.map?this.map.getLayers().getArray().filter(t=>!0===t.getProperties().basemap):[]}onChangeBasemap(){this.getBaselayers().forEach(t=>t.setVisible(t.getProperties().key===this.basemap$.value)),this.setStore()}getStore(){const t=this.cookieService.get(this.cookieKey);if(""===t)return;const i=JSON.parse(t);i in _3&&this.basemap$.next(i)}setStore(){this.cookieService.set(this.cookieKey,JSON.stringify(this.basemap$.value))}}return n.\u0275fac=function(t){return new(t||n)(Xe(U3))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function WL(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement?n:null}function uG(n){return n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Float32Array||n instanceof DataView?n:null}let xw=null;const nkt=[256,256],hG=class ikt extends XU{constructor(e){super(e.tileCoord,0,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null}getSize(){if(this.size_)return this.size_;const e=WL(this.data_);return e?[e.width,e.height]:nkt}getData(){return this.data_}getError(){return this.error_}load(){if(0!==this.state&&3!==this.state)return;this.state=1,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=2,e.changed()}).catch(function(t){e.error_=t,e.state=3,e.changed()})}},fG=class rkt extends hG{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),i=this.targetTileGrid_.getExtent();let r=this.sourceTileGrid_.getExtent();const s=i?h3(t,i):t;if(0===wm(s))return void(this.state=4);const o=e.sourceProj,a=o.getExtent();a&&(r=r?h3(r,a):a);const c=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),l=e.targetProj,u=Rpe(o,l,s,c);if(!isFinite(u)||u<=0)return void(this.state=4);if(this.triangulation_=new ZU(o,l,s,r,u*(void 0!==e.errorThreshold?e.errorThreshold:.5),c),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=this.sourceTileGrid_.getZForResolution(u);let p=this.triangulation_.calculateSourceExtent();if(r&&(o.canWrapX()?(p[1]=d1(p[1],r[1],r[3]),p[3]=d1(p[3],r[1],r[3])):p=h3(p,r)),wm(p)){const g=this.sourceTileGrid_.getTileRangeForExtentAndZ(p,this.sourceZ_),v=e.getTileFunction;for(let _=g.minX;_<=g.maxX;_++)for(let w=g.minY;w<=g.maxY;w++){const b=v(this.sourceZ_,_,w,this.pixelRatio_);b&&this.sourceTiles_.push(b)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{if(!t||2!==t.getState())return;const i=t.getSize(),r=this.gutter_;let s;s=uG(t.getData())||function tkt(n){xw||(xw=_2(n.width,n.height,void 0,{willReadFrequently:!0}));const e=xw.canvas,t=n.width;e.width!==t&&(e.width=t);const i=n.height;return e.height!==i&&(e.height=i),xw.drawImage(n,t,i),xw.getImageData(0,0,t,i).data}(WL(t.getData()));const a=[i[0]+2*r,i[1]+2*r],c=s instanceof Float32Array,l=a[0]*a[1],u=c?Float32Array:Uint8Array,f=new u(s.buffer),p=u.BYTES_PER_ELEMENT,g=p*f.length/l,v=f.byteLength/a[1],_=Math.floor(v/p/a[0]),w=l*_;let b=f;if(f.length!==w){b=new u(w);let x=0,M=0;const E=a[0]*_;for(let I=0;I<a[1];++I){for(let k=0;k<E;++k)b[x++]=f[M+k];M+=v/p}}e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),data:new Uint8Array(b.buffer),dataType:u,bytesPerPixel:g,pixelSize:a})}),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let l,u;const f=e[0].bytesPerPixel;for(let g=Math.ceil(f/3)-1;g>=0;--g){const v=[];for(let E=0,I=e.length;E<I;++E){const k=e[E],O=k.data,R=k.pixelSize,P=R[0],Q=R[1],J=_2(P,Q,Sd),Ce=J.createImageData(P,Q),Ae=Ce.data;let G=3*g;for(let ue=0,X=Ae.length;ue<X;ue+=4)Ae[ue]=O[G],Ae[ue+1]=O[G+1],Ae[ue+2]=O[G+2],Ae[ue+3]=255,G+=f;J.putImageData(Ce,0,0),v.push({extent:k.extent,image:J.canvas})}const _=nG(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,c,this.triangulation_,v,this.gutter_,!1,!1);for(let E=0,I=v.length;E<I;++E){const O=v[E].image.getContext("2d");lA(O),Sd.push(O.canvas)}const w=_.getContext("2d"),b=w.getImageData(0,0,_.width,_.height);lA(w),Sd.push(_),l||(u=new Uint8Array(f*b.width*b.height),l=new e[0].dataType(u.buffer));const x=b.data;let M=3*g;for(let E=0,I=x.length;E<I;E+=4)255===x[E+3]?(u[M]=x[E],u[M+1]=x[E+1],u[M+2]=x[E+2]):(u[M]=0,u[M+1]=0,u[M+2]=0),M+=f}this.reprojData_=l,this.reprojSize_=[Math.round(r*this.pixelRatio_),Math.round(s*this.pixelRatio_)],this.state=2}this.changed()}load(){if(0!==this.state&&3!==this.state)return;this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const i=t.getState();if(0!==i&&1!==i)return;e++;const r=Ks(t,"change",function(){const s=t.getState();(2==s||3==s||4==s)&&(na(r),e--,0===e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t){0==t.getState()&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(na),this.sourcesListenerKeys_=null}},okt=class skt extends zpe{constructor(e){const t=void 0===e.projection?"EPSG:3857":e.projection;let i=e.tileGrid;void 0===i&&t&&(i=Fpe({extent:GL(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:i,opaque:e.opaque,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.tileSize_=e.tileSize?v2(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=void 0===e.bandCount?4:e.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const t=this.getTileGrid();return t?v2(t.getTileSize(e)):[256,256]}getGutterForProjection(e){const t=this.getProjection();return!t||Pu(t,e)?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,t,i,r,s){const o=this.getTileCacheForProjection(r),a=q5(e,t,i);if(o.containsKey(a)){const w=o.get(a);if(w&&w.key==this.getKey())return w}const c=this.getTileGrid(),l=Math.max.apply(null,c.getResolutions().map((w,b)=>{const x=v2(c.getTileSize(b)),M=this.getTileSize(b);return Math.max(M[0]/x[0],M[1]/x[1])})),u=this.getTileGridForProjection(s),f=this.getTileGridForProjection(r),p=[e,t,i],g=this.getTileCoordForTileUrlFunction(p,r),v=Object.assign({sourceProj:s,sourceTileGrid:u,targetProj:r,targetTileGrid:f,tileCoord:p,wrappedTileCoord:g,pixelRatio:l,gutter:this.getGutterForProjection(s),getTileFunction:(w,b,x,M)=>this.getTile(w,b,x,M,s)},this.tileOptions),_=new fG(v);return _.key=this.getKey(),_}getTile(e,t,i,r,s){const o=this.getProjection();if(o&&s&&!Pu(o,s))return this.getReprojTile_(e,t,i,s,o);const a=this.getTileSize(e),c=q5(e,t,i);if(this.tileCache.containsKey(c))return this.tileCache.get(c);const l=this.loader_,f=Object.assign({tileCoord:[e,t,i],loader:function u(){return function U$e(n){return function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}()}(function(){return l(e,t,i)})},size:a},this.tileOptions),p=new hG(f);return p.key=this.getKey(),p.addEventListener("change",this.handleTileChange_),this.tileCache.set(c,p),p}handleTileChange_(e){const t=e.target,i=nr(t),r=t.getState();let s;1==r?(this.tileLoadingKeys_[i]=!0,s="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=3==r?"tileloaderror":2==r?"tileloadend":void 0),s&&this.dispatchEvent(new Hpe(s,t))}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Pu(t,e)))return this.tileGrid;const i=nr(e);return i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=oG(e)),this.tileGridForProjection_[i]}setTileGridForProjection(e,t){const i=Ea(e);if(i){const r=nr(i);r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=t)}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Pu(t,e))return this.tileCache;const i=nr(e);return i in this.tileCacheForProjection_||(this.tileCacheForProjection_[i]=new rG(.1)),this.tileCacheForProjection_[i]}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection_){const s=this.tileCacheForProjection_[r];s.expireCache(s==i?t:{})}}clear(){super.clear();for(const e in this.tileCacheForProjection_)this.tileCacheForProjection_[e].clear()}};var Pi=ae(6945);const Ope=new Map;function v8(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>Ope.set(t,e))}function Npe(n){return dG.apply(this,arguments)}function dG(){return dG=(0,wi.Z)(function*(n){const e=Ope.get(n.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${n.Compression}`);return new(yield e())(n)}),dG.apply(this,arguments)}v8([void 0,1],()=>ae.e(616).then(ae.bind(ae,616)).then(n=>n.default)),v8(5,()=>ae.e(227).then(ae.bind(ae,8227)).then(n=>n.default)),v8(6,()=>{throw new Error("old style JPEG compression is not supported.")}),v8(7,()=>ae.e(310).then(ae.bind(ae,1310)).then(n=>n.default)),v8([8,32946],()=>Promise.all([ae.e(338),ae.e(274)]).then(ae.bind(ae,2274)).then(n=>n.default)),v8(32773,()=>ae.e(503).then(ae.bind(ae,6503)).then(n=>n.default)),v8(34887,()=>Promise.all([ae.e(338),ae.e(547)]).then(ae.bind(ae,3547)).then(n=>n.default)),v8(50001,()=>ae.e(363).then(ae.bind(ae,9363)).then(n=>n.default));const akt=typeof navigator<"u"&&navigator.hardwareConcurrency||2;function Da(n){return(e,...t)=>Vpe(n,e,t)}function EA(n,e){return Da(pG(n,e).get)}const{apply:Vpe,getOwnPropertyDescriptor:pG,getPrototypeOf:jL,ownKeys:hkt}=Reflect,{iterator:Cw,toStringTag:fkt}=(Proxy,Symbol),$L=Object,{create:gG,defineProperty:dkt}=$L,mG=$L.prototype,KL=(mG.__lookupGetter__&&Da(mG.__lookupGetter__),$L.hasOwn||Da(mG.hasOwnProperty),Array.prototype),Gpe=(Da(KL.join),Da(KL.push),Da(KL.toLocaleString),KL[Cw]),gkt=Da(Gpe),AG=(Math,ArrayBuffer),Qpe=AG.prototype,Wpe=(Da(Qpe.slice),EA(Qpe,"byteLength"),typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null),y3=(Wpe&&EA(Wpe.prototype,"byteLength"),jL(Uint8Array)).prototype,TA=(Da(y3.keys),Da(y3.values),Da(y3.entries),Da(y3.set),Da(y3.reverse),Da(y3.fill),Da(y3.copyWithin),Da(y3.sort),Da(y3.slice),Da(y3.subarray),EA(y3,"buffer"),EA(y3,"byteOffset"),EA(y3,"length"),EA(y3,fkt),Uint16Array,Uint32Array),vkt=Float32Array,Mw=jL([][Cw]()),$pe=Da(Mw.next),_kt=Da(function*(){}().next),ykt=jL(Mw),Kpe=DataView.prototype,wkt=Da(Kpe.getUint16),qpe=(Da(Kpe.setUint16),TypeError,RangeError,WeakSet.prototype),vG=(Da(qpe.add),Da(qpe.has),WeakMap),_G=vG.prototype,Xpe=Da(_G.get),xkt=(Da(_G.has),Da(_G.set)),Ype=new vG,Ckt=gG(null,{next:{value:function(){const e=Xpe(Ype,this);return $pe(e)}},[Cw]:{value:function(){return this}}}),Zpe=new vG,Jpe=gG(ykt,{next:{value:function(){const e=Xpe(Zpe,this);return _kt(e)},writable:!0,configurable:!0}});for(const n of hkt(Mw))"next"!==n&&dkt(Jpe,n,pG(Mw,n));const e5e=new AG(4),t5e=new vkt(e5e),n5e=new TA(e5e),Oh=new TA(512),Nh=new TA(512);for(let n=0;n<256;++n){const e=n-127;e<-27?(Oh[n]=0,Oh[256|n]=32768,Nh[n]=24,Nh[256|n]=24):e<-14?(Oh[n]=1024>>-e-14,Oh[256|n]=1024>>-e-14|32768,Nh[n]=-e-1,Nh[256|n]=-e-1):e<=15?(Oh[n]=e+15<<10,Oh[256|n]=e+15<<10|32768,Nh[n]=13,Nh[256|n]=13):e<128?(Oh[n]=31744,Oh[256|n]=64512,Nh[n]=24,Nh[256|n]=24):(Oh[n]=31744,Oh[256|n]=64512,Nh[n]=13,Nh[256|n]=13)}const yG=new TA(2048),LA=new TA(64),i5e=new TA(64);for(let n=1;n<1024;++n){let e=n<<13,t=0;for(;0==(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,yG[n]=e|t}for(let n=1024;n<2048;++n)yG[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)LA[n]=n<<23;LA[31]=1199570944,LA[32]=2147483648;for(let n=33;n<63;++n)LA[n]=2147483648+(n-32<<23);LA[63]=3347054592;for(let n=1;n<64;++n)32!==n&&(i5e[n]=1024);function r5e(n,e,...t){return function Skt(n){const e=n>>10;return n5e[0]=yG[i5e[e]+(1023&n)]+LA[e],t5e[0]}(wkt(n,e,...function Mkt(n){if(n[Cw]===Gpe&&Mw.next===$pe)return n;const e=gG(Ckt);return xkt(Ype,e,gkt(n)),e}(t)))}var wG=ae(4321),Ekt=ae(7257);function qL(n,e,t,i=1){return new(Object.getPrototypeOf(n).constructor)(e*t*i)}function DA(n,e,t){return(1-t)*n+t*e}function Gkt(n,e,t){let i=0;for(let r=e;r<t;++r)i+=n[r];return i}function bG(n,e,t){switch(n){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(8===e)return new Int8Array(t);if(16===e)return new Int16Array(t);if(32===e)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t)}}throw Error("Unsupported data format/bitsPerSample")}const s5e=class jkt{constructor(e,t,i,r,s,o){this.fileDirectory=e,this.geoKeys=t,this.dataView=i,this.littleEndian=r,this.tiles=s?{}:null,this.isTiled=!e.StripOffsets;const a=e.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const i=this.fileDirectory.BitsPerSample[e];switch(this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1){case 1:if(i<=8)return DataView.prototype.getUint8;if(i<=16)return DataView.prototype.getUint16;if(i<=32)return DataView.prototype.getUint32;break;case 2:if(i<=8)return DataView.prototype.getInt8;if(i<=16)return DataView.prototype.getInt16;if(i<=32)return DataView.prototype.getInt32;break;case 3:switch(i){case 16:return function(r,s){return r5e(this,r,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){return bG(this.getSampleFormat(e),this.getBitsPerSample(e),t)}getTileOrStrip(e,t,i,r,s){var o=this;return(0,wi.Z)(function*(){const a=Math.ceil(o.getWidth()/o.getTileWidth()),c=Math.ceil(o.getHeight()/o.getTileHeight());let l;const{tiles:u}=o;let f,p;1===o.planarConfiguration?l=t*a+e:2===o.planarConfiguration&&(l=i*a*c+t*a+e),o.isTiled?(f=o.fileDirectory.TileOffsets[l],p=o.fileDirectory.TileByteCounts[l]):(f=o.fileDirectory.StripOffsets[l],p=o.fileDirectory.StripByteCounts[l]);const g=(yield o.source.fetch([{offset:f,length:p}],s))[0];let v;return null!==u&&u[l]?v=u[l]:(v=(0,wi.Z)(function*(){let _=yield r.decode(o.fileDirectory,g);const w=o.getSampleFormat(),b=o.getBitsPerSample();return function Qkt(n,e){return!((1===n||2===n)&&e<=32&&e%8==0||3===n&&(16===e||32===e||64===e))}(w,b)&&(_=function Wkt(n,e,t,i,r,s,o){const a=new DataView(n),l=2===t?1:i,u=bG(e,r,2===t?o*s:o*s*i),f=parseInt("1".repeat(r),2);if(1===e){let p;p=1===t?i*r:r;let g=s*p;0!=(7&g)&&(g=g+7&-8);for(let v=0;v<o;++v){const _=v*g;for(let w=0;w<s;++w){const b=_+w*l*r;for(let x=0;x<l;++x){const M=b+x*r,E=(v*s+w)*l+x,I=Math.floor(M/8),k=M%8;if(k+r<=8)u[E]=a.getUint8(I)>>8-r-k&f;else if(k+r<=16)u[E]=a.getUint16(I)>>16-r-k&f;else if(k+r<=24){const O=a.getUint16(I)<<8|a.getUint8(I+2);u[E]=O>>24-r-k&f}else u[E]=a.getUint32(I)>>32-r-k&f}}}}return u.buffer}(_,w,o.planarConfiguration,o.getSamplesPerPixel(),b,o.getTileWidth(),o.getBlockHeight(t))),_})(),null!==u&&(u[l]=v)),{x:e,y:t,sample:i,data:yield v}})()}_readRaster(e,t,i,r,s,o,a,c,l){var u=this;return(0,wi.Z)(function*(){const f=u.getTileWidth(),p=u.getTileHeight(),g=u.getWidth(),v=u.getHeight(),_=Math.max(Math.floor(e[0]/f),0),w=Math.min(Math.ceil(e[2]/f),Math.ceil(g/f)),b=Math.max(Math.floor(e[1]/p),0),x=Math.min(Math.ceil(e[3]/p),Math.ceil(v/p)),M=e[2]-e[0];let E=u.getBytesPerPixel();const I=[],k=[];for(let P=0;P<t.length;++P)I.push(1===u.planarConfiguration?Gkt(u.fileDirectory.BitsPerSample,0,t[P])/8:0),k.push(u.getReaderForSample(t[P]));const O=[],{littleEndian:R}=u;for(let P=b;P<x;++P)for(let Q=_;Q<w;++Q)for(let J=0;J<t.length;++J){const Ce=J,Ae=t[J];2===u.planarConfiguration&&(E=u.getSampleByteSize(J));const G=u.getTileOrStrip(Q,P,Ae,s,l).then(ue=>{const le=new DataView(ue.data),de=u.getBlockHeight(ue.y),pe=ue.y*p,Fe=ue.x*f,ze=(ue.x+1)*f,_t=k[Ce],pt=Math.min(de,de-(pe+de-e[3]),v-pe),kt=Math.min(f,f-(ze-e[2]),g-Fe);for(let wt=Math.max(0,e[1]-pe);wt<pt;++wt)for(let Xt=Math.max(0,e[0]-Fe);Xt<kt;++Xt){const _n=_t.call(le,(wt*f+Xt)*E+I[Ce],R);let an;r?(an=(wt+pe-e[1])*M*t.length+(Xt+Fe-e[0])*t.length+Ce,i[an]=_n):(an=(wt+pe-e[1])*M+Xt+Fe-e[0],i[Ce][an]=_n)}});O.push(G)}if(yield Promise.all(O),o&&e[2]-e[0]!==o||a&&e[3]-e[1]!==a){let P;return P=r?function Ukt(n,e,t,i,r,s,o="nearest"){switch(o.toLowerCase()){case"nearest":return function Nkt(n,e,t,i,r,s){const o=e/i,a=t/r,c=qL(n,i,r,s);for(let l=0;l<r;++l){const u=Math.min(Math.round(a*l),t-1);for(let f=0;f<i;++f){const p=Math.min(Math.round(o*f),e-1);for(let g=0;g<s;++g)c[l*i*s+f*s+g]=n[u*e*s+p*s+g]}}return c}(n,e,t,i,r,s);case"bilinear":case"linear":return function Vkt(n,e,t,i,r,s){const o=e/i,a=t/r,c=qL(n,i,r,s);for(let l=0;l<r;++l){const u=a*l,f=Math.floor(u),p=Math.min(Math.ceil(u),t-1);for(let g=0;g<i;++g){const v=o*g,_=v%1,w=Math.floor(v),b=Math.min(Math.ceil(v),e-1);for(let x=0;x<s;++x){const I=n[p*e*s+w*s+x],k=n[p*e*s+b*s+x],O=DA(DA(n[f*e*s+w*s+x],n[f*e*s+b*s+x],_),DA(I,k,_),u%1);c[l*i*s+g*s+x]=O}}}return c}(n,e,t,i,r,s);default:throw new Error(`Unsupported resampling method: '${o}'`)}}(i,e[2]-e[0],e[3]-e[1],o,a,t.length,c):function Okt(n,e,t,i,r,s="nearest"){switch(s.toLowerCase()){case"nearest":return function Hkt(n,e,t,i,r){const s=e/i,o=t/r;return n.map(a=>{const c=qL(a,i,r);for(let l=0;l<r;++l){const u=Math.min(Math.round(o*l),t-1);for(let f=0;f<i;++f){const p=Math.min(Math.round(s*f),e-1);c[l*i+f]=a[u*e+p]}}return c})}(n,e,t,i,r);case"bilinear":case"linear":return function zkt(n,e,t,i,r){const s=e/i,o=t/r;return n.map(a=>{const c=qL(a,i,r);for(let l=0;l<r;++l){const u=o*l,f=Math.floor(u),p=Math.min(Math.ceil(u),t-1);for(let g=0;g<i;++g){const v=s*g,_=v%1,w=Math.floor(v),b=Math.min(Math.ceil(v),e-1),E=a[p*e+w],I=a[p*e+b],k=DA(DA(a[f*e+w],a[f*e+b],_),DA(E,I,_),u%1);c[l*i+g]=k}}return c})}(n,e,t,i,r);default:throw new Error(`Unsupported resampling method: '${s}'`)}}(i,e[2]-e[0],e[3]-e[1],o,a,c),P.width=o,P.height=a,P}return i.width=o||e[2]-e[0],i.height=a||e[3]-e[1],i})()}readRasters({window:e,samples:t=[],interleave:i,pool:r=null,width:s,height:o,resampleMethod:a,fillValue:c,signal:l}={}){var u=this;return(0,wi.Z)(function*(){const f=e||[0,0,u.getWidth(),u.getHeight()];if(f[0]>f[2]||f[1]>f[3])throw new Error("Invalid subsets");const v=(f[2]-f[0])*(f[3]-f[1]),_=u.getSamplesPerPixel();if(t&&t.length){for(let M=0;M<t.length;++M)if(t[M]>=_)return Promise.reject(new RangeError(`Invalid sample index '${t[M]}'.`))}else for(let M=0;M<_;++M)t.push(M);let w;if(i)w=bG(u.fileDirectory.SampleFormat?Math.max.apply(null,u.fileDirectory.SampleFormat):1,Math.max.apply(null,u.fileDirectory.BitsPerSample),v*t.length),c&&w.fill(c);else{w=[];for(let M=0;M<t.length;++M){const E=u.getArrayForSample(t[M],v);Array.isArray(c)&&M<c.length?E.fill(c[M]):c&&!Array.isArray(c)&&E.fill(c),w.push(E)}}const b=r||(yield Npe(u.fileDirectory));return yield u._readRaster(f,t,w,i,b,s,o,a,l)})()}readRGB({window:e,interleave:t=!0,pool:i=null,width:r,height:s,resampleMethod:o,enableAlpha:a=!1,signal:c}={}){var l=this;return(0,wi.Z)(function*(){const u=e||[0,0,l.getWidth(),l.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const f=l.fileDirectory.PhotometricInterpretation;if(f===Pi.Ie.RGB){let x=[0,1,2];if(l.fileDirectory.ExtraSamples!==Pi.pd.Unspecified&&a){x=[];for(let M=0;M<l.fileDirectory.BitsPerSample.length;M+=1)x.push(M)}return l.readRasters({window:e,interleave:t,samples:x,pool:i,width:r,height:s,resampleMethod:o,signal:c})}let p;switch(f){case Pi.Ie.WhiteIsZero:case Pi.Ie.BlackIsZero:case Pi.Ie.Palette:p=[0];break;case Pi.Ie.CMYK:p=[0,1,2,3];break;case Pi.Ie.YCbCr:case Pi.Ie.CIELab:p=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const g={window:u,interleave:!0,samples:p,pool:i,width:r,height:s,resampleMethod:o,signal:c},{fileDirectory:v}=l,_=yield l.readRasters(g),w=2**l.fileDirectory.BitsPerSample[0];let b;switch(f){case Pi.Ie.WhiteIsZero:b=function Tkt(n,e){const{width:t,height:i}=n,r=new Uint8Array(t*i*3);let s;for(let o=0,a=0;o<n.length;++o,a+=3)s=256-n[o]/e*256,r[a]=s,r[a+1]=s,r[a+2]=s;return r}(_,w);break;case Pi.Ie.BlackIsZero:b=function Lkt(n,e){const{width:t,height:i}=n,r=new Uint8Array(t*i*3);let s;for(let o=0,a=0;o<n.length;++o,a+=3)s=n[o]/e*256,r[a]=s,r[a+1]=s,r[a+2]=s;return r}(_,w);break;case Pi.Ie.Palette:b=function Dkt(n,e){const{width:t,height:i}=n,r=new Uint8Array(t*i*3),s=e.length/3,o=e.length/3*2;for(let a=0,c=0;a<n.length;++a,c+=3){const l=n[a];r[c]=e[l]/65536*256,r[c+1]=e[l+s]/65536*256,r[c+2]=e[l+o]/65536*256}return r}(_,v.ColorMap);break;case Pi.Ie.CMYK:b=function Ikt(n){const{width:e,height:t}=n,i=new Uint8Array(e*t*3);for(let r=0,s=0;r<n.length;r+=4,s+=3){const a=n[r+1],c=n[r+2],l=n[r+3];i[s]=(255-n[r])/256*255*((255-l)/256),i[s+1]=(255-a)/256*255*((255-l)/256),i[s+2]=(255-c)/256*255*((255-l)/256)}return i}(_);break;case Pi.Ie.YCbCr:b=function Rkt(n){const{width:e,height:t}=n,i=new Uint8ClampedArray(e*t*3);for(let r=0,s=0;r<n.length;r+=3,s+=3){const o=n[r],a=n[r+1],c=n[r+2];i[s]=o+1.402*(c-128),i[s+1]=o-.34414*(a-128)-.71414*(c-128),i[s+2]=o+1.772*(a-128)}return i}(_);break;case Pi.Ie.CIELab:b=function Pkt(n){const{width:e,height:t}=n,i=new Uint8Array(e*t*3);for(let r=0,s=0;r<n.length;r+=3,s+=3){let p,g,v,l=(n[r+0]+16)/116,u=(n[r+1]<<24>>24)/500+l,f=l-(n[r+2]<<24>>24)/200;u=.95047*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),l=1*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),f=1.08883*(f*f*f>.008856?f*f*f:(f-16/116)/7.787),p=3.2406*u+-1.5372*l+-.4986*f,g=-.9689*u+1.8758*l+.0415*f,v=.0557*u+-.204*l+1.057*f,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,g=g>.0031308?1.055*g**(1/2.4)-.055:12.92*g,v=v>.0031308?1.055*v**(1/2.4)-.055:12.92*v,i[s]=255*Math.max(0,Math.min(1,p)),i[s+1]=255*Math.max(0,Math.min(1,g)),i[s+2]=255*Math.max(0,Math.min(1,v))}return i}(_);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const x=new Uint8Array(b.length/3),M=new Uint8Array(b.length/3),E=new Uint8Array(b.length/3);for(let I=0,k=0;I<b.length;I+=3,++k)x[k]=b[I],M[k]=b[I+1],E[k]=b[I+2];b=[x,M,E]}return b.width=_.width,b.height=_.height,b})()}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;let r=Ekt(this.fileDirectory.GDAL_METADATA,"Item");r=r.filter(null===e?s=>void 0===wG(s,"sample"):s=>Number(wG(s,"sample"))===e);for(let s=0;s<r.length;++s){const o=r[s];t[wG(o,"name")]=o.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,i=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(i)return[i[0],i[5],i[10]];if(e){const[r,s,o]=e.getResolution();return[r*e.getWidth()/this.getWidth(),s*e.getHeight()/this.getHeight(),o*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(){const e=this.getOrigin(),t=this.getResolution(),i=e[0],r=e[1],s=i+t[0]*this.getWidth(),o=r+t[1]*this.getHeight();return[Math.min(i,s),Math.min(r,o),Math.max(i,s),Math.max(r,o)]}};class $kt{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const i=this.getUint32(e,t),r=this.getUint32(e+4,t);let s;if(t){if(s=i+2**32*r,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*i+r,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(e,t){let i=0;const r=(128&this._dataView.getUint8(e+(t?7:0)))>0;let s=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(e+(t?o:7-o));r&&(s?0!==a&&(a=255&~(a-1),s=!1):a=255&~a),i+=a*256**o}return r&&(i=-i),i}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return r5e(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class Kkt{constructor(e,t,i,r){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=i,this._bigTiff=r}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),i=this.readUint32(e+4);let r;if(this._littleEndian){if(r=t+2**32*i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(r=2**32*t+i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}readInt64(e){let t=0;const i=(128&this._dataView.getUint8(e+(this._littleEndian?7:0)))>0;let r=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(e+(this._littleEndian?s:7-s));i&&(r?0!==o&&(o=255&~(o-1),r=!1):o=255&~o),t+=o*256**s}return i&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}function a5e(n){if(typeof Object.fromEntries<"u")return Object.fromEntries(n);const e={};for(const[t,i]of n)e[t.toLowerCase()]=i;return e}function qkt(n){const e=n.split("\r\n").map(t=>{const i=t.split(":").map(r=>r.trim());return i[0]=i[0].toLowerCase(),i});return a5e(e)}function xG(n){let e,t,i;return n&&([,e,t,i]=n.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),t=parseInt(t,10),i=parseInt(i,10)),{start:e,end:t,total:i}}class CG{fetch(e,t){var i=this;return(0,wi.Z)(function*(){return Promise.all(e.map(r=>i.fetchSlice(r,t)))})()}fetchSlice(e){return(0,wi.Z)(function*(){throw new Error(`fetching of slice ${e} not possible, not implemented`)})()}get fileSize(){return null}close(){return(0,wi.Z)(function*(){})()}}class Zkt extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"==typeof this.onEviction)for(const[t,i]of e)this.onEviction(t,i.value)}_deleteIfExpired(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const i=t.get(e);return this._getItemValue(e,i)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,i]=e;this.cache.has(t)||!1===this._deleteIfExpired(t,i)&&(yield e)}for(const e of this.cache){const[t,i]=e;!1===this._deleteIfExpired(t,i)&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:i=this.maxAge}={}){const r="number"==typeof i&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:r}):this._set(e,{value:t,expiry:r})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],i=t.length-e;i<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(i>0&&this._emitEvictions(t.slice(0,i)),this.oldCache=new Map(t.slice(i)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,i]=e;!1===this._deleteIfExpired(t,i)&&(yield[t,i.value])}for(const e of this.oldCache){const[t,i]=e;this.cache.has(t)||!1===this._deleteIfExpired(t,i)&&(yield[t,i.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const i=e[t],[r,s]=i;!1===this._deleteIfExpired(r,s)&&(yield[r,s.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const i=e[t],[r,s]=i;this.cache.has(r)||!1===this._deleteIfExpired(r,s)&&(yield[r,s.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[i,r]of this.entriesAscending())e.call(t,r,i,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}function MG(){return MG=(0,wi.Z)(function*(n){return new Promise(e=>setTimeout(e,n))}),MG.apply(this,arguments)}class IA extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,IA),this.name="AbortError"}}class iFt extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const rFt=iFt;class sFt{constructor(e,t,i=null){this.offset=e,this.length=t,this.data=i}get top(){return this.offset+this.length}}class c5e{constructor(e,t,i){this.offset=e,this.length=t,this.blockIds=i}}class oFt extends CG{constructor(e,{blockSize:t=65536,cacheSize:i=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new Zkt({maxSize:i,onEviction:(r,s)=>{this.evictedBlocks.set(r,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}fetch(e,t){var i=this;return(0,wi.Z)(function*(){const r=[],s=[],o=[];i.evictedBlocks.clear();for(const{offset:g,length:v}of e){let _=g+v;const{fileSize:w}=i;null!==w&&(_=Math.min(_,w));for(let x=Math.floor(g/i.blockSize)*i.blockSize;x<_;x+=i.blockSize){const M=Math.floor(x/i.blockSize);!i.blockCache.has(M)&&!i.blockRequests.has(M)&&(i.blockIdsToFetch.add(M),s.push(M)),i.blockRequests.has(M)&&r.push(i.blockRequests.get(M)),o.push(M)}}yield function tFt(n){return MG.apply(this,arguments)}(),i.fetchBlocks(t);const a=[];for(const g of s)i.blockRequests.has(g)&&a.push(i.blockRequests.get(g));yield Promise.allSettled(r),yield Promise.allSettled(a);const c=[],l=o.filter(g=>i.abortedBlockIds.has(g)||!i.blockCache.has(g));if(l.forEach(g=>i.blockIdsToFetch.add(g)),l.length>0&&t&&!t.aborted){i.fetchBlocks(null);for(const g of l){const v=i.blockRequests.get(g);if(!v)throw new Error(`Block ${g} is not in the block requests`);c.push(v)}yield Promise.allSettled(c)}if(t&&t.aborted)throw new IA("Request was aborted");const u=o.map(g=>i.blockCache.get(g)||i.evictedBlocks.get(g)),f=u.filter(g=>!g);if(f.length)throw new rFt(f,"Request failed");const p=new Map(function nFt(n,e){const t=Array.isArray(n)?n:Array.from(n),i=Array.isArray(e)?e:Array.from(e);return t.map((r,s)=>[r,i[s]])}(o,u));return i.readSliceData(e,p)})()}fetchBlocks(e){var t=this;if(this.blockIdsToFetch.size>0){const i=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(i,e);for(let s=0;s<i.length;++s){const o=i[s];for(const a of o.blockIds)this.blockRequests.set(a,(0,wi.Z)(function*(){try{const c=(yield r)[s],l=a*t.blockSize,u=l-c.offset,f=Math.min(u+t.blockSize,c.data.byteLength),p=c.data.slice(u,f),g=new sFt(l,p.byteLength,p,a);t.blockCache.set(a,g),t.abortedBlockIds.delete(a)}catch(c){if("AbortError"!==c.name)throw c;c.signal=e,t.blockCache.delete(a),t.abortedBlockIds.add(a)}finally{t.blockRequests.delete(a)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort((o,a)=>o-a);if(0===t.length)return[];let i=[],r=null;const s=[];for(const o of t)null===r||r+1===o?(i.push(o),r=o):(s.push(new c5e(i[0]*this.blockSize,i.length*this.blockSize,i)),i=[o],r=o);return s.push(new c5e(i[0]*this.blockSize,i.length*this.blockSize,i)),s}readSliceData(e,t){return e.map(i=>{let r=i.offset+i.length;null!==this.fileSize&&(r=Math.min(this.fileSize,r));const s=Math.floor(i.offset/this.blockSize),o=Math.floor(r/this.blockSize),a=new ArrayBuffer(i.length),c=new Uint8Array(a);for(let l=s;l<=o;++l){const u=t.get(l),f=u.offset-i.offset;let _,g=0,v=0;f<0?g=-f:f>0&&(v=f),_=u.top-r<0?u.length-g:r-u.offset-g;const w=new Uint8Array(u.data,g,_);c.set(w,v)}return a})}}class SG{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}getData(){return(0,wi.Z)(function*(){throw new Error("not implemented")})()}}class EG{constructor(e){this.url=e}request({}={}){return(0,wi.Z)(function*(){throw new Error("request is not implemented")})()}}class aFt extends SG{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}getData(){var e=this;return(0,wi.Z)(function*(){return e.response.arrayBuffer?yield e.response.arrayBuffer():(yield e.response.buffer()).buffer})()}}class cFt extends EG{constructor(e,t){super(e),this.credentials=t}request({headers:e,credentials:t,signal:i}={}){var r=this;return(0,wi.Z)(function*(){const s=yield fetch(r.url,{headers:e,credentials:t,signal:i});return new aFt(s)})()}}class lFt extends SG{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}getData(){var e=this;return(0,wi.Z)(function*(){return e.data})()}}class uFt extends EG{constructRequest(e,t){return new Promise((i,r)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[o,a]of Object.entries(e))s.setRequestHeader(o,a);s.onload=()=>{i(new lFt(s,s.response))},s.onerror=r,s.onabort=()=>r(new IA("Request aborted")),s.send(),t&&(t.aborted&&s.abort(),t.addEventListener("abort",()=>s.abort()))})}request({headers:e,signal:t}={}){var i=this;return(0,wi.Z)(function*(){return yield i.constructRequest(e,t)})()}}var hFt=ae(3752),fFt=ae(3640),dFt=ae(2630);class pFt extends SG{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}getData(){var e=this;return(0,wi.Z)(function*(){return yield e.dataPromise})()}}class gFt extends EG{constructor(e){super(e),this.parsedUrl=dFt.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?hFt:fFt}constructRequest(e,t){return new Promise((i,r)=>{const s=this.httpApi.get({...this.parsedUrl,headers:e},o=>{const a=new Promise(c=>{const l=[];o.on("data",u=>{l.push(u)}),o.on("end",()=>{const u=Buffer.concat(l).buffer;c(u)}),o.on("error",r)});i(new pFt(o,a))});s.on("error",r),t&&(t.aborted&&s.destroy(new IA("Request aborted")),t.addEventListener("abort",()=>s.destroy(new IA("Request aborted"))))})}request({headers:e,signal:t}={}){var i=this;return(0,wi.Z)(function*(){return yield i.constructRequest(e,t)})()}}class TG extends CG{constructor(e,t,i,r){super(),this.client=e,this.headers=t,this.maxRanges=i,this.allowFullFile=r,this._fileSize=null}fetch(e,t){var i=this;return(0,wi.Z)(function*(){return i.maxRanges>=e.length?i.fetchSlices(e,t):Promise.all(e.map(r=>i.fetchSlice(r,t)))})()}fetchSlices(e,t){var i=this;return(0,wi.Z)(function*(){const r=yield i.client.request({headers:{...i.headers,Range:`bytes=${e.map(({offset:s,length:o})=>`${s}-${s+o}`).join(",")}`},signal:t});if(r.ok){if(206===r.status){const{type:s,params:o}=function Xkt(n){const[e,...t]=n.split(";").map(r=>r.trim()),i=t.map(r=>r.split("="));return{type:e,params:a5e(i)}}(r.getHeader("content-type"));if("multipart/byteranges"===s){const p=function Ykt(n,e){let t=null;const i=new TextDecoder("ascii"),r=[],s=`--${e}`,o=`${s}--`;for(let a=0;a<10;++a)i.decode(new Uint8Array(n,a,s.length))===s&&(t=a);if(null===t)throw new Error("Could not find initial boundary");for(;t<n.byteLength;){const a=i.decode(new Uint8Array(n,t,Math.min(s.length+1024,n.byteLength-t)));if(0===a.length||a.startsWith(o))break;if(!a.startsWith(s))throw new Error("Part does not start with boundary");const c=a.substr(s.length+2);if(0===c.length)break;const l=c.indexOf("\r\n\r\n"),u=qkt(c.substr(0,l)),{start:f,end:p,total:g}=xG(u["content-range"]),v=t+s.length+l+"\r\n\r\n".length,_=parseInt(p,10)+1-parseInt(f,10);r.push({headers:u,data:n.slice(v,v+_),offset:f,length:_,fileSize:g}),t=v+_+4}return r}(yield r.getData(),o.boundary);return i._fileSize=p[0].fileSize||null,p}const a=yield r.getData(),{start:c,end:l,total:u}=xG(r.getHeader("content-range"));i._fileSize=u||null;const f=[{data:a,offset:c,length:l-c}];if(e.length>1){const p=yield Promise.all(e.slice(1).map(g=>i.fetchSlice(g,t)));return f.concat(p)}return f}{if(!i.allowFullFile)throw new Error("Server responded with full file");const s=yield r.getData();return i._fileSize=s.byteLength,[{data:s,offset:0,length:s.byteLength}]}}throw new Error("Error fetching data.")})()}fetchSlice(e,t){var i=this;return(0,wi.Z)(function*(){const{offset:r,length:s}=e,o=yield i.client.request({headers:{...i.headers,Range:`bytes=${r}-${r+s}`},signal:t});if(o.ok){if(206===o.status){const a=yield o.getData(),{total:c}=xG(o.getHeader("content-range"));return i._fileSize=c||null,{data:a,offset:r,length:s}}{if(!i.allowFullFile)throw new Error("Server responded with full file");const a=yield o.getData();return i._fileSize=a.byteLength,{data:a,offset:0,length:a.byteLength}}}throw new Error("Error fetching data.")})()}get fileSize(){return this._fileSize}}function LG(n,{blockSize:e,cacheSize:t}){return null===e?n:new oFt(n,{blockSize:e,cacheSize:t})}function DG(n,{forceXHR:e=!1,...t}={}){return"function"!=typeof fetch||e?typeof XMLHttpRequest<"u"?function AFt(n,{headers:e={},maxRanges:t=0,allowFullFile:i=!1,...r}={}){const s=new uFt(n);return LG(new TG(s,e,t,i),r)}(n,t):function vFt(n,{headers:e={},maxRanges:t=0,allowFullFile:i=!1,...r}={}){const s=new gFt(n);return LG(new TG(s,e,t,i),r)}(n,t):function mFt(n,{headers:e={},credentials:t,maxRanges:i=0,allowFullFile:r=!1,...s}={}){const o=new cFt(n,t);return LG(new TG(o,e,i,r),s)}(n,t)}class _Ft extends CG{constructor(e){super(),this.file=e}fetchSlice(e,t){var i=this;return(0,wi.Z)(function*(){return new Promise((r,s)=>{const o=i.file.slice(e.offset,e.offset+e.length),a=new FileReader;a.onload=c=>r(c.target.result),a.onerror=s,a.onabort=s,a.readAsArrayBuffer(o),t&&t.addEventListener("abort",()=>a.abort())})})()}}function yFt(n){return new _Ft(n)}function IG(n){switch(n){case Pi.sf.BYTE:case Pi.sf.ASCII:case Pi.sf.SBYTE:case Pi.sf.UNDEFINED:return 1;case Pi.sf.SHORT:case Pi.sf.SSHORT:return 2;case Pi.sf.LONG:case Pi.sf.SLONG:case Pi.sf.FLOAT:case Pi.sf.IFD:return 4;case Pi.sf.RATIONAL:case Pi.sf.SRATIONAL:case Pi.sf.DOUBLE:case Pi.sf.LONG8:case Pi.sf.SLONG8:case Pi.sf.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${n}`)}}function RA(n,e,t,i){let r=null,s=null;const o=IG(e);switch(e){case Pi.sf.BYTE:case Pi.sf.ASCII:case Pi.sf.UNDEFINED:r=new Uint8Array(t),s=n.readUint8;break;case Pi.sf.SBYTE:r=new Int8Array(t),s=n.readInt8;break;case Pi.sf.SHORT:r=new Uint16Array(t),s=n.readUint16;break;case Pi.sf.SSHORT:r=new Int16Array(t),s=n.readInt16;break;case Pi.sf.LONG:case Pi.sf.IFD:r=new Uint32Array(t),s=n.readUint32;break;case Pi.sf.SLONG:r=new Int32Array(t),s=n.readInt32;break;case Pi.sf.LONG8:case Pi.sf.IFD8:r=new Array(t),s=n.readUint64;break;case Pi.sf.SLONG8:r=new Array(t),s=n.readInt64;break;case Pi.sf.RATIONAL:r=new Uint32Array(2*t),s=n.readUint32;break;case Pi.sf.SRATIONAL:r=new Int32Array(2*t),s=n.readInt32;break;case Pi.sf.FLOAT:r=new Float32Array(t),s=n.readFloat32;break;case Pi.sf.DOUBLE:r=new Float64Array(t),s=n.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===Pi.sf.RATIONAL||e===Pi.sf.SRATIONAL)for(let a=0;a<t;a+=2)r[a]=s.call(n,i+a*o),r[a+1]=s.call(n,i+(a*o+4));else for(let a=0;a<t;++a)r[a]=s.call(n,i+a*o);return e===Pi.sf.ASCII?new TextDecoder("utf-8").decode(r):r}class bFt{constructor(e,t,i){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=i}}class XL extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class l5e{readRasters(e={}){var t=this;return(0,wi.Z)(function*(){const{window:i,width:r,height:s}=e;let{resX:o,resY:a,bbox:c}=e;const l=yield t.getImage();let u=l;const f=yield t.getImageCount(),p=l.getBoundingBox();if(i&&c)throw new Error('Both "bbox" and "window" passed.');if(r||s){if(i){const[_,w]=l.getOrigin(),[b,x]=l.getResolution();c=[_+i[0]*b,w+i[1]*x,_+i[2]*b,w+i[3]*x]}const v=c||p;if(r){if(o)throw new Error("Both width and resX passed");o=(v[2]-v[0])/r}if(s){if(a)throw new Error("Both width and resY passed");a=(v[3]-v[1])/s}}if(o||a){const v=[];for(let _=0;_<f;++_){const w=yield t.getImage(_),{SubfileType:b,NewSubfileType:x}=w.fileDirectory;(0===_||2===b||1&x)&&v.push(w)}v.sort((_,w)=>_.getWidth()-w.getWidth());for(let _=0;_<v.length;++_){const w=v[_],b=(p[2]-p[0])/w.getWidth(),x=(p[3]-p[1])/w.getHeight();if(u=w,o&&o>b||a&&a>x)break}}let g=i;if(c){const[v,_]=l.getOrigin(),[w,b]=u.getResolution(l);g=[Math.round((c[0]-v)/w),Math.round((c[1]-_)/b),Math.round((c[2]-v)/w),Math.round((c[3]-_)/b)],g=[Math.min(g[0],g[2]),Math.min(g[1],g[3]),Math.max(g[0],g[2]),Math.max(g[1],g[3])]}return u.readRasters({...e,window:g})})()}}class _8 extends l5e{constructor(e,t,i,r,s={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=i,this.firstIFDOffset=r,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}getSlice(e,t){var i=this;return(0,wi.Z)(function*(){const r=i.bigTiff?4048:1024;return new Kkt((yield i.source.fetch([{offset:e,length:typeof t<"u"?t:r}]))[0],e,i.littleEndian,i.bigTiff)})()}parseFileDirectoryAt(e){var t=this;return(0,wi.Z)(function*(){const i=t.bigTiff?20:12,r=t.bigTiff?8:2;let s=yield t.getSlice(e);const o=t.bigTiff?s.readUint64(e):s.readUint16(e),a=o*i+(t.bigTiff?16:6);s.covers(e,a)||(s=yield t.getSlice(e,a));const c={};let l=e+(t.bigTiff?8:2);for(let p=0;p<o;l+=i,++p){const g=s.readUint16(l),v=s.readUint16(l+2),_=t.bigTiff?s.readUint64(l+4):s.readUint32(l+4);let w,b;const x=IG(v),M=l+(t.bigTiff?12:8);if(x*_<=(t.bigTiff?8:4))w=RA(s,v,_,M);else{const E=s.readOffset(M),I=IG(v)*_;w=s.covers(E,I)?RA(s,v,_,E):RA(yield t.getSlice(E,I),v,_,E)}b=1===_&&-1===Pi.It.indexOf(g)&&v!==Pi.sf.RATIONAL&&v!==Pi.sf.SRATIONAL?w[0]:w,c[Pi.L[g]]=b}const u=function wFt(n){const e=n.GeoKeyDirectory;if(!e)return null;const t={};for(let i=4;i<=4*e[3];i+=4){const r=Pi.P1[e[i]],s=e[i+1]?Pi.L[e[i+1]]:null,o=e[i+2],a=e[i+3];let c=null;if(s){if(c=n[s],typeof c>"u"||null===c)throw new Error(`Could not get value of geoKey '${r}'.`);"string"==typeof c?c=c.substring(a,a+o-1):c.subarray&&(c=c.subarray(a,a+o),1===o&&(c=c[0]))}else c=a;t[r]=c}return t}(c),f=s.readOffset(e+r+i*o);return new bFt(c,u,f)})()}requestIFD(e){var t=this;return(0,wi.Z)(function*(){if(t.ifdRequests[e])return t.ifdRequests[e];if(0===e)return t.ifdRequests[e]=t.parseFileDirectoryAt(t.firstIFDOffset),t.ifdRequests[e];if(!t.ifdRequests[e-1])try{t.ifdRequests[e-1]=t.requestIFD(e-1)}catch(i){throw i instanceof XL?new XL(e):i}return t.ifdRequests[e]=(0,wi.Z)(function*(){const i=yield t.ifdRequests[e-1];if(0===i.nextIFDByteOffset)throw new XL(e);return t.parseFileDirectoryAt(i.nextIFDByteOffset)})(),t.ifdRequests[e]})()}getImage(e=0){var t=this;return(0,wi.Z)(function*(){const i=yield t.requestIFD(e);return new s5e(i.fileDirectory,i.geoKeyDirectory,t.dataView,t.littleEndian,t.cache,t.source)})()}getImageCount(){var e=this;return(0,wi.Z)(function*(){let t=0,i=!0;for(;i;)try{yield e.requestIFD(t),++t}catch(r){if(!(r instanceof XL))throw r;i=!1}return t})()}getGhostValues(){var e=this;return(0,wi.Z)(function*(){const t=e.bigTiff?16:8;if(e.ghostValues)return e.ghostValues;const i="GDAL_STRUCTURAL_METADATA_SIZE=",r=i.length+100;let s=yield e.getSlice(t,r);if(i===RA(s,Pi.sf.ASCII,i.length,t)){const a=RA(s,Pi.sf.ASCII,r,t).split("\n")[0],c=Number(a.split("=")[1].split(" ")[0])+a.length;c>r&&(s=yield e.getSlice(t,c));const l=RA(s,Pi.sf.ASCII,c,t);e.ghostValues={},l.split("\n").filter(u=>u.length>0).map(u=>u.split("=")).forEach(([u,f])=>{e.ghostValues[u]=f})}return e.ghostValues})()}static fromSource(e,t,i){return(0,wi.Z)(function*(){const r=(yield e.fetch([{offset:0,length:1024}],i))[0],s=new $kt(r),o=s.getUint16(0,0);let a;if(18761===o)a=!0;else{if(19789!==o)throw new TypeError("Invalid byte order value.");a=!1}const c=s.getUint16(2,a);let l;if(42===c)l=!1;else{if(43!==c)throw new TypeError("Invalid magic number.");if(l=!0,8!==s.getUint16(4,a))throw new Error("Unsupported offset byte-size.")}const u=l?s.getUint64(8,a):s.getUint32(4,a);return new _8(e,a,l,u,t)})()}close(){return"function"==typeof this.source.close&&this.source.close()}}class xFt extends l5e{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}parseFileDirectoriesPerFile(){var e=this;return(0,wi.Z)(function*(){const t=[e.mainFile.parseFileDirectoryAt(e.mainFile.firstIFDOffset)].concat(e.overviewFiles.map(i=>i.parseFileDirectoryAt(i.firstIFDOffset)));return e.fileDirectoriesPerFile=yield Promise.all(t),e.fileDirectoriesPerFile})()}getImage(e=0){var t=this;return(0,wi.Z)(function*(){yield t.getImageCount(),yield t.parseFileDirectoriesPerFile();let i=0,r=0;for(let s=0;s<t.imageFiles.length;s++){const o=t.imageFiles[s];for(let a=0;a<t.imageCounts[s];a++){if(e===i){const c=yield o.requestIFD(r);return new s5e(c.fileDirectory,c.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source)}i++,r++}r=0}throw new RangeError("Invalid image index")})()}getImageCount(){var e=this;return(0,wi.Z)(function*(){if(null!==e.imageCount)return e.imageCount;const t=[e.mainFile.getImageCount()].concat(e.overviewFiles.map(i=>i.getImageCount()));return e.imageCounts=yield Promise.all(t),e.imageCount=e.imageCounts.reduce((i,r)=>i+r,0),e.imageCount})()}}function RG(){return RG=(0,wi.Z)(function*(n,e={},t){return _8.fromSource(DG(n,e),t)}),RG.apply(this,arguments)}function FG(){return FG=(0,wi.Z)(function*(n,e){return _8.fromSource(yFt(n),e)}),FG.apply(this,arguments)}function PG(){return PG=(0,wi.Z)(function*(n,e=[],t={},i){const r=yield _8.fromSource(DG(n,t),i),s=yield Promise.all(e.map(o=>_8.fromSource(DG(o,t))));return new xFt(r,s)}),PG.apply(this,arguments)}function EFt(n){return 4==(4&(n.fileDirectory.NewSubfileType||0))}function TFt(n,e){if(!n)return!1;if(!0===n)return!0;if(3!==e.getSamplesPerPixel())return!1;const t=e.fileDirectory.PhotometricInterpretation,i=Pi.Ie;return t===i.CMYK||t===i.YCbCr||t===i.CIELab||t===i.ICCLab}const u5e="STATISTICS_MAXIMUM",h5e="STATISTICS_MINIMUM";let zG;function DFt(n){try{return n.getBoundingBox()}catch{return[0,0,n.getWidth(),n.getHeight()]}}function IFt(n){try{return n.getOrigin().slice(0,2)}catch{return[0,n.getHeight()]}}function RFt(n,e){try{return n.getResolution(e)}catch{return[e.getWidth()/n.getWidth(),e.getHeight()/n.getHeight()]}}function BFt(n){const e=n.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&32767!==e.ProjectedCSTypeGeoKey){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let i=Ea(t);if(!i){const r=zse(e.ProjLinearUnitsGeoKey);r&&(i=new qS({code:t,units:r}))}return i}if(e.GeographicTypeGeoKey&&32767!==e.GeographicTypeGeoKey){const t="EPSG:"+e.GeographicTypeGeoKey;let i=Ea(t);if(!i){const r=zse(e.GeogAngularUnitsGeoKey);r&&(i=new qS({code:t,units:r}))}return i}return null}function kFt(n){return n.getImageCount().then(function(e){const t=new Array(e);for(let i=0;i<e;++i)t[i]=n.getImage(i);return Promise.all(t)})}function FFt(n,e){let t;return t=n.blob?function MFt(n,e){return FG.apply(this,arguments)}(n.blob):n.overviews?function SFt(n){return PG.apply(this,arguments)}(n.url,n.overviews,e):function CFt(n){return RG.apply(this,arguments)}(n.url,e),t.then(kFt)}function Sw(n,e,t,i,r){if(Array.isArray(n)){const s=n.length;if(!Array.isArray(e)||s!=e.length){const o=new Error(i);throw r(o),o}for(let o=0;o<s;++o)Sw(n[o],e[o],t,i,r)}else if(Math.abs(n-e)>t*n)throw new Error(i)}function PFt(n){return n instanceof Int8Array?-128:n instanceof Int16Array?-32768:n instanceof Int32Array?-2147483648:n instanceof Float32Array?12e-39:0}function HFt(n){return n instanceof Int8Array?127:n instanceof Uint8Array||n instanceof Uint8ClampedArray?255:n instanceof Int16Array?32767:n instanceof Uint16Array?65535:n instanceof Int32Array?2147483647:n instanceof Uint32Array?4294967295:n instanceof Float32Array?34e37:255}const OG=class f5e extends okt{constructor(e){super({state:"loading",tileGrid:null,projection:null,opaque:e.opaque,transition:e.transition,interpolate:!1!==e.interpolate,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.normalize_=!1!==e.normalize,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.setKey(this.sourceInfo_.map(s=>s.url).join(","));const i=this,r=new Array(t);for(let s=0;s<t;++s)r[s]=FFt(this.sourceInfo_[s],this.sourceOptions_);Promise.all(r).then(function(s){i.configure_(s)}).catch(function(s){toe(s),i.error_=s,i.setState("error")})}getError(){return this.error_}determineProjection(e){const t=e[0];for(let i=t.length-1;i>=0;--i){const s=BFt(t[i]);if(s){this.projection=s;break}}}configure_(e){let t,i,r,s,o;const a=new Array(e.length),c=new Array(e.length),l=new Array(e.length);let u=0;const f=e.length;for(let _=0;_<f;++_){const w=[],b=[];e[_].forEach(R=>{EFt(R)?b.push(R):w.push(R)});const x=w.length;if(b.length>0&&b.length!==x)throw new Error(`Expected one mask per image found ${b.length} masks and ${x} images`);let M,E;const I=new Array(x),k=new Array(x),O=new Array(x);c[_]=new Array(x),l[_]=new Array(x);for(let R=0;R<x;++R){const P=w[R],Q=P.getGDALNoData();l[_][R]=P.getGDALMetadata(0),c[_][R]=Q;const J=this.sourceInfo_[_].bands;a[_]=J?J.length:P.getSamplesPerPixel();const Ce=x-(R+1);M||(M=DFt(P)),E||(E=IFt(P));const Ae=RFt(P,w[0]);O[Ce]=Ae[0];const G=[P.getTileWidth(),P.getTileHeight()];G[0]!==G[1]&&G[1]<256&&(G[0]=256,G[1]=256),I[Ce]=G;const ue=Ae[0]/Math.abs(Ae[1]);k[Ce]=[G[0],G[1]/ue]}if(t?h3(t,M,t):t=M,i?Sw(i,E,0,`Origin mismatch for source ${_}, got [${E}] but expected [${i}]`,this.viewRejector):i=E,o){o.length-u>O.length&&(u=o.length-O.length);const R=o[o.length-1]/O[O.length-1];this.resolutionFactors_[_]=R;const P=O.map(J=>J*R),Q=`Resolution mismatch for source ${_}, got [${P}] but expected [${o}]`;Sw(o.slice(u,o.length),P,.02,Q,this.viewRejector)}else o=O,this.resolutionFactors_[_]=1;r?Sw(r.slice(u,r.length),k,.01,`Tile size mismatch for source ${_}`,this.viewRejector):r=k,s?Sw(s.slice(u,s.length),I,0,`Tile size mismatch for source ${_}`,this.viewRejector):s=I,this.sourceImagery_[_]=w.reverse(),this.sourceMasks_[_]=b.reverse()}for(let _=0,w=this.sourceImagery_.length;_<w;++_){const b=this.sourceImagery_[_];for(;b.length<o.length;)b.unshift(void 0)}this.getProjection()||this.determineProjection(e),this.samplesPerPixel_=a,this.nodataValues_=c,this.metadata_=l;e:for(let _=0;_<f;++_){if(void 0!==this.sourceInfo_[_].nodata){this.addAlpha_=!0;break}if(this.sourceMasks_[_].length){this.addAlpha_=!0;break}const w=c[_],b=this.sourceInfo_[_].bands;if(b){for(let x=0;x<b.length;++x)if(null!==w[b[x]-1]){this.addAlpha_=!0;break e}}else for(let x=0;x<w.length;++x)if(null!==w[x]){this.addAlpha_=!0;break e}}let p=this.addAlpha_?1:0;for(let _=0;_<f;++_)p+=a[_];this.bandCount=p;const g=new sG({extent:t,minZoom:u,origin:i,resolutions:o,tileSizes:r});this.tileGrid=g,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready"),2===o.length?o=[o[0],o[1],o[1]/2]:1===o.length&&(o=[2*o[0],o[0],o[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:Mm(F0(t)),extent:K_(t),zoom:1})}loadTile_(e,t,i){const r=this.getTileSize(e),s=this.sourceImagery_.length,o=new Array(2*s),a=this.nodataValues_,c=this.sourceInfo_,l=function LFt(){return zG||(zG=new class ckt{constructor(e=akt,t){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=t?Promise.resolve(t):new Promise(i=>{ae.e(579).then(ae.bind(ae,579)).then(r=>{i(r.create)})}),this._awaitingDecoder.then(i=>{this._awaitingDecoder=null,this.workers=[];for(let r=0;r<e;r++)this.workers.push({worker:i(),idle:!0})}))}decode(e,t){var i=this;return(0,wi.Z)(function*(){return i._awaitingDecoder&&(yield i._awaitingDecoder),0===i.size?Npe(e).then(r=>r.decode(e,t)):new Promise(r=>{const s=i.workers.find(c=>c.idle)||i.workers[Math.floor(Math.random()*i.size)];s.idle=!1;const o=i.messageId++,a=c=>{c.data.id===o&&(s.idle=!0,r(c.data.decoded),s.worker.removeEventListener("message",a))};s.worker.addEventListener("message",a),s.worker.postMessage({fileDirectory:e,buffer:t,id:o},[t])})})()}destroy(){this.workers&&(this.workers.forEach(e=>{e.worker.terminate()}),this.workers=null)}}),zG}();for(let u=0;u<s;++u){const f=c[u],p=this.resolutionFactors_[u],g=[Math.round(t*(r[0]*p)),Math.round(i*(r[1]*p)),Math.round((t+1)*(r[0]*p)),Math.round((i+1)*(r[1]*p))],v=this.sourceImagery_[u][e];let _,w;f.bands&&(_=f.bands.map(function(E){return E-1})),w="nodata"in f&&null!==f.nodata?f.nodata:_?_.map(function(E){return a[u][E]}):a[u];const b={window:g,width:r[0],height:r[1],samples:_,fillValue:w,pool:l,interleave:!1};o[u]=TFt(this.convertToRGB_,v)?v.readRGB(b):v.readRasters(b);const x=s+u,M=this.sourceMasks_[u][e];o[x]=M?M.readRasters({window:g,width:r[0],height:r[1],samples:[0],pool:l,interleave:!1}):Promise.resolve(null)}return Promise.all(o).then(this.composeTile_.bind(this,r)).catch(function(u){throw toe(u),u})}composeTile_(e,t){const i=this.metadata_,r=this.sourceInfo_,s=this.sourceImagery_.length,a=this.samplesPerPixel_,c=this.nodataValues_,l=this.normalize_,u=this.addAlpha_,f=e[0]*e[1],p=f*this.bandCount;let g;g=l?new Uint8Array(p):new Float32Array(p);let v=0;for(let _=0;_<f;++_){let w=u;for(let b=0;b<s;++b){const x=r[b];let I,k,M=x.min,E=x.max;if(l){const O=i[b][0];void 0===M&&(M=O&&h5e in O?parseFloat(O[h5e]):PFt(t[b][0])),void 0===E&&(E=O&&u5e in O?parseFloat(O[u5e]):HFt(t[b][0])),I=255/(E-M),k=-M*I}for(let O=0;O<a[b];++O){const R=t[b][O][_];let P;if(P=l?d1(I*R+k,0,255):R,u){let Q=x.nodata;if(void 0===Q){let Ce;Ce=x.bands?x.bands[O]-1:O,Q=c[b][Ce]}const J=isNaN(Q);(!J&&R!==Q||J&&!isNaN(R))&&(w=!1,g[v]=P)}else g[v]=P;v++}if(!w){const R=t[s+b];R&&!R[0][_]&&(w=!0)}}u&&(w||(g[v]=255),v++)}return g}};let d5e=(()=>{class n{constructor(t){this.cookieService=t,this.cookieKey="ol-view",this.subscriptions=[],this.center=[0,0]}init(t=[0,0],i=15){this.center=t,this.view=new q0({center:this.center,zoom:i}),this.centerAndZoom=this.getStore(),this.subscriptions.push(xa(this.view,"change").subscribe(()=>this.setStore()))}onDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.view.dispose()}set centerAndZoom(t){t.center&&this.view.setCenter(t.center),t.zoom&&this.view.setZoom(t.zoom)}get centerAndZoom(){return{center:this.view.getCenter(),zoom:this.view.getZoom()}}getStore(){const t=this.cookieService.get(this.cookieKey);return""===t?{center:this.center,zoom:15}:JSON.parse(t)}setStore(){this.cookieService.set(this.cookieKey,JSON.stringify(this.centerAndZoom))}animate(t,i=500){const r={duration:i};void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.center&&(r.center=t.center),this.view.animate(r)}}return n.\u0275fac=function(t){return new(t||n)(Xe(U3))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const g5e=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function GG(n,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!K$e},e);const t=g5e.length;for(let i=0;i<t;++i)try{const r=n.getContext(g5e[i],e);if(r)return r}catch{}return null}function WG(n){switch(n){case 34962:default:return Float32Array;case 34963:return Uint32Array}}const m5e=class QFt{constructor(e,t){this.array=null,this.type=e,Kr(34962===e||34963===e,62),this.usage=void 0!==t?t:35044}ofSize(e){this.array=new(WG(this.type))(e)}fromArray(e){this.array=WG(this.type).from(e)}fromArrayBuffer(e){this.array=new(WG(this.type))(e)}getType(){return this.type}getArray(){return this.array}getUsage(){return this.usage}getSize(){return this.array?this.array.length:0}};function A5e(n,e,t){const i=t?n.LINEAR:n.NEAREST;n.bindTexture(n.TEXTURE_2D,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,i)}function v5e(n,e,t,i,r,s){const o=n.getGL();let a,c;t instanceof Float32Array?(a=o.FLOAT,n.getExtension("OES_texture_float"),c=null!==n.getExtension("OES_texture_float_linear")):(a=o.UNSIGNED_BYTE,c=!0),A5e(o,e,s&&c);const l=t.byteLength/i[1];let f,u=1;switch(l%8==0?u=8:l%4==0?u=4:l%2==0&&(u=2),r){case 1:f=o.LUMINANCE;break;case 2:f=o.LUMINANCE_ALPHA;break;case 3:f=o.RGB;break;case 4:f=o.RGBA;break;default:throw new Error(`Unsupported number of bands: ${r}`)}const p=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,u),o.texImage2D(o.TEXTURE_2D,0,f,i[0],i[1],0,f,a,t),o.pixelStorei(o.UNPACK_ALIGNMENT,p)}let BA=null;const KFt=class $Ft extends Dm{constructor(e){super(),this.textures=[],this.handleTileChange_=this.handleTileChange_.bind(this),this.renderSize_=v2(e.grid.getTileSize(e.tile.tileCoord[0])),this.gutter_=e.gutter||0,this.bandCount=NaN,this.helper_=e.helper;const t=new m5e(34962,35044);t.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(t),this.coords=t,this.setTile(e.tile)}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener("change",this.handleTileChange_),this.tile=e,this.textures.length=0,this.loaded=2===e.getState(),this.loaded)this.uploadTile_();else{if(e instanceof NL){const t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener("change",this.handleTileChange_)}}uploadTile_(){const e=this.helper_,t=e.getGL(),i=this.tile;let r;r=i instanceof NL||i instanceof bA?i.getImage():i.getData();const s=WL(r);if(s){const x=t.createTexture();return this.textures.push(x),this.bandCount=4,void function WFt(n,e,t,i){A5e(n,e,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)}(t,x,s,i.interpolate)}r=uG(r);const o=i.getSize(),a=[o[0]+2*this.gutter_,o[1]+2*this.gutter_],c=r instanceof Float32Array,l=a[0]*a[1],u=c?Float32Array:Uint8Array,f=u.BYTES_PER_ELEMENT,p=r.byteLength/a[1];this.bandCount=Math.floor(p/f/a[0]);const g=Math.ceil(this.bandCount/4);if(1===g){const x=t.createTexture();return this.textures.push(x),void v5e(e,x,r,a,this.bandCount,i.interpolate)}const v=new Array(g);for(let x=0;x<g;++x){const M=t.createTexture();this.textures.push(M),v[x]=new u(l*(x<g-1?4:(this.bandCount-1)%4+1))}let _=0,w=0;const b=a[0]*this.bandCount;for(let x=0;x<a[1];++x){for(let M=0;M<b;++M){const E=r[w+M],I=Math.floor(_/this.bandCount),k=M%this.bandCount,R=v[Math.floor(k/4)];R[I*(R.length/l)+k%4]=E,++_}w+=p/f}for(let x=0;x<g;++x){const E=v[x];v5e(e,this.textures[x],E,a,E.length/l,i.interpolate)}}handleTileChange_(){2===this.tile.getState()&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent("change"))}disposeInternal(){const e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t]);this.tile.removeEventListener("change",this.handleTileChange_)}getImagePixelData_(e,t,i){const r=this.gutter_,s=this.renderSize_[0],o=this.renderSize_[1];BA||function jFt(){BA=_2(1,1,void 0,{willReadFrequently:!0})}(),BA.clearRect(0,0,1,1);const u=e.height-2*r,f=r+Math.floor(t/s*(e.width-2*r)),p=r+Math.floor(u*(i/o));let g;try{BA.drawImage(e,f,p,1,1,0,0,1,1),g=BA.getImageData(0,0,1,1).data}catch{return BA=null,null}return g}getArrayPixelData_(e,t,i,r){const s=this.gutter_,a=this.renderSize_[1],c=t[0],l=t[1],u=c+2*s,f=l+2*s,p=s+Math.floor(c*(i/this.renderSize_[0])),g=s+Math.floor(l*(r/a));if(e instanceof DataView){const _=e.byteLength/(u*f),w=_*(g*u+p),b=e.buffer.slice(w,w+_);return new DataView(b)}const v=this.bandCount*(g*u+p);return e.slice(v,v+this.bandCount)}getPixelData(e,t){if(!this.loaded)return null;if(this.tile instanceof hG){const i=this.tile.getData(),r=uG(i);if(r){const s=this.tile.getSize();return this.getArrayPixelData_(r,s,e,t)}return this.getImagePixelData_(WL(i),e,t)}return this.getImagePixelData_(this.tile.getImage(),e,t)}},_5e=class YFt{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer();const i=t.createShader(t.VERTEX_SHADER);t.shaderSource(i,e.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),t.compileShader(i);const r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),t.compileShader(r),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,i),t.attachShader(this.renderTargetProgram_,r),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:t.getUniformLocation(this.renderTargetProgram_,o)})})}getGL(){return this.gl_}init(e){const t=this.getGL(),i=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;const r=0,s=t.RGBA,o=0,a=t.RGBA,c=t.UNSIGNED_BYTE,l=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,r,s,i[0],i[1],o,a,c,l),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0)}}apply(e,t,i,r){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,t?t.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!t){const c=nr(s.canvas);if(!e.renderTargets[c]){const l=s.getContextAttributes();l&&l.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT)),e.renderTargets[c]=!0}}s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0),s.uniform1f(this.renderTargetOpacityLocation_,e.layerStatesArray[e.layerIndex].opacity),this.applyUniforms(e),i&&i(s,e),s.drawArrays(s.TRIANGLES,0,6),r&&r(s,e)}getFrameBuffer(){return this.frameBuffer_}applyUniforms(e){const t=this.getGL();let i,r=1;this.uniforms_.forEach(function(s){if(i="function"==typeof s.value?s.value(e):s.value,i instanceof HTMLCanvasElement||i instanceof ImageData)s.texture||(s.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${r}`]),t.bindTexture(t.TEXTURE_2D,s.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,i.width,i.height,0,t.UNSIGNED_BYTE,new Uint8Array(i.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),t.uniform1i(s.location,r++);else if(Array.isArray(i))switch(i.length){case 2:return void t.uniform2f(s.location,i[0],i[1]);case 3:return void t.uniform3f(s.location,i[0],i[1],i[2]);case 4:return void t.uniform4f(s.location,i[0],i[1],i[2],i[3]);default:return}else"number"==typeof i&&t.uniform1f(s.location,i)})}};function ZL(n,e){return n[0]=e[0],n[1]=e[1],n[4]=e[2],n[5]=e[3],n[12]=e[4],n[13]=e[5],n}const JL={};function w5e(n){return"shared/"+n}let b5e=0;function x5e(n){switch(n){case 5121:return Uint8Array.BYTES_PER_ELEMENT;case 5123:return Uint16Array.BYTES_PER_ELEMENT;case 5125:return Uint32Array.BYTES_PER_ELEMENT;default:return Float32Array.BYTES_PER_ELEMENT}}const iPt=class tPt extends uE{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?w5e(e.canvasCacheKey):function ZFt(){const n="unique/"+b5e;return b5e+=1,n}(),this.canvas_=function JFt(n){let e=JL[n];if(!e){const t=document.createElement("canvas");t.style.position="absolute",t.style.left="0",e={users:0,canvas:t},JL[n]=e}return e.users+=1,e.canvas}(this.canvasCacheKey_),this.gl_=GG(this.canvas_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.canvas_.addEventListener("webglcontextlost",this.boundHandleWebGLContextLost_),this.canvas_.addEventListener("webglcontextrestored",this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=[1,0,0,1,0,0],this.offsetScaleMatrix_=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.uniformLocations_={},this.attribLocations_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms);const t=this.getGL();this.postProcessPasses_=e.postProcesses?e.postProcesses.map(function(i){return new _5e({webGlContext:t,scaleRatio:i.scaleRatio,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,uniforms:i.uniforms})}):[new _5e({webGlContext:t})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[];for(const t in e)this.uniforms_.push({name:t,value:e[t]});this.uniformLocations_={}}canvasCacheKeyMatches(e){return this.canvasCacheKey_===w5e(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}bindBuffer(e){const t=this.getGL(),i=nr(e);let r=this.bufferCache_[i];r||(r={buffer:e,webGlBuffer:t.createBuffer()},this.bufferCache_[i]=r),t.bindBuffer(e.getType(),r.webGlBuffer)}flushBufferData(e){const t=this.getGL();this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=this.getGL(),i=nr(e),r=this.bufferCache_[i];r&&!t.isContextLost()&&t.deleteBuffer(r.webGlBuffer),delete this.bufferCache_[i]}disposeInternal(){this.canvas_.removeEventListener("webglcontextlost",this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener("webglcontextrestored",this.boundHandleWebGLContextRestored_),function ePt(n){const e=JL[n];if(!e||(e.users-=1,e.users>0))return;const r=GG(e.canvas).getExtension("WEBGL_lose_context");r&&r.loseContext(),delete JL[n]}(this.canvasCacheKey_),delete this.gl_,delete this.canvas_}prepareDraw(e,t){const i=this.getGL(),r=this.getCanvas(),s=e.size,o=e.pixelRatio;r.width=s[0]*o,r.height=s[1]*o,r.style.width=s[0]+"px",r.style.height=s[1]+"px";for(let a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,t?i.ZERO:i.ONE_MINUS_SRC_ALPHA)}prepareDrawToRenderTarget(e,t,i){const r=this.getGL(),s=t.getSize();r.bindFramebuffer(r.FRAMEBUFFER,t.getFramebuffer()),r.viewport(0,0,s[0],s[1]),r.bindTexture(r.TEXTURE_2D,t.getTexture()),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA)}drawElements(e,t){const i=this.getGL();this.getExtension("OES_element_index_uint"),i.drawElements(i.TRIANGLES,t-e,i.UNSIGNED_INT,4*e)}finalizeDraw(e,t,i){for(let r=0,s=this.postProcessPasses_.length;r<s;r++)r===s-1?this.postProcessPasses_[r].apply(e,null,t,i):this.postProcessPasses_[r].apply(e,this.postProcessPasses_[r+1])}getCanvas(){return this.canvas_}getGL(){return this.gl_}applyFrameState(e){const t=e.size,i=e.viewState.rotation,r=e.pixelRatio,s=pE(this.offsetScaleMatrix_);nz(s,2/t[0],2/t[1]);const o=pE(this.offsetRotateMatrix_);0!==i&&doe(o,-i),this.setUniformMatrixValue("u_offsetScaleMatrix",ZL(this.tmpMat4_,s)),this.setUniformMatrixValue("u_offsetRotateMatrix",ZL(this.tmpMat4_,o)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",e.viewState.zoom),this.setUniformFloatValue("u_resolution",e.viewState.resolution),this.setUniformFloatValue("u_pixelRatio",r),this.setUniformFloatVec2("u_sizePx",[t[0],t[1]])}applyUniforms(e){const t=this.getGL();let i,r=0;this.uniforms_.forEach(s=>{if(i="function"==typeof s.value?s.value(e):s.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData)s.texture||(s.prevValue=void 0,s.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${r}`]),t.bindTexture(t.TEXTURE_2D,s.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(!(i instanceof HTMLImageElement)||i.complete)&&s.prevValue!==i&&(s.prevValue=i,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)),t.uniform1i(this.getUniformLocation(s.name),r++);else if(Array.isArray(i)&&6===i.length)this.setUniformMatrixValue(s.name,ZL(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:return void t.uniform2f(this.getUniformLocation(s.name),i[0],i[1]);case 3:return void t.uniform3f(this.getUniformLocation(s.name),i[0],i[1],i[2]);case 4:return void t.uniform4f(this.getUniformLocation(s.name),i[0],i[1],i[2],i[3]);default:return}else"number"==typeof i&&t.uniform1f(this.getUniformLocation(s.name),i)})}useProgram(e,t){this.getGL().useProgram(e),this.currentProgram_=e,this.uniformLocations_={},this.attribLocations_={},this.applyFrameState(t),this.applyUniforms(t)}compileShader(e,t){const i=this.getGL(),r=i.createShader(t);return i.shaderSource(r,e),i.compileShader(r),r}getProgram(e,t){const i=this.getGL(),r=this.compileShader(e,i.FRAGMENT_SHADER),s=this.compileShader(t,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,s),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${i.getShaderInfoLog(r)}`;throw new Error(a)}if(i.deleteShader(r),!i.getShaderParameter(s,i.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${i.getShaderInfoLog(s)}`;throw new Error(a)}if(i.deleteShader(s),!i.getProgramParameter(o,i.LINK_STATUS)){const a=`GL program linking failed: ${i.getShaderInfoLog(s)}`;throw new Error(a)}return o}getUniformLocation(e){return void 0===this.uniformLocations_[e]&&(this.uniformLocations_[e]=this.getGL().getUniformLocation(this.currentProgram_,e)),this.uniformLocations_[e]}getAttributeLocation(e){return void 0===this.attribLocations_[e]&&(this.attribLocations_[e]=this.getGL().getAttribLocation(this.currentProgram_,e)),this.attribLocations_[e]}makeProjectionTransform(e,t){const i=e.size,r=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return pE(t),Hu(t,0,0,2/(s*i[0]),2/(s*i[1]),-r,-o[0],-o[1]),t}setUniformFloatValue(e,t){this.getGL().uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.getGL().uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.getGL().uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.getGL().uniformMatrix4fv(this.getUniformLocation(e),!1,t)}enableAttributeArray_(e,t,i,r,s){const o=this.getAttributeLocation(e);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,t,i,!1,r,s))}enableAttributes(e){const t=function nPt(n){let e=0;for(let t=0;t<n.length;t++){const i=n[t];e+=i.size*x5e(i.type)}return e}(e);let i=0;for(let r=0;r<e.length;r++){const s=e[r];this.enableAttributeArray_(s.name,s.size,s.type||5126,t,i),i+=s.size*x5e(s.type)}}handleWebGLContextLost(){y5(this.bufferCache_),this.currentProgram_=null}handleWebGLContextRestored(){}createTexture(e,t,i){const r=this.getGL();i=i||r.createTexture();const o=r.RGBA,c=r.RGBA,l=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,i),t?r.texImage2D(r.TEXTURE_2D,0,o,c,l,t):r.texImage2D(r.TEXTURE_2D,0,o,e[0],e[1],0,c,l,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),i}};class jG extends npe{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=[1,0,0,1,0,0],this.pixelContext_=null,this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,e.addChangeListener("map",this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const i=this.getLayer();if(i.hasListener("precompose")){const r=new _w("precompose",void 0,t,e);i.dispatchEvent(r)}}dispatchPostComposeEvent(e,t){const i=this.getLayer();if(i.hasListener("postcompose")){const r=new _w("postcompose",void 0,t,e);i.dispatchEvent(r)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let r,t=!0,i=-1;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const c=e.layerStatesArray[o].layer,l=c.getRenderer();if(!(l instanceof jG)){t=!0;continue}const u=c.getClassName();if((t||u!==r)&&(i+=1,t=!1),r=u,l===this)break}const s="map/"+e.mapId+"/group/"+i;(!this.helper||!this.helper.canvasCacheKeyMatches(s))&&(this.removeHelper(),this.helper=new iPt({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),r&&(this.helper.getCanvas().className=r),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){Hu(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);const s=new _w(e,this.inversePixelTransform_,i,t);r.dispatchEvent(s)}}preRender(e,t){this.dispatchRenderEvent_("prerender",e,t)}postRender(e,t){this.dispatchRenderEvent_("postrender",e,t)}}const rPt=jG,sPt=[{name:"a_textureCoord",size:2,type:5126}],oPt={};function aPt(n){return 2*(1-1/(n+1))-1}function C5e(n,e,t){t in n||(n[t]=[]),n[t].push(e)}function $G(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=h3(e,M4(t.extent)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=h3(e,r))}return e}function KG(n,e){return`${n.getKey()},${ww(e)}`}const lPt=class cPt extends rPt{constructor(e,t){super(e,{uniforms:t.uniforms}),this.renderComplete=!1,this.tileTransform_=[1,0,0,1,0,0],this.tempMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.tempTileRange_=new iG(0,0,0,0),this.tempTileCoord_=UL(0,0,0),this.tempSize_=[0,0],this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.indices_=new m5e(34963,35044),this.indices_.fromArray([0,1,3,1,2,3]),this.tileTextureCache_=new kpe(void 0!==t.cacheSize?t.cacheSize:512),this.paletteTextures_=t.paletteTextures||[],this.frameState_=null,this.projection_=void 0}reset(e){super.reset({uniforms:e.uniforms}),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}isDrawableTile_(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!r}prepareFrameInternal(e){this.projection_?e.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=e.viewState.projection):this.projection_=e.viewState.projection;const i=this.getLayer().getRenderSource();return!(!i||G_($G(e,e.extent)))&&"ready"===i.getState()}enqueueTiles(e,t,i,r,s){const o=e.viewState,a=this.getLayer(),c=a.getRenderSource(),l=c.getTileGridForProjection(o.projection),u=c.getGutterForProjection(o.projection),f=nr(c);f in e.wantedTiles||(e.wantedTiles[f]={});const p=e.wantedTiles[f],g=this.tileTextureCache_,v=a.getMapInternal(),_=Math.max(i-s,l.getMinZoom(),l.getZForResolution(Math.min(a.getMaxResolution(),v?v.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):l.getResolution(0)),c.zDirection));for(let w=i;w>=_;--w){const b=l.getTileRangeForExtentAndZ(t,w,this.tempTileRange_),x=l.getResolution(w);for(let M=b.minX;M<=b.maxX;++M)for(let E=b.minY;E<=b.maxY;++E){const I=UL(w,M,E,this.tempTileCoord_),k=KG(c,I);let O,R;if(g.containsKey(k)&&(O=g.get(k),R=O.tile),!O||O.tile.key!==c.getKey())if(R=c.getTile(w,M,E,e.pixelRatio,o.projection),O)if(this.isDrawableTile_(R))O.setTile(R);else{const Q=R.getInterimTile();O.setTile(Q)}else O=new KFt({tile:R,grid:l,helper:this.helper,gutter:u}),g.set(k,O);C5e(r,O,w);const P=R.getKey();p[P]=!0,0===R.getState()&&(e.tileQueue.isKeyQueued(P)||e.tileQueue.enqueue([R,f,l.getTileCoordCenter(I),x]))}}}renderFrame(e){this.frameState_=e,this.renderComplete=!0;const t=this.helper.getGL();this.preRender(t,e);const i=e.viewState,r=this.getLayer(),s=r.getRenderSource(),o=s.getTileGridForProjection(i.projection),a=s.getGutterForProjection(i.projection),c=$G(e,e.extent),l=o.getZForResolution(i.resolution,s.zDirection),u={},f=r.getPreload();if(e.nextExtent){const O=o.getZForResolution(i.nextResolution,s.zDirection),R=$G(e,e.nextExtent);this.enqueueTiles(e,R,O,u,f)}this.enqueueTiles(e,c,l,u,0),f>0&&setTimeout(()=>{this.enqueueTiles(e,c,l-1,u,f-1)},0);const p={},g=nr(this),v=e.time;let _=!1;const w=u[l];for(let O=0,R=w.length;O<R;++O){const P=w[O],Q=P.tile;if((Q instanceof bA||Q instanceof fG)&&4===Q.getState())continue;const J=Q.tileCoord;if(P.loaded){const G=Q.getAlpha(g,v);if(1===G){Q.endTransition(g);continue}_=!0,p[ww(J)]=G}if(this.renderComplete=!1,this.findAltTiles_(o,J,l+1,u))continue;const Ae=o.getMinZoom();for(let G=l-1;G>=Ae&&!this.findAltTiles_(o,J,G,u);--G);}this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e,!_);const b=Object.keys(u).map(Number).sort(N6),x=i.center[0],M=i.center[1];for(let O=0,R=b.length;O<R;++O){const P=b[O],Q=o.getResolution(P),J=v2(o.getTileSize(P),this.tempSize_),Ce=o.getOrigin(P),Ae=J[0]+2*a,G=J[1]+2*a,ue=Ae/G,X=(x-Ce[0])/(J[0]*Q),le=(Ce[1]-M)/(J[1]*Q),de=i.resolution/Q,pe=aPt(P),Fe=u[P];for(let st=0,ze=Fe.length;st<ze;++st){const _t=Fe[st];if(!_t.loaded)continue;const kt=_t.tile.tileCoord,wt=ww(kt),Xt=kt[1],un=kt[2];pE(this.tileTransform_),nz(this.tileTransform_,2/(e.size[0]*de/Ae),-2/(e.size[1]*de/Ae)),doe(this.tileTransform_,i.rotation),nz(this.tileTransform_,1,1/ue),eKe(this.tileTransform_,(J[0]*(Xt-X)-a)/Ae,(J[1]*(un-le)-a)/G),this.helper.setUniformMatrixValue("u_tileTransform",ZL(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(_t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(sPt);let _n=0;for(;_n<_t.textures.length;){const Pt=`u_tileTextures[${_n}]`;t.activeTexture(t["TEXTURE"+_n]),t.bindTexture(t.TEXTURE_2D,_t.textures[_n]),t.uniform1i(this.helper.getUniformLocation(Pt),_n),++_n}for(let Vt=0;Vt<this.paletteTextures_.length;++Vt){const Pt=this.paletteTextures_[Vt];t.activeTexture(t["TEXTURE"+_n]);const wn=Pt.getTexture(t);t.bindTexture(t.TEXTURE_2D,wn),t.uniform1i(this.helper.getUniformLocation(Pt.name),_n),++_n}const an=wt in p?p[wt]:1;an<1&&(e.animate=!0),this.helper.setUniformFloatValue("u_transitionAlpha",an),this.helper.setUniformFloatValue("u_depth",pe),this.helper.setUniformFloatValue("u_texturePixelWidth",Ae),this.helper.setUniformFloatValue("u_texturePixelHeight",G),this.helper.setUniformFloatValue("u_textureResolution",Q),this.helper.setUniformFloatValue("u_textureOriginX",Ce[0]+Xt*J[0]*Q-a*Q),this.helper.setUniformFloatValue("u_textureOriginY",Ce[1]-un*J[1]*Q+a*Q);let bi=c;a>0&&(bi=o.getTileCoordExtent(kt),h3(bi,c,bi)),this.helper.setUniformFloatVec4("u_renderExtent",bi),this.helper.setUniformFloatValue("u_resolution",i.resolution),this.helper.setUniformFloatValue("u_zoom",i.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const E=this.helper.getCanvas(),I=this.tileTextureCache_;for(;I.canExpireCache();)I.pop().dispose();return e.postRenderFunctions.push(function(O,R){s.updateCacheSize(.1,R.viewState.projection),s.expireCache(R.viewState.projection,oPt)}),this.postRender(t,e),E}getData(e){if(!this.helper.getGL())return null;const i=this.frameState_;if(!i)return null;const r=this.getLayer(),s=jc(i.pixelToCoordinateTransform,e.slice()),o=i.viewState,a=r.getExtent();if(a&&!m5(M4(a),s))return null;const c=r.getSources(ku([s]),o.resolution);let l,u,f;for(l=c.length-1;l>=0;--l)if(u=c[l],"ready"===u.getState()){if(f=u.getTileGridForProjection(o.projection),u.getWrapX())break;const g=f.getExtent();if(!g||m5(g,s))break}if(l<0)return null;const p=this.tileTextureCache_;for(let g=f.getZForResolution(o.resolution);g>=f.getMinZoom();--g){const v=f.getTileCoordForCoordAndZ(s,g),_=KG(u,v);if(!p.containsKey(_))continue;const w=p.get(_),b=w.tile;if((b instanceof bA||b instanceof fG)&&4===b.getState())return null;if(!w.loaded)continue;const x=f.getOrigin(g),M=v2(f.getTileSize(g)),E=f.getResolution(g);return w.getPixelData((s[0]-x[0])/E-v[1]*M[0],(x[1]-s[1])/E-v[2]*M[1])}return null}findAltTiles_(e,t,i,r){const s=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileTextureCache_,c=this.getLayer().getRenderSource();for(let l=s.minX;l<=s.maxX;++l)for(let u=s.minY;u<=s.maxY;++u){const f=KG(c,[i,l,u]);let p=!1;if(a.containsKey(f)){const g=a.get(f);g.loaded&&(C5e(r,g,i),p=!0)}p||(o=!1)}return o}clearCache(){const e=this.tileTextureCache_;e.forEach(t=>t.dispose()),e.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){const e=this.helper;e&&(e.getGL().deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)),super.disposeInternal(),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_}},Wr={};function Y0(n){if("number"==typeof n)return 1;if("boolean"==typeof n)return 8;if("string"==typeof n)return function hIt(n){return M8e.test(n)&&(n=E8e(n)),C8e.test(n)||n.startsWith("rgba(")||n.startsWith("rgb(")}(n)?6:2;if(!Array.isArray(n))throw new Error(`Unhandled value type: ${JSON.stringify(n)}`);const e=n;if(e.every(function(r){return"number"==typeof r}))return 3===e.length||4===e.length?20:16;if("string"!=typeof e[0])throw new Error(`Expected an expression operator but received: ${JSON.stringify(e)}`);const i=Wr[e[0]];if(void 0===i)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return i.getReturnType(e.slice(1))}function tD(n){const e=n.toString();return e.includes(".")?e:e+".0"}function M5e(n){if(n.length<2||n.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${n.length}(${n.map(tD).join(", ")})`}function S5e(n,e){return void 0===n.stringLiteralsMap[e]&&(n.stringLiteralsMap[e]=Object.keys(n.stringLiteralsMap).length),n.stringLiteralsMap[e]}function Li(n,e,t){if(Array.isArray(e)&&"string"==typeof e[0]){const r=Wr[e[0]];if(void 0===r)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return r.toGlsl(n,e.slice(1),t)}const i=Y0(e);if((1&i)>0)return tD(e);if((8&i)>0)return e.toString();if((2&i)>0&&(void 0===t||2==t))return function pPt(n,e){return tD(S5e(n,e))}(n,e.toString());if((4&i)>0&&(void 0===t||4==t))return function dPt(n){const e=rw(n).slice();return e.length<4&&e.push(1),M5e(e.map(function(t,i){return i<3?t/255:t}))}(e);if((16&i)>0)return M5e(e);throw new Error(`Unexpected expression ${e} (expected type ${t})`)}function E5e(n){if(!(1&Y0(n)))throw new Error(`A numeric value was expected, got ${JSON.stringify(n)} instead`)}function Sc(n){for(let e=0;e<n.length;e++)E5e(n[e])}function T5e(n){if(!(2&Y0(n)))throw new Error(`A string value was expected, got ${JSON.stringify(n)} instead`)}function qG(n){if(!(8&Y0(n)))throw new Error(`A boolean value was expected, got ${JSON.stringify(n)} instead`)}function m1(n,e){if(n.length!==e)throw new Error(`Exactly ${e} arguments were expected, got ${n.length} instead`)}function Z0(n,e){if(n.length<e)throw new Error(`At least ${e} arguments were expected, got ${n.length} instead`)}function nD(n,e){if(n.length>e)throw new Error(`At most ${e} arguments were expected, got ${n.length} instead`)}function L5e(n){if(n.length%2!=0)throw new Error(`An even amount of arguments was expected, got ${n} instead`)}function XG(n,e){if(!function fPt(n){return Math.log2(n)%1==0}(e))throw new Error(`Could not infer only one type from the following expression: ${JSON.stringify(n)}`)}function D5e(n){return"u_var_"+n}Wr.get={getReturnType:function(n){return 31},toGlsl:function(n,e){m1(e,1),T5e(e[0]);const t=e[0].toString();return n.attributes.includes(t)||n.attributes.push(t),(n.inFragmentShader?"v_":"a_")+t}},Wr.var={getReturnType:function(n){return 31},toGlsl:function(n,e){m1(e,1),T5e(e[0]);const t=e[0].toString();return n.variables.includes(t)||n.variables.push(t),D5e(t)}};const I5e="u_paletteTextures";Wr.palette={getReturnType:function(n){return 4},toGlsl:function(n,e){m1(e,2),E5e(e[0]);const t=Li(n,e[0]),i=e[1];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const r=i.length,s=new Uint8Array(4*r);for(let c=0;c<r;c++){const l=i[c];let u;if("string"==typeof l)u=T8e(l);else{if(!Array.isArray(l))throw new Error("The second argument of palette must be an array of strings or colors");const p=l.length;if(4===p)u=l;else{if(3!==p)throw new Error(`Expected palette color to have 3 or 4 values, got ${p}`);u=[l[0],l[1],l[2],1]}}const f=4*c;s[f]=u[0],s[f+1]=u[1],s[f+2]=u[2],s[f+3]=255*u[3]}n.paletteTextures||(n.paletteTextures=[]);const o=`${I5e}[${n.paletteTextures.length}]`,a=new class uPt{constructor(e,t){this.name=e,this.data=t,this.texture_=null}getTexture(e){if(!this.texture_){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}}(o,s);return n.paletteTextures.push(a),`texture2D(${o}, vec2((${t} + 0.5) / ${r}.0, 0.5))`}};const YG="getBandValue";function R5e(n){return{getReturnType:function(e){return 8},toGlsl:function(e,t){m1(t,2);let i=31;for(let r=0;r<t.length;r++)i&=Y0(t[r]);if(0===i)throw new Error(`All arguments should be of compatible type, got ${JSON.stringify(t)} instead`);return i&=-5,`(${Li(e,t[0],i)} ${n} ${Li(e,t[1],i)})`}}}function B5e(n){return{getReturnType:function(e){return 8},toGlsl:function(e,t){Z0(t,2);for(let r=0;r<t.length;r++)qG(t[r]);let i="";return i=t.map(r=>Li(e,r)).join(` ${n} `),i=`(${i})`,i}}}function k5e(n,e){const i={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e},r=[];if(void 0!==n.color){const f=Li(i,n.color,4);r.push(`color = ${f};`)}if(void 0!==n.contrast){const f=Li(i,n.contrast,1);r.push(`color.rgb = clamp((${f} + 1.0) * color.rgb - (${f} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==n.exposure){const f=Li(i,n.exposure,1);r.push(`color.rgb = clamp((${f} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==n.saturation){const f=Li(i,n.saturation,1);r.push(`\n      float saturation = ${f} + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    `)}if(void 0!==n.gamma){const f=Li(i,n.gamma,1);r.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${f}));`)}if(void 0!==n.brightness){const f=Li(i,n.brightness,1);r.push(`color.rgb = clamp(color.rgb + ${f}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=i.variables.length;if(o>1&&!n.variables)throw new Error(`Missing variables in style (expected ${i.variables})`);for(let f=0;f<o;++f){const p=i.variables[f];if(!(p in n.variables))throw new Error(`Missing '${p}' in style variables`);s[D5e(p)]=function(){let v=n.variables[p];return"string"==typeof v&&(v=S5e(i,v)),void 0!==v?v:-9999999}}const a=Object.keys(s).map(function(f){return`uniform float ${f};`}),c=Math.ceil(e/4);a.push(`uniform sampler2D u_tileTextures[${c}];`),i.paletteTextures&&a.push(`uniform sampler2D ${I5e}[${i.paletteTextures.length}];`);const l=Object.keys(i.functions).map(function(f){return i.functions[f]});return{vertexShader:"\n    attribute vec2 a_textureCoord;\n    uniform mat4 u_tileTransform;\n    uniform float u_texturePixelWidth;\n    uniform float u_texturePixelHeight;\n    uniform float u_textureResolution;\n    uniform float u_textureOriginX;\n    uniform float u_textureOriginY;\n    uniform float u_depth;\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = a_textureCoord;\n      v_mapCoord = vec2(\n        u_textureOriginX + u_textureResolution * u_texturePixelWidth * v_textureCoord[0],\n        u_textureOriginY - u_textureResolution * u_texturePixelHeight * v_textureCoord[1]\n      );\n      gl_Position = u_tileTransform * vec4(a_textureCoord, u_depth, 1.0);\n    }\n  ",fragmentShader:`\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 u_renderExtent;\n    uniform float u_transitionAlpha;\n    uniform float u_texturePixelWidth;\n    uniform float u_texturePixelHeight;\n    uniform float u_resolution;\n    uniform float u_zoom;\n\n    ${a.join("\n")}\n\n    ${l.join("\n")}\n\n    void main() {\n      if (\n        v_mapCoord[0] < u_renderExtent[0] ||\n        v_mapCoord[1] < u_renderExtent[1] ||\n        v_mapCoord[0] > u_renderExtent[2] ||\n        v_mapCoord[1] > u_renderExtent[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(u_tileTextures[0],  v_textureCoord);\n\n      ${r.join("\n")}\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= u_transitionAlpha;\n    }`,uniforms:s,paletteTextures:i.paletteTextures}}Wr.band={getReturnType:function(n){return 1},toGlsl:function(n,e){Z0(e,1),nD(e,3);const t=e[0];if(!(YG in n.functions)){let o="";const a=n.bandCount||1;for(let c=0;c<a;c++){const l=Math.floor(c/4);let u=c%4;c===a-1&&1===u&&(u=3),o+=`\n          if (band == ${c+1}.0) {\n            return texture2D(u_tileTextures[${l}], v_textureCoord + vec2(dx, dy))[${u}];\n          }\n        `}n.functions[YG]=`\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / u_texturePixelWidth;\n          float dy = yOffset / u_texturePixelHeight;\n          ${o}\n        }\n      `}const i=Li(n,t),r=Li(n,e[1]||0),s=Li(n,e[2]||0);return`${YG}(${i}, ${r}, ${s})`}},Wr.time={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,0),"u_time"}},Wr.zoom={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,0),"u_zoom"}},Wr.resolution={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,0),"u_resolution"}},Wr["*"]={getReturnType:function(n){return 1},toGlsl:function(n,e){return Z0(e,2),Sc(e),`(${e.map(t=>Li(n,t)).join(" * ")})`}},Wr["/"]={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,2),Sc(e),`(${Li(n,e[0])} / ${Li(n,e[1])})`}},Wr["+"]={getReturnType:function(n){return 1},toGlsl:function(n,e){return Z0(e,2),Sc(e),`(${e.map(t=>Li(n,t)).join(" + ")})`}},Wr["-"]={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,2),Sc(e),`(${Li(n,e[0])} - ${Li(n,e[1])})`}},Wr.clamp={getReturnType:function(n){return 1},toGlsl:function(n,e){m1(e,3),Sc(e);const t=Li(n,e[1]),i=Li(n,e[2]);return`clamp(${Li(n,e[0])}, ${t}, ${i})`}},Wr["%"]={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,2),Sc(e),`mod(${Li(n,e[0])}, ${Li(n,e[1])})`}},Wr["^"]={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,2),Sc(e),`pow(${Li(n,e[0])}, ${Li(n,e[1])})`}},Wr.abs={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,1),Sc(e),`abs(${Li(n,e[0])})`}},Wr.floor={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,1),Sc(e),`floor(${Li(n,e[0])})`}},Wr.round={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,1),Sc(e),`floor(${Li(n,e[0])} + 0.5)`}},Wr.ceil={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,1),Sc(e),`ceil(${Li(n,e[0])})`}},Wr.sin={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,1),Sc(e),`sin(${Li(n,e[0])})`}},Wr.cos={getReturnType:function(n){return 1},toGlsl:function(n,e){return m1(e,1),Sc(e),`cos(${Li(n,e[0])})`}},Wr.atan={getReturnType:function(n){return 1},toGlsl:function(n,e){return Z0(e,1),nD(e,2),Sc(e),2===e.length?`atan(${Li(n,e[0])}, ${Li(n,e[1])})`:`atan(${Li(n,e[0])})`}},Wr[">"]={getReturnType:function(n){return 8},toGlsl:function(n,e){return m1(e,2),Sc(e),`(${Li(n,e[0])} > ${Li(n,e[1])})`}},Wr[">="]={getReturnType:function(n){return 8},toGlsl:function(n,e){return m1(e,2),Sc(e),`(${Li(n,e[0])} >= ${Li(n,e[1])})`}},Wr["<"]={getReturnType:function(n){return 8},toGlsl:function(n,e){return m1(e,2),Sc(e),`(${Li(n,e[0])} < ${Li(n,e[1])})`}},Wr["<="]={getReturnType:function(n){return 8},toGlsl:function(n,e){return m1(e,2),Sc(e),`(${Li(n,e[0])} <= ${Li(n,e[1])})`}},Wr["=="]=R5e("=="),Wr["!="]=R5e("!="),Wr["!"]={getReturnType:function(n){return 8},toGlsl:function(n,e){return m1(e,1),qG(e[0]),`(!${Li(n,e[0])})`}},Wr.all=B5e("&&"),Wr.any=B5e("||"),Wr.between={getReturnType:function(n){return 8},toGlsl:function(n,e){m1(e,3),Sc(e);const t=Li(n,e[1]),i=Li(n,e[2]),r=Li(n,e[0]);return`(${r} >= ${t} && ${r} <= ${i})`}},Wr.array={getReturnType:function(n){return 16},toGlsl:function(n,e){Z0(e,2),nD(e,4),Sc(e);const t=e.map(function(i){return Li(n,i,1)});return`vec${e.length}(${t.join(", ")})`}},Wr.color={getReturnType:function(n){return 4},toGlsl:function(n,e){Z0(e,3),nD(e,4),Sc(e),3===e.length&&e.push(1);const i=e.map(function(r,s){return Li(n,r,1)+(s<3?" / 255.0":"")});return`vec${e.length}(${i.join(", ")})`}},Wr.interpolate={getReturnType:function(n){let e=5;for(let t=3;t<n.length;t+=2)e&=Y0(n[t]);return e},toGlsl:function(n,e,t){L5e(e),Z0(e,6);const i=e[0];let r;switch(i[0]){case"linear":r=1;break;case"exponential":r=i[1];break;default:r=null}if(!r)throw new Error(`Invalid interpolation type for "interpolate" operator, received: ${JSON.stringify(i)}`);t=void 0!==t?t:31;const s=Wr.interpolate.getReturnType(e)&t;XG(e,s);const o=Li(n,e[1]),a=tD(r);let c="";for(let l=2;l<e.length-2;l+=2){const u=Li(n,e[l]),f=c||Li(n,e[l+1],s),p=Li(n,e[l+2]);c=`mix(${f}, ${Li(n,e[l+3],s)}, pow(clamp((${o} - ${u}) / (${p} - ${u}), 0.0, 1.0), ${a}))`}return c}},Wr.match={getReturnType:function(n){let e=31;for(let t=2;t<n.length;t+=2)e&=Y0(n[t]);return e&=Y0(n[n.length-1]),e},toGlsl:function(n,e,t){L5e(e),Z0(e,4),t=void 0!==t?t:31;const i=Wr.match.getReturnType(e)&t;XG(e,i);const r=Li(n,e[0]),s=Li(n,e[e.length-1],i);let o=null;for(let a=e.length-3;a>=1;a-=2)o=`(${r} == ${Li(n,e[a])} ? ${Li(n,e[a+1],i)} : ${o||s})`;return o}},Wr.case={getReturnType:function(n){let e=31;for(let t=1;t<n.length;t+=2)e&=Y0(n[t]);return e&=Y0(n[n.length-1]),e},toGlsl:function(n,e,t){(function gPt(n){if(n.length%2==0)throw new Error(`An odd amount of arguments was expected, got ${n} instead`)})(e),Z0(e,3),t=void 0!==t?t:31;const i=Wr.case.getReturnType(e)&t;XG(e,i);for(let o=0;o<e.length-1;o+=2)qG(e[o]);const r=Li(n,e[e.length-1],i);let s=null;for(let o=e.length-3;o>=0;o-=2)s=`(${Li(n,e[o])} ? ${Li(n,e[o+1],i)} : ${s||r})`;return s}};const P5e=class F5e extends Lpe{constructor(e){const t=(e=e?Object.assign({},e):{}).style||{};delete e.style;const i=e.cacheSize;delete e.cacheSize,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.cacheSize_=i,this.styleVariables_=this.style_.variables||{},this.addChangeListener("source",this.handleSourceUpdate_)}getSources(e,t){const i=this.getSource();return this.sources_?"function"==typeof this.sources_?this.sources_(e,t):this.sources_:i?[i]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){const e=k5e(this.style_,this.getSourceBandCount_());return new lPt(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.cacheSize_,paletteTextures:e.paletteTextures})}renderSources(e,t){const i=this.getRenderer();let r;for(let s=0,o=t.length;s<o;++s)this.renderedSource_=t[s],i.prepareFrame(e)&&(r=i.renderFrame(e));return r}render(e,t){this.rendered=!0;const i=e.viewState,r=this.getSources(e.extent,i.resolution);let s=!0;for(let a=0,c=r.length;a<c;++a){const l=r[a],u=l.getState();if("loading"==u){const f=()=>{"ready"==l.getState()&&(l.removeEventListener("change",f),this.changed())};l.addEventListener("change",f)}s=s&&"ready"==u}const o=this.renderSources(e,r);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=i.resolution,o;if(this.renderedResolution_>.5*i.resolution){const a=this.getSources(e.extent,this.renderedResolution_).filter(c=>!r.includes(c));if(a.length>0)return this.renderSources(e,a)}return o}setStyle(e){this.styleVariables_=e.variables||{},this.style_=e;const t=k5e(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}};var mPt=ae(4302),APt=ae.n(mPt);let ZG=(()=>{class n{constructor(t){this.colorService=t,this.font=(i=12)=>`bold ${i}px Roboto, "Helvetica Neue", sans-serif`,this.demMin=90/255,this.demMax=150/255,this.shadowContrast=.18,this.shadowOpacity=.15,this.rotateZoom=17.5,this.toZoom=i=>Math.log2(156543.03390625)-Math.log2(i),this.styleWater=(i,r)=>(this.toZoom(r),[new $o({stroke:new Ro({color:"transparent"}),fill:new ks({color:"rgba(148, 218, 237, 0.5)"})})]),this.styleBuilding=(i,r)=>(this.toZoom(r),[new $o({stroke:new Ro({color:"transparent"}),fill:new ks({color:"rgba(130, 130, 130, 1)"})}),new $o({geometry:"roofLines",stroke:new Ro({color:"rgba(130, 255, 130, 1)",width:4})})]),this.styleRoadFill=(i,r)=>(this.toZoom(r),[new $o({stroke:new Ro({color:"transparent"}),fill:new ks({color:"rgba(200, 200, 200, 0.7)"})})]),this.styleParcel=(i,r)=>(this.toZoom(r),[new $o({stroke:new Ro({color:"rgba(50, 0, 0, 0.5)",width:1,lineDash:[14,6,3,6]}),fill:new ks({color:"transparent"})})]),this.styleKallmurar=(i,r)=>(this.toZoom(r),[new $o({stroke:new Ro({color:"rgba(0, 0, 0, 0.5)",width:1}),fill:new ks({color:"transparent"})})]),this.styleRoads=(i,r)=>(this.toZoom(r),[new $o({stroke:new Ro({color:"rgba(99, 99, 99, 0.3)",width:1}),fill:new ks({color:"transparent"})})]),this.styleThrees=(i,r)=>{this.toZoom(r);const o="evergreen"===i.getProperties().type,a="standalone"===i.getProperties().type;return[new $o({stroke:new Ro({color:a?"rgba(33, 110, 26, 0.8)":"transparent",width:.6}),fill:new ks({color:a?"rgba(152, 235, 64, 0.5)":o?"rgba(99, 141, 58, 0.5)":"rgba(164, 216, 109, 0.5)"})})]},this.styleIsochrone=(i,r)=>{var s=this.toZoom(r);const o=function WKe(n,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(n*t)/t}(Number(i.getProperties().Contour)),c=o%10==0;let l="rgba(0, 0, 0, 0.5)",u=c?1:o%5==0?.5:.3;s>=16&&(u=.5,l="rgba(0, 0, 0, 0.5)");const f=[new $o({stroke:new Ro({color:l,width:u})})];return s<16&&c&&f.push(new $o({text:new Hh({text:`${o}`,fill:new ks({color:"rgba(255, 255, 255, 0.8)"}),stroke:new Ro({color:"rgba(0, 0, 0, 0.8)",width:2})})})),f},this.styleDistance=(i,r)=>{const s=[];var o=this.toZoom(r);let a="rgba(0, 0, 0, 0.5)",c=1;i.getProperties();const u=i.getProperties().dist;return o<999&&(c=2,a="rgba(0, 0, 0, 0.5)",s.push(new $o({text:new Hh({font:this.font(),text:`${u}`,fill:new ks({color:"rgba(0, 0, 0, 0.8)"}),stroke:new Ro({color:"rgba(255, 255, 255, 0.8)",width:3})})}))),s.push(new $o({stroke:new Ro({color:a,width:c})})),s},this.DEMStyle={variables:{min:this.demMin,max:this.demMax,span:this.demMax-this.demMin},color:["interpolate",["linear"],this.normalize(["band",1]),...this.getColorStops("blackbody",0,1,10,!0)]},this.ShadowStyle={variables:{contrast:this.shadowContrast},color:["interpolate",["linear"],["band",1],0,[0,0,0,0],.8,[0,0,0,0],1,[255,255,255,.8]]},this.styleHouse=(i,r,s)=>{var o=this.toZoom(r);const a=!0===i.getProperties().roofCenterShow,c=[new $o({geometry:"roofLines",stroke:new Ro({color:"rgba(83, 83, 83, 1)",width:1})}),new $o({geometry:"footPrint",stroke:new Ro({color:s?this.colorService.rgba(vl.accent,.9):"rgba(83, 83, 83, 1)"}),fill:new ks({color:s?this.colorService.rgba(vl.accent,.5):"rgba(184, 184, 184, 0.5)"})})];if(o<this.rotateZoom&&s&&c.push(...c,new $o({geometry:"roofCenter",image:new h8({radius:14,stroke:new Ro({width:1,color:this.colorService.rgba(vl.accent,.9)}),fill:new ks({color:"rgba(100, 100, 100, 1)"})}),stroke:new Ro({color:"rgba(0, 0, 0, 0.5)",width:3}),zIndex:1/0,text:new Hh({offsetX:0,offsetY:0,text:"open_with",font:"normal 20px Material Icons",fill:new ks({color:"white"})})})),a){let l=[-25,25];(i.getProperties().rotation>90||i.getProperties().rotation<-90)&&(l=[25,-25]),c.push(new $o({image:new h8({radius:30/r,stroke:new Ro({color:"rgba(10, 10,10, 0.3)",width:2})}),geometry:"roofCenter",text:new Hh({font:"14px sans-serif",overflow:!0,fill:new ks({color:this.colorService.rgb(vl.primary)}),text:`${i.getProperties().rotation}\xb0`})}))}return c},this.createRotateStyle=(i,r)=>{var s=this.toZoom(r);const o=new $o({image:new h8({radius:14,stroke:new Ro({width:1,color:this.colorService.rgba(vl.accent,.9)}),fill:new ks({color:"rgba(100, 100, 100, 1)"})}),stroke:new Ro({color:"rgba(0, 0, 0, 0.5)",width:3}),zIndex:1/0,text:new Hh({offsetX:0,offsetY:0,text:"refresh",font:"normal 20px Material Icons",fill:new ks({color:"white"}),rotation:i.getProperties().rotation})});return s<this.rotateZoom?[new $o({})]:i&&i.get("rotate-arrow")?o:void 0}}getColorStops(t,i,r,s,o){const a=(r-i)/(s-1),c=new Array(2*s),l=APt()({colormap:t,nshades:s,format:"rgba"});o&&l.reverse();for(let u=0;u<s;u++)c[2*u]=i+u*a,c[2*u+1]=l[u];return[0,[0,0,0,0],.01,...c.slice(1)]}normalize(t){return["/",["-",t,["var","min"]],["var","span"]]}}return n.\u0275fac=function(t){return new(t||n)(Xe(Ev))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),H5e=(()=>{class n{constructor(t){this.dataOLStyleService=t,this.demLayer=new P5e({properties:new rc({key:P1.dem,name:"dem",maptip:!1,maptipCallback:i=>(console.log(i),i?`${i[0]}m`:"-")}),zIndex:1,source:new OG({sources:[{bands:[1],url:"/assets/data/dem.tif",min:0,max:255,nodata:0}]}),style:this.dataOLStyleService.DEMStyle}),this.shadowLayer=new P5e({properties:new rc({key:P1.shadow,name:"shadow",maptip:!1,maptipCallback:i=>(console.log(i),i?`${i[0]}`:"-")}),source:new OG({sources:[{bands:[1],url:"/assets/data/hillshade.tif",min:0,max:255,nodata:0}]}),opacity:window.shadowOpacity,style:this.dataOLStyleService.ShadowStyle}),this.extraLayers=[this.demLayer,this.shadowLayer,new bw({source:new SA({url:"https://maps.geoinfomittskane.se/arcgis/rest/services/Orto/LAS2019/MapServer",params:{}}),properties:new rc({key:P1.dem2,name:"DEM",maptip:!0,maptipCallback:i=>`Elevation ${cn(i.attributes["Pixel Value"],0)}m`}),zIndex:1,opacity:.7,visible:!1}),new O2({source:new ol({url:"/assets/data/waterArea.json",format:new X3}),properties:new rc({key:P1.waterArea,name:"waterArea"}),zIndex:1,visible:!0,style:this.dataOLStyleService.styleWater}),new O2({source:new ol({url:"/assets/data/threes.json",format:new X3}),properties:new rc({key:P1.threes,name:"threes"}),zIndex:1,visible:!0,style:this.dataOLStyleService.styleThrees}),new O2({source:new ol({url:"/assets/data/kallmurar.json",format:new X3}),properties:new rc({key:P1.kallmurar,name:"kallmurar"}),zIndex:1,visible:!0,style:this.dataOLStyleService.styleKallmurar}),new O2({source:new ol({url:"/assets/data/elevation.json",format:new X3}),properties:new rc({key:P1.heightLines,name:"Height lines"}),zIndex:1,visible:!0,style:this.dataOLStyleService.styleIsochrone}),new O2({source:new ol({url:"/assets/data/roads.json",format:new X3}),properties:new rc({key:P1.roads,name:"Roads"}),zIndex:1,visible:!0,style:this.dataOLStyleService.styleRoads}),new O2({source:new ol({url:"/assets/data/roadFill.json",format:new X3}),properties:new rc({key:P1.roadFills,name:"roadFill"}),zIndex:1,visible:!0,style:this.dataOLStyleService.styleRoadFill}),new O2({source:new ol({url:"/assets/data/parcel.json",format:new X3}),properties:new rc({key:P1.parcelBorders,name:"Tomter",maptip:!1,maptipCallback:i=>`${cn(i.getGeometry().getArea()/1e4,1)}ha tomt`}),zIndex:1,visible:!0,style:this.dataOLStyleService.styleParcel}),new O2({source:new ol({url:"/assets/data/building.json",format:new X3}),properties:new rc({key:P1.building,name:"building"}),zIndex:1,visible:!0,style:this.dataOLStyleService.styleBuilding}),new O2({source:new ol({url:"/assets/data/water.json",format:new X3}),properties:new rc({key:P1.water,name:"water"}),zIndex:1,visible:!0}),new O2({source:new ol,properties:new rc({key:P1.distanceLines}),visible:!0,zIndex:1,style:this.dataOLStyleService.styleDistance})]}}return n.\u0275fac=function(t){return new(t||n)(Xe(ZG))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iD=(()=>{class n{constructor(t,i,r){this.cookieService=t,this.dataOLLayerService=i,this.dataOLStyleService=r,this.cookieKey="ol-layer",this.subscriptions=[],this.layers$=new Vs([]),this.update$=new $e,this.update$.subscribe(()=>{this.setStore()})}update(){this.update$.next(void 0)}onDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}getStore(t){const i=this.cookieService.get(this.cookieKey);return""===i?void 0:(JSON.parse(i).forEach(s=>{const o=t.find(a=>a.getProperties().key===s.key);!o||(void 0!==s.opacity&&o.setOpacity(s.opacity||1),void 0!==s.visible&&o.setVisible(s.visible))}),t)}setStore(){const t=this.layers$.value.map(i=>({key:i.getProperties().key,visible:i.getVisible(),opacity:i.getOpacity()}));this.cookieService.set(this.cookieKey,JSON.stringify(t))}getLayer(t){return this.layers$.getValue().find(r=>r.getProperties().key===t)}setLayerProperty(t,i,r){this.getLayer(t).setProperties({[i]:r})}initLayers(t,i){let r=[new O2({source:new ol({features:[t,i]}),properties:new rc({key:P1.House,name:"Passive house"}),zIndex:100})];return this.layers$.next(r),r}}return n.\u0275fac=function(t){return new(t||n)(Xe(U3),Xe(H5e),Xe(ZG))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JG=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f){this.houseService=t,this.olBaseMapService=i,this.olMeasureService=r,this.olViewService=s,this.olLayerService=o,this.colorService=a,this.turfService=c,this.appService=l,this.httpClient=u,this.cookieService=f,this.update$=new $e,this.elevations=[]}zoomToHouse(){const{lat:t,lng:i}=this.houseService.house$.value.orientation,r=xm([i,t]);this.olViewService.animate({center:r,zoom:17.5})}identify(t){return this.olLayerService.layers$.value.map(r=>{const s=r.getProperties();if(!0!==s.maptip)return;const o=r.getSource();if(o instanceof SA&&this.esriMapIdentity$(o.getUrl(),t).pipe(Ut(s.maptipCallback)),o instanceof OG){const a=this.olBaseMapService.map.getPixelFromCoordinate(t),c=r.getData(a);return console.log(t,c),di(s.maptipCallback(c))}return r instanceof O2?di(r.getSource().getFeaturesAtCoordinate(t).map(s.maptipCallback).join("<br/>")):void 0}).filter(r=>r)}esriMapIdentity$(t,i){return this.httpClient.get(`${t}/identify`,{params:{geometry:`${i[0]}, ${i[1]}`,geometryType:"esriGeometryPoint",sr:3857,layers:"all",tolerance:"2",mapExtent:`${i[0]}, ${i[1]},${i[0]}, ${i[1]}`,imageDisplay:"2,2,2",returnGeometry:!1,f:"pjson"}}).pipe(Jo(o=>{if(o.error)throw console.error("ESRI error",o.error),new Error(o.error.message)}),Ut(o=>o.results))}getStoreIdenify(){const t=this.cookieService.get("indenify");if(""===t)return;const i=JSON.parse(t);this.elevations=i}setStore(){const t=this.elevations.length;this.elevations=this.elevations.slice(t-40,t),this.cookieService.set("indenify",JSON.stringify(this.elevations))}getElevationPoints(){const{localAndGlobal:t}=this.houseService.getFootPrintPolygon();return this.getStoreIdenify(),t.map(r=>{const[s,o]=r,a=o.map(l=>cn(l,2)).join("_"),c=s.map(l=>cn(l,2)).join("_");this.elevations.find(l=>l.globalKey===c)||this.esriMapIdentity$("https://maps.geoinfomittskane.se/arcgis/rest/services/Orto/LAS2019/MapServer",s).subscribe(l=>{this.elevations.push({globalKey:c,localKey:a,xy:o,value:Number(l[0].attributes["Pixel Value"])}),this.setStore()})}),this.elevations}}return n.\u0275fac=function(t){return new(t||n)(Xe(No),Xe(lG),Xe(zL),Xe(d5e),Xe(iD),Xe(Ev),Xe(pT),Xe(io),Xe(dh),Xe(U3))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z5e=(()=>{class n{constructor(t,i){this.httpClient=t,this.sanitizer=i,this.height="32px",this.width="32px"}set color(t){this.fillColor="primary"===t?"var(--primary-color)":"accent"===t?"var(--accent-color)":"first"===t?"var(--first-color)":"second"===t?"var(--second-color)":"third"===t?"var(--third-color)":`${t}`}set size(t){this.width=`${t[0]}px`,this.height=`${t[1]}px`}ngOnInit(){this.httpClient.get(this.url,{responseType:"text"}).subscribe({next:t=>{t=t.replace(/height=\"64px\"/gi,"").replace(/width=\"64px\"/gi,""),this.svgData=this.sanitizer.bypassSecurityTrustHtml(t)},error:t=>{this.background="#aaa"}})}}return n.\u0275fac=function(t){return new(t||n)(U(dh),U(Mf))},n.\u0275cmp=Sn({type:n,selectors:[["app-svg"]],hostVars:8,hostBindings:function(t,i){2&t&&H3("background",i.background)("fill",i.fillColor)("height",i.height)("width",i.width)},inputs:{background:"background",fillColor:"fillColor",height:"height",width:"width",url:"url",color:"color",size:"size"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(t,i){1&t&&Ue(0,"div",0),2&t&&ge("innerHTML",i.svgData,k3)},styles:["[_nghost-%COMP%]{display:inline-block}  svg>g>g>path:first-child{fill:#747474}"]}),n})();const vPt=[[["","icon",""]],[["","options",""]]],_Pt=["[icon]","[options]"];let yPt=(()=>{class n{constructor(){this.floatLeft=!1,this.click=new sr,this.hover=!0,this.disabled=!1}ngOnInit(){}mouseEnter(t){this.timedOutCloser&&clearTimeout(this.timedOutCloser),t.openMenu()}mouseLeave(t){this.timedOutCloser=setTimeout(()=>{t.closeMenu()},50)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Sn({type:n,selectors:[["button-option"]],hostVars:2,hostBindings:function(t,i){2&t&&$r("hover",i.disabled)},inputs:{floatLeft:"floatLeft",disabled:"disabled"},outputs:{click:"click"},ngContentSelectors:_Pt,decls:8,vars:2,consts:[["mat-mini-fab","","color","accent",3,"mouseenter"],[1,"origin",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["xPosition","before",2,"z-index","99999",3,"hasBackdrop"],["menu","matMenu"],[3,"mouseenter","mouseleave"]],template:function(t,i){if(1&t){const r=no();T1(vPt),B(0,"button",0),Kt("mouseenter",function(){zn(r);const o=Si(3);return h(i.mouseEnter(o))}),Do(1),z(),Ue(2,"div",1,2),B(4,"mat-menu",3,4)(6,"div",5),Kt("mouseenter",function(){zn(r);const o=Si(3);return h(i.mouseEnter(o))})("mouseleave",function(){zn(r);const o=Si(3);return h(i.mouseLeave(o))}),Do(7,1),z()()}if(2&t){const r=Si(5);K(2),ge("matMenuTriggerFor",r),K(2),ge("hasBackdrop",!1)}},dependencies:[Tv,DZ,BZ],styles:['.container[_ngcontent-%COMP%]{display:block;position:absolute;float:right;margin:6px 0;width:initial;bottom:0;transform-origin:bottom right}.container.float-left[_ngcontent-%COMP%]{left:60px}.container.float-right[_ngcontent-%COMP%]{right:60px}.content[_ngcontent-%COMP%]{border:2px solid var(--color-50);background:var(--color-0);overflow:hidden;font-size:.8rem;white-space:nowrap;border-radius:4px;line-height:28px;z-index:2;position:relative}.origin[_ngcontent-%COMP%]{position:absolute;right:60px;width:40px;height:40px;z-index:-1;pointer-events:none}  .mat-menu-panel{overflow:visible}  .mat-menu-panel>div>div:before{content:"";position:absolute;bottom:40px;right:-100px;width:90px;height:9px;background:transparent;z-index:-1}'],data:{animation:[iGe]}}),n})();const wPt=[[["","label",""]]],bPt=["[label]"];let O5e=(()=>{class n{constructor(){this.floatLeft=!1,this.stateChange=new sr,this.hover=!1}ngOnInit(){}mouseleave(){this.hover=!1}mouseenter(){this.hover=!0}change(){this.stateChange.emit(!this.state)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Sn({type:n,selectors:[["checkbox-toc"]],hostVars:2,hostBindings:function(t,i){2&t&&$r("hover",i.hover)},inputs:{floatLeft:"floatLeft",state:"state"},outputs:{stateChange:"stateChange"},ngContentSelectors:bPt,decls:3,vars:1,consts:[[1,"container",3,"mouseenter","mouseleave"],[3,"checked","change"]],template:function(t,i){1&t&&(T1(wPt),B(0,"label",0),Kt("mouseenter",function(){return i.mouseenter()})("mouseleave",function(){return i.mouseleave()}),Do(1,0,["class","label","[class.float-left]","floatLeft","[class.float-right]","!floatLeft"]),B(2,"mat-slide-toggle",1),Kt("change",function(){return i.change()}),z()()),2&t&&(K(2),ge("checked",i.state))},dependencies:[XC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;gap:16px;height:16px;transition:background-color .2s ease-in-out}[_nghost-%COMP%]:hover{background-color:var(--color-5)}mat-slide-toggle[_ngcontent-%COMP%]{transform:scale(.75)}label.container[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:relative;font-size:.8rem;line-height:1em;white-space:nowrap}"],data:{animation:[mH]}}),n})();function xPt(n,e){if(1&n){const t=no();B(0,"div",1)(1,"checkbox-toc",2),Kt("stateChange",function(){const s=zn(t).$implicit;return h(Ft().setVisible(s))}),B(2,"span",3),H(3),z(),B(4,"span",4),H(5),z()()()}if(2&n){const t=e.$implicit;K(1),ge("floatLeft",!1)("state",t.getVisible()),K(2),Nn(" ",t.getProperties().name," "),K(2),Nn(" ",t.getProperties().name," ")}}let CPt=(()=>{class n{constructor(t,i){this.oLLayerService=t,this.houseService=i,this.layers$=this.oLLayerService.layers$}ngAfterViewInit(){}setVisible(t){t.setVisible(!t.getVisible()),this.oLLayerService.update()}setOpacity(t,i){t.setOpacity(i),this.oLLayerService.update()}}return n.\u0275fac=function(t){return new(t||n)(U(iD),U(No))},n.\u0275cmp=Sn({type:n,selectors:[["app-map-toc-layer"]],decls:2,vars:3,consts:[["fxLayout","row","fxLayoutAlign","flex-end stretch",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","flex-end stretch"],[3,"floatLeft","state","stateChange"],["label",""],["icon",""]],template:function(t,i){1&t&&(Dt(0,xPt,6,4,"div",0),zi(1,"async")),2&t&&ge("ngForOf",Er(1,1,i.layers$))},dependencies:[t3,m6,w0,O5e,g0],styles:[".mat-slider-horizontal[_ngcontent-%COMP%]{height:18px;transform:translateY(-16px);max-width:30px}"],data:{animation:[xS,gH]}}),n})();const MPt=[[["","label",""]],[["","icon",""]]],SPt=["[label]","[icon]"];let EPt=(()=>{class n{constructor(){this.floatLeft=!1,this.stateChange=new sr,this.hover=!1}ngOnInit(){}mouseleave(){this.hover=!1}mouseenter(){this.hover=!0}change(){this.stateChange.emit(!this.state)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Sn({type:n,selectors:[["checkbox-state"]],hostVars:2,hostBindings:function(t,i){2&t&&$r("hover",i.hover)},inputs:{floatLeft:"floatLeft",state:"state"},outputs:{stateChange:"stateChange"},ngContentSelectors:SPt,decls:5,vars:6,consts:[[1,"container",3,"mouseenter","mouseleave"],[3,"checked","change"]],template:function(t,i){1&t&&(T1(MPt),B(0,"mat-label"),Do(1),z(),B(2,"label",0),Kt("mouseenter",function(){return i.mouseenter()})("mouseleave",function(){return i.mouseleave()}),Do(3,1),B(4,"mat-slide-toggle",1),Kt("change",function(){return i.change()}),z()()),2&t&&($r("float-left",i.floatLeft)("float-right",!i.floatLeft),ge("@stateSlideIn",i.hover&&!i.floatLeft),K(4),ge("checked",i.state))},dependencies:[jee,XC],styles:['mat-label[_ngcontent-%COMP%]{display:block;position:absolute;float:right;background:var(--accent);border-radius:9px;margin:6px 0;line-height:28px;padding:0 8px;white-space:nowrap;font-size:.8rem;overflow:hidden;width:initial}mat-label.float-left[_ngcontent-%COMP%]{left:80px}mat-label.float-right[_ngcontent-%COMP%]{right:80px}[_nghost-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px}label.container[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:row;align-items:center;justify-content:space-between;position:relative;padding:8px 0}label.container[_ngcontent-%COMP%]:before{content:"";display:inline-block;position:absolute;width:68px;border-top:1px solid var(--color-20);top:0;left:-4px}label.container[_ngcontent-%COMP%]    >span{height:24px;width:24px;overflow:hidden}'],data:{animation:[mH]}}),n})();const TPt=[[["","label",""]],[["","icon",""]]],LPt=["[label]","[icon]"];let DPt=(()=>{class n{constructor(){this.floatLeft=!1,this.click=new sr,this.hover=!1,this.disabled=!1}ngOnInit(){}mouseleave(){this.hover=!1}mouseenter(){this.hover=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Sn({type:n,selectors:[["button-state"]],hostVars:2,hostBindings:function(t,i){2&t&&$r("hover",i.disabled)},inputs:{floatLeft:"floatLeft",disabled:"disabled"},outputs:{click:"click"},ngContentSelectors:LPt,decls:4,vars:5,consts:[["mat-mini-fab","","color","accent",3,"click","mouseenter","mouseleave"]],template:function(t,i){1&t&&(T1(TPt),B(0,"mat-label"),Do(1),z(),B(2,"button",0),Kt("click",function(){return i.click})("mouseenter",function(){return i.mouseenter()})("mouseleave",function(){return i.mouseleave()}),Do(3,1),z()),2&t&&($r("float-left",i.floatLeft)("float-right",!i.floatLeft),ge("@stateSlideIn",i.hover))},dependencies:[jee,Tv],styles:['mat-label[_ngcontent-%COMP%]{display:block;position:absolute;float:right;background:var(--accent);color:"black";border-radius:9px;margin:6px 0;line-height:28px;padding:0 8px;white-space:nowrap;font-size:.8rem;overflow:hidden;width:initial}mat-label.float-left[_ngcontent-%COMP%]{left:60px}mat-label.float-right[_ngcontent-%COMP%]{right:60px}'],data:{animation:[mH]}}),n})();function IPt(n,e){if(1&n){const t=no();Ls(0),B(1,"div",11)(2,"checkbox-state",12),Kt("stateChange",function(){zn(t);const r=Ft(5);return h(r.appService.setState(r.States.doors))}),B(3,"span",13),H(4," Doors "),z(),B(5,"span",14)(6,"mat-icon",15),H(7," door_front"),z()()(),B(8,"checkbox-state",12),Kt("stateChange",function(){zn(t);const r=Ft(5);return h(r.appService.setState(r.States.theoreticalWalls))}),B(9,"span",13),H(10," Theoretic walls "),z(),B(11,"span",14)(12,"mat-icon",15),H(13," density_large"),z()()(),B(14,"checkbox-state",12),Kt("stateChange",function(){zn(t);const r=Ft(5);return h(r.appService.setState(r.States.examplePlan))}),B(15,"span",13),H(16," Example Plan "),z(),B(17,"span",14)(18,"mat-icon",15),H(19,"table_bar"),z()()(),B(20,"checkbox-state",12),Kt("stateChange",function(){zn(t);const r=Ft(5);return h(r.appService.setState(r.States.grid))}),B(21,"span",13),H(22," Grid "),z(),B(23,"span",14)(24,"mat-icon",15),H(25,"grid_on"),z()()(),B(26,"checkbox-state",12),Kt("stateChange",function(){zn(t);const r=Ft(5);return h(r.appService.setState(r.States.stramien))}),B(27,"span",13),H(28," Stramien "),z(),B(29,"span",14)(30,"mat-icon",15),H(31,"grid_3x3"),z()()(),B(32,"checkbox-state",12),Kt("stateChange",function(){zn(t);const r=Ft(5);return h(r.appService.setState(r.States.towerFootprint))}),B(33,"span",13),H(34," Tower footprint "),z(),B(35,"span",14)(36,"mat-icon",15),H(37,"hexagon"),z()()(),B(38,"checkbox-state",12),Kt("stateChange",function(){zn(t);const r=Ft(5);return h(r.appService.setState(r.States.measure))}),B(39,"span",13),H(40," Measurements "),z(),B(41,"span",14)(42,"mat-icon",15),H(43,"square_foot"),z()()()(),Ds()}if(2&n){const t=Ft(5);K(2),ge("floatLeft",t.floatLeft)("state",t.getState(t.States.doors)),K(6),ge("floatLeft",t.floatLeft)("state",t.getState(t.States.theoreticalWalls)),K(6),ge("floatLeft",t.floatLeft)("state",t.getState(t.States.examplePlan)),K(6),ge("floatLeft",t.floatLeft)("state",t.getState(t.States.grid)),K(6),ge("floatLeft",t.floatLeft)("state",t.getState(t.States.stramien)),K(6),ge("floatLeft",t.floatLeft)("state",t.getState(t.States.towerFootprint)),K(6),ge("floatLeft",t.floatLeft)("state",t.getState(t.States.measure))}}function RPt(n,e){if(1&n){const t=no();B(0,"checkbox-state",12),Kt("stateChange",function(){const s=zn(t).$implicit;return h(Ft(6).appService.setState(s.state))}),B(1,"span",13),H(2),z(),B(3,"span",18),Ue(4,"app-svg",19),z()()}if(2&n){const t=e.$implicit,i=Ft(6);ge("floatLeft",i.floatLeft)("state",i.getState(t.state)),K(2),Nn(" ",t.title," "),K(2),ka("sensor-",t.state,""),Ur("url","assets/svg/",t.state,".svg")}}function BPt(n,e){if(1&n&&(Ls(0),B(1,"div",16),Dt(2,RPt,5,7,"checkbox-state",17),z(),Ds()),2&n){const t=Ft(5);K(2),ge("ngForOf",t.sensors)}}function kPt(n,e){if(1&n&&(B(0,"div",10),Dt(1,IPt,44,14,"ng-container",0),zi(2,"async"),zi(3,"async"),Dt(4,BPt,3,1,"ng-container",0),zi(5,"async"),z()),2&n){const t=Ft(4);K(1),ge("ngIf",Er(2,2,t.page$).startsWith("house")||Er(3,4,t.page$).startsWith("?")),K(3),ge("ngIf",Er(5,6,t.page$).startsWith("wired"))}}function FPt(n,e){1&n&&s2(0)}function PPt(n,e){1&n&&s2(0)}function HPt(n,e){if(1&n){const t=no();Ls(0),Dt(1,kPt,6,8,"div",7),B(2,"button",8),Kt("click",function(){zn(t);const r=Ft(3);return h(r.toc=!r.toc)}),B(3,"mat-icon"),H(4,"keyboard_double_arrow_down "),z()(),Dt(5,FPt,1,0,"ng-container",9),Dt(6,PPt,1,0,"ng-container",9),Ds()}if(2&n){const t=Ft(3),i=Si(5),r=Si(3);K(1),ge("ngIf",t.toc),K(1),$r("active",t.toc),K(1),k9("transform","rotate(",t.toc?20:180,"deg)"),H3("transition","0.4s"),K(2),ge("ngTemplateOutlet",i),K(1),ge("ngTemplateOutlet",r)}}function zPt(n,e){1&n&&(B(0,"mat-icon"),H(1,"home"),z())}function OPt(n,e){1&n&&(B(0,"mat-icon",15),H(1,"home_outline"),z())}function NPt(n,e){1&n&&s2(0)}function VPt(n,e){if(1&n){const t=no();Ls(0),B(1,"button-state",20),Kt("click",function(){zn(t);const r=Ft(3);return h(r.appService.setState(r.States.measure))}),B(2,"span",13),H(3),z(),B(4,"span",14)(5,"mat-icon"),H(6,"square_foot"),z()()(),B(7,"button-state",20),Kt("click",function(){zn(t);const r=Ft(3);return h(r.appService.setState(r.States.silhouette))}),B(8,"span",13),H(9),z(),B(10,"span",14),Dt(11,zPt,2,0,"mat-icon",21),Dt(12,OPt,2,0,"ng-template",null,22,X2),z()(),Dt(14,NPt,1,0,"ng-container",9),Ds()}if(2&n){const t=Si(13),i=Ft(3),r=Si(3);K(1),ge("floatLeft",i.floatLeft),K(2),Zl(i.getState(i.States.measure)?"Remove measurements":"Add measurements"),K(4),ge("floatLeft",i.floatLeft),K(2),Zl(i.getState(i.States.silhouette)?"Remove Silhouette":"Silhouette"),K(2),ge("ngIf",!i.getState(i.States.silhouette))("ngIfElse",t),K(3),ge("ngTemplateOutlet",r)}}function UPt(n,e){if(1&n){const t=no();B(0,"button-state",20),Kt("click",function(){zn(t);const r=Ft(4);return h(r.appService.setState(r.States.walkLine))}),B(1,"span",13),H(2),z(),B(3,"span",14)(4,"mat-icon"),H(5,"directions_walk"),z()()()}if(2&n){const t=Ft(4);ge("floatLeft",t.floatLeft),K(2),Zl(t.getState(t.States.walkLine)?"Remove walkline":"Add walkline")}}function GPt(n,e){1&n&&s2(0)}const QPt=function(n){return[n]};function WPt(n,e){if(1&n&&(Ls(0),Dt(1,UPt,6,2,"button-state",23),Dt(2,GPt,1,0,"ng-container",9),Ds()),2&n){const t=Ft(2).ngIf,i=Ft(),r=Si(7);K(1),ge("ngIf",xu(2,QPt,i.Graphic.stairPlan).includes(t.graphic)),K(1),ge("ngTemplateOutlet",r)}}function jPt(n,e){if(1&n){const t=no();Ls(0),B(1,"checkbox-toc",12),Kt("stateChange",function(){const s=zn(t).$implicit;return h(Ft(5).appService.setState(s))}),B(2,"span",13),H(3),z()(),Ds()}if(2&n){const t=e.$implicit,i=Ft(5);K(1),ge("floatLeft",i.floatLeft)("state",i.getState(t)),K(2),Nn(" ",t.replace("construction-","")," ")}}function $Pt(n,e){if(1&n&&(B(0,"div",10)(1,"div",16),Dt(2,jPt,4,3,"ng-container",24),z()()),2&n){const t=Ft(4);K(2),ge("ngForOf",t.constructionParts)}}function KPt(n,e){1&n&&s2(0)}function qPt(n,e){if(1&n){const t=no();Ls(0),Dt(1,$Pt,3,1,"div",7),B(2,"button",8),Kt("click",function(){zn(t);const r=Ft(3);return h(r.toc=!r.toc)}),B(3,"mat-icon"),H(4,"keyboard_double_arrow_down "),z()(),B(5,"button-state",20),Kt("click",function(){zn(t);const r=Ft(3);return h(r.appService.setState(r.Helpers3D.mirror))}),B(6,"span",13),H(7),z(),B(8,"span",14)(9,"mat-icon"),H(10,"foundation"),z()()(),Dt(11,KPt,1,0,"ng-container",9),Ds()}if(2&n){const t=Ft(3),i=Si(3);K(1),ge("ngIf",t.toc),K(1),$r("active",t.toc),K(1),k9("transform","rotate(",t.toc?20:180,"deg)"),H3("transition","0.4s"),K(2),ge("floatLeft",t.floatLeft),K(2),Zl(t.getState(t.Helpers3D.mirror)?"Remove mirror":"mirror"),K(4),ge("ngTemplateOutlet",i)}}function XPt(n,e){if(1&n){const t=no();Ls(0),B(1,"checkbox-toc",12),Kt("stateChange",function(){const s=zn(t).$implicit;return h(Ft(5).appService.setState(s))}),B(2,"span",13),H(3),z(),B(4,"span",14),H(5),z()(),Ds()}if(2&n){const t=e.$implicit,i=Ft(5);K(1),ge("floatLeft",i.floatLeft)("state",i.getState(t)),K(2),Nn(" ",t.replace("house3d-","")," "),K(2),Nn(" ",t.replace("house3d-","")," ")}}function YPt(n,e){if(1&n&&(B(0,"div",10)(1,"div",16),Dt(2,XPt,6,4,"ng-container",24),z()()),2&n){const t=Ft(4);K(2),ge("ngForOf",t.house3DParts)}}function ZPt(n,e){1&n&&s2(0)}function JPt(n,e){1&n&&s2(0)}const eHt=function(n){return{transform:n,"font-family":"Material Icons Outlined"}};function tHt(n,e){if(1&n){const t=no();Ls(0),Dt(1,YPt,3,1,"div",7),Dt(2,ZPt,1,0,"ng-container",9),B(3,"button-state",8),Kt("click",function(){zn(t);const r=Ft(3);return h(r.appService.setState(r.Helpers3D.clipBoxEnabled))}),B(4,"span",13),H(5," Clipped "),z(),B(6,"span",14)(7,"mat-icon"),H(8,"crop"),z()()(),B(9,"button-state",8),Kt("click",function(){zn(t);const r=Ft(3);return h(r.appService.setState(r.Helpers3D.clipBoxShow))}),B(10,"span",13),H(11," Show clipbox outlines "),z(),B(12,"span",14)(13,"mat-icon"),H(14,"view_in_ar_new"),z()()(),Dt(15,JPt,1,0,"ng-container",9),B(16,"button-state",20),Kt("click",function(){return zn(t),h(Ft(3).swapCamera())}),B(17,"span",13),H(18),z(),B(19,"span",14)(20,"mat-icon",25),H(21," rectangle"),z()()(),Ds()}if(2&n){const t=Ft(3),i=Si(9),r=Si(5);K(1),ge("ngIf",t.toc),K(1),ge("ngTemplateOutlet",i),K(1),$r("active",t.getState(t.Helpers3D.clipBoxEnabled)),K(6),$r("active",t.getState(t.Helpers3D.clipBoxShow)),K(6),ge("ngTemplateOutlet",r),K(1),ge("floatLeft",t.floatLeft),K(2),Nn("Change to ",t.camera?"Ortho":"Perspective",""),K(2),ge("ngStyle",xu(10,eHt,t.camera?"":"perspective(10px) rotateX(9deg)  translate(0px, -2px)"))}}function nHt(n,e){1&n&&(B(0,"div",10)(1,"div",16),Ue(2,"app-map-toc-layer"),z()())}function iHt(n,e){1&n&&s2(0)}function rHt(n,e){if(1&n){const t=no();B(0,"button",29),Kt("click",function(){const s=zn(t).$implicit;return h(Ft(5).olBaseMapService.setBasemap(s))}),H(1),z()}if(2&n){const t=e.$implicit;ge("disabled",Ft().ngIf===t),K(1),Zl(t)}}function sHt(n,e){if(1&n&&(B(0,"button-option")(1,"span",27),Dt(2,rHt,2,2,"button",28),z(),B(3,"span",14)(4,"mat-icon",15),H(5,"map"),z()()()),2&n){const t=Ft(4);K(2),ge("ngForOf",t.BasemapKeys)}}function oHt(n,e){if(1&n){const t=no();Ls(0),Dt(1,nHt,3,0,"div",7),Dt(2,iHt,1,0,"ng-container",9),B(3,"button-state",26),Kt("click",function(){return zn(t),h(Ft(3).mapService.zoomToHouse())}),B(4,"span",13),H(5," Zoom to house"),z(),B(6,"span",14)(7,"mat-icon"),H(8,"house"),z()()(),Dt(9,sHt,6,1,"button-option",0),zi(10,"async"),Ds()}if(2&n){const t=Ft(3),i=Si(9);K(1),ge("ngIf",t.toc),K(1),ge("ngTemplateOutlet",i),K(7),ge("ngIf",Er(10,3,t.olBaseMapService.basemap$))}}const aHt=function(n,e){return[n,e]};function cHt(n,e){if(1&n&&(B(0,"div",6),Dt(1,HPt,7,10,"ng-container",0),Dt(2,VPt,15,7,"ng-container",0),Dt(3,WPt,3,4,"ng-container",0),Dt(4,qPt,12,11,"ng-container",0),Dt(5,tHt,22,12,"ng-container",0),Dt(6,oHt,11,5,"ng-container",0),z()),2&n){const t=Ft().ngIf,i=Ft();Qb("container\n  graphic-",t.graphic,"\nsection-",t.section,""),K(1),ge("ngIf",t.graphic===i.Graphic.house2D),K(1),ge("ngIf",t.graphic===i.Graphic.cross),K(1),ge("ngIf",function k$(n,e,t,i,r){return P$(Ht(),vt(),n,e,t,i,r)}(10,aHt,i.Graphic.stairCross,i.Graphic.stairPlan).includes(t.graphic)),K(1),ge("ngIf",t.graphic===i.Graphic.construction),K(1),ge("ngIf",t.graphic===i.Graphic.House3D),K(1),ge("ngIf",t.graphic===i.Graphic.map)}}function lHt(n,e){if(1&n&&(Ls(0),Dt(1,cHt,7,13,"div",5),zi(2,"async"),Ds()),2&n){const t=Ft();K(1),ge("ngIf",Er(2,1,t.states$))}}function uHt(n,e){1&n&&(B(0,"mat-icon"),H(1,"fullscreen"),z())}function hHt(n,e){1&n&&(B(0,"mat-icon"),H(1,"fullscreen_exit"),z())}function fHt(n,e){if(1&n){const t=no();B(0,"button-state",20),Kt("click",function(){zn(t);const r=Ft();return h(r.fullscreen=!r.fullscreen)}),B(1,"span",13),H(2),z(),B(3,"span",14),Dt(4,uHt,2,0,"mat-icon",0),Dt(5,hHt,2,0,"mat-icon",0),z()()}if(2&n){const t=Ft();ge("floatLeft",t.floatLeft),K(2),Nn("",t.fullscreen?"Close":"Open"," fullscreen"),K(2),ge("ngIf",!t.fullscreen),K(1),ge("ngIf",t.fullscreen)}}function dHt(n,e){1&n&&(B(0,"span"),H(1,"Switch to ground floor"),z())}function pHt(n,e){1&n&&(B(0,"span"),H(1,"Switch to top floor"),z())}function gHt(n,e){1&n&&(B(0,"mat-icon"),H(1,"exposure_plus_1"),z())}function mHt(n,e){1&n&&(B(0,"mat-icon"),H(1,"exposure_zero"),z())}function AHt(n,e){if(1&n){const t=no();B(0,"button-state",20),Kt("click",function(){return zn(t),h(Ft(2).setFloor())}),B(1,"span",13),Dt(2,dHt,2,0,"span",0),Dt(3,pHt,2,0,"span",0),z(),B(4,"span",14),Dt(5,gHt,2,0,"mat-icon",0),Dt(6,mHt,2,0,"mat-icon",0),z()()}if(2&n){const t=e.ngIf,i=Ft(2);ge("floatLeft",i.floatLeft),K(2),ge("ngIf",t===i.Floor.top),K(1),ge("ngIf",t===i.Floor.ground),K(2),ge("ngIf",t===i.Floor.top),K(1),ge("ngIf",t===i.Floor.ground)}}function vHt(n,e){1&n&&(Dt(0,AHt,7,5,"button-state",23),zi(1,"async")),2&n&&ge("ngIf",Er(1,1,Ft().floor$))}function _Ht(n,e){if(1&n){const t=no();B(0,"button-state",20),Kt("click",function(){zn(t);const r=Ft();return h(r.appService.setState(r.States.measure))}),B(1,"span",13),H(2),z(),B(3,"span",14)(4,"mat-icon"),H(5,"square_foot"),z()()()}if(2&n){const t=Ft();ge("floatLeft",t.floatLeft),K(2),Zl(t.getState(t.States.measure)?"Remove measurements":"Add measurements")}}function yHt(n,e){if(1&n){const t=no();B(0,"button-state",20),Kt("click",function(){zn(t);const r=Ft();return h(r.toc=!r.toc)}),B(1,"span",13),H(2),z(),B(3,"span",14)(4,"mat-icon"),H(5,"keyboard_double_arrow_down "),z()()()}if(2&n){const t=Ft();ge("floatLeft",t.floatLeft),K(2),Nn("",t.toc?"Close ":"Open "," layers"),K(2),k9("transform","rotate(",t.toc?0:180,"deg)"),H3("transition","0.4s")}}let N5e=(()=>{class n{constructor(t,i,r,s,o,a,c,l){this.appService=t,this.elementRef=i,this.houseService=r,this.cookieService=s,this.olMeasureService=o,this.olBaseMapService=a,this.threeService=c,this.mapService=l,this.floatLeft=!1,this.BasemapKeys=Object.values(_3),this.house$=this.houseService.house$,this.Floor=at,this.floor$=this.appService.floor$,this.scroll$=this.appService.scroll$,this.states$=this.appService.states$,this.setFloor=()=>this.appService.setFloor(),this.Graphic=yo,this.States=Z2,this.page$=this.appService.page$,this.sensors=Object.values(Ye).map(u=>({state:u,title:u})),this.constructionParts=Object.values(Oi),this.ConstructionParts=Oi,this.house3DParts=Object.values(c1),this.House3DParts=c1,this.Helpers3D=p6,this.helpers3D=Object.values(p6),this.faTemperatureHigh=Q4e,this.faMound=ude,this.debug=!1}get toc(){return"true"===this.cookieService.get("toc")}set toc(t){this.cookieService.set("toc",`${t}`)}get fullscreen(){return this.appService.fullscreen$.value}set fullscreen(t){this.cookieService.set("fullscreen",`${t}`),this.appService.fullscreen$.next(t)}get camera(){return this.threeService.cameraPerspective}ngOnInit(){}getState(t){return!0===this.states$.value[t]}swapCamera(){this.threeService.swapCamera()}set(t,i){if(this.debug){const r=t.value/255,s=i.value/255;window.demLayer.updateStyleVariables({min:r,max:s,span:s-r})}else{const r=t.value,s=i.value;window.shadowLayer.setStyle({contrast:r,brightness:s}),console.log(r,s)}}get(t){return this.debug?1==t?255*window.demMin:255*window.demMax:1==t?window.shadowContrast:window.shadowOpacity}}return n.\u0275fac=function(t){return new(t||n)(U(io),U(mn),U(No),U(U3),U(zL),U(lG),U(Zy),U(JG))},n.\u0275cmp=Sn({type:n,selectors:[["controls"]],inputs:{floatLeft:"floatLeft"},decls:10,vars:3,consts:[[4,"ngIf"],["buttonFullscreen",""],["floor",""],["measure",""],["layers",""],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px",3,"class",4,"ngIf"],["fxLayout","column","fxLayoutAlign","end","fxLayoutGap","8px"],["class","sub-controls","fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",4,"ngIf"],["mat-mini-fab","","color","accent",3,"click"],[4,"ngTemplateOutlet"],["fxLayout","column","fxLayoutAlign","end end","fxLayoutGap","8px",1,"sub-controls"],[1,"toc"],[3,"floatLeft","state","stateChange"],["label",""],["icon",""],[2,"font-family","Material Icons Outlined"],[1,"toc-text"],[3,"floatLeft","state","stateChange",4,"ngFor","ngForOf"],["icon","","fxLayoutAlign","center center"],["height","18px","width","18px",3,"url"],[3,"floatLeft","click"],[4,"ngIf","ngIfElse"],["elseGrey",""],[3,"floatLeft","click",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngStyle"],[3,"click"],["options",""],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"disabled","click"]],template:function(t,i){1&t&&(Dt(0,lHt,3,3,"ng-container",0),zi(1,"async"),Dt(2,fHt,6,4,"ng-template",null,1,X2),Dt(4,vHt,2,3,"ng-template",null,2,X2),Dt(6,_Ht,6,2,"ng-template",null,3,X2),Dt(8,yHt,6,7,"ng-template",null,4,X2)),2&t&&ge("ngIf",Er(1,1,i.scroll$))},dependencies:[t3,D2,jR,r6,v7,Tv,w7,m6,Sv,w0,Xv,z5e,yPt,CPt,EPt,O5e,DPt,g0],styles:["[_nghost-%COMP%]{display:block;position:fixed;bottom:0;z-index:100}.controls-left[_nghost-%COMP%]{left:50px}.controls-left[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{left:-24px;bottom:8px;position:relative}.controls-left[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:left;left:50px;color:var(--color-100);text-shadow:2px 2px var(--accent-50);cursor:pointer}.controls-right[_nghost-%COMP%]{right:50px}.controls-right[_nghost-%COMP%]   .sub-controls[_ngcontent-%COMP%]{right:-24px;bottom:8px;position:relative}.controls-right[_nghost-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;text-align:right;right:50px;color:var(--color-100);text-shadow:2px 2px var(--accent-50);opacity:1}[_nghost-%COMP%]     .sensor-button{right:0}[_nghost-%COMP%]     .sensor-button svg{position:absolute;top:0;right:0}[_nghost-%COMP%]     .sensor-label{right:15px!important;top:6px;line-height:0}.active[_ngcontent-%COMP%]     button{box-shadow:0 0 #0003,0 0 #00000024,0 0 #000!important;background-color:var(--accent-50)!important;color:#1b1b1b!important}.active[_ngcontent-%COMP%]     button label{opacity:.4}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:8px 8px 16px}.construction[_ngcontent-%COMP%]{height:16px;width:16px}.construction[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{right:18px!important;top:6px;line-height:0}.dev[_ngcontent-%COMP%]{color:#613d1a}.toc[_ngcontent-%COMP%]{background-color:var(--color-0);padding:8px;position:absolute;width:60px;border:2px solid var(--color-50);opacity:.6;transition:opacity .2s ease-in-out}.toc[_ngcontent-%COMP%]:hover{opacity:.9}.toc[_ngcontent-%COMP%]     checkbox-state:first-of-type>label:before{display:none}.toc-text[_ngcontent-%COMP%]{background-color:var(--color-0);padding:8px;position:absolute;border:2px solid var(--color-50);opacity:.6;transition:opacity .2s ease-in-out}.toc-text[_ngcontent-%COMP%]:hover{opacity:.9}.toc-text[_ngcontent-%COMP%]     checkbox-state:first-of-type>label:before{display:none}.toc-text[_ngcontent-%COMP%]     label.container{padding:0!important}.toc-text[_ngcontent-%COMP%]     mat-slide-toggle{transform:scale(.75)}"],data:{animation:[xS]}}),n})();const wHt=["svg"];let bHt=(()=>{class n{constructor(t,i,r,s){this.appService=t,this.tooltipService=i,this.host=r,this.d3Service=s,this.resize$=new Vs(void 0),this.subscriptions=[],this.tags=Object.values(l2),this.loaded=!1}ngAfterViewInit(){this.setUp(),this.localAfterViewInit()}localAfterViewInit(){}afterSection(){}setTransform(t="translate(0,0) scale(1)",i=1e4){this.loaded&&this.appService.setTransformCookie(t,this.graphic),this.g.transition().duration(i).attr("transform",t)}getSVGSizes(){const t=this.svg.node();return[t.clientWidth,t.clientHeight]}setUp(){this.svg=go(this.svgEl.nativeElement),this.g=this.svg.select("g"),this.observer=new ResizeObserver(t=>this.resize$.next(t)),this.observer.observe(this.host.nativeElement),this.resize$.pipe(lh(t=>di(void 0))),this.subscriptions.push(Jc(this.resize$.pipe(W3e(10),Jo(t=>this.afterSection())),this.appService.fullscreen$.pipe(Jo(t=>{t?this.svg.call(Rse().on("zoom",i=>{this.setTransform(i.transform,0)})):(this.svg.on(".zoom",null),this.setTransform())})),this.appService.scroll$.pipe(Jo(t=>{const i=this.appService.scroll$.value;if(i.section!==this.section){if(this.section=i.section,void 0===this.section)return;this.afterSection()}}))).subscribe(t=>{}))}}return n.\u0275fac=function(t){return new(t||n)(U(io),U(X6),U(mn),U(W5))},n.\u0275cmp=Sn({type:n,selectors:[["app-svg-scroller"]],viewQuery:function(t,i){if(1&t&&_o(wHt,5),2&t){let r;Gi(r=Qi())&&(i.svgEl=r.first)}},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();var Di=(()=>(function(n){n.electricity="electricity",n.thermal="thermal",n.hotWater="hot-water",n.net="net",n.washingMachine="washing-machine",n.lights="lights",n.heating="heating",n.solar="solar",n.battery="battery",n.heatPump="heat-pump",n.tank="tank"}(Di||(Di={})),Di))();class xHt{constructor(){this.key="unknown"}get isVisible(){return!0===this.visible}setKey(e){this.balloon=e,this.key=`${this.balloon.key}-${this.targetKey}`}init(e,t){this.g=e.select(`g#link-${this.key}`),this.path=this.g.select("path"),this.textEl=this.g.select("text"),this.target=t}update(){if(void 0===this.path)return;const e=this.balloon,t=this.target;this.isVisible&&this.path.attr("d",`M ${e.x} ${e.y} L ${t.x} ${t.y}`);const i=this.isVisible?this.path.node().getTotalLength():0;this.g.transition().duration(1e3).delay(this.isVisible?800:0).attr("stroke-dasharray",`${i} 1000 `).attr("stroke-width",this.isVisible?this.width:0),void 0!==this.textEl&&(this.textEl.transition().duration(1e3).attr("x",(e.x+t.x)/2).attr("y",(e.y+t.y)/2).attr("font-size",(this.isVisible?100:0)+"%"),this.text&&this.isVisible&&this.textEl.text(this.text))}}class CHt{constructor(){this.links=[]}get isVisible(){return!0===this.visible}init(e,t,i){this.g=e.select(`g#balloon-${this.key}`),this.rect=this.g.select("rect"),this.x=t/2,this.y=i/2,this.update()}update(){this.isVisible&&this.rect.attr("x",-51.776).attr("y",-32).attr("stroke-width",1).attr("height",64).attr("width",103.552).attr("rx",4).attr("ry",4),this.g.transition().duration(1e3).attr("transform",`translate(${this.x},${this.y}) scale(${this.isVisible?1:0})`),this.links.forEach(r=>r.update())}}const MHt=[{key:Di.electricity,name:"Electricity",icon:"mdi:bolt",linkKeys:[Di.thermal,Di.lights,Di.heatPump,Di.washingMachine]},{key:Di.thermal,name:"Thermal",icon:"local:heat.svg",linkKeys:[Di.heating,Di.hotWater]},{key:Di.hotWater,name:"Hot water",icon:"mdi:shower"},{key:Di.washingMachine,name:"Laundry",icon:"mdi:local_laundry_service"},{key:Di.lights,name:"Lights",icon:"mdi:lightbulb"},{key:Di.net,name:"Net",icon:"mdi:electrical_services",linkKeys:[Di.electricity]},{key:Di.heating,name:"Heating",icon:"mdi:heat_pump_balance"},{key:Di.solar,name:"Solar",icon:"mdi:solar_power",linkKeys:[Di.electricity]},{key:Di.tank,name:"Buffer tank",icon:"mdi:water_heater",linkKeys:[Di.thermal]},{key:Di.battery,name:"Battery",icon:"mdi:battery_charging_full",linkKeys:[Di.electricity]},{key:Di.heatPump,name:"Heat pump",icon:"mdi:heat_pump",linkKeys:[Di.thermal,Di.tank]}].map(n=>{const e=new CHt;return e.key=n.key,e.name=n.name,e.icon=n.icon,e.links=n.linkKeys?n.linkKeys.map(t=>{const i=new xHt;return i.targetKey=t,i.visible=!1,i.width=0,i.setKey(e),i}):[],e});function SHt(n,e){1&n&&(eo(),B(0,"g",12),Ue(1,"path",13)(2,"text",14),z()),2&n&&Ur("id","link-",e.$implicit.key,"")}function EHt(n,e){if(1&n&&(eo(),Ls(0),Dt(1,SHt,3,1,"g",11),Ds()),2&n){const t=e.$implicit;K(1),ge("ngForOf",t.links)}}function THt(n,e){if(1&n&&(eo(),ag(),B(0,"i",20),H(1),z()),2&n){const t=Ft().$implicit;K(1),Zl(t.icon.replace("mdi:",""))}}function LHt(n,e){1&n&&(eo(),ag(),Ue(0,"img",21)),2&n&&Ur("src","assets\\svg\\",Ft().$implicit.icon.replace("local:",""),"",E1)}function DHt(n,e){if(1&n&&(eo(),B(0,"g",15),Ue(1,"rect",16),B(2,"foreignObject",17),Dt(3,THt,2,1,"i",18),Dt(4,LHt,1,1,"img",19),z(),B(5,"text"),H(6),z()()),2&n){const t=e.$implicit;Ur("id","balloon-",t.key,""),K(3),ge("ngIf",t.icon.includes("mdi:")),K(1),ge("ngIf",t.icon.includes("local:")),K(2),Zl(t.name)}}let IHt=(()=>{class n extends bHt{constructor(t,i,r,s,o,a,c){super(i,r,s,o),this.houseService=t,this.appService=i,this.tooltipService=r,this.host=s,this.d3Service=o,this.d3DistanceService=a,this.contextMenuService=c,this.graphic=yo.scrollerHeat,this.floor=at.all,this.marginInMeters=[0,0,0,0],this.marginInPixels=[64,64,0,0],this.maxLinks=10,this.balloons=MHt,this.parts=[],this.solarNetCurve={},this.subscriptions=[],this.update$=new $e}localAfterViewInit(){const[t,i]=this.getSVGSizes();this.balloons.forEach(o=>{void 0!==o&&(o.init(this.g,t,i),o.links.forEach(a=>a.init(this.g,this.getBalloon(a.targetKey))))});const r=this.getBalloon(Di.solar),s=this.getBalloon(Di.net);setInterval(o=>{this.update$.next(void 0)},1e3),this.subscriptions.push(this.update$.subscribe(o=>{this.curveSolarNet(r,s)})),this.update$.next(void 0),this.afterSection()}afterSection(){if(void 0===this.balloons[0].g)return;const r=103.552,s={[-2]:2*-(r+40),[-1]:1*-(r+40),0:0,1:1*(r+40),2:2*(r+40)},o={[-2]:-208,[-1]:-104,0:0,1:104,2:208},a=[{key:Di.electricity,coords:[s[-1],o[-1]]},{key:Di.thermal,coords:[s[-1],o[1]]}];this.section===Ct.energyUsage?this.moveToObj([{key:Di.electricity,coords:[s[0],o[-1]],links:[{target:Di.thermal,width:16,text:">80%"},{target:Di.washingMachine,width:2},{target:Di.lights,width:2}]},{key:Di.thermal,coords:[s[0],o[2]],links:[{target:Di.hotWater,width:2},{target:Di.heating,width:14}]},{key:Di.washingMachine,coords:[s[1],o[-2]]},{key:Di.lights,coords:[s[1],o[-1]]},{key:Di.hotWater,coords:[s[1],o[2]]},{key:Di.heating,coords:[s[1],o[1]]}]):[Ct.energyProduction,Ct.energyProductionProblem1,Ct.energyProductionProblem2].includes(this.section)?this.moveToObj([{key:Di.electricity,coords:[s[0],o[-1]],links:[{target:Di.heatPump,width:2}]},{key:Di.thermal,coords:[s[0],o[2]],links:[]},{key:Di.heatPump,coords:[s[0],o[0]],links:[{target:Di.thermal,width:2}]},{key:Di.solar,coords:[s[-1],o[-2]],links:[{target:Di.electricity,width:2}]},{key:Di.net,coords:[s[1],o[-2]],links:[{target:Di.electricity,width:2}]}]):this.moveToObj(this.section===Ct.energyStorage?[{key:Di.electricity,coords:[s[0],o[-1]],links:[{target:Di.heatPump,width:2}]},{key:Di.heatPump,coords:[s[0],o[0]],links:[{target:Di.tank,width:2}]},{key:Di.tank,coords:[s[0],o[1]],links:[{target:Di.thermal,width:2}]},{key:Di.thermal,coords:[s[0],o[2]],links:[{target:Di.hotWater,width:2},{target:Di.heating,width:2}]},{key:Di.battery,coords:[s[1],o[-1]],links:[{target:Di.electricity,width:2}]}]:a)}getBalloon(t){const i=this.balloons.find(r=>r.key===t);if(void 0!==i)return i;console.error("balloon not found",t)}moveToObj(t){console.log("moveToObj"),this.balloons.forEach(i=>{const r=t.find(s=>s.key===i.key);this.updateBalloonProperties(i,r)}),this.balloons.forEach(i=>{const r=t.find(s=>s.key===i.key);this.updateBalloonLinkProperties(i,r?.links||[]),i.update()})}updateBalloonProperties(t,i){const[r,s]=this.getSVGSizes();if(void 0===i)t.visible=!1;else{const o=i.coords[0],a=i.coords[1];t.x=o>0&&o<=1?r*o:r/2+o,t.y=a>0&&a<=1?s*a:s/2+a,t.visible=void 0===i.visible||i.visible}}updateBalloonLinkProperties(t,i){t.links.forEach(r=>{const s=i.find(o=>o.target===r.targetKey);void 0!==s&&r.balloon.isVisible&&r.target.isVisible?(r.visible=!0,r.width=s.width,r.text=s.text):r.visible=!1})}curveSolarNet(t,i){const r=this.svg.transition().duration(750);this.svg.select("#solar-net-curve").selectAll("path").data(()=>[void 0]).join(s=>s.append("path").attr("fill","transparent").attr("marker-end","url(#head)"),s=>s.call(o=>o.transition(r)).attr("d",o=>{console.log("update poath",o);const c=t.x+64,l=t.y,u=i.x-64,f=i.y;return`M ${c} ${l} C ${1/3*(u-c)+c} ${l+50}, ${2/3*(u-c)+c} ${f+50}, ${u} ${f}`}))}}return n.\u0275fac=function(t){return new(t||n)(U(No),U(io),U(X6),U(mn),U(W5),U(u8),U(j5))},n.\u0275cmp=Sn({type:n,selectors:[["app-svg-scoller-heat"]],features:[jt],decls:12,vars:5,consts:[["preserveAspectRatio","xMidYMid meet",1,"stairs-plan"],["svg",""],["id","head","orient","auto","markerWidth","8","markerHeight","8","refX","3","refY","4"],["d","M0,0 L2,4 L0,8 L4,4 Z","fill","black"],[1,"scoller"],[1,"curve-group"],["id","solar-net-curve",2,"opacity","0"],[1,"link-group"],[4,"ngFor","ngForOf"],[1,"balloon-group"],["class","balloon",3,"id",4,"ngFor","ngForOf"],["class","link",3,"id",4,"ngFor","ngForOf"],[1,"link",3,"id"],[1,"link-path"],[1,"link-text"],[1,"balloon",3,"id"],[1,"balloon-rect"],["x","0","y","0"],["class","material-symbols-outlined","style","font-size: 28px;transform: translate(16px, 8px);",4,"ngIf"],["class","img","style","width: 28px;height: 28px;transform: translate(14px, 10px);",3,"src",4,"ngIf"],[1,"material-symbols-outlined",2,"font-size","28px","transform","translate(16px, 8px)"],[1,"img",2,"width","28px","height","28px","transform","translate(14px, 10px)",3,"src"]],template:function(t,i){1&t&&(eo(),B(0,"svg",0,1)(2,"defs")(3,"marker",2),Ue(4,"path",3),z()(),B(5,"g",4)(6,"g",5),Ue(7,"g",6),z(),B(8,"g",7),Dt(9,EHt,2,1,"ng-container",8),z(),B(10,"g",9),Dt(11,DHt,7,4,"g",10),z()()()),2&t&&(rp(i.graphic),K(9),ge("ngForOf",i.balloons),K(2),ge("ngForOf",i.balloons))},dependencies:[t3,D2],styles:["svg{width:100%;height:100%;position:relative;transition:.4s}  .curve-group{stroke:var(--color-80);fill:var(--primary)}  .curve-group g{transition:.2s}  .link{transition:all .2s ease;transition-property:opacity,fill;opacity:1}  .link .link-path{stroke:var(--color-80);fill:none}  .link .link-text{text-anchor:middle;dominant-baseline:middle;stroke:var(--color-0);stroke-opacity:1;stroke-width:12px;paint-order:stroke}  .balloon-group{fill:#000;color:#000}  .balloon-group .balloon{transition:.2s}  .balloon-group .balloon rect{fill:#ddd;stroke:var(--color-80)}  .balloon-group .balloon text{text-anchor:middle;dominant-baseline:middle;font-size:1.2em;font-weight:500;letter-spacing:130%;transform:translateY(-14px)}  .balloon-group .balloon#balloon-electricity rect{fill:#fffc55}  .balloon-group .balloon#balloon-thermal rect{fill:#e46922}  .balloon-group .balloon foreignObject{width:60px;height:60px;transform:translate(-30px,-10px)}  .section-heat-storage #balloon-heat-pump rect{fill:var(--color-5);stroke-dasharray:4 4}  .section-heat-storage #balloon-heat-pump foreignObject,   .section-heat-storage #balloon-heat-pump text{opacity:.5}  .section-heat-storage #link-heat-pump-thermal,   .section-heat-storage #link-electricity-heat-pump,   .section-heat-storage #link-heat-pump-tank{opacity:.5;stroke-dasharray:4 4}  .section-energy-production-problem1 #balloon-heat-pump rect{fill:var(--color-5);stroke-dasharray:4 4}  .section-energy-production-problem1 #balloon-heat-pump foreignObject,   .section-energy-production-problem1 #balloon-heat-pump text{opacity:.5}  .section-energy-production-problem1 #link-heat-pump-thermal,   .section-energy-production-problem1 #link-electricity-heat-pump,   .section-energy-production-problem1 #link-heat-pump-tank{opacity:.5;stroke-dasharray:4 4}  .section-energy-production-problem1 #balloon-thermal rect{fill:var(--color-5);stroke-dasharray:4 4}  .section-energy-production-problem1 #balloon-thermal foreignObject,   .section-energy-production-problem1 #balloon-thermal text{opacity:.5}  .section-energy-production-problem1 #solar-net-curve{opacity:.6!important;stroke-width:3px}  .section-energy-production-problem2 #link-solar-electricity,   .section-energy-production-problem2 #balloon-solar{opacity:0}"]}),n})();function RHt(n,e){1&n&&Ue(0,"controls",10),2&n&&ge("@slideInOut",void 0)("floatLeft",!0)}function BHt(n,e){1&n&&Ue(0,"controls",11),2&n&&ge("@slideInOut",void 0)("floatLeft",!1)}function kHt(n,e){1&n&&Ue(0,"app-svg-cross",16)}function FHt(n,e){if(1&n&&(B(0,"div",14),Dt(1,kHt,1,0,"app-svg-cross",15),z()),2&n){const t=Ft().ngIf,i=Ft();K(1),ge("ngIf",t===i.Graphic.cross)}}function PHt(n,e){1&n&&(Ls(0),Ue(1,"app-svg-scoller-heat"),Ds())}function HHt(n,e){1&n&&(Ls(0),Ue(1,"app-svg-stair-plan",18)(2,"app-svg-plan",19),Ds()),2&n&&(K(1),ge("isChild",!0))}function zHt(n,e){1&n&&(Ls(0),Ue(1,"app-three-construction"),Ds())}function OHt(n,e){1&n&&(Ls(0),Ue(1,"app-three-house"),Ds())}function NHt(n,e){1&n&&(Ls(0),Ue(1,"app-svg-stair-plan",20),Ds())}function VHt(n,e){1&n&&(Ls(0),Ue(1,"app-svg-stair-steps",21),Ds())}function UHt(n,e){if(1&n&&(B(0,"div",17),Dt(1,PHt,2,0,"ng-container",8),Dt(2,HHt,3,1,"ng-container",8),Dt(3,zHt,2,0,"ng-container",8),Dt(4,OHt,2,0,"ng-container",8),Dt(5,NHt,2,0,"ng-container",8),Dt(6,VHt,2,0,"ng-container",8),z()),2&n){const t=Ft().ngIf,i=Ft();K(1),ge("ngIf",t===i.Graphic.scrollerHeat),K(1),ge("ngIf",t===i.Graphic.house2D),K(1),ge("ngIf",t===i.Graphic.construction),K(1),ge("ngIf",t===i.Graphic.House3D),K(1),ge("ngIf",t===i.Graphic.stairPlan),K(1),ge("ngIf",t===i.Graphic.stairCross)}}function GHt(n,e){if(1&n&&(Ls(0),Dt(1,FHt,2,1,"div",12),Dt(2,UHt,7,6,"div",13),Ds()),2&n){const t=e.ngIf,i=Ft();K(1),ge("ngIf",t!==i.Graphic.none),K(1),ge("ngIf",t!==i.Graphic.none)}}function QHt(n,e){1&n&&Ue(0,"app-footer")}const WHt=function(n){return{top:n}};let jHt=(()=>{class n{constructor(t,i,r,s,o,a){this.appService=t,this.tooltipService=i,this.houseService=r,this.router=s,this.activatedRoute=o,this.stateService=a,this.sections=Object.keys(Ct),this.Tag=l2,this.GraphicSide=d6,this.Graphic=yo,this.showFooter=!0,this.sectionScroll={},this.goalLine=.4,this.popupActive$=this.appService.popupActive$,this.fullscreen$=this.appService.fullscreen$,this.scroll$=this.appService.scroll$,this.floor$=this.appService.floor$,this.tag$=this.appService.tag$,this.states$=this.appService.states$,this.page$=this.appService.page$,this.cssStates$=this.states$.pipe(Ut(c=>Object.entries(c).filter(([l,u])=>!0===u).map(([l,u])=>`state-${l}`).join(" "))),this.loaded=!1,xa(window,"scroll").subscribe(c=>{this.calcSection()})}ngAfterViewInit(){this.router.events.pipe(zo(t=>t instanceof uh)).subscribe(t=>{setTimeout(()=>{this.setup()},0)}),this.setup()}setup(){this.sectionEls=document.querySelectorAll("section"),this.sectionScroll={},this.sectionEls.forEach(r=>{const s=r.id;this.sectionScroll[s]={id:s,elTop:r.offsetTop,elBottom:r.offsetTop+r.offsetHeight}}),this.calcSection();const i=this.activatedRoute.snapshot.params.tag;i&&this.tag$.next(i),this.loaded=!0}checkFooter(){let t=!0;[yo.House3D].includes(this.graphic)&&(t=!1),this.showFooter=t}calcSection(){if(this.section=this.getSection(),void 0===this.section||""===this.section)this.graphic=yo.none,this.graphicSide=d6.none;else{const i=this.stateService.setGraphic(this.section);this.graphic!==i&&(console.log("Swap side!"),this.tooltipService.detachOverlay()),this.graphic=i,this.graphicSide=this.stateService.getSide(this.graphic),document.querySelector(`section#${this.section}`).classList.add("section-active")}this.checkFooter(),this.appService.scroll$.next({scroll:cn(window.pageYOffset,0),percentage:this.getVerticalScrollPercentage(document.body),section:this.section,graphicSide:this.graphicSide,graphic:this.graphic}),this.stateService.updateStateBasedOnSection(this.section,this.loaded),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{section:this.section},replaceUrl:!0,queryParamsHandling:"merge"})}getVerticalScrollPercentage(t){var i=t.parentNode;return cn((t.scrollTop||i.scrollTop)/(i.scrollHeight-i.clientHeight))}getSection(){var t=cn(window.innerHeight*this.goalLine,0),r=cn(window.pageYOffset,0)+t;this.sectionEls.forEach(o=>{const a=o.id;this.sectionScroll[a].start=this.sectionScroll[a].elTop<=r,this.sectionScroll[a].end=this.sectionScroll[a].elBottom<=r,this.sectionScroll[a].overlap=this.sectionScroll[a].start&&!this.sectionScroll[a].end,o.classList.remove("section-active")});const s=Object.values(this.sectionScroll).filter(o=>o.overlap).sort((o,a)=>a.elTop-o.elTop);return s&&s[0]?s[0].id:void 0}}return n.\u0275fac=function(t){return new(t||n)(U(io),U(X6),U(No),U(_c),U(f6),U(met))},n.\u0275cmp=Sn({type:n,selectors:[["app-main-page"]],decls:23,vars:35,consts:[[1,"page"],[1,"left-blinder","bg"],[1,"left-flex"],[1,"center"],[1,"right-flex"],[1,"right-blinder","bg"],["class","controls controls-left",3,"floatLeft",4,"ngIf"],["class","controls controls-right",3,"floatLeft",4,"ngIf"],[4,"ngIf"],[1,"goal-marker",3,"ngStyle"],[1,"controls","controls-left",3,"floatLeft"],[1,"controls","controls-right",3,"floatLeft"],["class","floating floating-left",4,"ngIf"],["class","floating floating-right",4,"ngIf"],[1,"floating","floating-left"],["class","svg-cross",4,"ngIf"],[1,"svg-cross"],[1,"floating","floating-right"],["fxFlex","0 0 0",1,"svg-plan-stair-plan",3,"isChild"],[1,"svg-plan"],[1,"svg-stair-plan"],[1,"svg-stair-steps"]],template:function(t,i){1&t&&(B(0,"div",0)(1,"div"),zi(2,"async"),zi(3,"async"),zi(4,"async"),zi(5,"async"),zi(6,"async"),zi(7,"async"),zi(8,"async"),zi(9,"async"),Ue(10,"div",1),B(11,"main"),Ue(12,"div",2),B(13,"div",3),Ue(14,"router-outlet"),z(),Ue(15,"div",4),z(),Ue(16,"div",5),Dt(17,RHt,1,2,"controls",6),Dt(18,BHt,1,2,"controls",7),Dt(19,GHt,3,2,"ng-container",8),zi(20,"async"),z()(),Ue(21,"div",9),Dt(22,QHt,1,0,"app-footer",8)),2&t&&(K(1),Uj("container \n  tag-",Er(2,15,i.tag$)," \n  floor-",Er(3,17,i.floor$)," \n  section-",Er(4,19,i.scroll$).section," \n  show-",Er(5,21,i.scroll$).graphicSide," \n  graphic-",Er(6,23,i.scroll$).graphic," \n  ",Er(7,25,i.popupActive$)?"popup-active":""," \n  ",Er(8,27,i.fullscreen$)?"fullscreen":"","\n  ",Er(9,29,i.cssStates$)," \n  "),K(16),ge("ngIf",i.graphicSide===i.GraphicSide.left),K(1),ge("ngIf",i.graphicSide===i.GraphicSide.right),K(1),ge("ngIf",Er(20,31,i.scroll$).graphic),K(2),ge("ngStyle",xu(33,WHt,100*i.goalLine+"vh")),K(1),ge("ngIf",i.showFooter))},dependencies:[D2,r6,Ak,Xv,$x,sle,cut,lut,Tut,But,Put,Vut,N5e,IHt,g0],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.page[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]{justify-content:center;display:flex;flex-direction:row;flex:1 1 100vw}.container[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{max-width:800px;justify-content:center;display:flex;flex-direction:row;flex:10 1 800px}.container[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{transition:.6s}.container.show-left[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:0 1 50%}.container.show-left[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%], .container.show-right[_ngcontent-%COMP%]   .left-flex[_ngcontent-%COMP%]{flex:0 1 0vw}.container.show-right[_ngcontent-%COMP%]   .right-flex[_ngcontent-%COMP%]{flex:0 1 50%}.container[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:0 1 50%;border-left:0vw solid transparent;border-right:0vw solid transparent;max-width:354px;z-index:2;margin:0 46px}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{display:block;height:100%;width:0vw;position:absolute;z-index:5;transition:.8s ease-in;opacity:.8}.container[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%]{left:0}.container[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{right:0}.container.fullscreen.show-left[_ngcontent-%COMP%]   .left-blinder[_ngcontent-%COMP%], .container.fullscreen.show-right[_ngcontent-%COMP%]   .right-blinder[_ngcontent-%COMP%]{transition:.6s ease-out;width:100vw;opacity:1}.container.fullscreen[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{max-width:100vw!important}.container.fullscreen[_ngcontent-%COMP%]     g.all{transition:none!important}.floating[_ngcontent-%COMP%]{top:0;height:100vh;position:fixed;max-width:100vh;display:flex;flex-direction:column;justify-content:center;z-index:50;transition:1s}.floating.floating-right[_ngcontent-%COMP%]{left:50%;width:50%}.floating.floating-left[_ngcontent-%COMP%]{right:50%;width:50%}.floating[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{overflow:hidden;flex:1 1 100%;position:relative}.floating[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]{transition:.6s;max-width:70vh;width:100vw;height:100vh;left:0vw}.floating[_ngcontent-%COMP%]   .svg-plan[_ngcontent-%COMP%]     svg{transition:.6s;left:0vw;top:0vh}.floating[_ngcontent-%COMP%]   .svg-plan.imaged[_ngcontent-%COMP%]{transition:.6s;max-width:100vw;left:-50vw;top:-10vh}.floating[_ngcontent-%COMP%]   .svg-plan.imaged[_ngcontent-%COMP%]     svg{transition:.6s;left:25vw}.show-right[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:50vw;right:100vw}.show-left[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:50vw;left:100vw}.fullscreen.show-left[_ngcontent-%COMP%]   .floating-left[_ngcontent-%COMP%]{width:100vw;right:0vw;max-width:100vw}.fullscreen.show-right[_ngcontent-%COMP%]   .floating-right[_ngcontent-%COMP%]{width:100vw;left:0vw;max-width:100vw}.goal-marker[_ngcontent-%COMP%]{position:fixed;border:1px solid var(--color-30);height:13px;width:13px;transform:rotate(45deg);left:-10px}"],data:{animation:[xS,gH]}}),n})();const $Ht=["*"];let Tw=(()=>{class n{constructor(t,i){this.appService=t,this.elementRef=i}mouseover(){this.appService.setTag(this.tag)}mouseout(){this.appService.setTag(void 0)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(U(io),U(mn))},n.\u0275cmp=Sn({type:n,selectors:[["tag"]],hostBindings:function(t,i){1&t&&Kt("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})},inputs:{tag:"tag"},ngContentSelectors:$Ht,decls:2,vars:0,consts:[["mat-flat-button","",1,"mat-button-tag"]],template:function(t,i){1&t&&(T1(),B(0,"button",0),Do(1),z())},dependencies:[Tv],styles:[".mat-button-tag[_ngcontent-%COMP%]{padding:3px 0;border:1px solid var(--color-30);line-height:1em}.mat-button-tag[_ngcontent-%COMP%]     .mat-button-wrapper{padding:8px;font-weight:initial}"]}),n})(),eQ=(()=>{class n{constructor(t,i,r,s){this.builder=t,this.overlay=i,this.appService=r,this.viewContainerRef=s,this.open=!1,this.animate=!0,this.byClick=!1,this.unsubscribe=new $e}mouseover(){this.attachOverlay()}mouseout(){this.appService.popupActive$.next(!1),this.detachOverlay()}onResize(t){this.updateOnChange()}getPositionStrategy(){let t;return t=this.overlay.position().flexibleConnectedTo(this.viewContainerRef.element.nativeElement).withPositions([new Ix({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,-20),new Ix({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},-this.btn.getBoundingClientRect().left+this.pageEl.getBoundingClientRect().left+8,20,"flipped")]).withPush(!0),t}getScrollStrategy(){return this.overlay.scrollStrategies.reposition()}ngOnInit(){this.pageEl=document.querySelector(".center"),this.btn=this.viewContainerRef.element.nativeElement;const t=this.getPositionStrategy(),i=this.getScrollStrategy();this.overlayRef=this.overlay.create({positionStrategy:t,scrollStrategy:i,hasBackdrop:this.byClick}),this.overlayRef.backdropClick().pipe(Ua(this.unsubscribe)).subscribe(()=>{this.detachOverlay()}),this.open&&this.attachOverlay()}ngOnDestroy(){this.detachOverlay(),this.unsubscribe.next(),this.unsubscribe.complete(),this.overlayRef.dispose()}detachOverlay(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.arrowEl.remove(),this.overlayRef.detach())}attachOverlay(){const t=new Dx(this.overlayTemplate,this.viewContainerRef);this.overlayRef&&!this.overlayRef.hasAttached()&&(this.componentRef=this.overlayRef.attach(t),this.updateOnChange(),this.createMakeMeAPopup(),this.appService.popupActive$.next(!0))}createMakeMeAPopup(){this.overlayRef.overlayElement.classList.add("popup","base"),this.arrowEl=document.createElement("div"),this.arrowEl.classList.add("popup-arrow","base"),this.setArrow(),this.overlayRef.overlayElement.append(this.arrowEl)}setArrow(){const{left:t,width:i}=this.btn.getBoundingClientRect(),{top:r}=this.pageEl.getBoundingClientRect();this.arrowEl.style.left=t-r-20+i/2+"px"}updateOnChange(){this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.updatePosition(),this.overlayRef.updateSize({width:this.pageEl.clientWidth}),this.arrowEl&&this.setArrow())}playAnimation(t,i){const s=this.builder.build(t).create(i);return s.play(),s}enterAnimation(t){return t.style.maxWidth="100%",[Bi({"max-width":"0%"}),ho("150ms ease-out",Bi({"max-width":"100%"}))]}leaveAnimation(){return[ho("200ms ease-in",Bi({"max-width":"0%"}))]}}return n.\u0275fac=function(t){return new(t||n)(U(_k),U(Mu),U(io),U(Nc))},n.\u0275dir=gt({type:n,selectors:[["","overlayTemplate",""]],hostBindings:function(t,i){1&t&&Kt("mouseover",function(){return i.mouseover()})("mouseout",function(){return i.mouseout()})("resize",function(s){return i.onResize(s)},!1,aI)},inputs:{overlayTemplate:"overlayTemplate",open:"open"}}),n})();function KHt(n,e){1&n&&H(0),2&n&&Nn(" Insulation keeps you warm. Passiv houses have almost no heatloss so therefore (almost) no heating is needed! The walls are thicker than you are used to: ",.5," meter ")}function qHt(n,e){1&n&&H(0," In the winter, we need the sun to warmup the house. In the summer the house needs to be shaded on the outside to prevent overheating. ")}function XHt(n,e){1&n&&(H(0," It is even a hashtag "),B(1,"b"),H(2,"#EfficiencyFirst"),z(),H(3,". Why look at green energy if we wast still alot of energy. ( Ofcourse we still need green energy! ). First insulation to the max, before thinking of solarpanels. "))}function YHt(n,e){1&n&&H(0," Keeping the design simple, so we skip complex solutions. Therefore the costs will be lower. ")}function ZHt(n,e){1&n&&H(0," It is not really a thing, more a concept. It helps the already complex roof to look good. And also, very helpful with calculations. ")}function JHt(n,e){1&n&&H(0," The south wing is a design element that effectively breaks up the lengthy facade of the house's south side. If desired, the design can be simplified by removing this feature. ")}function ezt(n,e){1&n&&H(0," To maintain the compact design of the house, avoid making the north wing too long. If you need more space, consider increasing the base dimension. ")}function tzt(n,e){1&n&&H(0," A concept, how far is the bend-point of the roof, away from the outside wall. ")}function nzt(n,e){if(1&n){const t=no();Ls(0),B(1,"section",1)(2,"h1"),H(3),z(),B(4,"p",2),H(5," A Passive House, but in a classical style, and all open-source. We love to share our plans with the community. Consider it as free building plans for your own house, or give them to your contractor. It's truly free. "),z()(),B(6,"section",1)(7,"h2"),H(8,"Passiv? "),B(9,"span",3),H(10,"(Its German)"),z()(),B(11,"p"),H(12,"Passive houses are the future. Feel free to "),B(13,"a",4),H(14,"search online for 'Passiv Haus'"),z(),H(15,". We thought it is not really inspiring and that is a shame. Therefore, let us try to explain it briefly:"),z(),B(16,"ul")(17,"li")(18,"tag",5),H(19,"Great insulated"),z(),Dt(20,KHt,1,1,"ng-template",null,6,X2),z(),B(22,"li"),H(23,"Well & compact desinged"),z(),B(24,"li")(25,"tag",5),H(26,"Orientation"),z(),H(27," to the sun "),Dt(28,qHt,1,0,"ng-template",null,7,X2),z(),B(30,"li"),H(31,"No thermal bridges"),z(),B(32,"li"),H(33,"Can be houses, but also offices etc"),z(),B(34,"li"),H(35,"Sustainable (well in our opinion)"),z()(),B(36,"p"),H(37,"Passiv Haus has one punchline:"),z(),B(38,"div",8)(39,"tag",5),H(40,"Efficiency first"),z(),Dt(41,XHt,4,0,"ng-template",null,9,X2),z(),B(43,"p"),H(44,"We dare to add one :"),z(),B(45,"div",8)(46,"tag",5),H(47," Simplicity is key"),z(),Dt(48,YHt,1,0,"ng-template",null,10,X2),z(),B(50,"p"),H(51," While Passive Houses tend to prioritize function over form, we believe that style should also be a consideration. For this reason, we are working on combining classic design elements with this innovative concept. "),z()(),B(52,"section",1)(53,"h2"),H(54,"The basics"),z(),B(55,"p"),H(56," Using parametric design, we've created an interactive platform for designing this house. Play around with the sliders to see how you can customize the design to your liking. Let's start with the basics. "),z(),B(57,"h3"),H(58,"Two axis"),z(),B(59,"p"),H(60," The squared shape is the most efficient design for a Passive House, but a mansard roof can provide a classic aesthetic. Unfortunately, it's not easy to incorporate a mansard roof into a squared house. To achieve a mansard roof, this design follows two axes with a specific "),B(61,"tag",5),H(62,"base dimension"),z(),H(63,". One of the advantages of this design is the stunning "),B(64,"tag",11),H(65,"view lines"),z(),H(66," it provides. "),z(),Dt(67,ZHt,1,0,"ng-template",null,12,X2),B(69,"label")(70,"span"),H(71,"Base dimension "),z(),B(72,"mat-slider",13),Kt("input",function(r){zn(t);const s=Ft();return h(s.update("house","studAmount",r.value,s.tags.baseDimension))}),z()(),B(73,"label",14)(74,"span"),H(75,"Technical "),z(),H(76),Ue(77,"br")(78,"br"),B(79,"table")(80,"tr")(81,"td"),H(82,"Total area"),z(),B(83,"td"),H(84),B(85,"sup"),H(86,"2"),z()()(),B(87,"tr")(88,"td"),H(89,"Total volume"),z(),B(90,"td"),H(91),B(92,"sup"),H(93,"3"),z()()()()(),B(94,"label",14)(95,"span"),H(96,"Thoughts "),z(),H(97),z()(),B(98,"section",1)(99,"h2"),H(100,"Extensions"),z(),B(101,"p"),H(102," The south-facing side of the house is designed with a "),B(103,"tag",5),H(104,"south wing"),z(),H(105," that breaks up the otherwise monotonous lines and creates more interesting view points. The "),B(106,"tag",5),H(107,"north wing"),z(),H(108,", located for convenience, has fewer windows due to its colder and darker nature. "),z(),B(109,"h3"),H(110,"Body parts "),z(),Dt(111,JHt,1,0,"ng-template",null,15,X2),Dt(113,ezt,1,0,"ng-template",null,16,X2),B(115,"label")(116,"span"),H(117,"South wing "),z(),B(118,"mat-slider",17),Kt("input",function(r){zn(t);const s=Ft();return h(s.update("house","studAmountSouth",r.value,s.tags.extensionToSouth))}),z()(),B(119,"label")(120,"span"),H(121," North wing "),z(),B(122,"mat-slider",18),Kt("input",function(r){zn(t);const s=Ft();return h(s.update("house","studAmountNorth",r.value,s.tags.extensionToNorth))}),z()(),B(123,"label")(124,"span"),H(125," West wing "),z(),B(126,"mat-slider",18),Kt("input",function(r){zn(t);const s=Ft();return h(s.update("house","studAmountWest",r.value,s.tags.extensionToWest))}),z()(),B(127,"label")(128,"span"),H(129," East wing "),z(),B(130,"mat-slider",18),Kt("input",function(r){zn(t);const s=Ft();return h(s.update("house","studAmountEast",r.value,s.tags.extensionToEast))}),z()(),B(131,"label",14)(132,"span"),H(133,"Technical "),z(),B(134,"table")(135,"tr")(136,"td"),H(137,"Floor"),z(),B(138,"td"),H(139,"area"),z(),B(140,"td"),H(141,"ground"),z(),B(142,"td"),H(143),z()(),B(144,"tr"),Ue(145,"td")(146,"td"),B(147,"td"),H(148,"top"),z(),B(149,"td"),H(150),z()(),B(151,"tr"),Ue(152,"td")(153,"td"),B(154,"td"),H(155,"total"),z(),B(156,"td"),H(157),z()()()()(),B(158,"section",1)(159,"h1"),H(160,"Cross section"),z(),B(161,"h2"),H(162,"Slicing it, the basics"),z(),B(163,"p"),H(164,"Although high ceilings can be more expensive, they add a lot of value by making a house feel more open and airy. "),z(),B(165,"label")(166,"span"),H(167),z(),B(168,"mat-slider",19),Kt("input",function(r){return zn(t),h(Ft().update("cross","ceilingHeight",r.value))}),z()(),B(169,"h3"),H(170),z(),B(171,"p"),H(172,"It's important to consider a crawl space during the design phase, as it can have a significant impact on the overall building experience. A crawl space can raise the building, offering more protection against climate change, such as flooding or heavy rains. However, it is important to note that a crawl space can also be more expensive and take more time to build."),z(),B(173,"mat-slide-toggle",20),Kt("ngModelChange",function(r){return zn(t),h(Ft().update("cross","crawlerSpace",r))}),H(174),z(),B(175,"label")(176,"span"),H(177),z(),B(178,"mat-slider",21),Kt("input",function(r){return zn(t),h(Ft().update("cross","floorAboveGround",r.value))}),z()()(),B(179,"section",1)(180,"h2"),H(181,"Roof style"),z(),B(182,"p")(183,"a",22),H(184,"Mansard or Gambrel roof"),z(),H(185," gives a nice classic countryside style. There are three methods to create it. We will check both the \"circle\" and '70\xb0/30\xb0'"),z(),B(186,"h2"),H(187,"Circle-based"),z(),B(188,"p"),H(189,"Draw a "),B(190,"tag",11),H(191,"half circle"),z(),H(192," and two lines extending from the center at a 45\xb0 angle. Be aware that adjusting the overhang using the slider will cause the circle to move to maintain proportions. The angles used in this technique are 67.5\xb0 and 22.5\xb0. "),z(),B(193,"label")(194,"span"),H(195,"(Fictive) 'Wider roof'"),z(),B(196,"mat-slider",23),Kt("input",function(r){zn(t);const s=Ft();return h(s.update("cross","roofCirclePullDown",r.value,s.tags.halfCircle))}),z()(),B(197,"label")(198,"span"),H(199),z(),B(200,"mat-slider",23),Kt("input",function(r){return zn(t),h(Ft().update("cross","roofCircleWalls",r.value))}),z()()(),B(201,"section",1)(202,"h2"),H(203,"The 70\xb0/30\xb0 roof"),z(),B(204,"p"),H(205,"With this technique, draw a line 70\xb0 until a "),B(206,"tag",5),H(207,"bend point"),z(),H(208,". then follow up with a 30\xb0 angle. The upper roof has great solor potential. It is possible to extending the roof downwards. Nevertheless, it's crucial to keep proportion in mind to prevent an unappealing appearance. "),z(),Dt(209,tzt,1,0,"ng-template",null,24,X2),B(211,"label")(212,"span"),H(213,"Move "),B(214,"tag",5),H(215,"bend point"),z()(),B(216,"mat-slider",23),Kt("input",function(r){zn(t);const s=Ft();return h(s.update("cross","roof70offset",r.value,s.tags.bendPoint))}),z()(),B(217,"label")(218,"span"),H(219),z(),B(220,"mat-slider",23),Kt("input",function(r){zn(t);const s=Ft();return h(s.update("cross","roof70Walls",r.value,s.tags.roofWalls))}),z()(),B(221,"label")(222,"span"),H(223),z(),B(224,"mat-slider",23),Kt("input",function(r){return zn(t),h(Ft().update("cross","roof70Extension",r.value))}),z()()(),B(225,"section",1)(226,"h3"),H(227,"Roof, 70\xb0 or Circle"),z(),B(228,"p"),H(229,"In the end, the 70\xb0 based mansard roof is easier to design with. Click on the buttons to compare them. "),z(),B(230,"mat-button-toggle-group",25),Kt("ngModelChange",function(r){return h(zn(t).ngIf.cross.roofStyle=r)})("ngModelChange",function(r){return zn(t),h(Ft().choosenRoofstyle(r))}),B(231,"mat-button-toggle",26),H(232,"Circle based"),z(),B(233,"mat-button-toggle",26),H(234,"Both"),z(),B(235,"mat-button-toggle",26),H(236,"70\xb0 based"),z()()(),B(237,"section",1)(238,"h3"),H(239,"The roof edge"),z(),B(240,"p"),H(241,"We can look at the silhouette to image it a bit better. We can also add or remove a gutter, and more decorative "),z()(),B(242,"section",1)(243,"h3"),H(244,"This was the main design"),z(),B(245,"p"),H(246,"This site has a lot of info, if you are up for more. Feel free to join us at this "),Ue(247,"br"),B(248,"a",27),Ue(249,"fa-icon",28),H(250," discord channel "),z()(),Ue(251,"br"),B(252,"p"),H(253,"An other interesting page could be the layers of a wall/construction "),z(),B(254,"div",29)(255,"button",30)(256,"mat-icon"),H(257,"handyman"),z(),B(258,"span"),H(259,"Construction"),z()()(),B(260,"p"),H(261,"There is a menu on the top-left with a lot more items. Some are listed here"),z(),Ue(262,"br"),B(263,"div",29)(264,"button",31)(265,"mat-icon"),H(266,"bolt"),z(),B(267,"span"),H(268,"Wired"),z()(),B(269,"button",32)(270,"mat-icon"),H(271,"solar_power"),z(),B(272,"span"),H(273,"Installations"),z()(),B(274,"button",33)(275,"mat-icon"),H(276,"pin_drop"),z(),B(277,"span"),H(278,"Map"),z()(),B(279,"button",34)(280,"mat-icon",35),H(281,"stairs"),z(),B(282,"span"),H(283,"Stairs"),z()()()(),Ds()}if(2&n){const t=e.ngIf,i=Si(21),r=Si(29),s=Si(42),o=Si(49),a=Si(68),c=Si(112),l=Si(114),u=Si(210),f=Ft();K(1),ge("id",f.Section.mainWelcome),K(2),Nn("Welcome to ",t.name,""),K(3),ge("id",f.Section.mainPassiv),K(12),ge("tag",f.tags.insulated)("overlayTemplate",i),K(7),ge("tag",f.tags.orientation)("overlayTemplate",r),K(14),ge("tag",f.tags.efficiency)("overlayTemplate",s),K(7),ge("tag",f.tags.simple)("overlayTemplate",o),K(6),ge("id",f.Section.mainBasics),K(9),ge("tag",f.tags.baseDimension)("overlayTemplate",a),K(3),ge("tag",f.tags.viewlines),K(8),ge("ngModel",t.studAmount),K(4),z3(' When describing our house\'s construction, we use the term "studs" to refer to the wooden columns that make up the walls. These studs are arranged in a grid pattern with a spacing of ',100*t.studDistance," cm. At present, the wall consists of ",t.studAmount," studs. "),K(8),Nn("",null==t.stats.floor.all?null:t.stats.floor.all.area," m"),K(7),Nn("",null==t.stats.floor.all?null:t.stats.floor.all.volume," m"),K(6),z3(" If we want 2 build in fridge and freezer, and a kitchen island of 4 blocks. Plus a wall would result in a ",2500,"mm wall next to the double door and the inner corner of the house. With a double door and the full inner with it would be ",6800," "),K(1),ge("id",f.Section.mainExtensions),K(5),ge("tag",f.tags.extensionToSouth)("overlayTemplate",c),K(3),ge("tag",f.tags.extensionToNorth)("overlayTemplate",l),K(12),ge("ngModel",t.studAmountSouth)("displayWith",f.studLabel),K(4),ge("min",9)("max",18)("ngModel",t.studAmountNorth)("displayWith",f.studLabel),K(4),ge("min",5)("max",15)("ngModel",t.studAmountWest)("displayWith",f.studLabel),K(4),ge("min",5)("max",9)("ngModel",t.studAmountEast)("displayWith",f.studLabel),K(13),Nn("",t.stats.floor.ground.area," m2"),K(7),Nn("",t.stats.floor.top.area," m2"),K(7),Nn("",null==t.stats.floor.all?null:t.stats.floor.all.area," m2"),K(1),ge("id",f.Section.roofBasics),K(9),Nn("Ceiling height: ",t.cross.ceilingHeight," m"),K(1),ge("ngModel",t.cross.ceilingHeight),K(2),Nn("Foundation: ",t.cross.crawlerSpace?"crawler space":"flat foundation",""),K(3),ge("ngModel",t.cross.crawlerSpace),K(1),Nn("With a ",t.cross.crawlerSpace?"crawler space":"flat foundation"," "),K(3),Nn("Ground floor above ground: ",t.cross.crawlerSpace?t.cross.floorAboveGround:0," m"),K(1),ge("max",t.cross.crawlerHeight+t.cross.groundFloorThickness)("ngModel",t.cross.floorAboveGround)("disabled",!t.cross.crawlerSpace),K(1),ge("id",f.Section.roofCircle),K(11),ge("tag",f.tags.halfCircle),K(6),ge("ngModel",t.cross.roofCirclePullDown),K(3),Nn("Walls under the roof ",t.cross.roofCircleWalls,"m"),K(1),ge("ngModel",t.cross.roofCircleWalls),K(1),ge("id",f.Section.roof70),K(5),ge("tag",f.tags.bendPoint)("overlayTemplate",u),K(8),ge("tag",f.tags.bendPoint)("overlayTemplate",u),K(2),ge("ngModel",t.cross.roof70offset),K(3),Nn("Walls under the roof: ",t.cross.roof70Walls,"m"),K(1),ge("ngModel",t.cross.roof70Walls),K(3),Nn("Roof extension: ",t.cross.roof70Extension,"m"),K(1),ge("ngModel",t.cross.roof70Extension),K(1),ge("id",f.Section.roofChoice),K(5),ge("ngModel",t.cross.roofStyle),K(1),ge("value",f.RoofStyle.roofCircle),K(2),ge("value",f.RoofStyle.roofCircleAnd70),K(2),ge("value",f.RoofStyle.roof70),K(2),ge("id",f.Section.roofEdge),K(5),ge("id",f.Section.EndOfPageHouse),K(6),Yl("href",f.discord,E1),K(1),ge("icon",f.faDiscord)}}let izt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=Ct,this.tags=l2,this.RoofStyle=u3,this.discord=this.appService.discord,this.faDiscord=gT,this.round=cn,this.update=this.houseService.update}ngAfterViewInit(){}studLabel(t){return`#${t} `}sizeLabel(t){return`${t} m`}choosenRoofstyle(t){this.houseService.update("cross","roofStyle",t)}}return n.\u0275fac=function(t){return new(t||n)(U(No),U(io))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-house"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"id"],[1,"mat-caption"],[2,"font-size","0.7em"],["href","https://passivehouse.com/","target","_blank"],["cdkOverlayOrigin","",3,"tag","overlayTemplate"],["insulated",""],["orientation",""],["fxLayoutAlign","center",2,"margin","8px 0 32px"],["efficiency",""],["simple",""],[3,"tag"],["baseDimension",""],["min","6","max","15","tickInterval","1",3,"ngModel","input"],[1,"technical"],["extensionToSouth",""],["extensionToNorth",""],["min","0","max","6","thumbLabel","","tickInterval","1",3,"ngModel","displayWith","input"],["thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["min","2.6","max","3.6","step","0.1","tickInterval","1",3,"ngModel","input"],[3,"ngModel","ngModelChange"],["min","0","step","0.1","tickInterval","1",3,"max","ngModel","disabled","input"],["href","https://en.wikipedia.org/wiki/Mansard_roof","target","_blank"],["min","0","max","2","step","0.1","tickInterval","1",3,"ngModel","input"],["bendPoint",""],["name","roofstyle",3,"ngModel","ngModelChange"],[3,"value"],["target","_blank",2,"background","var(--primary-color)","padding","0 6px","color","white",3,"href"],[3,"icon"],[1,"on-page-menu"],["mat-menu-item","","routerLink","/construction"],["mat-menu-item","","routerLink","/wired"],["mat-menu-item","","routerLink","/installations"],["mat-menu-item","","routerLink","/map"],["mat-menu-item","","routerLink","/stairs"],[2,"font-family","Material Icons Outlined"]],template:function(t,i){1&t&&(Dt(0,nzt,284,78,"ng-container",0),zi(1,"async")),2&t&&ge("ngIf",Er(1,1,i.house$))},dependencies:[D2,Xwe,v7,Vv,w7,XC,Pv,C7,nte,ite,w0,wN,_v,Tw,eQ,g0],styles:[".on-page-menu[_ngcontent-%COMP%]{border-radius:4px;display:flex;flex-direction:column;gap:8px;justify-content:center;padding:8px 0;margin:16px 0;max-width:200px}.on-page-menu[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f}"]}),n})();const rzt=["*"];let Lw=(()=>{class n{constructor(t){this.domSanitizer=t,this.height="360",this.imgStyle="",this.newStyle="background-color:red"}ngAfterViewInit(){const t=`${this.imgStyle}height: ${this.height.replace("px","")}px;`,i=this.domSanitizer.bypassSecurityTrustStyle(t);this.style=i}}return n.\u0275fac=function(t){return new(t||n)(U(Mf))},n.\u0275cmp=Sn({type:n,selectors:[["app-img-page"]],inputs:{src:"src",height:"height",imgStyle:"imgStyle"},ngContentSelectors:rzt,decls:4,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"container"],[3,"src"],[1,"mat-caption"]],template:function(t,i){1&t&&(T1(),B(0,"div",0),Ue(1,"img",1),B(2,"div",2),Do(3),z()()),2&t&&(K(1),c4(i.style),ge("src",i.src,E1))},dependencies:[m6,w0],styles:[".container[_ngcontent-%COMP%]{margin:32px 0 0}img[_ngcontent-%COMP%]{height:100%}"]}),n})();const V5e=function(n){return{active:n}};function szt(n,e){if(1&n&&(B(0,"th",24),H(1),z()),2&n){const t=e.index,i=Ft().ngIf;ge("ngClass",xu(2,V5e,i.stair.minSteps+t===i.stair.steps)),K(1),Nn(" #",i.stair.minSteps+t," ")}}const ozt=function(n){return{"background-color":n}};function azt(n,e){if(1&n){const t=no();Ls(0),B(1,"td",26),Kt("click",function(){zn(t);const r=Ft().index,s=Ft().index,o=Ft().ngIf,a=Ft();return h(a.select(o.stair.minSteps+r,a.totalRunByIndex(s)))}),H(2),z(),Ds()}if(2&n){const t=e.ngIf,i=Ft().index,r=Ft().index,s=Ft(2);K(1),Qb("matrix-cell matrix-",i,"--",r,""),ge("ngClass",s.score(t,s.getRise(i)))("ngStyle",xu(7,ozt,s.scoreColor(t,s.getRise(i)))),K(1),Nn(" ",t," mm ")}}function czt(n,e){if(1&n&&(Ls(0),Dt(1,azt,3,9,"ng-container",0),Ds()),2&n){const t=e.index,i=Ft().index,r=Ft(2);K(1),ge("ngIf",r.getRun(t,i))}}const tQ=function(){return[]};function lzt(n,e){if(1&n&&(B(0,"tr")(1,"td",25)(2,"b"),H(3),z()(),Dt(4,czt,2,1,"ng-container",14),z()),2&n){const t=e.index,i=Ft().ngIf,r=Ft();K(1),ge("ngClass",xu(3,V5e,r.totalRunByIndex(t)===i.stair.totalRun)),K(2),Nn("",r.totalRunByIndex(t),"m"),K(1),ge("ngForOf",bu(5,tQ).constructor(r.rangeSteps))}}function uzt(n,e){if(1&n){const t=no();Ls(0),B(1,"section",4,5)(3,"h1"),H(4,"Stairs"),z(),B(5,"p"),H(6," Stair design is a complex and important aspect of architecture, with entire Pinterest collections dedicated to it. "),z()(),B(7,"section",4)(8,"h2"),H(9,"Stair 101"),z(),B(10,"p"),H(11," Calculating stairs can be approached in various ways. "),z(),B(12,"ol")(13,"li"),H(14,"The "),B(15,"b"),H(16,"vertical"),z(),H(17),z(),B(18,"li"),H(19,"The building code allows for the rise of each step to be between 182mm and 220mm. Therefore we can only have steps between "),B(20,"b"),H(21),z()()(),B(22,"label")(23,"span"),H(24),z(),B(25,"mat-slider",6),Kt("input",function(r){zn(t);const s=Ft();return h(s.update("stair","steps",r.value,s.Tag.amountSteps))}),z()(),B(26,"ol",7)(27,"li"),H(28),z(),B(29,"li"),H(30,"The min and max "),B(31,"b"),H(32,"horizontal distance"),z(),H(33),z()(),B(34,"label")(35,"span"),H(36),z(),B(37,"mat-slider",8),Kt("input",function(r){return zn(t),h(Ft().update("stair","totalRun",r.value))}),z()(),B(38,"ol",9)(39,"li"),H(40),z(),B(41,"li"),H(42,"A matrix is formed from the combination of the two parameters to calculate "),B(43,"b"),H(44,"the run"),z(),H(45,". "),z()(),B(46,"table",10)(47,"tr"),Ue(48,"th")(49,"th"),Dt(50,szt,2,4,"th",11),z(),B(51,"tr"),Ue(52,"td"),B(53,"td",12),H(54,"\u2193 Too high rise \u2193"),z(),B(55,"td",13),H(56," \u2191 Too steep angle \u2191 "),z(),B(57,"td",12),H(58,"\u2191 Too low rise \u2191"),z()(),Dt(59,lzt,5,6,"tr",14),B(60,"tr"),Ue(61,"td"),B(62,"td",13),H(63," \u2193 Too shallow angle \u2193 "),z()()(),B(64,"p"),H(65," Where "),B(66,"span",15),H(67,"Red"),z(),H(68," is not allowed due to code."),Ue(69,"br"),B(70,"span",16),H(71,"Orange"),z(),H(72," is not comfortable to walk on."),Ue(73,"br"),B(74,"span",17),H(75,"Green"),z(),H(76," should be the most comfortable."),Ue(77,"br"),H(78," Which step, is a tradeoff between the total length of the stairs and the angle. A lower angle takes less energy to walk up the stairs, but the stairs will be longer. "),z()(),B(79,"section",4,18)(81,"h2"),H(82,"The good, bad and perfect stairs"),z(),H(83," A good, comfortable stairs should follow a specific rule:"),Ue(84,"br"),H(85," One run and two rises "),B(86,"div",19),Ue(87,"b"),z(),H(88," should be around 60cm (+/- 3cm) "),B(89,"label")(90,"span"),H(91,"Checks"),z(),B(92,"table")(93,"tr")(94,"td"),H(95,"Angle"),z(),B(96,"td"),H(97),z()(),B(98,"tr")(99,"td"),H(100,"Steps"),z(),B(101,"td"),H(102),z()(),B(103,"tr")(104,"td"),H(105,"Rise"),z(),B(106,"td"),H(107),z()(),B(108,"tr")(109,"td"),H(110,"Run"),z(),B(111,"td"),H(112),z()(),B(113,"tr")(114,"td"),H(115,"Rise+Run+Rise"),z(),B(116,"td"),H(117),z()()()()(),B(118,"section",4,20)(120,"h2"),H(121,"Stair layout"),z(),B(122,"p"),H(123," Stairs can be straight, but we like to have two bends. This makes the stairs relative more compact. It prevents to falldown the complete stairs in accidents. Sideplus, it comes with a nice open hall effect. "),z(),B(124,"label")(125,"span"),H(126),z(),B(127,"mat-slider",21),Kt("input",function(r){return zn(t),h(Ft().update("stair","walkWidth",r.value))}),z()(),B(128,"label")(129,"span"),H(130),z(),B(131,"mat-slider",22),Kt("input",function(r){return zn(t),h(Ft().update("stair","stepsFlightLeft",r.value))}),z()(),B(132,"p"),H(133," For now we keep the model as simple as possible. Stairs are quite complex. Steps can change direction slowly to make it a piece of art by it self. Take a look at this drawing by Tieleman (1739 !) for inspiration. "),z(),Ue(134,"app-img-page",23),z(),Ds()}if(2&n){const t=e.ngIf,i=Ft();K(1),ge("id",i.Section.stairStart),K(6),ge("id",i.Section.stairBasic),K(10),Nn(" distance is already determined by the house: ",t.stair.totalRise,"m"),K(4),z3("",t.stair.minSteps," and ",t.stair.maxSteps," steps"),K(3),Nn("Total steps: horizontal ",t.stair.steps,""),K(1),ge("min",t.stair.minSteps)("max",t.stair.maxSteps)("ngModel",t.stair.steps)("displayWith",i.sizeLabel),K(3),Nn("The rise is: ",i.round(1e3*t.stair.rise,0),"mm"),K(5),z3(" is easy, the stairs should be between ",i.minAngle,"\xb0 and ",i.maxAngle,"\xb0"),K(3),Nn("Total length stairs: horizontal ",t.stair.totalRun,"m"),K(1),ge("min",i.totalRunMin)("max",i.totalRunMax)("ngModel",t.stair.totalRun)("displayWith",i.sizeLabel),K(3),Nn("The angle is: ",t.stair.angle,"\xb0"),K(10),ge("ngForOf",bu(37,tQ).constructor(i.rangeSteps)),K(9),ge("ngForOf",bu(38,tQ).constructor(i.deltas)),K(20),ge("id",i.Section.stairCheck),K(18),Nn("",t.stair.angle,"\xb0"),K(5),Zl(t.stair.steps),K(5),Nn("",i.round(1e3*t.stair.rise,0)," mm"),K(5),Nn("",i.round(1e3*t.stair.run,0)," mm"),K(5),Nn("",i.round(1e3*(t.stair.run+2*t.stair.rise),0)," mm"),K(1),ge("id",i.Section.stairPlan),K(8),Nn("Width ",t.stair.walkWidth,"m"),K(1),ge("min",.7)("max",1.2)("ngModel",t.stair.walkWidth),K(3),z3("Steps on the rightside: ",t.stair.stepsFlightLeft," of ",t.stair.steps,""),K(1),ge("min",0)("max",t.stair.steps-t.stair.stepsFlightMid)("ngModel",t.stair.stepsFlightLeft)}}let hzt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.house$=this.houseService.house$,this.Section=Ct,this.Tag=l2,this.tagsKeys=Object.keys(l2),this.minAngle=30,this.maxAngle=42,this.update=this.houseService.update,this.round=cn}ngAfterViewInit(){}sizeLabel(t){return`${t}m`}get totalRunMax(){return cn(this.house$.value.stair.totalRise/Math.tan(Ere(this.minAngle)),1)}get totalRunMin(){return cn(this.house$.value.stair.totalRise/Math.tan(Ere(this.maxAngle)),1)}get deltas(){return Math.ceil(this.rangeRun/.1)-1|1}get rangeRun(){return this.totalRunMax-this.totalRunMin}get rangeSteps(){const t=this.house$.value.stair;return t.maxSteps-t.minSteps+1}totalRunByIndex(t){return cn(t/(this.deltas-1)*this.rangeRun+this.totalRunMin,1)}getRun(t,i){const r=this.house$.value.stair,s=this.totalRunByIndex(i);return cn(s/(r.minSteps+t)*1e3,0)}getRise(t){const i=this.house$.value.stair;return cn(i.totalRise/(i.minSteps+t)*1e3,0)}scoreComfort(t,i){return Math.abs(t+2*i-600)}scoreColor(t,i){const r=this.scoreComfort(t,i);return r>30?void 0:`rgba(0, 115, 0, ${.6-.8/30*r})`}score(t,i){const r=this.house$.value.stair,s=Math.abs(1e3*r.run-t)<1&&Math.abs(1e3*r.rise-i)<1?" active":"";return t<220?"too-little"+s:t>300?"too-much"+s:this.scoreComfort(t,i)>30?"not-comfortable"+s:"comfortable"+s}select(t,i){this.update("stair","steps",t),this.update("stair","totalRun",i)}}return n.\u0275fac=function(t){return new(t||n)(U(No),U(io))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-stairs"]],decls:13,vars:3,consts:[[4,"ngIf"],[1,"app-card","link-card"],["href","https://leho-howest.instructure.com/courses/7615/files/918866/download?verifier=xMYSUyM9ccEtmFNfgWEjmAHL5qb6wyWL0K4ChQxf&wrap=1","target","_blank"],["identifier","PassiveOpen-Stairs"],[3,"id"],["Section.stairStart",""],["step","1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","3"],["step","0.1","thumbLabel","","tickInterval","1",3,"min","max","ngModel","displayWith","input"],["start","5"],[1,"matrix"],[3,"ngClass",4,"ngFor","ngForOf"],["rowspan","50",1,"vertical"],["colspan","50",2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"too-much",2,"padding","0 8px"],[1,"not-comfortable",2,"padding","0 8px"],[2,"background-color","rgba(0, 115, 0,0.6)","padding","0 8px"],["Section.stairCheck",""],[2,"display","inline-block","background","var(--accent)","color","black","height","10px","width","18px"],["Section.stairPlan",""],["step","0.1","tickInterval","1",3,"min","max","ngModel","input"],["step","1","tickInterval","1",3,"min","max","ngModel","input"],["height","800","src","assets/img/1739_Tieleman.jpg"],[3,"ngClass"],[1,"step",3,"ngClass"],[3,"ngClass","ngStyle","click"]],template:function(t,i){1&t&&(Dt(0,uzt,135,39,"ng-container",0),zi(1,"async"),B(2,"section")(3,"h2"),H(4,"Read more"),z(),B(5,"div",1)(6,"div")(7,"div")(8,"a",2),H(9,"Dutch: PDF about Stairs"),z(),Ue(10,"br"),H(11," How to draw and calculate stairs. With use of Sketchup and cad. Verdrijving methode in het oneindige "),z()()()(),Ue(12,"disqus",3)),2&t&&ge("ngIf",Er(1,1,i.house$))},dependencies:[K9,t3,D2,r6,Vv,Pv,C7,ute,Xv,Yv,Lw,g0],styles:['.matrix[_ngcontent-%COMP%]{border-collapse:collapse}.matrix[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]{line-height:1em;white-space:pre-wrap;cursor:pointer;transition:.2s}.matrix[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]:hover{background-color:var(--color-30)}.matrix[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .matrix[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:relative}.matrix[_ngcontent-%COMP%]   .vertical[_ngcontent-%COMP%]{writing-mode:vertical-lr;text-align:center;padding:4px}.too-much[_ngcontent-%COMP%], .too-little[_ngcontent-%COMP%]{background-color:#ff00004d;opacity:.6}.not-comfortable[_ngcontent-%COMP%]{background-color:#ff73004d;opacity:.6}.active[_ngcontent-%COMP%]:after{content:" ";position:absolute;top:-2px;left:-2px;width:100%;height:100%;border:2px solid var(--color-60)}']}),n})();function fzt(n,e){if(1&n&&(B(0,"th",22),H(1),z()),2&n){const t=Ft().$implicit;K(1),Nn(" ",t.name," ")}}function dzt(n,e){if(1&n&&Ue(0,"span",25),2&n){const t=Ft().$implicit,i=Ft().$implicit;ge("innerHTML",i.def(t[i.id],t.unit),k3)}}function pzt(n,e){if(1&n&&(B(0,"td",23),Dt(1,dzt,1,1,"span",24),z()),2&n){const t=e.$implicit,i=Ft().$implicit;K(1),ge("ngIf",t[i.id])}}function gzt(n,e){1&n&&(Ls(0,19),Dt(1,fzt,2,1,"th",20),Dt(2,pzt,2,1,"td",21),Ds()),2&n&&ge("matColumnDef",e.$implicit.id)}function mzt(n,e){1&n&&Ue(0,"tr",26)}function Azt(n,e){1&n&&Ue(0,"tr",27)}function vzt(n,e){if(1&n){const t=no();Ls(0),B(1,"table",12),Dt(2,gzt,3,1,"ng-container",13),Dt(3,mzt,1,0,"tr",14),Dt(4,Azt,1,0,"tr",15),z(),B(5,"h3"),H(6,"The numbers that matter:"),z(),B(7,"p",16)(8,"span"),H(9,"r"),B(10,"sub"),H(11,"construction"),z()(),B(12,"span"),H(13),z(),B(14,"span"),H(15,"U "),z(),B(16,"span"),H(17),z(),B(18,"span"),H(19,"Wall thickness "),z(),B(20,"span"),H(21),z()(),B(22,"label")(23,"span"),H(24),z(),B(25,"mat-slider",17),Kt("input",function(r){return zn(t),h(Ft().updateJoist(r.value))}),z()(),B(26,"label")(27,"span"),H(28),z(),B(29,"mat-slider",18),Kt("input",function(r){zn(t);const s=Ft();return h(s.updateOuterSheet(s.round(r.value,4)))}),z()(),Ds()}if(2&n){const t=e.ngIf,i=Ft();K(1),ge("dataSource",t.construction.heatCalcs),K(1),ge("ngForOf",i.columns),K(1),ge("matHeaderRowDef",i.columnNames),K(1),ge("matRowDefColumns",i.columnNames),K(9),Nn(" ",t.construction.rConstruction,""),K(4),Nn(" ",t.construction.U,""),K(4),Nn(" ",t.construction.outerWallThickness,"m"),K(3),Nn("I joist thickness (and main insulation) ",t.construction.thickness[i.Thicknesses.joists]," mm "),K(1),ge("max",i.joists.length-1)("ngModel",i.currentJoist()),K(3),Nn("Celit thickness (",t.construction.thickness[i.Thicknesses.outerSheet],"mm ) "),K(1),ge("ngModel",t.construction.thickness[i.Thicknesses.outerSheet])}}let _zt=(()=>{class n{constructor(t){this.houseService=t,this.house$=this.houseService.house$,this.Tag=l2,this.Section=Ct,this.update=this.houseService.update,this.round=cn,this.Thicknesses=An,this.joists=[200,300,350,400],this.columns=[{id:"name",name:"Name",def:i=>`${i}`},{id:"diameter",name:"Diameter",def:i=>`${cn(i,3)}`},{id:"lambda",name:"Lambda",def:i=>`${cn(i,3)}`},{id:"r",name:"R",def:i=>`${cn(i,2)}`},{id:"deltaT",name:"Delta T",def:i=>`${cn(i,1)}\xb0C`},{id:"temp",name:"Temp",def:i=>`${cn(i,1)}\xb0C`}],this.columnNames=this.columns.map(i=>i.id),this.currentJoist=()=>this.joists.findIndex(i=>i===this.house$.value.construction.Thicknesses[An.joists])}ngAfterViewInit(){}updateJoist(t){this.update("construction","thicknessJoist",this.joists[t])}updateOuterSheet(t){this.update("construction","thicknessJoist",this.joists[t])}}return n.\u0275fac=function(t){return new(t||n)(U(No))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-construction"]],decls:214,vars:29,consts:[[3,"id"],[1,"counter"],["href","https://www.benders.se/sortiment/tak/betongtakpannor/palema/brilliant/"],["href","https://bmisverige.se/produkter/yttertak/betongpannor/jonaker-elegant/jonaker-elegant-normalpanna"],["href","https://steriks.se/produktsortiment/tak/betongtakpannor/mjoback-blank-ytbehandlad-2-kupig/"],["href","https://steriks.se/produktsortiment/tak/betongtakpannor/ekeby-hogblank-2-kupig-betongpanna/"],["href","https://en.wikipedia.org/wiki/Panelling"],[3,"tag"],[4,"ngIf"],[1,"app-card","link-card"],["href","https://www.chicagotribune.com/sns-201508311900--tms--askbildrctnab-a20150911-20150911-story.html","target","_blank"],["identifier","PassiveOpen-Construction"],["mat-table","",1,"mat-elevation-z0",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["gdColumns"," 1fr 1fr","gdGap","8px"],["min","0","step","1","tickInterval","1",3,"max","ngModel","input"],["min","0","max","150","step","10","tickInterval","1",3,"ngModel","input"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(B(0,"section",0)(1,"h1"),H(2," Construction "),z(),B(3,"h3"),H(4," This page is still under construction. "),z()(),B(5,"section",0)(6,"h2",1),H(7,"Foundation"),z(),B(8,"p"),H(9," Depends a lot on the region. In this case we use a 'mono-pour' together with the crawler space walls. "),z()(),B(10,"section",0)(11,"h2",1),H(12,"Crawler space walls"),z(),B(13,"p"),H(14," Here we use "),B(15,"tag"),H(16,"Insulated Concrete Forms (ICFs)"),z(),H(17,". These walls are connected to the floor and should be insulated. ICFs allows you to build these walls yourself. "),z()(),B(18,"section",0)(19,"h2",1),H(20,"Ground floor"),z(),B(21,"p"),H(22," Mass (heavy things) can keep heat. Like a stone wall after sunset would emit heat. It works also the opposite. Like churches are nice cool in the summer. Mass balance out the heat in a nice way. A complete wooden house, would not have that effect. Therefore some mass is a good thing to have. "),Ue(23,"br")(24,"br"),H(25," Hollow-concrete-plate are relatively light and have the mass we look for. They can come with insulation, altho this would not be damp-open. "),z()(),B(26,"section",0)(27,"h2",1),H(28,"Sole beams"),z(),B(29,"p"),H(30," Its never a good idea to build wood straight on concrete."),Ue(31,"br"),H(32," Therefore we use: "),z(),B(33,"ul")(34,"li"),H(35," a weather-resistent filt "),z(),B(36,"li"),H(37," pressured-treated plate (more water resistent), "),z(),B(38,"li"),H(39," the base plate. "),z()()(),B(40,"section",0)(41,"h2",1),H(42,"I-Joists"),z(),B(43,"p"),H(44," This is the actual structure. These i-joist are engineered. So they are straight, and cost less wood to produce. The "),B(45,"tag"),H(46,"on-center"),z(),H(47," distance (EU is often 60cm, US 16inch) is important. Only the first and last stud should not follow this grid, because otherwise the product on the finish end exactly on center of the stud. This is wrong because it the edge of the house, so the material should continue to the end. Wood is the material for construction. It is a storage of CO"),B(48,"sub"),H(49,"2"),z(),H(50,", natural, light and easy to work with. Modern products like, "),B(51,"tag"),H(52,"I Joists"),z(),H(53,", are even stronger than their natual twins. And you don't need to have a 30cm tree to produce a 30cm beam, so trees can be used more effective. (A disadvantage can be the glue used tho). Wood can last forever, think of all the old houses in old cities. "),z()(),B(54,"section",0)(55,"h2",1),H(56,"OSB (on the inside)"),z(),B(57,"p"),H(58," Traditional seen, OSB is used for a airtight outside layer. It also helps the whole building to be more solid, it can deal with sheer stresses. In this build, we will build "),B(59,"tag"),H(60,"damp open"),z(),H(61," and OSB is a perfect airtight product, but will also block moisture. Therefore it is actually great on the inside of the house "),z()(),B(62,"section",0)(63,"h2",1),H(64,"Tape"),z(),B(65,"p"),H(66," OSB and all the other seams are of course not air-tight. Therefore should we tape every seam. This step is harder than it sounds, especially around windows. You might not pass your passiv-haus certification due to this step."),Ue(67,"br")(68,"br"),H(69," This steps includes also windows/doors and close all openings for a door-blower test. "),z()(),B(70,"section",0)(71,"h2",1),H(72,"Wall-Floor beam"),z(),B(73,"p"),H(74," The top-floor will hang on the inside of the wall. This prevents a "),B(75,"tag"),H(76,"thermal bridge"),z(),H(77,", in other words, this makes it more easy to "),B(78,"tag"),H(79,"air tighten"),z(),H(80," the house and the insulation continues "),z()(),B(81,"section",0)(82,"h2",1),H(83,"Wooden floor"),z(),B(84,"p"),H(85," Joists and osb "),z()(),B(86,"section",0)(87,"h2",1),H(88,"Roof ridge"),z(),Ue(89,"p"),z(),B(90,"section",0)(91,"h2",1),H(92,"Roof joists"),z(),Ue(93,"p"),z(),B(94,"section",0)(95,"h2",1),H(96,"Roof Inside"),z(),B(97,"p"),H(98," The roof need sturdiness. So we use OSB here as well as the inner layer. All seams can be taped directly "),z()(),B(99,"section",0)(100,"h2",1),H(101,"Insulation"),z(),B(102,"p"),H(103," Very important step. Keep it all dry. It feels like glass-insulation is best best of both worlds. It's often recycled glass and has a relative small footprint to the more eco-friendly alternatives. Stay away from wool for example. It is also very affordable, so we can focus our money on more expensive windows "),z()(),B(104,"section",0)(105,"h2",1),H(106,"Damp open outer sheets"),z(),B(107,"p"),H(108," Here are multiple options. We don't like to use plastics here. A great option is "),B(109,"tag"),H(110,"fiberboard's"),z(),H(111,", they are damp open, some what water resistant. This is an environment friendly product. It can be out in the rain for 4 weeks, while building. "),z()(),B(112,"section",0)(113,"h2",1),H(114,"Roof Woodwork"),z(),B(115,"p"),H(116," grid of wood "),z()(),B(117,"section",0)(118,"h2",1),H(119,"Roof tiles"),z(),H(120," Tiles. If you need to choose between a keramic tile or a concrete tile. A concrete tile is not baked. They say its more eco friendly. However keramic tiles have a longer life span and look more natural. "),B(121,"ol")(122,"li")(123,"a",2),H(124,"Palema from Benders"),z()(),B(125,"li")(126,"a",3),H(127,"J\xf6n\xe5ker from Monier"),z()(),B(128,"li")(129,"a",4),H(130,"Mj\xf6b\xe4ck from S: t Eriks"),z()(),B(131,"li")(132,"a",5),H(133,"Ekeby from S: t Eriks"),z()()()(),B(134,"section",0)(135,"h2",1),H(136,"Cavity (vent space)"),z(),B(137,"p"),H(138," This step depends a lot on the outer finish. In this example we use vertical wooden planks. Therfore we need first vertical strips (the construction is vertical, and water needs to run down). On top of these strips are horizontal strips so we can add vertical facade planks "),z()(),B(139,"section",0)(140,"h2",1),H(141,"Outer wall"),z(),B(142,"p"),H(143," In this example we use wooden planks. Traditionally seen, it was impossible to make big planks. So in the early days the alternate with big planks and smaller strips. "),z()(),B(144,"section",0)(145,"h2",1),H(146,"Service wall"),z(),B(147,"p"),H(148," To prevent puncture in our air-tight OSB layer. There will be a service layer that contains all electric, water and such. It comes with extra insulation. This makes (small) renovations possible in the future. "),z()(),B(149,"section",0)(150,"h2",1),H(151,"Gips / Drywall / wood-finish"),z(),B(152,"p"),H(153," The inside wall will be either covered by gypsum/drywall. We also very like the idea of lower "),B(154,"a",6),H(155,"paneling"),z()()(),B(156,"h2"),H(157,"The water problem"),z(),B(158,"p"),H(159," Warm air can contain more water, so the inside air normally would go through the wall and cools down. To a point that it cannot hold longer that amount of water, so it condense in the middle of the wall. "),Ue(160,"br")(161,"br"),H(162," Traditional building takes that problem with plastic wraps. One on the outside to keep weather out. And a even more water-closed layer in the inside. Water moves out the construction. It is important during the building fase, to keep everything relatively dry. "),Ue(163,"br")(164,"br"),H(165," The alternative is: "),B(166,"tag"),H(167,"damp Open"),z(),H(168,". where no wraps are needed. The inner layer of the house has a water-closed natural layer (OSB sheets). The outside layer is 'damp-open' so it would not absorb rainwater, but the moist air from inside can escape. It is more like a Dutch slogan: not fighting the water, but living with (some) water. "),Ue(169,"br")(170,"br"),H(171," We try to look what is the best insulation out there. We think wood-fiber is the best most sustainable in therms of production/insulation values. Stone/glass fibers are a little bit less on the production level, but a bit more durable over time. "),Ue(172,"br")(173,"br"),B(174,"tag",7),H(175,"Wood fiber panels"),z(),H(176," are treated with bitumen, there are light, water-resistant and still insulating. They are a perfect layer for the outside layer of the construction (not final outer layer). "),Ue(177,"br")(178,"br"),H(179," On the inside of the OSB is an extra 2cm layer and finises of with wood or drywall(gips plates). This layer is practical, because all the switches and wall socket cannot interfere with the air-tight-layer. With a "),B(180,"tag",7),H(181," pipeLayer"),z(),H(182," is it:\n"),z(),B(183,"ol")(184,"li"),H(185,"Easier to build keep it "),B(186,"tag",7),H(187,"air tight"),z()(),B(188,"li"),H(189,"Deal with sockets in a later stage"),z(),B(190,"li"),H(191,"Modifications"),z()(),B(192,"section",0)(193,"h2"),H(194," Walls outer finish "),z(),B(195,"p"),H(196," Wooden house, has wood on the outside. Not completely tru. Wood is a sustainable choice (altho we wonder, painting it every 10 years...), but in theory can we have anything on the outside. Keep in mind if you build"),B(197,"tag"),H(198,"damp-open "),z(),H(199," that the finish-layer should also be damp-open. Bricks are for example. The cement is definitely not sustainable, but there is no maintenance in the coming 100-ish years. "),z()(),B(200,"section",0),Dt(201,vzt,30,12,"ng-container",8),zi(202,"async"),z(),B(203,"section")(204,"h2"),H(205,"Read more"),z(),B(206,"div",9)(207,"div")(208,"div")(209,"a",10),H(210,"Rain during construction"),z(),Ue(211,"br"),H(212," Read more about rain and construction. Alternative there are tents to cover the building site. "),z()()()(),Ue(213,"disqus",11)),2&t&&(ge("id",i.Section.constructionWelcome),K(5),ge("id",i.Section.constructionFoundation),K(5),ge("id",i.Section.constructionCrawlerSpace),K(8),ge("id",i.Section.constructionGroundFloor),K(8),ge("id",i.Section.constructionWallSole),K(14),ge("id",i.Section.constructionWallJoists),K(14),ge("id",i.Section.constructionWallOSB),K(8),ge("id",i.Section.constructionWallTape),K(8),ge("id",i.Section.constructionFloorLVL),K(11),ge("id",i.Section.constructionFloor),K(5),ge("id",i.Section.constructionRoofRidge),K(4),ge("id",i.Section.constructionRoofJoist),K(4),ge("id",i.Section.constructionRoofInside),K(5),ge("id",i.Section.constructionWallInsulation),K(5),ge("id",i.Section.constructionWallOuterSheet),K(8),ge("id",i.Section.constructionRoofSpace),K(5),ge("id",i.Section.constructionRoofTiles),K(17),ge("id",i.Section.constructionWallSpace),K(5),ge("id",i.Section.constructionWallFacade),K(5),ge("id",i.Section.constructionWallService),K(5),ge("id",i.Section.constructionWallGips),K(25),ge("tag",i.Tag.woodFiberPlate),K(6),ge("tag",i.Tag.pipeLayer),K(6),ge("tag",i.Tag.airTight),K(6),ge("id",i.Section.constructionWallFinish),K(8),ge("id",i.Section.constructionParameters),K(1),ge("ngIf",Er(202,27,i.house$)))},dependencies:[t3,D2,Vv,aM,jv,cM,$v,Wv,lM,Kv,qv,uM,hM,Pv,C7,xte,Cte,Yv,Tw,g0],styles:['[_nghost-%COMP%]{counter-reset:heading}h2.counter[_ngcontent-%COMP%]{position:relative;counter-reset:subheading}h2.counter[_ngcontent-%COMP%]:after{content:"Step";position:absolute;top:-1.2em;left:-.6em;font-size:.8em;opacity:.6}h2.counter[_ngcontent-%COMP%]:before{content:counter(heading) "";counter-increment:heading;width:32px;display:inline-block;opacity:.6}']}),n})(),yzt=(()=>{class n{constructor(t,i,r){this.houseService=t,this.threeService=i,this.appService=r,this.house$=this.houseService.house$,this.Section=Ct,this.Tag=l2,this.wallDetail="wallDetail",this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.subscriptions.push()}showPerSection(){}}return n.\u0275fac=function(t){return new(t||n)(U(No),U(Zy),U(io))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-facade"]],decls:42,vars:3,consts:[[3,"id"],[1,"mat-caption"],[1,"technical",2,"max-width","640px"],["fxLayout","row wrap","fxLayoutGap","8px","fxLayoutAlign","center center",2,"padding","16px 0 24px"],["src","/assets/img/window_1.jpg",2,"max-height","360px"],["src","/assets/img/window_2.jpg",2,"max-height","360px"],["src","https://ars.els-cdn.com/content/image/1-s2.0-S0378778816316383-gr9.jpg"],["src","/assets/img/door_step_1.jpg",2,"max-height","360px"],["identifier","PassiveOpen-Facade"]],template:function(t,i){1&t&&(B(0,"section",0)(1,"h1"),H(2,"Facade"),z(),B(3,"p",1),H(4," We cover here all the basics about the outside of the house. Windows, doors, domers and bricks. "),z()(),B(5,"section",0)(6,"h1"),H(7,"Window"),z(),B(8,"p"),H(9," Windows are a tradeoff between a nice open light house and: heat loss, heat gain, complexer builds and more expensive. In a passiv house, belongs high end windows, triple glass and high-end framing. That makes it one of the most costly investments. "),z(),B(10,"label",2)(11,"span"),H(12,"Design"),z(),B(13,"span"),H(14," Dutch traditional windows have some variations. "),Ue(15,"br")(16,"br"),H(17," The right one is is nicely detailed. Look how the windowframe ends in a little stone, to keep it dry and prevent rotting. However the windowframe is missing at the bottom, the window rest on the stone. Not our modern standards. "),Ue(18,"br")(19,"br"),H(20," The major difference between them is that the left one has a frame at the bottom. That is better insulated, and we do need to use less precious stone. "),z(),B(21,"div",3),Ue(22,"img",4)(23,"img",5),z(),B(24,"span"),H(25," Furthermore both window-bottom-stones go into the brickwork. If you don't do this, you would create a channel for rainwater (wind blows it in the corner). And the dirt will collect on your walls. Now it would drip off. "),z()(),B(26,"p"),H(27," Place the window in the middle of insulation "),Ue(28,"img",6),z()(),B(29,"section",0)(30,"h1"),H(31,"Doors"),z(),B(32,"p"),H(33," For guests the first warm welcome "),z(),B(34,"label",2)(35,"span"),H(36,"Design"),z(),B(37,"span"),H(38,"They kinda look like windows. Ofcourse the bottomframe is missing here. The bottom frame should be wheelchair friendly, altho its a bit contradictive with a eleveated ground floor (due to crawler space). The door and frame should be extreme insulated. "),z(),B(39,"div",3),Ue(40,"img",7),z()()(),Ue(41,"disqus",8)),2&t&&(ge("id",i.Section.facadeStart),K(5),ge("id",i.Section.facadeWindow),K(24),ge("id",i.Section.facadeDoor))},dependencies:[m6,Sv,w0,Yv],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:48px;align-items:center}img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:cover}"]}),n})();function wzt(n,e){1&n&&H(0," A x00L tank for warm water. It is heated up externally by e.g. the sun or a heat-pump. The output is floor-heating or domestic hot water for showers. ")}let bzt=(()=>{class n{constructor(){this.Tag=l2,this.Section=Ct}ngAfterViewInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Sn({type:n,selectors:[["app-page-installation"]],decls:140,vars:15,consts:[[3,"id"],["warmWaterBuffer",""],[3,"tag","overlayTemplate"],["height","360px","src","assets/img/heat_water.png"],["height","360px","src","assets/img/rainwater_flow.png"],["identifier","PassiveOpen-installations"]],template:function(t,i){if(1&t&&(B(0,"section",0)(1,"h1"),H(2,"Installations"),z()(),Dt(3,wzt,1,0,"ng-template",null,1,X2),B(5,"section",0)(6,"h2"),H(7,"Heating"),z(),H(8," When it comes to heat, we need to think about how to produce, store, and use it effectively. In colder climates, some heating may be required in extreme winters. Besides heat is required for daily activities such as taking warm showers. These solutions are planned around a central "),B(9,"tag",2),H(10," warm water buffer"),z(),H(11," tank. An alternative would be warming up the air via the ventilation system. "),B(12,"h3"),H(13,"Production"),z(),H(14," There are some options to produce heat. Don't forget humans, the sun, a computer also generates quite a bit of heat. "),B(15,"ul")(16,"li"),H(17,"Heat pump"),z(),B(18,"li"),H(19,"City / block heating"),z(),B(20,"li"),H(21,"Wood / pallet stove"),z(),B(22,"li"),H(23,"Bio gass / Biomeiler"),z(),B(24,"li"),H(25,"Some levels - solar"),z()(),B(26,"h3"),H(27,"Storage"),z(),H(28," Unlike energy, storage for heat is a bit more easy. Heat can be stored in a "),B(29,"tag",2),H(30," warm water buffer"),z(),H(31," tank. A big well insulated tank can store heat for a long time. There are even solutions to store heat in an super insulated tank underground or even in aquifers far underground. "),B(32,"h3"),H(33,"Use"),z(),H(34," One of the passive house criteria is that the heat loss should be less than 15\u2008kWh/(m\xb2a). This is typically low as 10-20% what a normal house needs. Floor heating is the most suitable heating option for a passive house, because it uses low temperatures. The warm water needs to be warmed up to 60\xb0 to kill bacteria and can be used in showers and sinks. "),B(35,"h3"),H(36,"Preservation"),z(),H(37," A passive house has great insulation, but also heat exchangers in the ventilation system and in the showers. "),Ue(38,"app-img-page",3),z(),B(39,"section",0)(40,"h2"),H(41,"Electricity"),z(),H(42," The primary focus of a PassiveHouse should be efficiency rather than electricity. However, electricity is still necessary for daily activities. "),Ue(43,"br")(44,"br"),H(45," Production and usages of 'renewable primary energy' can higher your passive house certification level to "),B(46,"tag"),H(47,"plus "),z(),H(48," or "),B(49,"tag"),H(50,"premium"),z(),H(51,". "),B(52,"h3"),H(53,"Production"),z(),H(54," While achieving complete off-grid living may be difficult, we can greatly reduce our electricity usage by utilizing solar panels. "),Ue(55,"br")(56,"br"),H(57," This Mansard roof is a (near) perfect angle for solar panels. However the to make it look nice is harder. We are still looking for the right panel types with old, classical roof tiles. If space allows it, you can put the panels on the ground away from the house "),Ue(58,"br")(59,"br"),H(60," There is a balance between the time you need electricity (evening, electricity-car & cooking) and when they produce the most (around noon). If you can return-to-net, an orientation to noon is the best. Otherwise some panels may be more beneficial facing westward. "),B(61,"h3"),H(62,"Storage"),z(),H(63," Home batteries are not there yet. They are expensive and have a short life span. If you live rural or in areas with long power-outage it might be interesting to have backup power. "),Ue(64,"br")(65,"br"),H(66," A way to store some of the energy we can use electricity to storing excesses in the "),B(67,"tag",2),H(68," warm water buffer "),z(),H(69,". "),B(70,"h3"),H(71,"Preserve"),z(),H(72," Some machines in a house that use quite a bit of electricity are the washing machine, dishwasher, and dryer. Some machines work with heat-pumps like a dryer. Other machines have hot-fill. This way e.g. the washing machine uses the hot water ( which is way better storable) instead of electricity. Make sure the lines are short though.\n"),z(),B(73,"section",0)(74,"h2"),H(75,"Ventilation"),z(),B(76,"p"),H(77," In passive houses, the air-tight construction plays a crucial role in conserving heat. By using advanced blow-in and suck-out ventilation systems, up to 94% of heat energy can be recovered and redistributed throughout the house, resulting in significant energy savings. "),Ue(78,"br")(79,"br"),H(80," Air-tight?! than I can't open my windows.. There is a common misconception that passive houses don't allow for opening windows. However, if the outside temperature is not super warm or cold, it is perfectly fine to do so. Nevertheless, a well-designed climate system can provide clean, filtered air and eliminate the need for open windows. This is especially useful for people with allergies or in areas with high levels of smog. "),Ue(81,"br")(82,"br"),H(83," To achieve a healthy indoor air quality, the ventilation system is designed to provide fresh air to some rooms, like the living room and sleeping rooms, while extracting air from wet rooms and the kitchen. The system is balanced to ensure efficient airflow throughout the house. Some rooms get fresh air, living room, sleeping rooms. And some rooms the air is pumped out, the wet rooms and kitchen. "),z()(),B(84,"h1"),H(85,"Not passive house but climate-friendly"),z(),B(86,"section",0)(87,"h2"),H(88,"Rain water"),z(),B(89,"p"),H(90," Climate adaptation requires the conservation of water, which can be achieved by collecting rainwater and using it as a buffer during droughts. Rainwater, which has low calcium levels, is perfect for watering plants, flushing toilets, and washing clothes. A large water tank (10m"),B(91,"sub"),H(92,"3"),z(),H(93,"), pump, and three-filter system are needed to store and filter the rainwater. "),Ue(94,"br")(95,"br"),H(96," To ensure continuous water supply, a machine can automatically switch to normal drinking water backup if the rainwater tank runs out. "),Ue(97,"br")(98,"br"),H(99,"In theory showering with rainwater seems perfect, but most laws forbids to bend cold-rainwater with warm-drinkwater. If you do, you need less soap and your hair will be smooth. It might be different at your location "),z(),Ue(100,"app-img-page",4),z(),B(101,"section",0)(102,"h2"),H(103,"Drink water"),z(),B(104,"p"),H(105," Cold water supply doesn't require any special considerations, but if you live in the countryside, you may have a local source available. On the other hand, for hot or warm water supply in sinks and showers, a central heating system is necessary. It involves a central "),B(106,"tag",2),H(107," warm water buffer"),z(),H(108," tank that utilizes various heat sources, enabling hot water and even heating throughout the house. "),z()(),B(109,"section",0)(110,"h2"),H(111,"Domotica / Smart home"),z(),B(112,"p"),H(113," As homes become more complex, they should also become more intelligent. Automated air and heating systems that operate seamlessly in the background can enhance your comfort without you even noticing. For instance, on hot days, smart sunscreens can come down automatically to keep the interior cool, while they retract when it rains. "),Ue(114,"br")(115,"br"),H(116,' While a basic level of intelligence is necessary, there\'s room to enhance automation with features like automatic lighting. However, "smart homes" can cause some frustration, as not all situations require voice commands or smartphone operation; sometimes a simple button will do the trick. '),Ue(117,"br"),H(118," Despite this, a smart home with advanced capabilities should be able to determine when you need to turn on the lights. "),Ue(119,"br")(120,"br"),H(121,"Think of (all if over rulable) "),z(),B(122,"ul")(123,"li"),H(124,"The lights dim more in the evening"),z(),B(125,"li"),H(126,"Red nightlight in the toilet after 23:00"),z(),B(127,"li"),H(128,"Block the sunlight with screens"),z(),B(129,"li"),H(130,"Randomly turning on lights when you're away can create the illusion that someone is at home"),z(),B(131,"li"),H(132,"Remote controllable (local VPN not via cloud)"),z(),B(133,"li"),H(134,"More secure, camera's and alarms"),z()(),Ue(135,"br")(136,"br"),B(137,"p"),H(138," Wi-Fi is great, but cables offer better performance. If you are building a new home, consider installing more internet cables than you think you'll need. A smart home can use internet cables for sensors, cameras, computers, and more. Cat 6 cables are a good choice because they are easy to work with and provide fine speeds for most applications, as long as the distance is not too long (over 30 meters or so). For work or gaming stations, you may want to consider using a higher quality cable. Shielded cables are not necessary for home use, as they are more expensive and harder to work with "),z()(),Ue(139,"disqus",5)),2&t){const r=Si(4);ge("id",i.Section.installationWelcome),K(5),ge("id",i.Section.installationHeating),K(4),ge("tag",i.Tag.warmWaterBuffer)("overlayTemplate",r),K(20),ge("tag",i.Tag.warmWaterBuffer)("overlayTemplate",r),K(10),ge("id",i.Section.installationElectricity),K(28),ge("tag",i.Tag.warmWaterBuffer)("overlayTemplate",r),K(6),ge("id",i.Section.installationVentilation),K(13),ge("id",i.Section.installationGreyWater),K(15),ge("id",i.Section.installationDrinkWater),K(5),ge("tag",i.Tag.warmWaterBuffer)("overlayTemplate",r),K(3),ge("id",i.Section.installationSmartHome)}},dependencies:[Yv,Tw,eQ,Lw],styles:["h3[_ngcontent-%COMP%]{font-weight:500}"]}),n})();function Czt(n,e){TL.expire()}const Mzt=class xzt extends uE{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){lr()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Hu(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),X_(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,c){let l;const u=t.viewState;function f(E,I,k,O){return s.call(o,I,E?k:null,O)}const p=u.projection,g=Yse(e.slice(),p),v=[[0,0]];if(p.canWrapX()&&r){const I=Oo(p.getExtent());v.push([-I,0],[I,0])}const _=t.layerStatesArray,w=_.length,b=[],x=[];for(let E=0;E<v.length;E++)for(let I=w-1;I>=0;--I){const k=_[I],O=k.layer;if(O.hasRenderer()&&BU(k,u)&&a.call(c,O)){const R=O.getRenderer(),P=O.getSource();if(R&&P){const Q=P.getWrapX()?g:e,J=f.bind(null,k.managed);x[0]=Q[0]+v[E][0],x[1]=Q[1]+v[E][1],l=R.forEachFeatureAtCoordinate(x,t,i,J,b)}if(l)return l}}if(0===b.length)return;const M=1/b.length;return b.forEach((E,I)=>E.distanceSq+=I*M),b.sort((E,I)=>E.distanceSq-I.distanceSq),b.some(E=>l=E.callback(E.feature,E.layer,E.geometry)),l}hasFeatureAtCoordinate(e,t,i,r,s,o){return void 0!==this.forEachFeatureAtCoordinate(e,t,i,r,P0,this,s,o)}getMap(){return this.map_}renderFrame(e){lr()}scheduleExpireIconCache(e){TL.canExpireCache()&&e.postRenderFunctions.push(Czt)}},Ezt=class Szt extends Mzt{constructor(e){super(e),this.fontChangeListenerKey_=Ks(wd,"propertychange",e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=wL+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new _w(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){na(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const r=[];let s=null;for(let o=0,a=t.length;o<a;++o){const c=t[o];e.layerIndex=o;const l=c.layer,u=l.getSourceState();if(!BU(c,i)||"ready"!=u&&"undefined"!=u){l.unrender();continue}const f=l.render(e,s);!f||(f!==s&&(this.children_.push(f),s=f),"getDeclutter"in l&&r.push(l))}for(let o=r.length-1;o>=0;--o)r[o].renderDeclutter(e);(function pIt(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}};class y8 extends q3{constructor(e,t){super(e),this.layer=t}}class iQ extends G8e{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),i?Array.isArray(i)?i=new sc(i.slice(),{unique:!0}):Kr("function"==typeof i.getArray,43):i=new sc(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(na),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ks(e,"add",this.handleLayersAdd_,this),Ks(e,"remove",this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(na);y5(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new y8("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Ks(e,"propertychange",this.handleLayerChange_,this),Ks(e,"change",this.handleLayerChange_,this)];e instanceof iQ&&t.push(Ks(e,"addlayer",this.handleLayerGroupAdd_,this),Ks(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[nr(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new y8("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new y8("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new y8("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=nr(t);this.listenerKeys_[i].forEach(na),delete this.listenerKeys_[i],this.dispatchEvent(new y8("removelayer",t)),this.changed()}getLayers(){return this.get("layers")}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new y8("removelayer",i[r]))}this.set("layers",e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=void 0!==e?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&void 0===r.zIndex&&(s=0);for(let o=i,a=t.length;o<a;o++){const c=t[o];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),void 0!==r.extent&&(c.extent=void 0!==c.extent?h3(c.extent,r.extent):r.extent),void 0===c.zIndex&&(c.zIndex=s)}return t}getSourceState(){return"ready"}}const rD=iQ,Lzt=class Tzt extends Dm{constructor(e,t){super(e),this.map_=e,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===t?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Ks(i,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=Ks(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!foe&&{passive:!1})}emulateClick_(e){let t=new Md(so.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Md(so.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Md(so.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==so.POINTERUP||t.type==so.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==so.POINTERDOWN||t.type==so.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Md(so.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(na),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const t=new Md(so.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),0===this.dragListenerKeys_.length){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ks(i,so.POINTERMOVE,this.handlePointerMove_,this),Ks(i,so.POINTERUP,this.handlePointerUp_,this),Ks(this.element_,so.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Ks(this.element_.getRootNode(),so.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Md(so.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Md(so.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(na(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(na(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(na),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},sD=1/0,sQ=class Fzt extends Ih{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){_L(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&_L(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)na(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Tm&&this.listenerKeys.push(Ks(e,"postrender",this.render,this)),e.render())}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}},Hzt=class Pzt extends sQ{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const t=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",r=void 0!==e.expandClassName?e.expandClassName:t+"-expand",s=void 0!==e.collapseLabel?e.collapseLabel:"\u203a",o=void 0!==e.collapseClassName?e.collapseClassName:t+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=void 0!==e.label?e.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const u=this.element;u.className=t+" "+wL+" "+dU+(this.collapsed_&&this.collapsible_?" "+B8e:"")+(this.collapsible_?"":" ol-uncollapsible"),u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&!1===r.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(i),t}updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!rd(t,this.renderedAttributions_)){R8e(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(B8e),this.collapsed_?I8e(this.collapseLabel_,this.label_):I8e(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},Ozt=class zzt extends sQ{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"\u21e7",r=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener("click",this.handleClick_.bind(this),!1);const c=this.element;c.className=t+" "+wL+" "+dU,c.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(yL)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();void 0!==i&&(this.duration_>0&&i%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:fA}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(yL);s||0!==i?s&&0!==i&&this.element.classList.remove(yL):this.element.classList.add(yL)}this.label_.style.transform=r}this.rotation_=i}},Vzt=class Nzt extends sQ{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,r=void 0!==e.zoomInClassName?e.zoomInClassName:t+"-in",s=void 0!==e.zoomOutClassName?e.zoomOutClassName:t+"-out",o=void 0!==e.zoomInLabel?e.zoomInLabel:"+",a=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2013",c=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",l=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=c,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener("click",this.handleClick_.bind(this,i),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=l,f.appendChild("string"==typeof a?document.createTextNode(a):a),f.addEventListener("click",this.handleClick_.bind(this,-i),!1);const g=this.element;g.className=t+" "+wL+" "+dU,g.appendChild(u),g.appendChild(f),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(void 0!==r){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:fA})):i.setZoom(s)}}},Qzt=class Gzt extends dA{constructor(e){super(),this.delta_=(e=e||{}).delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==so.DBLCLICK){const i=e.originalEvent,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_;CU(e.map.getView(),o,s,this.duration_),i.preventDefault(),t=!0}return!t}},jzt=class Wzt extends bd{constructor(e){super({stopDown:Em}),this.kinetic_=(e=e||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const t=e.condition?e.condition:VU(GU,_pe);this.condition_=e.onFocusOnly?VU(gpe,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(MU(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();(function S$e(n,e){n[0]*=e,n[1]*=e})(s,a.getResolution()),KH(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:fA})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},Kzt=class $zt extends bd{constructor(e){e=e||{},super({stopDown:Em}),this.condition_=e.condition?e.condition:WRt,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!DL(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===DU)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(o-this.lastAngle_)),this.lastAngle_=o}handleUpEvent(e){return!DL(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!(DL(e)&&mpe(e)&&this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},Xzt=class qzt extends uE{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Q6([r])}getGeometry(){return this.geometry_}};class oQ extends q3{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}const Zzt=class Yzt extends bd{constructor(e){super(),this.box_=new Xzt((e=e||{}).className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:mpe,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new oQ("boxdrag",e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new oQ(t?"boxend":"boxcancel",e.coordinate,e)),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new oQ("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}},eOt=class Jzt extends Zzt{constructor(e){super({condition:(e=e||{}).condition?e.condition:QU,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:fA})}},nOt=class tOt extends dA{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return GU(t)&&vpe(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let t=!1;if("keydown"==e.type){const i=e.originalEvent,r=i.keyCode;if(this.condition_(e)&&(40==r||37==r||39==r||38==r)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let c=0,l=0;40==r?l=-a:37==r?c=-a:39==r?c=a:l=a;const u=[c,l];KH(u,o.getRotation()),function TIt(n,e,t){const i=n.getCenterInternal();i&&n.animateInternal({duration:void 0!==t?t:250,easing:SIt,center:n.getConstrainedCenter([i[0]+e[0],i[1]+e[1]])})}(o,u,this.duration_),i.preventDefault(),t=!0}}return!t}},rOt=class iOt extends dA{constructor(e){super(),this.condition_=(e=e||{}).condition?e.condition:vpe,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let t=!1;if("keydown"==e.type||"keypress"==e.type){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&("+"===r||"-"===r)){const o="+"===r?this.delta_:-this.delta_;CU(e.map.getView(),o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}},cOt=class aOt extends dA{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const t=e.condition?e.condition:mA;this.condition_=e.onFocusOnly?VU(gpe,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||"wheel"!==e.type)return!0;const i=e.map,r=e.originalEvent;let s;if(r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),"wheel"==e.type&&(s=r.deltaY,$$e&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=hoe),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),0===s)return!1;this.lastDelta_=s;const o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if("trackpad"===this.mode_&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const c=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-d1(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),CU(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},uOt=class lOt extends bd{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=Em),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.lastAngle_){const c=s-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==DU&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(MU(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},fOt=class hOt extends bd{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=Em),super(t),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,l=c.getView();1!=t&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(MU(this.targetPointers))),c.render(),l.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}};function U5e(n){n instanceof fw?n.setMapInternal(null):n instanceof rD&&n.getLayers().forEach(U5e)}function G5e(n,e){if(n instanceof fw)n.setMapInternal(e);else if(n instanceof rD){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)G5e(t[i],e)}}const mOt=class pOt extends Ih{constructor(e){super();const t=function gOt(n){let e=null;void 0!==n.keyboardEventTarget&&(e="string"==typeof n.keyboardEventTarget?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&"function"==typeof n.layers.getLayers?n.layers:new rD({layers:n.layers});let r,s,o;return t.layergroup=i,t.target=n.target,t.view=n.view instanceof q0?n.view:new q0,void 0!==n.controls&&(Array.isArray(n.controls)?r=new sc(n.controls.slice()):(Kr("function"==typeof n.controls.getArray,47),r=n.controls)),void 0!==n.interactions&&(Array.isArray(n.interactions)?s=new sc(n.interactions.slice()):(Kr("function"==typeof n.interactions.getArray,48),s=n.interactions)),void 0!==n.overlays?Array.isArray(n.overlays)?o=new sc(n.overlays.slice()):(Kr("function"==typeof n.overlays.getArray,49),o=n.overlays):o=new sc,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}(e=e||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:hoe,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||function Uzt(n){n=n||{};const e=new sc;return(void 0===n.zoom||n.zoom)&&e.push(new Vzt(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&e.push(new Ozt(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&e.push(new Hzt(n.attributionOptions)),e}(),this.interactions=t.interactions||function dOt(n){n=n||{};const e=new sc,t=new class sOt{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&e.push(new Kzt),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&e.push(new Qzt({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&e.push(new jzt({onFocusOnly:n.onFocusOnly,kinetic:t})),(void 0===n.pinchRotate||n.pinchRotate)&&e.push(new uOt),(void 0===n.pinchZoom||n.pinchZoom)&&e.push(new fOt({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(e.push(new nOt),e.push(new rOt({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&e.push(new cOt({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&e.push(new eOt({duration:n.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class Rzt extends class Dzt{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,y5(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Kr(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=sD&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),l=this.getRightChildIndex_(e),u=l<r&&i[l]<i[c]?l:c;t[e]=t[u],i[e]=i[u],e=u}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(!(r[a]>o))break;i[t]=i[a],r[t]=r[a],t=a}i[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let o,a,c;for(a=0;a<s;++a)o=t[a],c=e(o),c==sD?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=c,t[r++]=o);t.length=r,i.length=r,this.heapify_()}}{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener("change",this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(2===i||3===i||4===i){3!==i&&t.removeEventListener("change",this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r,s,o,i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),0===r&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof q0)&&e.view.then(function(r){i.setView(new q0(r))}),this.controls.addEventListener("add",r=>{r.element.setMap(this)}),this.controls.addEventListener("remove",r=>{r.element.setMap(null)}),this.interactions.addEventListener("add",r=>{r.element.setMap(this)}),this.interactions.addEventListener("remove",r=>{r.element.setMap(null)}),this.overlays_.addEventListener("add",r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener("remove",r=>{const s=r.element.getId();void 0!==s&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){G5e(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,t,null,void 0!==i.layerFilter?i.layerFilter:P0,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];return function t(i){i.forEach(function(r){r instanceof rD?t(r.getLayers()):e.push(r)})}(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==(t=void 0!==t?t:{}).hitTolerance?t.hitTolerance:0,!1!==t.checkWrapped,void 0!==t.layerFilter?t.layerFilter:P0,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/(i.width/r[0]),(a.clientY-i.top)/(i.height/r[1])]}getTarget(){return this.get("target")}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Mm(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?jc(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(e){const t=this.getLayerGroup();if(e instanceof sc)return void t.setLayers(e);const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=xc(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?jc(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return function kzt(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return sD;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){const i=new Md(t=t||e.type,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if("pointerdown"===i||"wheel"===i||"keydown"===i){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()===this&&o.getActive()&&this.getTargetElement()&&(!o.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[0]||o[1]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new vA("loadend",this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new vA("loadstart",this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)na(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,_L(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host)}const e=this.getTarget(),t="string"==typeof e?document.getElementById(e):e;if(this.targetElement_=t,t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Ezt(this)),this.mapBrowserEventHandler_=new Lzt(this,this.moveTolerance_);for(const s in so)this.mapBrowserEventHandler_.addEventListener(so[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!foe&&{passive:!1});const i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[Ks(i,"keydown",this.handleBrowserEvent,this),Ks(i,"keypress",this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(na(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(na(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Ks(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ks(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(na),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new y8("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ks(e,"propertychange",this.render,this),Ks(e,"change",this.render,this),Ks(e,"addlayer",this.handleLayerAdd_,this),Ks(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){U5e(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(void 0!==t&&b8e(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:jH(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:nr(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=jH(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!G_(this.previousExtent_)&&!_m(s.extent,this.previousExtent_))&&(this.dispatchEvent(new vA("movestart",this,r)),this.previousExtent_=A5(this.previousExtent_)),this.previousExtent_&&!s.viewHints[0]&&!s.viewHints[1]&&!_m(s.extent,this.previousExtent_)&&(this.dispatchEvent(new vA("moveend",this,s)),Gse(s.extent,this.previousExtent_))),this.dispatchEvent(new vA("postrender",this,s)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new y8("removelayer",t)),this.set("layergroup",e)}setSize(e){this.set("size",e)}setTarget(e){this.set("target",e)}setView(e){if(!e||e instanceof q0)return void this.set("view",e);this.set("view",new q0);const t=this;e.then(function(i){t.setView(new q0(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[s,o],!b8e(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&eoe("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!rd(t,i))&&(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}};class cQ extends q3{constructor(e,t,i,r,s){super(e),this.features=t,this.coordinate=i,this.startCoordinate=r,this.mapBrowserEvent=s}}const Q5e=class AOt extends bd{constructor(e){let t;if(super(e=e||{}),this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==e.features?e.features:null,e.layers&&!this.features_)if("function"==typeof e.layers)t=e.layers;else{const i=e.layers;t=function(r){return i.includes(r)}}else t=P0;this.layerFilter_=t,this.filter_=e.filter&&!this.features_?e.filter:P0,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.condition_=e.condition?e.condition:mA,this.lastFeature_=null,this.addChangeListener("active",this.handleActiveChanged_)}handleDownEvent(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);const t=this.features_||new sc([this.lastFeature_]);return this.dispatchEvent(new cQ("translatestart",t,e.coordinate,this.startCoordinate_,e)),!0}return!1}handleUpEvent(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);const t=this.features_||new sc([this.lastFeature_]);return this.dispatchEvent(new cQ("translateend",t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}handleDragEvent(e){if(this.lastCoordinate_){const t=e.coordinate,i=t[0]-this.lastCoordinate_[0],r=t[1]-this.lastCoordinate_[1],s=this.features_||new sc([this.lastFeature_]);s.forEach(function(o){const a=o.getGeometry();a.translate(i,r),o.setGeometry(a)}),this.lastCoordinate_=t,this.dispatchEvent(new cQ("translating",s,t,this.startCoordinate_,e))}}handleMoveEvent(e){const t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(e,t){return t.forEachFeatureAtPixel(e,(i,r)=>{if(i instanceof il&&this.filter_(i,r)&&(!this.features_||this.features_.getArray().includes(i)))return i},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(e){this.hitTolerance_=e}setMap(e){const t=this.getMap();super.setMap(e),this.updateState_(t)}handleActiveChanged_(){this.updateState_(null)}updateState_(e){let t=this.getMap();const i=this.getActive();(!t||!i)&&(t=t||e,t&&t.getViewport().classList.remove("ol-grab","ol-grabbing"))}};function kA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aD(n){return aD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aD(n)}function W5e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function j5e(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function $5e(n,e,t){return e&&j5e(n.prototype,e),t&&j5e(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Z5(n){return Z5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z5(n)}function vOt(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&null!==(n=Z5(n)););return n}function Dw(){return Dw=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=vOt(e,t);if(r){var s=Object.getOwnPropertyDescriptor(r,t);return s.get?s.get.call(arguments.length<3?e:i):s.value}},Dw.apply(this,arguments)}function lQ(n,e){return lQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},lQ(n,e)}function wOt(n,e){if(e&&("object"===aD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function yOt(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function K5e(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e=["Assertion failed",e].join(": "),!n)throw new Error(e)}function q5e(n){return n}function cD(n,e){return-1!==n.indexOf(e)}function X5e(n){return"[object Array]"===Object.prototype.toString.call(n)}var hQ=function(){function n(e,t,i,r){W5e(this,n),this.propagationStopped_=!1,this.type_=e,this.features_=t,this.angle_=i,this.anchor_=r}return $5e(n,[{key:"preventDefault",value:function(){this.propagationStopped_=!0}},{key:"stopPropagation",value:function(){this.propagationStopped_=!0}},{key:"propagationStopped",get:function(){return this.propagationStopped_}},{key:"type",get:function(){return this.type_}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.angle_}},{key:"anchor",get:function(){return this.anchor_}}]),n}(),fQ=typeof navigator<"u"?navigator.userAgent.toLowerCase():"",bOt=-1!==fQ.indexOf("macintosh"),xOt=-1!==fQ.indexOf("webkit")&&-1==fQ.indexOf("edge");var lD="rotate-anchor",uD="rotate-arrow",Yu="angle",hD="anchor",Y5e=function(n){!function _Ot(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&lQ(n,e)}(t,n);var e=function MOt(n){var e=function SOt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var r,i=Z5(n);if(e){var s=Z5(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return wOt(this,r)}}(t);function t(){var i,r,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(W5e(this,t),(r=e.call(this,{handleDownEvent:EOt,handleUpEvent:TOt,handleDragEvent:LOt,handleMoveEvent:Iw})).previousCursor_=void 0,r.anchorFeature_=void 0,r.arrowFeature_=void 0,r.lastCoordinate_=void 0,r.anchorMoving_=!1,r.overlay_=new O2({style:s.style||DOt(),source:new ol({features:new sc})}),r.condition_=s.condition?s.condition:mA,r.features_=void 0,s.features)if(X5e(s.features))r.features_=new sc(s.features);else{if(!(s.features instanceof sc))throw new Error("Features option should be an array or collection of features, got "+aD(s.features));r.features_=s.features}else r.features_=new sc;return r.allowAnchorMovement=void 0===s.allowAnchorMovement||s.allowAnchorMovement,r.setAnchor(s.anchor||dQ(r.features_)),r.setAngle(s.angle||0),r.features_.on("add",(i=r).onFeatureAdd_.bind(i)),r.features_.on("remove",(i=r).onFeatureRemove_.bind(i)),r.on("change:"+Yu,(i=r).onAngleChange_.bind(i)),r.on("change:"+hD,(i=r).onAnchorChange_.bind(i)),r.createOrUpdateAnchorFeature_(),r.createOrUpdateArrowFeature_(),r}return $5e(t,[{key:"setMap",value:function(r){this.overlay_.setMap(r),Dw(Z5(t.prototype),"setMap",this).call(this,r)}},{key:"setActive",value:function(r){this.overlay_&&this.overlay_.setMap(r?this.map:void 0),Dw(Z5(t.prototype),"setActive",this).call(this,r)}},{key:"setAngle",value:function(r){K5e(!isNaN(parseFloat(r)),"Numeric value passed"),this.set(Yu,parseFloat(r))}},{key:"getAngle",value:function(){return this.get(Yu)}},{key:"setAnchor",value:function(r){K5e(null==r||X5e(r)&&2===r.length,"Array of two elements passed"),this.set(hD,null!=r?r.map(parseFloat):dQ(this.features_))}},{key:"getAnchor",value:function(){return this.get(hD)}},{key:"createOrUpdateAnchorFeature_",value:function(){var r=this.getAngle(),s=this.getAnchor();if(s)if(this.anchorFeature_)this.anchorFeature_.getGeometry().setCoordinates(s),this.anchorFeature_.set(Yu,r);else{var o;this.anchorFeature_=new il((kA(o={geometry:new p3(s)},Yu,r),kA(o,lD,!0),o)),this.overlay_.getSource().addFeature(this.anchorFeature_)}}},{key:"createOrUpdateArrowFeature_",value:function(){var r=this.getAngle(),s=this.getAnchor();if(s)if(this.arrowFeature_)this.arrowFeature_.getGeometry().setCoordinates(s),this.arrowFeature_.set(Yu,r);else{var o;this.arrowFeature_=new il((kA(o={geometry:new p3(s)},Yu,r),kA(o,uD,!0),o)),this.overlay_.getSource().addFeature(this.arrowFeature_)}}},{key:"resetAngleAndAnchor_",value:function(){this.resetAngle_(),this.resetAnchor_()}},{key:"resetAngle_",value:function(){this.set(Yu,0,!0),this.arrowFeature_&&this.arrowFeature_.set(Yu,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(Yu,this.getAngle())}},{key:"resetAnchor_",value:function(){this.set(hD,dQ(this.features_),!0),this.getAnchor()&&(this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(this.getAnchor()),this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(this.getAnchor()))}},{key:"onFeatureAdd_",value:function(){this.resetAngleAndAnchor_(),this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()}},{key:"onFeatureRemove_",value:function(){this.resetAngleAndAnchor_(),this.features_.getLength()?(this.createOrUpdateAnchorFeature_(),this.createOrUpdateArrowFeature_()):(this.overlay_.getSource().clear(),this.anchorFeature_=this.arrowFeature_=void 0)}},{key:"onAngleChange_",value:function(r){var s=this,o=r.oldValue;this.features_.forEach(function(a){return a.getGeometry().rotate(s.getAngle()-o,s.getAnchor())}),this.arrowFeature_&&this.arrowFeature_.set(Yu,this.getAngle()),this.anchorFeature_&&this.anchorFeature_.set(Yu,this.getAngle())}},{key:"onAnchorChange_",value:function(){var r=this.getAnchor();r&&(this.anchorFeature_&&this.anchorFeature_.getGeometry().setCoordinates(r),this.arrowFeature_&&this.arrowFeature_.getGeometry().setCoordinates(r))}},{key:"dispatchRotateStartEvent_",value:function(r){this.dispatchEvent(new hQ("rotatestart",r,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotatingEvent_",value:function(r){this.dispatchEvent(new hQ("rotating",r,this.getAngle(),this.getAnchor()))}},{key:"dispatchRotateEndEvent_",value:function(r){this.dispatchEvent(new hQ("rotateend",r,this.getAngle(),this.getAnchor()))}},{key:"features",get:function(){return this.features_}},{key:"angle",get:function(){return this.getAngle()},set:function(r){this.setAngle(r)}},{key:"anchor",get:function(){return this.getAnchor()},set:function(r){this.setAnchor(r)}},{key:"map",set:function(r){this.setMap(r)},get:function(){return this.getMap()}},{key:"active",set:function(r){this.setActive(r)},get:function(){return this.getActive()}}]),t}(bd);function EOt(n){if(!DL(n))return!1;if(function(e){var t=e.originalEvent;return 0==t.button&&!(xOt&&bOt&&t.ctrlKey)}(n)&&this.condition_(n)){var e=n.map.forEachFeatureAtPixel(n.pixel,q5e);if(cD(["click","singleclick","dblclick"],n.type)&&cD([this.anchorFeature_,this.arrowFeature_],e))return!1;if(e&&!this.lastCoordinate_&&(cD(this.features_.getArray(),e)||e===this.arrowFeature_))return this.lastCoordinate_=n.coordinate,Iw.call(this,n),this.dispatchRotateStartEvent_(this.features_),!0;if(e&&e===this.anchorFeature_&&this.allowAnchorMovement)return this.anchorMoving_=!0,Iw.call(this,n),!0}return!1}function TOt(n){return this.lastCoordinate_?(this.lastCoordinate_=void 0,Iw.call(this,n),this.dispatchRotateEndEvent_(this.features_),!0):!!this.anchorMoving_&&(this.anchorMoving_=!1,Iw.call(this,n),!0)}function LOt(n){var e=n.coordinate,t=this.anchorFeature_.getGeometry().getCoordinates();if(this.lastCoordinate_){var i=[this.lastCoordinate_[0]-t[0],this.lastCoordinate_[1]-t[1]],r=[e[0]-t[0],e[1]-t[1]],s=Math.atan2(i[0]*r[1]-r[0]*i[1],i[0]*r[0]+i[1]*r[1]);this.setAngle(this.getAngle()+s),this.dispatchRotatingEvent_(this.features_),this.lastCoordinate_=e}else this.anchorMoving_&&this.setAnchor(e)}function Iw(n){var e=n.map,t=n.pixel,i=e.getTargetElement(),r=e.forEachFeatureAtPixel(t,q5e),s=function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c&&(i.style.cursor="-webkit-"+a,i.style.cursor="-moz-"+a),i.style.cursor=a};this.lastCoordinate_?(this.previousCursor_=i.style.cursor,s("grabbing",!0)):r&&(cD(this.features_.getArray(),r)||r===this.arrowFeature_)?(this.previousCursor_=i.style.cursor,s("grab",!0)):r&&r===this.anchorFeature_&&this.allowAnchorMovement||this.anchorMoving_?(this.previousCursor_=i.style.cursor,s("crosshair")):(s(this.previousCursor_||""),this.previousCursor_=void 0)}function DOt(){var n,e=[255,255,255,.8],t=[0,153,255,.8],i=[255,255,255,.01],s=(kA(n={},lD,[new $o({image:new hw({fill:new ks({color:[0,153,255,.8]}),stroke:new Ro({color:t,width:1}),radius:4,points:6}),zIndex:1/0})]),kA(n,uD,[new $o({fill:new ks({color:i}),stroke:new Ro({color:e,width:4}),text:new Hh({font:"12px sans-serif",offsetX:20,offsetY:-20,fill:new ks({color:"blue"}),stroke:new Ro({color:e,width:3})}),zIndex:1/0}),new $o({fill:new ks({color:i}),stroke:new Ro({color:t,width:2}),zIndex:1/0})]),n);return function(o,a){var c,l=o.get(Yu)||0;switch(!0){case o.get(lD):return(c=s[lD])[0].getImage().setRotation(-l),c;case o.get(uD):c=s[uD];var u=o.getGeometry().getCoordinates(),f=new Q6([[[u[0],u[1]-6*a],[u[0]+8*a,u[1]-12*a],[u[0],u[1]+30*a],[u[0]-8*a,u[1]-12*a],[u[0],u[1]-6*a]]]);return f.rotate(l,u),c[0].setGeometry(f),c[1].setGeometry(f),c[0].getText().setText(Math.round(180*-l/Math.PI)+"\xb0"),c}}}function dQ(n){if((n=n instanceof sc?n.getArray():n).length)return F0(function IOt(n){if((n=n instanceof sc?n.getArray():n).length)return new pz(n.map(function(e){return e.getGeometry()})).getExtent()}(n))}typeof window<"u"&&window.ol&&window.ol.interaction&&(window.ol.interaction.RotateFeature=Y5e);const ROt=Y5e,kOt={useCORS:!0,ignoreElements:function(n){const e=n.className||"";return e.includes("ol-control")&&!e.includes("ol-scale")&&(!e.includes("ol-attribution")||!e.includes("ol-uncollapsible"))}},FOt={A4:[297,210],A3:[420,297]};let Z5e=(()=>{class n{constructor(t){this.colorService=t,this.subscriptions=[],this.highlight=!1,this.printing=!1,this.geometry=new Q6([]),this.feature=new il(this.geometry),this.source=new ol({features:[this.feature]}),this.layer=new O2({source:this.source,style:(i,r)=>this.printStyle(i,r),zIndex:1e3}),this.paperSizeKey="A4",this.paperSize=FOt[this.paperSizeKey],this.scale=1e3,this.padding=40,this.active$=new Vs(!1),this.texts=[{text:"\u2191",size:32,offset:[120,-60]},{text:"F\xf6rhandsbesked",size:14,offset:[20,-4]},{text:"Lindelund",size:16,offset:[20,40]},{text:"2023-04-14 V1",size:12,offset:[20,60]},{text:`Scala 1:${this.scale} (${this.paperSizeKey})`,size:12,offset:[20,80]}],this.printStyle=(i,r)=>new $o({fill:new ks({color:this.printing?"":this.highlight?this.colorService.rgba(vl.accent,.2):this.colorService.rgba(vl.color0,.7)}),stroke:new Ro({color:this.colorService.rgba(this.highlight?vl.accent:vl.color100,.8),width:this.printing?0:this.highlight?2:1})})}init(t){this.map=t}onDestroy(){this.active$.next(!1),this.map.removeLayer(this.layer),this.subscriptions.forEach(t=>t.unsubscribe()),this.map.removeInteraction(this.translate),this.printing=!1,this.map.getInteractions().forEach(t=>t.setActive(!0))}startPrint(t={}){t.paperSize&&(this.paperSize=t.paperSize),t.scale&&(this.scale=t.scale),t.center?this.center=t.center:(console.log("fallen back on map center"),this.center=this.map.getView().getCenter()),this.active$.next(!0),this.addLayer()}print(){this.printing=!0,console.log("pdf saved"),this.map.getInteractions().forEach(f=>f.setActive(!1));const r=this.map.getViewport(),s=this.map.getTargetElement(),o=this.map.getSize(),a=this.paperSize[0]/this.paperSize[1];let l,u;o[0]/o[1]<a?(l=1*o[0],u=l/a):(u=1*o[1],l=u*a),r.style.width=`${l}px`,r.style.height=`${u}px`,s.style.width=`${l}px`,s.style.height=`${u}px`,s.style.zIndex="999999",s.style.pointerEvents="none",r.style.pointerEvents="none",this.map.updateSize(),kOt.scale=1,this.zoomToPrint(!1),setTimeout(()=>{this.layer.on("postrender",f=>{const p=function BOt(n){if(!(n.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=n.inversePixelTransform[0],t=n.inversePixelTransform[1],i=Math.sqrt(e*e+t*t),r=n.frameState,s=gE(n.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=lpe(r.viewState.resolution,i);let a;const c=id();return c&&(a=Cm(c,r.viewState.projection)),new ape(n.context,i,r.extent,s,r.viewState.rotation,o,a)}(f);this.addLabel(p.context_,1,this.map.pixelRatio_)}),this.layer.changed()},1e3)}addLabel(t,i,r){const[s,o]=[200,100],[a,c]=[t.canvas.width,t.canvas.height],l=f=>a-r*s+f*r,u=f=>c-r*o+f*r;this.addCTXrect(t,r,[l(0),u(0),r*(s-1),r*(o-1)]),this.texts.forEach(f=>{this.addCTXtext(t,[l(f.offset[0]),u(f.offset[1])],f.text,f.size*r)})}addCTXtext(t,i,r,s=16){t.font=`${s}pt Roboto`,t.fillStyle=this.colorService.rgb(vl.color100),t.fillText(r,i[0],i[1])}addCTXrect(t,i,r){t.restore(),t.beginPath(),t.rect(r[0],r[1],r[2],r[3]),t.strokeStyle=this.colorService.rgb(vl.color80),t.lineWidth=2*i,t.stroke(),t.fillStyle=this.colorService.rgb(vl.color0),t.fill()}addLayer(){this.map.addLayer(this.layer),this.geometry.setCoordinates(this.extentCorrected()),this.zoomToPrint(),this.translate=new Q5e({layers:[this.layer]}),this.map.addInteraction(this.translate),this.subscriptions.push(xa(this.map,"pointermove").subscribe(t=>{let i=!1;this.map.forEachFeatureAtPixel(t.pixel,r=>{r===this.feature&&(i=!0)}),i!==this.highlight&&(this.highlight=i,this.layer.changed(),this.map.getViewport().style.cursor=this.highlight?"grab":"")}),xa(this.map,"moveend").subscribe(t=>{this.geometry.setCoordinates(this.extentCorrected())}),xa(this.translate,"translateend").subscribe(t=>{const i=this.feature.getGeometry().getExtent();this.center=[(i[0]+i[2])/2,(i[1]+i[3])/2],this.map.getView().setCenter(this.center)}))}zoomToPrint(t=!0){const i=this.getPaperPolygon(),r=t?this.padding:0,s=[i[1],i[3]].flatMap(o=>o);this.map.getView().fit(s,{size:this.map.getSize(),padding:[r,r,r,r]})}getPaperPolygon(){const i=this.map.getView().getProjection().getMetersPerUnit(),r=this.scale/i,s=this.paperSize.map(c=>c/1e3),o=[this.center[0]-r*s[0]/2,this.center[1]+r*s[1]/2],a=[this.center[0]+r*s[0]/2,this.center[1]-r*s[1]/2];return[[o[0],o[1]],[o[0],a[1]],[a[0],a[1]],[a[0],o[1]],[o[0],o[1]]]}extentCorrected(){const i=this.map.getView().calculateExtent();let r=i.slice(0,2);r=[r[0]-1e3,r[1]-4e3];let s=i.slice(2,4);return s=[s[0]+1e3,s[1]+4e3],[[[r[0],r[1]],[s[0],r[1]],[s[0],s[1]],[r[0],s[1]],[r[0],r[1]]],this.getPaperPolygon().reverse()]}}return n.\u0275fac=function(t){return new(t||n)(Xe(Ev))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),POt=(()=>{class n{constructor(t,i,r){this.olLayerService=t,this.houseService=i,this.turfService=r,this.source=new ol,this.onDraw$=new $e,this.subscriptions=[],this.active=!1,this.lines=[]}init(t,i){this.houseFeature=i,this.map=t,this.vectorLayer=this.olLayerService.getLayer(P1.distanceLines),this.source=this.vectorLayer.getSource(),this.initLines(),this.subscriptions.push(this.houseService.house$.subscribe(()=>{this.updateLines()}))}onDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}updateLines(){this.lines.forEach(t=>{void 0===t.geometry&&(t.geometry=new zu([]),t.feature=new il({geometry:t.geometry}),this.source.addFeature(t.feature)),t.geometry.setCoordinates(t.coords(t)),t.feature.setProperties({text:t.text,dist:t.dist})})}initLines(){kx([xa(this.olLayerService.getLayer(P1.parcelBorders),"postrender"),xa(this.olLayerService.getLayer(P1.building),"postrender")]).pipe(A0()).subscribe(()=>{this.initLinesAfterLoad()})}initLinesAfterLoad(){this.lines=[];const t=this.olLayerService.getLayer(P1.parcelBorders),r=o=>t.getSource().getClosestFeatureToCoordinate(o),s=this.olLayerService.getLayer(P1.building).getSource().getFeaturesInExtent([1519739,754186,1520339.2736772515,7542519.297257925]);this.lines.push({text:"1",coords:o=>{const{dist:a,housePoint:c,linePoint:l}=this.turfService.closestPointBetweenLineAndPolygon(o.toGeometry,this.houseFeature.get("footPrint"));return o.dist=a,[c,l]},dist:0,toGeometry:r([1520072.51521608,7541883.7994233975]).getGeometry()},{text:"2",coords:o=>{const{dist:a,housePoint:c,linePoint:l}=this.turfService.closestPointBetweenLineAndPolygon(o.toGeometry,this.houseFeature.get("footPrint"));return o.dist=a,[c,l]},dist:0,toGeometry:r([1519938.113848764,7542367.323555815]).getGeometry()},{text:"3",coords:o=>{const{dist:a,housePoint:c,linePoint:l}=this.turfService.closestPointBetweenPointsAndPolygon(o.toGeometry,this.houseFeature.get("footPrint"));return o.dist=a,[c,l]},dist:0,toGeometry:s.flatMap(o=>o.getGeometry().getCoordinates()[0].map(a=>new p3(a)))}),this.updateLines()}}return n.\u0275fac=function(t){return new(t||n)(Xe(iD),Xe(No),Xe(pT))},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HOt=(()=>{class n{constructor(){this.subscriptions=[]}onDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}init(t,i){this.map=t,this.overlay=i,this.subscriptions.push(xa(this.map.getViewport(),"contextmenu").subscribe(r=>{this.openOverlay(r),r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation()}))}openOverlay(t){const i=this.map.getEventCoordinate(t);this.overlay.setPopup(i),this.subscriptions.push(xa(this.map.getViewport(),"pointerdrag").subscribe(r=>{console.log("pointerdrag",r)}))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Rt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const OOt=class zOt extends Ih{constructor(e){super(),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){R8e(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(_L(this.element),na(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Ks(e,"postrender",this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set("element",e)}setMap(e){this.set("map",e)}setOffset(e){this.set("offset",e)}setPosition(e){this.set("position",e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get("position"))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),s=this.getRect(r,[fIt(r),dIt(r)]),o=void 0===(e=e||{}).margin?20:e.margin;if(!td(i,s)){const a=s[0]-i[0],c=i[2]-s[2],l=s[1]-i[1],u=i[3]-s[3],f=[0,0];if(a<0?f[0]=a-o:c<0&&(f[0]=Math.abs(c)+o),l<0?f[1]=l-o:u<0&&(f[1]=Math.abs(u)+o),0!==f[0]||0!==f[1]){const p=t.getView().getCenterInternal(),g=t.getPixelFromCoordinateInternal(p);if(!g)return;const v=[g[0]+f[0],g[1]+f[1]],_=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(v),duration:_.duration,easing:_.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+t[0],s+t[1]]}setPositioning(e){this.set("positioning",e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);let c="0%",l="0%";"bottom-right"==s||"center-right"==s||"top-right"==s?c="-100%":("bottom-center"==s||"center-center"==s||"top-center"==s)&&(c="-50%"),"bottom-left"==s||"bottom-center"==s||"bottom-right"==s?l="-100%":("center-left"==s||"center-center"==s||"center-right"==s)&&(l="-50%");const u=`translate(${c}, ${l}) translate(${Math.round(e[0]+r[0])+"px"}, ${Math.round(e[1]+r[1])+"px"})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}},NOt=["popup"],VOt=["content"],UOt=["closer"];function GOt(n,e){if(1&n&&(B(0,"span"),H(1),z()),2&n){const t=e.ngIf;K(1),Nn(" ",t," ")}}function QOt(n,e){if(1&n&&(B(0,"span"),H(1),z()),2&n){const t=e.ngIf;K(1),Nn(" ",t," ")}}function WOt(n,e){if(1&n){const t=no();B(0,"button",9),Kt("click",function(){zn(t);const r=Ft();return r.print(),h(r.close())}),B(1,"mat-icon",10),H(2),zi(3,"async"),z(),B(4,"span"),H(5),zi(6,"async"),z()()}if(2&n){const t=Ft();K(2),Zl(Er(3,2,t.olPrintService.active$)?"print_disabled":"print"),K(3),Nn("",Er(6,4,t.olPrintService.active$)?"Stop print":"Start Print"," ")}}function jOt(n,e){if(1&n){const t=no();Ls(0),B(1,"button",9),Kt("click",function(){zn(t);const r=Ft();return r.olPrintService.print(),h(r.close())}),B(2,"mat-icon",10),H(3,"print"),z(),B(4,"span"),H(5,"Get PDF"),z()(),Ds()}}function $Ot(n,e){if(1&n){const t=no();B(0,"button",9),Kt("click",function(){zn(t);const r=Ft();return r.olMeasureService.activate(),h(r.close())}),B(1,"mat-icon",10),H(2,"square_foot"),z(),B(3,"span"),H(4),z()()}if(2&n){const t=Ft();K(4),Nn("",t.olMeasureService.active?"Stop":"Start"," measuring")}}function KOt(n,e){if(1&n){const t=no();Ls(0),B(1,"button",9),Kt("click",function(){zn(t);const r=Ft();return r.olMeasureService.nextType(),h(r.close())}),B(2,"mat-icon",10),H(3,"square_foot"),z(),B(4,"span"),H(5),z()(),B(6,"button",9),Kt("click",function(){zn(t);const r=Ft();return r.olMeasureService.activate(!1),h(r.close())}),B(7,"mat-icon",10),H(8,"square_foot"),z(),B(9,"span"),H(10,"Clear"),z()(),Ds()}if(2&n){const t=Ft();K(5),Nn("Change to ",t.olMeasureService.drawType===t.MeasuringDrawType.Area?" length":"area","")}}let qOt=(()=>{class n{constructor(t,i,r,s,o){this.houseService=t,this.changeDetectorRef=i,this.mapService=r,this.olMeasureService=s,this.olPrintService=o,this.row1$=new Vs(void 0),this.row2$=new Vs(void 0),this.row3$=new Vs(void 0),this.enabled=!0,this.special$=this.olMeasureService.active||this.olPrintService.active$.value,this.MeasuringDrawType=Xu,this.basic=!0,this.focusPrint=!1,this.focusMeasure=!1}ngAfterViewInit(){this.overlay=new OOt({element:this.container.nativeElement,positioning:"top-left",autoPan:{animation:{duration:250}}})}setPopup(t){this.overlay.setPosition(t),this.mapService.identify(t).forEach((i,r)=>{i.pipe(vc(1)).subscribe(s=>{0===r&&this.row1$.next(s),1===r&&this.row2$.next(s),2===r&&this.row3$.next(s),this.changeDetectorRef.detectChanges()})})}close(){return this.row1$.next(void 0),this.row2$.next(void 0),this.row3$.next(void 0),this.overlay.setPosition(void 0),this.closer.nativeElement.blur(),!1}print(){this.olPrintService.active$.value?(this.olPrintService.onDestroy(),this.basic=!0,this.focusPrint=!1):(this.focusPrint=!0,this.basic=!1,this.olPrintService.startPrint({center:xm(this.houseService.house$.value.getLonLat())}))}}return n.\u0275fac=function(t){return new(t||n)(U(No),U(mc),U(JG),U(zL),U(Z5e))},n.\u0275cmp=Sn({type:n,selectors:[["app-map-overlay"]],viewQuery:function(t,i){if(1&t&&(_o(NOt,7),_o(VOt,7),_o(UOt,7)),2&t){let r;Gi(r=Qi())&&(i.container=r.first),Gi(r=Qi())&&(i.content=r.first),Gi(r=Qi())&&(i.closer=r.first)}},decls:17,vars:12,consts:[["id","popup",1,"ol-popup"],["popup",""],[1,"extra-info"],[4,"ngIf"],["href","#","id","popup-closer",1,"ol-popup-closer",3,"click"],["closer",""],["id","popup-content"],["content",""],["mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",3,"click"],[2,"font-family","Material Icons Outlined"]],template:function(t,i){1&t&&(B(0,"div",0,1)(2,"div",2),Dt(3,GOt,2,1,"span",3),zi(4,"async"),Dt(5,QOt,2,1,"span",3),zi(6,"async"),z(),B(7,"a",4,5),Kt("click",function(){return i.close()}),z(),B(9,"div",6,7)(11,"mat-action-list"),Dt(12,WOt,7,6,"button",8),Dt(13,jOt,6,0,"ng-container",3),zi(14,"async"),Dt(15,$Ot,5,1,"button",8),Dt(16,KOt,11,1,"ng-container",3),z()()()),2&t&&(K(3),ge("ngIf",Er(4,6,i.row1$)),K(2),ge("ngIf",Er(6,8,i.row2$)),K(7),ge("ngIf",i.basic||i.focusPrint),K(1),ge("ngIf",i.focusPrint||Er(14,10,i.olPrintService.active$)),K(2),ge("ngIf",i.basic||i.focusMeasure),K(1),ge("ngIf",i.focusMeasure||i.olMeasureService.active))},dependencies:[D2,v7,Eee,Dee,g0],styles:['@charset "UTF-8";.ol-popup[_ngcontent-%COMP%]{background-color:var(--color-0);box-shadow:0 1px 4px #0003;border-radius:4px;padding:12px 0}.ol-popup[_ngcontent-%COMP%]   .ol-popup-closer[_ngcontent-%COMP%]{text-decoration:none;position:absolute;top:0;right:0;padding:4px 12px}.ol-popup[_ngcontent-%COMP%]   .ol-popup-closer[_ngcontent-%COMP%]:after{content:"\\2716"}.ol-popup[_ngcontent-%COMP%]   .ol-popup-closer[_ngcontent-%COMP%]:hover{background-color:var(--color-10)}.extra-info[_ngcontent-%COMP%]{padding:4px 8px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:24px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content{font-size:.9em;padding:0 8px;gap:8px mat-icon;gap-color:var(--color-50)}']}),n})();const XOt=["mapEl"],YOt=["overlay"];let ZOt=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,f,p,g,v,_,w,b){this.zone=t,this.houseService=i,this.olBaseMapService=r,this.olMeasureService=s,this.olViewService=o,this.olLayerService=a,this.colorService=c,this.turfService=l,this.appService=u,this.httpClient=f,this.olPrintService=p,this.olDistanceService=g,this.olContextService=v,this.mapService=_,this.dataOLLayerService=w,this.dataOLStyleService=b,this.house=this.houseService.house$.value,this.subscriptions=[],this.houseFeature=new il({roofCenterShow:!1,roofLines:void 0,rotation:0,center:0}),this.garageFeature=new il({roofCenterShow:!1,rotation:0,center:0}),this.identifyActive=!0}ngOnDestroy(){[this.olViewService,this.olContextService,this.olLayerService].forEach(t=>t.onDestroy()),this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.appService.scroll$.next({...this.appService.scroll$.value,graphic:yo.map});const t=this.houseService.house$.value,{lat:i,lng:r,rotation:s}=t.orientation,o=this.houseService.house$.value.garage;let{lat:a,lng:c,rotation:l}=o.orientation;this.houseFeature.setId("house"),this.houseFeature.setProperties({center:xm([r,i]),rotation:s}),console.log(t),this.garageFeature.setId("garage"),this.garageFeature.setProperties({center:xm([c,a]),rotation:l}),this.layers=[...this.olBaseMapService.initBaseLayers(),...this.olLayerService.initLayers(this.houseFeature,this.garageFeature)],this.zone.runOutsideAngular(()=>this.initMap())}initMap(){this.olViewService.init(this.houseFeature.getProperties().center,15),this.map=new mOt({view:this.olViewService.view,layers:this.layers,target:this.mapEl.nativeElement,overlays:[this.overlay.overlay],pixelRatio:3.125}),window.map=this.map,this.setCore(),this.olContextService.init(this.map,this.overlay),this.olPrintService.init(this.map),this.addInteractions(),this.olMeasureService.init(this.map),this.olBaseMapService.map=this.map,[this.houseFeature,this.garageFeature].forEach(r=>r.setStyle((s,o)=>this.dataOLStyleService.styleHouse(s,o,!1)))}setCore(){[this.houseFeature,this.garageFeature].forEach(t=>{const i=new zu([t.getProperties().center,po(t.getProperties().rotation,10,t.getProperties().center)]);t.setGeometry(i)})}drawGarage(t=!0){const{polygon:i}=this.houseService.getGaragePolygon();this.garageFeature.setProperties({roofCenter:new p3(this.garageFeature.getProperties().center),footPrint:i},t)}drawHouse(t=!0){const{polygon:i,roofLines:r}=this.houseService.getFootPrintPolygon();this.houseFeature.setProperties({roofCenter:new p3(this.houseFeature.getProperties().center),roofLines:r,footPrint:i},t),this.mapService.getElevationPoints()}updateHouse(){const[t,i]=aoe(this.houseFeature.getProperties().center),r=this.houseService.house$.value;r.orientation={rotation:this.houseFeature.getProperties().rotation,lat:i,lng:t};const[s,o]=aoe(this.garageFeature.getProperties().center);r.garage.orientation={rotation:this.garageFeature.getProperties().rotation,lat:o,lng:s},this.houseService.house$.next(r)}addInteractions(){const i=c=>{const l=c.getGeometry().getCoordinates(),u=cn(R1(l[1],l[0],1)+180,1);c.setProperties({rotation:u})},r=new Tpe({style:(c,l)=>this.dataOLStyleService.styleHouse(c,l,!0),layers:[this.olLayerService.getLayer(P1.House)]}),s=new Q5e({features:r.getFeatures()}),o=new ROt({features:r.getFeatures(),style:(c,l)=>this.dataOLStyleService.createRotateStyle(c,l)}),a=c=>{o.setAnchor(c.getProperties().center),o.setAngle(0*Math.PI/180),o.arrowFeature_.getGeometry().setCoordinates((c=>po(kse(o.getAngle())-90,-30,c.getProperties().center))(c))};this.map.addInteraction(r),this.subscriptions.push(...[this.houseFeature,this.garageFeature].map(c=>xa(c,"change").subscribe(l=>{this.updateHouse(),this.drawHouse(),this.drawGarage()})),xa(s,"translateend").subscribe(c=>{const l=r.getFeatures().item(0);l.setProperties({center:l.getGeometry().getCoordinates()[0]}),a(l),this.drawHouse(),this.drawGarage()}),xa(s,"translating").subscribe(c=>{const l=r.getFeatures().item(0);l.setProperties({center:l.getGeometry().getCoordinates()[0]}),a(l)}),xa(o,"rotatestart").subscribe(c=>{r.getFeatures().item(0).setProperties({roofCenterShow:!0})}),xa(o,"rotating").subscribe(c=>{const l=r.getFeatures().item(0);i(l)}),xa(o,"rotateend").subscribe(c=>{const l=r.getFeatures().item(0);l.setProperties({roofCenterShow:!1}),o.features_.pop(),o.features_.push(l),i(l),a(l),this.drawHouse(),this.drawGarage()}),xa(r,"select").subscribe(c=>{const l=c.selected[0];l?(this.overlay.enabled=!1,this.overlay.close(),this.map.addInteraction(o),this.map.addInteraction(s),i(l),a(l),o.arrowFeature_.setStyle((u,f)=>this.dataOLStyleService.createRotateStyle(u,f))):(this.overlay.enabled=!0,this.map.removeInteraction(o),this.map.removeInteraction(s)),l.changed()}))}}return n.\u0275fac=function(t){return new(t||n)(U(cr),U(No),U(lG),U(zL),U(d5e),U(iD),U(Ev),U(pT),U(io),U(dh),U(Z5e),U(POt),U(HOt),U(JG),U(H5e),U(ZG))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-map"]],viewQuery:function(t,i){if(1&t&&(_o(XOt,5),_o(YOt,5)),2&t){let r;Gi(r=Qi())&&(i.mapEl=r.first),Gi(r=Qi())&&(i.overlay=r.first)}},decls:5,vars:2,consts:[[1,"map"],["mapEl",""],["overlay",""],[1,"controls","controls-right",3,"floatLeft"]],template:function(t,i){1&t&&Ue(0,"div",0,1)(2,"app-map-overlay",null,2)(4,"controls",3),2&t&&(K(4),ge("@slideInOut",void 0)("floatLeft",!1))},dependencies:[N5e,qOt],styles:['[_ngcontent-%COMP%]:root, [_nghost-%COMP%]{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position[_ngcontent-%COMP%]{top:8px;right:8px;position:absolute}.ol-scale-line[_ngcontent-%COMP%]{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner[_ngcontent-%COMP%]{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar[_ngcontent-%COMP%]{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner[_ngcontent-%COMP%]{display:flex}.ol-scale-step-marker[_ngcontent-%COMP%]{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text[_ngcontent-%COMP%]{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text[_ngcontent-%COMP%]{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar[_ngcontent-%COMP%]{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even[_ngcontent-%COMP%]{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd[_ngcontent-%COMP%]{background-color:var(--ol-background-color)}.ol-unsupported[_ngcontent-%COMP%]{display:none}.ol-viewport[_ngcontent-%COMP%], .ol-unselectable[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{all:unset}.ol-selectable[_ngcontent-%COMP%]{-webkit-touch-callout:default;-webkit-user-select:text;user-select:text}.ol-grabbing[_ngcontent-%COMP%]{cursor:grabbing}.ol-grab[_ngcontent-%COMP%]{cursor:move;cursor:grab}.ol-control[_ngcontent-%COMP%]{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom[_ngcontent-%COMP%]{top:.5em;left:.5em}.ol-rotate[_ngcontent-%COMP%]{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden[_ngcontent-%COMP%]{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent[_ngcontent-%COMP%]{top:4.643em;left:.5em}.ol-full-screen[_ngcontent-%COMP%]{right:.5em;top:.5em}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:1.4em}.ol-compass[_ngcontent-%COMP%]{display:block;font-weight:400;will-change:transform}.ol-touch[_ngcontent-%COMP%]   .ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5em}.ol-touch[_ngcontent-%COMP%]   .ol-zoom-extent[_ngcontent-%COMP%]{top:5.5em}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom[_ngcontent-%COMP%]   .ol-zoom-in[_ngcontent-%COMP%]{border-radius:2px 2px 0 0}.ol-zoom[_ngcontent-%COMP%]   .ol-zoom-out[_ngcontent-%COMP%]{border-radius:0 0 2px 2px}.ol-attribution[_ngcontent-%COMP%]{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline;list-style:none}.ol-attribution[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{content:" "}.ol-attribution[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0}.ol-attribution.ol-collapsed[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}.ol-attribution[_ngcontent-%COMP%]:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.ol-zoomslider[_ngcontent-%COMP%]{top:4.5em;left:.5em;height:200px}.ol-zoomslider[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;height:10px}.ol-touch[_ngcontent-%COMP%]   .ol-zoomslider[_ngcontent-%COMP%]{top:5.5em}.ol-overviewmap[_ngcontent-%COMP%]{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible[_ngcontent-%COMP%]{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%], .ol-overviewmap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%]{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap[_ngcontent-%COMP%]:not(.ol-collapsed)   button[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%], .ol-overviewmap.ol-uncollapsible[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.ol-overviewmap[_ngcontent-%COMP%]:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box[_ngcontent-%COMP%]{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-box[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;overflow:visible}[_nghost-%COMP%]     .ol-attribution{display:none}.map[_ngcontent-%COMP%]{height:100%;width:100%}'],data:{animation:[xS,gH]},changeDetection:0}),n})(),JOt=(()=>{class n{constructor(t,i){this.houseService=t,this.appService=i,this.Tag=l2,this.Section=Ct,this.SensorType=Ye}ngAfterViewInit(){this.appService.hardSetStates({[Z2.theoreticalWalls]:!1})}getGroups(t){return[...new Set(Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof Gt).filter(r=>r.sensorType===t).map(r=>r.group))].filter(r=>r).sort((r,s)=>r-s).join(", ")}getOutlets(t){return Object.values(this.houseService.house$.value.partsFlatten).filter(r=>r instanceof Gt).filter(r=>r.sensorType===t).map(r=>r.amount).reduce((r,s)=>r+s,0)}getCable(t,i=1){return cn(Object.values(this.houseService.house$.value.partsFlatten).filter(s=>s instanceof Gt).filter(s=>s.sensorType===t).map(s=>s.cableLength).reduce((s,o)=>s+o,0),i)}}return n.\u0275fac=function(t){return new(t||n)(U(No),U(io))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-wired"]],decls:214,vars:112,consts:[[3,"id"],[3,"url"],[1,"technical"],["href","https://community.home-assistant.io/t/circadian-lighting-custom-component/61246"],["identifier","PassiveOpen-Wired"]],template:function(t,i){1&t&&(B(0,"section",0)(1,"h1"),H(2,"Smart home"),z(),B(3,"p"),H(4," In addition to being a regular home, this house is also a smart home that employs a lot of domotics. This involves the use of many sensors and lights that can be controlled remotely. Wired -cloudless- connections are typically more reliable and affordable than wireless options such as Wi-Fi, which means that the setup may differ from what you're familiar with. "),z()(),B(5,"section",0)(6,"h2"),H(7," Electricity "),z(),B(8,"h3"),Ue(9,"app-svg",1),B(10,"span"),H(11,"Normal - 230v"),z()(),B(12,"p"),H(13," In Europe (230v), sockets usually share a breaker or a group that is rated at either 16 or 10 amperes. The rating depends on the load and wire thickness, which is 2.5mm2 and 1.5mm2, respectively. "),z(),B(14,"label",2)(15,"span"),H(16,"Technical "),z(),H(17),Ue(18,"br"),H(19),Ue(20,"br"),H(21),Ue(22,"br"),z(),B(23,"h3"),Ue(24,"app-svg",1),B(25,"span"),H(26,"3Phase - 400v"),z()(),B(27,"p"),H(28," The unusual symbol you're seeing is a "),B(29,"tag"),H(30,"perilex"),z(),H(31," plug, which typically contains three phases, though some models may only have two. The main objective of this plug is to distribute the load over three wires, rather than one, which requires the use of more wires. This type of plug is commonly used for high-power appliances such as induction cookers in the kitchen. Electric cars do not utilize this plug, but they do require three-phase power in most cases. "),z(),B(32,"label",2)(33,"span"),H(34,"Technical "),z(),H(35),Ue(36,"br"),H(37),Ue(38,"br"),H(39),Ue(40,"br"),z()(),B(41,"section",0)(42,"h2"),H(43," lightning "),z(),B(44,"h3"),Ue(45,"app-svg",1),B(46,"span"),H(47,"Lamps"),z()(),B(48,"p"),H(49," Lamp outlets are available in both 230V and 24V variants. Typically, most lamps can be dimmed, and their wiring runs back to the server room. They are controlled by a "),B(50,"tag"),H(51,"hub"),z(),H(52," that is connected to the home automation system. "),z(),B(53,"h3"),Ue(54,"app-svg",1),B(55,"span"),H(56,"Double switch "),z()(),B(57,"p"),H(58," The double pulse switches have six different options available. You can program actions for two single presses, two double presses, and two long presses. The switches operate at 24V, and their wiring runs back to the "),B(59,"tag"),H(60,"hub"),z(),H(61," . "),z(),B(62,"h3"),Ue(63,"app-svg",1),B(64,"span"),H(65,"Dimmer"),z()(),B(66,"p"),H(67," The dimmer switch enables you to adjust the brightness of the room's lighting. However, the smart-home system should automatically select the appropriate dimming level based on the time of day, see "),B(68,"a",3),H(69,"circadian lightning."),z(),H(70,". You can override this automation by using the dimmer switch. "),z(),B(71,"h3"),Ue(72,"app-svg",1),B(73,"span"),H(74,"DLC, or light-socket"),z()(),B(75,"p"),H(76," To outsiders, it may seem strange, but each fixed light in the house has its own separate mini-socket. In Sweden, an old standard was in use, but since 2019, they have followed the EU standard of DLC. "),z()(),B(77,"section",0)(78,"h2"),H(79," Network / Ethernet "),z(),B(80,"h3"),Ue(81,"app-svg",1),B(82,"span"),H(83,"Ethernet (rj45)"),z()(),B(84,"p"),H(85," Reliable internet is essential when working from home, and the best option is to have a wall outlet for a regular internet cable. These outlets are not limited to computers and can be used for other devices like speakers, televisions, and more. "),z(),B(86,"label",2)(87,"span"),H(88,"Technical "),z(),H(89),Ue(90,"br"),H(91),Ue(92,"br"),z(),B(93,"h3"),Ue(94,"app-svg",1),B(95,"span"),H(96,"Power-over-Ethernet "),z()(),B(97,"p"),H(98,"With a voltage of 48 volts, internet cables can be used to power certain devices without requiring additional wiring. This capability makes them a convenient option for devices like ring doorbells, security cameras, and Wi-Fi access points. "),z(),B(99,"h3"),Ue(100,"app-svg",1),B(101,"span"),H(102,"Wifi"),z()(),B(103,"p"),H(104,"Needs no introduction. Know that you can have more complex wifi solutions than your internet provider can provide. "),z(),B(105,"label",2)(106,"span"),H(107,"Technical "),z(),H(108),Ue(109,"br"),z()(),B(110,"section",0)(111,"h2"),H(112," Safety "),z(),B(113,"h3"),Ue(114,"app-svg",1),B(115,"span"),H(116,"Smoke/heat detectors"),z()(),B(117,"p"),H(118,"For safety purposes, it is advisable to install several smoke sensors throughout the house, along with a heat sensor specifically in the kitchen. "),z(),B(119,"label",2)(120,"span"),H(121,"Technical "),z(),H(122),Ue(123,"br"),H(124),Ue(125,"br"),z(),B(126,"h3"),Ue(127,"app-svg",1),B(128,"span"),H(129,"Camera's"),z()(),B(130,"p"),H(131," While not necessary, installing a security monitoring system in your home can offer added convenience and security. With your own VPN, you can remotely monitor your house from anywhere. "),z(),B(132,"label",2)(133,"span"),H(134,"Technical "),z(),H(135),Ue(136,"br"),z(),B(137,"h3"),Ue(138,"app-svg",1)(139,"app-svg",1),B(140,"span"),H(141,"Window/Door sensors/Motion detection"),z()(),B(142,"p"),H(143," The alarm function is expanded and fortified with window/door sensors and motion detection to provide added security. "),z()(),B(144,"section",0)(145,"h2"),H(146," Other smarts "),z(),B(147,"h3"),Ue(148,"app-svg",1),B(149,"span"),H(150,"Sun blinds / screens"),z()(),B(151,"p"),H(152," To protect against high sun radiation in summer, a passive house must be equipped with sun blinds/screens. The screens can be passive or automatically controlled by the smart-home system. External screens are more effective than internal screens. "),z(),B(153,"h3"),Ue(154,"app-svg",1),B(155,"span"),H(156,"Motion sensors"),z()(),B(157,"p"),H(158," Motion sensors can be a fun addition to your smart-home setup, allowing for automated control of lights turning on and off. They can also enhance home security by supporting the alarm system. "),z(),B(159,"h3"),Ue(160,"app-svg",1),B(161,"span"),H(162,"Temperature"),z()(),B(163,"p"),H(164,"Temperature sensors play a important role in regulating the heating, cooling, and ventilation in specific areas of the house. "),z()(),B(165,"section",0)(166,"h2"),H(167," Ventilation "),z(),B(168,"h3"),Ue(169,"app-svg",1),B(170,"span"),H(171,"Ventilation in"),z()(),B(172,"p"),H(173," Due to the airtightness of the house, fresh air is necessary in the bedrooms and main living rooms to ensure proper ventilation. The airflow will then circulate to other areas of the house. "),z(),B(174,"h3"),Ue(175,"app-svg",1),B(176,"span"),H(177,"Ventilation out"),z()(),B(178,"p"),H(179,' Air exhausts are installed in the bathroom, kitchen, and toilets to remove moisture and unpleasant smells, as they are the rooms with "dirty" air. '),z()(),B(180,"section",0)(181,"h2"),H(182," Water "),z(),B(183,"h3"),Ue(184,"app-svg",1),B(185,"span"),H(186,"Rainwater non-drinkable & cold"),z()(),B(187,"p"),H(188," This water has low calcium levels, making it ideal for watering plants and gardens. It can also be used for flushing toilets and washing machines, reducing the amount of soap required. While it doesn't need to be drinkable, it's still a valuable resource that shouldn't be wasted. "),z(),B(189,"h3"),Ue(190,"app-svg",1),B(191,"span"),H(192,"Water, Drinkable Both warm and cold"),z()(),B(193,"p"),H(194," Used for daily water use. "),z(),B(195,"h3"),Ue(196,"app-svg",1),B(197,"span"),H(198,"Shower, Drinkable Both warm and cold"),z()(),B(199,"p"),H(200," The mixing of warm-drink water and cold rainwater is not permitted when using water from a supply company, due to the high risk of flow back. However, the use of rainwater has benefits such as reducing the amount of water used, requiring less soap, and resulting in softer hair. "),z(),B(201,"h3"),Ue(202,"app-svg",1),B(203,"span"),H(204,"Drainage"),z()(),B(205,"p"),H(206," Every water tap has of course a drain. But sometimes they come separate , like in the laundry room. "),z(),B(207,"h3"),Ue(208,"app-svg",1),B(209,"span"),H(210,"Toilets"),z()(),B(211,"p"),H(212," You know what they do. Should be flushed with (filtered, non-stinky) rainwater. "),z()(),Ue(213,"disqus",4)),2&t&&(ge("id",i.Section.wiredWelcome),K(5),ge("id",i.Section.wiredPower),K(4),ka("sensor-",i.SensorType.socket,""),Ur("url","assets/svg/",i.SensorType.socket,".svg"),K(8),Nn(" Amount: ",i.getOutlets(i.SensorType.socket)," sockets"),K(2),Nn(" Group numbers: [ ",i.getGroups(i.SensorType.socket)," ]"),K(2),Nn(" Total cable length: ",i.getCable(i.SensorType.socket),"m"),K(3),ka("sensor-",i.SensorType.perilex,""),Ur("url","assets/svg/",i.SensorType.perilex,".svg"),K(11),Nn(" Amount: ",i.getOutlets(i.SensorType.perilex)," socket"),K(2),Nn(" Total cable length: ",i.getCable(i.SensorType.perilex),"m"),K(2),Nn(" Group numbers: [ ",i.getGroups(i.SensorType.perilex)," ]"),K(2),ge("id",i.Section.wiredLight),K(4),ka("sensor-",i.SensorType.lightBulb,""),Ur("url","assets/svg/",i.SensorType.lightBulb,".svg"),K(9),ka("sensor-",i.SensorType.lightSwitch,""),Ur("url","assets/svg/",i.SensorType.lightSwitch,".svg"),K(9),ka("sensor-",i.SensorType.dimmer,""),Ur("url","assets/svg/",i.SensorType.dimmer,".svg"),K(9),ka("sensor-",i.SensorType.dlc,""),Ur("url","assets/svg/",i.SensorType.dlc,".svg"),K(5),ge("id",i.Section.wiredEthernet),K(4),ka("sensor-",i.SensorType.ethernet,""),Ur("url","assets/svg/",i.SensorType.ethernet,".svg"),K(8),Nn(" Amount: ",i.getOutlets(i.SensorType.ethernet),""),K(2),Nn(" Total cable length: ",i.getCable(i.SensorType.ethernet,0),"m"),K(3),ka("sensor-",i.SensorType.poe,""),Ur("url","assets/svg/",i.SensorType.poe,".svg"),K(6),ka("sensor-",i.SensorType.wifi,""),Ur("url","assets/svg/",i.SensorType.wifi,".svg"),K(8),Nn(" Amount: ",i.getOutlets(i.SensorType.wifi)," Access points"),K(2),ge("id",i.Section.wiredSafety),K(4),ka("sensor-",i.SensorType.smoke,""),Ur("url","assets/svg/",i.SensorType.smoke,".svg"),K(8),Nn(" Amount: ",i.getOutlets(i.SensorType.smoke),""),K(2),Nn(" Total cable length: ",i.getCable(i.SensorType.smoke,0),"m"),K(3),ka("sensor-",i.SensorType.camera,""),Ur("url","assets/svg/",i.SensorType.camera,".svg"),K(8),Nn(" Amount: ",i.getOutlets(i.SensorType.camera)," PoE"),K(3),ka("sensor-",i.SensorType.pir,""),Ur("url","assets/svg/",i.SensorType.pir,".svg"),K(1),ka("sensor-",i.SensorType.alarm,""),Ur("url","assets/svg/",i.SensorType.alarm,".svg"),K(5),ge("id",i.Section.wiredExtra),K(4),ka("sensor-",i.SensorType.blinds,""),Ur("url","assets/svg/",i.SensorType.blinds,".svg"),K(6),ka("sensor-",i.SensorType.pir,""),Ur("url","assets/svg/",i.SensorType.pir,".svg"),K(6),ka("sensor-",i.SensorType.temperature,""),Ur("url","assets/svg/",i.SensorType.temperature,".svg"),K(5),ge("id",i.Section.wiredVent),K(4),ka("sensor-",i.SensorType.ventIn,""),Ur("url","assets/svg/",i.SensorType.ventIn,".svg"),K(6),ka("sensor-",i.SensorType.ventOut,""),Ur("url","assets/svg/",i.SensorType.ventOut,".svg"),K(5),ge("id",i.Section.wiredWater),K(4),ka("sensor-",i.SensorType.waterRain,""),Ur("url","assets/svg/",i.SensorType.waterRain,".svg"),K(6),ka("sensor-",i.SensorType.waterWarm,""),Ur("url","assets/svg/",i.SensorType.waterWarm,".svg"),K(6),ka("sensor-",i.SensorType.shower,""),Ur("url","assets/svg/",i.SensorType.shower,".svg"),K(6),ka("sensor-",i.SensorType.drain,""),Ur("url","assets/svg/",i.SensorType.drain,".svg"),K(6),ka("sensor-",i.SensorType.toilet,""),Ur("url","assets/svg/",i.SensorType.toilet,".svg"))},dependencies:[Yv,z5e,Tw],styles:["h3[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]   app-svg[_ngcontent-%COMP%]{margin-right:6px}"]}),n})();const eNt=["tableRows"];function tNt(n,e){if(1&n&&(B(0,"th",7),H(1),z()),2&n){const t=Ft().$implicit;K(1),Nn(" ",t.name," ")}}function nNt(n,e){if(1&n&&Ue(0,"span",9),2&n){const t=Ft().$implicit,i=Ft().$implicit;ge("innerHTML",i.def(t[i.id],t.unit),k3)}}function iNt(n,e){if(1&n&&(B(0,"td",8),Ue(1,"span",9),Dt(2,nNt,1,1,"span",10),Ue(3,"span",9),z()),2&n){const t=e.$implicit,i=Ft().$implicit;K(1),ge("innerHTML",i.prefix,k3),K(1),ge("ngIf",t[i.id]),K(1),ge("innerHTML",i.postfix,k3)}}function rNt(n,e){1&n&&(Ls(0,4),Dt(1,tNt,2,1,"th",5),Dt(2,iNt,4,3,"td",6),Ds()),2&n&&ge("matColumnDef",e.$implicit.id)}function sNt(n,e){1&n&&Ue(0,"tr",11)}function oNt(n,e){if(1&n){const t=no();Ls(0),B(1,"tr",12,13),Kt("click",function(){const s=zn(t).$implicit;return h(Ft().rowClick(s))}),z(),Ds()}if(2&n){const t=e.$implicit;K(1),Qb("group-",t.uuid," row-",t.type,""),$r("row-folded",t.uuid)}}let aNt=(()=>{class n{constructor(t){this.houseService=t,this.columns=[{id:"folded",name:"",def:i=>`${i}`},{id:mm.name,name:"Name",def:i=>`${i}`},{id:"calcAmount",name:"#",def:(i,r="x")=>`${i}${r}`},{id:"price",name:"Piece price",def:i=>`${this.readableNumbers(Number(i))}`},{id:"calcPrice",name:"Sum price",def:i=>`${this.readableNumbers(Number(i),-2)}`},{id:mm.sizeOrVersion,name:"Size or Version",def:i=>`${i}`},{id:mm.remarks,name:"remarks",def:i=>`${i}`}],this.groupRow={},this.columnNames=this.columns.map(i=>i.id),this.parts=[]}set data(t){this.costTable=t;const i=t.costs.filter(r=>r);this.dataSource=[...i.flatMap(r=>r instanceof KS?[r,...r.costs]:r),new e$e({name:`Total ${t.alias.toLocaleLowerCase()}`,costs:i})]}readableNumbers(t,i){return void 0!==i?`\u20ac${cn(t,0).toLocaleString()}`:t>1e3?`\u20ac${cn(t).toLocaleString()}`:`\u20ac${t}`}rowClick(t){t instanceof KS&&(t.toggleFold(),this.rowContainers.forEach(i=>{const r=i.nativeElement.classList;r.contains(`group-${t.uuid}`)&&r.toggle("row-folded")}))}}return n.\u0275fac=function(t){return new(t||n)(U(No))},n.\u0275cmp=Sn({type:n,selectors:[["app-table"]],viewQuery:function(t,i){if(1&t&&_o(eNt,5,mn),2&t){let r;Gi(r=Qi())&&(i.rowContainers=r)}},inputs:{data:"data"},decls:4,vars:6,consts:[["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z0",3,"dataSource","id"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],["mat-header-row",""],["mat-row","",3,"click"],["tableRows",""]],template:function(t,i){1&t&&(B(0,"table",0),Dt(1,rNt,3,1,"ng-container",1),Dt(2,sNt,1,0,"tr",2),Dt(3,oNt,3,6,"ng-container",3),z()),2&t&&(Ur("id","table-",i.costTable.section,""),ge("dataSource",i.dataSource),K(1),ge("ngForOf",i.columns),K(1),ge("matHeaderRowDef",i.columnNames)("matHeaderRowDefSticky",!0),K(1),ge("matRowDefColumns",i.columnNames))},dependencies:[t3,D2,aM,jv,cM,$v,Wv,lM,Kv,qv,uM,hM],styles:["tr[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important}tr.row-group[_ngcontent-%COMP%]{background-color:var(--color-10)!important;cursor:pointer}tr[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}tr.row-folded[_ngcontent-%COMP%]:not(.row-group){height:0}tr.row-folded[_ngcontent-%COMP%]:not(.row-group)   td[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}[_nghost-%COMP%], table[_ngcontent-%COMP%]{width:100%}.mat-column-calcAmount[_ngcontent-%COMP%], .mat-column-price[_ngcontent-%COMP%], .mat-column-calcPrice[_ngcontent-%COMP%]{text-align:right;width:60px}.mat-column-calcPrice[_ngcontent-%COMP%]{padding-right:16px}.mat-column-sizeOrVersion[_ngcontent-%COMP%], .mat-column-other[_ngcontent-%COMP%]{min-width:60px}.mat-column-name[_ngcontent-%COMP%]{min-width:200px}"]}),n})();function cNt(n,e){1&n&&s2(0)}const lNt=function(n){return{$implicit:n}};function uNt(n,e){if(1&n&&(Ls(0),Dt(1,cNt,1,0,"ng-container",4),Ds()),2&n){const t=e.$implicit;Ft();const i=Si(8);K(1),ge("ngTemplateOutlet",i)("ngTemplateOutletContext",xu(2,lNt,t))}}function hNt(n,e){1&n&&(B(0,"span"),H(1," Nice to discover a lot of moldings: "),B(2,"a",8),H(3,"Wikipedia Moldings"),z()())}function fNt(n,e){if(1&n){const t=no();B(0,"section",5)(1,"h2",6),Kt("click",function(){const s=zn(t).$implicit;return h(s.sectionFold=!s.sectionFold)}),B(2,"mat-icon"),H(3),z(),H(4),z(),B(5,"div"),Dt(6,hNt,4,0,"span",7),Ue(7,"app-table",3),z()()}if(2&n){const t=e.$implicit,i=Ft();ge("id",t.section),K(3),Nn("",t.sectionFold?"expand_more":"expand_less"," "),K(1),Nn(" ",t.alias," "),K(1),$r("folded",t.sectionFold),K(1),ge("ngIf",t.section===i.Section.costsFinishes),K(1),ge("data",t)}}let dNt=(()=>{class n{constructor(t){this.houseService=t,this.Section=Ct,this.tables=[this.getPreps(),this.getConstruction(),this.getOpenings(),this.getElectra(),this.getFinish(),this.getWater(),this.getOutsideFinish()],this.hiddenTables=[this.getKitchen(),this.getBathroom()],this.totals=this.getTotals()}getFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:s}=this.houseService.getWallArea();return new k0({section:Ct.costsFinishes,alias:"Finishes",costs:[new Sa({amount:i,name:"Crown molding",price:3,unit:"m"}),new Sa({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(ga,[],a=>({name:"Door casing",price:60})),this.houseService.getT(Wa,[],a=>({name:"Window casing",price:60})),new Sa({amount:s,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getWater(){return this.houseService.getWallLength(),this.houseService.getWallArea(),new k0({section:Ct.costsWater,alias:"Water ",costs:[this.houseService.getT(bc,["sensorType"],a=>({name:"Cold water",price:20,unit:"m"}),a=>a.sensorType===Ye.waterCold,!1),this.houseService.getT(bc,["sensorType"],a=>({name:"Warm water",price:20,unit:"m"}),a=>a.sensorType===Ye.waterWarm,!1),this.houseService.getT(bc,["sensorType"],a=>({name:"Rain water",price:20,unit:"m"}),a=>a.sensorType===Ye.waterWarm,!1),this.houseService.getT(bc,["sensorType"],a=>({name:"Drains",price:20,unit:"m"}),a=>[Ye.drain,Ye.toilet].includes(a.sensorType),!1)]})}getOutsideFinish(){const{innerLength:i}=this.houseService.getWallLength(),{innerArea:s}=this.houseService.getWallArea();return new k0({section:Ct.costsOuterFinishes,alias:"Outer finishes",costs:[new Sa({amount:i,name:"Crown molding",price:3,unit:"m"}),new Sa({amount:i,name:"Baseboard",price:3,unit:"m"}),this.houseService.getT(ga,[],a=>({name:"Door casing",price:60})),this.houseService.getT(Wa,[],a=>({name:"Window casing",price:60})),new Sa({amount:s,name:"Drywall / Gips boards",price:10,unit:"m2"})]})}getElectra(){return new k0({section:Ct.costsElectra,alias:"Electra",costs:[new Sa({amount:this.houseService.getGroups(Ye.socket).length,name:"Circuit breaker",sizeOrVersion:"10A - 240v",price:10}),new Sa({amount:Math.ceil(this.houseService.getGroups(Ye.socket).length/4),name:"Circuit breaker Earth Group",sizeOrVersion:"240v",price:80}),this.houseService.getT(Gt,["sensorType"],i=>({name:"Electric power socket",sizeOrVersion:"230v",price:20}),i=>i.sensorType===Ye.socket),this.houseService.getT(Gt,["sensorType"],i=>({name:"Electric wires",sizeOrVersion:"2.5mm2 230v",price:2,unit:"m"}),i=>[Ye.socket].includes(i.sensorType),!1),this.houseService.getT(Gt,["sensorType"],i=>({name:"Perilex socket",price:60}),i=>i.sensorType===Ye.perilex),this.houseService.getT(Gt,["sensorType"],i=>({name:"Perilex wire",sizeOrVersion:"5 sub wires",price:2,unit:"m"}),i=>[Ye.perilex].includes(i.sensorType),!1),this.houseService.getT(d2,["sensorType"],i=>({name:"Light socket",price:20}),i=>!0),this.houseService.getT(Gt,["sensorType"],i=>({name:"Switch (light)",sizeOrVersion:"Double pulse",price:20}),i=>i.sensorType===Ye.lightSwitch),this.houseService.getT(Gt,["sensorType"],i=>({name:"Dimmer",price:20}),i=>i.sensorType===Ye.dimmer),this.houseService.getT(Gt,["sensorType"],i=>({name:"Wifi AP",price:100}),i=>i.sensorType===Ye.wifi),this.houseService.getT(Gt,[],i=>({name:"Ethernet cable",sizeOrVersion:"CAT6",price:.6,unit:"m"}),i=>[Ye.ethernet,Ye.poe].includes(i.sensorType),!1)]})}getPreps(){return new k0({section:Ct.costsPreparations,alias:"Preparations",costs:[new Sa({name:"F\xf6rhandsbesked",price:2e3}),new Sa({name:"Bygglov",price:3e3}),new Sa({name:"Dirt work",price:1e3}),new Sa({name:"Ground prep",price:9e3}),new Sa({name:"Constructions calculations",price:3e3}),new Sa({name:"PassivHaus Certification",price:3e3}),new Sa({name:"Utilities connections /fees",price:15e3}),new Sa({name:"Tool rental",price:3e3})]})}getConstruction(){return new k0({section:Ct.costsConstruction,alias:"Construction",costs:[new Sa({name:"foundation",price:9e3}),new Sa({name:"footer",price:9e3}),new Sa({name:"Concrete prefab floor",price:32e3}),new Sa({name:"Studs",price:1e4}),new Sa({name:"OSB",price:1e4})]})}getBathroom(){return new k0({section:Ct.costsConstruction,alias:"Bathroom",costs:[new Sa({name:"Complete kitchen",price:9e3})]})}getKitchen(){return new k0({section:Ct.costsConstruction,alias:"Kitchen",costs:[new Sa({name:"Complete kitchen",price:9e3})]})}getOpenings(){return new k0({section:Ct.costsOpenings,alias:"Openings",costs:[this.houseService.getT(ga,["outside"],i=>({name:"Door",sizeOrVersion:`230x${i.width}`,price:i.outside?600:200,unit:"#",other:i.outside?"Outer door":"Inner door"})),this.houseService.getT(Wa,["width","height","windowForm"],i=>({name:"Window",sizeOrVersion:`${1e3*i.height}mm x ${1e3*i.width}mm`,price:i.width*i.height*800,other:`${i.windowForm}`}),i=>![B0.windowWall].includes(i.windowForm)),this.houseService.getT(Wa,["width","height","windowForm"],i=>({name:"Window wall",sizeOrVersion:"Custom",price:6e4,other:"main window wall"}),i=>[B0.windowWall].includes(i.windowForm))]})}getTotals(){const t=[...this.tables,...this.hiddenTables].flatMap(i=>new Sa({price:Iu(i.costs.filter(r=>void 0!==r).map(r=>r.calcPrice)),name:i.alias}));return console.log(),new k0({section:Ct.costsTotals,alias:"Total",costs:[...t,new Sa({price:Iu(t.map(i=>i.price)),amount:.12,name:"Unexpected costs (12%)"})]})}}return n.\u0275fac=function(t){return new(t||n)(U(No))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-costs"]],decls:13,vars:3,consts:[[4,"ngFor","ngForOf"],["simple",""],[2,"margin-bottom","40px",3,"id"],[3,"data"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"id"],[3,"click"],[4,"ngIf"],["href","https://en.wikipedia.org/wiki/Molding_(decorative)"]],template:function(t,i){1&t&&(B(0,"h1"),H(1,"What does it costs"),z(),B(2,"p"),H(3," This is a overview of all the prices. Some are fixed but most are dynamic calculated of the other inputs on this website. All these prices are estimations based on on certain area, with a certain deal with a construction store.\n"),z(),B(4,"h3"),H(5," This page is still under construction. Not complete!!! Prices are not accurate\n"),z(),Dt(6,uNt,2,4,"ng-container",0),Dt(7,fNt,8,7,"ng-template",null,1,X2),B(9,"section",2)(10,"h1"),H(11,"Totals"),z(),Ue(12,"app-table",3),z()),2&t&&(K(6),ge("ngForOf",i.tables),K(3),ge("id",i.Section.costsTotals),K(3),ge("data",i.totals))},dependencies:[t3,D2,jR,v7,aNt],styles:["[_nghost-%COMP%]{max-width:900px;display:block;margin:0 auto;padding:0 32px}section[_ngcontent-%COMP%]{margin:0;padding:0 0 0 24px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;transition:.2s;display:flex;align-items:center;padding:6px;gap:16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{background:var(--color-10)}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-height:100vh;transition:.4s ease-in;overflow:hidden}section[_ngcontent-%COMP%] > div.folded[_ngcontent-%COMP%]{transition:.4s ease-out;max-height:0px}app-table[_ngcontent-%COMP%]{display:block}  td.mat-column-price span{opacity:0}  td.mat-column-calcPrice span{opacity:0}  #table-costs-totals .mat-column-sizeOrVersion,   #table-costs-totals .mat-column-other,   #table-costs-totals .mat-column-calcAmount,   #table-costs-totals .mat-column-price{color:transparent}"]}),n})(),pNt=(()=>{class n{constructor(t){this.appService=t,this.discord=this.appService.discord,this.github=this.appService.github,this.youtube=this.appService.youtube,this.patreon=this.appService.patreon,this.instagram=this.appService.instagram,this.faDiscord=gT,this.faGithub=WO,this.faYoutube=jO,this.faPatreon=GO,this.faInstagram=QO}}return n.\u0275fac=function(t){return new(t||n)(U(io))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-about"]],decls:111,vars:8,consts:[["src","/assets/svg/logo.svg",1,"po-logo"],["target","_blank",1,"larger-link",2,"background","#FF0000",3,"href"],[3,"icon"],["target","_blank",1,"larger-link",2,"background","rgb(240 0 117)",3,"href"],["src","/assets/img/plings.jpg",1,"plings-logo"],["target","_blank",1,"larger-link",2,"background","var(--primary-color)",3,"href"],["target","_blank",1,"larger-link",3,"href"],["rel","license","href","http://creativecommons.org/licenses/by-nc/4.0/"],["alt","Creative Commons Licence","src","https://i.creativecommons.org/l/by-nc/4.0/88x31.png",2,"border-width","0"],["target","_blank","href","https://GeoDev.nl",1,"larger-link"],["target","_blank","href","https://www.joostdevree.nl"],["target","_blank","href","https://berkela.home.xs4all.nl"],["target","_blank","href","https://gathering.tweakers.net/forum/list_messages/2147286"],["target","_blank","href","https://www.byggahus.se/"],["target","_blank","href","https://www.passivehouse.com"],["target","_blank","href","https://passiefbouwen.nl/"],["target","_blank","href","https://www.igpassivhus.se/"],["target","_blank","href","https://passipedia.org/"]],template:function(t,i){1&t&&(B(0,"main")(1,"h1"),H(2," About PassiveOpen "),Ue(3,"img",0),z(),B(4,"P"),H(5," The PassiveOpen initiative is dedicated to promoting the use of passive houses as a sustainable building solution. We are passionate about the potential of passive house design to transform the way we live and work, and we are eager to share our knowledge and experience with others who are interested in creating a more sustainable future. "),z(),B(6,"section")(7,"h2"),H(8," 2_Plings "),z(),B(9,"p"),H(10," This website is focused on a house that is being built by 2_plings, a couple living in Sweden who are constructing their home without a main contractor. They are doing most of the building work themselves. "),Ue(11,"br")(12,"br"),H(13," They share their story on "),B(14,"a",1),Ue(15,"fa-icon",2),H(16," Youtube "),z(),H(17," and "),B(18,"a",3),Ue(19,"fa-icon",2),H(20," Instagram "),z(),Ue(21,"img",4),z()(),B(22,"section")(23,"h2"),H(24," We have an online community. "),z(),B(25,"p"),H(26," Looking for a place to connect with like-minded people? Join our online community on "),B(27,"a",5),Ue(28,"fa-icon",2),H(29," Discord "),z(),H(30," and become part of the conversation! We know that Discord is just another tool, but it helps us stay connected and respond quickly to new ideas. All are welcome! "),z()(),B(31,"section")(32,"h2"),H(33," Open source "),z(),B(34,"p"),H(35," Our plan is to share every aspect of this project with you: the costs, calculations, plans, drawings, and even our thoughts. We want to help you build an optimized and charming home, whether you choose to do it yourself or with a contractor. "),Ue(36,"br"),H(37,"Best of all, we're offering it all for free (except the cost of materials nor contractor, of course). "),z(),Ue(38,"br")(39,"br"),B(40,"div"),H(41," Everything is free and open source. See "),B(42,"a",6),Ue(43,"fa-icon",2),H(44," GitHub "),z()(),H(45," This project has a Creative Commons license. You can read about it "),B(46,"a",7),H(47," here"),z(),H(48,", but has 2 main points: "),B(49,"ul")(50,"li"),H(51," Attribution: We would like to be credited somehow."),z(),B(52,"li"),H(53," NonCommercial: You cannot use this project for commercial purposes."),z()(),B(54,"a",7),Ue(55,"img",8),z(),Ue(56,"br"),H(57," We don't force you to 'share-alike' but we would appreciate it if you do. "),Ue(58,"br")(59,"br"),z(),B(60,"section")(61,"h2"),H(62," Ungoing credits: "),z(),B(63,"div")(64,"ul")(65,"li"),H(66," Build by "),B(67,"a",9),H(68,"GeoDev"),z()(),B(69,"li"),H(70," All the discord users of course "),z()(),H(71," Site and credits in Dutch: "),B(72,"ul")(73,"li")(74,"a",10),H(75,"https://www.joostdevree.nl"),z()(),B(76,"li")(77,"a",11),H(78,"https://berkela.home.xs4all.nl"),z()(),B(79,"li")(80,"a",12),H(81,"Tweakers forum"),z()()(),H(82," Site and credits in Swedish: "),B(83,"ul")(84,"li")(85,"a",13),H(86,"https://www.byggahus.se/"),z()()()()(),B(87,"section")(88,"h2"),H(89," Readings "),z(),B(90,"div")(91,"ul")(92,"li")(93,"a",14),H(94,"Passive House Institute"),z(),Ue(95,"br"),H(96," Passive House Institute "),z(),B(97,"li")(98,"a",15),H(99,"Passief Bouwen"),z(),Ue(100,"br"),H(101," Dutch Passive House Association "),z(),B(102,"li")(103,"a",16),H(104,"IG Passivhus"),z(),Ue(105,"br"),H(106," Swedish Passive House Association "),z(),B(107,"li")(108,"a",17),H(109,"Passipedia"),z()()()()()(),Ue(110,"app-footer")),2&t&&(K(14),Yl("href",i.youtube,E1),K(1),ge("icon",i.faYoutube),K(3),Yl("href",i.instagram,E1),K(1),ge("icon",i.faInstagram),K(8),Yl("href",i.discord,E1),K(1),ge("icon",i.faDiscord),K(14),Yl("href",i.github,E1),K(1),ge("icon",i.faGithub))},dependencies:[wN,sle],styles:[".dark .po-logo{filter:invert(1)}main[_ngcontent-%COMP%]{max-width:600px;display:block;margin:0 auto 124px;padding:0 32px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px;width:100%}li[_ngcontent-%COMP%]{margin:8px 0}a[_ngcontent-%COMP%]:not(.larger-link){text-decoration:underline}.plings-logo[_ngcontent-%COMP%]{margin-top:24px;display:block;border-radius:100%;height:64px;position:absolute}"]}),n})(),gNt=(()=>{class n{constructor(t){this.houseService=t,this.house$=this.houseService.house$,this.Tag=l2,this.Section=Ct,this.update=this.houseService.update,this.round=cn,this.Thicknesses=An,this.joists=[200,300,350,400],this.columns=[{id:"name",name:"Name",def:i=>`${i}`},{id:"diameter",name:"Diameter",def:i=>`${cn(i,3)}`},{id:"lambda",name:"Lambda",def:i=>`${cn(i,3)}`},{id:"r",name:"R",def:i=>`${cn(i,2)}`},{id:"deltaT",name:"Delta T",def:i=>`${cn(i,1)}\xb0C`},{id:"temp",name:"Temp",def:i=>`${cn(i,1)}\xb0C`}],this.columnNames=this.columns.map(i=>i.id),this.currentJoist=()=>this.joists.findIndex(i=>i===this.house$.value.construction.Thicknesses[An.joists])}ngAfterViewInit(){}updateJoist(t){this.update("construction","thicknessJoist",this.joists[t])}updateOuterSheet(t){this.update("construction","thicknessJoist",this.joists[t])}}return n.\u0275fac=function(t){return new(t||n)(U(No))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-3d-house"]],decls:3,vars:1,consts:[[3,"id"]],template:function(t,i){1&t&&(B(0,"section",0)(1,"h1"),H(2," Loading "),z()()),2&t&&ge("id",i.Section.House3D)}}),n})();function qc(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function fD(n){return fD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fD(n)}function Xc(n){qc(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||"object"===fD(n)&&"[object Date]"===e?new Date(n.getTime()):"number"==typeof n||"[object Number]"===e?new Date(n):(("string"==typeof n||"[object String]"===e)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function dD(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function J5e(n){qc(1,arguments);var e=Xc(n);return e.setHours(0,0,0,0),e}function ANt(n,e){qc(2,arguments);var t=J5e(n),i=J5e(e),r=t.getTime()-dD(t),s=i.getTime()-dD(i);return Math.round((r-s)/864e5)}function ege(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Zu(n){if(null===n||!0===n||!1===n)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}var tge={};function pQ(){return tge}function Td(n,e){var t,i,r,s,o,a,c,l;qc(1,arguments);var u=pQ(),f=Zu(null!==(t=null!==(i=null!==(r=null!==(s=e?.weekStartsOn)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==r?r:u.weekStartsOn)&&void 0!==i?i:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==t?t:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Xc(n),g=p.getDay(),v=(g<f?7:0)+g-f;return p.setDate(p.getDate()-v),p.setHours(0,0,0,0),p}function nge(n,e){qc(2,arguments);var t=Xc(n),i=Zu(e);return isNaN(i)?new Date(NaN):(i&&t.setDate(t.getDate()+i),t)}function wNt(n,e){qc(2,arguments);var t=Zu(e),i=7*t;return nge(n,i)}function xNt(n,e){var t,i,r,s,o,a,c,l;qc(1,arguments);var u=Xc(n),f=u.getFullYear(),p=pQ(),g=Zu(null!==(t=null!==(i=null!==(r=null!==(s=e?.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==r?r:p.firstWeekContainsDate)&&void 0!==i?i:null===(c=p.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==t?t:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setFullYear(f+1,0,g),v.setHours(0,0,0,0);var _=Td(v,e),w=new Date(0);w.setFullYear(f,0,g),w.setHours(0,0,0,0);var b=Td(w,e);return u.getTime()>=_.getTime()?f+1:u.getTime()>=b.getTime()?f:f-1}function CNt(n,e){var t,i,r,s,o,a,c,l;qc(1,arguments);var u=pQ(),f=Zu(null!==(t=null!==(i=null!==(r=null!==(s=e?.firstWeekContainsDate)&&void 0!==s?s:null==e||null===(o=e.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==r?r:u.firstWeekContainsDate)&&void 0!==i?i:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==t?t:1),p=xNt(n,e),g=new Date(0);g.setFullYear(p,0,f),g.setHours(0,0,0,0);var v=Td(g,e);return v}function ige(n,e){qc(1,arguments);var t=Xc(n),i=Td(t,e).getTime()-CNt(t,e).getTime();return Math.round(i/6048e5)+1}function SNt(n){return qc(1,arguments),Xc(n).getFullYear()}function gQ(n){return qc(1,arguments),0===Xc(n).getDay()}function w8(n,e){for(var t=n<0?"-":"",i=Math.abs(n).toString();i.length<e;)i="0"+i;return t+i}function LNt(n,e){qc(2,arguments);var t=Xc(n),i=Zu(e);if(isNaN(i))return new Date(NaN);if(!i)return t;var r=t.getDate(),s=new Date(t.getTime());s.setMonth(t.getMonth()+i+1,0);var o=s.getDate();return r>=o?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}function pD(n){return pD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pD(n)}function mQ(n,e){if(qc(2,arguments),!e||"object"!==pD(e))return new Date(NaN);var t=e.years?Zu(e.years):0,i=e.months?Zu(e.months):0,r=e.weeks?Zu(e.weeks):0,s=e.days?Zu(e.days):0,o=e.hours?Zu(e.hours):0,a=e.minutes?Zu(e.minutes):0,c=e.seconds?Zu(e.seconds):0,l=Xc(n),u=i||t?LNt(l,i+12*t):l,f=s||r?nge(u,s+7*r):u,p=a+60*o,g=c+60*p,v=1e3*g,_=new Date(f.getTime()+v);return _}function INt(n){return qc(1,arguments),6===Xc(n).getDay()}var FA=(()=>(function(n){n.name="name",n.days="days",n.what="what",n.more="more",n.deadline="deadline",n.firstDate="firstDate",n.lastDate="lastDate"}(FA||(FA={})),FA))();const Rw=n=>`week-${function TNt(n,e){var t,i;qc(1,arguments);var r=Xc(n);if(isNaN(r.getTime()))throw new RangeError("Invalid time value");var s=String(null!==(t=e?.format)&&void 0!==t?t:"extended"),o=String(null!==(i=e?.representation)&&void 0!==i?i:"complete");if("extended"!==s&&"basic"!==s)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==o&&"time"!==o&&"complete"!==o)throw new RangeError("representation must be 'date', 'time', or 'complete'");var a="",c="",l="extended"===s?"-":"",u="extended"===s?":":"";if("time"!==o){var f=w8(r.getDate(),2),p=w8(r.getMonth()+1,2),g=w8(r.getFullYear(),4);a="".concat(g).concat(l).concat(p).concat(l).concat(f)}if("date"!==o){var v=r.getTimezoneOffset();if(0!==v){var _=Math.abs(v),w=w8(Math.floor(_/60),2),b=w8(_%60,2);c="".concat(v<0?"+":"-").concat(w,":").concat(b)}else c="Z";var k=""===a?"":"T",O=[w8(r.getHours(),2),w8(r.getMinutes(),2),w8(r.getSeconds(),2)].join(u);a="".concat(a).concat(k).concat(O).concat(c)}return a}(Td(n),{representation:"date"})}`;class Ai{constructor(e){this.type="single",this.firstDate=new Date,this.lastDate=new Date,this.parentUUIDs=[],this.removedSundays=[],this.isExpanded=!1,Object.assign(this,e),this.uuid=`${VH()}`}get folded(){return void 0===this.isExpanded?"":`<span class="material-icons" style="margin-left:${"single"===this.type?"8px":""};transform: rotate(${this.isExpanded?180:0}deg);">expand_more</span>`}setDays(e){this.firstDate=mQ(e,{days:1});const t=Math.max(1,this.days-1);this.dates=function DNt(n,e){var t;qc(1,arguments);var i=n||{},r=Xc(i.start),o=Xc(i.end).getTime();if(!(r.getTime()<=o))throw new RangeError("Invalid interval");var a=[],c=r;c.setHours(0,0,0,0);var l=Number(null!==(t=e?.step)&&void 0!==t?t:1);if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=o;)a.push(Xc(c)),c.setDate(c.getDate()+l),c.setHours(0,0,0,0);return a}({start:this.firstDate,end:mQ(this.firstDate,{days:t})}),this.removeSundays(),this.weeks=[...new Set(this.dates.map(i=>Rw(i)))],this.dates.forEach((i,r)=>{const s=`${Rw(i)}`;this[s]||(this[s]=[]),this[s].push(i)}),this.removedSundays.forEach(i=>{const r=`${Rw(i)}`;this[r]||(this[r]=[]),this[r].push(i)}),this.lastDate=this.dates[this.dates.length-1],this.firstDate=this.dates[0]}removeSundays(){let e=!0,t=0;for(;e;){const i=this.dates.findIndex(r=>gQ(r));if(i>-1){const r=this.dates.splice(i,1)[0];this.removedSundays.push(r);const s=this.dates[this.dates.length-1],o=mQ(s,{days:INt(s)?2:1});this.dates.push(o)}else e=!1;t++,t>30&&(console.error("loop error",this.dates,this.name),e=!1)}}}class ou extends Ai{constructor(e){super(e),this.steps=[],this.type="group",this.mainGroup=!1,this.collapsed=!1,this.firstDate=new Date,this.lastDate=new Date,Object.assign(this,e),"group"===this.type&&this.steps.forEach(t=>{t.parentUUIDs.push(...this.parentUUIDs,this.uuid)})}get folded(){return`<span class="material-icons">expand_${this.collapsed?"less":"more"}</span>`}toggleFold(){this.collapsed=!this.collapsed}setDays(){const e=this.steps.filter(t=>"total"!==t.type);this.firstDate=new Date(Math.min(...e.map(t=>t.firstDate.getTime()))),this.lastDate=new Date(Math.max(...e.map(t=>t.lastDate.getTime()))),this.dates=[...new Set(e.flatMap(t=>t.dates))],this.days=this.dates.length,this.weeks=[...new Set(this.dates.map(t=>Rw(t)))],e.forEach((t,i)=>{Object.keys(t).forEach(r=>{r.startsWith("week-")&&(this[r]||(this[r]=[]),this[r].push(...t[r]))})}),this.lastDate=new Date(Math.max(...e.flatMap(t=>t.lastDate.getTime()))),this.firstDate=new Date(Math.min(...e.flatMap(t=>t.firstDate.getTime())))}}class rge extends ou{constructor(e){super({partial:e,type:"total"}),this.steps=[],this.type="total",Object.assign(this,e)}get folded(){return'<span class="material-icons">remove</span>'}}const RNt=["table"],BNt=["tableRows"];function kNt(n,e){if(1&n&&(B(0,"mat-header-cell")(1,"div"),H(2),z()()),2&n){const t=Ft().$implicit;K(2),Zl(t.name)}}function FNt(n,e){if(1&n&&Ue(0,"div",11),2&n){const t=Ft().$implicit,i=Ft().$implicit;ge("innerHTML",i.def(t[i.id],t[i.id+"-extra"],t[i.id+"-extra-2"]),k3)}}function PNt(n,e){if(1&n&&(B(0,"mat-cell")(1,"div"),Ue(2,"span",11),Dt(3,FNt,1,1,"div",12),Ue(4,"span",11),z()()),2&n){const t=e.$implicit,i=Ft().$implicit;K(2),ge("innerHTML",i.prefix,k3),K(1),ge("ngIf",t[i.id]),K(1),ge("innerHTML",i.postfix,k3)}}function HNt(n,e){if(1&n&&(Ls(0,8),Dt(1,kNt,3,1,"mat-header-cell",9),Dt(2,PNt,5,3,"mat-cell",10),Ds()),2&n){const i=e.index;ge("matColumnDef",e.$implicit.id)("sticky",i<3)}}function zNt(n,e){1&n&&Ue(0,"mat-header-row")}function ONt(n,e){if(1&n){const t=no();B(0,"mat-row",13,14),Kt("click",function(r){const o=zn(t).$implicit;return h(Ft().rowClick(r,o))}),z()}if(2&n){const t=e.$implicit;rp(Ft().rowClasses(t)),ge("title",t.firstDate)}}function NNt(n,e){1&n&&Ue(0,"mat-row",15),2&n&&$r("row-planning-details-collapsed",!e.$implicit.isExpanded)}function VNt(n,e){if(1&n&&(B(0,"td",16),Ue(1,"div",17),z()),2&n){const t=e.$implicit;Jr("colspan",Ft().columns.length),K(1),ge("@detailExpand",t.isExpanded?"expanded":"collapsed")("innerHTML",t.more,k3)}}const UNt=function(){return["expandedDetail"]};let GNt=(()=>{class n{constructor(t){this.viewContainerRef=t,this.subscriptions=[],this.groupRow={},this.parts=[],this.isOpen=!1}ngOnInit(){this.columnNames=this.columns.map(t=>t.id)}ngAfterViewInit(){}rowClasses(t){return`table-row group-${t.uuid} \n    ${t.isExpanded?"row-readmore":""} \n    ${t instanceof ou&&t.mainGroup?"group-row-main":""} \n    ${t.parentUUIDs.map(i=>`parent-${i}`).join(" ")} row-${t.type}`}rowClick(t,i){if("group"===i.type&&i instanceof ou)i.toggleFold(),this.tableRows.forEach(r=>{const s=r.nativeElement.classList;s.contains(`parent-${i.uuid}`)&&(i.collapsed?s.add("row-folded"):s.remove("row-folded")),s.contains(`group-${i.uuid}`)&&(i.collapsed?s.add("row-collapsed"):s.remove("row-collapsed"))});else{if(void 0===i.more)return;if(!0===i.isExpanded)return void(i.isExpanded=!i.isExpanded);i.isExpanded=!i.isExpanded}}}return n.\u0275fac=function(t){return new(t||n)(U(Nc))},n.\u0275cmp=Sn({type:n,selectors:[["app-table-planning"]],viewQuery:function(t,i){if(1&t&&(_o(RNt,5,mn),_o(BNt,5,mn)),2&t){let r;Gi(r=Qi())&&(i.table=r.first),Gi(r=Qi())&&(i.tableRows=r)}},inputs:{dataSource:"dataSource",columns:"columns",scrollContainer:"scrollContainer"},decls:8,vars:7,consts:[["multiTemplateDataRows","",1,"mat-elevation-z0",2,"width","fit-content !important",3,"dataSource"],["table",""],[3,"matColumnDef","sticky",4,"ngFor","ngForOf"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"class","title","click",4,"matRowDef","matRowDefColumns"],["class","row-planning-details",3,"row-planning-details-collapsed",4,"matRowDef","matRowDefColumns"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef","sticky"],[4,"matHeaderCellDef"],[4,"matCellDef"],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],[3,"title","click"],["tableRows",""],[1,"row-planning-details"],["mat-cell",""],[1,"row-planning-detail",3,"innerHTML"]],template:function(t,i){1&t&&(B(0,"mat-table",0,1),Dt(2,HNt,3,2,"ng-container",2),Dt(3,zNt,1,0,"mat-header-row",3),Dt(4,ONt,2,3,"mat-row",4),Dt(5,NNt,1,2,"mat-row",5),Ls(6,6),Dt(7,VNt,2,3,"td",7),Ds(),z()),2&t&&(ge("dataSource",i.dataSource),K(2),ge("ngForOf",i.columns),K(1),ge("matHeaderRowDef",i.columnNames)("matHeaderRowDefSticky",!0),K(1),ge("matRowDefColumns",i.columnNames),K(1),ge("matRowDefColumns",bu(6,UNt)))},dependencies:[t3,D2,aM,jv,cM,$v,Wv,lM,Kv,qv,uM,hM],styles:[".row-planning-details.row-planning-details-collapsed{overflow:hidden;min-height:0px!important;border-width:0px!important}  .row-planning-details.row-planning-details-collapsed td{display:contents}  .row-planning-details td{min-height:46px;padding-top:8px!important;flex:1 1 100%;margin-left:40px;background-color:var(--color-0)!important}  .row-planning-details td div{border-left:1px var(--color-40) solid}.mat-column-what[_ngcontent-%COMP%], mat-header-row[_ngcontent-%COMP%]{border:1px var(--color-40)}mat-header-row[_ngcontent-%COMP%]{min-height:48px;border-bottom-style:solid;background-color:var(--color-5)!important}mat-row[_ngcontent-%COMP%]{transition:.2s;background-color:var(--color-0)!important}mat-row.row-total[_ngcontent-%COMP%]{background-color:var(--color-5)!important;margin-bottom:62px}mat-row.row-group[_ngcontent-%COMP%]{background-color:var(--color-5)!important;cursor:pointer}mat-row.row-group.group-row-main[_ngcontent-%COMP%]{background-color:var(--color-10)!important}mat-row[_ngcontent-%COMP%]   mat-header-cell.highlighted[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]:hover{background-color:var(--color-20)!important}mat-row.row-folded[_ngcontent-%COMP%]{overflow:hidden;height:0;min-height:0px;border-width:0}mat-row.row-folded[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{border-bottom-width:0px;padding:0;line-height:0px;overflow:hidden}.mat-column-firstDate[_ngcontent-%COMP%], .mat-column-lastDate[_ngcontent-%COMP%]{min-width:150px;width:150px;max-width:150px}.mat-column-folded[_ngcontent-%COMP%]{min-width:40px;width:40px;max-width:40px}.mat-column-name[_ngcontent-%COMP%]{min-width:200px;width:200px}.mat-column-what[_ngcontent-%COMP%]{min-width:200px;width:200px;border-right-style:solid}.mat-column-days[_ngcontent-%COMP%]{justify-content:center;min-width:60px;width:60px}mat-cell[class*=mat-column-week-][_ngcontent-%COMP%], mat-header-cell[class*=mat-column-week-][_ngcontent-%COMP%]{overflow:visible;min-width:40px;width:40px;text-align:center;border-left:1px solid var(--color-5)}mat-cell[class*=mat-column-week-][_ngcontent-%COMP%]   div[_ngcontent-%COMP%], mat-header-cell[class*=mat-column-week-][_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:40px}mat-header-cell[class*=mat-column-week-][_ngcontent-%COMP%]{border-left:1px solid var(--color-15)}mat-header-cell[class*=mat-column-week-][_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform:translate(13px) rotate(220deg);text-orientation:sideways;writing-mode:vertical-lr;width:initial}table[_ngcontent-%COMP%]{display:flex;flex-direction:column}  .week-block{position:relative}  .week-block .week-block-fill{position:absolute;background:var(--accent-50);right:0;height:100%;transition:.3s;width:16%}  .week-block .week-block-fill.sunday-block-fill{opacity:.3}  .week-block span{position:relative;display:block;width:100%;text-align:center}.row-total[_ngcontent-%COMP%]:not(.row-collapsed)     .week-block .sunday-block-fill, .row-total[_ngcontent-%COMP%]:not(.row-collapsed)     .week-block .week-block-fill, .row-group[_ngcontent-%COMP%]:not(.row-collapsed)     .week-block .sunday-block-fill, .row-group[_ngcontent-%COMP%]:not(.row-collapsed)     .week-block .week-block-fill{height:2px;top:50%;background:var(--color-80);opacity:.2}"],data:{animation:[u2("detailExpand",[wo("collapsed",Bi({height:"0px",minHeight:"0"})),wo("expanded",Bi({height:"*"})),bo("expanded <=> collapsed",ho("225ms"))])]}}),n})(),QNt=(()=>{class n{constructor(t){this.sanitizer=t,this.columns=[{id:"folded",name:" ",def:i=>this.sanitizer.bypassSecurityTrustHtml(i)},{id:FA.name,name:"Name",def:i=>`${i}`},{id:FA.what,name:"What",def:i=>`${i}`},{id:FA.days,name:"Days",def:i=>` ${i} `}],this.startDate=new Date(2023,5,15),this.subscriptions=[]}ngAfterViewInit(){}ngOnInit(){const t=[this.getPreps(),this.getFoundationAndGround(),this.getFrameAndWeather(),this.getInstallations(),this.getInterior(),this.getOutside(),this.getOther()];let i=this.startDate;const r=a=>{a.forEach(c=>{"group"===c.type&&c instanceof ou?(r(c.steps),c.setDays()):(c.setDays(i),i=c.lastDate)})};t.forEach((a,c)=>{a.mainGroup=!0,r(a.steps),a.setDays(),t[c].steps.push(new rge({name:`SUB Total ${a.name}`,steps:a.steps.filter(l=>"total"!==l.type),lastDate:a.lastDate,firstDate:a.firstDate}))}),this.minFirstDate=new Date(Math.min(...t.map(a=>a.firstDate.getTime()))),this.maxLastDate=new Date(Math.max(...t.map(a=>a.lastDate.getTime()))),this.totalDays=function vNt(n,e){qc(2,arguments);var t=Xc(n),i=Xc(e),r=ege(t,i),s=Math.abs(ANt(t,i));t.setDate(t.getDate()-r*s);var o=Number(ege(t,i)===-r),a=r*(s-o);return 0===a?0:a}(this.maxLastDate,this.minFirstDate),this.totalWeeks=function yNt(n,e,t){qc(2,arguments);var i=Td(n,t),r=Td(e,t),s=i.getTime()-dD(i),o=r.getTime()-dD(r);return Math.round((s-o)/6048e5)}(this.maxLastDate,this.minFirstDate),this.weeks=function bNt(n,e){qc(1,arguments);var t=n||{},i=Xc(t.start),r=Xc(t.end),s=r.getTime();if(!(i.getTime()<=s))throw new RangeError("Invalid interval");var o=Td(i,e),a=Td(r,e);o.setHours(15),a.setHours(15),s=a.getTime();for(var c=[],l=o;l.getTime()<=s;)l.setHours(0),c.push(Xc(l)),(l=wNt(l,1)).setHours(15);return c}({start:this.minFirstDate,end:this.maxLastDate}),this.columns.push(...this.weeks.map(a=>({id:Rw(a),name:` ${ige(a)} ${[1,52,53].includes(ige(a))?"'"+SNt(a).toString().substring(2):""} `,def:c=>this.sanitizer.bypassSecurityTrustHtml(`<div class="week-block">\n              ${c.map(l=>{const u=function ENt(n){return qc(1,arguments),Xc(n).getDay()}(l)-1;return`<div class="week-block-fill ${gQ(l)?"sunday-block-fill":""}" style="\n                left: ${Math.round(u/7*100)}%;\n              "></div>`}).join("")}\n              <span>${c.filter(l=>!gQ(l)).length}</span>\n            </div>`)}))),t.push(new rge({name:"House totals ",steps:t,uuid:VH()}));const o=(a,c)=>a.flatMap(l=>{const u=((a,c)=>(a.parentUUIDs=c,a))(l,c);return"total"===l.type?[u]:l instanceof ou?[u,...o(l.steps,[...c,l.uuid])]:[u]});this.steps=o(t,["main"]),this.steps.filter(a=>"total"===a.type).forEach(a=>a.setDays()),console.log("full table",this.steps)}getPreps(){return new ou({name:"Preparations",steps:[new Ai({name:"Geologic research",days:1}),new Ai({name:"Redesign",days:10}),new Ai({name:"Bygglov",days:10,isExpanded:!0,more:'\n          <a href="planning_in_depth">more in depth</a>\n<ul>\n  <li>side / floor plans</li>\n  <li>details</li>\n  <li><a>https://www.horby.se/bygga-bo-och-miljo/bygga-nytt-andra-eller-riva/bygglov/</a></li>\n</ul>'})]})}getFoundationAndGround(){const t=[new Ai({name:"Dirt work",what:"Ground preps",days:2}),new Ai({name:"Dirt work",what:"Flatten surface / compacting",days:9}),new Ai({name:"Dirt work",what:"Snapping lines",days:11}),new Ai({name:"Dirt work",what:"Digging hole",days:2})],i=[new Ai({name:"Footings",what:"Snapping lines",days:1}),new Ai({name:"Footings",what:"IFC blocks",days:2}),new Ai({name:"Footings",what:"Drainage",days:2}),new Ai({name:"Footings",what:"Pouring Concrete",days:7})];return new ou({name:"Foundation & ground work",steps:[new ou({name:`${t[0].name}`,steps:t}),new ou({name:`${i[0].name}`,steps:i}),new Ai({name:"Walls",what:"Snapping lines",days:2}),new Ai({name:"Walls",what:"IFC blocks",days:2}),new Ai({name:"Walls",what:"Pouring Concrete",days:7}),new Ai({name:"First Floor",what:"Prep wall",days:2}),new Ai({name:"First Floor",what:"Install prefab",days:6}),new Ai({name:"Deadline",what:"Foundation finished",days:8})]})}getFrameAndWeather(){return new ou({name:"Framing & Weather seal",steps:[new Ai({name:"Ground Floor\tMeasure for Square",days:1}),new Ai({name:"Ground Floor\tSnapping the lines",days:1}),new Ai({name:"Walls\tFrame the outside",days:10}),new Ai({name:"Walls\tFrame walls",days:5}),new Ai({name:"Stairs\tBuild temp stairs",days:2}),new Ai({name:"Top Floor\tMounting Rim LVL",days:2}),new Ai({name:"Top Floor\tRolling Joists",days:4}),new Ai({name:"Top Floor\tSheeting",days:3}),new Ai({name:"Roof\tRolling rafters",days:4}),new Ai({name:"Roof\tChimenys and cutouts",days:4}),new Ai({name:"Roof\tLower Sheeting",days:2}),new Ai({name:"Roof\tinsulation",days:2}),new Ai({name:"Roof\tOuter sheet",days:2}),new Ai({name:"Roof\tTiles",days:5}),new Ai({name:"Windows\tNormal openings",days:5}),new Ai({name:"Windows\tDoors",days:3}),new Ai({name:"Windows\tGlass facade",days:3}),new Ai({name:"Windows\tTaping",days:1}),new Ai({name:"Pirsing pipes (installationroom + chimneys)",days:2}),new Ai({name:"DoorBlowertest",days:1}),new Ai({name:"Deadline\tCorrections",days:3})]})}getInterior(){return new ou({name:"Interior",steps:[new Ai({name:"Kitchen",days:2}),new Ai({name:"Kitchen Countertop",days:5}),new Ai({name:"Floors",days:4}),new Ai({name:"Bathroom tiling",days:4})]})}getInstallations(){return new ou({name:"Installations",steps:[new Ai({name:"Water\tPlumming / Sewer",days:3}),new Ai({name:"Water\tWarm Cold water",days:3}),new Ai({name:"Water\tRainwater  + installation",days:3}),new Ai({name:"Water\tInstallation + Tank",days:3}),new Ai({name:"Floor heating\tTubeing",days:3}),new Ai({name:"Floor heating\tConcrete pressure layer",days:3}),new Ai({name:"Floor heating\tMechanic installation",days:3}),new Ai({name:"Electrics\tBuilding Power Connection",days:5}),new Ai({name:"Electrics\tTubes + Wiring",days:1}),new Ai({name:"Electrics\tInstallation",days:2}),new Ai({name:"Electrics\tFixes/ lamps",days:4}),new Ai({name:"Electrics\t3Phases",days:1}),new Ai({name:"Electrics\tEternet Cables",days:2}),new Ai({name:"Electrics\tAlarm",days:2}),new Ai({name:"HVAC\tPipes",days:3}),new Ai({name:"HVAC\tMechanic installation",days:2})]})}getOutside(){return new ou({name:"Outside",steps:[new Ai({name:"Walls\tPrep El/Cables etc",days:2}),new Ai({name:"Walls\tCorners",days:2}),new Ai({name:"Walls\tTrimming windows/ Doors",days:5}),new Ai({name:"Walls\tWindow blinds",days:2}),new Ai({name:"Walls\tFarstu preps",days:2}),new Ai({name:"Walls\tInsulation",days:4}),new Ai({name:"Walls\tOuter planks",days:8})]})}getOther(){return new ou({name:"Other",steps:[new Ai({name:"Inspections",days:1}),new Ai({name:"Share",days:1})]})}}return n.\u0275fac=function(t){return new(t||n)(U(Mf))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-planning"]],features:[rr([$R])],decls:13,vars:13,consts:[[2,"margin","36px"],[2,"margin-bottom","40px"],["cdkScrollable",""],["scrollContainer",""],[3,"columns","dataSource","scrollContainer"]],template:function(t,i){if(1&t&&(B(0,"div",0)(1,"h1",1),H(2,"Planning personal"),z(),H(3),zi(4,"date"),zi(5,"date"),Ue(6,"br"),H(7),B(8,"h3"),H(9," This page is still under construction. "),z()(),B(10,"div",2,3),Ue(12,"app-table-planning",4),z()),2&t){const r=Si(11);K(3),z3(" Building period is from ",O3(4,7,i.minFirstDate,"dd-LL-YYYY")," till ",O3(5,10,i.maxLastDate,"dd-LL-YYYY")," "),K(4),z3(" That is ",i.totalWeeks," weeks or ",i.totalDays," days. "),K(5),ge("columns",i.columns)("dataSource",i.steps)("scrollContainer",r)}},dependencies:[Bwe,GNt,$R],styles:["section[_ngcontent-%COMP%]{margin:0;padding:8px 4px 8px 16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;transition:.2s;display:flex;align-items:center;padding:6px;gap:16px}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{background:var(--color-10)}section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{transition:.4s ease-in;max-height:2000px;overflow:hidden}section[_ngcontent-%COMP%] > div.folded[_ngcontent-%COMP%]{transition:.4s ease-out;max-height:0px}.header-row[_ngcontent-%COMP%]{position:fixed;background-color:var(--color-5)!important}"]}),n})();function WNt(n,e){1&n&&H(0," Short for 'coefficient of performance'. The COP is a measure of how efficient a heat pump is. See it as follow: if you have a COP of 4, you can use 1 kWh of electricity to produce 4 kWh of heat. The heat is often coming from the outside air or ground.\n")}let jNt=(()=>{class n{constructor(t){this.appService=t,this.Tag=l2,this.Section=Ct}ngAfterViewInit(){}state(){}}return n.\u0275fac=function(t){return new(t||n)(U(io))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-depth-energy-warmth"]],decls:75,vars:10,consts:[[3,"id"],["cop",""],[3,"tag","overlayTemplate"],[1,"section-small",3,"id"]],template:function(t,i){if(1&t&&(B(0,"section",0)(1,"h1"),H(2,"The energy flow"),z()(),Dt(3,WNt,1,0,"ng-template",null,1,X2),B(5,"section",0)(6,"h2"),H(7,"Two types of energy"),z(),H(8," In a house we use "),B(9,"b"),H(10,"electricity"),z(),H(11," for lighting, heating, cooling, cooking, and entertainment. "),Ue(12,"Br")(13,"br"),H(14," We use "),B(15,"b"),H(16,"thermal "),z(),H(17," energy (heat) for heating, and hot water. Often we use gas to heat water, or in modern homes we use electricity. "),Ue(18,"Br")(19,"br"),H(20," Even in modern houses a large part of the energy is used for heating. "),z(),B(21,"section",0)(22,"h2"),H(23,"Production"),z(),H(24," A modern house has a heat-pump to create thermal energy (heat). With a "),B(25,"tag",2),H(26," COP"),z(),H(27," often around 4, it is very efficient. The heat-pump is powered by electricity, and the heat is stored in water tanks. "),Ue(28,"br")(29,"br"),H(30," A very sustainable renewable electricity production is with "),B(31,"b"),H(32,"solar panels"),z(),H(33,". "),Ue(34,"br")(35,"br"),B(36,"section",3)(37,"h3"),H(38,"Problem: Overproduction "),z(),H(39," If the sun is shining, your probably don't need so much power to heat your house. You probably sell the energy to the net. Of course some devices need electricity so panels can help with that. "),z(),Ue(40,"br"),B(41,"section",3)(42,"h3"),H(43,"Problem: Out of sync"),z(),H(44," The demand for energy is not in sync with the availability of sunlight. For example, electricity usage is often highest in the evenings when the sun is not shining, and during the winter season, when the sun is less efficient, there is typically a higher demand for heat. "),z(),Ue(45,"br"),H(46," A common solution for both problems is With a net connection you can financially balance this, with selling energy back to the net. That is however not very sustainable and often nets become overloaded. Not all net-suppliers or countries allow this. An other solution is to store the electricity and heat. "),z(),B(47,"section",0)(48,"h2"),H(49,"Storage"),z(),H(50," A common solution is to have batteries to store energy to generate heat when the sun is not shining. Batteries are expensive and not very sustainable. Of course some batteries could be helpful in the nights. If you receive green energy you could store it in batteries and use it in the night. This is especially useful if you have an hourly rate for electricity. "),Ue(51,"br")(52,"br"),H(53," It is more affordable and better to store heat in water thanks. Since the most energy of a house in the winter is used for heating, it is better to store the heat in water tanks instead of batteries.\n"),z(),B(54,"section",0)(55,"h2"),H(56,"Preserve / Efficiency first"),z(),H(57," Hot fill. Machines that use hot water, like dishwashers, could be filled with hot water. Because the water is heated sustainable or efficient (with a high COP), it is better to use hot water from the water buffer than let the machines self heat the water. COP 4 is much better. So to use the heatpump\n"),z(),B(58,"section",0)(59,"h2"),H(60,"Alternative heat production"),z(),H(61," The heat-pump is very efficient, but expensive and not the only solution. There are other ways to produce heat. "),B(62,"ol")(63,"li"),H(64,"Solar thermal collector"),z(),B(65,"li"),H(66,"Wood stove / fireplace"),z(),B(67,"li"),H(68,"Biomeiler"),z(),B(69,"li"),H(70,"City / block heating"),z(),B(71,"li"),H(72,"Pallet stove"),z(),B(73,"li"),H(74,"Bio gas"),z()()()),2&t){const r=Si(4);ge("id",i.Section.energyWelcome),K(5),ge("id",i.Section.energyUsage),K(16),ge("id",i.Section.energyProduction),K(4),ge("tag",i.Tag.cop)("overlayTemplate",r),K(11),ge("id",i.Section.energyProductionProblem1),K(5),ge("id",i.Section.energyProductionProblem2),K(6),ge("id",i.Section.energyStorage),K(7),ge("id",i.Section.energyPreserve),K(4),ge("id",i.Section.energyAlternatives)}},dependencies:[Tw,eQ],styles:["h3[_ngcontent-%COMP%]{font-weight:500}label[_ngcontent-%COMP%]{cursor:help}label[_ngcontent-%COMP%]:hover{background-color:var(--color-5)}"]}),n})(),$Nt=(()=>{class n{constructor(t,i){this.httpClient=t,this.sanitizer=i}set url(t){this.href=t,this.id=t.split("v=")[1].split("&")[0]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(U(dh),U(Mf))},n.\u0275cmp=Sn({type:n,selectors:[["app-img-youtube"]],inputs:{url:"url"},decls:2,vars:2,consts:[["target","_blank",3,"href"],["alt","",3,"src"]],template:function(t,i){1&t&&(B(0,"a",0),Ue(1,"img",1),z()),2&t&&(ge("href",i.href,E1),K(1),Ur("src","https://img.youtube.com/vi/",i.id,"/mqdefault.jpg",E1))},styles:["img[_ngcontent-%COMP%]{width:100%}"]}),n})(),KNt=(()=>{class n{constructor(t){this.appService=t,this.Tag=l2,this.Section=Ct}ngAfterViewInit(){}}return n.\u0275fac=function(t){return new(t||n)(U(io))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-depth-rain-water"]],decls:86,vars:6,consts:[[3,"id"],["height","360","src","assets/img/rainwater_flow.png"],["fxLayout","column","fxGap","24px",3,"id"],[1,"app-card","youtube-card"],["url","https://www.youtube.com/watch?v=DhEaKdmHeCk"],["url","https://www.youtube.com/watch?v=oJXabPWjPy8"],["url","https://www.youtube.com/watch?v=ppPLn6dgtFc"]],template:function(t,i){1&t&&(B(0,"h1"),H(1,"Rain water"),z(),B(2,"section",0)(3,"h2"),H(4,"Rain harvest/water "),z(),B(5,"p"),H(6," Climate adaptation requires the conservation of water, which can be achieved by collecting rainwater and using it as a buffer during droughts. Rainwater, which has low calcium levels, is perfect for watering plants, flushing toilets, and washing clothes. "),Ue(7,"br")(8,"br"),H(9," To ensure continuous water supply, a machine can automatically switch to normal drinking water backup if the rainwater tank runs out. "),Ue(10,"br")(11,"br"),H(12,"In theory showering with rainwater seems perfect, but most laws forbids to bend cold-rainwater with warm-drinkwater. If you do, you need less soap and your hair will be smooth. It might be different at your location "),z(),Ue(13,"app-img-page",1),z(),B(14,"section",0)(15,"h2"),H(16,"Sizing"),z(),H(17," A rainwater harvesting system typically begins with a catchment area, such as a roof, which collects rainwater. The water is then filtered and stored in a tank before being pumped into a pressure tank. Additional filters may be used after the pressure tank to improve the water quality. "),Ue(18,"br")(19,"br"),H(20," To determine the appropriate size of the tank, a good rule of thumb is to have a tank that can hold at least 1500 liters of water per person per day. For more serious water storage, a 10m"),B(21,"sup"),H(22,"3"),z(),H(23," tank is a good option if space allows. The tank should be placed on a solid foundation or even buried underground. All entry points to the tank should be screened to prevent bugs and debris from entering, and the water should enter the tank via a falling pipe. "),z(),B(24,"section",0)(25,"h2"),H(26,"Filters"),z(),H(27," Pre-filters are an essential component of any rainwater harvesting system, with leafscreens in the gutter being a common type. These filters remove large particles and organic materials from the harvested water before they enter the tank. Although the water may not be suitable for drinking, it is safe to use for outdoor purposes, such as gardening. "),Ue(28,"br")(29,"br"),H(30," To use rainwater indoors, a three-filter system is recommended. "),B(31,"ol")(32,"li"),H(33,"Coarse filter, like sediment, you can have multiple of these so they wont clog so fast"),z(),B(34,"li"),H(35,"Coal filter, removes the smell and colors"),z(),B(36,"li"),H(37,"Micro filter, removes smaller bacteria"),z()(),Ue(38,"br")(39,"br"),H(40," It's important to note that the filters will need to be replaced every 10,000L of water, which can be a drawback of this system. "),Ue(41,"br")(42,"br"),H(43," If you live in a smog area or other dirty area, you might need a 'first-flush' filter. This filter will remove the first 10-20 liter of water, which is the most dirty water. Often this is a vertical pipe with a small hole in the bottom, which slowly drains. Even an old rain barrel could fulfill this function.\n"),z(),B(44,"section",0)(45,"h2"),H(46,"Drink water"),z(),H(47," Using tap water for drinking and cooking is typically the easiest and most accessible option. While converting rainwater into drinking water is possible, it may not always be necessary. However, if you do want to use rainwater, there are several options available, including UV light and special passive filters.\n"),z(),B(48,"section",0)(49,"h2"),H(50,"No rain?"),z(),H(51," Running out of rainwater in your tank is not an issue. The backfill machine will automatically switch to tap water, guaranteeing a continuous supply of water for your toilet. "),Ue(52,"br")(53,"br"),H(54," While some people may fill up their rainwater tanks with tap water, it's a missed opportunity when it does rain. Investing in a backfill machine may cost more initially, but it can ultimately save water. "),Ue(55,"br")(56,"br"),H(57,"Leaving your rainwater tank empty is not recommended.\n"),z(),B(58,"section",2)(59,"h2"),H(60,"Read more"),z(),B(61,"div",3),Ue(62,"app-img-youtube",4),B(63,"div"),H(64," Very basics of rainwater harvesting: "),Ue(65,"br")(66,"br"),H(67," Andrew Millison - How to HARVEST RAINWATER from your roof "),z()(),B(68,"div",3),Ue(69,"app-img-youtube",5),B(70,"div")(71,"div"),H(72," Self build system in Dutch "),Ue(73,"br")(74,"br"),H(75," Easykit Slimme zelfbouw - Hoe kan ik mijn regenwater recupereren en hergebruiken? "),z()()(),B(76,"div",3),Ue(77,"app-img-youtube",6),B(78,"div")(79,"div"),H(80," Bigger setup 30.000 gallow / 115m"),B(81,"sup"),H(82,"3"),z(),Ue(83,"br")(84,"br"),H(85," April Wilkerson -Installing Rain Water Collection "),z()()()()),2&t&&(K(2),ge("id",i.Section.rainWelcome),K(12),ge("id",i.Section.rainSize),K(10),ge("id",i.Section.rainFilter),K(20),ge("id",i.Section.rainDrink),K(4),ge("id",i.Section.rainNoRain),K(10),ge("id",i.Section.rainReadmore))},dependencies:[m6,$Nt,Lw]}),n})(),qNt=(()=>{class n{constructor(t){this.appService=t,this.Tag=l2,this.Section=Ct}ngAfterViewInit(){}scrollTo(t){const i=document.getElementById(t);console.log(t,i),t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}}return n.\u0275fac=function(t){return new(t||n)(U(io))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-depth-planning"]],decls:167,vars:0,consts:[[3,"click"],["Preparations",""]],template:function(t,i){if(1&t){const r=no();B(0,"h1"),H(1,"ToDo"),z(),B(2,"section")(3,"h2"),H(4,"Building phases "),z(),B(5,"ol")(6,"li",0),Kt("click",function(){zn(r);const o=Si(19);return h(i.scrollTo(o))}),H(7,"Preparations"),z(),B(8,"li",0),Kt("click",function(){zn(r);const o=Si(19);return h(i.scrollTo(o))}),H(9,"Foundation & Groundwork "),z(),B(10,"li",0),Kt("click",function(){zn(r);const o=Si(19);return h(i.scrollTo(o))}),H(11,"Frame & Weather seal"),z(),B(12,"li",0),Kt("click",function(){zn(r);const o=Si(19);return h(i.scrollTo(o))}),H(13,"Installations"),z(),B(14,"li",0),Kt("click",function(){zn(r);const o=Si(19);return h(i.scrollTo(o))}),H(15,"Interior"),z(),B(16,"li",0),Kt("click",function(){zn(r);const o=Si(19);return h(i.scrollTo(o))}),H(17,"Other"),z()()(),B(18,"section",null,1)(20,"h2"),H(21,"Preparations"),z(),B(22,"ul")(23,"li")(24,"h3"),H(25,"F\xf6rhandsbeked"),z(),B(26,"a"),H(27,"https://www.horby.se/bygga-bo-och-miljo/bygga-nytt-andra-eller-riva/forhandsbesked/"),z(),H(28," Situation, size, materials, etc. "),z(),B(29,"li")(30,"h3"),H(31,"Gear"),z(),B(32,"ul")(33,"li"),H(34,"Telescopic handler"),z(),B(35,"li"),H(36,"Chain saw"),z(),B(37,"li"),H(38,"Table saw"),z(),B(39,"li"),H(40,"Compressor"),z(),B(41,"li"),H(42,"Lint saw"),z()()(),B(43,"li")(44,"h3"),H(45,"Partnerdeal"),z(),B(46,"ul")(47,"li"),H(48,"Heat gun"),z(),B(49,"li"),H(50,"Laser Level"),z()()(),B(51,"li")(52,"h3"),H(53,"Bygglov"),z(),B(54,"ul")(55,"li"),H(56,"side / floor plans"),z(),B(57,"li"),H(58,"details"),z(),B(59,"li")(60,"a"),H(61,"https://www.horby.se/bygga-bo-och-miljo/bygga-nytt-andra-eller-riva/bygglov/"),z()()()(),B(62,"li")(63,"h3"),H(64,"Calculations"),z(),B(65,"ul")(66,"li"),H(67,"PHPP"),z(),B(68,"li"),H(69,"Light"),z(),B(70,"li"),H(71,"Heat"),z(),B(72,"li"),H(73,"foundations"),z(),B(74,"li"),H(75,"construction"),z(),B(76,"li"),H(77,"fire?"),z(),B(78,"li"),H(79,"ventilation"),z()()(),B(80,"li")(81,"h3"),H(82,"Geologisk unders\xf6kning"),z()(),B(83,"li")(84,"h3"),H(85,"Connections"),z(),B(86,"ul")(87,"li"),H(88,"Electricity"),Ue(89,"br"),H(90," If "),B(91,"b"),H(92,"old house"),z(),H(93," has 3phase, its perfect. During building is good. Otherwise we need a "),B(94,"b"),H(95,"trench"),z(),H(96,". We need 3x cable for lights and such "),z(),H(97," Thunder protection "),B(98,"li"),H(99,"Water"),z(),H(100," Old house during building. We need a "),B(101,"b"),H(102,"trench"),z(),H(103," or we can use a "),B(104,"b"),H(105,"well"),z(),H(106,". "),B(107,"li"),H(108,"Internet"),z(),H(109," We need a "),B(110,"b"),H(111,"trench"),z(),H(112," or we can use a "),B(113,"b"),H(114,"4G"),z(),H(115,". "),B(116,"li"),H(117,"Sewage"),z(),H(118," Old house during building. We need a "),B(119,"b"),H(120,"trench"),z(),H(121," or we can use a "),B(122,"b"),H(123,"septic tank"),z(),H(124,". TreKammarBrunn med filteringsbed Pump to kommunal systems Use old tank to pump "),z()(),B(125,"li")(126,"h3"),H(127,"Questions kommun"),z(),B(128,"ul")(129,"li"),H(130,"Building insurance"),z(),B(131,"li"),H(132,"safety"),z(),B(133,"li"),H(134,"fire"),z(),B(135,"li"),H(136,"handicaps requirements"),z(),B(137,"li"),H(138,"Insepector"),z(),B(139,"li"),H(140,"Building sj\xe4lv"),z(),B(141,"li"),H(142,"Building company"),z()()(),B(143,"li")(144,"h3"),H(145,"Money"),z(),B(146,"ul")(147,"li"),H(148,"How much plot"),z(),B(149,"li"),H(150,"How much build"),z(),B(151,"li"),H(152,"Loan for house"),z(),B(153,"li"),H(154,"Loan for land"),z()()(),B(155,"li")(156,"h3"),H(157,"Prices and help"),z(),B(158,"ul")(159,"li"),H(160,"H\xf6rby"),z(),B(161,"li"),H(162,"PassiveHouse"),z(),B(163,"li"),H(164,"Sverige global"),z(),B(165,"li"),H(166,"Eko"),z()()()()()}},styles:[".app-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:start;align-items:flex-start;width:100%;height:100%;gap:16px;transition:.4s;padding:16px 0 16px 8px;margin-left:-8px;border-radius:4px;border:var(--color-0) 1px solid}.app-card[_ngcontent-%COMP%]   app-img-youtube[_ngcontent-%COMP%]{max-width:180px;flex:1 1 50%;transition:.4s;opacity:1}.app-card[_ngcontent-%COMP%]:hover{border:var(--color-30) 1px solid}.app-card[_ngcontent-%COMP%]:hover   app-img-youtube[_ngcontent-%COMP%]{opacity:.8}.app-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0!important;flex:1 1 50%}"]}),n})();var sge=ae(3095);let XNt=(()=>{class n{transform(t){return Math.floor(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=b1({name:"floor",type:n,pure:!0}),n})();function YNt(n,e){if(1&n&&(B(0,"tr")(1,"td"),H(2),z(),B(3,"td"),H(4),zi(5,"number"),zi(6,"number"),z(),B(7,"td"),H(8),zi(9,"floor"),zi(10,"floor"),zi(11,"floor"),zi(12,"floor"),z(),B(13,"td"),H(14),zi(15,"floor"),zi(16,"floor"),zi(17,"floor"),zi(18,"floor"),z(),B(19,"td"),H(20),zi(21,"floor"),zi(22,"floor"),zi(23,"floor"),zi(24,"floor"),z(),B(25,"td"),H(26),zi(27,"floor"),zi(28,"floor"),zi(29,"floor"),zi(30,"floor"),z()()),2&n){const t=e.$implicit,i=Ft(2);K(2),Zl(t),K(2),z3(" ",O3(5,15,i.roofTopLengths[t],"1.1-1"),"x",O3(6,18,i.roofTopWidth,"1.1-1")," "),K(4),B9(" ",Er(9,21,i.roofTopLengths[t]/1.65),"x",Er(10,23,i.roofTopWidth/1)," (",Er(11,25,i.roofTopLengths[t]/1.85),"x",Er(12,27,i.roofTopWidth/1.1),") "),K(6),z3(" = ",Er(15,29,i.roofTopLengths[t]/1.65)*Er(16,31,i.roofTopWidth/1)," (",Er(17,33,i.roofTopLengths[t]/1.85)*Er(18,35,i.roofTopWidth/1.1),") "),K(6),B9(" ",Er(21,37,i.roofTopLengths[t]/1)," (",Er(22,39,i.roofTopLengths[t]/1.1),") x ",Er(23,41,i.roofTopWidth/1)," (",Er(24,43,i.roofTopWidth/1.1),") "),K(6),z3(" = ",Er(27,45,i.roofTopLengths[t]/1)*Er(28,47,i.roofTopWidth/1.65)," (",Er(29,49,i.roofTopLengths[t]/1)*Er(30,51,i.roofTopWidth/1.85),") ")}}const ZNt=function(){return["west","east","north"]};function JNt(n,e){1&n&&(B(0,"table",10)(1,"tr"),Ue(2,"th"),B(3,"th"),H(4,"size"),z(),B(5,"th"),H(6,"horizontal"),z(),Ue(7,"th"),B(8,"th"),H(9,"vertical"),z(),Ue(10,"th"),z(),Dt(11,YNt,31,53,"tr",11),z()),2&n&&(K(11),ge("ngForOf",bu(1,ZNt)))}let eVt=(()=>{class n{constructor(t,i){this.appService=t,this.houseService=i,this.Tag=l2,this.Section=Ct,this.lowWattage=150,this.highWattage=370,this.size=[110,185],this.amountPanels=30,this.efficiency=.9,this.annualNonHeating=2e3,this.annualHeating=5e3,this.annualHeatingDemand=12e3,this.energyDemand=43e3}get totalWattage(){return this.amountPanels*this.highWattage*this.efficiency}ngAfterViewInit(){this.house=this.houseService.house$.value;const{ground:t,all:i}=this.house.getFloorArea(),r=this.house.cross.roofPoints;this.roofTopWidth=Ma(r[Bt.bendOutside],r[Bt.topOutside]),this.roofTopLengths={west:this.house.extensionToWest*this.house.studDistance,east:this.house.extensionToEast*this.house.studDistance,south:this.house.extensionToSouth*this.house.studDistance,north:this.house.extensionToNorth*this.house.studDistance},this.groundFloorSpace=t.area,this.totalFloorSpace=i.area,this.calcSun()}calcSun(){const{lat:t,lng:i}=this.house.orientation;[new Date(2020,11,21,12,0,0),new Date(2020,5,21,13,0,0)].forEach(o=>{var a=sge.getTimes(o,t,i);let{altitude:c}=sge.getPosition(a.solarNoon,t,i);c=cn(180*c/Math.PI,1),o.getMonth()<6&&t>0?this.maxSun=c:this.minSun=c})}formatLabel(t){return t>=1e3?Math.round(t/1e3)+"k":`${t}`}}return n.\u0275fac=function(t){return new(t||n)(U(io),U(No))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-depth-solar"]],decls:130,vars:49,consts:[[3,"id"],["height","360px","imgStyle","\n  clip-path: inset(51px 66px 53px 29px);\n  transform: scale(1.4);","src","https://www.solar.sheffield.ac.uk/wp-content/uploads/2014/07/EastWest_arrays.jpg"],["min","100","max","600","step","10",3,"ngModel","valueChange"],["min","1","max","50","step","1",3,"ngModel","valueChange"],["min","0.75","max","1","step","0.05",3,"ngModel","valueChange"],["class","panel-table",4,"ngIf"],[1,"technical"],[1,"app-card","link-card"],["href","https://midsummer.se/en/","target","_blank"],["href","https://www.zonne-energiegids.nl/soorten-zonnepanelen/glas-glas/","target","_blank"],[1,"panel-table"],[4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(B(0,"h1"),H(1,"Solar"),z(),B(2,"section",0)(3,"h2"),H(4,"Solar & Passive house"),z(),B(5,"h3"),H(6,"Passive House classic"),z(),H(7," Many passive house builders would say that you should start thinking first to insulate that thinking about green energy production. Efficiency first, then production. "),Ue(8,"br")(9,"br"),H(10," A building built to Passive House Plus standard must not consume more than 15 kWh/m\xb2.yr of primary energy ( can be non-green energy). "),Ue(11,"br")(12,"br"),H(13," With "),B(14,"code"),H(15),B(16,"sup"),H(17,"2"),z()(),H(18," of total floor area and with a max of 15 kWh/m\xb2.yr the total heating energy would be "),B(19,"code"),H(20),zi(21,"number"),z(),Ue(22,"br")(23,"br"),B(24,"h3"),H(25,"Passive House Plus"),z(),H(26," A building built to Passive House Plus standard must not consume more than 45 kWh/m\xb2.yr of renewable primary energy. In addition, at least 60 kWh/m\xb2.yr of energy in relation to the area covered by the building must be generated. "),Ue(27,"br")(28,"br"),H(29," With ground floor area of "),B(30,"code"),H(31),B(32,"sup"),H(33,"2"),z()(),H(34," for renewable energy generation of 60 kWh/m\xb2.yr "),B(35,"code"),H(36),zi(37,"number"),z(),H(38," is needed. "),B(39,"h3"),H(40,"Passive House Premium"),z(),B(41,"p"),H(42," For normal house with a 120 kWh/m\xb2.yr generation would be a bit far fetched. This standard is more fore commercial buildings, like a school. "),z()(),B(43,"section",0)(44,"h2"),H(45,"Solar"),z(),B(46,"ol")(47,"li"),H(48,"Panels"),z(),H(49," - 10-20kWh glas-glass panels - CIG(S)-panelen (Copper, Indium, Gallium, Selenide): the next generation "),B(50,"li"),H(51,"inverter"),z(),H(52," Can be 10% than max theoretical solar output "),B(53,"li"),H(54,"monitoring"),z(),B(55,"li"),H(56,"frame"),z()(),Ue(57,"br")(58,"br"),H(59),zi(60,"number"),zi(61,"number"),Ue(62,"br"),H(63),zi(64,"number"),Ue(65,"br")(66,"br"),H(67),zi(68,"number"),zi(69,"number"),Ue(70,"br"),H(71),zi(72,"number"),Ue(73,"br")(74,"br"),H(75," There are two main concepts about placing solar panels. "),B(76,"h3"),H(77,"1. Financially optimized."),z(),H(78," Here you aim for the highest return on investment. This means that you want to use as much of the solar energy. So you choose for panels aiming at the south, and a roof angle of 35\xb0. So you generate the most during noon at summer times. This only works if your net-operator allows you to sell. "),B(79,"h3"),H(80,"2. Your own usage optimized."),z(),H(81," Here you would use the east-west orientation, so you flatten the generated curve. This means that you can use more of the solar energy. A steeper angle would work better in wintertime, but you would generate less in summer. "),B(82,"app-img-page",1),H(83," According to Sheffield University, the east-west orientation is broader. Note that this effect is larger if you have a higher latitude. (further away from the equator) "),z(),B(84,"h3"),H(85,"Hybrid"),z(),H(86," Like with many things, a combination of both is possible. Another way would be storing the energy.\n"),z(),B(87,"section")(88,"label")(89,"span"),H(90),z(),B(91,"mat-slider",2),Kt("valueChange",function(s){return i.lowWattage=s}),z(),B(92,"mat-slider",2),Kt("valueChange",function(s){return i.highWattage=s}),z()(),B(93,"label")(94,"span"),H(95),z(),B(96,"mat-slider",3),Kt("valueChange",function(s){return i.amountPanels=s}),z()(),B(97,"label")(98,"span"),H(99),z(),B(100,"mat-slider",4),Kt("valueChange",function(s){return i.efficiency=s}),z()(),H(101," The mansard roof is:"),Ue(102,"br"),Dt(103,JNt,12,2,"table",5),B(104,"label",6)(105,"span"),H(106,"Technical "),z(),H(107),Ue(108,"br"),z()(),B(109,"section",0)(110,"h2"),H(111,"EV cars"),z(),H(112," Cars are better charged on net instead of homebattry. Flexible contract. charger should be OCPP Level 2, is best single-fase = 10hour for tesla. okay but not great Seperate chargin cable (cable is better ifyou have threefase) "),z(),B(113,"section")(114,"h2"),H(115,"Read more"),z(),B(116,"div",7)(117,"div")(118,"div")(119,"a",8),H(120,"Midsummer"),z(),Ue(121,"br"),H(122," A swedish company that makes thin-film soladr panels. "),z()()(),B(123,"div",7)(124,"div")(125,"div")(126,"a",9),H(127,"Dutch: glas-glas"),z(),Ue(128,"br"),H(129," More about glass-glass panels. "),z()()()()),2&t&&(K(2),ge("id",i.Section.solarStart),K(13),Nn("",i.totalFloorSpace,"m"),K(5),Nn("",O3(21,25,15*i.totalFloorSpace,"1.0-0"),"kWh/m\xb2.yr"),K(11),Nn("",i.groundFloorSpace,"m"),K(5),Nn("",O3(37,28,60*i.groundFloorSpace,"1.0-0"),"kWh.yr"),K(7),ge("id",i.Section.solarStart),K(16),z3(" Sun's altitude is in between ",O3(60,31,i.minSun,"1.1-1"),"\xb0 - ",O3(61,34,i.maxSun,"1.1-1"),"\xb0 "),K(4),Nn(" ",O3(64,37,(i.maxSun-i.minSun)/2+i.minSun,"1.1-1"),"\xb0 on average. "),K(4),z3(" So the roof angles are ",O3(68,40,90-i.maxSun,"1.1-1"),"\xb0 - ",O3(69,43,90-i.minSun,"1.1-1"),"\xb0 "),K(4),Nn(" ",O3(72,46,90-((i.maxSun-i.minSun)/2+i.minSun),"1.1-1"),"\xb0 on average. During the winter, the solar radiation is lower. Think of it like this, in the winter only a part (like 10%) of the solar energy hits the panels. So with a weighted-average, shifts more to the max-summer angle. "),K(19),Nn("lowWattage ",i.highWattage,"W "),K(1),ge("ngModel",i.lowWattage),K(1),ge("ngModel",i.highWattage),K(3),Nn("Amount of panels ",i.amountPanels,""),K(1),ge("ngModel",i.amountPanels),K(3),Nn("Efficiency ",100*i.efficiency,"%"),K(1),ge("ngModel",i.efficiency),K(3),ge("ngIf",i.roofTopLengths),K(4),B9(" ",i.amountPanels," panels of ",i.highWattage,"watt at ",100*i.efficiency,"% gives ",i.totalWattage,"kWh "),K(2),ge("id",i.Section.solarStart))},dependencies:[t3,D2,Vv,Pv,C7,Lw,KR,XNt],styles:["code[_ngcontent-%COMP%]{padding:2px 4px;background:var(--color-5);border-bottom:1px solid var(--color-10)}.panel-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}"]}),n})();function tVt(n,e){if(1&n&&(Ls(0),B(1,"section")(2,"h2"),H(3,"Garage inpiration"),z(),B(4,"a",1),H(5," Dubbelgarage med sadeltak 22\xba och m\xe5tten 8,7\xd79,7 meter "),z(),B(6,"h2"),H(7,"This design"),z(),H(8),zi(9,"number"),Ue(10,"app-img-page",2),z(),Ds()),2&n){const t=e.ngIf;K(8),JI(" ",t.garage.width,"x",t.garage.length,"m = ",O3(9,3,t.garage.width*t.garage.length,"1.1-1"),"m2 ")}}const nVt=[{path:"map",component:ZOt},{path:"costs",component:dNt},{path:"about",component:pNt},{path:"planning",component:QNt},{path:"",component:jHt,children:[{path:"house",component:izt},{path:"stairs",component:hzt},{path:"facade",component:yzt},{path:"installations",component:bzt},{path:"construction",component:_zt},{path:"house3d",component:gNt},{path:"wired",component:JOt},{path:"planning_in_depth",component:qNt},{path:"solar",component:eVt},{path:"energy&heat",component:jNt},{path:"rain",component:KNt},{path:"garage",component:(()=>{class n{constructor(t){this.houseService=t,this.Tag=l2,this.Section=Ct,this.house$=this.houseService.house$,this.garage={}}ngAfterViewInit(){this.garage=this.houseService.house$.value.garage}}return n.\u0275fac=function(t){return new(t||n)(U(No))},n.\u0275cmp=Sn({type:n,selectors:[["app-page-depth-garage"]],decls:4,vars:3,consts:[[4,"ngIf"],["href","\n    https://www.mellbygarage.se/sv/blogg/levereratgarage/dubbelgarage-med-sadeltak-12/"],["height","360px","src","https://sp-ao.shortpixel.ai/client/to_auto,q_lossy,ret_img/https://www.mellbygarage.se/wp-content/uploads/2017/12/922745211b0ff5e08440bb12fabcf6b9b4f084e0.jpg"]],template:function(t,i){1&t&&(B(0,"h1"),H(1,"Garage"),z(),Dt(2,tVt,11,6,"ng-container",0),zi(3,"async")),2&t&&(K(2),ge("ngIf",Er(3,1,i.house$)))},dependencies:[D2,Lw,g0,KR],styles:["code[_ngcontent-%COMP%]{padding:2px 4px;background:var(--color-5);border-bottom:1px solid var(--color-10)}.panel-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}"]}),n})()},{path:"**",redirectTo:"house",pathMatch:"full"}]},{path:"**",redirectTo:"/house",pathMatch:"full"}];let iVt=(()=>{class n{constructor(t){t.addSvgIconSet("material-icons-outlined")}}return n.\u0275fac=function(t){return new(t||n)(Xe(A7))},n.\u0275mod=hi({type:n,bootstrap:[WEe]}),n.\u0275inj=xn({providers:[U3],imports:[Dq,n3,QLe,uke,jFe,IMe,l6,z2t,$Fe.forRoot("passiv"),nPe.forRoot("G-W580DX5P7G"),vCe.forRoot(nVt,{anchorScrolling:"enabled",scrollPositionRestoration:"disabled"})]}),n})();(function Sve(){if(IK)throw new Error("Cannot enable prod mode after platform setup.");DK=!1})(),Kye().bootstrapModule(iVt).catch(n=>console.error(n))},1503:(Et,Ze,ae)=>{"use strict";var ve=ae(3269);function Be(Ie){var Te=[1/0,1/0,-1/0,-1/0];return ve.coordEach(Ie,function(_e){Te[0]>_e[0]&&(Te[0]=_e[0]),Te[1]>_e[1]&&(Te[1]=_e[1]),Te[2]<_e[0]&&(Te[2]=_e[0]),Te[3]<_e[1]&&(Te[3]=_e[1])}),Te}Be.default=Be,Ze.Z=Be},2972:function(Et){Et.exports=function(){"use strict";function ae(Be,Ie,Te,_e,Ve){for(;_e>Te;){if(_e-Te>600){var Je=_e-Te+1,ot=Ie-Te+1,Tt=Math.log(Je),ht=.5*Math.exp(2*Tt/3),et=.5*Math.sqrt(Tt*ht*(Je-ht)/Je)*(ot-Je/2<0?-1:1);ae(Be,Ie,Math.max(Te,Math.floor(Ie-ot*ht/Je+et)),Math.min(_e,Math.floor(Ie+(Je-ot)*ht/Je+et)),Ve)}var Qe=Be[Ie],Ke=Te,j=_e;for(ee(Be,Te,Ie),Ve(Be[_e],Qe)>0&&ee(Be,Te,_e);Ke<j;){for(ee(Be,Ke,j),Ke++,j--;Ve(Be[Ke],Qe)<0;)Ke++;for(;Ve(Be[j],Qe)>0;)j--}0===Ve(Be[Te],Qe)?ee(Be,Te,j):ee(Be,++j,_e),j<=Ie&&(Te=j+1),Ie<=j&&(_e=j-1)}}function ee(Be,Ie,Te){var _e=Be[Ie];Be[Ie]=Be[Te],Be[Te]=_e}function ve(Be,Ie){return Be<Ie?-1:Be>Ie?1:0}return function Ze(Be,Ie,Te,_e,Ve){ae(Be,Ie,Te||0,_e||Be.length-1,Ve||ve)}}()},915:(Et,Ze,ae)=>{"use strict";Et.exports=ve,Et.exports.default=ve;var ee=ae(2972);function ve(j,Y){if(!(this instanceof ve))return new ve(j,Y);this._maxEntries=Math.max(4,j||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),Y&&this._initFormat(Y),this.clear()}function Be(j,Y,Z){if(!Z)return Y.indexOf(j);for(var xe=0;xe<Y.length;xe++)if(Z(j,Y[xe]))return xe;return-1}function Ie(j,Y){Te(j,0,j.children.length,Y,j)}function Te(j,Y,Z,xe,te){te||(te=Qe(null)),te.minX=1/0,te.minY=1/0,te.maxX=-1/0,te.maxY=-1/0;for(var ce,oe=Y;oe<Z;oe++)ce=j.children[oe],_e(te,j.leaf?xe(ce):ce);return te}function _e(j,Y){return j.minX=Math.min(j.minX,Y.minX),j.minY=Math.min(j.minY,Y.minY),j.maxX=Math.max(j.maxX,Y.maxX),j.maxY=Math.max(j.maxY,Y.maxY),j}function Ve(j,Y){return j.minX-Y.minX}function Je(j,Y){return j.minY-Y.minY}function ot(j){return(j.maxX-j.minX)*(j.maxY-j.minY)}function Tt(j){return j.maxX-j.minX+(j.maxY-j.minY)}function ht(j,Y){return(Math.max(Y.maxX,j.maxX)-Math.min(Y.minX,j.minX))*(Math.max(Y.maxY,j.maxY)-Math.min(Y.minY,j.minY))}function et(j,Y){var Z=Math.max(j.minX,Y.minX),xe=Math.max(j.minY,Y.minY),te=Math.min(j.maxX,Y.maxX),oe=Math.min(j.maxY,Y.maxY);return Math.max(0,te-Z)*Math.max(0,oe-xe)}function ct(j,Y){return j.minX<=Y.minX&&j.minY<=Y.minY&&Y.maxX<=j.maxX&&Y.maxY<=j.maxY}function $t(j,Y){return Y.minX<=j.maxX&&Y.minY<=j.maxY&&Y.maxX>=j.minX&&Y.maxY>=j.minY}function Qe(j){return{children:j,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ke(j,Y,Z,xe,te){for(var ce,oe=[Y,Z];oe.length;)!((Z=oe.pop())-(Y=oe.pop())<=xe)&&(ce=Y+Math.ceil((Z-Y)/xe/2)*xe,ee(j,ce,Y,Z,te),oe.push(Y,ce,ce,Z))}ve.prototype={all:function(){return this._all(this.data,[])},search:function(j){var Y=this.data,Z=[],xe=this.toBBox;if(!$t(j,Y))return Z;for(var oe,ce,$,qe,te=[];Y;){for(oe=0,ce=Y.children.length;oe<ce;oe++)$=Y.children[oe],$t(j,qe=Y.leaf?xe($):$)&&(Y.leaf?Z.push($):ct(j,qe)?this._all($,Z):te.push($));Y=te.pop()}return Z},collides:function(j){var Y=this.data,Z=this.toBBox;if(!$t(j,Y))return!1;for(var te,oe,ce,$,xe=[];Y;){for(te=0,oe=Y.children.length;te<oe;te++)if(ce=Y.children[te],$t(j,$=Y.leaf?Z(ce):ce)){if(Y.leaf||ct(j,$))return!0;xe.push(ce)}Y=xe.pop()}return!1},load:function(j){if(!j||!j.length)return this;if(j.length<this._minEntries){for(var Y=0,Z=j.length;Y<Z;Y++)this.insert(j[Y]);return this}var xe=this._build(j.slice(),0,j.length-1,0);if(this.data.children.length)if(this.data.height===xe.height)this._splitRoot(this.data,xe);else{if(this.data.height<xe.height){var te=this.data;this.data=xe,xe=te}this._insert(xe,this.data.height-xe.height-1,!0)}else this.data=xe;return this},insert:function(j){return j&&this._insert(j,this.data.height-1),this},clear:function(){return this.data=Qe([]),this},remove:function(j,Y){if(!j)return this;for(var ce,$,qe,He,Z=this.data,xe=this.toBBox(j),te=[],oe=[];Z||te.length;){if(Z||(Z=te.pop(),$=te[te.length-1],ce=oe.pop(),He=!0),Z.leaf&&-1!==(qe=Be(j,Z.children,Y)))return Z.children.splice(qe,1),te.push(Z),this._condense(te),this;He||Z.leaf||!ct(Z,xe)?$?(ce++,Z=$.children[ce],He=!1):Z=null:(te.push(Z),oe.push(ce),ce=0,$=Z,Z=Z.children[0])}return this},toBBox:function(j){return j},compareMinX:Ve,compareMinY:Je,toJSON:function(){return this.data},fromJSON:function(j){return this.data=j,this},_all:function(j,Y){for(var Z=[];j;)j.leaf?Y.push.apply(Y,j.children):Z.push.apply(Z,j.children),j=Z.pop();return Y},_build:function(j,Y,Z,xe){var ce,te=Z-Y+1,oe=this._maxEntries;if(te<=oe)return Ie(ce=Qe(j.slice(Y,Z+1)),this.toBBox),ce;xe||(xe=Math.ceil(Math.log(te)/Math.log(oe)),oe=Math.ceil(te/Math.pow(oe,xe-1))),(ce=Qe([])).leaf=!1,ce.height=xe;var He,Oe,he,Ot,$=Math.ceil(te/oe),qe=$*Math.ceil(Math.sqrt(oe));for(Ke(j,Y,Z,qe,this.compareMinX),He=Y;He<=Z;He+=qe)for(Ke(j,He,he=Math.min(He+qe-1,Z),$,this.compareMinY),Oe=He;Oe<=he;Oe+=$)Ot=Math.min(Oe+$-1,he),ce.children.push(this._build(j,Oe,Ot,xe-1));return Ie(ce,this.toBBox),ce},_chooseSubtree:function(j,Y,Z,xe){for(var te,oe,ce,$,qe,He,Oe,he;xe.push(Y),!Y.leaf&&xe.length-1!==Z;){for(Oe=he=1/0,te=0,oe=Y.children.length;te<oe;te++)qe=ot(ce=Y.children[te]),(He=ht(j,ce)-qe)<he?(he=He,Oe=qe<Oe?qe:Oe,$=ce):He===he&&qe<Oe&&(Oe=qe,$=ce);Y=$||Y.children[0]}return Y},_insert:function(j,Y,Z){var te=Z?j:(0,this.toBBox)(j),oe=[],ce=this._chooseSubtree(te,this.data,Y,oe);for(ce.children.push(j),_e(ce,te);Y>=0&&oe[Y].children.length>this._maxEntries;)this._split(oe,Y),Y--;this._adjustParentBBoxes(te,oe,Y)},_split:function(j,Y){var Z=j[Y],xe=Z.children.length,te=this._minEntries;this._chooseSplitAxis(Z,te,xe);var oe=this._chooseSplitIndex(Z,te,xe),ce=Qe(Z.children.splice(oe,Z.children.length-oe));ce.height=Z.height,ce.leaf=Z.leaf,Ie(Z,this.toBBox),Ie(ce,this.toBBox),Y?j[Y-1].children.push(ce):this._splitRoot(Z,ce)},_splitRoot:function(j,Y){this.data=Qe([j,Y]),this.data.height=j.height+1,this.data.leaf=!1,Ie(this.data,this.toBBox)},_chooseSplitIndex:function(j,Y,Z){var xe,te,oe,ce,$,qe,He,Oe;for(qe=He=1/0,xe=Y;xe<=Z-Y;xe++)ce=et(te=Te(j,0,xe,this.toBBox),oe=Te(j,xe,Z,this.toBBox)),$=ot(te)+ot(oe),ce<qe?(qe=ce,Oe=xe,He=$<He?$:He):ce===qe&&$<He&&(He=$,Oe=xe);return Oe},_chooseSplitAxis:function(j,Y,Z){var xe=j.leaf?this.compareMinX:Ve,te=j.leaf?this.compareMinY:Je;this._allDistMargin(j,Y,Z,xe)<this._allDistMargin(j,Y,Z,te)&&j.children.sort(xe)},_allDistMargin:function(j,Y,Z,xe){j.children.sort(xe);var qe,He,te=this.toBBox,oe=Te(j,0,Y,te),ce=Te(j,Z-Y,Z,te),$=Tt(oe)+Tt(ce);for(qe=Y;qe<Z-Y;qe++)He=j.children[qe],_e(oe,j.leaf?te(He):He),$+=Tt(oe);for(qe=Z-Y-1;qe>=Y;qe--)He=j.children[qe],_e(ce,j.leaf?te(He):He),$+=Tt(ce);return $},_adjustParentBBoxes:function(j,Y,Z){for(var xe=Z;xe>=0;xe--)_e(Y[xe],j)},_condense:function(j){for(var Z,Y=j.length-1;Y>=0;Y--)0===j[Y].children.length?Y>0?(Z=j[Y-1].children).splice(Z.indexOf(j[Y]),1):this.clear():Ie(j[Y],this.toBBox)},_initFormat:function(j){var Y=["return a"," - b",";"];this.compareMinX=new Function("a","b",Y.join(j[0])),this.compareMinY=new Function("a","b",Y.join(j[1])),this.toBBox=new Function("a","return {minX: a"+j[0]+", minY: a"+j[1]+", maxX: a"+j[2]+", maxY: a"+j[3]+"};")}}},8275:(Et,Ze)=>{"use strict";function ae(He,Oe,he){void 0===he&&(he={});var Ot={type:"Feature"};return(0===he.id||he.id)&&(Ot.id=he.id),he.bbox&&(Ot.bbox=he.bbox),Ot.properties=Oe||{},Ot.geometry=He,Ot}function ve(He,Oe,he){if(void 0===he&&(he={}),!He)throw new Error("coordinates is required");if(!Array.isArray(He))throw new Error("coordinates must be an Array");if(He.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!oe(He[0])||!oe(He[1]))throw new Error("coordinates must contain numbers");return ae({type:"Point",coordinates:He},Oe,he)}function Ie(He,Oe,he){void 0===he&&(he={});for(var Ot=0,bt=He;Ot<bt.length;Ot++){var Le=bt[Ot];if(Le.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var tt=0;tt<Le[Le.length-1].length;tt++)if(Le[Le.length-1][tt]!==Le[0][tt])throw new Error("First and last Position are not equivalent.")}return ae({type:"Polygon",coordinates:He},Oe,he)}function _e(He,Oe,he){if(void 0===he&&(he={}),He.length<2)throw new Error("coordinates must be an array of two or more positions");return ae({type:"LineString",coordinates:He},Oe,he)}function Je(He,Oe){void 0===Oe&&(Oe={});var he={type:"FeatureCollection"};return Oe.id&&(he.id=Oe.id),Oe.bbox&&(he.bbox=Oe.bbox),he.features=He,he}function ot(He,Oe,he){return void 0===he&&(he={}),ae({type:"MultiLineString",coordinates:He},Oe,he)}function Tt(He,Oe,he){return void 0===he&&(he={}),ae({type:"MultiPoint",coordinates:He},Oe,he)}function ht(He,Oe,he){return void 0===he&&(he={}),ae({type:"MultiPolygon",coordinates:He},Oe,he)}function $t(He,Oe){void 0===Oe&&(Oe="kilometers");var he=Ze.factors[Oe];if(!he)throw new Error(Oe+" units is invalid");return He*he}function Qe(He,Oe){void 0===Oe&&(Oe="kilometers");var he=Ze.factors[Oe];if(!he)throw new Error(Oe+" units is invalid");return He/he}function Y(He){return He%(2*Math.PI)*180/Math.PI}function oe(He){return!isNaN(He)&&null!==He&&!Array.isArray(He)}Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.earthRadius=6371008.8,Ze.factors={centimeters:100*Ze.earthRadius,centimetres:100*Ze.earthRadius,degrees:Ze.earthRadius/111325,feet:3.28084*Ze.earthRadius,inches:39.37*Ze.earthRadius,kilometers:Ze.earthRadius/1e3,kilometres:Ze.earthRadius/1e3,meters:Ze.earthRadius,metres:Ze.earthRadius,miles:Ze.earthRadius/1609.344,millimeters:1e3*Ze.earthRadius,millimetres:1e3*Ze.earthRadius,nauticalmiles:Ze.earthRadius/1852,radians:1,yards:1.0936*Ze.earthRadius},Ze.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Ze.earthRadius,yards:1.0936133},Ze.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},Ze.feature=ae,Ze.geometry=function ee(He,Oe,he){switch(void 0===he&&(he={}),He){case"Point":return ve(Oe).geometry;case"LineString":return _e(Oe).geometry;case"Polygon":return Ie(Oe).geometry;case"MultiPoint":return Tt(Oe).geometry;case"MultiLineString":return ot(Oe).geometry;case"MultiPolygon":return ht(Oe).geometry;default:throw new Error(He+" is invalid")}},Ze.point=ve,Ze.points=function Be(He,Oe,he){return void 0===he&&(he={}),Je(He.map(function(Ot){return ve(Ot,Oe)}),he)},Ze.polygon=Ie,Ze.polygons=function Te(He,Oe,he){return void 0===he&&(he={}),Je(He.map(function(Ot){return Ie(Ot,Oe)}),he)},Ze.lineString=_e,Ze.lineStrings=function Ve(He,Oe,he){return void 0===he&&(he={}),Je(He.map(function(Ot){return _e(Ot,Oe)}),he)},Ze.featureCollection=Je,Ze.multiLineString=ot,Ze.multiPoint=Tt,Ze.multiPolygon=ht,Ze.geometryCollection=function et(He,Oe,he){return void 0===he&&(he={}),ae({type:"GeometryCollection",geometries:He},Oe,he)},Ze.round=function ct(He,Oe){if(void 0===Oe&&(Oe=0),Oe&&!(Oe>=0))throw new Error("precision must be a positive number");var he=Math.pow(10,Oe||0);return Math.round(He*he)/he},Ze.radiansToLength=$t,Ze.lengthToRadians=Qe,Ze.lengthToDegrees=function Ke(He,Oe){return Y(Qe(He,Oe))},Ze.bearingToAzimuth=function j(He){var Oe=He%360;return Oe<0&&(Oe+=360),Oe},Ze.radiansToDegrees=Y,Ze.degreesToRadians=function Z(He){return He%360*Math.PI/180},Ze.convertLength=function xe(He,Oe,he){if(void 0===Oe&&(Oe="kilometers"),void 0===he&&(he="kilometers"),!(He>=0))throw new Error("length must be a positive number");return $t(Qe(He,Oe),he)},Ze.convertArea=function te(He,Oe,he){if(void 0===Oe&&(Oe="meters"),void 0===he&&(he="kilometers"),!(He>=0))throw new Error("area must be a positive number");var Ot=Ze.areaFactors[Oe];if(!Ot)throw new Error("invalid original units");var bt=Ze.areaFactors[he];if(!bt)throw new Error("invalid final units");return He/Ot*bt},Ze.isNumber=oe,Ze.isObject=function ce(He){return!!He&&He.constructor===Object},Ze.validateBBox=function $(He){if(!He)throw new Error("bbox is required");if(!Array.isArray(He))throw new Error("bbox must be an Array");if(4!==He.length&&6!==He.length)throw new Error("bbox must be an Array of 4 or 6 numbers");He.forEach(function(Oe){if(!oe(Oe))throw new Error("bbox must only contain numbers")})},Ze.validateId=function qe(He){if(!He)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof He))throw new Error("id must be a number or a string")}},3269:(Et,Ze,ae)=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});var ee=ae(8275);function ve(Z,xe,te){if(null!==Z)for(var oe,ce,$,qe,He,Oe,he,Le,Ot=0,bt=0,tt=Z.type,Se="FeatureCollection"===tt,Re="Feature"===tt,We=Se?Z.features.length:1,me=0;me<We;me++){He=(Le=!!(he=Se?Z.features[me].geometry:Re?Z.geometry:Z)&&"GeometryCollection"===he.type)?he.geometries.length:1;for(var mt=0;mt<He;mt++){var $e=0,Wt=0;if(null!==(qe=Le?he.geometries[mt]:he)){Oe=qe.coordinates;var dt=qe.type;switch(Ot=!te||"Polygon"!==dt&&"MultiPolygon"!==dt?0:1,dt){case null:break;case"Point":if(!1===xe(Oe,bt,me,$e,Wt))return!1;bt++,$e++;break;case"LineString":case"MultiPoint":for(oe=0;oe<Oe.length;oe++){if(!1===xe(Oe[oe],bt,me,$e,Wt))return!1;bt++,"MultiPoint"===dt&&$e++}"LineString"===dt&&$e++;break;case"Polygon":case"MultiLineString":for(oe=0;oe<Oe.length;oe++){for(ce=0;ce<Oe[oe].length-Ot;ce++){if(!1===xe(Oe[oe][ce],bt,me,$e,Wt))return!1;bt++}"MultiLineString"===dt&&$e++,"Polygon"===dt&&Wt++}"Polygon"===dt&&$e++;break;case"MultiPolygon":for(oe=0;oe<Oe.length;oe++){for(Wt=0,ce=0;ce<Oe[oe].length;ce++){for($=0;$<Oe[oe][ce].length-Ot;$++){if(!1===xe(Oe[oe][ce][$],bt,me,$e,Wt))return!1;bt++}Wt++}$e++}break;case"GeometryCollection":for(oe=0;oe<qe.geometries.length;oe++)if(!1===ve(qe.geometries[oe],xe,te))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ie(Z,xe){var te;switch(Z.type){case"FeatureCollection":for(te=0;te<Z.features.length&&!1!==xe(Z.features[te].properties,te);te++);break;case"Feature":xe(Z.properties,0)}}function _e(Z,xe){if("Feature"===Z.type)xe(Z,0);else if("FeatureCollection"===Z.type)for(var te=0;te<Z.features.length&&!1!==xe(Z.features[te],te);te++);}function ot(Z,xe){var te,oe,ce,$,qe,He,Oe,he,Ot,bt,Le=0,tt="FeatureCollection"===Z.type,Se="Feature"===Z.type,Re=tt?Z.features.length:1;for(te=0;te<Re;te++){for(he=tt?Z.features[te].properties:Se?Z.properties:{},Ot=tt?Z.features[te].bbox:Se?Z.bbox:void 0,bt=tt?Z.features[te].id:Se?Z.id:void 0,qe=(Oe=!!(He=tt?Z.features[te].geometry:Se?Z.geometry:Z)&&"GeometryCollection"===He.type)?He.geometries.length:1,ce=0;ce<qe;ce++)if(null!==($=Oe?He.geometries[ce]:He))switch($.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===xe($,Le,he,Ot,bt))return!1;break;case"GeometryCollection":for(oe=0;oe<$.geometries.length;oe++)if(!1===xe($.geometries[oe],Le,he,Ot,bt))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===xe(null,Le,he,Ot,bt))return!1;Le++}}function ht(Z,xe){ot(Z,function(te,oe,ce,$,qe){var Oe,He=null===te?null:te.type;switch(He){case null:case"Point":case"LineString":case"Polygon":return!1!==xe(ee.feature(te,ce,{bbox:$,id:qe}),oe,0)&&void 0}switch(He){case"MultiPoint":Oe="Point";break;case"MultiLineString":Oe="LineString";break;case"MultiPolygon":Oe="Polygon"}for(var he=0;he<te.coordinates.length;he++)if(!1===xe(ee.feature({type:Oe,coordinates:te.coordinates[he]},ce),oe,he))return!1})}function ct(Z,xe){ht(Z,function(te,oe,ce){var $=0;if(te.geometry){var qe=te.geometry.type;if("Point"!==qe&&"MultiPoint"!==qe){var He,Oe=0,he=0,Ot=0;if(!1===ve(te,function(bt,Le,tt,Se,Re){if(void 0===He||oe>Oe||Se>he||Re>Ot)return He=bt,Oe=oe,he=Se,Ot=Re,void($=0);var We=ee.lineString([He,bt],te.properties);if(!1===xe(We,oe,ce,Re,$))return!1;$++,He=bt}))return!1}}})}function Qe(Z,xe){if(!Z)throw new Error("geojson is required");ht(Z,function(te,oe,ce){if(null!==te.geometry){var qe=te.geometry.coordinates;switch(te.geometry.type){case"LineString":if(!1===xe(te,oe,ce,0,0))return!1;break;case"Polygon":for(var He=0;He<qe.length;He++)if(!1===xe(ee.lineString(qe[He],te.properties),oe,ce,He))return!1}}})}Ze.coordAll=function Je(Z){var xe=[];return ve(Z,function(te){xe.push(te)}),xe},Ze.coordEach=ve,Ze.coordReduce=function Be(Z,xe,te,oe){var ce=te;return ve(Z,function($,qe,He,Oe,he){ce=0===qe&&void 0===te?$:xe(ce,$,qe,He,Oe,he)},oe),ce},Ze.featureEach=_e,Ze.featureReduce=function Ve(Z,xe,te){var oe=te;return _e(Z,function(ce,$){oe=0===$&&void 0===te?ce:xe(oe,ce,$)}),oe},Ze.findPoint=function Y(Z,xe){if(!ee.isObject(xe=xe||{}))throw new Error("options is invalid");var He,te=xe.featureIndex||0,oe=xe.multiFeatureIndex||0,ce=xe.geometryIndex||0,$=xe.coordIndex||0,qe=xe.properties;switch(Z.type){case"FeatureCollection":te<0&&(te=Z.features.length+te),qe=qe||Z.features[te].properties,He=Z.features[te].geometry;break;case"Feature":qe=qe||Z.properties,He=Z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":He=Z;break;default:throw new Error("geojson is invalid")}if(null===He)return null;var Oe=He.coordinates;switch(He.type){case"Point":return ee.point(Oe,qe,xe);case"MultiPoint":return oe<0&&(oe=Oe.length+oe),ee.point(Oe[oe],qe,xe);case"LineString":return $<0&&($=Oe.length+$),ee.point(Oe[$],qe,xe);case"Polygon":return ce<0&&(ce=Oe.length+ce),$<0&&($=Oe[ce].length+$),ee.point(Oe[ce][$],qe,xe);case"MultiLineString":return oe<0&&(oe=Oe.length+oe),$<0&&($=Oe[oe].length+$),ee.point(Oe[oe][$],qe,xe);case"MultiPolygon":return oe<0&&(oe=Oe.length+oe),ce<0&&(ce=Oe[oe].length+ce),$<0&&($=Oe[oe][ce].length-$),ee.point(Oe[oe][ce][$],qe,xe)}throw new Error("geojson is invalid")},Ze.findSegment=function j(Z,xe){if(!ee.isObject(xe=xe||{}))throw new Error("options is invalid");var He,te=xe.featureIndex||0,oe=xe.multiFeatureIndex||0,ce=xe.geometryIndex||0,$=xe.segmentIndex||0,qe=xe.properties;switch(Z.type){case"FeatureCollection":te<0&&(te=Z.features.length+te),qe=qe||Z.features[te].properties,He=Z.features[te].geometry;break;case"Feature":qe=qe||Z.properties,He=Z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":He=Z;break;default:throw new Error("geojson is invalid")}if(null===He)return null;var Oe=He.coordinates;switch(He.type){case"Point":case"MultiPoint":return null;case"LineString":return $<0&&($=Oe.length+$-1),ee.lineString([Oe[$],Oe[$+1]],qe,xe);case"Polygon":return ce<0&&(ce=Oe.length+ce),$<0&&($=Oe[ce].length+$-1),ee.lineString([Oe[ce][$],Oe[ce][$+1]],qe,xe);case"MultiLineString":return oe<0&&(oe=Oe.length+oe),$<0&&($=Oe[oe].length+$-1),ee.lineString([Oe[oe][$],Oe[oe][$+1]],qe,xe);case"MultiPolygon":return oe<0&&(oe=Oe.length+oe),ce<0&&(ce=Oe[oe].length+ce),$<0&&($=Oe[oe][ce].length-$-1),ee.lineString([Oe[oe][ce][$],Oe[oe][ce][$+1]],qe,xe)}throw new Error("geojson is invalid")},Ze.flattenEach=ht,Ze.flattenReduce=function et(Z,xe,te){var oe=te;return ht(Z,function(ce,$,qe){oe=0===$&&0===qe&&void 0===te?ce:xe(oe,ce,$,qe)}),oe},Ze.geomEach=ot,Ze.geomReduce=function Tt(Z,xe,te){var oe=te;return ot(Z,function(ce,$,qe,He,Oe){oe=0===$&&void 0===te?ce:xe(oe,ce,$,qe,He,Oe)}),oe},Ze.lineEach=Qe,Ze.lineReduce=function Ke(Z,xe,te){var oe=te;return Qe(Z,function(ce,$,qe,He){oe=0===$&&void 0===te?ce:xe(oe,ce,$,qe,He)}),oe},Ze.propEach=Ie,Ze.propReduce=function Te(Z,xe,te){var oe=te;return Ie(Z,function(ce,$){oe=0===$&&void 0===te?ce:xe(oe,ce,$)}),oe},Ze.segmentEach=ct,Ze.segmentReduce=function $t(Z,xe,te){var oe=te,ce=!1;return ct(Z,function($,qe,He,Oe,he){oe=!1===ce&&void 0===te?$:xe(oe,$,qe,He,Oe,he),ce=!0}),oe}},545:function(Et){Et.exports=function(){"use strict";function ae(Be,Ie,Te,_e,Ve){for(;_e>Te;){if(_e-Te>600){var Je=_e-Te+1,ot=Ie-Te+1,Tt=Math.log(Je),ht=.5*Math.exp(2*Tt/3),et=.5*Math.sqrt(Tt*ht*(Je-ht)/Je)*(ot-Je/2<0?-1:1);ae(Be,Ie,Math.max(Te,Math.floor(Ie-ot*ht/Je+et)),Math.min(_e,Math.floor(Ie+(Je-ot)*ht/Je+et)),Ve)}var Qe=Be[Ie],Ke=Te,j=_e;for(ee(Be,Te,Ie),Ve(Be[_e],Qe)>0&&ee(Be,Te,_e);Ke<j;){for(ee(Be,Ke,j),Ke++,j--;Ve(Be[Ke],Qe)<0;)Ke++;for(;Ve(Be[j],Qe)>0;)j--}0===Ve(Be[Te],Qe)?ee(Be,Te,j):ee(Be,++j,_e),j<=Ie&&(Te=j+1),Ie<=j&&(_e=j-1)}}function ee(Be,Ie,Te){var _e=Be[Ie];Be[Ie]=Be[Te],Be[Te]=_e}function ve(Be,Ie){return Be<Ie?-1:Be>Ie?1:0}return function Ze(Be,Ie,Te,_e,Ve){ae(Be,Ie,Te||0,_e||Be.length-1,Ve||ve)}}()},3237:(Et,Ze,ae)=>{"use strict";Et.exports=ve,Et.exports.default=ve;var ee=ae(545);function ve(j,Y){if(!(this instanceof ve))return new ve(j,Y);this._maxEntries=Math.max(4,j||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),Y&&this._initFormat(Y),this.clear()}function Be(j,Y,Z){if(!Z)return Y.indexOf(j);for(var xe=0;xe<Y.length;xe++)if(Z(j,Y[xe]))return xe;return-1}function Ie(j,Y){Te(j,0,j.children.length,Y,j)}function Te(j,Y,Z,xe,te){te||(te=Qe(null)),te.minX=1/0,te.minY=1/0,te.maxX=-1/0,te.maxY=-1/0;for(var ce,oe=Y;oe<Z;oe++)ce=j.children[oe],_e(te,j.leaf?xe(ce):ce);return te}function _e(j,Y){return j.minX=Math.min(j.minX,Y.minX),j.minY=Math.min(j.minY,Y.minY),j.maxX=Math.max(j.maxX,Y.maxX),j.maxY=Math.max(j.maxY,Y.maxY),j}function Ve(j,Y){return j.minX-Y.minX}function Je(j,Y){return j.minY-Y.minY}function ot(j){return(j.maxX-j.minX)*(j.maxY-j.minY)}function Tt(j){return j.maxX-j.minX+(j.maxY-j.minY)}function ht(j,Y){return(Math.max(Y.maxX,j.maxX)-Math.min(Y.minX,j.minX))*(Math.max(Y.maxY,j.maxY)-Math.min(Y.minY,j.minY))}function et(j,Y){var Z=Math.max(j.minX,Y.minX),xe=Math.max(j.minY,Y.minY),te=Math.min(j.maxX,Y.maxX),oe=Math.min(j.maxY,Y.maxY);return Math.max(0,te-Z)*Math.max(0,oe-xe)}function ct(j,Y){return j.minX<=Y.minX&&j.minY<=Y.minY&&Y.maxX<=j.maxX&&Y.maxY<=j.maxY}function $t(j,Y){return Y.minX<=j.maxX&&Y.minY<=j.maxY&&Y.maxX>=j.minX&&Y.maxY>=j.minY}function Qe(j){return{children:j,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ke(j,Y,Z,xe,te){for(var ce,oe=[Y,Z];oe.length;)!((Z=oe.pop())-(Y=oe.pop())<=xe)&&(ce=Y+Math.ceil((Z-Y)/xe/2)*xe,ee(j,ce,Y,Z,te),oe.push(Y,ce,ce,Z))}ve.prototype={all:function(){return this._all(this.data,[])},search:function(j){var Y=this.data,Z=[],xe=this.toBBox;if(!$t(j,Y))return Z;for(var oe,ce,$,qe,te=[];Y;){for(oe=0,ce=Y.children.length;oe<ce;oe++)$=Y.children[oe],$t(j,qe=Y.leaf?xe($):$)&&(Y.leaf?Z.push($):ct(j,qe)?this._all($,Z):te.push($));Y=te.pop()}return Z},collides:function(j){var Y=this.data,Z=this.toBBox;if(!$t(j,Y))return!1;for(var te,oe,ce,$,xe=[];Y;){for(te=0,oe=Y.children.length;te<oe;te++)if(ce=Y.children[te],$t(j,$=Y.leaf?Z(ce):ce)){if(Y.leaf||ct(j,$))return!0;xe.push(ce)}Y=xe.pop()}return!1},load:function(j){if(!j||!j.length)return this;if(j.length<this._minEntries){for(var Y=0,Z=j.length;Y<Z;Y++)this.insert(j[Y]);return this}var xe=this._build(j.slice(),0,j.length-1,0);if(this.data.children.length)if(this.data.height===xe.height)this._splitRoot(this.data,xe);else{if(this.data.height<xe.height){var te=this.data;this.data=xe,xe=te}this._insert(xe,this.data.height-xe.height-1,!0)}else this.data=xe;return this},insert:function(j){return j&&this._insert(j,this.data.height-1),this},clear:function(){return this.data=Qe([]),this},remove:function(j,Y){if(!j)return this;for(var ce,$,qe,He,Z=this.data,xe=this.toBBox(j),te=[],oe=[];Z||te.length;){if(Z||(Z=te.pop(),$=te[te.length-1],ce=oe.pop(),He=!0),Z.leaf&&-1!==(qe=Be(j,Z.children,Y)))return Z.children.splice(qe,1),te.push(Z),this._condense(te),this;He||Z.leaf||!ct(Z,xe)?$?(ce++,Z=$.children[ce],He=!1):Z=null:(te.push(Z),oe.push(ce),ce=0,$=Z,Z=Z.children[0])}return this},toBBox:function(j){return j},compareMinX:Ve,compareMinY:Je,toJSON:function(){return this.data},fromJSON:function(j){return this.data=j,this},_all:function(j,Y){for(var Z=[];j;)j.leaf?Y.push.apply(Y,j.children):Z.push.apply(Z,j.children),j=Z.pop();return Y},_build:function(j,Y,Z,xe){var ce,te=Z-Y+1,oe=this._maxEntries;if(te<=oe)return Ie(ce=Qe(j.slice(Y,Z+1)),this.toBBox),ce;xe||(xe=Math.ceil(Math.log(te)/Math.log(oe)),oe=Math.ceil(te/Math.pow(oe,xe-1))),(ce=Qe([])).leaf=!1,ce.height=xe;var He,Oe,he,Ot,$=Math.ceil(te/oe),qe=$*Math.ceil(Math.sqrt(oe));for(Ke(j,Y,Z,qe,this.compareMinX),He=Y;He<=Z;He+=qe)for(Ke(j,He,he=Math.min(He+qe-1,Z),$,this.compareMinY),Oe=He;Oe<=he;Oe+=$)Ot=Math.min(Oe+$-1,he),ce.children.push(this._build(j,Oe,Ot,xe-1));return Ie(ce,this.toBBox),ce},_chooseSubtree:function(j,Y,Z,xe){for(var te,oe,ce,$,qe,He,Oe,he;xe.push(Y),!Y.leaf&&xe.length-1!==Z;){for(Oe=he=1/0,te=0,oe=Y.children.length;te<oe;te++)qe=ot(ce=Y.children[te]),(He=ht(j,ce)-qe)<he?(he=He,Oe=qe<Oe?qe:Oe,$=ce):He===he&&qe<Oe&&(Oe=qe,$=ce);Y=$||Y.children[0]}return Y},_insert:function(j,Y,Z){var te=Z?j:(0,this.toBBox)(j),oe=[],ce=this._chooseSubtree(te,this.data,Y,oe);for(ce.children.push(j),_e(ce,te);Y>=0&&oe[Y].children.length>this._maxEntries;)this._split(oe,Y),Y--;this._adjustParentBBoxes(te,oe,Y)},_split:function(j,Y){var Z=j[Y],xe=Z.children.length,te=this._minEntries;this._chooseSplitAxis(Z,te,xe);var oe=this._chooseSplitIndex(Z,te,xe),ce=Qe(Z.children.splice(oe,Z.children.length-oe));ce.height=Z.height,ce.leaf=Z.leaf,Ie(Z,this.toBBox),Ie(ce,this.toBBox),Y?j[Y-1].children.push(ce):this._splitRoot(Z,ce)},_splitRoot:function(j,Y){this.data=Qe([j,Y]),this.data.height=j.height+1,this.data.leaf=!1,Ie(this.data,this.toBBox)},_chooseSplitIndex:function(j,Y,Z){var xe,te,oe,ce,$,qe,He,Oe;for(qe=He=1/0,xe=Y;xe<=Z-Y;xe++)ce=et(te=Te(j,0,xe,this.toBBox),oe=Te(j,xe,Z,this.toBBox)),$=ot(te)+ot(oe),ce<qe?(qe=ce,Oe=xe,He=$<He?$:He):ce===qe&&$<He&&(He=$,Oe=xe);return Oe},_chooseSplitAxis:function(j,Y,Z){var xe=j.leaf?this.compareMinX:Ve,te=j.leaf?this.compareMinY:Je;this._allDistMargin(j,Y,Z,xe)<this._allDistMargin(j,Y,Z,te)&&j.children.sort(xe)},_allDistMargin:function(j,Y,Z,xe){j.children.sort(xe);var qe,He,te=this.toBBox,oe=Te(j,0,Y,te),ce=Te(j,Z-Y,Z,te),$=Tt(oe)+Tt(ce);for(qe=Y;qe<Z-Y;qe++)He=j.children[qe],_e(oe,j.leaf?te(He):He),$+=Tt(oe);for(qe=Z-Y-1;qe>=Y;qe--)He=j.children[qe],_e(ce,j.leaf?te(He):He),$+=Tt(ce);return $},_adjustParentBBoxes:function(j,Y,Z){for(var xe=Z;xe>=0;xe--)_e(Y[xe],j)},_condense:function(j){for(var Z,Y=j.length-1;Y>=0;Y--)0===j[Y].children.length?Y>0?(Z=j[Y-1].children).splice(Z.indexOf(j[Y]),1):this.clear():Ie(j[Y],this.toBBox)},_initFormat:function(j){var Y=["return a"," - b",";"];this.compareMinX=new Function("a","b",Y.join(j[0])),this.compareMinY=new Function("a","b",Y.join(j[1])),this.toBBox=new Function("a","return {minX: a"+j[0]+", minY: a"+j[1]+", maxX: a"+j[2]+", maxY: a"+j[3]+"};")}}},5834:(Et,Ze,ae)=>{"use strict";var ee=ae(5203),ve=ae(5685),Be=ve(ee("String.prototype.indexOf"));Et.exports=function(Te,_e){var Ve=ee(Te,!!_e);return"function"==typeof Ve&&Be(Te,".prototype.")>-1?ve(Ve):Ve}},5685:(Et,Ze,ae)=>{"use strict";var ee=ae(4444),ve=ae(5203),Be=ve("%Function.prototype.apply%"),Ie=ve("%Function.prototype.call%"),Te=ve("%Reflect.apply%",!0)||ee.call(Ie,Be),_e=ve("%Object.getOwnPropertyDescriptor%",!0),Ve=ve("%Object.defineProperty%",!0),Je=ve("%Math.max%");if(Ve)try{Ve({},"a",{value:1})}catch{Ve=null}Et.exports=function(ht){var et=Te(ee,Ie,arguments);if(_e&&Ve){var ct=_e(et,"length");ct.configurable&&Ve(et,"length",{value:1+Je(0,ht.length-(arguments.length-1))})}return et};var ot=function(){return Te(ee,Be,arguments)};Ve?Ve(Et.exports,"apply",{value:ot}):Et.exports.apply=ot},7525:Et=>{Et.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},4302:(Et,Ze,ae)=>{"use strict";var ee=ae(7525),ve=ae(2993);function Ie(Ve){return[Ve[0]/255,Ve[1]/255,Ve[2]/255,Ve[3]]}function Te(Ve){for(var Je,ot="#",Tt=0;Tt<3;++Tt)ot+=("00"+(Je=(Je=Ve[Tt]).toString(16))).substr(Je.length);return ot}function _e(Ve){return"rgba("+Ve.join(",")+")"}Et.exports=function Be(Ve){var Je,ot,Tt,ht,et,ct,$t,Qe,Ke,j;if(Ve||(Ve={}),Qe=(Ve.nshades||72)-1,$t=Ve.format||"hex",(ct=Ve.colormap)||(ct="jet"),"string"==typeof ct){if(ct=ct.toLowerCase(),!ee[ct])throw Error(ct+" not a supported colorscale");et=ee[ct]}else{if(!Array.isArray(ct))throw Error("unsupported colormap option",ct);et=ct.slice()}if(et.length>Qe+1)throw new Error(ct+" map requires nshades to be at least size "+et.length);Ke=Array.isArray(Ve.alpha)?2!==Ve.alpha.length?[1,1]:Ve.alpha.slice():"number"==typeof Ve.alpha?[Ve.alpha,Ve.alpha]:[1,1],Je=et.map(function(oe){return Math.round(oe.index*Qe)}),Ke[0]=Math.min(Math.max(Ke[0],0),1),Ke[1]=Math.min(Math.max(Ke[1],0),1);var Y=et.map(function(oe,ce){var $=et[ce].index,qe=et[ce].rgb.slice();return 4===qe.length&&qe[3]>=0&&qe[3]<=1||(qe[3]=Ke[0]+(Ke[1]-Ke[0])*$),qe}),Z=[];for(j=0;j<Je.length-1;++j){ht=Je[j+1]-Je[j],ot=Y[j],Tt=Y[j+1];for(var xe=0;xe<ht;xe++){var te=xe/ht;Z.push([Math.round(ve(ot[0],Tt[0],te)),Math.round(ve(ot[1],Tt[1],te)),Math.round(ve(ot[2],Tt[2],te)),ve(ot[3],Tt[3],te)])}}return Z.push(et[et.length-1].rgb.concat(Ke[1])),"hex"===$t?Z=Z.map(Te):"rgbaString"===$t?Z=Z.map(_e):"float"===$t&&(Z=Z.map(Ie)),Z}},1335:(Et,Ze,ae)=>{"use strict";var ee=ae(2402),ve=ae(7253),Be=ae(3870),Ie=ae(5485).orient2d;function Te(te,oe,ce){oe=Math.max(0,void 0===oe?2:oe),ce=ce||0;var $=function $t(te){for(var oe=te[0],ce=te[0],$=te[0],qe=te[0],He=0;He<te.length;He++){var Oe=te[He];Oe[0]<oe[0]&&(oe=Oe),Oe[0]>$[0]&&($=Oe),Oe[1]<ce[1]&&(ce=Oe),Oe[1]>qe[1]&&(qe=Oe)}var he=[oe,ce,$,qe],Ot=he.slice();for(He=0;He<te.length;He++)Be(te[He],he)||Ot.push(te[He]);return function xe(te){te.sort(Z);for(var oe=[],ce=0;ce<te.length;ce++){for(;oe.length>=2&&ht(oe[oe.length-2],oe[oe.length-1],te[ce])<=0;)oe.pop();oe.push(te[ce])}for(var $=[],qe=te.length-1;qe>=0;qe--){for(;$.length>=2&&ht($[$.length-2],$[$.length-1],te[qe])<=0;)$.pop();$.push(te[qe])}return $.pop(),oe.pop(),oe.concat($)}(Ot)}(te),qe=new ee(16);qe.toBBox=function(Wt){return{minX:Wt[0],minY:Wt[1],maxX:Wt[0],maxY:Wt[1]}},qe.compareMinX=function(Wt,dt){return Wt[0]-dt[0]},qe.compareMinY=function(Wt,dt){return Wt[1]-dt[1]},qe.load(te);for(var he,He=[],Oe=0;Oe<$.length;Oe++){var Ot=$[Oe];qe.remove(Ot),he=Qe(Ot,he),He.push(he)}var bt=new ee(16);for(Oe=0;Oe<He.length;Oe++)bt.insert(ct(He[Oe]));for(var Le=oe*oe,tt=ce*ce;He.length;){var Se=He.shift(),Re=Se.p,We=Se.next.p,me=Ke(Re,We);if(!(me<tt)){var mt=me/Le;(Ot=_e(qe,Se.prev.p,Re,We,Se.next.next.p,mt,bt))&&Math.min(Ke(Ot,Re),Ke(Ot,We))<=mt&&(He.push(Se),He.push(Qe(Ot,Se)),qe.remove(Ot),bt.remove(Se),bt.insert(ct(Se)),bt.insert(ct(Se.next)))}}Se=he;var $e=[];do{$e.push(Se.p),Se=Se.next}while(Se!==he);return $e.push(Se.p),$e}function _e(te,oe,ce,$,qe,He,Oe){for(var he=new ve([],Ve),Ot=te.data;Ot;){for(var bt=0;bt<Ot.children.length;bt++){var Le=Ot.children[bt],tt=Ot.leaf?j(Le,ce,$):Je(ce,$,Le);tt>He||he.push({node:Le,dist:tt})}for(;he.length&&!he.peek().node.children;){var Se=he.pop(),Re=Se.node,We=j(Re,oe,ce),me=j(Re,$,qe);if(Se.dist<We&&Se.dist<me&&Tt(ce,Re,Oe)&&Tt($,Re,Oe))return Re}(Ot=he.pop())&&(Ot=Ot.node)}return null}function Ve(te,oe){return te.dist-oe.dist}function Je(te,oe,ce){if(ot(te,ce)||ot(oe,ce))return 0;var $=Y(te[0],te[1],oe[0],oe[1],ce.minX,ce.minY,ce.maxX,ce.minY);if(0===$)return 0;var qe=Y(te[0],te[1],oe[0],oe[1],ce.minX,ce.minY,ce.minX,ce.maxY);if(0===qe)return 0;var He=Y(te[0],te[1],oe[0],oe[1],ce.maxX,ce.minY,ce.maxX,ce.maxY);if(0===He)return 0;var Oe=Y(te[0],te[1],oe[0],oe[1],ce.minX,ce.maxY,ce.maxX,ce.maxY);return 0===Oe?0:Math.min($,qe,He,Oe)}function ot(te,oe){return te[0]>=oe.minX&&te[0]<=oe.maxX&&te[1]>=oe.minY&&te[1]<=oe.maxY}function Tt(te,oe,ce){for(var $=Math.min(te[0],oe[0]),qe=Math.min(te[1],oe[1]),He=Math.max(te[0],oe[0]),Oe=Math.max(te[1],oe[1]),he=ce.search({minX:$,minY:qe,maxX:He,maxY:Oe}),Ot=0;Ot<he.length;Ot++)if(et(he[Ot].p,he[Ot].next.p,te,oe))return!1;return!0}function ht(te,oe,ce){return Ie(te[0],te[1],oe[0],oe[1],ce[0],ce[1])}function et(te,oe,ce,$){return te!==$&&oe!==ce&&ht(te,oe,ce)>0!=ht(te,oe,$)>0&&ht(ce,$,te)>0!=ht(ce,$,oe)>0}function ct(te){var oe=te.p,ce=te.next.p;return te.minX=Math.min(oe[0],ce[0]),te.minY=Math.min(oe[1],ce[1]),te.maxX=Math.max(oe[0],ce[0]),te.maxY=Math.max(oe[1],ce[1]),te}function Qe(te,oe){var ce={p:te,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return oe?(ce.next=oe.next,ce.prev=oe,oe.next.prev=ce,oe.next=ce):(ce.prev=ce,ce.next=ce),ce}function Ke(te,oe){var ce=te[0]-oe[0],$=te[1]-oe[1];return ce*ce+$*$}function j(te,oe,ce){var $=oe[0],qe=oe[1],He=ce[0]-$,Oe=ce[1]-qe;if(0!==He||0!==Oe){var he=((te[0]-$)*He+(te[1]-qe)*Oe)/(He*He+Oe*Oe);he>1?($=ce[0],qe=ce[1]):he>0&&($+=He*he,qe+=Oe*he)}return(He=te[0]-$)*He+(Oe=te[1]-qe)*Oe}function Y(te,oe,ce,$,qe,He,Oe,he){var sn,on,On,Ut,Ot=ce-te,bt=$-oe,Le=Oe-qe,tt=he-He,Se=te-qe,Re=oe-He,We=Ot*Ot+bt*bt,me=Ot*Le+bt*tt,mt=Le*Le+tt*tt,$e=Ot*Se+bt*Re,Wt=Le*Se+tt*Re,dt=We*mt-me*me,Rn=dt,en=dt;0===dt?(on=0,Rn=1,Ut=Wt,en=mt):(Ut=We*Wt-me*$e,(on=me*Wt-mt*$e)<0?(on=0,Ut=Wt,en=mt):on>Rn&&(on=Rn,Ut=Wt+me,en=mt)),Ut<0?(Ut=0,-$e<0?on=0:-$e>We?on=Rn:(on=-$e,Rn=We)):Ut>en&&(Ut=en,-$e+me<0?on=0:-$e+me>We?on=Rn:(on=-$e+me,Rn=We));var Jn=(1-(On=0===Ut?0:Ut/en))*qe+On*Oe-((1-(sn=0===on?0:on/Rn))*te+sn*ce),it=(1-On)*He+On*he-((1-sn)*oe+sn*$);return Jn*Jn+it*it}function Z(te,oe){return te[0]===oe[0]?te[1]-oe[1]:te[0]-oe[0]}ve.default&&(ve=ve.default),Et.exports=Te,Et.exports.default=Te},5485:function(Et,Ze){!function(ae){"use strict";function Be(ct,$t,Qe,Ke,j){let Y,Z,xe,te,oe=$t[0],ce=Ke[0],$=0,qe=0;ce>oe==ce>-oe?(Y=oe,oe=$t[++$]):(Y=ce,ce=Ke[++qe]);let He=0;if($<ct&&qe<Qe)for(ce>oe==ce>-oe?(xe=Y-((Z=oe+Y)-oe),oe=$t[++$]):(xe=Y-((Z=ce+Y)-ce),ce=Ke[++qe]),Y=Z,0!==xe&&(j[He++]=xe);$<ct&&qe<Qe;)ce>oe==ce>-oe?(xe=Y-((Z=Y+oe)-(te=Z-Y))+(oe-te),oe=$t[++$]):(xe=Y-((Z=Y+ce)-(te=Z-Y))+(ce-te),ce=Ke[++qe]),Y=Z,0!==xe&&(j[He++]=xe);for(;$<ct;)xe=Y-((Z=Y+oe)-(te=Z-Y))+(oe-te),oe=$t[++$],Y=Z,0!==xe&&(j[He++]=xe);for(;qe<Qe;)xe=Y-((Z=Y+ce)-(te=Z-Y))+(ce-te),ce=Ke[++qe],Y=Z,0!==xe&&(j[He++]=xe);return 0===Y&&0!==He||(j[He++]=Y),He}function Ie(ct){return new Float64Array(ct)}const Je=Ie(4),ot=Ie(8),Tt=Ie(12),ht=Ie(16),et=Ie(4);ae.orient2d=function(ct,$t,Qe,Ke,j,Y){const Z=($t-Y)*(Qe-j),xe=(ct-j)*(Ke-Y),te=Z-xe;if(0===Z||0===xe||Z>0!=xe>0)return te;const oe=Math.abs(Z+xe);return Math.abs(te)>=33306690738754716e-32*oe?te:-function(ce,$,qe,He,Oe,he,Ot){let bt,Le,tt,Se,Re,We,me,mt,$e,Wt,dt,sn,on,On,Ut,Rn,en,_r;const Ar=ce-Oe,jr=qe-Oe,Kn=$-he,Jn=He-he;Re=(Ut=(mt=Ar-(me=(We=134217729*Ar)-(We-Ar)))*(Wt=Jn-($e=(We=134217729*Jn)-(We-Jn)))-((On=Ar*Jn)-me*$e-mt*$e-me*Wt))-(dt=Ut-(en=(mt=Kn-(me=(We=134217729*Kn)-(We-Kn)))*(Wt=jr-($e=(We=134217729*jr)-(We-jr)))-((Rn=Kn*jr)-me*$e-mt*$e-me*Wt))),Je[0]=Ut-(dt+Re)+(Re-en),Re=(on=On-((sn=On+dt)-(Re=sn-On))+(dt-Re))-(dt=on-Rn),Je[1]=on-(dt+Re)+(Re-Rn),Re=(_r=sn+dt)-sn,Je[2]=sn-(_r-Re)+(dt-Re),Je[3]=_r;let it=function(nt,xt){let qt=xt[0];for(let tn=1;tn<4;tn++)qt+=xt[tn];return qt}(0,Je),fe=22204460492503146e-32*Ot;if(it>=fe||-it>=fe||(bt=ce-(Ar+(Re=ce-Ar))+(Re-Oe),tt=qe-(jr+(Re=qe-jr))+(Re-Oe),Le=$-(Kn+(Re=$-Kn))+(Re-he),Se=He-(Jn+(Re=He-Jn))+(Re-he),0===bt&&0===Le&&0===tt&&0===Se)||(fe=11093356479670487e-47*Ot+33306690738754706e-32*Math.abs(it),(it+=Ar*Se+Jn*bt-(Kn*tt+jr*Le))>=fe||-it>=fe))return it;Re=(Ut=(mt=bt-(me=(We=134217729*bt)-(We-bt)))*(Wt=Jn-($e=(We=134217729*Jn)-(We-Jn)))-((On=bt*Jn)-me*$e-mt*$e-me*Wt))-(dt=Ut-(en=(mt=Le-(me=(We=134217729*Le)-(We-Le)))*(Wt=jr-($e=(We=134217729*jr)-(We-jr)))-((Rn=Le*jr)-me*$e-mt*$e-me*Wt))),et[0]=Ut-(dt+Re)+(Re-en),Re=(on=On-((sn=On+dt)-(Re=sn-On))+(dt-Re))-(dt=on-Rn),et[1]=on-(dt+Re)+(Re-Rn),Re=(_r=sn+dt)-sn,et[2]=sn-(_r-Re)+(dt-Re),et[3]=_r;const ne=Be(4,Je,4,et,ot);Re=(Ut=(mt=Ar-(me=(We=134217729*Ar)-(We-Ar)))*(Wt=Se-($e=(We=134217729*Se)-(We-Se)))-((On=Ar*Se)-me*$e-mt*$e-me*Wt))-(dt=Ut-(en=(mt=Kn-(me=(We=134217729*Kn)-(We-Kn)))*(Wt=tt-($e=(We=134217729*tt)-(We-tt)))-((Rn=Kn*tt)-me*$e-mt*$e-me*Wt))),et[0]=Ut-(dt+Re)+(Re-en),Re=(on=On-((sn=On+dt)-(Re=sn-On))+(dt-Re))-(dt=on-Rn),et[1]=on-(dt+Re)+(Re-Rn),Re=(_r=sn+dt)-sn,et[2]=sn-(_r-Re)+(dt-Re),et[3]=_r;const ie=Be(ne,ot,4,et,Tt);Re=(Ut=(mt=bt-(me=(We=134217729*bt)-(We-bt)))*(Wt=Se-($e=(We=134217729*Se)-(We-Se)))-((On=bt*Se)-me*$e-mt*$e-me*Wt))-(dt=Ut-(en=(mt=Le-(me=(We=134217729*Le)-(We-Le)))*(Wt=tt-($e=(We=134217729*tt)-(We-tt)))-((Rn=Le*tt)-me*$e-mt*$e-me*Wt))),et[0]=Ut-(dt+Re)+(Re-en),Re=(on=On-((sn=On+dt)-(Re=sn-On))+(dt-Re))-(dt=on-Rn),et[1]=on-(dt+Re)+(Re-Rn),Re=(_r=sn+dt)-sn,et[2]=sn-(_r-Re)+(dt-Re),et[3]=_r;const ke=Be(ie,Tt,4,et,ht);return ht[ke-1]}(ct,$t,Qe,Ke,j,Y,oe)},ae.orient2dfast=function(ct,$t,Qe,Ke,j,Y){return($t-Y)*(Qe-j)-(ct-j)*(Ke-Y)},Object.defineProperty(ae,"__esModule",{value:!0})}(Ze)},6952:(Et,Ze,ae)=>{var ee=ae(1356),ve=ae(3407),Be=ae(2e3),Ie=ae(2342),Te=ae(9235),_e=ae(2374),Ve=Date.prototype.getTime;function ot(et){return null==et}function Tt(et){return!(!et||"object"!=typeof et||"number"!=typeof et.length||"function"!=typeof et.copy||"function"!=typeof et.slice||et.length>0&&"number"!=typeof et[0])}Et.exports=function Je(et,ct,$t){var Qe=$t||{};return!!(Qe.strict?Be(et,ct):et===ct)||(!et||!ct||"object"!=typeof et&&"object"!=typeof ct?Qe.strict?Be(et,ct):et==ct:function ht(et,ct,$t){var Qe,Ke;if(typeof et!=typeof ct||ot(et)||ot(ct)||et.prototype!==ct.prototype||ve(et)!==ve(ct))return!1;var j=Ie(et),Y=Ie(ct);if(j!==Y)return!1;if(j||Y)return et.source===ct.source&&Te(et)===Te(ct);if(_e(et)&&_e(ct))return Ve.call(et)===Ve.call(ct);var Z=Tt(et),xe=Tt(ct);if(Z!==xe)return!1;if(Z||xe){if(et.length!==ct.length)return!1;for(Qe=0;Qe<et.length;Qe++)if(et[Qe]!==ct[Qe])return!1;return!0}if(typeof et!=typeof ct)return!1;try{var te=ee(et),oe=ee(ct)}catch{return!1}if(te.length!==oe.length)return!1;for(te.sort(),oe.sort(),Qe=te.length-1;Qe>=0;Qe--)if(te[Qe]!=oe[Qe])return!1;for(Qe=te.length-1;Qe>=0;Qe--)if(!Je(et[Ke=te[Qe]],ct[Ke],$t))return!1;return!0}(et,ct,Qe))}},2358:(Et,Ze,ae)=>{"use strict";var ee=ae(1356),ve="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Be=Object.prototype.toString,Ie=Array.prototype.concat,Te=Object.defineProperty,Ve=ae(7027)(),Je=Te&&Ve,ot=function(ht,et,ct,$t){et in ht&&(!function(ht){return"function"==typeof ht&&"[object Function]"===Be.call(ht)}($t)||!$t())||(Je?Te(ht,et,{configurable:!0,enumerable:!1,value:ct,writable:!0}):ht[et]=ct)},Tt=function(ht,et){var ct=arguments.length>2?arguments[2]:{},$t=ee(et);ve&&($t=Ie.call($t,Object.getOwnPropertySymbols(et)));for(var Qe=0;Qe<$t.length;Qe+=1)ot(ht,$t[Qe],et[$t[Qe]],ct[$t[Qe]])};Tt.supportsDescriptors=!!Je,Et.exports=Tt},1817:Et=>{function Ze(ae,ee,ve,Be){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(ae,ee,ve,Be)}Ze.prototype.run=function(ae,ee,ve,Be){this._init(ae,ee,ve,Be);for(var Ie=0;Ie<this._datasetLength;Ie++)if(1!==this._visited[Ie]){this._visited[Ie]=1;var Te=this._regionQuery(Ie);if(Te.length<this.minPts)this.noise.push(Ie);else{var _e=this.clusters.length;this.clusters.push([]),this._addToCluster(Ie,_e),this._expandCluster(_e,Te)}}return this.clusters},Ze.prototype._init=function(ae,ee,ve,Be){if(ae){if(!(ae instanceof Array))throw Error("Dataset must be of type array, "+typeof ae+" given");this.dataset=ae,this.clusters=[],this.noise=[],this._datasetLength=ae.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}ee&&(this.epsilon=ee),ve&&(this.minPts=ve),Be&&(this.distance=Be)},Ze.prototype._expandCluster=function(ae,ee){for(var ve=0;ve<ee.length;ve++){var Be=ee[ve];if(1!==this._visited[Be]){this._visited[Be]=1;var Ie=this._regionQuery(Be);Ie.length>=this.minPts&&(ee=this._mergeArrays(ee,Ie))}1!==this._assigned[Be]&&this._addToCluster(Be,ae)}},Ze.prototype._addToCluster=function(ae,ee){this.clusters[ee].push(ae),this._assigned[ae]=1},Ze.prototype._regionQuery=function(ae){for(var ee=[],ve=0;ve<this._datasetLength;ve++)this.distance(this.dataset[ae],this.dataset[ve])<this.epsilon&&ee.push(ve);return ee},Ze.prototype._mergeArrays=function(ae,ee){for(var ve=ee.length,Be=0;Be<ve;Be++){var Ie=ee[Be];ae.indexOf(Ie)<0&&ae.push(Ie)}return ae},Ze.prototype._euclideanDistance=function(ae,ee){for(var ve=0,Be=Math.min(ae.length,ee.length);Be--;)ve+=(ae[Be]-ee[Be])*(ae[Be]-ee[Be]);return Math.sqrt(ve)},Et.exports&&(Et.exports=Ze)},4273:Et=>{function Ze(ae,ee,ve){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(ae,ee,ve)}Ze.prototype.init=function(ae,ee,ve){this.assignments=[],this.centroids=[],typeof ae<"u"&&(this.dataset=ae),typeof ee<"u"&&(this.k=ee),typeof ve<"u"&&(this.distance=ve)},Ze.prototype.run=function(ae,ee){this.init(ae,ee);for(var ve=this.dataset.length,Be=0;Be<this.k;Be++)this.centroids[Be]=this.randomCentroid();for(var Ie=!0;Ie;){Ie=this.assign();for(var Te=0;Te<this.k;Te++){for(var _e=new Array(Tt),Ve=0,Je=0;Je<Tt;Je++)_e[Je]=0;for(var ot=0;ot<ve;ot++){var Tt=this.dataset[ot].length;if(Te===this.assignments[ot]){for(Je=0;Je<Tt;Je++)_e[Je]+=this.dataset[ot][Je];Ve++}}if(Ve>0){for(Je=0;Je<Tt;Je++)_e[Je]/=Ve;this.centroids[Te]=_e}else this.centroids[Te]=this.randomCentroid(),Ie=!0}}return this.getClusters()},Ze.prototype.randomCentroid=function(){var ee,ve,ae=this.dataset.length-1;do{ve=Math.round(Math.random()*ae),ee=this.dataset[ve]}while(this.centroids.indexOf(ee)>=0);return ee},Ze.prototype.assign=function(){for(var ve,ae=!1,ee=this.dataset.length,Be=0;Be<ee;Be++)(ve=this.argmin(this.dataset[Be],this.centroids,this.distance))!=this.assignments[Be]&&(this.assignments[Be]=ve,ae=!0);return ae},Ze.prototype.getClusters=function(){for(var ee,ae=new Array(this.k),ve=0;ve<this.assignments.length;ve++)typeof ae[ee=this.assignments[ve]]>"u"&&(ae[ee]=[]),ae[ee].push(ve);return ae},Ze.prototype.argmin=function(ae,ee,ve){for(var _e,Be=Number.MAX_VALUE,Ie=0,Te=ee.length,Ve=0;Ve<Te;Ve++)(_e=ve(ae,ee[Ve]))<Be&&(Be=_e,Ie=Ve);return Ie},Ze.prototype.distance=function(ae,ee){for(var ve=0,Be=Math.min(ae.length,ee.length);Be--;){var Ie=ae[Be]-ee[Be];ve+=Ie*Ie}return Math.sqrt(ve)},Et.exports&&(Et.exports=Ze)},8680:(Et,Ze,ae)=>{if(Et.exports)var ee=ae(8759);function ve(Be,Ie,Te,_e){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(Be,Ie,Te,_e)}ve.prototype.run=function(Be,Ie,Te,_e){this._init(Be,Ie,Te,_e);for(var Ve=0,Je=this.dataset.length;Ve<Je;Ve++)if(1!==this._processed[Ve]){this._processed[Ve]=1,this.clusters.push([Ve]);var ot=this.clusters.length-1;this._orderedList.push(Ve);var Tt=new ee(null,null,"asc"),ht=this._regionQuery(Ve);void 0!==this._distanceToCore(Ve)&&(this._updateQueue(Ve,ht,Tt),this._expandCluster(ot,Tt))}return this.clusters},ve.prototype.getReachabilityPlot=function(){for(var Be=[],Ie=0,Te=this._orderedList.length;Ie<Te;Ie++){var _e=this._orderedList[Ie];Be.push([_e,this._reachability[_e]])}return Be},ve.prototype._init=function(Be,Ie,Te,_e){if(Be){if(!(Be instanceof Array))throw Error("Dataset must be of type array, "+typeof Be+" given");this.dataset=Be,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}Ie&&(this.epsilon=Ie),Te&&(this.minPts=Te),_e&&(this.distance=_e)},ve.prototype._updateQueue=function(Be,Ie,Te){var _e=this;this._coreDistance=this._distanceToCore(Be),Ie.forEach(function(Ve){if(void 0===_e._processed[Ve]){var Je=_e.distance(_e.dataset[Be],_e.dataset[Ve]),ot=Math.max(_e._coreDistance,Je);void 0===_e._reachability[Ve]?(_e._reachability[Ve]=ot,Te.insert(Ve,ot)):ot<_e._reachability[Ve]&&(_e._reachability[Ve]=ot,Te.remove(Ve),Te.insert(Ve,ot))}})},ve.prototype._expandCluster=function(Be,Ie){for(var Te=Ie.getElements(),_e=0,Ve=Te.length;_e<Ve;_e++){var Je=Te[_e];if(void 0===this._processed[Je]){var ot=this._regionQuery(Je);this._processed[Je]=1,this.clusters[Be].push(Je),this._orderedList.push(Je),void 0!==this._distanceToCore(Je)&&(this._updateQueue(Je,ot,Ie),this._expandCluster(Be,Ie))}}},ve.prototype._distanceToCore=function(Be){for(var Ie=this.epsilon,Te=0;Te<Ie;Te++)if(this._regionQuery(Be,Te).length>=this.minPts)return Te},ve.prototype._regionQuery=function(Be,Ie){Ie=Ie||this.epsilon;for(var Te=[],_e=0,Ve=this.dataset.length;_e<Ve;_e++)this.distance(this.dataset[Be],this.dataset[_e])<Ie&&Te.push(_e);return Te},ve.prototype._euclideanDistance=function(Be,Ie){for(var Te=0,_e=Math.min(Be.length,Ie.length);_e--;)Te+=(Be[_e]-Ie[_e])*(Be[_e]-Ie[_e]);return Math.sqrt(Te)},Et.exports&&(Et.exports=ve)},8759:Et=>{function Ze(ae,ee,ve){this._queue=[],this._priorities=[],this._sorting="desc",this._init(ae,ee,ve)}Ze.prototype.insert=function(ae,ee){for(var ve=this._queue.length,Be=ve;Be--;){var Ie=this._priorities[Be];"desc"===this._sorting?ee>Ie&&(ve=Be):ee<Ie&&(ve=Be)}this._insertAt(ae,ee,ve)},Ze.prototype.remove=function(ae){for(var ee=this._queue.length;ee--;)if(ae===this._queue[ee]){this._queue.splice(ee,1),this._priorities.splice(ee,1);break}},Ze.prototype.forEach=function(ae){this._queue.forEach(ae)},Ze.prototype.getElements=function(){return this._queue},Ze.prototype.getElementPriority=function(ae){return this._priorities[ae]},Ze.prototype.getPriorities=function(){return this._priorities},Ze.prototype.getElementsWithPriorities=function(){for(var ae=[],ee=0,ve=this._queue.length;ee<ve;ee++)ae.push([this._queue[ee],this._priorities[ee]]);return ae},Ze.prototype._init=function(ae,ee,ve){if(ae&&ee){if(this._queue=[],this._priorities=[],ae.length!==ee.length)throw new Error("Arrays must have the same length");for(var Be=0;Be<ae.length;Be++)this.insert(ae[Be],ee[Be])}ve&&(this._sorting=ve)},Ze.prototype._insertAt=function(ae,ee,ve){this._queue.length===ve?(this._queue.push(ae),this._priorities.push(ee)):(this._queue.splice(ve,0,ae),this._priorities.splice(ve,0,ee))},Et.exports&&(Et.exports=Ze)},7470:(Et,Ze,ae)=>{Et.exports&&(Et.exports={DBSCAN:ae(1817),KMEANS:ae(4273),OPTICS:ae(8680),PriorityQueue:ae(8759)})},5469:Et=>{"use strict";function Ze(Le,tt,Se){Se=Se||2;var $e,Wt,dt,sn,on,On,Ut,Re=tt&&tt.length,We=Re?tt[0]*Se:Le.length,me=ae(Le,0,We,Se,!0),mt=[];if(!me||me.next===me.prev)return mt;if(Re&&(me=function Ve(Le,tt,Se,Re){var me,mt,dt,We=[];for(me=0,mt=tt.length;me<mt;me++)(dt=ae(Le,tt[me]*Re,me<mt-1?tt[me+1]*Re:Le.length,Re,!1))===dt.next&&(dt.steiner=!0),We.push(Qe(dt));for(We.sort(Je),me=0;me<We.length;me++)Se=ot(We[me],Se);return Se}(Le,tt,me,Se)),Le.length>80*Se){$e=dt=Le[0],Wt=sn=Le[1];for(var Rn=Se;Rn<We;Rn+=Se)(on=Le[Rn])<$e&&($e=on),(On=Le[Rn+1])<Wt&&(Wt=On),on>dt&&(dt=on),On>sn&&(sn=On);Ut=0!==(Ut=Math.max(dt-$e,sn-Wt))?32767/Ut:0}return ve(me,mt,Se,$e,Wt,Ut,0),mt}function ae(Le,tt,Se,Re,We){var me,mt;if(We===bt(Le,tt,Se,Re)>0)for(me=tt;me<Se;me+=Re)mt=Oe(me,Le[me],Le[me+1],mt);else for(me=Se-Re;me>=tt;me-=Re)mt=Oe(me,Le[me],Le[me+1],mt);return mt&&Z(mt,mt.next)&&(he(mt),mt=mt.next),mt}function ee(Le,tt){if(!Le)return Le;tt||(tt=Le);var Re,Se=Le;do{if(Re=!1,Se.steiner||!Z(Se,Se.next)&&0!==Y(Se.prev,Se,Se.next))Se=Se.next;else{if(he(Se),(Se=tt=Se.prev)===Se.next)break;Re=!0}}while(Re||Se!==tt);return tt}function ve(Le,tt,Se,Re,We,me,mt){if(Le){!mt&&me&&function et(Le,tt,Se,Re){var We=Le;do{0===We.z&&(We.z=$t(We.x,We.y,tt,Se,Re)),We.prevZ=We.prev,We.nextZ=We.next,We=We.next}while(We!==Le);We.prevZ.nextZ=null,We.prevZ=null,function ct(Le){var tt,Se,Re,We,me,mt,$e,Wt,dt=1;do{for(Se=Le,Le=null,me=null,mt=0;Se;){for(mt++,Re=Se,$e=0,tt=0;tt<dt&&($e++,Re=Re.nextZ);tt++);for(Wt=dt;$e>0||Wt>0&&Re;)0!==$e&&(0===Wt||!Re||Se.z<=Re.z)?(We=Se,Se=Se.nextZ,$e--):(We=Re,Re=Re.nextZ,Wt--),me?me.nextZ=We:Le=We,We.prevZ=me,me=We;Se=Re}me.nextZ=null,dt*=2}while(mt>1)}(We)}(Le,Re,We,me);for(var Wt,dt,$e=Le;Le.prev!==Le.next;)if(Wt=Le.prev,dt=Le.next,me?Ie(Le,Re,We,me):Be(Le))tt.push(Wt.i/Se|0),tt.push(Le.i/Se|0),tt.push(dt.i/Se|0),he(Le),Le=dt.next,$e=dt.next;else if((Le=dt)===$e){mt?1===mt?ve(Le=Te(ee(Le),tt,Se),tt,Se,Re,We,me,2):2===mt&&_e(Le,tt,Se,Re,We,me):ve(ee(Le),tt,Se,Re,We,me,1);break}}}function Be(Le){var tt=Le.prev,Se=Le,Re=Le.next;if(Y(tt,Se,Re)>=0)return!1;for(var We=tt.x,me=Se.x,mt=Re.x,$e=tt.y,Wt=Se.y,dt=Re.y,sn=We<me?We<mt?We:mt:me<mt?me:mt,on=$e<Wt?$e<dt?$e:dt:Wt<dt?Wt:dt,On=We>me?We>mt?We:mt:me>mt?me:mt,Ut=$e>Wt?$e>dt?$e:dt:Wt>dt?Wt:dt,Rn=Re.next;Rn!==tt;){if(Rn.x>=sn&&Rn.x<=On&&Rn.y>=on&&Rn.y<=Ut&&Ke(We,$e,me,Wt,mt,dt,Rn.x,Rn.y)&&Y(Rn.prev,Rn,Rn.next)>=0)return!1;Rn=Rn.next}return!0}function Ie(Le,tt,Se,Re){var We=Le.prev,me=Le,mt=Le.next;if(Y(We,me,mt)>=0)return!1;for(var $e=We.x,Wt=me.x,dt=mt.x,sn=We.y,on=me.y,On=mt.y,Ut=$e<Wt?$e<dt?$e:dt:Wt<dt?Wt:dt,Rn=sn<on?sn<On?sn:On:on<On?on:On,en=$e>Wt?$e>dt?$e:dt:Wt>dt?Wt:dt,_r=sn>on?sn>On?sn:On:on>On?on:On,Ar=$t(Ut,Rn,tt,Se,Re),jr=$t(en,_r,tt,Se,Re),Kn=Le.prevZ,Jn=Le.nextZ;Kn&&Kn.z>=Ar&&Jn&&Jn.z<=jr;){if(Kn.x>=Ut&&Kn.x<=en&&Kn.y>=Rn&&Kn.y<=_r&&Kn!==We&&Kn!==mt&&Ke($e,sn,Wt,on,dt,On,Kn.x,Kn.y)&&Y(Kn.prev,Kn,Kn.next)>=0||(Kn=Kn.prevZ,Jn.x>=Ut&&Jn.x<=en&&Jn.y>=Rn&&Jn.y<=_r&&Jn!==We&&Jn!==mt&&Ke($e,sn,Wt,on,dt,On,Jn.x,Jn.y)&&Y(Jn.prev,Jn,Jn.next)>=0))return!1;Jn=Jn.nextZ}for(;Kn&&Kn.z>=Ar;){if(Kn.x>=Ut&&Kn.x<=en&&Kn.y>=Rn&&Kn.y<=_r&&Kn!==We&&Kn!==mt&&Ke($e,sn,Wt,on,dt,On,Kn.x,Kn.y)&&Y(Kn.prev,Kn,Kn.next)>=0)return!1;Kn=Kn.prevZ}for(;Jn&&Jn.z<=jr;){if(Jn.x>=Ut&&Jn.x<=en&&Jn.y>=Rn&&Jn.y<=_r&&Jn!==We&&Jn!==mt&&Ke($e,sn,Wt,on,dt,On,Jn.x,Jn.y)&&Y(Jn.prev,Jn,Jn.next)>=0)return!1;Jn=Jn.nextZ}return!0}function Te(Le,tt,Se){var Re=Le;do{var We=Re.prev,me=Re.next.next;!Z(We,me)&&xe(We,Re,Re.next,me)&&$(We,me)&&$(me,We)&&(tt.push(We.i/Se|0),tt.push(Re.i/Se|0),tt.push(me.i/Se|0),he(Re),he(Re.next),Re=Le=me),Re=Re.next}while(Re!==Le);return ee(Re)}function _e(Le,tt,Se,Re,We,me){var mt=Le;do{for(var $e=mt.next.next;$e!==mt.prev;){if(mt.i!==$e.i&&j(mt,$e)){var Wt=He(mt,$e);return mt=ee(mt,mt.next),Wt=ee(Wt,Wt.next),ve(mt,tt,Se,Re,We,me,0),void ve(Wt,tt,Se,Re,We,me,0)}$e=$e.next}mt=mt.next}while(mt!==Le)}function Je(Le,tt){return Le.x-tt.x}function ot(Le,tt){var Se=function Tt(Le,tt){var mt,Se=tt,Re=Le.x,We=Le.y,me=-1/0;do{if(We<=Se.y&&We>=Se.next.y&&Se.next.y!==Se.y){var $e=Se.x+(We-Se.y)*(Se.next.x-Se.x)/(Se.next.y-Se.y);if($e<=Re&&$e>me&&(me=$e,mt=Se.x<Se.next.x?Se:Se.next,$e===Re))return mt}Se=Se.next}while(Se!==tt);if(!mt)return null;var On,Wt=mt,dt=mt.x,sn=mt.y,on=1/0;Se=mt;do{Re>=Se.x&&Se.x>=dt&&Re!==Se.x&&Ke(We<sn?Re:me,We,dt,sn,We<sn?me:Re,We,Se.x,Se.y)&&(On=Math.abs(We-Se.y)/(Re-Se.x),$(Se,Le)&&(On<on||On===on&&(Se.x>mt.x||Se.x===mt.x&&ht(mt,Se)))&&(mt=Se,on=On)),Se=Se.next}while(Se!==Wt);return mt}(Le,tt);if(!Se)return tt;var Re=He(Se,Le);return ee(Re,Re.next),ee(Se,Se.next)}function ht(Le,tt){return Y(Le.prev,Le,tt.prev)<0&&Y(tt.next,Le,Le.next)<0}function $t(Le,tt,Se,Re,We){return(Le=1431655765&((Le=858993459&((Le=252645135&((Le=16711935&((Le=(Le-Se)*We|0)|Le<<8))|Le<<4))|Le<<2))|Le<<1))|(tt=1431655765&((tt=858993459&((tt=252645135&((tt=16711935&((tt=(tt-Re)*We|0)|tt<<8))|tt<<4))|tt<<2))|tt<<1))<<1}function Qe(Le){var tt=Le,Se=Le;do{(tt.x<Se.x||tt.x===Se.x&&tt.y<Se.y)&&(Se=tt),tt=tt.next}while(tt!==Le);return Se}function Ke(Le,tt,Se,Re,We,me,mt,$e){return(We-mt)*(tt-$e)>=(Le-mt)*(me-$e)&&(Le-mt)*(Re-$e)>=(Se-mt)*(tt-$e)&&(Se-mt)*(me-$e)>=(We-mt)*(Re-$e)}function j(Le,tt){return Le.next.i!==tt.i&&Le.prev.i!==tt.i&&!function ce(Le,tt){var Se=Le;do{if(Se.i!==Le.i&&Se.next.i!==Le.i&&Se.i!==tt.i&&Se.next.i!==tt.i&&xe(Se,Se.next,Le,tt))return!0;Se=Se.next}while(Se!==Le);return!1}(Le,tt)&&($(Le,tt)&&$(tt,Le)&&function qe(Le,tt){var Se=Le,Re=!1,We=(Le.x+tt.x)/2,me=(Le.y+tt.y)/2;do{Se.y>me!=Se.next.y>me&&Se.next.y!==Se.y&&We<(Se.next.x-Se.x)*(me-Se.y)/(Se.next.y-Se.y)+Se.x&&(Re=!Re),Se=Se.next}while(Se!==Le);return Re}(Le,tt)&&(Y(Le.prev,Le,tt.prev)||Y(Le,tt.prev,tt))||Z(Le,tt)&&Y(Le.prev,Le,Le.next)>0&&Y(tt.prev,tt,tt.next)>0)}function Y(Le,tt,Se){return(tt.y-Le.y)*(Se.x-tt.x)-(tt.x-Le.x)*(Se.y-tt.y)}function Z(Le,tt){return Le.x===tt.x&&Le.y===tt.y}function xe(Le,tt,Se,Re){var We=oe(Y(Le,tt,Se)),me=oe(Y(Le,tt,Re)),mt=oe(Y(Se,Re,Le)),$e=oe(Y(Se,Re,tt));return!!(We!==me&&mt!==$e||0===We&&te(Le,Se,tt)||0===me&&te(Le,Re,tt)||0===mt&&te(Se,Le,Re)||0===$e&&te(Se,tt,Re))}function te(Le,tt,Se){return tt.x<=Math.max(Le.x,Se.x)&&tt.x>=Math.min(Le.x,Se.x)&&tt.y<=Math.max(Le.y,Se.y)&&tt.y>=Math.min(Le.y,Se.y)}function oe(Le){return Le>0?1:Le<0?-1:0}function $(Le,tt){return Y(Le.prev,Le,Le.next)<0?Y(Le,tt,Le.next)>=0&&Y(Le,Le.prev,tt)>=0:Y(Le,tt,Le.prev)<0||Y(Le,Le.next,tt)<0}function He(Le,tt){var Se=new Ot(Le.i,Le.x,Le.y),Re=new Ot(tt.i,tt.x,tt.y),We=Le.next,me=tt.prev;return Le.next=tt,tt.prev=Le,Se.next=We,We.prev=Se,Re.next=Se,Se.prev=Re,me.next=Re,Re.prev=me,Re}function Oe(Le,tt,Se,Re){var We=new Ot(Le,tt,Se);return Re?(We.next=Re.next,We.prev=Re,Re.next.prev=We,Re.next=We):(We.prev=We,We.next=We),We}function he(Le){Le.next.prev=Le.prev,Le.prev.next=Le.next,Le.prevZ&&(Le.prevZ.nextZ=Le.nextZ),Le.nextZ&&(Le.nextZ.prevZ=Le.prevZ)}function Ot(Le,tt,Se){this.i=Le,this.x=tt,this.y=Se,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function bt(Le,tt,Se,Re){for(var We=0,me=tt,mt=Se-Re;me<Se;me+=Re)We+=(Le[mt]-Le[me])*(Le[me+1]+Le[mt+1]),mt=me;return We}Et.exports=Ze,Et.exports.default=Ze,Ze.deviation=function(Le,tt,Se,Re){var We=tt&&tt.length,mt=Math.abs(bt(Le,0,We?tt[0]*Se:Le.length,Se));if(We)for(var $e=0,Wt=tt.length;$e<Wt;$e++)mt-=Math.abs(bt(Le,tt[$e]*Se,$e<Wt-1?tt[$e+1]*Se:Le.length,Se));var on=0;for($e=0;$e<Re.length;$e+=3){var On=Re[$e]*Se,Ut=Re[$e+1]*Se,Rn=Re[$e+2]*Se;on+=Math.abs((Le[On]-Le[Rn])*(Le[Ut+1]-Le[On+1])-(Le[On]-Le[Ut])*(Le[Rn+1]-Le[On+1]))}return 0===mt&&0===on?0:Math.abs((on-mt)/mt)},Ze.flatten=function(Le){for(var tt=Le[0][0].length,Se={vertices:[],holes:[],dimensions:tt},Re=0,We=0;We<Le.length;We++){for(var me=0;me<Le[We].length;me++)for(var mt=0;mt<tt;mt++)Se.vertices.push(Le[We][me][mt]);We>0&&Se.holes.push(Re+=Le[We-1].length)}return Se}},3457:Et=>{"use strict";var Ze="Function.prototype.bind called on incompatible ",ae=Array.prototype.slice,ee=Object.prototype.toString,ve="[object Function]";Et.exports=function(Ie){var Te=this;if("function"!=typeof Te||ee.call(Te)!==ve)throw new TypeError(Ze+Te);for(var Ve,_e=ae.call(arguments,1),Je=function(){if(this instanceof Ve){var ct=Te.apply(this,_e.concat(ae.call(arguments)));return Object(ct)===ct?ct:this}return Te.apply(Ie,_e.concat(ae.call(arguments)))},ot=Math.max(0,Te.length-_e.length),Tt=[],ht=0;ht<ot;ht++)Tt.push("$"+ht);if(Ve=Function("binder","return function ("+Tt.join(",")+"){ return binder.apply(this,arguments); }")(Je),Te.prototype){var et=function(){};et.prototype=Te.prototype,Ve.prototype=new et,et.prototype=null}return Ve}},4444:(Et,Ze,ae)=>{"use strict";var ee=ae(3457);Et.exports=Function.prototype.bind||ee},9582:Et=>{"use strict";var Ze=function(){return"string"==typeof function(){}.name},ae=Object.getOwnPropertyDescriptor;if(ae)try{ae([],"length")}catch{ae=null}Ze.functionsHaveConfigurableNames=function(){if(!Ze()||!ae)return!1;var Be=ae(function(){},"name");return!!Be&&!!Be.configurable};var ee=Function.prototype.bind;Ze.boundFunctionsHaveNames=function(){return Ze()&&"function"==typeof ee&&""!==function(){}.bind().name},Et.exports=Ze},5013:(Et,Ze,ae)=>{var ee=ae(6952),ve=function(_e){this.precision=_e&&_e.precision?_e.precision:17,this.direction=!(!_e||!_e.direction)&&_e.direction,this.pseudoNode=!(!_e||!_e.pseudoNode)&&_e.pseudoNode,this.objectComparator=_e&&_e.objectComparator?_e.objectComparator:Te};function Be(_e){return _e.coordinates.map(function(Ve){return{type:_e.type.replace("Multi",""),coordinates:Ve}})}function Ie(_e,Ve){return _e.hasOwnProperty("coordinates")?_e.coordinates.length===Ve.coordinates.length:_e.length===Ve.length}function Te(_e,Ve){return ee(_e,Ve,{strict:!0})}ve.prototype.compare=function(_e,Ve){if(_e.type!==Ve.type||!Ie(_e,Ve))return!1;switch(_e.type){case"Point":return this.compareCoord(_e.coordinates,Ve.coordinates);case"LineString":return this.compareLine(_e.coordinates,Ve.coordinates,0,!1);case"Polygon":return this.comparePolygon(_e,Ve);case"Feature":return this.compareFeature(_e,Ve);default:if(0===_e.type.indexOf("Multi")){var Je=this,ot=Be(_e),Tt=Be(Ve);return ot.every(function(ht){return this.some(function(et){return Je.compare(ht,et)})},Tt)}}return!1},ve.prototype.compareCoord=function(_e,Ve){if(_e.length!==Ve.length)return!1;for(var Je=0;Je<_e.length;Je++)if(_e[Je].toFixed(this.precision)!==Ve[Je].toFixed(this.precision))return!1;return!0},ve.prototype.compareLine=function(_e,Ve,Je,ot){if(!Ie(_e,Ve))return!1;var Tt=this.pseudoNode?_e:this.removePseudo(_e),ht=this.pseudoNode?Ve:this.removePseudo(Ve);if(!ot||this.compareCoord(Tt[0],ht[0])||(ht=this.fixStartIndex(ht,Tt))){var et=this.compareCoord(Tt[Je],ht[Je]);return this.direction||et?this.comparePath(Tt,ht):!!this.compareCoord(Tt[Je],ht[ht.length-(1+Je)])&&this.comparePath(Tt.slice().reverse(),ht)}},ve.prototype.fixStartIndex=function(_e,Ve){for(var Je,ot=-1,Tt=0;Tt<_e.length;Tt++)if(this.compareCoord(_e[Tt],Ve[0])){ot=Tt;break}return ot>=0&&(Je=[].concat(_e.slice(ot,_e.length),_e.slice(1,ot+1))),Je},ve.prototype.comparePath=function(_e,Ve){var Je=this;return _e.every(function(ot,Tt){return Je.compareCoord(ot,this[Tt])},Ve)},ve.prototype.comparePolygon=function(_e,Ve){if(this.compareLine(_e.coordinates[0],Ve.coordinates[0],1,!0)){var Je=_e.coordinates.slice(1,_e.coordinates.length),ot=Ve.coordinates.slice(1,Ve.coordinates.length),Tt=this;return Je.every(function(ht){return this.some(function(et){return Tt.compareLine(ht,et,1,!0)})},ot)}return!1},ve.prototype.compareFeature=function(_e,Ve){return!(_e.id!==Ve.id||!this.objectComparator(_e.properties,Ve.properties)||!this.compareBBox(_e,Ve))&&this.compare(_e.geometry,Ve.geometry)},ve.prototype.compareBBox=function(_e,Ve){return!!(!_e.bbox&&!Ve.bbox||_e.bbox&&Ve.bbox&&this.compareCoord(_e.bbox,Ve.bbox))},ve.prototype.removePseudo=function(_e){return _e},Et.exports=ve},5406:(Et,Ze,ae)=>{var ee=ae(2402),ve=ae(8275),Be=ae(3269),Ie=ae(1503).Z,Te=Be.featureEach,Je=ve.featureCollection;function ot(Tt){var ht=new ee(Tt);return ht.insert=function(et){if("Feature"!==et.type)throw new Error("invalid feature");return et.bbox=et.bbox?et.bbox:Ie(et),ee.prototype.insert.call(this,et)},ht.load=function(et){var ct=[];return Array.isArray(et)?et.forEach(function($t){if("Feature"!==$t.type)throw new Error("invalid features");$t.bbox=$t.bbox?$t.bbox:Ie($t),ct.push($t)}):Te(et,function($t){if("Feature"!==$t.type)throw new Error("invalid features");$t.bbox=$t.bbox?$t.bbox:Ie($t),ct.push($t)}),ee.prototype.load.call(this,ct)},ht.remove=function(et,ct){if("Feature"!==et.type)throw new Error("invalid feature");return et.bbox=et.bbox?et.bbox:Ie(et),ee.prototype.remove.call(this,et,ct)},ht.clear=function(){return ee.prototype.clear.call(this)},ht.search=function(et){var ct=ee.prototype.search.call(this,this.toBBox(et));return Je(ct)},ht.collides=function(et){return ee.prototype.collides.call(this,this.toBBox(et))},ht.all=function(){var et=ee.prototype.all.call(this);return Je(et)},ht.toJSON=function(){return ee.prototype.toJSON.call(this)},ht.fromJSON=function(et){return ee.prototype.fromJSON.call(this,et)},ht.toBBox=function(et){var ct;if(et.bbox)ct=et.bbox;else if(Array.isArray(et)&&4===et.length)ct=et;else if(Array.isArray(et)&&6===et.length)ct=[et[0],et[1],et[3],et[4]];else if("Feature"===et.type)ct=Ie(et);else{if("FeatureCollection"!==et.type)throw new Error("invalid geojson");ct=Ie(et)}return{minX:ct[0],minY:ct[1],maxX:ct[2],maxY:ct[3]}},ht}Et.exports=ot,Et.exports.default=ot},5203:(Et,Ze,ae)=>{"use strict";var ee,ve=SyntaxError,Be=Function,Ie=TypeError,Te=function(Oe){try{return Be('"use strict"; return ('+Oe+").constructor;")()}catch{}},_e=Object.getOwnPropertyDescriptor;if(_e)try{_e({},"")}catch{_e=null}var Ve=function(){throw new Ie},Je=_e?function(){try{return Ve}catch{try{return _e(arguments,"callee").get}catch{return Ve}}}():Ve,ot=ae(2969)(),Tt=Object.getPrototypeOf||function(Oe){return Oe.__proto__},ht={},et=typeof Uint8Array>"u"?ee:Tt(Uint8Array),ct={"%AggregateError%":typeof AggregateError>"u"?ee:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ee:ArrayBuffer,"%ArrayIteratorPrototype%":ot?Tt([][Symbol.iterator]()):ee,"%AsyncFromSyncIteratorPrototype%":ee,"%AsyncFunction%":ht,"%AsyncGenerator%":ht,"%AsyncGeneratorFunction%":ht,"%AsyncIteratorPrototype%":ht,"%Atomics%":typeof Atomics>"u"?ee:Atomics,"%BigInt%":typeof BigInt>"u"?ee:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ee:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ee:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ee:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ee:FinalizationRegistry,"%Function%":Be,"%GeneratorFunction%":ht,"%Int8Array%":typeof Int8Array>"u"?ee:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ee:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ee:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ot?Tt(Tt([][Symbol.iterator]())):ee,"%JSON%":"object"==typeof JSON?JSON:ee,"%Map%":typeof Map>"u"?ee:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ot?ee:Tt((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ee:Promise,"%Proxy%":typeof Proxy>"u"?ee:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ee:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ee:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ot?ee:Tt((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ee:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ot?Tt(""[Symbol.iterator]()):ee,"%Symbol%":ot?Symbol:ee,"%SyntaxError%":ve,"%ThrowTypeError%":Je,"%TypedArray%":et,"%TypeError%":Ie,"%Uint8Array%":typeof Uint8Array>"u"?ee:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ee:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ee:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ee:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ee:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ee:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ee:WeakSet},$t=function Oe(he){var Ot;if("%AsyncFunction%"===he)Ot=Te("async function () {}");else if("%GeneratorFunction%"===he)Ot=Te("function* () {}");else if("%AsyncGeneratorFunction%"===he)Ot=Te("async function* () {}");else if("%AsyncGenerator%"===he){var bt=Oe("%AsyncGeneratorFunction%");bt&&(Ot=bt.prototype)}else if("%AsyncIteratorPrototype%"===he){var Le=Oe("%AsyncGenerator%");Le&&(Ot=Tt(Le.prototype))}return ct[he]=Ot,Ot},Qe={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ke=ae(4444),j=ae(3164),Y=Ke.call(Function.call,Array.prototype.concat),Z=Ke.call(Function.apply,Array.prototype.splice),xe=Ke.call(Function.call,String.prototype.replace),te=Ke.call(Function.call,String.prototype.slice),oe=Ke.call(Function.call,RegExp.prototype.exec),ce=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,qe=function(he){var Ot=te(he,0,1),bt=te(he,-1);if("%"===Ot&&"%"!==bt)throw new ve("invalid intrinsic syntax, expected closing `%`");if("%"===bt&&"%"!==Ot)throw new ve("invalid intrinsic syntax, expected opening `%`");var Le=[];return xe(he,ce,function(tt,Se,Re,We){Le[Le.length]=Re?xe(We,$,"$1"):Se||tt}),Le},He=function(he,Ot){var Le,bt=he;if(j(Qe,bt)&&(bt="%"+(Le=Qe[bt])[0]+"%"),j(ct,bt)){var tt=ct[bt];if(tt===ht&&(tt=$t(bt)),typeof tt>"u"&&!Ot)throw new Ie("intrinsic "+he+" exists, but is not available. Please file an issue!");return{alias:Le,name:bt,value:tt}}throw new ve("intrinsic "+he+" does not exist!")};Et.exports=function(he,Ot){if("string"!=typeof he||0===he.length)throw new Ie("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof Ot)throw new Ie('"allowMissing" argument must be a boolean');if(null===oe(/^%?[^%]*%?$/g,he))throw new ve("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var bt=qe(he),Le=bt.length>0?bt[0]:"",tt=He("%"+Le+"%",Ot),Se=tt.name,Re=tt.value,We=!1,me=tt.alias;me&&(Le=me[0],Z(bt,Y([0,1],me)));for(var mt=1,$e=!0;mt<bt.length;mt+=1){var Wt=bt[mt],dt=te(Wt,0,1),sn=te(Wt,-1);if(('"'===dt||"'"===dt||"`"===dt||'"'===sn||"'"===sn||"`"===sn)&&dt!==sn)throw new ve("property names with quotes must have matching quotes");if(("constructor"===Wt||!$e)&&(We=!0),j(ct,Se="%"+(Le+="."+Wt)+"%"))Re=ct[Se];else if(null!=Re){if(!(Wt in Re)){if(!Ot)throw new Ie("base intrinsic for "+he+" exists, but the property is not available.");return}if(_e&&mt+1>=bt.length){var on=_e(Re,Wt);Re=($e=!!on)&&"get"in on&&!("originalValue"in on.get)?on.get:Re[Wt]}else $e=j(Re,Wt),Re=Re[Wt];$e&&!We&&(ct[Se]=Re)}}return Re}},7027:(Et,Ze,ae)=>{"use strict";var ve=ae(5203)("%Object.defineProperty%",!0),Be=function(){if(ve)try{return ve({},"a",{value:1}),!0}catch{return!1}return!1};Be.hasArrayLengthDefineBug=function(){if(!Be())return null;try{return 1!==ve([],"length",{value:1}).length}catch{return!0}},Et.exports=Be},2969:(Et,Ze,ae)=>{"use strict";var ee=typeof Symbol<"u"&&Symbol,ve=ae(1983);Et.exports=function(){return"function"==typeof ee&&"function"==typeof Symbol&&"symbol"==typeof ee("foo")&&"symbol"==typeof Symbol("bar")&&ve()}},1983:Et=>{"use strict";Et.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var ae={},ee=Symbol("test"),ve=Object(ee);if("string"==typeof ee||"[object Symbol]"!==Object.prototype.toString.call(ee)||"[object Symbol]"!==Object.prototype.toString.call(ve))return!1;for(ee in ae[ee]=42,ae)return!1;if("function"==typeof Object.keys&&0!==Object.keys(ae).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(ae).length)return!1;var Ie=Object.getOwnPropertySymbols(ae);if(1!==Ie.length||Ie[0]!==ee||!Object.prototype.propertyIsEnumerable.call(ae,ee))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var Te=Object.getOwnPropertyDescriptor(ae,ee);if(42!==Te.value||!0!==Te.enumerable)return!1}return!0}},6259:(Et,Ze,ae)=>{"use strict";var ee=ae(1983);Et.exports=function(){return ee()&&!!Symbol.toStringTag}},3164:(Et,Ze,ae)=>{"use strict";var ee=ae(4444);Et.exports=ee.call(Function.call,Object.prototype.hasOwnProperty)},4159:function(Et){Et.exports=function(){"use strict";var Ze=function(T,S){return(Ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,L){D.__proto__=L}||function(D,L){for(var V in L)Object.prototype.hasOwnProperty.call(L,V)&&(D[V]=L[V])})(T,S)};function ae(T,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function D(){this.constructor=T}Ze(T,S),T.prototype=null===S?Object.create(S):(D.prototype=S.prototype,new D)}var ee=function(){return ee=Object.assign||function(S){for(var D,L=1,V=arguments.length;L<V;L++)for(var W in D=arguments[L])Object.prototype.hasOwnProperty.call(D,W)&&(S[W]=D[W]);return S},ee.apply(this,arguments)};function ve(T,S,D,L){return new(D||(D=Promise))(function(W,se){function Ee(ft){try{rt(L.next(ft))}catch(At){se(At)}}function De(ft){try{rt(L.throw(ft))}catch(At){se(At)}}function rt(ft){ft.done?W(ft.value):function V(W){return W instanceof D?W:new D(function(se){se(W)})}(ft.value).then(Ee,De)}rt((L=L.apply(T,S||[])).next())})}function Be(T,S){var L,V,W,se,D={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return se={next:Ee(0),throw:Ee(1),return:Ee(2)},"function"==typeof Symbol&&(se[Symbol.iterator]=function(){return this}),se;function Ee(rt){return function(ft){return function De(rt){if(L)throw new TypeError("Generator is already executing.");for(;D;)try{if(L=1,V&&(W=2&rt[0]?V.return:rt[0]?V.throw||((W=V.return)&&W.call(V),0):V.next)&&!(W=W.call(V,rt[1])).done)return W;switch(V=0,W&&(rt=[2&rt[0],W.value]),rt[0]){case 0:case 1:W=rt;break;case 4:return D.label++,{value:rt[1],done:!1};case 5:D.label++,V=rt[1],rt=[0];continue;case 7:rt=D.ops.pop(),D.trys.pop();continue;default:if(!(W=(W=D.trys).length>0&&W[W.length-1])&&(6===rt[0]||2===rt[0])){D=0;continue}if(3===rt[0]&&(!W||rt[1]>W[0]&&rt[1]<W[3])){D.label=rt[1];break}if(6===rt[0]&&D.label<W[1]){D.label=W[1],W=rt;break}if(W&&D.label<W[2]){D.label=W[2],D.ops.push(rt);break}W[2]&&D.ops.pop(),D.trys.pop();continue}rt=S.call(T,D)}catch(ft){rt=[6,ft],V=0}finally{L=W=0}if(5&rt[0])throw rt[1];return{value:rt[0]?rt[1]:void 0,done:!0}}([rt,ft])}}}function Ie(T,S,D){if(D||2===arguments.length)for(var W,L=0,V=S.length;L<V;L++)(W||!(L in S))&&(W||(W=Array.prototype.slice.call(S,0,L)),W[L]=S[L]);return T.concat(W||S)}for(var Te=function(){function T(S,D,L,V){this.left=S,this.top=D,this.width=L,this.height=V}return T.prototype.add=function(S,D,L,V){return new T(this.left+S,this.top+D,this.width+L,this.height+V)},T.fromClientRect=function(S,D){return new T(D.left+S.windowBounds.left,D.top+S.windowBounds.top,D.width,D.height)},T.fromDOMRectList=function(S,D){var L=Array.from(D).find(function(V){return 0!==V.width});return L?new T(L.left+S.windowBounds.left,L.top+S.windowBounds.top,L.width,L.height):T.EMPTY},T.EMPTY=new T(0,0,0,0),T}(),_e=function(T,S){return Te.fromClientRect(T,S.getBoundingClientRect())},Je=function(T){for(var S=[],D=0,L=T.length;D<L;){var V=T.charCodeAt(D++);if(V>=55296&&V<=56319&&D<L){var W=T.charCodeAt(D++);56320==(64512&W)?S.push(((1023&V)<<10)+(1023&W)+65536):(S.push(V),D--)}else S.push(V)}return S},ot=function(){for(var T=[],S=0;S<arguments.length;S++)T[S]=arguments[S];if(String.fromCodePoint)return String.fromCodePoint.apply(String,T);var D=T.length;if(!D)return"";for(var L=[],V=-1,W="";++V<D;){var se=T[V];se<=65535?L.push(se):L.push(55296+((se-=65536)>>10),se%1024+56320),(V+1===D||L.length>16384)&&(W+=String.fromCharCode.apply(String,L),L.length=0)}return W},Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ht=typeof Uint8Array>"u"?[]:new Uint8Array(256),et=0;et<Tt.length;et++)ht[Tt.charCodeAt(et)]=et;for(var ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$t=typeof Uint8Array>"u"?[]:new Uint8Array(256),Qe=0;Qe<ct.length;Qe++)$t[ct.charCodeAt(Qe)]=Qe;for(var Re=function(T,S,D){return T.slice?T.slice(S,D):new Uint16Array(Array.prototype.slice.call(T,S,D))},mt=function(){function T(S,D,L,V,W,se){this.initialValue=S,this.errorValue=D,this.highStart=L,this.highValueIndex=V,this.index=W,this.data=se}return T.prototype.get=function(S){var D;if(S>=0){if(S<55296||S>56319&&S<=65535)return this.data[D=((D=this.index[S>>5])<<2)+(31&S)];if(S<=65535)return this.data[D=((D=this.index[2048+(S-55296>>5)])<<2)+(31&S)];if(S<this.highStart)return D=this.index[D=2080+(S>>11)],this.data[D=((D=this.index[D+=S>>5&63])<<2)+(31&S)];if(S<=1114111)return this.data[this.highValueIndex]}return this.errorValue},T}(),$e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wt=typeof Uint8Array>"u"?[]:new Uint8Array(256),dt=0;dt<$e.length;dt++)Wt[$e.charCodeAt(dt)]=dt;var D,L,V,se,Ee,Jn=10,ne=13,ke=15,xt=17,qt=18,tn=19,St=20,Ii=21,ji=22,Ni=24,Lr=25,yr=26,Dr=27,oo=28,oa=30,Na=32,Hs=33,uc=34,aa=35,al=37,Tc=38,Vi=39,y2=40,kl=42,OA=[9001,65288],Or="\xd7",N4=(D=function(T){var L,W,se,Ee,De,S=.75*T.length,D=T.length,V=0;"="===T[T.length-1]&&(S--,"="===T[T.length-2]&&S--);var rt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(S):new Array(S),ft=Array.isArray(rt)?rt:new Uint8Array(rt);for(L=0;L<D;L+=4)W=$t[T.charCodeAt(L)],se=$t[T.charCodeAt(L+1)],Ee=$t[T.charCodeAt(L+2)],De=$t[T.charCodeAt(L+3)],ft[V++]=W<<2|se>>4,ft[V++]=(15&se)<<4|Ee>>2,ft[V++]=(3&Ee)<<6|63&De;return rt}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),L=Array.isArray(D)?function(T){for(var S=T.length,D=[],L=0;L<S;L+=4)D.push(T[L+3]<<24|T[L+2]<<16|T[L+1]<<8|T[L]);return D}(D):new Uint32Array(D),V=Array.isArray(D)?function(T){for(var S=T.length,D=[],L=0;L<S;L+=2)D.push(T[L+1]<<8|T[L]);return D}(D):new Uint16Array(D),se=Re(V,12,L[4]/2),Ee=2===L[5]?Re(V,(24+L[4])/2):function(T,S,D){return T.slice?T.slice(S,D):new Uint32Array(Array.prototype.slice.call(T,S,D))}(L,Math.ceil((24+L[4])/4)),new mt(L[0],L[1],L[2],L[3],se,Ee)),qa=[oa,36],x3=[1,2,3,5],Ri=[Jn,8],v1=[Dr,yr],Xa=x3.concat(Ri),V2=[Tc,Vi,y2,uc,aa],H1=[ke,ne],z1=function(T,S,D,L){var V=L[D];if(Array.isArray(T)?-1!==T.indexOf(V):T===V)for(var W=D;W<=L.length;){if((se=L[++W])===S)return!0;if(se!==Jn)break}if(V===Jn)for(W=D;W>0;){var Ee=L[--W];if(Array.isArray(T)?-1!==T.indexOf(Ee):T===Ee)for(var De=D;De<=L.length;){var se;if((se=L[++De])===S)return!0;if(se!==Jn)break}if(Ee!==Jn)break}return!1},Uh=function(T,S){for(var D=T;D>=0;){var L=S[D];if(L!==Jn)return L;D--}return 0},O1=function(T,S,D,L,V){if(0===D[L])return Or;var W=L-1;if(Array.isArray(V)&&!0===V[W])return Or;var se=W-1,Ee=W+1,De=S[W],rt=se>=0?S[se]:0,ft=S[Ee];if(2===De&&3===ft)return Or;if(-1!==x3.indexOf(De))return"!";if(-1!==x3.indexOf(ft)||-1!==Ri.indexOf(ft))return Or;if(8===Uh(W,S))return"\xf7";if(11===N4.get(T[W])||(De===Na||De===Hs)&&11===N4.get(T[Ee])||7===De||7===ft||9===De||-1===[Jn,ne,ke].indexOf(De)&&9===ft||-1!==[xt,qt,tn,Ni,oo].indexOf(ft)||Uh(W,S)===ji||z1(23,ji,W,S)||z1([xt,qt],Ii,W,S)||z1(12,12,W,S))return Or;if(De===Jn)return"\xf7";if(23===De||23===ft)return Or;if(16===ft||16===De)return"\xf7";if(-1!==[ne,ke,Ii].indexOf(ft)||14===De||36===rt&&-1!==H1.indexOf(De)||De===oo&&36===ft||ft===St||-1!==qa.indexOf(ft)&&De===Lr||-1!==qa.indexOf(De)&&ft===Lr||De===Dr&&-1!==[al,Na,Hs].indexOf(ft)||-1!==[al,Na,Hs].indexOf(De)&&ft===yr||-1!==qa.indexOf(De)&&-1!==v1.indexOf(ft)||-1!==v1.indexOf(De)&&-1!==qa.indexOf(ft)||-1!==[Dr,yr].indexOf(De)&&(ft===Lr||-1!==[ji,ke].indexOf(ft)&&S[Ee+1]===Lr)||-1!==[ji,ke].indexOf(De)&&ft===Lr||De===Lr&&-1!==[Lr,oo,Ni].indexOf(ft))return Or;if(-1!==[Lr,oo,Ni,xt,qt].indexOf(ft))for(var At=W;At>=0;){if((Nt=S[At])===Lr)return Or;if(-1===[oo,Ni].indexOf(Nt))break;At--}if(-1!==[Dr,yr].indexOf(ft))for(At=-1!==[xt,qt].indexOf(De)?se:W;At>=0;){var Nt;if((Nt=S[At])===Lr)return Or;if(-1===[oo,Ni].indexOf(Nt))break;At--}if(Tc===De&&-1!==[Tc,Vi,uc,aa].indexOf(ft)||-1!==[Vi,uc].indexOf(De)&&-1!==[Vi,y2].indexOf(ft)||-1!==[y2,aa].indexOf(De)&&ft===y2||-1!==V2.indexOf(De)&&-1!==[St,yr].indexOf(ft)||-1!==V2.indexOf(ft)&&De===Dr||-1!==qa.indexOf(De)&&-1!==qa.indexOf(ft)||De===Ni&&-1!==qa.indexOf(ft)||-1!==qa.concat(Lr).indexOf(De)&&ft===ji&&-1===OA.indexOf(T[Ee])||-1!==qa.concat(Lr).indexOf(ft)&&De===qt)return Or;if(41===De&&41===ft){for(var qn=D[W],Ln=1;qn>0&&41===S[--qn];)Ln++;if(Ln%2!=0)return Or}return De===Na&&ft===Hs?Or:"\xf7"},x8=function(T,S){S||(S={lineBreak:"normal",wordBreak:"normal"});var D=function(T,S){void 0===S&&(S="strict");var D=[],L=[],V=[];return T.forEach(function(W,se){var Ee=N4.get(W);if(Ee>50?(V.push(!0),Ee-=50):V.push(!1),-1!==["normal","auto","loose"].indexOf(S)&&-1!==[8208,8211,12316,12448].indexOf(W))return L.push(se),D.push(16);if(4===Ee||11===Ee){if(0===se)return L.push(se),D.push(oa);var De=D[se-1];return-1===Xa.indexOf(De)?(L.push(L[se-1]),D.push(De)):(L.push(se),D.push(oa))}return L.push(se),31===Ee?D.push("strict"===S?Ii:al):Ee===kl||29===Ee?D.push(oa):43===Ee?D.push(W>=131072&&W<=196605||W>=196608&&W<=262141?al:oa):void D.push(Ee)}),[L,D,V]}(T,S.lineBreak),L=D[0],V=D[1],W=D[2];return("break-all"===S.wordBreak||"break-word"===S.wordBreak)&&(V=V.map(function(Ee){return-1!==[Lr,oa,kl].indexOf(Ee)?al:Ee})),[L,V,"keep-all"===S.wordBreak?W.map(function(Ee,De){return Ee&&T[De]>=19968&&T[De]<=40959}):void 0]},Uo=function(){function T(S,D,L,V){this.codePoints=S,this.required="!"===D,this.start=L,this.end=V}return T.prototype.slice=function(){return ot.apply(void 0,this.codePoints.slice(this.start,this.end))},T}(),mo=function(T){return T>=48&&T<=57},Gn=function(T){return mo(T)||T>=65&&T<=70||T>=97&&T<=102},Pd=function(T){return 10===T||9===T||32===T},Ho=function(T){return function(T){return function(T){return T>=97&&T<=122}(T)||function(T){return T>=65&&T<=90}(T)}(T)||function(T){return T>=128}(T)||95===T},Ya=function(T){return Ho(T)||mo(T)||45===T},fc=function(T){return T>=0&&T<=8||11===T||T>=14&&T<=31||127===T},G2=function(T,S){return 92===T&&10!==S},ha=function(T,S,D){return 45===T?Ho(S)||G2(S,D):!!Ho(T)||!(92!==T||!G2(T,S))},zs=function(T,S,D){return 43===T||45===T?!!mo(S)||46===S&&mo(D):mo(46===T?S:T)},fa=function(T){var S=0,D=1;(43===T[S]||45===T[S])&&(45===T[S]&&(D=-1),S++);for(var L=[];mo(T[S]);)L.push(T[S++]);var V=L.length?parseInt(ot.apply(void 0,L),10):0;46===T[S]&&S++;for(var W=[];mo(T[S]);)W.push(T[S++]);var se=W.length,Ee=se?parseInt(ot.apply(void 0,W),10):0;(69===T[S]||101===T[S])&&S++;var De=1;(43===T[S]||45===T[S])&&(45===T[S]&&(De=-1),S++);for(var rt=[];mo(T[S]);)rt.push(T[S++]);var ft=rt.length?parseInt(ot.apply(void 0,rt),10):0;return D*(V+Ee*Math.pow(10,-se))*Math.pow(10,De*ft)},gi={type:2},U4={type:3},Yr={type:4},w1={type:13},C2={type:8},E3={type:21},jh={type:9},Nl={type:10},$h={type:11},Nr={type:12},Sn={type:14},Ao={type:23},Kh={type:1},Rc={type:25},hi={type:24},br={type:26},e4={type:27},gt={type:28},b1={type:29},fr={type:31},Aa={type:32},dc=function(){function T(){this._value=[]}return T.prototype.write=function(S){this._value=this._value.concat(Je(S))},T.prototype.read=function(){for(var S=[],D=this.consumeToken();D!==Aa;)S.push(D),D=this.consumeToken();return S},T.prototype.consumeToken=function(){var S=this.consumeCodePoint();switch(S){case 34:return this.consumeStringToken(34);case 35:var D=this.peekCodePoint(0),L=this.peekCodePoint(1),V=this.peekCodePoint(2);if(Ya(D)||G2(L,V)){var W=ha(D,L,V)?2:1;return{type:5,value:this.consumeName(),flags:W}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),w1;break;case 39:return this.consumeStringToken(39);case 40:return gi;case 41:return U4;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Sn;break;case 43:if(zs(S,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(S),this.consumeNumericToken();break;case 44:return Yr;case 45:var Ee=S,De=this.peekCodePoint(0),rt=this.peekCodePoint(1);if(zs(Ee,De,rt))return this.reconsumeCodePoint(S),this.consumeNumericToken();if(ha(Ee,De,rt))return this.reconsumeCodePoint(S),this.consumeIdentLikeToken();if(45===De&&62===rt)return this.consumeCodePoint(),this.consumeCodePoint(),hi;break;case 46:if(zs(S,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(S),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var ft=this.consumeCodePoint();if(42===ft&&47===(ft=this.consumeCodePoint()))return this.consumeToken();if(-1===ft)return this.consumeToken()}break;case 58:return br;case 59:return e4;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),Rc;break;case 64:var At=this.peekCodePoint(0),Nt=this.peekCodePoint(1),qn=this.peekCodePoint(2);if(ha(At,Nt,qn))return{type:7,value:this.consumeName()};break;case 91:return gt;case 92:if(G2(S,this.peekCodePoint(0)))return this.reconsumeCodePoint(S),this.consumeIdentLikeToken();break;case 93:return b1;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),C2;break;case 123:return $h;case 125:return Nr;case 117:case 85:var Ln=this.peekCodePoint(0),Xn=this.peekCodePoint(1);return 43===Ln&&(Gn(Xn)||63===Xn)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(S),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),jh;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),E3;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Nl;break;case-1:return Aa}return Pd(S)?(this.consumeWhiteSpace(),fr):mo(S)?(this.reconsumeCodePoint(S),this.consumeNumericToken()):Ho(S)?(this.reconsumeCodePoint(S),this.consumeIdentLikeToken()):{type:6,value:ot(S)}},T.prototype.consumeCodePoint=function(){var S=this._value.shift();return typeof S>"u"?-1:S},T.prototype.reconsumeCodePoint=function(S){this._value.unshift(S)},T.prototype.peekCodePoint=function(S){return S>=this._value.length?-1:this._value[S]},T.prototype.consumeUnicodeRangeToken=function(){for(var S=[],D=this.consumeCodePoint();Gn(D)&&S.length<6;)S.push(D),D=this.consumeCodePoint();for(var L=!1;63===D&&S.length<6;)S.push(D),D=this.consumeCodePoint(),L=!0;if(L)return{type:30,start:parseInt(ot.apply(void 0,S.map(function(De){return 63===De?48:De})),16),end:parseInt(ot.apply(void 0,S.map(function(De){return 63===De?70:De})),16)};var se=parseInt(ot.apply(void 0,S),16);if(45===this.peekCodePoint(0)&&Gn(this.peekCodePoint(1))){this.consumeCodePoint(),D=this.consumeCodePoint();for(var Ee=[];Gn(D)&&Ee.length<6;)Ee.push(D),D=this.consumeCodePoint();return{type:30,start:se,end:parseInt(ot.apply(void 0,Ee),16)}}return{type:30,start:se,end:se}},T.prototype.consumeIdentLikeToken=function(){var S=this.consumeName();return"url"===S.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:S}):{type:20,value:S}},T.prototype.consumeUrlToken=function(){var S=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var D=this.peekCodePoint(0);if(39===D||34===D){var L=this.consumeStringToken(this.consumeCodePoint());return 0===L.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:L.value}):(this.consumeBadUrlRemnants(),Ao)}for(;;){var V=this.consumeCodePoint();if(-1===V||41===V)return{type:22,value:ot.apply(void 0,S)};if(Pd(V))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:ot.apply(void 0,S)}):(this.consumeBadUrlRemnants(),Ao);if(34===V||39===V||40===V||fc(V))return this.consumeBadUrlRemnants(),Ao;if(92===V){if(!G2(V,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Ao;S.push(this.consumeEscapedCodePoint())}else S.push(V)}},T.prototype.consumeWhiteSpace=function(){for(;Pd(this.peekCodePoint(0));)this.consumeCodePoint()},T.prototype.consumeBadUrlRemnants=function(){for(;;){var S=this.consumeCodePoint();if(41===S||-1===S)return;G2(S,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},T.prototype.consumeStringSlice=function(S){for(var L="";S>0;){var V=Math.min(5e4,S);L+=ot.apply(void 0,this._value.splice(0,V)),S-=V}return this._value.shift(),L},T.prototype.consumeStringToken=function(S){for(var D="",L=0;;){var V=this._value[L];if(-1===V||void 0===V||V===S)return{type:0,value:D+=this.consumeStringSlice(L)};if(10===V)return this._value.splice(0,L),Kh;if(92===V){var W=this._value[L+1];-1!==W&&void 0!==W&&(10===W?(D+=this.consumeStringSlice(L),L=-1,this._value.shift()):G2(V,W)&&(D+=this.consumeStringSlice(L),D+=ot(this.consumeEscapedCodePoint()),L=-1))}L++}},T.prototype.consumeNumber=function(){var S=[],D=4,L=this.peekCodePoint(0);for((43===L||45===L)&&S.push(this.consumeCodePoint());mo(this.peekCodePoint(0));)S.push(this.consumeCodePoint());L=this.peekCodePoint(0);var V=this.peekCodePoint(1);if(46===L&&mo(V))for(S.push(this.consumeCodePoint(),this.consumeCodePoint()),D=8;mo(this.peekCodePoint(0));)S.push(this.consumeCodePoint());L=this.peekCodePoint(0),V=this.peekCodePoint(1);var W=this.peekCodePoint(2);if((69===L||101===L)&&((43===V||45===V)&&mo(W)||mo(V)))for(S.push(this.consumeCodePoint(),this.consumeCodePoint()),D=8;mo(this.peekCodePoint(0));)S.push(this.consumeCodePoint());return[fa(S),D]},T.prototype.consumeNumericToken=function(){var S=this.consumeNumber(),D=S[0],L=S[1],V=this.peekCodePoint(0),W=this.peekCodePoint(1),se=this.peekCodePoint(2);return ha(V,W,se)?{type:15,number:D,flags:L,unit:this.consumeName()}:37===V?(this.consumeCodePoint(),{type:16,number:D,flags:L}):{type:17,number:D,flags:L}},T.prototype.consumeEscapedCodePoint=function(){var S=this.consumeCodePoint();if(Gn(S)){for(var D=ot(S);Gn(this.peekCodePoint(0))&&D.length<6;)D+=ot(this.consumeCodePoint());Pd(this.peekCodePoint(0))&&this.consumeCodePoint();var L=parseInt(D,16);return 0===L||function(T){return T>=55296&&T<=57343}(L)||L>1114111?65533:L}return-1===S?65533:S},T.prototype.consumeName=function(){for(var S="";;){var D=this.consumeCodePoint();if(Ya(D))S+=ot(D);else{if(!G2(D,this.peekCodePoint(0)))return this.reconsumeCodePoint(D),S;S+=ot(this.consumeEscapedCodePoint())}}},T}(),M2=function(){function T(S){this._tokens=S}return T.create=function(S){var D=new dc;return D.write(S),new T(D.read())},T.parseValue=function(S){return T.create(S).parseComponentValue()},T.parseValues=function(S){return T.create(S).parseComponentValues()},T.prototype.parseComponentValue=function(){for(var S=this.consumeToken();31===S.type;)S=this.consumeToken();if(32===S.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(S);var D=this.consumeComponentValue();do{S=this.consumeToken()}while(31===S.type);if(32===S.type)return D;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},T.prototype.parseComponentValues=function(){for(var S=[];;){var D=this.consumeComponentValue();if(32===D.type)return S;S.push(D),S.push()}},T.prototype.consumeComponentValue=function(){var S=this.consumeToken();switch(S.type){case 11:case 28:case 2:return this.consumeSimpleBlock(S.type);case 19:return this.consumeFunction(S)}return S},T.prototype.consumeSimpleBlock=function(S){for(var D={type:S,values:[]},L=this.consumeToken();;){if(32===L.type||e2(L,S))return D;this.reconsumeToken(L),D.values.push(this.consumeComponentValue()),L=this.consumeToken()}},T.prototype.consumeFunction=function(S){for(var D={name:S.value,values:[],type:18};;){var L=this.consumeToken();if(32===L.type||3===L.type)return D;this.reconsumeToken(L),D.values.push(this.consumeComponentValue())}},T.prototype.consumeToken=function(){var S=this._tokens.shift();return typeof S>"u"?Aa:S},T.prototype.reconsumeToken=function(S){this._tokens.unshift(S)},T}(),Hi=function(T){return 15===T.type},co=function(T){return 17===T.type},fn=function(T){return 20===T.type},Ui=function(T){return 0===T.type},Mr=function(T,S){return fn(T)&&T.value===S},js=function(T){return 31!==T.type},ll=function(T){return 31!==T.type&&4!==T.type},To=function(T){var S=[],D=[];return T.forEach(function(L){if(4===L.type){if(0===D.length)throw new Error("Error parsing function args, zero tokens for arg");return S.push(D),void(D=[])}31!==L.type&&D.push(L)}),D.length&&S.push(D),S},e2=function(T,S){return 11===S&&12===T.type||28===S&&29===T.type||2===S&&3===T.type},xr=function(T){return 17===T.type||15===T.type},Ys=function(T){return 16===T.type||xr(T)},Za=function(T){return T.length>1?[T[0],T[1]]:[T[0]]},li={type:17,number:0,flags:4},Bc={type:16,number:50,flags:4},Ja={type:16,number:100,flags:4},kc=function(T,S,D){var L=T[0],V=T[1];return[$i(L,S),$i(typeof V<"u"?V:L,D)]},$i=function(T,S){if(16===T.type)return T.number/100*S;if(Hi(T))switch(T.unit){case"rem":case"em":return 16*T.number;default:return T.number}return T.number},t1_parse=function(T,S){if(15===S.type)switch(S.unit){case"deg":return Math.PI*S.number/180;case"grad":return Math.PI/200*S.number;case"rad":return S.number;case"turn":return 2*Math.PI*S.number}throw new Error("Unsupported angle type")},Hd=function(T){return 15===T.type&&("deg"===T.unit||"grad"===T.unit||"rad"===T.unit||"turn"===T.unit)},vr=function(T){switch(T.filter(fn).map(function(D){return D.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[li,li];case"to top":case"bottom":return Q2(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[li,Ja];case"to right":case"left":return Q2(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ja,Ja];case"to bottom":case"top":return Q2(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ja,li];case"to left":case"right":return Q2(270)}return 0},Q2=function(T){return Math.PI*T/180},ul_parse=function(T,S){if(18===S.type){var D=Zs[S.name];if(typeof D>"u")throw new Error('Attempting to parse an unsupported color function "'+S.name+'"');return D(T,S.values)}if(5===S.type){if(3===S.value.length){var L=S.value.substring(0,1),V=S.value.substring(1,2),W=S.value.substring(2,3);return W2(parseInt(L+L,16),parseInt(V+V,16),parseInt(W+W,16),1)}if(4===S.value.length){L=S.value.substring(0,1),V=S.value.substring(1,2),W=S.value.substring(2,3);var se=S.value.substring(3,4);return W2(parseInt(L+L,16),parseInt(V+V,16),parseInt(W+W,16),parseInt(se+se,16)/255)}if(6===S.value.length)return L=S.value.substring(0,2),V=S.value.substring(2,4),W=S.value.substring(4,6),W2(parseInt(L,16),parseInt(V,16),parseInt(W,16),1);if(8===S.value.length)return L=S.value.substring(0,2),V=S.value.substring(2,4),W=S.value.substring(4,6),se=S.value.substring(6,8),W2(parseInt(L,16),parseInt(V,16),parseInt(W,16),parseInt(se,16)/255)}if(20===S.type){var Ee=G1[S.value.toUpperCase()];if(typeof Ee<"u")return Ee}return G1.TRANSPARENT},Fc=function(T){return 0==(255&T)},Va=function(T){var S=255&T,D=255&T>>8,L=255&T>>16,V=255&T>>24;return S<255?"rgba("+V+","+L+","+D+","+S/255+")":"rgb("+V+","+L+","+D+")"},W2=function(T,S,D,L){return(T<<24|S<<16|D<<8|Math.round(255*L)<<0)>>>0},Vl=function(T,S){if(17===T.type)return T.number;if(16===T.type){var D=3===S?1:255;return 3===S?T.number/100*D:Math.round(T.number/100*D)}return 0},U1=function(T,S){var D=S.filter(ll);if(3===D.length){var L=D.map(Vl);return W2(L[0],L[1],L[2],1)}if(4===D.length){var Ee=D.map(Vl);return W2(Ee[0],Ee[1],Ee[2],Ee[3])}return 0};function Vr(T,S,D){return D<0&&(D+=1),D>=1&&(D-=1),D<1/6?(S-T)*D*6+T:D<.5?S:D<2/3?6*(S-T)*(2/3-D)+T:T}var G4=function(T,S){var D=S.filter(ll),L=D[0],V=D[1],W=D[2],se=D[3],Ee=(17===L.type?Q2(L.number):t1_parse(T,L))/(2*Math.PI),De=Ys(V)?V.number/100:0,rt=Ys(W)?W.number/100:0,ft=typeof se<"u"&&Ys(se)?$i(se,1):1;if(0===De)return W2(255*rt,255*rt,255*rt,1);var At=rt<=.5?rt*(De+1):rt+De-rt*De,Nt=2*rt-At,qn=Vr(Nt,At,Ee+1/3),Ln=Vr(Nt,At,Ee),Xn=Vr(Nt,At,Ee-1/3);return W2(255*qn,255*Ln,255*Xn,ft)},Zs={hsl:G4,hsla:G4,rgb:U1,rgba:U1},Xo=function(T,S){return ul_parse(T,M2.create(S).parseComponentValue())},G1={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},qh={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(T,S){return S.map(function(D){if(fn(D))switch(D.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},T3={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ia=function(T,S){var D=ul_parse(T,S[0]),L=S[1];return L&&Ys(L)?{color:D,stop:L}:{color:D,stop:null}},Ul=function(T,S){var D=T[0],L=T[T.length-1];null===D.stop&&(D.stop=li),null===L.stop&&(L.stop=Ja);for(var V=[],W=0,se=0;se<T.length;se++){var Ee=T[se].stop;if(null!==Ee){var De=$i(Ee,S);V.push(De>W?De:W),W=De}else V.push(null)}var rt=null;for(se=0;se<V.length;se++){var ft=V[se];if(null===ft)null===rt&&(rt=se);else if(null!==rt){for(var At=se-rt,qn=(ft-V[rt-1])/(At+1),Ln=1;Ln<=At;Ln++)V[rt+Ln-1]=qn*Ln;rt=null}}return T.map(function(Xn,Rr){return{color:Xn.color,stop:Math.max(Math.min(1,V[Rr]/S),0)}})},j2=function(T,S,D){var L="number"==typeof T?T:function(T,S,D){var L=S/2,V=D/2,W=$i(T[0],S)-L,se=V-$i(T[1],D);return(Math.atan2(se,W)+2*Math.PI)%(2*Math.PI)}(T,S,D),V=Math.abs(S*Math.sin(L))+Math.abs(D*Math.cos(L)),W=S/2,se=D/2,Ee=V/2,De=Math.sin(L-Math.PI/2)*Ee,rt=Math.cos(L-Math.PI/2)*Ee;return[V,W-rt,W+rt,se-De,se+De]},Lo=function(T,S){return Math.sqrt(T*T+S*S)},ng=function(T,S,D,L,V){return[[0,0],[0,S],[T,0],[T,S]].reduce(function(se,Ee){var ft=Lo(D-Ee[0],L-Ee[1]);return(V?ft<se.optimumDistance:ft>se.optimumDistance)?{optimumCorner:Ee,optimumDistance:ft}:se},{optimumDistance:V?1/0:-1/0,optimumCorner:null}).optimumCorner},Ra=function(T,S){var D=Q2(180),L=[];return To(S).forEach(function(V,W){if(0===W){var se=V[0];if(20===se.type&&-1!==["top","left","right","bottom"].indexOf(se.value))return void(D=vr(V));if(Hd(se))return void(D=(t1_parse(T,se)+Q2(270))%Q2(360))}var Ee=Ia(T,V);L.push(Ee)}),{angle:D,stops:L,type:1}},hl="closest-side",S2="farthest-side",M8="closest-corner",Q4="farthest-corner",Pc="ellipse",n1="contain",Hc=function(T,S){var D=0,L=3,V=[],W=[];return To(S).forEach(function(se,Ee){var De=!0;if(0===Ee?De=se.reduce(function(ft,At){if(fn(At))switch(At.value){case"center":return W.push(Bc),!1;case"top":case"left":return W.push(li),!1;case"right":case"bottom":return W.push(Ja),!1}else if(Ys(At)||xr(At))return W.push(At),!1;return ft},De):1===Ee&&(De=se.reduce(function(ft,At){if(fn(At))switch(At.value){case"circle":return D=0,!1;case Pc:return D=1,!1;case n1:case hl:return L=0,!1;case S2:return L=1,!1;case M8:return L=2,!1;case"cover":case Q4:return L=3,!1}else if(xr(At)||Ys(At))return Array.isArray(L)||(L=[]),L.push(At),!1;return ft},De)),De){var rt=Ia(T,se);V.push(rt)}}),{size:L,shape:D,stops:V,position:W,type:2}},pu_parse=function(T,S){if(22===S.type){var D={url:S.value,type:0};return T.cache.addImage(S.value),D}if(18===S.type){var L=C1[S.name];if(typeof L>"u")throw new Error('Attempting to parse an unsupported image function "'+S.name+'"');return L(T,S.values)}throw new Error("Unsupported image type "+S.type)};for(var C1={"linear-gradient":function(T,S){var D=Q2(180),L=[];return To(S).forEach(function(V,W){if(0===W){var se=V[0];if(20===se.type&&"to"===se.value)return void(D=vr(V));if(Hd(se))return void(D=t1_parse(T,se))}var Ee=Ia(T,V);L.push(Ee)}),{angle:D,stops:L,type:1}},"-moz-linear-gradient":Ra,"-ms-linear-gradient":Ra,"-o-linear-gradient":Ra,"-webkit-linear-gradient":Ra,"radial-gradient":function(T,S){var D=0,L=3,V=[],W=[];return To(S).forEach(function(se,Ee){var De=!0;if(0===Ee){var rt=!1;De=se.reduce(function(At,Nt){if(rt)if(fn(Nt))switch(Nt.value){case"center":return W.push(Bc),At;case"top":case"left":return W.push(li),At;case"right":case"bottom":return W.push(Ja),At}else(Ys(Nt)||xr(Nt))&&W.push(Nt);else if(fn(Nt))switch(Nt.value){case"circle":return D=0,!1;case Pc:return D=1,!1;case"at":return rt=!0,!1;case hl:return L=0,!1;case"cover":case S2:return L=1,!1;case n1:case M8:return L=2,!1;case Q4:return L=3,!1}else if(xr(Nt)||Ys(Nt))return Array.isArray(L)||(L=[]),L.push(Nt),!1;return At},De)}if(De){var ft=Ia(T,se);V.push(ft)}}),{size:L,shape:D,stops:V,position:W,type:2}},"-moz-radial-gradient":Hc,"-ms-radial-gradient":Hc,"-o-radial-gradient":Hc,"-webkit-radial-gradient":Hc,"-webkit-gradient":function(T,S){var D=Q2(180),L=[],V=1;return To(S).forEach(function(De,rt){var ft=De[0];if(0===rt){if(fn(ft)&&"linear"===ft.value)return void(V=1);if(fn(ft)&&"radial"===ft.value)return void(V=2)}if(18===ft.type)if("from"===ft.name){var At=ul_parse(T,ft.values[0]);L.push({stop:li,color:At})}else if("to"===ft.name)At=ul_parse(T,ft.values[0]),L.push({stop:Ja,color:At});else if("color-stop"===ft.name){var Nt=ft.values.filter(ll);if(2===Nt.length){At=ul_parse(T,Nt[1]);var qn=Nt[0];co(qn)&&L.push({stop:{type:16,number:100*qn.number,flags:qn.flags},color:At})}}}),1===V?{angle:(D+Q2(180))%Q2(360),stops:L,type:V}:{size:3,shape:0,stops:L,position:[],type:V}}},W4={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(T,S){if(0===S.length)return[];var D=S[0];return 20===D.type&&"none"===D.value?[]:S.filter(function(L){return ll(L)&&function Yh(T){return!(20===T.type&&"none"===T.value||18===T.type&&!C1[T.name])}(L)}).map(function(L){return pu_parse(T,L)})}},Ir={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(T,S){return S.map(function(D){if(fn(D))switch(D.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},dl={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(T,S){return To(S).map(function(D){return D.filter(Ys)}).map(Za)}},Yo={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(T,S){return To(S).map(function(D){return D.filter(fn).map(function(L){return L.value}).join(" ")}).map(rg)}},rg=function(T){switch(T){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},gu=(()=>{return(T=gu||(gu={})).AUTO="auto",T.CONTAIN="contain",T.COVER="cover",gu;var T})(),M1={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(T,S){return To(S).map(function(D){return D.filter(mu)})}},mu=function(T){return fn(T)||Ys(T)},n4=function(T){return{name:"border-"+T+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},j4=n4("top"),r1=n4("right"),_a=n4("bottom"),W1=n4("left"),L3=function(T){return{name:"border-radius-"+T,initialValue:"0 0",prefix:!1,type:1,parse:function(S,D){return Za(D.filter(Ys))}}},zc=L3("top-left"),sg=L3("top-right"),ya=L3("bottom-right"),s1=L3("bottom-left"),E8=function(T){return{name:"border-"+T+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(S,D){switch(D){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},E2=E8("top"),$2=E8("right"),nf=E8("bottom"),T8=E8("left"),Au=function(T){return{name:"border-"+T+"-width",initialValue:"0",type:0,prefix:!1,parse:function(S,D){return Hi(D)?D.number:0}}},wa=Au("top"),Zh=Au("right"),vu=Au("bottom"),L8=Au("left"),K2={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_u={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(T,S){return"rtl"===S?1:0}},$4={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(T,S){return S.filter(fn).reduce(function(D,L){return D|Ki(L.value)},0)}},Ki=function(T){switch(T){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},yu={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(T,S){switch(S){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},qi={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(T,S){return 20===S.type&&"normal"===S.value?0:17===S.type||15===S.type?S.number:0}},q2=(()=>{return(T=q2||(q2={})).NORMAL="normal",T.STRICT="strict",q2;var T})(),Jh={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(T,S){return"strict"===S?q2.STRICT:q2.NORMAL}},r4={name:"line-height",initialValue:"normal",prefix:!1,type:4},pc=function(T,S){return fn(T)&&"normal"===T.value?1.2*S:17===T.type?S*T.number:Ys(T)?$i(T,S):S},og={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(T,S){return 20===S.type&&"none"===S.value?null:pu_parse(T,S)}},t2={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(T,S){return"inside"===S?0:1}},Ht={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(T,S){switch(S){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Pr=function(T){return{name:"margin-"+T,initialValue:"0",prefix:!1,type:4}},zn=Pr("top"),h=Pr("right"),d=Pr("bottom"),m=Pr("left"),y={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(T,S){return S.filter(fn).map(function(D){switch(D.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},C={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(T,S){return"break-word"===S?"break-word":"normal"}},F=function(T){return{name:"padding-"+T,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},N=F("top"),q=F("right"),ye=F("bottom"),je=F("left"),yt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(T,S){switch(S){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},vt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(T,S){switch(S){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},gn={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(T,S){return 1===S.length&&Mr(S[0],"none")?[]:To(S).map(function(D){for(var L={color:G1.TRANSPARENT,offsetX:li,offsetY:li,blur:li},V=0,W=0;W<D.length;W++){var se=D[W];xr(se)?(0===V?L.offsetX=se:1===V?L.offsetY=se:L.blur=se,V++):L.color=ul_parse(T,se)}return L})}},En={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(T,S){switch(S){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Pn={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(T,S){if(20===S.type&&"none"===S.value)return null;if(18===S.type){var D=Zo[S.name];if(typeof D>"u")throw new Error('Attempting to parse an unsupported transform function "'+S.name+'"');return D(S.values)}return null}},Zo={matrix:function(T){var S=T.filter(function(D){return 17===D.type}).map(function(D){return D.number});return 6===S.length?S:null},matrix3d:function(T){var S=T.filter(function(De){return 17===De.type}).map(function(De){return De.number});return 16===S.length?[S[0],S[1],S[4],S[5],S[12],S[13]]:null}},S1={type:16,number:50,flags:4},Gl=[S1,S1],Ql={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(T,S){var D=S.filter(Ys);return 2!==D.length?Gl:[D[0],D[1]]}},rf={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(T,S){switch(S){case"hidden":return 1;case"collapse":return 2;default:return 0}}},sf=(()=>{return(T=sf||(sf={})).NORMAL="normal",T.BREAK_ALL="break-all",T.KEEP_ALL="keep-all",sf;var T})(),UA={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(T,S){switch(S){case"break-all":return sf.BREAK_ALL;case"keep-all":return sf.KEEP_ALL;default:return sf.NORMAL}}},gD={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(T,S){if(20===S.type)return{auto:!0,order:0};if(co(S))return{auto:!1,order:S.number};throw new Error("Invalid z-index number parsed")}},GA={name:"time",parse:function(T,S){if(15===S.type)switch(S.unit.toLowerCase()){case"s":return 1e3*S.number;case"ms":return S.number}throw new Error("Unsupported time type")}},QA={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(T,S){return co(S)?S.number:1}},kw={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Fw={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(T,S){return S.filter(fn).map(function(D){switch(D.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(D){return 0!==D})}},Pw={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(T,S){var D=[],L=[];return S.forEach(function(V){switch(V.type){case 20:case 0:D.push(V.value);break;case 17:D.push(V.number.toString());break;case 4:L.push(D.join(" ")),D.length=0}}),D.length&&L.push(D.join(" ")),L.map(function(V){return-1===V.indexOf(" ")?V:"'"+V+"'"})}},Hw={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},WA={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(T,S){return co(S)?S.number:fn(S)&&"bold"===S.value?700:400}},mD={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(T,S){return S.filter(fn).map(function(D){return D.value})}},AD={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(T,S){switch(S){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Js=function(T,S){return 0!=(T&S)},e0={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(T,S){if(0===S.length)return[];var D=S[0];return 20===D.type&&"none"===D.value?[]:S}},o1={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(T,S){if(0===S.length)return null;var D=S[0];if(20===D.type&&"none"===D.value)return null;for(var L=[],V=S.filter(js),W=0;W<V.length;W++){var se=V[W],Ee=V[W+1];if(20===se.type){var De=Ee&&co(Ee)?Ee.number:1;L.push({counter:se.value,increment:De})}}return L}},eo={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(T,S){if(0===S.length)return[];for(var D=[],L=S.filter(js),V=0;V<L.length;V++){var W=L[V],se=L[V+1];if(fn(W)&&"none"!==W.value){var Ee=se&&co(se)?se.number:0;D.push({counter:W.value,reset:Ee})}}return D}},vD={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(T,S){return S.filter(Hi).map(function(D){return GA.parse(T,D)})}},ag={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(T,S){if(0===S.length)return null;var D=S[0];if(20===D.type&&"none"===D.value)return null;var L=[],V=S.filter(Ui);if(V.length%2!=0)return null;for(var W=0;W<V.length;W+=2)L.push({open:V[W].value,close:V[W+1].value});return L}},zw=function(T,S,D){if(!T)return"";var L=T[Math.min(S,T.length-1)];return L?D?L.open:L.close:""},_D={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(T,S){return 1===S.length&&Mr(S[0],"none")?[]:To(S).map(function(D){for(var L={color:255,offsetX:li,offsetY:li,blur:li,spread:li,inset:!1},V=0,W=0;W<D.length;W++){var se=D[W];Mr(se,"inset")?L.inset=!0:xr(se)?(0===V?L.offsetX=se:1===V?L.offsetY=se:2===V?L.blur=se:L.spread=se,V++):L.color=ul_parse(T,se)}return L})}},yD={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(T,S){var L=[];return S.filter(fn).forEach(function(V){switch(V.value){case"stroke":L.push(1);break;case"fill":L.push(0);break;case"markers":L.push(2)}}),[0,1,2].forEach(function(V){-1===L.indexOf(V)&&L.push(V)}),L}},cg={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},lg={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(T,S){return Hi(S)?S.number:0}},ug=function(){function T(S,D){var L,V;this.animationDuration=ui(S,vD,D.animationDuration),this.backgroundClip=ui(S,qh,D.backgroundClip),this.backgroundColor=ui(S,T3,D.backgroundColor),this.backgroundImage=ui(S,W4,D.backgroundImage),this.backgroundOrigin=ui(S,Ir,D.backgroundOrigin),this.backgroundPosition=ui(S,dl,D.backgroundPosition),this.backgroundRepeat=ui(S,Yo,D.backgroundRepeat),this.backgroundSize=ui(S,M1,D.backgroundSize),this.borderTopColor=ui(S,j4,D.borderTopColor),this.borderRightColor=ui(S,r1,D.borderRightColor),this.borderBottomColor=ui(S,_a,D.borderBottomColor),this.borderLeftColor=ui(S,W1,D.borderLeftColor),this.borderTopLeftRadius=ui(S,zc,D.borderTopLeftRadius),this.borderTopRightRadius=ui(S,sg,D.borderTopRightRadius),this.borderBottomRightRadius=ui(S,ya,D.borderBottomRightRadius),this.borderBottomLeftRadius=ui(S,s1,D.borderBottomLeftRadius),this.borderTopStyle=ui(S,E2,D.borderTopStyle),this.borderRightStyle=ui(S,$2,D.borderRightStyle),this.borderBottomStyle=ui(S,nf,D.borderBottomStyle),this.borderLeftStyle=ui(S,T8,D.borderLeftStyle),this.borderTopWidth=ui(S,wa,D.borderTopWidth),this.borderRightWidth=ui(S,Zh,D.borderRightWidth),this.borderBottomWidth=ui(S,vu,D.borderBottomWidth),this.borderLeftWidth=ui(S,L8,D.borderLeftWidth),this.boxShadow=ui(S,_D,D.boxShadow),this.color=ui(S,K2,D.color),this.direction=ui(S,_u,D.direction),this.display=ui(S,$4,D.display),this.float=ui(S,yu,D.cssFloat),this.fontFamily=ui(S,Pw,D.fontFamily),this.fontSize=ui(S,Hw,D.fontSize),this.fontStyle=ui(S,AD,D.fontStyle),this.fontVariant=ui(S,mD,D.fontVariant),this.fontWeight=ui(S,WA,D.fontWeight),this.letterSpacing=ui(S,qi,D.letterSpacing),this.lineBreak=ui(S,Jh,D.lineBreak),this.lineHeight=ui(S,r4,D.lineHeight),this.listStyleImage=ui(S,og,D.listStyleImage),this.listStylePosition=ui(S,t2,D.listStylePosition),this.listStyleType=ui(S,Ht,D.listStyleType),this.marginTop=ui(S,zn,D.marginTop),this.marginRight=ui(S,h,D.marginRight),this.marginBottom=ui(S,d,D.marginBottom),this.marginLeft=ui(S,m,D.marginLeft),this.opacity=ui(S,QA,D.opacity);var W=ui(S,y,D.overflow);this.overflowX=W[0],this.overflowY=W[W.length>1?1:0],this.overflowWrap=ui(S,C,D.overflowWrap),this.paddingTop=ui(S,N,D.paddingTop),this.paddingRight=ui(S,q,D.paddingRight),this.paddingBottom=ui(S,ye,D.paddingBottom),this.paddingLeft=ui(S,je,D.paddingLeft),this.paintOrder=ui(S,yD,D.paintOrder),this.position=ui(S,vt,D.position),this.textAlign=ui(S,yt,D.textAlign),this.textDecorationColor=ui(S,kw,null!==(L=D.textDecorationColor)&&void 0!==L?L:D.color),this.textDecorationLine=ui(S,Fw,null!==(V=D.textDecorationLine)&&void 0!==V?V:D.textDecoration),this.textShadow=ui(S,gn,D.textShadow),this.textTransform=ui(S,En,D.textTransform),this.transform=ui(S,Pn,D.transform),this.transformOrigin=ui(S,Ql,D.transformOrigin),this.visibility=ui(S,rf,D.visibility),this.webkitTextStrokeColor=ui(S,cg,D.webkitTextStrokeColor),this.webkitTextStrokeWidth=ui(S,lg,D.webkitTextStrokeWidth),this.wordBreak=ui(S,UA,D.wordBreak),this.zIndex=ui(S,gD,D.zIndex)}return T.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},T.prototype.isTransparent=function(){return Fc(this.backgroundColor)},T.prototype.isTransformed=function(){return null!==this.transform},T.prototype.isPositioned=function(){return 0!==this.position},T.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},T.prototype.isFloating=function(){return 0!==this.float},T.prototype.isInlineLevel=function(){return Js(this.display,4)||Js(this.display,33554432)||Js(this.display,268435456)||Js(this.display,536870912)||Js(this.display,67108864)||Js(this.display,134217728)},T}(),jA=function T(S,D){this.content=ui(S,e0,D.content),this.quotes=ui(S,ag,D.quotes)},$A=function T(S,D){this.counterIncrement=ui(S,o1,D.counterIncrement),this.counterReset=ui(S,eo,D.counterReset)},ui=function(T,S,D){var L=new dc,V=null!==D&&typeof D<"u"?D.toString():S.initialValue;L.write(V);var W=new M2(L.read());switch(S.type){case 2:var se=W.parseComponentValue();return S.parse(T,fn(se)?se.value:S.initialValue);case 0:return S.parse(T,W.parseComponentValue());case 1:return S.parse(T,W.parseComponentValues());case 4:return W.parseComponentValue();case 3:switch(S.format){case"angle":return t1_parse(T,W.parseComponentValue());case"color":return ul_parse(T,W.parseComponentValue());case"image":return pu_parse(T,W.parseComponentValue());case"length":var Ee=W.parseComponentValue();return xr(Ee)?Ee:li;case"length-percentage":var De=W.parseComponentValue();return Ys(De)?De:li;case"time":return GA.parse(T,W.parseComponentValue())}}},KA=function(T,S){var D=function(T){switch(T.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(T);return 1===D||S===D},s4=function T(S,D){this.context=S,this.textNodes=[],this.elements=[],this.flags=0,KA(D,3),this.styles=new ug(S,window.getComputedStyle(D,null)),u9(D)&&(this.styles.animationDuration.some(function(L){return L>0})&&(D.style.animationDuration="0s"),null!==this.styles.transform&&(D.style.transform="none")),this.bounds=_e(this.context,D),KA(D,4)&&(this.flags|=16)},hg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R8=typeof Uint8Array>"u"?[]:new Uint8Array(256),fg=0;fg<hg.length;fg++)R8[hg.charCodeAt(fg)]=fg;for(var Uw=function(T,S,D){return T.slice?T.slice(S,D):new Uint16Array(Array.prototype.slice.call(T,S,D))},JA=function(){function T(S,D,L,V,W,se){this.initialValue=S,this.errorValue=D,this.highStart=L,this.highValueIndex=V,this.index=W,this.data=se}return T.prototype.get=function(S){var D;if(S>=0){if(S<55296||S>56319&&S<=65535)return this.data[D=((D=this.index[S>>5])<<2)+(31&S)];if(S<=65535)return this.data[D=((D=this.index[2048+(S-55296>>5)])<<2)+(31&S)];if(S<this.highStart)return D=this.index[D=2080+(S>>11)],this.data[D=((D=this.index[D+=S>>5&63])<<2)+(31&S)];if(S<=1114111)return this.data[this.highValueIndex]}return this.errorValue},T}(),k8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mg=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ag=0;Ag<k8.length;Ag++)mg[k8.charCodeAt(Ag)]=Ag;var Vd=8,t9=9,n9=11,af=12,jw=function(){for(var T=[],S=0;S<arguments.length;S++)T[S]=arguments[S];if(String.fromCodePoint)return String.fromCodePoint.apply(String,T);var D=T.length;if(!D)return"";for(var L=[],V=-1,W="";++V<D;){var se=T[V];se<=65535?L.push(se):L.push(55296+((se-=65536)>>10),se%1024+56320),(V+1===D||L.length>16384)&&(W+=String.fromCharCode.apply(String,L),L.length=0)}return W},D3=function(T,S){var D=function(T){var L,W,se,Ee,De,S=.75*T.length,D=T.length,V=0;"="===T[T.length-1]&&(S--,"="===T[T.length-2]&&S--);var rt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(S):new Array(S),ft=Array.isArray(rt)?rt:new Uint8Array(rt);for(L=0;L<D;L+=4)W=R8[T.charCodeAt(L)],se=R8[T.charCodeAt(L+1)],Ee=R8[T.charCodeAt(L+2)],De=R8[T.charCodeAt(L+3)],ft[V++]=W<<2|se>>4,ft[V++]=(15&se)<<4|Ee>>2,ft[V++]=(3&Ee)<<6|63&De;return rt}(T),L=Array.isArray(D)?function(T){for(var S=T.length,D=[],L=0;L<S;L+=4)D.push(T[L+3]<<24|T[L+2]<<16|T[L+1]<<8|T[L]);return D}(D):new Uint32Array(D),V=Array.isArray(D)?function(T){for(var S=T.length,D=[],L=0;L<S;L+=2)D.push(T[L+1]<<8|T[L]);return D}(D):new Uint16Array(D),se=Uw(V,12,L[4]/2),Ee=2===L[5]?Uw(V,(24+L[4])/2):function(T,S,D){return T.slice?T.slice(S,D):new Uint32Array(Array.prototype.slice.call(T,S,D))}(L,Math.ceil((24+L[4])/4));return new JA(L[0],L[1],L[2],L[3],se,Ee)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Ud=function(T){return D3.get(T)},$w=function(T,S,D){var L=D-2,V=S[L],W=S[D-1],se=S[D];if(2===W&&3===se)return"\xd7";if(2===W||3===W||4===W||2===se||3===se||4===se)return"\xf7";if(W===Vd&&-1!==[Vd,t9,n9,af].indexOf(se)||(W===n9||W===t9)&&(se===t9||10===se)||(W===af||10===W)&&10===se||13===se||5===se||7===se||1===W)return"\xd7";if(13===W&&14===se){for(;5===V;)V=S[--L];if(14===V)return"\xd7"}if(15===W&&15===se){for(var Ee=0;15===V;)Ee++,V=S[--L];if(Ee%2==0)return"\xd7"}return"\xf7"},i9=function(T){var S=function(T){for(var S=[],D=0,L=T.length;D<L;){var V=T.charCodeAt(D++);if(V>=55296&&V<=56319&&D<L){var W=T.charCodeAt(D++);56320==(64512&W)?S.push(((1023&V)<<10)+(1023&W)+65536):(S.push(V),D--)}else S.push(V)}return S}(T),D=S.length,L=0,V=0,W=S.map(Ud);return{next:function(){if(L>=D)return{done:!0,value:null};for(var se="\xd7";L<D&&"\xd7"===(se=$w(0,W,++L)););if("\xd7"!==se||L===D){var Ee=jw.apply(null,S.slice(V,L));return V=L,{value:Ee,done:!1}}return{done:!0,value:null}}}},CD=function(T){return 0===T[0]&&255===T[1]&&0===T[2]&&255===T[3]},Kw=function(T,S,D,L,V){var W="http://www.w3.org/2000/svg",se=document.createElementNS(W,"svg"),Ee=document.createElementNS(W,"foreignObject");return se.setAttributeNS(null,"width",T.toString()),se.setAttributeNS(null,"height",S.toString()),Ee.setAttributeNS(null,"width","100%"),Ee.setAttributeNS(null,"height","100%"),Ee.setAttributeNS(null,"x",D.toString()),Ee.setAttributeNS(null,"y",L.toString()),Ee.setAttributeNS(null,"externalResourcesRequired","true"),se.appendChild(Ee),Ee.appendChild(V),se},MD=function(T){return new Promise(function(S,D){var L=new Image;L.onload=function(){return S(L)},L.onerror=D,L.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(T))})},T2={get SUPPORT_RANGE_BOUNDS(){var T=function(T){if(T.createRange){var D=T.createRange();if(D.getBoundingClientRect){var L=T.createElement("boundtest");L.style.height="123px",L.style.display="block",T.body.appendChild(L),D.selectNode(L);var V=D.getBoundingClientRect(),W=Math.round(V.height);if(T.body.removeChild(L),123===W)return!0}}return!1}(document);return Object.defineProperty(T2,"SUPPORT_RANGE_BOUNDS",{value:T}),T},get SUPPORT_WORD_BREAKING(){var T=T2.SUPPORT_RANGE_BOUNDS&&function(T){var S=T.createElement("boundtest");S.style.width="50px",S.style.display="block",S.style.fontSize="12px",S.style.letterSpacing="0px",S.style.wordSpacing="0px",T.body.appendChild(S);var D=T.createRange();S.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var L=S.firstChild,V=Je(L.data).map(function(De){return ot(De)}),W=0,se={},Ee=V.every(function(De,rt){D.setStart(L,W),D.setEnd(L,W+De.length);var ft=D.getBoundingClientRect();W+=De.length;var At=ft.x>se.x||ft.y>se.y;return se=ft,0===rt||At});return T.body.removeChild(S),Ee}(document);return Object.defineProperty(T2,"SUPPORT_WORD_BREAKING",{value:T}),T},get SUPPORT_SVG_DRAWING(){var T=function(T){var S=new Image,D=T.createElement("canvas"),L=D.getContext("2d");if(!L)return!1;S.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{L.drawImage(S,0,0),D.toDataURL()}catch{return!1}return!0}(document);return Object.defineProperty(T2,"SUPPORT_SVG_DRAWING",{value:T}),T},get SUPPORT_FOREIGNOBJECT_DRAWING(){var T="function"==typeof Array.from&&"function"==typeof window.fetch?function(T){var S=T.createElement("canvas"),D=100;S.width=D,S.height=D;var L=S.getContext("2d");if(!L)return Promise.reject(!1);L.fillStyle="rgb(0, 255, 0)",L.fillRect(0,0,D,D);var V=new Image,W=S.toDataURL();V.src=W;var se=Kw(D,D,0,0,V);return L.fillStyle="red",L.fillRect(0,0,D,D),MD(se).then(function(Ee){L.drawImage(Ee,0,0);var De=L.getImageData(0,0,D,D).data;L.fillStyle="red",L.fillRect(0,0,D,D);var rt=T.createElement("div");return rt.style.backgroundImage="url("+W+")",rt.style.height=D+"px",CD(De)?MD(Kw(D,D,0,0,rt)):Promise.reject(!1)}).then(function(Ee){return L.drawImage(Ee,0,0),CD(L.getImageData(0,0,D,D).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(T2,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:T}),T},get SUPPORT_CORS_IMAGES(){var T=typeof(new Image).crossOrigin<"u";return Object.defineProperty(T2,"SUPPORT_CORS_IMAGES",{value:T}),T},get SUPPORT_RESPONSE_TYPE(){var T="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(T2,"SUPPORT_RESPONSE_TYPE",{value:T}),T},get SUPPORT_CORS_XHR(){var T="withCredentials"in new XMLHttpRequest;return Object.defineProperty(T2,"SUPPORT_CORS_XHR",{value:T}),T},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var T=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(T2,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:T}),T}},K4=function T(S,D){this.text=S,this.bounds=D},TQ=function(T,S){var D=S.ownerDocument;if(D){var L=D.createElement("html2canvaswrapper");L.appendChild(S.cloneNode(!0));var V=S.parentNode;if(V){V.replaceChild(L,S);var W=_e(T,L);return L.firstChild&&V.replaceChild(L.firstChild,L),W}}return Te.EMPTY},j1=function(T,S,D){var L=T.ownerDocument;if(!L)throw new Error("Node has no owner document");var V=L.createRange();return V.setStart(T,S),V.setEnd(T,S+D),V},P8=function(T){if(T2.SUPPORT_NATIVE_TEXT_SEGMENTATION){var S=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(S.segment(T)).map(function(D){return D.segment})}return function(T){for(var L,S=i9(T),D=[];!(L=S.next()).done;)L.value&&D.push(L.value.slice());return D}(T)},LQ=function(T,S){return 0!==S.letterSpacing?P8(T):function(T,S){if(T2.SUPPORT_NATIVE_TEXT_SEGMENTATION){var D=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(D.segment(T)).map(function(L){return L.segment})}return Wl(T,S)}(T,S)},SD=[32,160,4961,65792,65793,4153,4241],Wl=function(T,S){for(var V,D=function(T,S){var D=Je(T),L=x8(D,S),V=L[0],W=L[1],se=L[2],Ee=D.length,De=0,rt=0;return{next:function(){if(rt>=Ee)return{done:!0,value:null};for(var ft=Or;rt<Ee&&(ft=O1(D,W,V,++rt,se))===Or;);if(ft!==Or||rt===Ee){var At=new Uo(D,ft,De,rt);return De=rt,{value:At,done:!1}}return{done:!0,value:null}}}}(T,{lineBreak:S.lineBreak,wordBreak:"break-word"===S.overflowWrap?"break-word":S.wordBreak}),L=[],W=function(){if(V.value){var se=V.value.slice(),Ee=Je(se),De="";Ee.forEach(function(rt){-1===SD.indexOf(rt)?De+=ot(rt):(De.length&&L.push(De),L.push(ot(rt)),De="")}),De.length&&L.push(De)}};!(V=D.next()).done;)W();return L},q4=function T(S,D,L){this.text=qw(D.data,L.textTransform),this.textBounds=function(T,S,D,L){var V=LQ(S,D),W=[],se=0;return V.forEach(function(Ee){if(D.textDecorationLine.length||Ee.trim().length>0)if(T2.SUPPORT_RANGE_BOUNDS){var De=j1(L,se,Ee.length).getClientRects();if(De.length>1){var rt=P8(Ee),ft=0;rt.forEach(function(Nt){W.push(new K4(Nt,Te.fromDOMRectList(T,j1(L,ft+se,Nt.length).getClientRects()))),ft+=Nt.length})}else W.push(new K4(Ee,Te.fromDOMRectList(T,De)))}else{var At=L.splitText(Ee.length);W.push(new K4(Ee,TQ(T,L))),L=At}else T2.SUPPORT_RANGE_BOUNDS||(L=L.splitText(Ee.length));se+=Ee.length}),W}(S,this.text,L,D)},qw=function(T,S){switch(S){case 1:return T.toLowerCase();case 3:return T.replace(bg,z8);case 2:return T.toUpperCase();default:return T}},bg=/(^|\s|:|-|\(|\))([a-z])/g,z8=function(T,S,D){return T.length>0?S+D.toUpperCase():T},r9=function(T){function S(D,L){var V=T.call(this,D,L)||this;return V.src=L.currentSrc||L.src,V.intrinsicWidth=L.naturalWidth,V.intrinsicHeight=L.naturalHeight,V.context.cache.addImage(V.src),V}return ae(S,T),S}(s4),Xw=function(T){function S(D,L){var V=T.call(this,D,L)||this;return V.canvas=L,V.intrinsicWidth=L.width,V.intrinsicHeight=L.height,V}return ae(S,T),S}(s4),Yw=function(T){function S(D,L){var V=T.call(this,D,L)||this,W=new XMLSerializer,se=_e(D,L);return L.setAttribute("width",se.width+"px"),L.setAttribute("height",se.height+"px"),V.svg="data:image/svg+xml,"+encodeURIComponent(W.serializeToString(L)),V.intrinsicWidth=L.width.baseVal.value,V.intrinsicHeight=L.height.baseVal.value,V.context.cache.addImage(V.svg),V}return ae(S,T),S}(s4),ED=function(T){function S(D,L){var V=T.call(this,D,L)||this;return V.value=L.value,V}return ae(S,T),S}(s4),Zw=function(T){function S(D,L){var V=T.call(this,D,L)||this;return V.start=L.start,V.reversed="boolean"==typeof L.reversed&&!0===L.reversed,V}return ae(S,T),S}(s4),Jw=[{type:15,flags:0,unit:"px",number:3}],jl=[{type:16,flags:0,number:50}],o9="checkbox",O8="radio",TD="password",eb=707406591,a9=function(T){function S(D,L){var V=T.call(this,D,L)||this;switch(V.type=L.type.toLowerCase(),V.checked=L.checked,V.value=function(T){var S=T.type===TD?new Array(T.value.length+1).join("\u2022"):T.value;return 0===S.length?T.placeholder||"":S}(L),(V.type===o9||V.type===O8)&&(V.styles.backgroundColor=3739148031,V.styles.borderTopColor=V.styles.borderRightColor=V.styles.borderBottomColor=V.styles.borderLeftColor=2779096575,V.styles.borderTopWidth=V.styles.borderRightWidth=V.styles.borderBottomWidth=V.styles.borderLeftWidth=1,V.styles.borderTopStyle=V.styles.borderRightStyle=V.styles.borderBottomStyle=V.styles.borderLeftStyle=1,V.styles.backgroundClip=[0],V.styles.backgroundOrigin=[0],V.bounds=function(T){return T.width>T.height?new Te(T.left+(T.width-T.height)/2,T.top,T.height,T.height):T.width<T.height?new Te(T.left,T.top+(T.height-T.width)/2,T.width,T.width):T}(V.bounds)),V.type){case o9:V.styles.borderTopRightRadius=V.styles.borderTopLeftRadius=V.styles.borderBottomRightRadius=V.styles.borderBottomLeftRadius=Jw;break;case O8:V.styles.borderTopRightRadius=V.styles.borderTopLeftRadius=V.styles.borderBottomRightRadius=V.styles.borderBottomLeftRadius=jl}return V}return ae(S,T),S}(s4),tb=function(T){function S(D,L){var V=T.call(this,D,L)||this,W=L.options[L.selectedIndex||0];return V.value=W&&W.text||"",V}return ae(S,T),S}(s4),nb=function(T){function S(D,L){var V=T.call(this,D,L)||this;return V.value=L.value,V}return ae(S,T),S}(s4),ib=function(T){function S(D,L){var V=T.call(this,D,L)||this;V.src=L.src,V.width=parseInt(L.width,10)||0,V.height=parseInt(L.height,10)||0,V.backgroundColor=V.styles.backgroundColor;try{if(L.contentWindow&&L.contentWindow.document&&L.contentWindow.document.documentElement){V.tree=Wd(D,L.contentWindow.document.documentElement);var W=L.contentWindow.document.documentElement?Xo(D,getComputedStyle(L.contentWindow.document.documentElement).backgroundColor):G1.TRANSPARENT,se=L.contentWindow.document.body?Xo(D,getComputedStyle(L.contentWindow.document.body).backgroundColor):G1.TRANSPARENT;V.backgroundColor=Fc(W)?Fc(se)?V.styles.backgroundColor:se:W}}catch{}return V}return ae(S,T),S}(s4),c9=["OL","UL","MENU"],cf=function(T,S,D,L){for(var V=S.firstChild,W=void 0;V;V=W)if(W=V.nextSibling,rb(V)&&V.data.trim().length>0)D.textNodes.push(new q4(T,V,D.styles));else if(jd(V))if(s0(V)&&V.assignedNodes)V.assignedNodes().forEach(function(Ee){return cf(T,Ee,D,L)});else{var se=LD(T,V);se.styles.isVisible()&&(l9(V,se,L)?se.flags|=4:xg(se.styles)&&(se.flags|=2),-1!==c9.indexOf(V.tagName)&&(se.flags|=8),D.elements.push(se),V.shadowRoot?cf(T,V.shadowRoot,se,L):!I3(V)&&!h9(V)&&!U8(V)&&cf(T,V,se,L))}},LD=function(T,S){return f9(S)?new r9(T,S):Cg(S)?new Xw(T,S):h9(S)?new Yw(T,S):V8(S)?new ED(T,S):$d(S)?new Zw(T,S):DD(S)?new a9(T,S):U8(S)?new tb(T,S):I3(S)?new nb(T,S):sb(S)?new ib(T,S):new s4(T,S)},Wd=function(T,S){var D=LD(T,S);return D.flags|=4,cf(T,S,D,D),D},l9=function(T,S,D){return S.styles.isPositionedWithZIndex()||S.styles.opacity<1||S.styles.isTransformed()||Os(T)&&D.styles.isTransparent()},xg=function(T){return T.isPositioned()||T.isFloating()},rb=function(T){return T.nodeType===Node.TEXT_NODE},jd=function(T){return T.nodeType===Node.ELEMENT_NODE},u9=function(T){return jd(T)&&typeof T.style<"u"&&!N8(T)},N8=function(T){return"object"==typeof T.className},V8=function(T){return"LI"===T.tagName},$d=function(T){return"OL"===T.tagName},DD=function(T){return"INPUT"===T.tagName},h9=function(T){return"svg"===T.tagName},Os=function(T){return"BODY"===T.tagName},Cg=function(T){return"CANVAS"===T.tagName},Kd=function(T){return"VIDEO"===T.tagName},f9=function(T){return"IMG"===T.tagName},sb=function(T){return"IFRAME"===T.tagName},ob=function(T){return"STYLE"===T.tagName},I3=function(T){return"TEXTAREA"===T.tagName},U8=function(T){return"SELECT"===T.tagName},s0=function(T){return"SLOT"===T.tagName},ab=function(T){return T.tagName.indexOf("-")>0},cb=function(){function T(){this.counters={}}return T.prototype.getCounterValue=function(S){var D=this.counters[S];return D&&D.length?D[D.length-1]:1},T.prototype.getCounterValues=function(S){return this.counters[S]||[]},T.prototype.pop=function(S){var D=this;S.forEach(function(L){return D.counters[L].pop()})},T.prototype.parse=function(S){var D=this,L=S.counterIncrement,V=S.counterReset,W=!0;null!==L&&L.forEach(function(Ee){var De=D.counters[Ee.counter];De&&0!==Ee.increment&&(W=!1,De.length||De.push(1),De[Math.max(0,De.length-1)]+=Ee.increment)});var se=[];return W&&V.forEach(function(Ee){var De=D.counters[Ee.counter];se.push(Ee.counter),De||(De=D.counters[Ee.counter]=[]),De.push(Ee.reset)}),se},T}(),qd={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},G8={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},lb={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},ID={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Xd=function(T,S,D,L,V,W){return T<S||T>D?j8(T,V,W.length>0):L.integers.reduce(function(se,Ee,De){for(;T>=Ee;)T-=Ee,se+=L.values[De];return se},"")+W},lf=function(T,S,D,L){var V="";do{D||T--,V=L(T)+V,T/=S}while(T*S>=S);return V},ba=function(T,S,D,L,V){var W=D-S+1;return(T<0?"-":"")+(lf(Math.abs(T),W,L,function(se){return ot(Math.floor(se%W)+S)})+V)},uf=function(T,S,D){void 0===D&&(D=". ");var L=S.length;return lf(Math.abs(T),L,!1,function(V){return S[Math.floor(V%L)]})+D},Y4=function(T,S,D,L,V,W){if(T<-9999||T>9999)return j8(T,4,V.length>0);var se=Math.abs(T),Ee=V;if(0===se)return S[0]+Ee;for(var De=0;se>0&&De<=4;De++){var rt=se%10;0===rt&&Js(W,1)&&""!==Ee?Ee=S[rt]+Ee:rt>1||1===rt&&0===De||1===rt&&1===De&&Js(W,2)||1===rt&&1===De&&Js(W,4)&&T>100||1===rt&&De>1&&Js(W,8)?Ee=S[rt]+(De>0?D[De-1]:"")+Ee:1===rt&&De>0&&(Ee=D[De-1]+Ee),se=Math.floor(se/10)}return(T<0?L:"")+Ee},Sg="\ub9c8\uc774\ub108\uc2a4",j8=function(T,S,D){var L=D?". ":"",V=D?"\u3001":"",W=D?", ":"",se=D?" ":"";switch(S){case 0:return"\u2022"+se;case 1:return"\u25e6"+se;case 2:return"\u25fe"+se;case 5:var Ee=ba(T,48,57,!0,L);return Ee.length<4?"0"+Ee:Ee;case 4:return uf(T,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",V);case 6:return Xd(T,1,3999,qd,3,L).toLowerCase();case 7:return Xd(T,1,3999,qd,3,L);case 8:return ba(T,945,969,!1,L);case 9:return ba(T,97,122,!1,L);case 10:return ba(T,65,90,!1,L);case 11:return ba(T,1632,1641,!0,L);case 12:case 49:return Xd(T,1,9999,G8,3,L);case 35:return Xd(T,1,9999,G8,3,L).toLowerCase();case 13:return ba(T,2534,2543,!0,L);case 14:case 30:return ba(T,6112,6121,!0,L);case 15:return uf(T,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",V);case 16:return uf(T,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",V);case 17:case 48:return Y4(T,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8ca0",V,14);case 47:return Y4(T,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8ca0",V,15);case 42:return Y4(T,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8d1f",V,14);case 41:return Y4(T,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8d1f",V,15);case 26:return Y4(T,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",V,0);case 25:return Y4(T,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",V,7);case 31:return Y4(T,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Sg,W,7);case 33:return Y4(T,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Sg,W,0);case 32:return Y4(T,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Sg,W,7);case 18:return ba(T,2406,2415,!0,L);case 20:return Xd(T,1,19999,ID,3,L);case 21:return ba(T,2790,2799,!0,L);case 22:return ba(T,2662,2671,!0,L);case 22:return Xd(T,1,10999,lb,3,L);case 23:return uf(T,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return uf(T,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return ba(T,3302,3311,!0,L);case 28:return uf(T,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",V);case 29:return uf(T,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",V);case 34:return ba(T,3792,3801,!0,L);case 37:return ba(T,6160,6169,!0,L);case 38:return ba(T,4160,4169,!0,L);case 39:return ba(T,2918,2927,!0,L);case 40:return ba(T,1776,1785,!0,L);case 43:return ba(T,3046,3055,!0,L);case 44:return ba(T,3174,3183,!0,L);case 45:return ba(T,3664,3673,!0,L);case 46:return ba(T,3872,3881,!0,L);default:return ba(T,48,57,!0,L)}},p9="data-html2canvas-ignore",RD=function(){function T(S,D,L){if(this.context=S,this.options=L,this.scrolledElements=[],this.referenceElement=D,this.counters=new cb,this.quoteDepth=0,!D.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(D.ownerDocument.documentElement,!1)}return T.prototype.toIFrame=function(S,D){var L=this,V=DQ(S,D);if(!V.contentWindow)return Promise.reject("Unable to find iframe window");var W=S.defaultView.pageXOffset,se=S.defaultView.pageYOffset,Ee=V.contentWindow,De=Ee.document,rt=fb(V).then(function(){return ve(L,void 0,void 0,function(){var ft,At;return Be(this,function(Nt){switch(Nt.label){case 0:return this.scrolledElements.forEach(FD),Ee&&(Ee.scrollTo(D.left,D.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(Ee.scrollY!==D.top||Ee.scrollX!==D.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(Ee.scrollX-D.left,Ee.scrollY-D.top,0,0))),ft=this.options.onclone,typeof(At=this.clonedReferenceElement)>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:De.fonts&&De.fonts.ready?[4,De.fonts.ready]:[3,2];case 1:Nt.sent(),Nt.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,BD(De)]:[3,4];case 3:Nt.sent(),Nt.label=4;case 4:return"function"==typeof ft?[2,Promise.resolve().then(function(){return ft(De,At)}).then(function(){return V})]:[2,V]}})})});return De.open(),De.write(Yd(document.doctype)+"<html></html>"),kD(this.referenceElement.ownerDocument,W,se),De.replaceChild(De.adoptNode(this.documentElement),De.documentElement),De.close(),rt},T.prototype.createElementClone=function(S){if(KA(S,2),Cg(S))return this.createCanvasClone(S);if(Kd(S))return this.createVideoClone(S);if(ob(S))return this.createStyleClone(S);var D=S.cloneNode(!1);return f9(D)&&(f9(S)&&S.currentSrc&&S.currentSrc!==S.src&&(D.src=S.currentSrc,D.srcset=""),"lazy"===D.loading&&(D.loading="eager")),ab(D)?this.createCustomElementClone(D):D},T.prototype.createCustomElementClone=function(S){var D=document.createElement("html2canvascustomelement");return $8(S.style,D),D},T.prototype.createStyleClone=function(S){try{var D=S.sheet;if(D&&D.cssRules){var L=[].slice.call(D.cssRules,0).reduce(function(W,se){return se&&"string"==typeof se.cssText?W+se.cssText:W},""),V=S.cloneNode(!1);return V.textContent=L,V}}catch(W){if(this.context.logger.error("Unable to access cssRules property",W),"SecurityError"!==W.name)throw W}return S.cloneNode(!1)},T.prototype.createCanvasClone=function(S){var D;if(this.options.inlineImages&&S.ownerDocument){var L=S.ownerDocument.createElement("img");try{return L.src=S.toDataURL(),L}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",S)}}var V=S.cloneNode(!1);try{V.width=S.width,V.height=S.height;var W=S.getContext("2d"),se=V.getContext("2d");if(se)if(!this.options.allowTaint&&W)se.putImageData(W.getImageData(0,0,S.width,S.height),0,0);else{var Ee=null!==(D=S.getContext("webgl2"))&&void 0!==D?D:S.getContext("webgl");Ee&&!1===Ee.getContextAttributes()?.preserveDrawingBuffer&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",S),se.drawImage(S,0,0)}return V}catch{this.context.logger.info("Unable to clone canvas as it is tainted",S)}return V},T.prototype.createVideoClone=function(S){var D=S.ownerDocument.createElement("canvas");D.width=S.offsetWidth,D.height=S.offsetHeight;var L=D.getContext("2d");try{return L&&(L.drawImage(S,0,0,D.width,D.height),this.options.allowTaint||L.getImageData(0,0,D.width,D.height)),D}catch{this.context.logger.info("Unable to clone video as it is tainted",S)}var V=S.ownerDocument.createElement("canvas");return V.width=S.offsetWidth,V.height=S.offsetHeight,V},T.prototype.appendChildNode=function(S,D,L){(!jd(D)||!function(T){return"SCRIPT"===T.tagName}(D)&&!D.hasAttribute(p9)&&("function"!=typeof this.options.ignoreElements||!this.options.ignoreElements(D)))&&(!this.options.copyStyles||!jd(D)||!ob(D))&&S.appendChild(this.cloneNode(D,L))},T.prototype.cloneChildNodes=function(S,D,L){for(var V=this,W=S.shadowRoot?S.shadowRoot.firstChild:S.firstChild;W;W=W.nextSibling)if(jd(W)&&s0(W)&&"function"==typeof W.assignedNodes){var se=W.assignedNodes();se.length&&se.forEach(function(Ee){return V.appendChildNode(D,Ee,L)})}else this.appendChildNode(D,W,L)},T.prototype.cloneNode=function(S,D){if(rb(S))return document.createTextNode(S.data);if(!S.ownerDocument)return S.cloneNode(!1);var L=S.ownerDocument.defaultView;if(L&&jd(S)&&(u9(S)||N8(S))){var V=this.createElementClone(S);V.style.transitionProperty="none";var W=L.getComputedStyle(S),se=L.getComputedStyle(S,":before"),Ee=L.getComputedStyle(S,":after");this.referenceElement===S&&u9(V)&&(this.clonedReferenceElement=V),Os(V)&&db(V);var De=this.counters.parse(new $A(this.context,W)),rt=this.resolvePseudoContent(S,V,se,hf.BEFORE);ab(S)&&(D=!0),Kd(S)||this.cloneChildNodes(S,V,D),rt&&V.insertBefore(rt,V.firstChild);var ft=this.resolvePseudoContent(S,V,Ee,hf.AFTER);return ft&&V.appendChild(ft),this.counters.pop(De),(W&&(this.options.copyStyles||N8(S))&&!sb(S)||D)&&$8(W,V),(0!==S.scrollTop||0!==S.scrollLeft)&&this.scrolledElements.push([V,S.scrollLeft,S.scrollTop]),(I3(S)||U8(S))&&(I3(V)||U8(V))&&(V.value=S.value),V}return S.cloneNode(!1)},T.prototype.resolvePseudoContent=function(S,D,L,V){var W=this;if(L){var se=L.content,Ee=D.ownerDocument;if(Ee&&se&&"none"!==se&&"-moz-alt-content"!==se&&"none"!==L.display){this.counters.parse(new $A(this.context,L));var De=new jA(this.context,L),rt=Ee.createElement("html2canvaspseudoelement");$8(L,rt),De.content.forEach(function(At){if(0===At.type)rt.appendChild(Ee.createTextNode(At.value));else if(22===At.type){var Nt=Ee.createElement("img");Nt.src=At.value,Nt.style.opacity="1",rt.appendChild(Nt)}else if(18===At.type){if("attr"===At.name){var qn=At.values.filter(fn);qn.length&&rt.appendChild(Ee.createTextNode(S.getAttribute(qn[0].value)||""))}else if("counter"===At.name){var Ln=At.values.filter(ll),Rr=Ln[1];if((Xn=Ln[0])&&fn(Xn)){var xi=W.counters.getCounterValue(Xn.value),mi=Rr&&fn(Rr)?Ht.parse(W.context,Rr.value):3;rt.appendChild(Ee.createTextNode(j8(xi,mi,!1)))}}else if("counters"===At.name){var Xn,uo=At.values.filter(ll),Br=uo[1];if(Rr=uo[2],(Xn=uo[0])&&fn(Xn)){var dr=W.counters.getCounterValues(Xn.value),ni=Rr&&fn(Rr)?Ht.parse(W.context,Rr.value):3,to=Br&&0===Br.type?Br.value:"",$s=dr.map(function(gc){return j8(gc,ni,!1)}).join(to);rt.appendChild(Ee.createTextNode($s))}}}else if(20===At.type)switch(At.value){case"open-quote":rt.appendChild(Ee.createTextNode(zw(De.quotes,W.quoteDepth++,!0)));break;case"close-quote":rt.appendChild(Ee.createTextNode(zw(De.quotes,--W.quoteDepth,!1)));break;default:rt.appendChild(Ee.createTextNode(At.value))}}),rt.className=K8+" "+Lg;var ft=V===hf.BEFORE?" "+K8:" "+Lg;return N8(D)?D.className.baseValue+=ft:D.className+=ft,rt}}},T.destroy=function(S){return!!S.parentNode&&(S.parentNode.removeChild(S),!0)},T}(),hf=(()=>{return(T=hf||(hf={}))[T.BEFORE=0]="BEFORE",T[T.AFTER=1]="AFTER",hf;var T})(),DQ=function(T,S){var D=T.createElement("iframe");return D.className="html2canvas-container",D.style.visibility="hidden",D.style.position="fixed",D.style.left="-10000px",D.style.top="0px",D.style.border="0",D.width=S.width.toString(),D.height=S.height.toString(),D.scrolling="no",D.setAttribute(p9,"true"),T.body.appendChild(D),D},g9=function(T){return new Promise(function(S){T.complete?S():T.src?(T.onload=S,T.onerror=S):S()})},BD=function(T){return Promise.all([].slice.call(T.images,0).map(g9))},fb=function(T){return new Promise(function(S,D){var L=T.contentWindow;if(!L)return D("No window assigned for iframe");var V=L.document;L.onload=T.onload=function(){L.onload=T.onload=null;var W=setInterval(function(){V.body.childNodes.length>0&&"complete"===V.readyState&&(clearInterval(W),S(T))},50)}})},Eg=["all","d","content"],$8=function(T,S){for(var D=T.length-1;D>=0;D--){var L=T.item(D);-1===Eg.indexOf(L)&&S.style.setProperty(L,T.getPropertyValue(L))}return S},Yd=function(T){var S="";return T&&(S+="<!DOCTYPE ",T.name&&(S+=T.name),T.internalSubset&&(S+=T.internalSubset),T.publicId&&(S+='"'+T.publicId+'"'),T.systemId&&(S+='"'+T.systemId+'"'),S+=">"),S},kD=function(T,S,D){T&&T.defaultView&&(S!==T.defaultView.pageXOffset||D!==T.defaultView.pageYOffset)&&T.defaultView.scrollTo(S,D)},FD=function(T){var S=T[0],L=T[2];S.scrollLeft=T[1],S.scrollTop=L},K8="___html2canvas___pseudoelement_before",Lg="___html2canvas___pseudoelement_after",m9='{\n    content: "" !important;\n    display: none !important;\n}',db=function(T){ff(T,"."+K8+":before"+m9+"\n         ."+Lg+":after"+m9)},ff=function(T,S){var D=T.ownerDocument;if(D){var L=D.createElement("style");L.textContent=S,T.appendChild(L)}},pb=function(){function T(){}return T.getOrigin=function(S){var D=T._link;return D?(D.href=S,D.href=D.href,D.protocol+D.hostname+D.port):"about:blank"},T.isSameOrigin=function(S){return T.getOrigin(S)===T._origin},T.setContext=function(S){T._link=S.document.createElement("a"),T._origin=T.getOrigin(S.location.href)},T._origin="about:blank",T}(),PD=function(){function T(S,D){this.context=S,this._options=D,this._cache={}}return T.prototype.addImage=function(S){var D=Promise.resolve();return this.has(S)||(A9(S)||$l(S))&&(this._cache[S]=this.loadImage(S)).catch(function(){}),D},T.prototype.match=function(S){return this._cache[S]},T.prototype.loadImage=function(S){return ve(this,void 0,void 0,function(){var D,L,V,W,se=this;return Be(this,function(Ee){switch(Ee.label){case 0:return D=pb.isSameOrigin(S),L=!R3(S)&&!0===this._options.useCORS&&T2.SUPPORT_CORS_IMAGES&&!D,V=!R3(S)&&!D&&!A9(S)&&"string"==typeof this._options.proxy&&T2.SUPPORT_CORS_XHR&&!L,D||!1!==this._options.allowTaint||R3(S)||A9(S)||V||L?(W=S,V?[4,this.proxy(W)]:[3,2]):[2];case 1:W=Ee.sent(),Ee.label=2;case 2:return this.context.logger.debug("Added image "+S.substring(0,256)),[4,new Promise(function(De,rt){var ft=new Image;ft.onload=function(){return De(ft)},ft.onerror=rt,(ND(W)||L)&&(ft.crossOrigin="anonymous"),ft.src=W,!0===ft.complete&&setTimeout(function(){return De(ft)},500),se._options.imageTimeout>0&&setTimeout(function(){return rt("Timed out ("+se._options.imageTimeout+"ms) loading image")},se._options.imageTimeout)})];case 3:return[2,Ee.sent()]}})})},T.prototype.has=function(S){return typeof this._cache[S]<"u"},T.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},T.prototype.proxy=function(S){var D=this,L=this._options.proxy;if(!L)throw new Error("No proxy defined");var V=S.substring(0,256);return new Promise(function(W,se){var Ee=T2.SUPPORT_RESPONSE_TYPE?"blob":"text",De=new XMLHttpRequest;De.onload=function(){if(200===De.status)if("text"===Ee)W(De.response);else{var At=new FileReader;At.addEventListener("load",function(){return W(At.result)},!1),At.addEventListener("error",function(Nt){return se(Nt)},!1),At.readAsDataURL(De.response)}else se("Failed to proxy resource "+V+" with status code "+De.status)},De.onerror=se;var rt=L.indexOf("?")>-1?"&":"?";if(De.open("GET",""+L+rt+"url="+encodeURIComponent(S)+"&responseType="+Ee),"text"!==Ee&&De instanceof XMLHttpRequest&&(De.responseType=Ee),D._options.imageTimeout){var ft=D._options.imageTimeout;De.timeout=ft,De.ontimeout=function(){return se("Timed out ("+ft+"ms) proxying "+V)}}De.send()})},T}(),HD=/^data:image\/svg\+xml/i,zD=/^data:image\/.*;base64,/i,OD=/^data:image\/.*/i,$l=function(T){return T2.SUPPORT_SVG_DRAWING||!VD(T)},R3=function(T){return OD.test(T)},ND=function(T){return zD.test(T)},A9=function(T){return"blob"===T.substr(0,4)},VD=function(T){return"svg"===T.substr(-3).toLowerCase()||HD.test(T)},ti=function(){function T(S,D){this.type=0,this.x=S,this.y=D}return T.prototype.add=function(S,D){return new T(this.x+S,this.y+D)},T}(),Zd=function(T,S,D){return new ti(T.x+(S.x-T.x)*D,T.y+(S.y-T.y)*D)},Dg=function(){function T(S,D,L,V){this.type=1,this.start=S,this.startControl=D,this.endControl=L,this.end=V}return T.prototype.subdivide=function(S,D){var L=Zd(this.start,this.startControl,S),V=Zd(this.startControl,this.endControl,S),W=Zd(this.endControl,this.end,S),se=Zd(L,V,S),Ee=Zd(V,W,S),De=Zd(se,Ee,S);return D?new T(this.start,L,se,De):new T(De,Ee,W,this.end)},T.prototype.add=function(S,D){return new T(this.start.add(S,D),this.startControl.add(S,D),this.endControl.add(S,D),this.end.add(S,D))},T.prototype.reverse=function(){return new T(this.end,this.endControl,this.startControl,this.start)},T}(),Kl=function(T){return 1===T.type},UD=function T(S){var D=S.styles,L=S.bounds,V=kc(D.borderTopLeftRadius,L.width,L.height),W=V[0],se=V[1],Ee=kc(D.borderTopRightRadius,L.width,L.height),De=Ee[0],rt=Ee[1],ft=kc(D.borderBottomRightRadius,L.width,L.height),At=ft[0],Nt=ft[1],qn=kc(D.borderBottomLeftRadius,L.width,L.height),Ln=qn[0],Xn=qn[1],Rr=[];Rr.push((W+De)/L.width),Rr.push((Ln+At)/L.width),Rr.push((se+Xn)/L.height),Rr.push((rt+Nt)/L.height);var xi=Math.max.apply(Math,Rr);xi>1&&(W/=xi,se/=xi,De/=xi,rt/=xi,At/=xi,Nt/=xi,Ln/=xi,Xn/=xi);var mi=L.width-De,uo=L.height-Nt,Br=L.width-At,dr=L.height-Xn,ni=D.borderTopWidth,to=D.borderRightWidth,$s=D.borderBottomWidth,Xi=D.borderLeftWidth,$1=$i(D.paddingTop,S.bounds.width),gc=$i(D.paddingRight,S.bounds.width),mn=$i(D.paddingBottom,S.bounds.width),Qo=$i(D.paddingLeft,S.bounds.width);this.topLeftBorderDoubleOuterBox=W>0||se>0?Ba(L.left+Xi/3,L.top+ni/3,W-Xi/3,se-ni/3,vo.TOP_LEFT):new ti(L.left+Xi/3,L.top+ni/3),this.topRightBorderDoubleOuterBox=W>0||se>0?Ba(L.left+mi,L.top+ni/3,De-to/3,rt-ni/3,vo.TOP_RIGHT):new ti(L.left+L.width-to/3,L.top+ni/3),this.bottomRightBorderDoubleOuterBox=At>0||Nt>0?Ba(L.left+Br,L.top+uo,At-to/3,Nt-$s/3,vo.BOTTOM_RIGHT):new ti(L.left+L.width-to/3,L.top+L.height-$s/3),this.bottomLeftBorderDoubleOuterBox=Ln>0||Xn>0?Ba(L.left+Xi/3,L.top+dr,Ln-Xi/3,Xn-$s/3,vo.BOTTOM_LEFT):new ti(L.left+Xi/3,L.top+L.height-$s/3),this.topLeftBorderDoubleInnerBox=W>0||se>0?Ba(L.left+2*Xi/3,L.top+2*ni/3,W-2*Xi/3,se-2*ni/3,vo.TOP_LEFT):new ti(L.left+2*Xi/3,L.top+2*ni/3),this.topRightBorderDoubleInnerBox=W>0||se>0?Ba(L.left+mi,L.top+2*ni/3,De-2*to/3,rt-2*ni/3,vo.TOP_RIGHT):new ti(L.left+L.width-2*to/3,L.top+2*ni/3),this.bottomRightBorderDoubleInnerBox=At>0||Nt>0?Ba(L.left+Br,L.top+uo,At-2*to/3,Nt-2*$s/3,vo.BOTTOM_RIGHT):new ti(L.left+L.width-2*to/3,L.top+L.height-2*$s/3),this.bottomLeftBorderDoubleInnerBox=Ln>0||Xn>0?Ba(L.left+2*Xi/3,L.top+dr,Ln-2*Xi/3,Xn-2*$s/3,vo.BOTTOM_LEFT):new ti(L.left+2*Xi/3,L.top+L.height-2*$s/3),this.topLeftBorderStroke=W>0||se>0?Ba(L.left+Xi/2,L.top+ni/2,W-Xi/2,se-ni/2,vo.TOP_LEFT):new ti(L.left+Xi/2,L.top+ni/2),this.topRightBorderStroke=W>0||se>0?Ba(L.left+mi,L.top+ni/2,De-to/2,rt-ni/2,vo.TOP_RIGHT):new ti(L.left+L.width-to/2,L.top+ni/2),this.bottomRightBorderStroke=At>0||Nt>0?Ba(L.left+Br,L.top+uo,At-to/2,Nt-$s/2,vo.BOTTOM_RIGHT):new ti(L.left+L.width-to/2,L.top+L.height-$s/2),this.bottomLeftBorderStroke=Ln>0||Xn>0?Ba(L.left+Xi/2,L.top+dr,Ln-Xi/2,Xn-$s/2,vo.BOTTOM_LEFT):new ti(L.left+Xi/2,L.top+L.height-$s/2),this.topLeftBorderBox=W>0||se>0?Ba(L.left,L.top,W,se,vo.TOP_LEFT):new ti(L.left,L.top),this.topRightBorderBox=De>0||rt>0?Ba(L.left+mi,L.top,De,rt,vo.TOP_RIGHT):new ti(L.left+L.width,L.top),this.bottomRightBorderBox=At>0||Nt>0?Ba(L.left+Br,L.top+uo,At,Nt,vo.BOTTOM_RIGHT):new ti(L.left+L.width,L.top+L.height),this.bottomLeftBorderBox=Ln>0||Xn>0?Ba(L.left,L.top+dr,Ln,Xn,vo.BOTTOM_LEFT):new ti(L.left,L.top+L.height),this.topLeftPaddingBox=W>0||se>0?Ba(L.left+Xi,L.top+ni,Math.max(0,W-Xi),Math.max(0,se-ni),vo.TOP_LEFT):new ti(L.left+Xi,L.top+ni),this.topRightPaddingBox=De>0||rt>0?Ba(L.left+Math.min(mi,L.width-to),L.top+ni,mi>L.width+to?0:Math.max(0,De-to),Math.max(0,rt-ni),vo.TOP_RIGHT):new ti(L.left+L.width-to,L.top+ni),this.bottomRightPaddingBox=At>0||Nt>0?Ba(L.left+Math.min(Br,L.width-Xi),L.top+Math.min(uo,L.height-$s),Math.max(0,At-to),Math.max(0,Nt-$s),vo.BOTTOM_RIGHT):new ti(L.left+L.width-to,L.top+L.height-$s),this.bottomLeftPaddingBox=Ln>0||Xn>0?Ba(L.left+Xi,L.top+Math.min(dr,L.height-$s),Math.max(0,Ln-Xi),Math.max(0,Xn-$s),vo.BOTTOM_LEFT):new ti(L.left+Xi,L.top+L.height-$s),this.topLeftContentBox=W>0||se>0?Ba(L.left+Xi+Qo,L.top+ni+$1,Math.max(0,W-(Xi+Qo)),Math.max(0,se-(ni+$1)),vo.TOP_LEFT):new ti(L.left+Xi+Qo,L.top+ni+$1),this.topRightContentBox=De>0||rt>0?Ba(L.left+Math.min(mi,L.width+Xi+Qo),L.top+ni+$1,mi>L.width+Xi+Qo?0:De-Xi+Qo,rt-(ni+$1),vo.TOP_RIGHT):new ti(L.left+L.width-(to+gc),L.top+ni+$1),this.bottomRightContentBox=At>0||Nt>0?Ba(L.left+Math.min(Br,L.width-(Xi+Qo)),L.top+Math.min(uo,L.height+ni+$1),Math.max(0,At-(to+gc)),Nt-($s+mn),vo.BOTTOM_RIGHT):new ti(L.left+L.width-(to+gc),L.top+L.height-($s+mn)),this.bottomLeftContentBox=Ln>0||Xn>0?Ba(L.left+Xi+Qo,L.top+dr,Math.max(0,Ln-(Xi+Qo)),Xn-($s+mn),vo.BOTTOM_LEFT):new ti(L.left+Xi+Qo,L.top+L.height-($s+mn))},vo=(()=>{return(T=vo||(vo={}))[T.TOP_LEFT=0]="TOP_LEFT",T[T.TOP_RIGHT=1]="TOP_RIGHT",T[T.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",T[T.BOTTOM_LEFT=3]="BOTTOM_LEFT",vo;var T})(),Ba=function(T,S,D,L,V){var W=(Math.sqrt(2)-1)/3*4,se=D*W,Ee=L*W,De=T+D,rt=S+L;switch(V){case vo.TOP_LEFT:return new Dg(new ti(T,rt),new ti(T,rt-Ee),new ti(De-se,S),new ti(De,S));case vo.TOP_RIGHT:return new Dg(new ti(T,S),new ti(T+se,S),new ti(De,rt-Ee),new ti(De,rt));case vo.BOTTOM_RIGHT:return new Dg(new ti(De,S),new ti(De,S+Ee),new ti(T+se,rt),new ti(T,rt));default:return new Dg(new ti(De,rt),new ti(De-se,rt),new ti(T,S+Ee),new ti(T,S))}},Ig=function(T){return[T.topLeftBorderBox,T.topRightBorderBox,T.bottomRightBorderBox,T.bottomLeftBorderBox]},B3=function(T){return[T.topLeftPaddingBox,T.topRightPaddingBox,T.bottomRightPaddingBox,T.bottomLeftPaddingBox]},q8=function T(S,D,L){this.offsetX=S,this.offsetY=D,this.matrix=L,this.type=0,this.target=6},X8=function T(S,D){this.path=S,this.target=D,this.type=1},gb=function T(S){this.opacity=S,this.type=2,this.target=6},GD=function(T){return 1===T.type},QD=function(T,S){return T.length===S.length&&T.some(function(D,L){return D===S[L]})},Bg=function T(S){this.element=S,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},WD=function(){function T(S,D){if(this.container=S,this.parent=D,this.effects=[],this.curves=new UD(this.container),this.container.styles.opacity<1&&this.effects.push(new gb(this.container.styles.opacity)),null!==this.container.styles.transform&&this.effects.push(new q8(this.container.bounds.left+this.container.styles.transformOrigin[0].number,this.container.bounds.top+this.container.styles.transformOrigin[1].number,this.container.styles.transform)),0!==this.container.styles.overflowX){var se=Ig(this.curves),Ee=B3(this.curves);QD(se,Ee)?this.effects.push(new X8(se,6)):(this.effects.push(new X8(se,2)),this.effects.push(new X8(Ee,4)))}}return T.prototype.getEffects=function(S){for(var D=-1===[2,3].indexOf(this.container.styles.position),L=this.parent,V=this.effects.slice(0);L;){var W=L.effects.filter(function(De){return!GD(De)});if(D||0!==L.container.styles.position||!L.parent){if(V.unshift.apply(V,W),D=-1===[2,3].indexOf(L.container.styles.position),0!==L.container.styles.overflowX){var se=Ig(L.curves),Ee=B3(L.curves);QD(se,Ee)||V.unshift(new X8(Ee,6))}}else V.unshift.apply(V,W);L=L.parent}return V.filter(function(De){return Js(De.target,S)})},T}(),Ab=function(T,S,D,L){T.container.elements.forEach(function(V){var W=Js(V.flags,4),se=Js(V.flags,2),Ee=new WD(V,T);Js(V.styles.display,2048)&&L.push(Ee);var De=Js(V.flags,8)?[]:L;if(W||se){var rt=W||V.styles.isPositioned()?D:S,ft=new Bg(Ee);if(V.styles.isPositioned()||V.styles.opacity<1||V.styles.isTransformed()){var At=V.styles.zIndex.order;if(At<0){var Nt=0;rt.negativeZIndex.some(function(Ln,Xn){return At>Ln.element.container.styles.zIndex.order?(Nt=Xn,!1):Nt>0}),rt.negativeZIndex.splice(Nt,0,ft)}else if(At>0){var qn=0;rt.positiveZIndex.some(function(Ln,Xn){return At>=Ln.element.container.styles.zIndex.order?(qn=Xn+1,!1):qn>0}),rt.positiveZIndex.splice(qn,0,ft)}else rt.zeroOrAutoZIndexOrTransformedOrOpacity.push(ft)}else V.styles.isFloating()?rt.nonPositionedFloats.push(ft):rt.nonPositionedInlineLevel.push(ft);Ab(Ee,ft,W?ft:D,De)}else V.styles.isInlineLevel()?S.inlineLevel.push(Ee):S.nonInlineLevel.push(Ee),Ab(Ee,S,D,De);Js(V.flags,8)&&_9(V,De)})},_9=function(T,S){for(var D=T instanceof Zw?T.start:1,L=T instanceof Zw&&T.reversed,V=0;V<S.length;V++){var W=S[V];W.container instanceof ED&&"number"==typeof W.container.value&&0!==W.container.value&&(D=W.container.value),W.listValue=j8(D,W.container.styles.listStyleType,!0),D+=L?-1:1}},vb=function(T,S){switch(S){case 0:return ql(T.topLeftBorderBox,T.topLeftPaddingBox,T.topRightBorderBox,T.topRightPaddingBox);case 1:return ql(T.topRightBorderBox,T.topRightPaddingBox,T.bottomRightBorderBox,T.bottomRightPaddingBox);case 2:return ql(T.bottomRightBorderBox,T.bottomRightPaddingBox,T.bottomLeftBorderBox,T.bottomLeftPaddingBox);default:return ql(T.bottomLeftBorderBox,T.bottomLeftPaddingBox,T.topLeftBorderBox,T.topLeftPaddingBox)}},df=function(T,S){var D=[];return Kl(T)?D.push(T.subdivide(.5,!1)):D.push(T),Kl(S)?D.push(S.subdivide(.5,!0)):D.push(S),D},ql=function(T,S,D,L){var V=[];return Kl(T)?V.push(T.subdivide(.5,!1)):V.push(T),Kl(D)?V.push(D.subdivide(.5,!0)):V.push(D),Kl(L)?V.push(L.subdivide(.5,!0).reverse()):V.push(L),Kl(S)?V.push(S.subdivide(.5,!1).reverse()):V.push(S),V},kg=function(T){var D=T.styles;return T.bounds.add(D.borderLeftWidth,D.borderTopWidth,-(D.borderRightWidth+D.borderLeftWidth),-(D.borderTopWidth+D.borderBottomWidth))},Fg=function(T){var S=T.styles,D=T.bounds,L=$i(S.paddingLeft,D.width),V=$i(S.paddingRight,D.width),W=$i(S.paddingTop,D.width),se=$i(S.paddingBottom,D.width);return D.add(L+S.borderLeftWidth,W+S.borderTopWidth,-(S.borderRightWidth+S.borderLeftWidth+L+V),-(S.borderTopWidth+S.borderBottomWidth+W+se))},y9=function(T,S,D){var L=function(T,S){return 0===T?S.bounds:2===T?Fg(S):kg(S)}(Jd(T.styles.backgroundOrigin,S),T),V=function(T,S){return 0===T?S.bounds:2===T?Fg(S):kg(S)}(Jd(T.styles.backgroundClip,S),T),W=qD(Jd(T.styles.backgroundSize,S),D,L),se=W[0],Ee=W[1],De=kc(Jd(T.styles.backgroundPosition,S),L.width-se,L.height-Ee);return[XD(Jd(T.styles.backgroundRepeat,S),De,W,L,V),Math.round(L.left+De[0]),Math.round(L.top+De[1]),se,Ee]},E1=function(T){return fn(T)&&T.value===gu.AUTO},Y8=function(T){return"number"==typeof T},qD=function(T,S,D){var L=S[0],V=S[1],W=S[2],se=T[0],Ee=T[1];if(!se)return[0,0];if(Ys(se)&&Ee&&Ys(Ee))return[$i(se,D.width),$i(Ee,D.height)];var De=Y8(W);if(fn(se)&&(se.value===gu.CONTAIN||se.value===gu.COVER))return Y8(W)?D.width/D.height<W!=(se.value===gu.COVER)?[D.width,D.width/W]:[D.height*W,D.height]:[D.width,D.height];var ft=Y8(L),At=Y8(V),Nt=ft||At;if(E1(se)&&(!Ee||E1(Ee)))return ft&&At?[L,V]:De||Nt?Nt&&De?[ft?L:V*W,At?V:L/W]:[ft?L:D.width,At?V:D.height]:[D.width,D.height];if(De){var xi=0,mi=0;return Ys(se)?xi=$i(se,D.width):Ys(Ee)&&(mi=$i(Ee,D.height)),E1(se)?xi=mi*W:(!Ee||E1(Ee))&&(mi=xi/W),[xi,mi]}var uo=null,Br=null;if(Ys(se)?uo=$i(se,D.width):Ee&&Ys(Ee)&&(Br=$i(Ee,D.height)),null!==uo&&(!Ee||E1(Ee))&&(Br=ft&&At?uo/L*V:D.height),null!==Br&&E1(se)&&(uo=ft&&At?Br/V*L:D.width),null!==uo&&null!==Br)return[uo,Br];throw new Error("Unable to calculate background-size for element")},Jd=function(T,S){var D=T[S];return typeof D>"u"?T[0]:D},XD=function(T,S,D,L,V){var W=S[0],se=S[1],Ee=D[0],De=D[1];switch(T){case 2:return[new ti(Math.round(L.left),Math.round(L.top+se)),new ti(Math.round(L.left+L.width),Math.round(L.top+se)),new ti(Math.round(L.left+L.width),Math.round(De+L.top+se)),new ti(Math.round(L.left),Math.round(De+L.top+se))];case 3:return[new ti(Math.round(L.left+W),Math.round(L.top)),new ti(Math.round(L.left+W+Ee),Math.round(L.top)),new ti(Math.round(L.left+W+Ee),Math.round(L.height+L.top)),new ti(Math.round(L.left+W),Math.round(L.height+L.top))];case 1:return[new ti(Math.round(L.left+W),Math.round(L.top+se)),new ti(Math.round(L.left+W+Ee),Math.round(L.top+se)),new ti(Math.round(L.left+W+Ee),Math.round(L.top+se+De)),new ti(Math.round(L.left+W),Math.round(L.top+se+De))];default:return[new ti(Math.round(V.left),Math.round(V.top)),new ti(Math.round(V.left+V.width),Math.round(V.top)),new ti(Math.round(V.left+V.width),Math.round(V.height+V.top)),new ti(Math.round(V.left),Math.round(V.height+V.top))]}},yb="Hidden Text",BQ=function(){function T(S){this._data={},this._document=S}return T.prototype.parseMetrics=function(S,D){var L=this._document.createElement("div"),V=this._document.createElement("img"),W=this._document.createElement("span"),se=this._document.body;L.style.visibility="hidden",L.style.fontFamily=S,L.style.fontSize=D,L.style.margin="0",L.style.padding="0",L.style.whiteSpace="nowrap",se.appendChild(L),V.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",V.width=1,V.height=1,V.style.margin="0",V.style.padding="0",V.style.verticalAlign="baseline",W.style.fontFamily=S,W.style.fontSize=D,W.style.margin="0",W.style.padding="0",W.appendChild(this._document.createTextNode(yb)),L.appendChild(W),L.appendChild(V);var Ee=V.offsetTop-W.offsetTop+2;L.removeChild(W),L.appendChild(this._document.createTextNode(yb)),L.style.lineHeight="normal",V.style.verticalAlign="super";var De=V.offsetTop-L.offsetTop+2;return se.removeChild(L),{baseline:Ee,middle:De}},T.prototype.getMetrics=function(S,D){var L=S+" "+D;return typeof this._data[L]>"u"&&(this._data[L]=this.parseMetrics(S,D)),this._data[L]},T}(),ZD=function T(S,D){this.context=S,this.options=D},w9=function(T){function S(D,L){var V=T.call(this,D,L)||this;return V._activeEffects=[],V.canvas=L.canvas?L.canvas:document.createElement("canvas"),V.ctx=V.canvas.getContext("2d"),L.canvas||(V.canvas.width=Math.floor(L.width*L.scale),V.canvas.height=Math.floor(L.height*L.scale),V.canvas.style.width=L.width+"px",V.canvas.style.height=L.height+"px"),V.fontMetrics=new BQ(document),V.ctx.scale(V.options.scale,V.options.scale),V.ctx.translate(-L.x,-L.y),V.ctx.textBaseline="bottom",V._activeEffects=[],V.context.logger.debug("Canvas renderer initialized ("+L.width+"x"+L.height+") with scale "+L.scale),V}return ae(S,T),S.prototype.applyEffects=function(D){for(var L=this;this._activeEffects.length;)this.popEffect();D.forEach(function(V){return L.applyEffect(V)})},S.prototype.applyEffect=function(D){this.ctx.save(),function(T){return 2===T.type}(D)&&(this.ctx.globalAlpha=D.opacity),function(T){return 0===T.type}(D)&&(this.ctx.translate(D.offsetX,D.offsetY),this.ctx.transform(D.matrix[0],D.matrix[1],D.matrix[2],D.matrix[3],D.matrix[4],D.matrix[5]),this.ctx.translate(-D.offsetX,-D.offsetY)),GD(D)&&(this.path(D.path),this.ctx.clip()),this._activeEffects.push(D)},S.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},S.prototype.renderStack=function(D){return ve(this,void 0,void 0,function(){return Be(this,function(V){switch(V.label){case 0:return D.element.container.styles.isVisible()?[4,this.renderStackContent(D)]:[3,2];case 1:V.sent(),V.label=2;case 2:return[2]}})})},S.prototype.renderNode=function(D){return ve(this,void 0,void 0,function(){return Be(this,function(L){switch(L.label){case 0:return Js(D.container.flags,16),D.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(D)]:[3,3];case 1:return L.sent(),[4,this.renderNodeContent(D)];case 2:L.sent(),L.label=3;case 3:return[2]}})})},S.prototype.renderTextWithLetterSpacing=function(D,L,V){var W=this;0===L?this.ctx.fillText(D.text,D.bounds.left,D.bounds.top+V):P8(D.text).reduce(function(Ee,De){return W.ctx.fillText(De,Ee,D.bounds.top+V),Ee+W.ctx.measureText(De).width},D.bounds.left)},S.prototype.createFontStyle=function(D){var L=D.fontVariant.filter(function(se){return"normal"===se||"small-caps"===se}).join(""),V=Cb(D.fontFamily).join(", "),W=Hi(D.fontSize)?""+D.fontSize.number+D.fontSize.unit:D.fontSize.number+"px";return[[D.fontStyle,L,D.fontWeight,W,V].join(" "),V,W]},S.prototype.renderTextNode=function(D,L){return ve(this,void 0,void 0,function(){var V,se,Ee,De,rt,ft,At,Nt=this;return Be(this,function(qn){return V=this.createFontStyle(L),se=V[1],Ee=V[2],this.ctx.font=V[0],this.ctx.direction=1===L.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",De=this.fontMetrics.getMetrics(se,Ee),rt=De.baseline,ft=De.middle,At=L.paintOrder,D.textBounds.forEach(function(Ln){At.forEach(function(Xn){switch(Xn){case 0:Nt.ctx.fillStyle=Va(L.color),Nt.renderTextWithLetterSpacing(Ln,L.letterSpacing,rt);var Rr=L.textShadow;Rr.length&&Ln.text.trim().length&&(Rr.slice(0).reverse().forEach(function(xi){Nt.ctx.shadowColor=Va(xi.color),Nt.ctx.shadowOffsetX=xi.offsetX.number*Nt.options.scale,Nt.ctx.shadowOffsetY=xi.offsetY.number*Nt.options.scale,Nt.ctx.shadowBlur=xi.blur.number,Nt.renderTextWithLetterSpacing(Ln,L.letterSpacing,rt)}),Nt.ctx.shadowColor="",Nt.ctx.shadowOffsetX=0,Nt.ctx.shadowOffsetY=0,Nt.ctx.shadowBlur=0),L.textDecorationLine.length&&(Nt.ctx.fillStyle=Va(L.textDecorationColor||L.color),L.textDecorationLine.forEach(function(xi){switch(xi){case 1:Nt.ctx.fillRect(Ln.bounds.left,Math.round(Ln.bounds.top+rt),Ln.bounds.width,1);break;case 2:Nt.ctx.fillRect(Ln.bounds.left,Math.round(Ln.bounds.top),Ln.bounds.width,1);break;case 3:Nt.ctx.fillRect(Ln.bounds.left,Math.ceil(Ln.bounds.top+ft),Ln.bounds.width,1)}}));break;case 1:L.webkitTextStrokeWidth&&Ln.text.trim().length&&(Nt.ctx.strokeStyle=Va(L.webkitTextStrokeColor),Nt.ctx.lineWidth=L.webkitTextStrokeWidth,Nt.ctx.lineJoin=window.chrome?"miter":"round",Nt.ctx.strokeText(Ln.text,Ln.bounds.left,Ln.bounds.top+rt)),Nt.ctx.strokeStyle="",Nt.ctx.lineWidth=0,Nt.ctx.lineJoin="miter"}})}),[2]})})},S.prototype.renderReplacedElement=function(D,L,V){if(V&&D.intrinsicWidth>0&&D.intrinsicHeight>0){var W=Fg(D),se=B3(L);this.path(se),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(V,0,0,D.intrinsicWidth,D.intrinsicHeight,W.left,W.top,W.width,W.height),this.ctx.restore()}},S.prototype.renderNodeContent=function(D){return ve(this,void 0,void 0,function(){var L,V,W,se,Ee,ft,At,Nt,Ln,Xn,Rr,xi,mi,uo,Br,dr;return Be(this,function(ni){switch(ni.label){case 0:this.applyEffects(D.getEffects(4)),V=D.curves,W=(L=D.container).styles,se=0,Ee=L.textNodes,ni.label=1;case 1:return se<Ee.length?[4,this.renderTextNode(Ee[se],W)]:[3,4];case 2:ni.sent(),ni.label=3;case 3:return se++,[3,1];case 4:if(!(L instanceof r9))return[3,8];ni.label=5;case 5:return ni.trys.push([5,7,,8]),[4,this.context.cache.match(L.src)];case 6:return mi=ni.sent(),this.renderReplacedElement(L,V,mi),[3,8];case 7:return ni.sent(),this.context.logger.error("Error loading image "+L.src),[3,8];case 8:if(L instanceof Xw&&this.renderReplacedElement(L,V,L.canvas),!(L instanceof Yw))return[3,12];ni.label=9;case 9:return ni.trys.push([9,11,,12]),[4,this.context.cache.match(L.svg)];case 10:return mi=ni.sent(),this.renderReplacedElement(L,V,mi),[3,12];case 11:return ni.sent(),this.context.logger.error("Error loading svg "+L.svg.substring(0,255)),[3,12];case 12:return L instanceof ib&&L.tree?[4,new S(this.context,{scale:this.options.scale,backgroundColor:L.backgroundColor,x:0,y:0,width:L.width,height:L.height}).render(L.tree)]:[3,14];case 13:ft=ni.sent(),L.width&&L.height&&this.ctx.drawImage(ft,0,0,L.width,L.height,L.bounds.left,L.bounds.top,L.bounds.width,L.bounds.height),ni.label=14;case 14:if(L instanceof a9&&(At=Math.min(L.bounds.width,L.bounds.height),L.type===o9?L.checked&&(this.ctx.save(),this.path([new ti(L.bounds.left+.39363*At,L.bounds.top+.79*At),new ti(L.bounds.left+.16*At,L.bounds.top+.5549*At),new ti(L.bounds.left+.27347*At,L.bounds.top+.44071*At),new ti(L.bounds.left+.39694*At,L.bounds.top+.5649*At),new ti(L.bounds.left+.72983*At,L.bounds.top+.23*At),new ti(L.bounds.left+.84*At,L.bounds.top+.34085*At),new ti(L.bounds.left+.39363*At,L.bounds.top+.79*At)]),this.ctx.fillStyle=Va(eb),this.ctx.fill(),this.ctx.restore()):L.type===O8&&L.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(L.bounds.left+At/2,L.bounds.top+At/2,At/4,0,2*Math.PI,!0),this.ctx.fillStyle=Va(eb),this.ctx.fill(),this.ctx.restore())),wb(L)&&L.value.length){switch(Nt=this.createFontStyle(W),Ln=this.fontMetrics.getMetrics(Br=Nt[0],Nt[1]).baseline,this.ctx.font=Br,this.ctx.fillStyle=Va(W.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=xb(L.styles.textAlign),dr=Fg(L),Xn=0,L.styles.textAlign){case 1:Xn+=dr.width/2;break;case 2:Xn+=dr.width}Rr=dr.add(Xn,0,0,-dr.height/2+1),this.ctx.save(),this.path([new ti(dr.left,dr.top),new ti(dr.left+dr.width,dr.top),new ti(dr.left+dr.width,dr.top+dr.height),new ti(dr.left,dr.top+dr.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new K4(L.value,Rr),W.letterSpacing,Ln),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Js(L.styles.display,2048))return[3,20];if(null===L.styles.listStyleImage)return[3,19];if(0!==(xi=L.styles.listStyleImage).type)return[3,18];mi=void 0,uo=xi.url,ni.label=15;case 15:return ni.trys.push([15,17,,18]),[4,this.context.cache.match(uo)];case 16:return mi=ni.sent(),this.ctx.drawImage(mi,L.bounds.left-(mi.width+10),L.bounds.top),[3,18];case 17:return ni.sent(),this.context.logger.error("Error loading list-style-image "+uo),[3,18];case 18:return[3,20];case 19:D.listValue&&-1!==L.styles.listStyleType&&(Br=this.createFontStyle(W)[0],this.ctx.font=Br,this.ctx.fillStyle=Va(W.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",dr=new Te(L.bounds.left,L.bounds.top+$i(L.styles.paddingTop,L.bounds.width),L.bounds.width,pc(W.lineHeight,W.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new K4(D.listValue,dr),W.letterSpacing,pc(W.lineHeight,W.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ni.label=20;case 20:return[2]}})})},S.prototype.renderStackContent=function(D){return ve(this,void 0,void 0,function(){var L,V,W,se,Ee,De,rt,ft,At,Nt,qn,Ln,Xn,Rr;return Be(this,function(mi){switch(mi.label){case 0:return Js(D.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(D.element)];case 1:mi.sent(),L=0,V=D.negativeZIndex,mi.label=2;case 2:return L<V.length?[4,this.renderStack(V[L])]:[3,5];case 3:mi.sent(),mi.label=4;case 4:return L++,[3,2];case 5:return[4,this.renderNodeContent(D.element)];case 6:mi.sent(),W=0,se=D.nonInlineLevel,mi.label=7;case 7:return W<se.length?[4,this.renderNode(se[W])]:[3,10];case 8:mi.sent(),mi.label=9;case 9:return W++,[3,7];case 10:Ee=0,De=D.nonPositionedFloats,mi.label=11;case 11:return Ee<De.length?[4,this.renderStack(De[Ee])]:[3,14];case 12:mi.sent(),mi.label=13;case 13:return Ee++,[3,11];case 14:rt=0,ft=D.nonPositionedInlineLevel,mi.label=15;case 15:return rt<ft.length?[4,this.renderStack(ft[rt])]:[3,18];case 16:mi.sent(),mi.label=17;case 17:return rt++,[3,15];case 18:At=0,Nt=D.inlineLevel,mi.label=19;case 19:return At<Nt.length?[4,this.renderNode(Nt[At])]:[3,22];case 20:mi.sent(),mi.label=21;case 21:return At++,[3,19];case 22:qn=0,Ln=D.zeroOrAutoZIndexOrTransformedOrOpacity,mi.label=23;case 23:return qn<Ln.length?[4,this.renderStack(Ln[qn])]:[3,26];case 24:mi.sent(),mi.label=25;case 25:return qn++,[3,23];case 26:Xn=0,Rr=D.positiveZIndex,mi.label=27;case 27:return Xn<Rr.length?[4,this.renderStack(Rr[Xn])]:[3,30];case 28:mi.sent(),mi.label=29;case 29:return Xn++,[3,27];case 30:return[2]}})})},S.prototype.mask=function(D){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(D.slice(0).reverse()),this.ctx.closePath()},S.prototype.path=function(D){this.ctx.beginPath(),this.formatPath(D),this.ctx.closePath()},S.prototype.formatPath=function(D){var L=this;D.forEach(function(V,W){var se=Kl(V)?V.start:V;0===W?L.ctx.moveTo(se.x,se.y):L.ctx.lineTo(se.x,se.y),Kl(V)&&L.ctx.bezierCurveTo(V.startControl.x,V.startControl.y,V.endControl.x,V.endControl.y,V.end.x,V.end.y)})},S.prototype.renderRepeat=function(D,L,V,W){this.path(D),this.ctx.fillStyle=L,this.ctx.translate(V,W),this.ctx.fill(),this.ctx.translate(-V,-W)},S.prototype.resizeImage=function(D,L,V){var W;if(D.width===L&&D.height===V)return D;var Ee=(null!==(W=this.canvas.ownerDocument)&&void 0!==W?W:document).createElement("canvas");return Ee.width=Math.max(1,L),Ee.height=Math.max(1,V),Ee.getContext("2d").drawImage(D,0,0,D.width,D.height,0,0,L,V),Ee},S.prototype.renderBackgroundImage=function(D){return ve(this,void 0,void 0,function(){var L,V,W,se,Ee;return Be(this,function(rt){switch(rt.label){case 0:L=D.styles.backgroundImage.length-1,V=function(ft){var At,Nt,qn,Ln,Xn,Rr,xi,mi,uo,Br,dr,ni,to,$s,Xi,$1,gc,mn,Qo,L2,F3,pa,pl,pf,r2,a0,Z4,gf,J4,eh,c0;return Be(this,function(J8){switch(J8.label){case 0:if(0!==ft.type)return[3,5];At=void 0,Nt=ft.url,J8.label=1;case 1:return J8.trys.push([1,3,,4]),[4,W.context.cache.match(Nt)];case 2:return At=J8.sent(),[3,4];case 3:return J8.sent(),W.context.logger.error("Error loading background-image "+Nt),[3,4];case 4:return At&&(qn=y9(D,L,[At.width,At.height,At.width/At.height]),$1=qn[0],pa=qn[1],pl=qn[2],$s=W.ctx.createPattern(W.resizeImage(At,Qo=qn[3],L2=qn[4]),"repeat"),W.renderRepeat($1,$s,pa,pl)),[3,6];case 5:!function(T){return 1===T.type}(ft)?function(T){return 2===T.type}(ft)&&(Xi=y9(D,L,[null,null,null]),$1=Xi[0],gc=Xi[1],mn=Xi[2],L2=Xi[4],pa=$i((F3=0===ft.position.length?[Bc]:ft.position)[0],Qo=Xi[3]),pl=$i(F3[F3.length-1],L2),pf=function(T,S,D,L,V){var W=0,se=0;switch(T.size){case 0:0===T.shape?W=se=Math.min(Math.abs(S),Math.abs(S-L),Math.abs(D),Math.abs(D-V)):1===T.shape&&(W=Math.min(Math.abs(S),Math.abs(S-L)),se=Math.min(Math.abs(D),Math.abs(D-V)));break;case 2:if(0===T.shape)W=se=Math.min(Lo(S,D),Lo(S,D-V),Lo(S-L,D),Lo(S-L,D-V));else if(1===T.shape){var Ee=Math.min(Math.abs(D),Math.abs(D-V))/Math.min(Math.abs(S),Math.abs(S-L)),De=ng(L,V,S,D,!0);se=Ee*(W=Lo(De[0]-S,(De[1]-D)/Ee))}break;case 1:0===T.shape?W=se=Math.max(Math.abs(S),Math.abs(S-L),Math.abs(D),Math.abs(D-V)):1===T.shape&&(W=Math.max(Math.abs(S),Math.abs(S-L)),se=Math.max(Math.abs(D),Math.abs(D-V)));break;case 3:if(0===T.shape)W=se=Math.max(Lo(S,D),Lo(S,D-V),Lo(S-L,D),Lo(S-L,D-V));else if(1===T.shape){Ee=Math.max(Math.abs(D),Math.abs(D-V))/Math.max(Math.abs(S),Math.abs(S-L));var At=ng(L,V,S,D,!1);se=Ee*(W=Lo(At[0]-S,(At[1]-D)/Ee))}}return Array.isArray(T.size)&&(W=$i(T.size[0],L),se=2===T.size.length?$i(T.size[1],V):W),[W,se]}(ft,pa,pl,Qo,L2),a0=pf[1],(r2=pf[0])>0&&a0>0&&(Z4=W.ctx.createRadialGradient(gc+pa,mn+pl,0,gc+pa,mn+pl,r2),Ul(ft.stops,2*r2).forEach(function(mf){return Z4.addColorStop(mf.stop,Va(mf.color))}),W.path($1),W.ctx.fillStyle=Z4,r2!==a0?(gf=D.bounds.left+.5*D.bounds.width,J4=D.bounds.top+.5*D.bounds.height,c0=1/(eh=a0/r2),W.ctx.save(),W.ctx.translate(gf,J4),W.ctx.transform(1,0,0,eh,0,0),W.ctx.translate(-gf,-J4),W.ctx.fillRect(gc,c0*(mn-J4)+J4,Qo,L2*c0),W.ctx.restore()):W.ctx.fill())):(Ln=y9(D,L,[null,null,null]),$1=Ln[0],pa=Ln[1],pl=Ln[2],Xn=j2(ft.angle,Qo=Ln[3],L2=Ln[4]),Rr=Xn[0],xi=Xn[1],mi=Xn[2],uo=Xn[3],Br=Xn[4],(dr=document.createElement("canvas")).width=Qo,dr.height=L2,ni=dr.getContext("2d"),to=ni.createLinearGradient(xi,uo,mi,Br),Ul(ft.stops,Rr).forEach(function(mf){return to.addColorStop(mf.stop,Va(mf.color))}),ni.fillStyle=to,ni.fillRect(0,0,Qo,L2),Qo>0&&L2>0&&($s=W.ctx.createPattern(dr,"repeat"),W.renderRepeat($1,$s,pa,pl))),J8.label=6;case 6:return L--,[2]}})},W=this,se=0,Ee=D.styles.backgroundImage.slice(0).reverse(),rt.label=1;case 1:return se<Ee.length?[5,V(Ee[se])]:[3,4];case 2:rt.sent(),rt.label=3;case 3:return se++,[3,1];case 4:return[2]}})})},S.prototype.renderSolidBorder=function(D,L,V){return ve(this,void 0,void 0,function(){return Be(this,function(W){return this.path(vb(V,L)),this.ctx.fillStyle=Va(D),this.ctx.fill(),[2]})})},S.prototype.renderDoubleBorder=function(D,L,V,W){return ve(this,void 0,void 0,function(){var se,Ee;return Be(this,function(De){switch(De.label){case 0:return L<3?[4,this.renderSolidBorder(D,V,W)]:[3,2];case 1:return De.sent(),[2];case 2:return se=function(T,S){switch(S){case 0:return ql(T.topLeftBorderBox,T.topLeftBorderDoubleOuterBox,T.topRightBorderBox,T.topRightBorderDoubleOuterBox);case 1:return ql(T.topRightBorderBox,T.topRightBorderDoubleOuterBox,T.bottomRightBorderBox,T.bottomRightBorderDoubleOuterBox);case 2:return ql(T.bottomRightBorderBox,T.bottomRightBorderDoubleOuterBox,T.bottomLeftBorderBox,T.bottomLeftBorderDoubleOuterBox);default:return ql(T.bottomLeftBorderBox,T.bottomLeftBorderDoubleOuterBox,T.topLeftBorderBox,T.topLeftBorderDoubleOuterBox)}}(W,V),this.path(se),this.ctx.fillStyle=Va(D),this.ctx.fill(),Ee=function(T,S){switch(S){case 0:return ql(T.topLeftBorderDoubleInnerBox,T.topLeftPaddingBox,T.topRightBorderDoubleInnerBox,T.topRightPaddingBox);case 1:return ql(T.topRightBorderDoubleInnerBox,T.topRightPaddingBox,T.bottomRightBorderDoubleInnerBox,T.bottomRightPaddingBox);case 2:return ql(T.bottomRightBorderDoubleInnerBox,T.bottomRightPaddingBox,T.bottomLeftBorderDoubleInnerBox,T.bottomLeftPaddingBox);default:return ql(T.bottomLeftBorderDoubleInnerBox,T.bottomLeftPaddingBox,T.topLeftBorderDoubleInnerBox,T.topLeftPaddingBox)}}(W,V),this.path(Ee),this.ctx.fill(),[2]}})})},S.prototype.renderNodeBackgroundAndBorders=function(D){return ve(this,void 0,void 0,function(){var L,V,W,se,Ee,De,rt,ft,At=this;return Be(this,function(Nt){switch(Nt.label){case 0:return this.applyEffects(D.getEffects(2)),V=!Fc((L=D.container.styles).backgroundColor)||L.backgroundImage.length,W=[{style:L.borderTopStyle,color:L.borderTopColor,width:L.borderTopWidth},{style:L.borderRightStyle,color:L.borderRightColor,width:L.borderRightWidth},{style:L.borderBottomStyle,color:L.borderBottomColor,width:L.borderBottomWidth},{style:L.borderLeftStyle,color:L.borderLeftColor,width:L.borderLeftWidth}],se=bb(Jd(L.backgroundClip,0),D.curves),V||L.boxShadow.length?(this.ctx.save(),this.path(se),this.ctx.clip(),Fc(L.backgroundColor)||(this.ctx.fillStyle=Va(L.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(D.container)]):[3,2];case 1:Nt.sent(),this.ctx.restore(),L.boxShadow.slice(0).reverse().forEach(function(qn){At.ctx.save();var Ln=Ig(D.curves),Xn=qn.inset?0:1e4,Rr=function(T,S,D,L,V){return T.map(function(W,se){switch(se){case 0:return W.add(S,D);case 1:return W.add(S+L,D);case 2:return W.add(S+L,D+V);case 3:return W.add(S,D+V)}return W})}(Ln,(qn.inset?1:-1)*qn.spread.number-Xn,(qn.inset?1:-1)*qn.spread.number,qn.spread.number*(qn.inset?-2:2),qn.spread.number*(qn.inset?-2:2));qn.inset?(At.path(Ln),At.ctx.clip(),At.mask(Rr)):(At.mask(Ln),At.ctx.clip(),At.path(Rr)),At.ctx.shadowOffsetX=qn.offsetX.number+Xn,At.ctx.shadowOffsetY=qn.offsetY.number,At.ctx.shadowColor=Va(qn.color),At.ctx.shadowBlur=qn.blur.number,At.ctx.fillStyle=qn.inset?Va(qn.color):"rgba(0,0,0,1)",At.ctx.fill(),At.ctx.restore()}),Nt.label=2;case 2:Ee=0,De=0,rt=W,Nt.label=3;case 3:return De<rt.length?0!==(ft=rt[De]).style&&!Fc(ft.color)&&ft.width>0?2!==ft.style?[3,5]:[4,this.renderDashedDottedBorder(ft.color,ft.width,Ee,D.curves,2)]:[3,11]:[3,13];case 4:return Nt.sent(),[3,11];case 5:return 3!==ft.style?[3,7]:[4,this.renderDashedDottedBorder(ft.color,ft.width,Ee,D.curves,3)];case 6:return Nt.sent(),[3,11];case 7:return 4!==ft.style?[3,9]:[4,this.renderDoubleBorder(ft.color,ft.width,Ee,D.curves)];case 8:return Nt.sent(),[3,11];case 9:return[4,this.renderSolidBorder(ft.color,Ee,D.curves)];case 10:Nt.sent(),Nt.label=11;case 11:Ee++,Nt.label=12;case 12:return De++,[3,3];case 13:return[2]}})})},S.prototype.renderDashedDottedBorder=function(D,L,V,W,se){return ve(this,void 0,void 0,function(){var Ee,De,rt,ft,At,Nt,qn,Ln,Xn,Rr,xi,mi,uo,Br,dr,ni;return Be(this,function(to){return this.ctx.save(),Ee=function(T,S){switch(S){case 0:return df(T.topLeftBorderStroke,T.topRightBorderStroke);case 1:return df(T.topRightBorderStroke,T.bottomRightBorderStroke);case 2:return df(T.bottomRightBorderStroke,T.bottomLeftBorderStroke);default:return df(T.bottomLeftBorderStroke,T.topLeftBorderStroke)}}(W,V),De=vb(W,V),2===se&&(this.path(De),this.ctx.clip()),Kl(De[0])?(rt=De[0].start.x,ft=De[0].start.y):(rt=De[0].x,ft=De[0].y),Kl(De[1])?(At=De[1].end.x,Nt=De[1].end.y):(At=De[1].x,Nt=De[1].y),qn=0===V||2===V?Math.abs(rt-At):Math.abs(ft-Nt),this.ctx.beginPath(),this.formatPath(3===se?Ee:De.slice(0,2)),Ln=L<3?3*L:2*L,Xn=L<3?2*L:L,3===se&&(Ln=L,Xn=L),Rr=!0,qn<=2*Ln?Rr=!1:qn<=2*Ln+Xn?(Ln*=xi=qn/(2*Ln+Xn),Xn*=xi):(mi=Math.floor((qn+Xn)/(Ln+Xn)),uo=(qn-mi*Ln)/(mi-1),Xn=(Br=(qn-(mi+1)*Ln)/mi)<=0||Math.abs(Xn-uo)<Math.abs(Xn-Br)?uo:Br),Rr&&this.ctx.setLineDash(3===se?[0,Ln+Xn]:[Ln,Xn]),3===se?(this.ctx.lineCap="round",this.ctx.lineWidth=L):this.ctx.lineWidth=2*L+1.1,this.ctx.strokeStyle=Va(D),this.ctx.stroke(),this.ctx.setLineDash([]),2===se&&(Kl(De[0])&&(dr=De[3],ni=De[0],this.ctx.beginPath(),this.formatPath([new ti(dr.end.x,dr.end.y),new ti(ni.start.x,ni.start.y)]),this.ctx.stroke()),Kl(De[1])&&(dr=De[1],ni=De[2],this.ctx.beginPath(),this.formatPath([new ti(dr.end.x,dr.end.y),new ti(ni.start.x,ni.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},S.prototype.render=function(D){return ve(this,void 0,void 0,function(){var L;return Be(this,function(V){switch(V.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Va(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),L=function(T){var S=new WD(T,null),D=new Bg(S),L=[];return Ab(S,D,D,L),_9(S.container,L),D}(D),[4,this.renderStack(L)];case 1:return V.sent(),this.applyEffects([]),[2,this.canvas]}})})},S}(ZD),wb=function(T){return T instanceof nb||T instanceof tb||T instanceof a9&&T.type!==O8&&T.type!==o9},bb=function(T,S){switch(T){case 0:return Ig(S);case 2:return function(T){return[T.topLeftContentBox,T.topRightContentBox,T.bottomRightContentBox,T.bottomLeftContentBox]}(S);default:return B3(S)}},xb=function(T){switch(T){case 1:return"center";case 2:return"right";default:return"left"}},JD=["-apple-system","system-ui"],Cb=function(T){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?T.filter(function(S){return-1===JD.indexOf(S)}):T},Mb=function(T){function S(D,L){var V=T.call(this,D,L)||this;return V.canvas=L.canvas?L.canvas:document.createElement("canvas"),V.ctx=V.canvas.getContext("2d"),V.options=L,V.canvas.width=Math.floor(L.width*L.scale),V.canvas.height=Math.floor(L.height*L.scale),V.canvas.style.width=L.width+"px",V.canvas.style.height=L.height+"px",V.ctx.scale(V.options.scale,V.options.scale),V.ctx.translate(-L.x,-L.y),V.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+L.width+"x"+L.height+" at "+L.x+","+L.y+") with scale "+L.scale),V}return ae(S,T),S.prototype.render=function(D){return ve(this,void 0,void 0,function(){var L,V;return Be(this,function(W){switch(W.label){case 0:return L=Kw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,D),[4,b9(L)];case 1:return V=W.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Va(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(V,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},S}(ZD),b9=function(T){return new Promise(function(S,D){var L=new Image;L.onload=function(){S(L)},L.onerror=D,L.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(T))})},kQ=function(){function T(S){var L=S.enabled;this.id=S.id,this.enabled=L,this.start=Date.now()}return T.prototype.debug=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.debug?console.debug.apply(console,Ie([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},T.prototype.getTime=function(){return Date.now()-this.start},T.prototype.info=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&typeof window<"u"&&window.console&&"function"==typeof console.info&&console.info.apply(console,Ie([this.id,this.getTime()+"ms"],S))},T.prototype.warn=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.warn?console.warn.apply(console,Ie([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},T.prototype.error=function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.error?console.error.apply(console,Ie([this.id,this.getTime()+"ms"],S)):this.info.apply(this,S))},T.instances={},T}(),eI=function(){function T(S,D){var L;this.windowBounds=D,this.instanceName="#"+T.instanceCount++,this.logger=new kQ({id:this.instanceName,enabled:S.logging}),this.cache=null!==(L=S.cache)&&void 0!==L?L:new PD(this,S)}return T.instanceCount=1,T}();typeof window<"u"&&pb.setContext(window);var Sb=function(T,S){return ve(void 0,void 0,void 0,function(){var D,L,V,W,se,Ee,De,rt,ft,At,Nt,qn,Ln,Xn,Rr,xi,mi,uo,Br,dr,ni,$s,Xi,$1,gc,mn,Qo,L2,F3,pa,pl,pf,r2,a0,Z4,gf,J4,eh;return Be(this,function(c0){switch(c0.label){case 0:if(!T||"object"!=typeof T)return[2,Promise.reject("Invalid element provided as first argument")];if(!(D=T.ownerDocument))throw new Error("Element is not attached to a Document");if(!(L=D.defaultView))throw new Error("Document is not attached to a Window");return V={allowTaint:null!==($s=S.allowTaint)&&void 0!==$s&&$s,imageTimeout:null!==(Xi=S.imageTimeout)&&void 0!==Xi?Xi:15e3,proxy:S.proxy,useCORS:null!==($1=S.useCORS)&&void 0!==$1&&$1},W=ee({logging:null===(gc=S.logging)||void 0===gc||gc,cache:S.cache},V),se={windowWidth:null!==(mn=S.windowWidth)&&void 0!==mn?mn:L.innerWidth,windowHeight:null!==(Qo=S.windowHeight)&&void 0!==Qo?Qo:L.innerHeight,scrollX:null!==(L2=S.scrollX)&&void 0!==L2?L2:L.pageXOffset,scrollY:null!==(F3=S.scrollY)&&void 0!==F3?F3:L.pageYOffset},Ee=new Te(se.scrollX,se.scrollY,se.windowWidth,se.windowHeight),De=new eI(W,Ee),rt=null!==(pa=S.foreignObjectRendering)&&void 0!==pa&&pa,ft={allowTaint:null!==(pl=S.allowTaint)&&void 0!==pl&&pl,onclone:S.onclone,ignoreElements:S.ignoreElements,inlineImages:rt,copyStyles:rt},De.logger.debug("Starting document clone with size "+Ee.width+"x"+Ee.height+" scrolled to "+-Ee.left+","+-Ee.top),At=new RD(De,T,ft),(Nt=At.clonedReferenceElement)?[4,At.toIFrame(D,Ee)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return qn=c0.sent(),Ln=Os(Nt)||function(T){return"HTML"===T.tagName}(Nt)?function(T){var S=T.body,D=T.documentElement;if(!S||!D)throw new Error("Unable to get document size");var L=Math.max(Math.max(S.scrollWidth,D.scrollWidth),Math.max(S.offsetWidth,D.offsetWidth),Math.max(S.clientWidth,D.clientWidth)),V=Math.max(Math.max(S.scrollHeight,D.scrollHeight),Math.max(S.offsetHeight,D.offsetHeight),Math.max(S.clientHeight,D.clientHeight));return new Te(0,0,L,V)}(Nt.ownerDocument):_e(De,Nt),Xn=Ln.width,Rr=Ln.height,xi=Ln.left,mi=Ln.top,uo=Eb(De,Nt,S.backgroundColor),Br={canvas:S.canvas,backgroundColor:uo,scale:null!==(r2=null!==(pf=S.scale)&&void 0!==pf?pf:L.devicePixelRatio)&&void 0!==r2?r2:1,x:(null!==(a0=S.x)&&void 0!==a0?a0:0)+xi,y:(null!==(Z4=S.y)&&void 0!==Z4?Z4:0)+mi,width:null!==(gf=S.width)&&void 0!==gf?gf:Math.ceil(Xn),height:null!==(J4=S.height)&&void 0!==J4?J4:Math.ceil(Rr)},rt?(De.logger.debug("Document cloned, using foreign object rendering"),[4,new Mb(De,Br).render(Nt)]):[3,3];case 2:return dr=c0.sent(),[3,5];case 3:return De.logger.debug("Document cloned, element located at "+xi+","+mi+" with size "+Xn+"x"+Rr+" using computed rendering"),De.logger.debug("Starting DOM parsing"),ni=Wd(De,Nt),uo===ni.styles.backgroundColor&&(ni.styles.backgroundColor=G1.TRANSPARENT),De.logger.debug("Starting renderer for element at "+Br.x+","+Br.y+" with size "+Br.width+"x"+Br.height),[4,new w9(De,Br).render(ni)];case 4:dr=c0.sent(),c0.label=5;case 5:return(!(null!==(eh=S.removeContainer)&&void 0!==eh)||eh)&&(RD.destroy(qn)||De.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),De.logger.debug("Finished rendering"),[2,dr]}})})},Eb=function(T,S,D){var L=S.ownerDocument,V=L.documentElement?Xo(T,getComputedStyle(L.documentElement).backgroundColor):G1.TRANSPARENT,W=L.body?Xo(T,getComputedStyle(L.body).backgroundColor):G1.TRANSPARENT,se="string"==typeof D?Xo(T,D):null===D?G1.TRANSPARENT:4294967295;return S===L.documentElement?Fc(V)?Fc(W)?se:W:V:se};return function(T,S){return void 0===S&&(S={}),Sb(T,S)}}()},3407:(Et,Ze,ae)=>{"use strict";var ee=ae(6259)(),Be=ae(5834)("Object.prototype.toString"),Ie=function(Je){return!(ee&&Je&&"object"==typeof Je&&Symbol.toStringTag in Je)&&"[object Arguments]"===Be(Je)},Te=function(Je){return!!Ie(Je)||null!==Je&&"object"==typeof Je&&"number"==typeof Je.length&&Je.length>=0&&"[object Array]"!==Be(Je)&&"[object Function]"===Be(Je.callee)},_e=function(){return Ie(arguments)}();Ie.isLegacyArguments=Te,Et.exports=_e?Ie:Te},2374:(Et,Ze,ae)=>{"use strict";var ee=Date.prototype.getDay,Be=Object.prototype.toString,Te=ae(6259)();Et.exports=function(Ve){return"object"==typeof Ve&&null!==Ve&&(Te?function(Ve){try{return ee.call(Ve),!0}catch{return!1}}(Ve):"[object Date]"===Be.call(Ve))}},2342:(Et,Ze,ae)=>{"use strict";var Be,Ie,Te,_e,ee=ae(5834),ve=ae(6259)();if(ve){Be=ee("Object.prototype.hasOwnProperty"),Ie=ee("RegExp.prototype.exec"),Te={};var Ve=function(){throw Te};_e={toString:Ve,valueOf:Ve},"symbol"==typeof Symbol.toPrimitive&&(_e[Symbol.toPrimitive]=Ve)}var Je=ee("Object.prototype.toString"),ot=Object.getOwnPropertyDescriptor;Et.exports=ve?function(et){if(!et||"object"!=typeof et)return!1;var ct=ot(et,"lastIndex");if(!ct||!Be(ct,"value"))return!1;try{Ie(et,_e)}catch(Qe){return Qe===Te}}:function(et){return!(!et||"object"!=typeof et&&"function"!=typeof et)&&"[object RegExp]"===Je(et)}},2993:Et=>{Et.exports=function Ze(ae,ee,ve){return ae*(1-ve)+ee*ve}},5943:Et=>{"use strict";var Ze=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;function ve(Ie){if(null==Ie)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Ie)}Et.exports=function Be(){try{if(!Object.assign)return!1;var Ie=new String("abc");if(Ie[5]="de","5"===Object.getOwnPropertyNames(Ie)[0])return!1;for(var Te={},_e=0;_e<10;_e++)Te["_"+String.fromCharCode(_e)]=_e;if("0123456789"!==Object.getOwnPropertyNames(Te).map(function(ot){return Te[ot]}).join(""))return!1;var Je={};return"abcdefghijklmnopqrst".split("").forEach(function(ot){Je[ot]=ot}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},Je)).join("")}catch{return!1}}()?Object.assign:function(Ie,Te){for(var _e,Je,Ve=ve(Ie),ot=1;ot<arguments.length;ot++){for(var Tt in _e=Object(arguments[ot]))ae.call(_e,Tt)&&(Ve[Tt]=_e[Tt]);if(Ze){Je=Ze(_e);for(var ht=0;ht<Je.length;ht++)ee.call(_e,Je[ht])&&(Ve[Je[ht]]=_e[Je[ht]])}}return Ve}},1175:Et=>{"use strict";var Ze=function(ae){return ae!=ae};Et.exports=function(ee,ve){return 0===ee&&0===ve?1/ee==1/ve:!!(ee===ve||Ze(ee)&&Ze(ve))}},2e3:(Et,Ze,ae)=>{"use strict";var ee=ae(2358),ve=ae(5685),Be=ae(1175),Ie=ae(6305),Te=ae(3859),_e=ve(Ie(),Object);ee(_e,{getPolyfill:Ie,implementation:Be,shim:Te}),Et.exports=_e},6305:(Et,Ze,ae)=>{"use strict";var ee=ae(1175);Et.exports=function(){return"function"==typeof Object.is?Object.is:ee}},3859:(Et,Ze,ae)=>{"use strict";var ee=ae(6305),ve=ae(2358);Et.exports=function(){var Ie=ee();return ve(Object,{is:Ie},{is:function(){return Object.is!==Ie}}),Ie}},2450:(Et,Ze,ae)=>{"use strict";var ee;if(!Object.keys){var ve=Object.prototype.hasOwnProperty,Be=Object.prototype.toString,Ie=ae(9978),Te=Object.prototype.propertyIsEnumerable,_e=!Te.call({toString:null},"toString"),Ve=Te.call(function(){},"prototype"),Je=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ot=function(ct){var $t=ct.constructor;return $t&&$t.prototype===ct},Tt={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},ht=function(){if(typeof window>"u")return!1;for(var ct in window)try{if(!Tt["$"+ct]&&ve.call(window,ct)&&null!==window[ct]&&"object"==typeof window[ct])try{ot(window[ct])}catch{return!0}}catch{return!0}return!1}();ee=function($t){var Qe=null!==$t&&"object"==typeof $t,Ke="[object Function]"===Be.call($t),j=Ie($t),Y=Qe&&"[object String]"===Be.call($t),Z=[];if(!Qe&&!Ke&&!j)throw new TypeError("Object.keys called on a non-object");var xe=Ve&&Ke;if(Y&&$t.length>0&&!ve.call($t,0))for(var te=0;te<$t.length;++te)Z.push(String(te));if(j&&$t.length>0)for(var oe=0;oe<$t.length;++oe)Z.push(String(oe));else for(var ce in $t)(!xe||"prototype"!==ce)&&ve.call($t,ce)&&Z.push(String(ce));if(_e)for(var $=function(ct){if(typeof window>"u"||!ht)return ot(ct);try{return ot(ct)}catch{return!1}}($t),qe=0;qe<Je.length;++qe)(!$||"constructor"!==Je[qe])&&ve.call($t,Je[qe])&&Z.push(Je[qe]);return Z}}Et.exports=ee},1356:(Et,Ze,ae)=>{"use strict";var ee=Array.prototype.slice,ve=ae(9978),Be=Object.keys,Ie=Be?function(Ve){return Be(Ve)}:ae(2450),Te=Object.keys;Ie.shim=function(){if(Object.keys){var Ve=function(){var Je=Object.keys(arguments);return Je&&Je.length===arguments.length}(1,2);Ve||(Object.keys=function(ot){return ve(ot)?Te(ee.call(ot)):Te(ot)})}else Object.keys=Ie;return Object.keys||Ie},Et.exports=Ie},9978:Et=>{"use strict";var Ze=Object.prototype.toString;Et.exports=function(ee){var ve=Ze.call(ee),Be="[object Arguments]"===ve;return Be||(Be="[object Array]"!==ve&&null!==ee&&"object"==typeof ee&&"number"==typeof ee.length&&ee.length>=0&&"[object Function]"===Ze.call(ee.callee)),Be}},1766:Et=>{Et.exports=function(ae,ee,ve,Be){var Ie=ae[0],Te=ae[1],_e=!1;void 0===ve&&(ve=0),void 0===Be&&(Be=ee.length);for(var Ve=(Be-ve)/2,Je=0,ot=Ve-1;Je<Ve;ot=Je++){var Tt=ee[ve+2*Je+0],ht=ee[ve+2*Je+1],ct=ee[ve+2*ot+1];ht>Te!=ct>Te&&Ie<(ee[ve+2*ot+0]-Tt)*(Te-ht)/(ct-ht)+Tt&&(_e=!_e)}return _e}},3870:(Et,Ze,ae)=>{var ee=ae(1766),ve=ae(2260);Et.exports=function(Ie,Te,_e,Ve){return Te.length>0&&Array.isArray(Te[0])?ve(Ie,Te,_e,Ve):ee(Ie,Te,_e,Ve)},Et.exports.nested=ve,Et.exports.flat=ee},2260:Et=>{Et.exports=function(ae,ee,ve,Be){var Ie=ae[0],Te=ae[1],_e=!1;void 0===ve&&(ve=0),void 0===Be&&(Be=ee.length);for(var Ve=Be-ve,Je=0,ot=Ve-1;Je<Ve;ot=Je++){var Tt=ee[Je+ve][0],ht=ee[Je+ve][1],ct=ee[ot+ve][1];ht>Te!=ct>Te&&Ie<(ee[ot+ve][0]-Tt)*(Te-ht)/(ct-ht)+Tt&&(_e=!_e)}return _e}},9855:function(Et){Et.exports=function(){"use strict";function Ze(it,fe){if(!(it instanceof fe))throw new TypeError("Cannot call a class as a function")}function ae(it,fe){for(var ne=0;ne<fe.length;ne++){var ie=fe[ne];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(it,ie.key,ie)}}function ee(it,fe,ne){return fe&&ae(it.prototype,fe),ne&&ae(it,ne),it}var ve=function it(fe,ne){this.next=null,this.key=fe,this.data=ne,this.left=null,this.right=null};function Be(it,fe){return it>fe?1:it<fe?-1:0}function Ie(it,fe,ne){for(var ie=new ve(null,null),ke=ie,nt=ie;;){var xt=ne(it,fe.key);if(xt<0){if(null===fe.left)break;if(ne(it,fe.left.key)<0&&(fe.left=(qt=fe.left).right,qt.right=fe,null===(fe=qt).left))break;nt.left=fe,nt=fe,fe=fe.left}else{if(!(xt>0))break;if(null===fe.right)break;var qt;if(ne(it,fe.right.key)>0&&(fe.right=(qt=fe.right).left,qt.left=fe,null===(fe=qt).right))break;ke.right=fe,ke=fe,fe=fe.right}}return ke.right=fe.left,nt.left=fe.right,fe.left=ie.right,fe.right=ie.left,fe}function Te(it,fe,ne,ie){var ke=new ve(it,fe);if(null===ne)return ke.left=ke.right=null,ke;var nt=ie(it,(ne=Ie(it,ne,ie)).key);return nt<0?(ke.left=ne.left,ke.right=ne,ne.left=null):nt>=0&&(ke.right=ne.right,ke.left=ne,ne.right=null),ke}function _e(it,fe,ne){var ie=null,ke=null;if(fe){var nt=ne((fe=Ie(it,fe,ne)).key,it);0===nt?(ie=fe.left,ke=fe.right):nt<0?(ke=fe.right,fe.right=null,ie=fe):(ie=fe.left,fe.left=null,ke=fe)}return{left:ie,right:ke}}function Je(it,fe,ne,ie,ke){if(it){ie(fe+(ne?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+ke(it)+"\n");var nt=fe+(ne?"    ":"\u2502   ");it.left&&Je(it.left,nt,!1,ie,ke),it.right&&Je(it.right,nt,!0,ie,ke)}}var ot=function(){function it(fe){void 0===fe&&(fe=Be),this._root=null,this._size=0,this._comparator=fe}return it.prototype.insert=function(fe,ne){return this._size++,this._root=Te(fe,ne,this._root,this._comparator)},it.prototype.add=function(fe,ne){var ie=new ve(fe,ne);null===this._root&&(ie.left=ie.right=null,this._size++,this._root=ie);var ke=this._comparator,nt=Ie(fe,this._root,ke),xt=ke(fe,nt.key);return 0===xt?this._root=nt:(xt<0?(ie.left=nt.left,ie.right=nt,nt.left=null):xt>0&&(ie.right=nt.right,ie.left=nt,nt.right=null),this._size++,this._root=ie),this._root},it.prototype.remove=function(fe){this._root=this._remove(fe,this._root,this._comparator)},it.prototype._remove=function(fe,ne,ie){var ke;return null===ne?null:0===ie(fe,(ne=Ie(fe,ne,ie)).key)?(null===ne.left?ke=ne.right:(ke=Ie(fe,ne.left,ie)).right=ne.right,this._size--,ke):ne},it.prototype.pop=function(){var fe=this._root;if(fe){for(;fe.left;)fe=fe.left;return this._root=Ie(fe.key,this._root,this._comparator),this._root=this._remove(fe.key,this._root,this._comparator),{key:fe.key,data:fe.data}}return null},it.prototype.findStatic=function(fe){for(var ne=this._root,ie=this._comparator;ne;){var ke=ie(fe,ne.key);if(0===ke)return ne;ne=ke<0?ne.left:ne.right}return null},it.prototype.find=function(fe){return this._root&&(this._root=Ie(fe,this._root,this._comparator),0!==this._comparator(fe,this._root.key))?null:this._root},it.prototype.contains=function(fe){for(var ne=this._root,ie=this._comparator;ne;){var ke=ie(fe,ne.key);if(0===ke)return!0;ne=ke<0?ne.left:ne.right}return!1},it.prototype.forEach=function(fe,ne){for(var ie=this._root,ke=[],nt=!1;!nt;)null!==ie?(ke.push(ie),ie=ie.left):0!==ke.length?(ie=ke.pop(),fe.call(ne,ie),ie=ie.right):nt=!0;return this},it.prototype.range=function(fe,ne,ie,ke){for(var nt=[],xt=this._comparator,qt=this._root;0!==nt.length||qt;)if(qt)nt.push(qt),qt=qt.left;else{if(xt((qt=nt.pop()).key,ne)>0)break;if(xt(qt.key,fe)>=0&&ie.call(ke,qt))return this;qt=qt.right}return this},it.prototype.keys=function(){var fe=[];return this.forEach(function(ne){return fe.push(ne.key)}),fe},it.prototype.values=function(){var fe=[];return this.forEach(function(ne){return fe.push(ne.data)}),fe},it.prototype.min=function(){return this._root?this.minNode(this._root).key:null},it.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},it.prototype.minNode=function(fe){if(void 0===fe&&(fe=this._root),fe)for(;fe.left;)fe=fe.left;return fe},it.prototype.maxNode=function(fe){if(void 0===fe&&(fe=this._root),fe)for(;fe.right;)fe=fe.right;return fe},it.prototype.at=function(fe){for(var ne=this._root,ie=!1,ke=0,nt=[];!ie;)if(ne)nt.push(ne),ne=ne.left;else if(nt.length>0){if(ne=nt.pop(),ke===fe)return ne;ke++,ne=ne.right}else ie=!0;return null},it.prototype.next=function(fe){var ne=this._root,ie=null;if(fe.right){for(ie=fe.right;ie.left;)ie=ie.left;return ie}for(var ke=this._comparator;ne;){var nt=ke(fe.key,ne.key);if(0===nt)break;nt<0?(ie=ne,ne=ne.left):ne=ne.right}return ie},it.prototype.prev=function(fe){var ne=this._root,ie=null;if(null!==fe.left){for(ie=fe.left;ie.right;)ie=ie.right;return ie}for(var ke=this._comparator;ne;){var nt=ke(fe.key,ne.key);if(0===nt)break;nt<0?ne=ne.left:(ie=ne,ne=ne.right)}return ie},it.prototype.clear=function(){return this._root=null,this._size=0,this},it.prototype.toList=function(){return function et(it){for(var fe=it,ne=[],ie=!1,ke=new ve(null,null),nt=ke;!ie;)fe?(ne.push(fe),fe=fe.left):ne.length>0?fe=(fe=nt=nt.next=ne.pop()).right:ie=!0;return nt.next=null,ke.next}(this._root)},it.prototype.load=function(fe,ne,ie){void 0===ne&&(ne=[]),void 0===ie&&(ie=!1);var ke=fe.length,nt=this._comparator;if(ie&&Qe(fe,ne,0,ke-1,nt),null===this._root)this._root=Tt(fe,ne,0,ke),this._size=ke;else{var xt=function $t(it,fe,ne){for(var ie=new ve(null,null),ke=ie,nt=it,xt=fe;null!==nt&&null!==xt;)ne(nt.key,xt.key)<0?(ke.next=nt,nt=nt.next):(ke.next=xt,xt=xt.next),ke=ke.next;return null!==nt?ke.next=nt:null!==xt&&(ke.next=xt),ie.next}(this.toList(),function ht(it,fe){for(var ne=new ve(null,null),ie=ne,ke=0;ke<it.length;ke++)ie=ie.next=new ve(it[ke],fe[ke]);return ie.next=null,ne.next}(fe,ne),nt);this._root=ct({head:xt},0,ke=this._size+ke)}return this},it.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(it.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(it.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),it.prototype.toString=function(fe){void 0===fe&&(fe=function(ke){return String(ke.key)});var ne=[];return Je(this._root,"",!0,function(ie){return ne.push(ie)},fe),ne.join("")},it.prototype.update=function(fe,ne,ie){var ke=this._comparator,nt=_e(fe,this._root,ke),xt=nt.left,qt=nt.right;ke(fe,ne)<0?qt=Te(ne,ie,qt,ke):xt=Te(ne,ie,xt,ke),this._root=function Ve(it,fe,ne){return null===fe?it:(null===it||((fe=Ie(it.key,fe,ne)).left=it),fe)}(xt,qt,ke)},it.prototype.split=function(fe){return _e(fe,this._root,this._comparator)},it}();function Tt(it,fe,ne,ie){var ke=ie-ne;if(ke>0){var nt=ne+Math.floor(ke/2),tn=new ve(it[nt],fe[nt]);return tn.left=Tt(it,fe,ne,nt),tn.right=Tt(it,fe,nt+1,ie),tn}return null}function ct(it,fe,ne){var ie=ne-fe;if(ie>0){var ke=fe+Math.floor(ie/2),nt=ct(it,fe,ke),xt=it.head;return xt.left=nt,it.head=it.head.next,xt.right=ct(it,ke+1,ne),xt}return null}function Qe(it,fe,ne,ie,ke){if(!(ne>=ie)){for(var nt=it[ne+ie>>1],xt=ne-1,qt=ie+1;;){do{xt++}while(ke(it[xt],nt)<0);do{qt--}while(ke(it[qt],nt)>0);if(xt>=qt)break;var tn=it[xt];it[xt]=it[qt],it[qt]=tn,tn=fe[xt],fe[xt]=fe[qt],fe[qt]=tn}Qe(it,fe,ne,qt,ke),Qe(it,fe,qt+1,ie,ke)}}var Ke=function(fe,ne){return fe.ll.x<=ne.x&&ne.x<=fe.ur.x&&fe.ll.y<=ne.y&&ne.y<=fe.ur.y},j=function(fe,ne){return ne.ur.x<fe.ll.x||fe.ur.x<ne.ll.x||ne.ur.y<fe.ll.y||fe.ur.y<ne.ll.y?null:{ll:{x:fe.ll.x<ne.ll.x?ne.ll.x:fe.ll.x,y:fe.ll.y<ne.ll.y?ne.ll.y:fe.ll.y},ur:{x:fe.ur.x<ne.ur.x?fe.ur.x:ne.ur.x,y:fe.ur.y<ne.ur.y?fe.ur.y:ne.ur.y}}},Y=Number.EPSILON;void 0===Y&&(Y=Math.pow(2,-52));var Z=Y*Y,xe=function(fe,ne){if(-Y<fe&&fe<Y&&-Y<ne&&ne<Y)return 0;var ie=fe-ne;return ie*ie<Z*fe*ne?0:fe<ne?-1:1},te=function(){function it(){Ze(this,it),this.reset()}return ee(it,[{key:"reset",value:function(){this.xRounder=new oe,this.yRounder=new oe}},{key:"round",value:function(ne,ie){return{x:this.xRounder.round(ne),y:this.yRounder.round(ie)}}}]),it}(),oe=function(){function it(){Ze(this,it),this.tree=new ot,this.round(0)}return ee(it,[{key:"round",value:function(ne){var ie=this.tree.add(ne),ke=this.tree.prev(ie);if(null!==ke&&0===xe(ie.key,ke.key))return this.tree.remove(ne),ke.key;var nt=this.tree.next(ie);return null!==nt&&0===xe(ie.key,nt.key)?(this.tree.remove(ne),nt.key):ne}}]),it}(),ce=new te,$=function(fe,ne){return fe.x*ne.y-fe.y*ne.x},qe=function(fe,ne){return fe.x*ne.x+fe.y*ne.y},He=function(fe,ne,ie){var xt=$({x:ne.x-fe.x,y:ne.y-fe.y},{x:ie.x-fe.x,y:ie.y-fe.y});return xe(xt,0)},Oe=function(fe){return Math.sqrt(qe(fe,fe))},he=function(fe,ne,ie){var ke={x:ne.x-fe.x,y:ne.y-fe.y},nt={x:ie.x-fe.x,y:ie.y-fe.y};return $(nt,ke)/Oe(nt)/Oe(ke)},Ot=function(fe,ne,ie){var ke={x:ne.x-fe.x,y:ne.y-fe.y},nt={x:ie.x-fe.x,y:ie.y-fe.y};return qe(nt,ke)/Oe(nt)/Oe(ke)},bt=function(fe,ne,ie){return 0===ne.y?null:{x:fe.x+ne.x/ne.y*(ie-fe.y),y:ie}},Le=function(fe,ne,ie){return 0===ne.x?null:{x:ie,y:fe.y+ne.y/ne.x*(ie-fe.x)}},Se=function(){function it(fe,ne){Ze(this,it),void 0===fe.events?fe.events=[this]:fe.events.push(this),this.point=fe,this.isLeft=ne}return ee(it,null,[{key:"compare",value:function(ne,ie){var ke=it.comparePoints(ne.point,ie.point);return 0!==ke?ke:(ne.point!==ie.point&&ne.link(ie),ne.isLeft!==ie.isLeft?ne.isLeft?1:-1:We.compare(ne.segment,ie.segment))}},{key:"comparePoints",value:function(ne,ie){return ne.x<ie.x?-1:ne.x>ie.x?1:ne.y<ie.y?-1:ne.y>ie.y?1:0}}]),ee(it,[{key:"link",value:function(ne){if(ne.point===this.point)throw new Error("Tried to link already linked events");for(var ie=ne.point.events,ke=0,nt=ie.length;ke<nt;ke++){var xt=ie[ke];this.point.events.push(xt),xt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var ne=this.point.events.length,ie=0;ie<ne;ie++){var ke=this.point.events[ie];if(void 0===ke.segment.consumedBy)for(var nt=ie+1;nt<ne;nt++){var xt=this.point.events[nt];void 0===xt.consumedBy&&ke.otherSE.point.events===xt.otherSE.point.events&&ke.segment.consume(xt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var ne=[],ie=0,ke=this.point.events.length;ie<ke;ie++){var nt=this.point.events[ie];nt!==this&&!nt.segment.ringOut&&nt.segment.isInResult()&&ne.push(nt)}return ne}},{key:"getLeftmostComparator",value:function(ne){var ie=this,ke=new Map,nt=function(qt){var tn=qt.otherSE;ke.set(qt,{sine:he(ie.point,ne.point,tn.point),cosine:Ot(ie.point,ne.point,tn.point)})};return function(xt,qt){ke.has(xt)||nt(xt),ke.has(qt)||nt(qt);var tn=ke.get(xt),St=tn.sine,Ii=tn.cosine,ji=ke.get(qt),bn=ji.sine,Ni=ji.cosine;return St>=0&&bn>=0?Ii<Ni?1:Ii>Ni?-1:0:St<0&&bn<0?Ii<Ni?-1:Ii>Ni?1:0:bn<St?-1:bn>St?1:0}}}]),it}(),Re=0,We=function(){function it(fe,ne,ie,ke){Ze(this,it),this.id=++Re,this.leftSE=fe,fe.segment=this,fe.otherSE=ne,this.rightSE=ne,ne.segment=this,ne.otherSE=fe,this.rings=ie,this.windings=ke}return ee(it,null,[{key:"compare",value:function(ne,ie){var ke=ne.leftSE.point.x,nt=ie.leftSE.point.x,xt=ne.rightSE.point.x,qt=ie.rightSE.point.x;if(qt<ke)return 1;if(xt<nt)return-1;var tn=ne.leftSE.point.y,St=ie.leftSE.point.y,Ii=ne.rightSE.point.y,ji=ie.rightSE.point.y;if(ke<nt){if(St<tn&&St<Ii)return 1;if(St>tn&&St>Ii)return-1;var bn=ne.comparePoint(ie.leftSE.point);if(bn<0)return 1;if(bn>0)return-1;var Ni=ie.comparePoint(ne.rightSE.point);return 0!==Ni?Ni:-1}if(ke>nt){if(tn<St&&tn<ji)return-1;if(tn>St&&tn>ji)return 1;var Lr=ie.comparePoint(ne.leftSE.point);if(0!==Lr)return Lr;var yr=ne.comparePoint(ie.rightSE.point);return yr<0?1:yr>0?-1:1}if(tn<St)return-1;if(tn>St)return 1;if(xt<qt){var Dr=ie.comparePoint(ne.rightSE.point);if(0!==Dr)return Dr}if(xt>qt){var oo=ne.comparePoint(ie.rightSE.point);if(oo<0)return 1;if(oo>0)return-1}if(xt!==qt){var Oa=Ii-tn,oa=xt-ke,qo=ji-St,Na=qt-nt;if(Oa>oa&&qo<Na)return 1;if(Oa<oa&&qo>Na)return-1}return xt>qt?1:xt<qt||Ii<ji?-1:Ii>ji?1:ne.id<ie.id?-1:ne.id>ie.id?1:0}}]),ee(it,[{key:"replaceRightSE",value:function(ne){this.rightSE=ne,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var ne=this.leftSE.point.y,ie=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:ne<ie?ne:ie},ur:{x:this.rightSE.point.x,y:ne>ie?ne:ie}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(ne){return ne.x===this.leftSE.point.x&&ne.y===this.leftSE.point.y||ne.x===this.rightSE.point.x&&ne.y===this.rightSE.point.y}},{key:"comparePoint",value:function(ne){if(this.isAnEndpoint(ne))return 0;var ie=this.leftSE.point,ke=this.rightSE.point,nt=this.vector();if(ie.x===ke.x)return ne.x===ie.x?0:ne.x<ie.x?1:-1;if(ne.x===ie.x+(ne.y-ie.y)/nt.y*nt.x)return 0;var St=ie.y+(ne.x-ie.x)/nt.x*nt.y;return ne.y===St?0:ne.y<St?-1:1}},{key:"getIntersection",value:function(ne){var ie=this.bbox(),ke=ne.bbox(),nt=j(ie,ke);if(null===nt)return null;var xt=this.leftSE.point,qt=this.rightSE.point,tn=ne.leftSE.point,St=ne.rightSE.point,Ii=Ke(ie,tn)&&0===this.comparePoint(tn),ji=Ke(ke,xt)&&0===ne.comparePoint(xt),bn=Ke(ie,St)&&0===this.comparePoint(St),Ni=Ke(ke,qt)&&0===ne.comparePoint(qt);if(ji&&Ii)return Ni&&!bn?qt:!Ni&&bn?St:null;if(ji)return bn&&xt.x===St.x&&xt.y===St.y?null:xt;if(Ii)return Ni&&qt.x===tn.x&&qt.y===tn.y?null:tn;if(Ni&&bn)return null;if(Ni)return qt;if(bn)return St;var Lr=function(fe,ne,ie,ke){if(0===ne.x)return Le(ie,ke,fe.x);if(0===ke.x)return Le(fe,ne,ie.x);if(0===ne.y)return bt(ie,ke,fe.y);if(0===ke.y)return bt(fe,ne,ie.y);var nt=$(ne,ke);if(0==nt)return null;var xt={x:ie.x-fe.x,y:ie.y-fe.y},qt=$(xt,ne)/nt,tn=$(xt,ke)/nt;return{x:(fe.x+tn*ne.x+(ie.x+qt*ke.x))/2,y:(fe.y+tn*ne.y+(ie.y+qt*ke.y))/2}}(xt,this.vector(),tn,ne.vector());return null!==Lr&&Ke(nt,Lr)?ce.round(Lr.x,Lr.y):null}},{key:"split",value:function(ne){var ie=[],ke=void 0!==ne.events,nt=new Se(ne,!0),xt=new Se(ne,!1),qt=this.rightSE;this.replaceRightSE(xt),ie.push(xt),ie.push(nt);var tn=new it(nt,qt,this.rings.slice(),this.windings.slice());return Se.comparePoints(tn.leftSE.point,tn.rightSE.point)>0&&tn.swapEvents(),Se.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),ke&&(nt.checkForConsuming(),xt.checkForConsuming()),ie}},{key:"swapEvents",value:function(){var ne=this.rightSE;this.rightSE=this.leftSE,this.leftSE=ne,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var ie=0,ke=this.windings.length;ie<ke;ie++)this.windings[ie]*=-1}},{key:"consume",value:function(ne){for(var ie=this,ke=ne;ie.consumedBy;)ie=ie.consumedBy;for(;ke.consumedBy;)ke=ke.consumedBy;var nt=it.compare(ie,ke);if(0!==nt){if(nt>0){var xt=ie;ie=ke,ke=xt}if(ie.prev===ke){var qt=ie;ie=ke,ke=qt}for(var tn=0,St=ke.rings.length;tn<St;tn++){var Ii=ke.rings[tn],ji=ke.windings[tn],bn=ie.rings.indexOf(Ii);-1===bn?(ie.rings.push(Ii),ie.windings.push(ji)):ie.windings[bn]+=ji}ke.rings=null,ke.windings=null,ke.consumedBy=ie,ke.leftSE.consumedBy=ie.leftSE,ke.rightSE.consumedBy=ie.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var ne=this.beforeState();this._afterState={rings:ne.rings.slice(0),windings:ne.windings.slice(0),multiPolys:[]};for(var ie=this._afterState.rings,ke=this._afterState.windings,nt=this._afterState.multiPolys,xt=0,qt=this.rings.length;xt<qt;xt++){var tn=this.rings[xt],St=this.windings[xt],Ii=ie.indexOf(tn);-1===Ii?(ie.push(tn),ke.push(St)):ke[Ii]+=St}for(var ji=[],bn=[],Ni=0,Lr=ie.length;Ni<Lr;Ni++)if(0!==ke[Ni]){var yr=ie[Ni],Dr=yr.poly;if(-1===bn.indexOf(Dr))if(yr.isExterior)ji.push(Dr);else{-1===bn.indexOf(Dr)&&bn.push(Dr);var oo=ji.indexOf(yr.poly);-1!==oo&&ji.splice(oo,1)}}for(var Oa=0,oa=ji.length;Oa<oa;Oa++){var qo=ji[Oa].multiPoly;-1===nt.indexOf(qo)&&nt.push(qo)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var ne=this.beforeState().multiPolys,ie=this.afterState().multiPolys;switch(en.type){case"union":this._isInResult=0===ne.length!=(0===ie.length);break;case"intersection":var xt,qt;ne.length<ie.length?(xt=ne.length,qt=ie.length):(xt=ie.length,qt=ne.length),this._isInResult=qt===en.numMultiPolys&&xt<qt;break;case"xor":var tn=Math.abs(ne.length-ie.length);this._isInResult=tn%2==1;break;case"difference":var St=function(ji){return 1===ji.length&&ji[0].isSubject};this._isInResult=St(ne)!==St(ie);break;default:throw new Error("Unrecognized operation type found ".concat(en.type))}return this._isInResult}}],[{key:"fromRing",value:function(ne,ie,ke){var nt,xt,qt,tn=Se.comparePoints(ne,ie);if(tn<0)nt=ne,xt=ie,qt=1;else{if(!(tn>0))throw new Error("Tried to create degenerate segment at [".concat(ne.x,", ").concat(ne.y,"]"));nt=ie,xt=ne,qt=-1}return new it(new Se(nt,!0),new Se(xt,!1),[ke],[qt])}}]),it}(),me=function(){function it(fe,ne,ie){if(Ze(this,it),!Array.isArray(fe)||0===fe.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=ne,this.isExterior=ie,this.segments=[],"number"!=typeof fe[0][0]||"number"!=typeof fe[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var ke=ce.round(fe[0][0],fe[0][1]);this.bbox={ll:{x:ke.x,y:ke.y},ur:{x:ke.x,y:ke.y}};for(var nt=ke,xt=1,qt=fe.length;xt<qt;xt++){if("number"!=typeof fe[xt][0]||"number"!=typeof fe[xt][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var tn=ce.round(fe[xt][0],fe[xt][1]);tn.x===nt.x&&tn.y===nt.y||(this.segments.push(We.fromRing(nt,tn,this)),tn.x<this.bbox.ll.x&&(this.bbox.ll.x=tn.x),tn.y<this.bbox.ll.y&&(this.bbox.ll.y=tn.y),tn.x>this.bbox.ur.x&&(this.bbox.ur.x=tn.x),tn.y>this.bbox.ur.y&&(this.bbox.ur.y=tn.y),nt=tn)}(ke.x!==nt.x||ke.y!==nt.y)&&this.segments.push(We.fromRing(nt,ke,this))}return ee(it,[{key:"getSweepEvents",value:function(){for(var ne=[],ie=0,ke=this.segments.length;ie<ke;ie++){var nt=this.segments[ie];ne.push(nt.leftSE),ne.push(nt.rightSE)}return ne}}]),it}(),mt=function(){function it(fe,ne){if(Ze(this,it),!Array.isArray(fe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new me(fe[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var ie=1,ke=fe.length;ie<ke;ie++){var nt=new me(fe[ie],this,!1);nt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=nt.bbox.ll.x),nt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=nt.bbox.ll.y),nt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=nt.bbox.ur.x),nt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=nt.bbox.ur.y),this.interiorRings.push(nt)}this.multiPoly=ne}return ee(it,[{key:"getSweepEvents",value:function(){for(var ne=this.exteriorRing.getSweepEvents(),ie=0,ke=this.interiorRings.length;ie<ke;ie++)for(var nt=this.interiorRings[ie].getSweepEvents(),xt=0,qt=nt.length;xt<qt;xt++)ne.push(nt[xt]);return ne}}]),it}(),$e=function(){function it(fe,ne){if(Ze(this,it),!Array.isArray(fe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof fe[0][0][0]&&(fe=[fe])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var ie=0,ke=fe.length;ie<ke;ie++){var nt=new mt(fe[ie],this);nt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=nt.bbox.ll.x),nt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=nt.bbox.ll.y),nt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=nt.bbox.ur.x),nt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=nt.bbox.ur.y),this.polys.push(nt)}this.isSubject=ne}return ee(it,[{key:"getSweepEvents",value:function(){for(var ne=[],ie=0,ke=this.polys.length;ie<ke;ie++)for(var nt=this.polys[ie].getSweepEvents(),xt=0,qt=nt.length;xt<qt;xt++)ne.push(nt[xt]);return ne}}]),it}(),Wt=function(){function it(fe){Ze(this,it),this.events=fe;for(var ne=0,ie=fe.length;ne<ie;ne++)fe[ne].segment.ringOut=this;this.poly=null}return ee(it,null,[{key:"factory",value:function(ne){for(var ie=[],ke=0,nt=ne.length;ke<nt;ke++){var xt=ne[ke];if(xt.isInResult()&&!xt.ringOut){for(var qt=null,tn=xt.leftSE,St=xt.rightSE,Ii=[tn],ji=tn.point,bn=[];qt=tn,Ii.push(tn=St),tn.point!==ji;)for(;;){var Ni=tn.getAvailableLinkedEvents();if(0===Ni.length){var Lr=Ii[0].point,yr=Ii[Ii.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Lr.x,",")+" ".concat(Lr.y,"]. Last matching segment found ends at")+" [".concat(yr.x,", ").concat(yr.y,"]."))}if(1===Ni.length){St=Ni[0].otherSE;break}for(var Dr=null,oo=0,Oa=bn.length;oo<Oa;oo++)if(bn[oo].point===tn.point){Dr=oo;break}if(null===Dr){bn.push({index:Ii.length,point:tn.point});var Na=tn.getLeftmostComparator(qt);St=Ni.sort(Na)[0].otherSE;break}var oa=bn.splice(Dr)[0],qo=Ii.splice(oa.index);qo.unshift(qo[0].otherSE),ie.push(new it(qo.reverse()))}ie.push(new it(Ii))}}return ie}}]),ee(it,[{key:"getGeom",value:function(){for(var ne=this.events[0].point,ie=[ne],ke=1,nt=this.events.length-1;ke<nt;ke++){var xt=this.events[ke].point;0!==He(xt,ne,this.events[ke+1].point)&&(ie.push(xt),ne=xt)}if(1===ie.length)return null;0===He(ie[0],ne,ie[1])&&ie.shift(),ie.push(ie[0]);for(var Ii=this.isExteriorRing()?1:-1,ji=this.isExteriorRing()?0:ie.length-1,bn=this.isExteriorRing()?ie.length:-1,Ni=[],Lr=ji;Lr!=bn;Lr+=Ii)Ni.push([ie[Lr].x,ie[Lr].y]);return Ni}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var ne=this.enclosingRing();this._isExteriorRing=!ne||!ne.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var ne=this.events[0],ie=1,ke=this.events.length;ie<ke;ie++){var nt=this.events[ie];Se.compare(ne,nt)>0&&(ne=nt)}for(var xt=ne.segment.prevInResult(),qt=xt?xt.prevInResult():null;;){if(!xt)return null;if(!qt)return xt.ringOut;if(qt.ringOut!==xt.ringOut)return qt.ringOut.enclosingRing()!==xt.ringOut?xt.ringOut:xt.ringOut.enclosingRing();xt=qt.prevInResult(),qt=xt?xt.prevInResult():null}}}]),it}(),dt=function(){function it(fe){Ze(this,it),this.exteriorRing=fe,fe.poly=this,this.interiorRings=[]}return ee(it,[{key:"addInterior",value:function(ne){this.interiorRings.push(ne),ne.poly=this}},{key:"getGeom",value:function(){var ne=[this.exteriorRing.getGeom()];if(null===ne[0])return null;for(var ie=0,ke=this.interiorRings.length;ie<ke;ie++){var nt=this.interiorRings[ie].getGeom();null!==nt&&ne.push(nt)}return ne}}]),it}(),sn=function(){function it(fe){Ze(this,it),this.rings=fe,this.polys=this._composePolys(fe)}return ee(it,[{key:"getGeom",value:function(){for(var ne=[],ie=0,ke=this.polys.length;ie<ke;ie++){var nt=this.polys[ie].getGeom();null!==nt&&ne.push(nt)}return ne}},{key:"_composePolys",value:function(ne){for(var ie=[],ke=0,nt=ne.length;ke<nt;ke++){var xt=ne[ke];if(!xt.poly)if(xt.isExteriorRing())ie.push(new dt(xt));else{var qt=xt.enclosingRing();qt.poly||ie.push(new dt(qt)),qt.poly.addInterior(xt)}}return ie}}]),it}(),on=function(){function it(fe){var ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We.compare;Ze(this,it),this.queue=fe,this.tree=new ot(ne),this.segments=[]}return ee(it,[{key:"process",value:function(ne){var ie=ne.segment,ke=[];if(ne.consumedBy)return ne.isLeft?this.queue.remove(ne.otherSE):this.tree.remove(ie),ke;var nt=ne.isLeft?this.tree.insert(ie):this.tree.find(ie);if(!nt)throw new Error("Unable to find segment #".concat(ie.id," ")+"[".concat(ie.leftSE.point.x,", ").concat(ie.leftSE.point.y,"] -> ")+"[".concat(ie.rightSE.point.x,", ").concat(ie.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var xt=nt,qt=nt,tn=void 0,St=void 0;void 0===tn;)null===(xt=this.tree.prev(xt))?tn=null:void 0===xt.key.consumedBy&&(tn=xt.key);for(;void 0===St;)null===(qt=this.tree.next(qt))?St=null:void 0===qt.key.consumedBy&&(St=qt.key);if(ne.isLeft){var Ii=null;if(tn){var ji=tn.getIntersection(ie);if(null!==ji&&(ie.isAnEndpoint(ji)||(Ii=ji),!tn.isAnEndpoint(ji)))for(var bn=this._splitSafely(tn,ji),Ni=0,Lr=bn.length;Ni<Lr;Ni++)ke.push(bn[Ni])}var yr=null;if(St){var Dr=St.getIntersection(ie);if(null!==Dr&&(ie.isAnEndpoint(Dr)||(yr=Dr),!St.isAnEndpoint(Dr)))for(var oo=this._splitSafely(St,Dr),Oa=0,oa=oo.length;Oa<oa;Oa++)ke.push(oo[Oa])}if(null!==Ii||null!==yr){var qo;qo=null===Ii?yr:null===yr||Se.comparePoints(Ii,yr)<=0?Ii:yr,this.queue.remove(ie.rightSE),ke.push(ie.rightSE);for(var Hs=ie.split(qo),uc=0,aa=Hs.length;uc<aa;uc++)ke.push(Hs[uc])}ke.length>0?(this.tree.remove(ie),ke.push(ne)):(this.segments.push(ie),ie.prev=tn)}else{if(tn&&St){var hn=tn.getIntersection(St);if(null!==hn){if(!tn.isAnEndpoint(hn))for(var al=this._splitSafely(tn,hn),Tc=0,Vi=al.length;Tc<Vi;Tc++)ke.push(al[Tc]);if(!St.isAnEndpoint(hn))for(var y2=this._splitSafely(St,hn),Bo=0,kl=y2.length;Bo<kl;Bo++)ke.push(y2[Bo])}}this.tree.remove(ie)}return ke}},{key:"_splitSafely",value:function(ne,ie){this.tree.remove(ne);var ke=ne.rightSE;this.queue.remove(ke);var nt=ne.split(ie);return nt.push(ke),void 0===ne.consumedBy&&this.tree.insert(ne),nt}}]),it}(),On=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ut=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,en=new(function(){function it(){Ze(this,it)}return ee(it,[{key:"run",value:function(ne,ie,ke){en.type=ne,ce.reset();for(var nt=[new $e(ie,!0)],xt=0,qt=ke.length;xt<qt;xt++)nt.push(new $e(ke[xt],!1));if(en.numMultiPolys=nt.length,"difference"===en.type)for(var tn=nt[0],St=1;St<nt.length;)null!==j(nt[St].bbox,tn.bbox)?St++:nt.splice(St,1);if("intersection"===en.type)for(var Ii=0,ji=nt.length;Ii<ji;Ii++)for(var bn=nt[Ii],Ni=Ii+1,Lr=nt.length;Ni<Lr;Ni++)if(null===j(bn.bbox,nt[Ni].bbox))return[];for(var yr=new ot(Se.compare),Dr=0,oo=nt.length;Dr<oo;Dr++)for(var Oa=nt[Dr].getSweepEvents(),oa=0,qo=Oa.length;oa<qo;oa++)if(yr.insert(Oa[oa]),yr.size>On)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Na=new on(yr),Hs=yr.size,uc=yr.pop();uc;){var aa=uc.key;if(yr.size===Hs){var hn=aa.segment;throw new Error("Unable to pop() ".concat(aa.isLeft?"left":"right"," SweepEvent ")+"[".concat(aa.point.x,", ").concat(aa.point.y,"] from segment #").concat(hn.id," ")+"[".concat(hn.leftSE.point.x,", ").concat(hn.leftSE.point.y,"] -> ")+"[".concat(hn.rightSE.point.x,", ").concat(hn.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(yr.size>On)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Na.segments.length>Ut)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var al=Na.process(aa),Tc=0,Vi=al.length;Tc<Vi;Tc++){var y2=al[Tc];void 0===y2.consumedBy&&yr.insert(y2)}Hs=yr.size,uc=yr.pop()}ce.reset();var Bo=Wt.factory(Na.segments);return new sn(Bo).getGeom()}}]),it}());return{union:function(fe){for(var ne=arguments.length,ie=new Array(ne>1?ne-1:0),ke=1;ke<ne;ke++)ie[ke-1]=arguments[ke];return en.run("union",fe,ie)},intersection:function(fe){for(var ne=arguments.length,ie=new Array(ne>1?ne-1:0),ke=1;ke<ne;ke++)ie[ke-1]=arguments[ke];return en.run("intersection",fe,ie)},xor:function(fe){for(var ne=arguments.length,ie=new Array(ne>1?ne-1:0),ke=1;ke<ne;ke++)ie[ke-1]=arguments[ke];return en.run("xor",fe,ie)},difference:function(fe){for(var ne=arguments.length,ie=new Array(ne>1?ne-1:0),ke=1;ke<ne;ke++)ie[ke-1]=arguments[ke];return en.run("difference",fe,ie)}}}()},2402:function(Et){Et.exports=function(){"use strict";function Ze(Qe,Ke,j,Y,Z){!function xe(te,oe,ce,$,qe){for(;$>ce;){if($-ce>600){var He=$-ce+1,Oe=oe-ce+1,he=Math.log(He),Ot=.5*Math.exp(2*he/3),bt=.5*Math.sqrt(he*Ot*(He-Ot)/He)*(Oe-He/2<0?-1:1);xe(te,oe,Math.max(ce,Math.floor(oe-Oe*Ot/He+bt)),Math.min($,Math.floor(oe+(He-Oe)*Ot/He+bt)),qe)}var Se=te[oe],Re=ce,We=$;for(ae(te,ce,oe),qe(te[$],Se)>0&&ae(te,ce,$);Re<We;){for(ae(te,Re,We),Re++,We--;qe(te[Re],Se)<0;)Re++;for(;qe(te[We],Se)>0;)We--}0===qe(te[ce],Se)?ae(te,ce,We):ae(te,++We,$),We<=oe&&(ce=We+1),oe<=We&&($=We-1)}}(Qe,Ke,j||0,Y||Qe.length-1,Z||ee)}function ae(Qe,Ke,j){var Y=Qe[Ke];Qe[Ke]=Qe[j],Qe[j]=Y}function ee(Qe,Ke){return Qe<Ke?-1:Qe>Ke?1:0}var ve=function(Qe){void 0===Qe&&(Qe=9),this._maxEntries=Math.max(4,Qe),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Be(Qe,Ke,j){if(!j)return Ke.indexOf(Qe);for(var Y=0;Y<Ke.length;Y++)if(j(Qe,Ke[Y]))return Y;return-1}function Ie(Qe,Ke){Te(Qe,0,Qe.children.length,Ke,Qe)}function Te(Qe,Ke,j,Y,Z){Z||(Z=ct(null)),Z.minX=1/0,Z.minY=1/0,Z.maxX=-1/0,Z.maxY=-1/0;for(var xe=Ke;xe<j;xe++){var te=Qe.children[xe];_e(Z,Qe.leaf?Y(te):te)}return Z}function _e(Qe,Ke){return Qe.minX=Math.min(Qe.minX,Ke.minX),Qe.minY=Math.min(Qe.minY,Ke.minY),Qe.maxX=Math.max(Qe.maxX,Ke.maxX),Qe.maxY=Math.max(Qe.maxY,Ke.maxY),Qe}function Ve(Qe,Ke){return Qe.minX-Ke.minX}function Je(Qe,Ke){return Qe.minY-Ke.minY}function ot(Qe){return(Qe.maxX-Qe.minX)*(Qe.maxY-Qe.minY)}function Tt(Qe){return Qe.maxX-Qe.minX+(Qe.maxY-Qe.minY)}function ht(Qe,Ke){return Qe.minX<=Ke.minX&&Qe.minY<=Ke.minY&&Ke.maxX<=Qe.maxX&&Ke.maxY<=Qe.maxY}function et(Qe,Ke){return Ke.minX<=Qe.maxX&&Ke.minY<=Qe.maxY&&Ke.maxX>=Qe.minX&&Ke.maxY>=Qe.minY}function ct(Qe){return{children:Qe,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function $t(Qe,Ke,j,Y,Z){for(var xe=[Ke,j];xe.length;)if(!((j=xe.pop())-(Ke=xe.pop())<=Y)){var te=Ke+Math.ceil((j-Ke)/Y/2)*Y;Ze(Qe,te,Ke,j,Z),xe.push(Ke,te,te,j)}}return ve.prototype.all=function(){return this._all(this.data,[])},ve.prototype.search=function(Qe){var Ke=this.data,j=[];if(!et(Qe,Ke))return j;for(var Y=this.toBBox,Z=[];Ke;){for(var xe=0;xe<Ke.children.length;xe++){var te=Ke.children[xe],oe=Ke.leaf?Y(te):te;et(Qe,oe)&&(Ke.leaf?j.push(te):ht(Qe,oe)?this._all(te,j):Z.push(te))}Ke=Z.pop()}return j},ve.prototype.collides=function(Qe){var Ke=this.data;if(!et(Qe,Ke))return!1;for(var j=[];Ke;){for(var Y=0;Y<Ke.children.length;Y++){var Z=Ke.children[Y],xe=Ke.leaf?this.toBBox(Z):Z;if(et(Qe,xe)){if(Ke.leaf||ht(Qe,xe))return!0;j.push(Z)}}Ke=j.pop()}return!1},ve.prototype.load=function(Qe){if(!Qe||!Qe.length)return this;if(Qe.length<this._minEntries){for(var Ke=0;Ke<Qe.length;Ke++)this.insert(Qe[Ke]);return this}var j=this._build(Qe.slice(),0,Qe.length-1,0);if(this.data.children.length)if(this.data.height===j.height)this._splitRoot(this.data,j);else{if(this.data.height<j.height){var Y=this.data;this.data=j,j=Y}this._insert(j,this.data.height-j.height-1,!0)}else this.data=j;return this},ve.prototype.insert=function(Qe){return Qe&&this._insert(Qe,this.data.height-1),this},ve.prototype.clear=function(){return this.data=ct([]),this},ve.prototype.remove=function(Qe,Ke){if(!Qe)return this;for(var j,Y,Z,xe=this.data,te=this.toBBox(Qe),oe=[],ce=[];xe||oe.length;){if(xe||(xe=oe.pop(),Y=oe[oe.length-1],j=ce.pop(),Z=!0),xe.leaf){var $=Be(Qe,xe.children,Ke);if(-1!==$)return xe.children.splice($,1),oe.push(xe),this._condense(oe),this}Z||xe.leaf||!ht(xe,te)?Y?(j++,xe=Y.children[j],Z=!1):xe=null:(oe.push(xe),ce.push(j),j=0,Y=xe,xe=xe.children[0])}return this},ve.prototype.toBBox=function(Qe){return Qe},ve.prototype.compareMinX=function(Qe,Ke){return Qe.minX-Ke.minX},ve.prototype.compareMinY=function(Qe,Ke){return Qe.minY-Ke.minY},ve.prototype.toJSON=function(){return this.data},ve.prototype.fromJSON=function(Qe){return this.data=Qe,this},ve.prototype._all=function(Qe,Ke){for(var j=[];Qe;)Qe.leaf?Ke.push.apply(Ke,Qe.children):j.push.apply(j,Qe.children),Qe=j.pop();return Ke},ve.prototype._build=function(Qe,Ke,j,Y){var Z,xe=j-Ke+1,te=this._maxEntries;if(xe<=te)return Ie(Z=ct(Qe.slice(Ke,j+1)),this.toBBox),Z;Y||(Y=Math.ceil(Math.log(xe)/Math.log(te)),te=Math.ceil(xe/Math.pow(te,Y-1))),(Z=ct([])).leaf=!1,Z.height=Y;var oe=Math.ceil(xe/te),ce=oe*Math.ceil(Math.sqrt(te));$t(Qe,Ke,j,ce,this.compareMinX);for(var $=Ke;$<=j;$+=ce){var qe=Math.min($+ce-1,j);$t(Qe,$,qe,oe,this.compareMinY);for(var He=$;He<=qe;He+=oe){var Oe=Math.min(He+oe-1,qe);Z.children.push(this._build(Qe,He,Oe,Y-1))}}return Ie(Z,this.toBBox),Z},ve.prototype._chooseSubtree=function(Qe,Ke,j,Y){for(;Y.push(Ke),!Ke.leaf&&Y.length-1!==j;){for(var Z=1/0,xe=1/0,te=void 0,oe=0;oe<Ke.children.length;oe++){var ce=Ke.children[oe],$=ot(ce),qe=(He=Qe,Oe=ce,(Math.max(Oe.maxX,He.maxX)-Math.min(Oe.minX,He.minX))*(Math.max(Oe.maxY,He.maxY)-Math.min(Oe.minY,He.minY))-$);qe<xe?(xe=qe,Z=$<Z?$:Z,te=ce):qe===xe&&$<Z&&(Z=$,te=ce)}Ke=te||Ke.children[0]}var He,Oe;return Ke},ve.prototype._insert=function(Qe,Ke,j){var Y=j?Qe:this.toBBox(Qe),Z=[],xe=this._chooseSubtree(Y,this.data,Ke,Z);for(xe.children.push(Qe),_e(xe,Y);Ke>=0&&Z[Ke].children.length>this._maxEntries;)this._split(Z,Ke),Ke--;this._adjustParentBBoxes(Y,Z,Ke)},ve.prototype._split=function(Qe,Ke){var j=Qe[Ke],Y=j.children.length,Z=this._minEntries;this._chooseSplitAxis(j,Z,Y);var xe=this._chooseSplitIndex(j,Z,Y),te=ct(j.children.splice(xe,j.children.length-xe));te.height=j.height,te.leaf=j.leaf,Ie(j,this.toBBox),Ie(te,this.toBBox),Ke?Qe[Ke-1].children.push(te):this._splitRoot(j,te)},ve.prototype._splitRoot=function(Qe,Ke){this.data=ct([Qe,Ke]),this.data.height=Qe.height+1,this.data.leaf=!1,Ie(this.data,this.toBBox)},ve.prototype._chooseSplitIndex=function(Qe,Ke,j){for(var Y,Z,xe,te,oe,ce,$,qe=1/0,He=1/0,Oe=Ke;Oe<=j-Ke;Oe++){var he=Te(Qe,0,Oe,this.toBBox),Ot=Te(Qe,Oe,j,this.toBBox),bt=(Z=he,xe=Ot,void 0,void 0,void 0,void 0,te=Math.max(Z.minX,xe.minX),oe=Math.max(Z.minY,xe.minY),ce=Math.min(Z.maxX,xe.maxX),$=Math.min(Z.maxY,xe.maxY),Math.max(0,ce-te)*Math.max(0,$-oe)),Le=ot(he)+ot(Ot);bt<qe?(qe=bt,Y=Oe,He=Le<He?Le:He):bt===qe&&Le<He&&(He=Le,Y=Oe)}return Y||j-Ke},ve.prototype._chooseSplitAxis=function(Qe,Ke,j){var Y=Qe.leaf?this.compareMinX:Ve,Z=Qe.leaf?this.compareMinY:Je;this._allDistMargin(Qe,Ke,j,Y)<this._allDistMargin(Qe,Ke,j,Z)&&Qe.children.sort(Y)},ve.prototype._allDistMargin=function(Qe,Ke,j,Y){Qe.children.sort(Y);for(var Z=this.toBBox,xe=Te(Qe,0,Ke,Z),te=Te(Qe,j-Ke,j,Z),oe=Tt(xe)+Tt(te),ce=Ke;ce<j-Ke;ce++){var $=Qe.children[ce];_e(xe,Qe.leaf?Z($):$),oe+=Tt(xe)}for(var qe=j-Ke-1;qe>=Ke;qe--){var He=Qe.children[qe];_e(te,Qe.leaf?Z(He):He),oe+=Tt(te)}return oe},ve.prototype._adjustParentBBoxes=function(Qe,Ke,j){for(var Y=j;Y>=0;Y--)_e(Ke[Y],Qe)},ve.prototype._condense=function(Qe){for(var Ke=Qe.length-1,j=void 0;Ke>=0;Ke--)0===Qe[Ke].children.length?Ke>0?(j=Qe[Ke-1].children).splice(j.indexOf(Qe[Ke]),1):this.clear():Ie(Qe[Ke],this.toBBox)},ve}()},4468:(Et,Ze,ae)=>{"use strict";var ee=ae(9582).functionsHaveConfigurableNames(),ve=Object,Be=TypeError;Et.exports=function(){if(null!=this&&this!==ve(this))throw new Be("RegExp.prototype.flags getter called on non-object");var Te="";return this.hasIndices&&(Te+="d"),this.global&&(Te+="g"),this.ignoreCase&&(Te+="i"),this.multiline&&(Te+="m"),this.dotAll&&(Te+="s"),this.unicode&&(Te+="u"),this.sticky&&(Te+="y"),Te},ee&&Object.defineProperty&&Object.defineProperty(Et.exports,"name",{value:"get flags"})},9235:(Et,Ze,ae)=>{"use strict";var ee=ae(2358),ve=ae(5685),Be=ae(4468),Ie=ae(6343),Te=ae(1956),_e=ve(Ie());ee(_e,{getPolyfill:Ie,implementation:Be,shim:Te}),Et.exports=_e},6343:(Et,Ze,ae)=>{"use strict";var ee=ae(4468),ve=ae(2358).supportsDescriptors,Be=Object.getOwnPropertyDescriptor;Et.exports=function(){if(ve&&"gim"===/a/gim.flags){var Te=Be(RegExp.prototype,"flags");if(Te&&"function"==typeof Te.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var _e="",Ve={};if(Object.defineProperty(Ve,"hasIndices",{get:function(){_e+="d"}}),Object.defineProperty(Ve,"sticky",{get:function(){_e+="y"}}),"dy"===_e)return Te.get}}return ee}},1956:(Et,Ze,ae)=>{"use strict";var ee=ae(2358).supportsDescriptors,ve=ae(6343),Be=Object.getOwnPropertyDescriptor,Ie=Object.defineProperty,Te=TypeError,_e=Object.getPrototypeOf,Ve=/a/;Et.exports=function(){if(!ee||!_e)throw new Te("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var ot=ve(),Tt=_e(Ve),ht=Be(Tt,"flags");return(!ht||ht.get!==ot)&&Ie(Tt,"flags",{configurable:!0,enumerable:!1,get:ot}),ot}},9231:Et=>{"use strict";Et.exports={eudist:function(ae,ee,ve){for(var Be=ae.length,Ie=0,Te=0;Te<Be;Te++){var _e=(ae[Te]||0)-(ee[Te]||0);Ie+=_e*_e}return ve?Math.sqrt(Ie):Ie},mandist:function(ae,ee,ve){for(var Be=ae.length,Ie=0,Te=0;Te<Be;Te++)Ie+=Math.abs((ae[Te]||0)-(ee[Te]||0));return ve?Math.sqrt(Ie):Ie},dist:function(ae,ee,ve){var Be=Math.abs(ae-ee);return ve?Be:Be*Be}}},5561:(Et,Ze,ae)=>{"use strict";var ee=ae(9231),ve=ee.eudist,Be=ee.dist;Et.exports={kmrand:function(Te,_e){for(var Ve={},Je=[],ot=_e<<2,Tt=Te.length,ht=Te[0].length>0;Je.length<_e&&ot-- >0;){var et=Te[Math.floor(Math.random()*Tt)],ct=ht?et.join("_"):""+et;Ve[ct]||(Ve[ct]=!0,Je.push(et))}if(Je.length<_e)throw new Error("Error initializating clusters");return Je},kmpp:function(Te,_e){var Ve=Te[0].length?ve:Be,Je=[],ot=Te.length,Tt=Te[0].length>0,et=Te[Math.floor(Math.random()*ot)];for(Tt&&et.join("_"),Je.push(et);Je.length<_e;){for(var $t=[],Qe=Je.length,Ke=0,j=[],Y=0;Y<ot;Y++){for(var Z=1/0,xe=0;xe<Qe;xe++){var te=Ve(Te[Y],Je[xe]);te<=Z&&(Z=te)}$t[Y]=Z}for(var oe=0;oe<ot;oe++)Ke+=$t[oe];for(var ce=0;ce<ot;ce++)j[ce]={i:ce,v:Te[ce],pr:$t[ce]/Ke,cs:0};j.sort(function(Oe,he){return Oe.pr-he.pr}),j[0].cs=j[0].pr;for(var $=1;$<ot;$++)j[$].cs=j[$-1].cs+j[$].pr;for(var qe=Math.random(),He=0;He<ot-1&&j[He++].cs<qe;);Je.push(j[He-1].v)}return Je}}},9475:(Et,Ze,ae)=>{"use strict";var ee=ae(9231),ve=ae(5561),Be=ee.eudist,_e=ve.kmrand,Ve=ve.kmpp;function ot(ht,et,ct){ct=ct||[];for(var $t=0;$t<ht;$t++)ct[$t]=et;return ct}Et.exports=function Tt(ht,et,ct,$t){var Qe=[],Ke=[],j=[],Y=[],Z=!1,xe=$t||1e4,te=ht.length,oe=ht[0].length,ce=oe>0,$=[];if(ct)Qe="kmrand"==ct?_e(ht,et):"kmpp"==ct?Ve(ht,et):ct;else for(var qe={};Qe.length<et;){var He=Math.floor(Math.random()*te);qe[He]||(qe[He]=!0,Qe.push(ht[He]))}do{ot(et,0,$);for(var Oe=0;Oe<te;Oe++){for(var he=1/0,Ot=0,bt=0;bt<et;bt++)(Y=ce?Be(ht[Oe],Qe[bt]):Math.abs(ht[Oe]-Qe[bt]))<=he&&(he=Y,Ot=bt);j[Oe]=Ot,$[Ot]++}for(var Le=[],Se=(Ke=[],0);Se<et;Se++)Le[Se]=ce?ot(oe,0,Le[Se]):0,Ke[Se]=Qe[Se];if(ce){for(var Re=0;Re<et;Re++)Qe[Re]=[];for(var We=0;We<te;We++)for(var mt=Le[j[We]],$e=ht[We],Wt=0;Wt<oe;Wt++)mt[Wt]+=$e[Wt];Z=!0;for(var dt=0;dt<et;dt++){for(var sn=Qe[dt],on=Le[dt],On=Ke[dt],Ut=$[dt],Rn=0;Rn<oe;Rn++)sn[Rn]=on[Rn]/Ut||0;if(Z)for(var en=0;en<oe;en++)if(On[en]!=sn[en]){Z=!1;break}}}else{for(var _r=0;_r<te;_r++)Le[j[_r]]+=ht[_r];for(var jr=0;jr<et;jr++)Qe[jr]=Le[jr]/$[jr]||0;Z=!0;for(var Kn=0;Kn<et;Kn++)if(Ke[Kn]!=Qe[Kn]){Z=!1;break}}Z=Z||--xe<=0}while(!Z);return{it:1e4-xe,k:et,idxs:j,centroids:Qe}}},3095:Et=>{!function(){"use strict";var Ze=Math.PI,ae=Math.sin,ee=Math.cos,ve=Math.tan,Be=Math.asin,Ie=Math.atan2,Te=Math.acos,_e=Ze/180,Ve=864e5;function ht(Re){return new Date((Re+.5-2440588)*Ve)}function et(Re){return function Tt(Re){return Re.valueOf()/Ve-.5+2440588}(Re)-2451545}var ct=23.4397*_e;function $t(Re,We){return Ie(ae(Re)*ee(ct)-ve(We)*ae(ct),ee(Re))}function Qe(Re,We){return Be(ae(We)*ee(ct)+ee(We)*ae(ct)*ae(Re))}function Ke(Re,We,me){return Ie(ae(Re),ee(Re)*ae(We)-ve(me)*ee(We))}function j(Re,We,me){return Be(ae(We)*ae(me)+ee(We)*ee(me)*ee(Re))}function Y(Re,We){return _e*(280.16+360.9856235*Re)-We}function xe(Re){return _e*(357.5291+.98560028*Re)}function te(Re){return Re+_e*(1.9148*ae(Re)+.02*ae(2*Re)+3e-4*ae(3*Re))+102.9372*_e+Ze}function oe(Re){var me=te(xe(Re));return{dec:Qe(me,0),ra:$t(me,0)}}var ce={getPosition:function(Re,We,me){var mt=_e*-me,$e=_e*We,Wt=et(Re),dt=oe(Wt),sn=Y(Wt,mt)-dt.ra;return{azimuth:Ke(sn,$e,dt.dec),altitude:j(sn,$e,dt.dec)}}},$=ce.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];function Oe(Re,We,me){return 9e-4+(Re+We)/(2*Ze)+me}function he(Re,We,me){return 2451545+Re+.0053*ae(We)-.0069*ae(2*me)}function Le(Re,We,me,mt,$e,Wt,dt){var sn=function Ot(Re,We,me){return Te((ae(Re)-ae(We)*ae(me))/(ee(We)*ee(me)))}(Re,me,mt);return he(Oe(sn,We,$e),Wt,dt)}function tt(Re){var me=_e*(134.963+13.064993*Re),mt=_e*(93.272+13.22935*Re),$e=_e*(218.316+13.176396*Re)+6.289*_e*ae(me),Wt=5.128*_e*ae(mt),dt=385001-20905*ee(me);return{ra:$t($e,Wt),dec:Qe($e,Wt),dist:dt}}function Se(Re,We){return new Date(Re.valueOf()+We*Ve/24)}ce.addTime=function(Re,We,me){$.push([Re,We,me])},ce.getTimes=function(Re,We,me,mt){var Ar,jr,Kn,it,$e=_e*-me,Wt=_e*We,dt=function bt(Re){return-2.076*Math.sqrt(Re)/60}(mt=mt||0),on=function He(Re,We){return Math.round(Re-9e-4-We/(2*Ze))}(et(Re),$e),On=Oe(0,$e,on),Ut=xe(On),Rn=te(Ut),en=Qe(Rn,0),_r=he(On,Ut,Rn),ne={solarNoon:ht(_r),nadir:ht(_r-.5)};for(Ar=0,jr=$.length;Ar<jr;Ar+=1)it=Le(((Kn=$[Ar])[0]+dt)*_e,$e,Wt,en,on,Ut,Rn),ne[Kn[1]]=ht(_r-(it-_r)),ne[Kn[2]]=ht(it);return ne},ce.getMoonPosition=function(Re,We,me){var mt=_e*-me,$e=_e*We,Wt=et(Re),dt=tt(Wt),sn=Y(Wt,mt)-dt.ra,on=j(sn,$e,dt.dec),On=Ie(ae(sn),ve($e)*ee(dt.dec)-ae(dt.dec)*ee(sn));return on+=function Z(Re){return Re<0&&(Re=0),2967e-7/Math.tan(Re+.00312536/(Re+.08901179))}(on),{azimuth:Ke(sn,$e,dt.dec),altitude:on,distance:dt.dist,parallacticAngle:On}},ce.getMoonIllumination=function(Re){var We=et(Re||new Date),me=oe(We),mt=tt(We),$e=149598e3,Wt=Te(ae(me.dec)*ae(mt.dec)+ee(me.dec)*ee(mt.dec)*ee(me.ra-mt.ra)),dt=Ie($e*ae(Wt),mt.dist-$e*ee(Wt)),sn=Ie(ee(me.dec)*ae(me.ra-mt.ra),ae(me.dec)*ee(mt.dec)-ee(me.dec)*ae(mt.dec)*ee(me.ra-mt.ra));return{fraction:(1+ee(dt))/2,phase:.5+.5*dt*(sn<0?-1:1)/Math.PI,angle:sn}},ce.getMoonTimes=function(Re,We,me,mt){var $e=new Date(Re);mt?$e.setUTCHours(0,0,0,0):$e.setHours(0,0,0,0);for(var sn,on,On,Ut,Rn,en,_r,Ar,jr,Kn,Jn,it,fe,Wt=.133*_e,dt=ce.getMoonPosition($e,We,me).altitude-Wt,ne=1;ne<=24&&(sn=ce.getMoonPosition(Se($e,ne),We,me).altitude-Wt,Ar=((Rn=(dt+(on=ce.getMoonPosition(Se($e,ne+1),We,me).altitude-Wt))/2-sn)*(_r=-(en=(on-dt)/2)/(2*Rn))+en)*_r+sn,Kn=0,(jr=en*en-4*Rn*sn)>=0&&(Jn=_r-(fe=Math.sqrt(jr)/(2*Math.abs(Rn))),it=_r+fe,Math.abs(Jn)<=1&&Kn++,Math.abs(it)<=1&&Kn++,Jn<-1&&(Jn=it)),1===Kn?dt<0?On=ne+Jn:Ut=ne+Jn:2===Kn&&(On=ne+(Ar<0?it:Jn),Ut=ne+(Ar<0?Jn:it)),!On||!Ut);ne+=2)dt=on;var ie={};return On&&(ie.rise=Se($e,On)),Ut&&(ie.set=Se($e,Ut)),!On&&!Ut&&(ie[Ar>0?"alwaysUp":"alwaysDown"]=!0),ie},Et.exports=ce}()},7253:(Et,Ze,ae)=>{"use strict";ae.r(Ze),ae.d(Ze,{default:()=>ee});class ee{constructor(Ie=[],Te=ve){if(this.data=Ie,this.length=this.data.length,this.compare=Te,this.length>0)for(let _e=(this.length>>1)-1;_e>=0;_e--)this._down(_e)}push(Ie){this.data.push(Ie),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const Ie=this.data[0],Te=this.data.pop();return this.length--,this.length>0&&(this.data[0]=Te,this._down(0)),Ie}peek(){return this.data[0]}_up(Ie){const{data:Te,compare:_e}=this,Ve=Te[Ie];for(;Ie>0;){const Je=Ie-1>>1,ot=Te[Je];if(_e(Ve,ot)>=0)break;Te[Ie]=ot,Ie=Je}Te[Ie]=Ve}_down(Ie){const{data:Te,compare:_e}=this,Ve=this.length>>1,Je=Te[Ie];for(;Ie<Ve;){let ot=1+(Ie<<1),Tt=Te[ot];const ht=ot+1;if(ht<this.length&&_e(Te[ht],Tt)<0&&(ot=ht,Tt=Te[ht]),_e(Tt,Je)>=0)break;Te[Ie]=Tt,Ie=ot}Te[Ie]=Je}}function ve(Be,Ie){return Be<Ie?-1:Be>Ie?1:0}},770:function(Et,Ze){!function(ae){"use strict";function ee(){}function ve(h){this.message=h||""}function Be(h){this.message=h||""}function Ie(h){this.message=h||""}function Te(){}function _e(h){return null===h?N2:h.color}function Ve(h){return null===h?null:h.parent}function Je(h,d){null!==h&&(h.color=d)}function ot(h){return null===h?null:h.left}function Tt(h){return null===h?null:h.right}function ht(){this.root_=null,this.size_=0}function et(){}function ct(){this.array_=[],arguments[0]instanceof Hs&&this.addAll(arguments[0])}function $t(){}function Qe(h){this.message=h||""}function Ke(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(h){if(null==this)throw new TypeError(this+" is not an object");var d=Object(this),m=Math.max(Math.min(d.length,9007199254740991),0)||0,y=1 in arguments&&parseInt(Number(arguments[1]),10)||0;y=y<0?Math.max(m+y,0):Math.min(y,m);var C=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:m;for(C=C<0?Math.max(m+arguments[2],0):Math.min(C,m);y<C;)d[y]=h,++y;return d},writable:!0}),Number.isFinite=Number.isFinite||function(h){return"number"==typeof h&&isFinite(h)},Number.isInteger=Number.isInteger||function(h){return"number"==typeof h&&isFinite(h)&&Math.floor(h)===h},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(h){return h!=h},Math.trunc=Math.trunc||function(h){return h<0?Math.ceil(h):Math.floor(h)};var j=function(){};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.prototype.equalsWithTolerance=function(h,d,m){return Math.abs(h-d)<=m};var Y=function(h){function d(m){h.call(this,m),this.name="IllegalArgumentException",this.message=m,this.stack=(new h).stack}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(Error),Z=function(){},xe={MAX_VALUE:{configurable:!0}};Z.isNaN=function(h){return Number.isNaN(h)},Z.doubleToLongBits=function(h){return h},Z.longBitsToDouble=function(h){return h},Z.isInfinite=function(h){return!Number.isFinite(h)},xe.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Z,xe);var te=function(){},oe=function(){},ce=function(){},$=function h(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=h.NULL_ORDINATE;else if(1===arguments.length){var d=arguments[0];this.x=d.x,this.y=d.y,this.z=d.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=h.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},qe={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};$.prototype.setOrdinate=function(h,d){switch(h){case $.X:this.x=d;break;case $.Y:this.y=d;break;case $.Z:this.z=d;break;default:throw new Y("Invalid ordinate index: "+h)}},$.prototype.equals2D=function(){if(1===arguments.length){var h=arguments[0];return this.x===h.x&&this.y===h.y}if(2===arguments.length){var d=arguments[0],m=arguments[1];return!!j.equalsWithTolerance(this.x,d.x,m)&&!!j.equalsWithTolerance(this.y,d.y,m)}},$.prototype.getOrdinate=function(h){switch(h){case $.X:return this.x;case $.Y:return this.y;case $.Z:return this.z}throw new Y("Invalid ordinate index: "+h)},$.prototype.equals3D=function(h){return this.x===h.x&&this.y===h.y&&(this.z===h.z||Z.isNaN(this.z))&&Z.isNaN(h.z)},$.prototype.equals=function(h){return h instanceof $&&this.equals2D(h)},$.prototype.equalInZ=function(h,d){return j.equalsWithTolerance(this.z,h.z,d)},$.prototype.compareTo=function(h){return this.x<h.x?-1:this.x>h.x?1:this.y<h.y?-1:this.y>h.y?1:0},$.prototype.clone=function(){},$.prototype.copy=function(){return new $(this)},$.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},$.prototype.distance3D=function(h){var d=this.x-h.x,m=this.y-h.y,y=this.z-h.z;return Math.sqrt(d*d+m*m+y*y)},$.prototype.distance=function(h){var d=this.x-h.x,m=this.y-h.y;return Math.sqrt(d*d+m*m)},$.prototype.hashCode=function(){var h=17;return 37*(h=37*h+$.hashCode(this.x))+$.hashCode(this.y)},$.prototype.setCoordinate=function(h){this.x=h.x,this.y=h.y,this.z=h.z},$.prototype.interfaces_=function(){return[te,oe,ee]},$.prototype.getClass=function(){return $},$.hashCode=function(){if(1===arguments.length){var d=Z.doubleToLongBits(arguments[0]);return Math.trunc((d^d)>>>32)}},qe.DimensionalComparator.get=function(){return He},qe.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},qe.NULL_ORDINATE.get=function(){return Z.NaN},qe.X.get=function(){return 0},qe.Y.get=function(){return 1},qe.Z.get=function(){return 2},Object.defineProperties($,qe);var He=function(h){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var d=arguments[0];if(2!==d&&3!==d)throw new Y("only 2 or 3 dimensions may be specified");this._dimensionsToTest=d}};He.prototype.compare=function(h,d){var m=h,y=d,C=He.compare(m.x,y.x);if(0!==C)return C;var F=He.compare(m.y,y.y);return 0!==F?F:this._dimensionsToTest<=2?0:He.compare(m.z,y.z)},He.prototype.interfaces_=function(){return[ce]},He.prototype.getClass=function(){return He},He.compare=function(h,d){return h<d?-1:h>d?1:Z.isNaN(h)?Z.isNaN(d)?0:-1:Z.isNaN(d)?1:0};var Oe=function(){};Oe.prototype.create=function(){},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var he=function(){},Ot={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};he.prototype.interfaces_=function(){return[]},he.prototype.getClass=function(){return he},he.toLocationSymbol=function(h){switch(h){case he.EXTERIOR:return"e";case he.BOUNDARY:return"b";case he.INTERIOR:return"i";case he.NONE:return"-"}throw new Y("Unknown location value: "+h)},Ot.INTERIOR.get=function(){return 0},Ot.BOUNDARY.get=function(){return 1},Ot.EXTERIOR.get=function(){return 2},Ot.NONE.get=function(){return-1},Object.defineProperties(he,Ot);var bt=function(h,d){return h.interfaces_&&h.interfaces_().indexOf(d)>-1},Le=function(){},tt={LOG_10:{configurable:!0}};Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le},Le.log10=function(h){var d=Math.log(h);return Z.isInfinite(d)||Z.isNaN(d)?d:d/Le.LOG_10},Le.min=function(h,d,m,y){var C=h;return d<C&&(C=d),m<C&&(C=m),y<C&&(C=y),C},Le.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1],m=arguments[2];return h<d?d:h>m?m:h}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var y=arguments[0],C=arguments[1],F=arguments[2];return y<C?C:y>F?F:y}},Le.wrap=function(h,d){return h<0?d- -h%d:h%d},Le.max=function(){if(3===arguments.length){var d=arguments[1],m=arguments[2],y=arguments[0];return d>y&&(y=d),m>y&&(y=m),y}if(4===arguments.length){var F=arguments[1],N=arguments[2],q=arguments[3],ye=arguments[0];return F>ye&&(ye=F),N>ye&&(ye=N),q>ye&&(ye=q),ye}},Le.average=function(h,d){return(h+d)/2},tt.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Le,tt);var Se=function(h){this.str=h};Se.prototype.append=function(h){this.str+=h},Se.prototype.setCharAt=function(h,d){this.str=this.str.substr(0,h)+d+this.str.substr(h+1)},Se.prototype.toString=function(h){return this.str};var Re=function(h){this.value=h};Re.prototype.intValue=function(){return this.value},Re.prototype.compareTo=function(h){return this.value<h?-1:this.value>h?1:0},Re.isNaN=function(h){return Number.isNaN(h)};var We=function(){};We.isWhitespace=function(h){return h<=32&&h>=0||127===h},We.toUpperCase=function(h){return h.toUpperCase()};var me=function h(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof h?this.init(arguments[0]):"string"==typeof arguments[0]&&h.call(this,h.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},mt={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};me.prototype.le=function(h){return(this._hi<h._hi||this._hi===h._hi)&&this._lo<=h._lo},me.prototype.extractSignificantDigits=function(h,d){var m=this.abs(),y=me.magnitude(m._hi),C=me.TEN.pow(y);(m=m.divide(C)).gt(me.TEN)?(m=m.divide(me.TEN),y+=1):m.lt(me.ONE)&&(m=m.multiply(me.TEN),y-=1);for(var F=y+1,N=new Se,q=me.MAX_PRINT_DIGITS-1,ye=0;ye<=q;ye++){h&&ye===F&&N.append(".");var je=Math.trunc(m._hi);if(je<0)break;var yt=!1,vt=0;je>9?(yt=!0,vt="9"):vt="0"+je,N.append(vt),m=m.subtract(me.valueOf(je)).multiply(me.TEN),yt&&m.selfAdd(me.TEN);var gn=!0,En=me.magnitude(m._hi);if(En<0&&Math.abs(En)>=q-ye&&(gn=!1),!gn)break}return d[0]=y,N.toString()},me.prototype.sqr=function(){return this.multiply(this)},me.prototype.doubleValue=function(){return this._hi+this._lo},me.prototype.subtract=function(){return arguments[0]instanceof me?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},me.prototype.equals=function(){if(1===arguments.length){var h=arguments[0];return this._hi===h._hi&&this._lo===h._lo}},me.prototype.isZero=function(){return 0===this._hi&&0===this._lo},me.prototype.selfSubtract=function(){if(arguments[0]instanceof me){var h=arguments[0];return this.isNaN()?this:this.selfAdd(-h._hi,-h._lo)}if("number"==typeof arguments[0]){var d=arguments[0];return this.isNaN()?this:this.selfAdd(-d,0)}},me.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},me.prototype.min=function(h){return this.le(h)?this:h},me.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof me){var h=arguments[0];return this.selfDivide(h._hi,h._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var m=arguments[0],C=null,F=null,N=null,q=null,ye=null,je=null,yt=null,vt=null;return this._hi=vt=(ye=this._hi/m)+(je=(this._hi-(yt=ye*m)-(vt=(C=(je=me.SPLIT*ye)-(C=je-ye))*(N=(vt=me.SPLIT*m)-(N=vt-m))-yt+C*(q=m-N)+(F=ye-C)*N+F*q)+this._lo-ye*arguments[1])/m),this._lo=ye-vt+je,this}},me.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},me.prototype.divide=function(){if(arguments[0]instanceof me){var h=arguments[0],d=null,m=null,y=null,C=null,F=null,N=null,q=null,ye=null;return m=(F=this._hi/h._hi)-(d=(N=me.SPLIT*F)-(d=N-F)),ye=d*(y=(ye=me.SPLIT*h._hi)-(y=ye-h._hi))-(q=F*h._hi)+d*(C=h._hi-y)+m*y+m*C,new me(ye=F+(N=(this._hi-q-ye+this._lo-F*h._lo)/h._hi),F-ye+N)}if("number"==typeof arguments[0]){var je=arguments[0];return Z.isNaN(je)?me.createNaN():me.copy(this).selfDivide(je,0)}},me.prototype.ge=function(h){return(this._hi>h._hi||this._hi===h._hi)&&this._lo>=h._lo},me.prototype.pow=function(h){if(0===h)return me.valueOf(1);var d=new me(this),m=me.valueOf(1),y=Math.abs(h);if(y>1)for(;y>0;)y%2==1&&m.selfMultiply(d),(y/=2)>0&&(d=d.sqr());else m=d;return h<0?m.reciprocal():m},me.prototype.ceil=function(){if(this.isNaN())return me.NaN;var h=Math.ceil(this._hi),d=0;return h===this._hi&&(d=Math.ceil(this._lo)),new me(h,d)},me.prototype.compareTo=function(h){return this._hi<h._hi?-1:this._hi>h._hi?1:this._lo<h._lo?-1:this._lo>h._lo?1:0},me.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},me.prototype.setValue=function(){return arguments[0]instanceof me||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},me.prototype.max=function(h){return this.ge(h)?this:h},me.prototype.sqrt=function(){if(this.isZero())return me.valueOf(0);if(this.isNegative())return me.NaN;var h=1/Math.sqrt(this._hi),m=me.valueOf(this._hi*h),y=this.subtract(m.sqr())._hi*(.5*h);return m.add(y)},me.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof me){var h=arguments[0];return this.selfAdd(h._hi,h._lo)}if("number"==typeof arguments[0]){var d=arguments[0],m=null,y=null,C=null,N=null,q=null;return this._hi=(m=(C=this._hi+d)+(q=d-(N=C-this._hi)+(this._hi-(C-N))+this._lo))+(y=q+(C-m)),this._lo=y+(m-this._hi),this}}else if(2===arguments.length){var ye=arguments[0],je=arguments[1],yt=null,vt=null,gn=null,En=null,Pn=null,ri=null,Zr=null;Pn=(En=this._hi+ye)-(ri=En-this._hi),gn=(vt=this._lo+je)-(Zr=vt-this._lo);var Zo=(yt=En+(ri=(Pn=ye-ri+(this._hi-Pn))+vt))+(ri=(gn=je-Zr+(this._lo-gn))+(ri+(En-yt))),S1=ri+(yt-Zo);return this._hi=Zo,this._lo=S1,this}},me.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof me){var h=arguments[0];return this.selfMultiply(h._hi,h._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var m=arguments[0],C=null,F=null,N=null,q=null,ye=null,je=null;C=(ye=me.SPLIT*this._hi)-this._hi,C=ye-C;var yt=(ye=this._hi*m)+(je=C*(N=(je=me.SPLIT*m)-(N=je-m))-ye+C*(q=m-N)+(F=this._hi-C)*N+F*q+(this._hi*arguments[1]+this._lo*m)),vt=je+(C=ye-yt);return this._hi=yt,this._lo=vt,this}},me.prototype.selfSqr=function(){return this.selfMultiply(this)},me.prototype.floor=function(){if(this.isNaN())return me.NaN;var h=Math.floor(this._hi),d=0;return h===this._hi&&(d=Math.floor(this._lo)),new me(h,d)},me.prototype.negate=function(){return this.isNaN()?this:new me(-this._hi,-this._lo)},me.prototype.clone=function(){},me.prototype.multiply=function(){if(arguments[0]instanceof me){var h=arguments[0];return h.isNaN()?me.createNaN():me.copy(this).selfMultiply(h)}if("number"==typeof arguments[0]){var d=arguments[0];return Z.isNaN(d)?me.createNaN():me.copy(this).selfMultiply(d,0)}},me.prototype.isNaN=function(){return Z.isNaN(this._hi)},me.prototype.intValue=function(){return Math.trunc(this._hi)},me.prototype.toString=function(){var h=me.magnitude(this._hi);return h>=-3&&h<=20?this.toStandardNotation():this.toSciNotation()},me.prototype.toStandardNotation=function(){var h=this.getSpecialNumberString();if(null!==h)return h;var d=new Array(1).fill(null),m=this.extractSignificantDigits(!0,d),y=d[0]+1,C=m;return"."===m.charAt(0)?C="0"+m:y<0?C="0."+me.stringOfChar("0",-y)+m:-1===m.indexOf(".")&&(C=m+me.stringOfChar("0",y-m.length)+".0"),this.isNegative()?"-"+C:C},me.prototype.reciprocal=function(){var d,y,C,N,h=null,m=null,F=null,q=null;d=(C=1/this._hi)-(h=(F=me.SPLIT*C)-(h=F-C)),m=(q=me.SPLIT*this._hi)-this._hi;var ye=C+(F=(1-(N=C*this._hi)-(q=h*(m=q-m)-N+h*(y=this._hi-m)+d*m+d*y)-C*this._lo)/this._hi);return new me(ye,C-ye+F)},me.prototype.toSciNotation=function(){if(this.isZero())return me.SCI_NOT_ZERO;var h=this.getSpecialNumberString();if(null!==h)return h;var d=new Array(1).fill(null),m=this.extractSignificantDigits(!1,d),y=me.SCI_NOT_EXPONENT_CHAR+d[0];if("0"===m.charAt(0))throw new Error("Found leading zero: "+m);var C="";m.length>1&&(C=m.substring(1));var F=m.charAt(0)+"."+C;return this.isNegative()?"-"+F+y:F+y},me.prototype.abs=function(){return this.isNaN()?me.NaN:this.isNegative()?this.negate():new me(this)},me.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},me.prototype.lt=function(h){return(this._hi<h._hi||this._hi===h._hi)&&this._lo<h._lo},me.prototype.add=function(){if(arguments[0]instanceof me){var h=arguments[0];return me.copy(this).selfAdd(h)}if("number"==typeof arguments[0]){var d=arguments[0];return me.copy(this).selfAdd(d)}},me.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof me){var d=arguments[0];this._hi=d._hi,this._lo=d._lo}}else if(2===arguments.length){var y=arguments[1];this._hi=arguments[0],this._lo=y}},me.prototype.gt=function(h){return(this._hi>h._hi||this._hi===h._hi)&&this._lo>h._lo},me.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},me.prototype.trunc=function(){return this.isNaN()?me.NaN:this.isPositive()?this.floor():this.ceil()},me.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},me.prototype.interfaces_=function(){return[ee,te,oe]},me.prototype.getClass=function(){return me},me.sqr=function(h){return me.valueOf(h).selfMultiply(h)},me.valueOf=function(){return"string"==typeof arguments[0]?me.parse(arguments[0]):"number"==typeof arguments[0]?new me(arguments[0]):void 0},me.sqrt=function(h){return me.valueOf(h).sqrt()},me.parse=function(h){for(var d=0,m=h.length;We.isWhitespace(h.charAt(d));)d++;var y=!1;if(d<m){var C=h.charAt(d);"-"!==C&&"+"!==C||(d++,"-"===C&&(y=!0))}for(var F=new me,N=0,q=0,ye=0;!(d>=m);){var je=h.charAt(d);if(d++,We.isDigit(je)){var yt=je-"0";F.selfMultiply(me.TEN),F.selfAdd(yt),N++}else{if("."!==je){if("e"===je||"E"===je){var vt=h.substring(d);try{ye=Re.parseInt(vt)}catch(Zr){throw Zr instanceof Error?new Error("Invalid exponent "+vt+" in string "+h):Zr}break}throw new Error("Unexpected character '"+je+"' at position "+d+" in string "+h)}q=N}}var gn=F,En=N-q-ye;if(0===En)gn=F;else if(En>0){var Pn=me.TEN.pow(En);gn=F.divide(Pn)}else if(En<0){var ri=me.TEN.pow(-En);gn=F.multiply(ri)}return y?gn.negate():gn},me.createNaN=function(){return new me(Z.NaN,Z.NaN)},me.copy=function(h){return new me(h)},me.magnitude=function(h){var d=Math.abs(h),m=Math.log(d)/Math.log(10),y=Math.trunc(Math.floor(m));return 10*Math.pow(10,y)<=d&&(y+=1),y},me.stringOfChar=function(h,d){for(var m=new Se,y=0;y<d;y++)m.append(h);return m.toString()},mt.PI.get=function(){return new me(3.141592653589793,12246467991473532e-32)},mt.TWO_PI.get=function(){return new me(6.283185307179586,24492935982947064e-32)},mt.PI_2.get=function(){return new me(1.5707963267948966,6123233995736766e-32)},mt.E.get=function(){return new me(2.718281828459045,14456468917292502e-32)},mt.NaN.get=function(){return new me(Z.NaN,Z.NaN)},mt.EPS.get=function(){return 123259516440783e-46},mt.SPLIT.get=function(){return 134217729},mt.MAX_PRINT_DIGITS.get=function(){return 32},mt.TEN.get=function(){return me.valueOf(10)},mt.ONE.get=function(){return me.valueOf(1)},mt.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},mt.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(me,mt);var $e=function(){},Wt={DP_SAFE_EPSILON:{configurable:!0}};$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e},$e.orientationIndex=function(h,d,m){var y=$e.orientationIndexFilter(h,d,m);if(y<=1)return y;var C=me.valueOf(d.x).selfAdd(-h.x),F=me.valueOf(d.y).selfAdd(-h.y),N=me.valueOf(m.x).selfAdd(-d.x),q=me.valueOf(m.y).selfAdd(-d.y);return C.selfMultiply(q).selfSubtract(F.selfMultiply(N)).signum()},$e.signOfDet2x2=function(h,d,m,y){return h.multiply(y).selfSubtract(d.multiply(m)).signum()},$e.intersection=function(h,d,m,y){var C=me.valueOf(y.y).selfSubtract(m.y).selfMultiply(me.valueOf(d.x).selfSubtract(h.x)),F=me.valueOf(y.x).selfSubtract(m.x).selfMultiply(me.valueOf(d.y).selfSubtract(h.y)),N=C.subtract(F),q=me.valueOf(y.x).selfSubtract(m.x).selfMultiply(me.valueOf(h.y).selfSubtract(m.y)),ye=me.valueOf(y.y).selfSubtract(m.y).selfMultiply(me.valueOf(h.x).selfSubtract(m.x)),je=q.subtract(ye).selfDivide(N).doubleValue(),yt=me.valueOf(h.x).selfAdd(me.valueOf(d.x).selfSubtract(h.x).selfMultiply(je)).doubleValue(),vt=me.valueOf(d.x).selfSubtract(h.x).selfMultiply(me.valueOf(h.y).selfSubtract(m.y)),gn=me.valueOf(d.y).selfSubtract(h.y).selfMultiply(me.valueOf(h.x).selfSubtract(m.x)),En=vt.subtract(gn).selfDivide(N).doubleValue(),Pn=me.valueOf(m.y).selfAdd(me.valueOf(y.y).selfSubtract(m.y).selfMultiply(En)).doubleValue();return new $(yt,Pn)},$e.orientationIndexFilter=function(h,d,m){var y=null,C=(h.x-m.x)*(d.y-m.y),F=(h.y-m.y)*(d.x-m.x),N=C-F;if(C>0){if(F<=0)return $e.signum(N);y=C+F}else{if(!(C<0)||F>=0)return $e.signum(N);y=-C-F}var q=$e.DP_SAFE_EPSILON*y;return N>=q||-N>=q?$e.signum(N):2},$e.signum=function(h){return h>0?1:h<0?-1:0},Wt.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties($e,Wt);var dt=function(){},sn={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};sn.X.get=function(){return 0},sn.Y.get=function(){return 1},sn.Z.get=function(){return 2},sn.M.get=function(){return 3},dt.prototype.setOrdinate=function(h,d,m){},dt.prototype.size=function(){},dt.prototype.getOrdinate=function(h,d){},dt.prototype.getCoordinate=function(){},dt.prototype.getCoordinateCopy=function(h){},dt.prototype.getDimension=function(){},dt.prototype.getX=function(h){},dt.prototype.clone=function(){},dt.prototype.expandEnvelope=function(h){},dt.prototype.copy=function(){},dt.prototype.getY=function(h){},dt.prototype.toCoordinateArray=function(){},dt.prototype.interfaces_=function(){return[oe]},dt.prototype.getClass=function(){return dt},Object.defineProperties(dt,sn);var on=function(){},On=function(h){function d(){h.call(this,"Projective point not representable on the Cartesian plane.")}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(on),Ut=function(){};Ut.arraycopy=function(h,d,m,y,C){for(var F=0,N=d;N<d+C;N++)m[y+F]=h[N],F++},Ut.getProperty=function(h){return{"line.separator":"\n"}[h]};var Rn=function h(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var d=arguments[0];this.x=d.x,this.y=d.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var y=arguments[1];this.x=arguments[0],this.y=y,this.w=1}else if(arguments[0]instanceof h&&arguments[1]instanceof h){var C=arguments[0],F=arguments[1];this.x=C.y*F.w-F.y*C.w,this.y=F.x*C.w-C.x*F.w,this.w=C.x*F.y-F.x*C.y}else if(arguments[0]instanceof $&&arguments[1]instanceof $){var N=arguments[0],q=arguments[1];this.x=N.y-q.y,this.y=q.x-N.x,this.w=N.x*q.y-q.x*N.y}}else if(3===arguments.length){var je=arguments[1],yt=arguments[2];this.x=arguments[0],this.y=je,this.w=yt}else if(4===arguments.length){var vt=arguments[0],gn=arguments[1],En=arguments[2],Pn=arguments[3],ri=vt.y-gn.y,Zr=gn.x-vt.x,Zo=vt.x*gn.y-gn.x*vt.y,S1=En.y-Pn.y,Gl=Pn.x-En.x,Ql=En.x*Pn.y-Pn.x*En.y;this.x=Zr*Ql-Gl*Zo,this.y=S1*Zo-ri*Ql,this.w=ri*Gl-S1*Zr}};Rn.prototype.getY=function(){var h=this.y/this.w;if(Z.isNaN(h)||Z.isInfinite(h))throw new On;return h},Rn.prototype.getX=function(){var h=this.x/this.w;if(Z.isNaN(h)||Z.isInfinite(h))throw new On;return h},Rn.prototype.getCoordinate=function(){var h=new $;return h.x=this.getX(),h.y=this.getY(),h},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.intersection=function(h,d,m,y){var C=h.y-d.y,F=d.x-h.x,N=h.x*d.y-d.x*h.y,q=m.y-y.y,ye=y.x-m.x,je=m.x*y.y-y.x*m.y,yt=C*ye-q*F,vt=(F*je-ye*N)/yt,gn=(q*N-C*je)/yt;if(Z.isNaN(vt)||Z.isInfinite(vt)||Z.isNaN(gn)||Z.isInfinite(gn))throw new On;return new $(vt,gn)};var en=function h(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof $){var d=arguments[0];this.init(d.x,d.x,d.y,d.y)}else arguments[0]instanceof h&&this.init(arguments[0]);else if(2===arguments.length){var y=arguments[0],C=arguments[1];this.init(y.x,C.x,y.y,C.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},_r={serialVersionUID:{configurable:!0}};en.prototype.getArea=function(){return this.getWidth()*this.getHeight()},en.prototype.equals=function(h){if(!(h instanceof en))return!1;var d=h;return this.isNull()?d.isNull():this._maxx===d.getMaxX()&&this._maxy===d.getMaxY()&&this._minx===d.getMinX()&&this._miny===d.getMinY()},en.prototype.intersection=function(h){return this.isNull()||h.isNull()||!this.intersects(h)?new en:new en(this._minx>h._minx?this._minx:h._minx,this._maxx<h._maxx?this._maxx:h._maxx,this._miny>h._miny?this._miny:h._miny,this._maxy<h._maxy?this._maxy:h._maxy)},en.prototype.isNull=function(){return this._maxx<this._minx},en.prototype.getMaxX=function(){return this._maxx},en.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];return this.covers(h.x,h.y)}if(arguments[0]instanceof en){var d=arguments[0];return!this.isNull()&&!d.isNull()&&d.getMinX()>=this._minx&&d.getMaxX()<=this._maxx&&d.getMinY()>=this._miny&&d.getMaxY()<=this._maxy}}else if(2===arguments.length){var m=arguments[0],y=arguments[1];return!this.isNull()&&m>=this._minx&&m<=this._maxx&&y>=this._miny&&y<=this._maxy}},en.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof en){var h=arguments[0];return!this.isNull()&&!h.isNull()&&!(h._minx>this._maxx||h._maxx<this._minx||h._miny>this._maxy||h._maxy<this._miny)}if(arguments[0]instanceof $){var d=arguments[0];return this.intersects(d.x,d.y)}}else if(2===arguments.length){var m=arguments[0],y=arguments[1];return!this.isNull()&&!(m>this._maxx||m<this._minx||y>this._maxy||y<this._miny)}},en.prototype.getMinY=function(){return this._miny},en.prototype.getMinX=function(){return this._minx},en.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];this.expandToInclude(h.x,h.y)}else if(arguments[0]instanceof en){var d=arguments[0];if(d.isNull())return null;this.isNull()?(this._minx=d.getMinX(),this._maxx=d.getMaxX(),this._miny=d.getMinY(),this._maxy=d.getMaxY()):(d._minx<this._minx&&(this._minx=d._minx),d._maxx>this._maxx&&(this._maxx=d._maxx),d._miny<this._miny&&(this._miny=d._miny),d._maxy>this._maxy&&(this._maxy=d._maxy))}}else if(2===arguments.length){var m=arguments[0],y=arguments[1];this.isNull()?(this._minx=m,this._maxx=m,this._miny=y,this._maxy=y):(m<this._minx&&(this._minx=m),m>this._maxx&&(this._maxx=m),y<this._miny&&(this._miny=y),y>this._maxy&&(this._maxy=y))}},en.prototype.minExtent=function(){if(this.isNull())return 0;var h=this.getWidth(),d=this.getHeight();return h<d?h:d},en.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},en.prototype.compareTo=function(h){var d=h;return this.isNull()?d.isNull()?0:-1:d.isNull()?1:this._minx<d._minx?-1:this._minx>d._minx?1:this._miny<d._miny?-1:this._miny>d._miny?1:this._maxx<d._maxx?-1:this._maxx>d._maxx?1:this._maxy<d._maxy?-1:this._maxy>d._maxy?1:0},en.prototype.translate=function(h,d){if(this.isNull())return null;this.init(this.getMinX()+h,this.getMaxX()+h,this.getMinY()+d,this.getMaxY()+d)},en.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},en.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},en.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},en.prototype.maxExtent=function(){if(this.isNull())return 0;var h=this.getWidth(),d=this.getHeight();return h>d?h:d},en.prototype.expandBy=function(){if(1===arguments.length){var h=arguments[0];this.expandBy(h,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this.isNull())return null;this._minx-=d,this._maxx+=d,this._miny-=m,this._maxy+=m,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},en.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof en)return this.covers(arguments[0]);if(arguments[0]instanceof $)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},en.prototype.centre=function(){return this.isNull()?null:new $((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},en.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];this.init(h.x,h.x,h.y,h.y)}else if(arguments[0]instanceof en){var d=arguments[0];this._minx=d._minx,this._maxx=d._maxx,this._miny=d._miny,this._maxy=d._maxy}}else if(2===arguments.length){var m=arguments[0],y=arguments[1];this.init(m.x,y.x,m.y,y.y)}else if(4===arguments.length){var C=arguments[0],F=arguments[1],N=arguments[2],q=arguments[3];C<F?(this._minx=C,this._maxx=F):(this._minx=F,this._maxx=C),N<q?(this._miny=N,this._maxy=q):(this._miny=q,this._maxy=N)}},en.prototype.getMaxY=function(){return this._maxy},en.prototype.distance=function(h){if(this.intersects(h))return 0;var d=0;this._maxx<h._minx?d=h._minx-this._maxx:this._minx>h._maxx&&(d=this._minx-h._maxx);var m=0;return this._maxy<h._miny?m=h._miny-this._maxy:this._miny>h._maxy&&(m=this._miny-h._maxy),0===d?m:0===m?d:Math.sqrt(d*d+m*m)},en.prototype.hashCode=function(){var h=17;return 37*(h=37*(h=37*(h=37*h+$.hashCode(this._minx))+$.hashCode(this._maxx))+$.hashCode(this._miny))+$.hashCode(this._maxy)},en.prototype.interfaces_=function(){return[te,ee]},en.prototype.getClass=function(){return en},en.intersects=function(){if(3===arguments.length){var h=arguments[0],d=arguments[1],m=arguments[2];return m.x>=(h.x<d.x?h.x:d.x)&&m.x<=(h.x>d.x?h.x:d.x)&&m.y>=(h.y<d.y?h.y:d.y)&&m.y<=(h.y>d.y?h.y:d.y)}if(4===arguments.length){var y=arguments[0],C=arguments[1],F=arguments[2],N=arguments[3],q=Math.min(F.x,N.x),ye=Math.max(F.x,N.x),je=Math.min(y.x,C.x),yt=Math.max(y.x,C.x);return!(je>ye||yt<q||(q=Math.min(F.y,N.y),ye=Math.max(F.y,N.y),je=Math.min(y.y,C.y),yt=Math.max(y.y,C.y),je>ye||yt<q))}},_r.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(en,_r);var Ar={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},jr=function(h){this.geometryFactory=h||new ir};jr.prototype.read=function(h){var d,m;h=h.replace(/[\n\r]/g," ");var C=Ar.typeStr.exec(h);if(-1!==h.search("EMPTY")&&((C=Ar.emptyTypeStr.exec(h))[2]=void 0),C&&(m=C[1].toLowerCase(),Jn[m]&&(d=Jn[m].apply(this,[C[2]]))),void 0===d)throw new Error("Could not parse WKT "+h);return d},jr.prototype.write=function(h){return this.extractGeometry(h)},jr.prototype.extractGeometry=function(h){var d=h.getGeometryType().toLowerCase();if(!Kn[d])return null;var m=d.toUpperCase();return h.isEmpty()?m+" EMPTY":m+"("+Kn[d].apply(this,[h])+")"};var Kn={coordinate:function(h){return h.x+" "+h.y},point:function(h){return Kn.coordinate.call(this,h._coordinates._coordinates[0])},multipoint:function(h){for(var d=[],m=0,y=h._geometries.length;m<y;++m)d.push("("+Kn.point.apply(this,[h._geometries[m]])+")");return d.join(",")},linestring:function(h){for(var d=[],m=0,y=h._points._coordinates.length;m<y;++m)d.push(Kn.coordinate.apply(this,[h._points._coordinates[m]]));return d.join(",")},linearring:function(h){for(var d=[],m=0,y=h._points._coordinates.length;m<y;++m)d.push(Kn.coordinate.apply(this,[h._points._coordinates[m]]));return d.join(",")},multilinestring:function(h){for(var d=[],m=0,y=h._geometries.length;m<y;++m)d.push("("+Kn.linestring.apply(this,[h._geometries[m]])+")");return d.join(",")},polygon:function(h){var d=[];d.push("("+Kn.linestring.apply(this,[h._shell])+")");for(var m=0,y=h._holes.length;m<y;++m)d.push("("+Kn.linestring.apply(this,[h._holes[m]])+")");return d.join(",")},multipolygon:function(h){for(var d=[],m=0,y=h._geometries.length;m<y;++m)d.push("("+Kn.polygon.apply(this,[h._geometries[m]])+")");return d.join(",")},geometrycollection:function(h){for(var d=[],m=0,y=h._geometries.length;m<y;++m)d.push(this.extractGeometry(h._geometries[m]));return d.join(",")}},Jn={point:function(h){if(void 0===h)return this.geometryFactory.createPoint();var d=h.trim().split(Ar.spaces);return this.geometryFactory.createPoint(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])))},multipoint:function(h){if(void 0===h)return this.geometryFactory.createMultiPoint();for(var d,m=h.trim().split(","),y=[],C=0,F=m.length;C<F;++C)d=m[C].replace(Ar.trimParens,"$1"),y.push(Jn.point.apply(this,[d]));return this.geometryFactory.createMultiPoint(y)},linestring:function(h){if(void 0===h)return this.geometryFactory.createLineString();for(var d,m=h.trim().split(","),y=[],C=0,F=m.length;C<F;++C)d=m[C].trim().split(Ar.spaces),y.push(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLineString(y)},linearring:function(h){if(void 0===h)return this.geometryFactory.createLinearRing();for(var d,m=h.trim().split(","),y=[],C=0,F=m.length;C<F;++C)d=m[C].trim().split(Ar.spaces),y.push(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLinearRing(y)},multilinestring:function(h){if(void 0===h)return this.geometryFactory.createMultiLineString();for(var d,m=h.trim().split(Ar.parenComma),y=[],C=0,F=m.length;C<F;++C)d=m[C].replace(Ar.trimParens,"$1"),y.push(Jn.linestring.apply(this,[d]));return this.geometryFactory.createMultiLineString(y)},polygon:function(h){if(void 0===h)return this.geometryFactory.createPolygon();for(var d,m,y,C,F=h.trim().split(Ar.parenComma),N=[],q=0,ye=F.length;q<ye;++q)d=F[q].replace(Ar.trimParens,"$1"),m=Jn.linestring.apply(this,[d]),y=this.geometryFactory.createLinearRing(m._points),0===q?C=y:N.push(y);return this.geometryFactory.createPolygon(C,N)},multipolygon:function(h){if(void 0===h)return this.geometryFactory.createMultiPolygon();for(var d,m=h.trim().split(Ar.doubleParenComma),y=[],C=0,F=m.length;C<F;++C)d=m[C].replace(Ar.trimParens,"$1"),y.push(Jn.polygon.apply(this,[d]));return this.geometryFactory.createMultiPolygon(y)},geometrycollection:function(h){if(void 0===h)return this.geometryFactory.createGeometryCollection();for(var d=(h=h.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),m=[],y=0,C=d.length;y<C;++y)m.push(this.read(d[y]));return this.geometryFactory.createGeometryCollection(m)}},it=function(h){this.parser=new jr(h)};it.prototype.write=function(h){return this.parser.write(h)},it.toLineString=function(h,d){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+h.x+" "+h.y+", "+d.x+" "+d.y+" )"};var fe=function(h){function d(m){h.call(this,m),this.name="RuntimeException",this.message=m,this.stack=(new h).stack}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(Error),ne=function(h){function d(){h.call(this),0===arguments.length?h.call(this):1===arguments.length&&h.call(this,arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(fe),ie=function(){};ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie},ie.shouldNeverReachHere=function(){if(0===arguments.length)ie.shouldNeverReachHere(null);else if(1===arguments.length){var h=arguments[0];throw new ne("Should never reach here"+(null!==h?": "+h:""))}},ie.isTrue=function(){var d;if(1===arguments.length)ie.isTrue(arguments[0],null);else if(2===arguments.length&&(d=arguments[1],!arguments[0]))throw null===d?new ne:new ne(d)},ie.equals=function(){var h,d,m;if(2===arguments.length)ie.equals(h=arguments[0],d=arguments[1],null);else if(3===arguments.length&&(m=arguments[2],!(d=arguments[1]).equals(h=arguments[0])))throw new ne("Expected "+h+" but encountered "+d+(null!==m?": "+m:""))};var ke=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new $,this._intPt[1]=new $,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},nt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ke.prototype.getIndexAlongSegment=function(h,d){return this.computeIntLineIndex(),this._intLineIndex[h][d]},ke.prototype.getTopologySummary=function(){var h=new Se;return this.isEndPoint()&&h.append(" endpoint"),this._isProper&&h.append(" proper"),this.isCollinear()&&h.append(" collinear"),h.toString()},ke.prototype.computeIntersection=function(h,d,m,y){this._inputLines[0][0]=h,this._inputLines[0][1]=d,this._inputLines[1][0]=m,this._inputLines[1][1]=y,this._result=this.computeIntersect(h,d,m,y)},ke.prototype.getIntersectionNum=function(){return this._result},ke.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var h=arguments[0];this.getEdgeDistance(h,0)>this.getEdgeDistance(h,1)?(this._intLineIndex[h][0]=0,this._intLineIndex[h][1]=1):(this._intLineIndex[h][0]=1,this._intLineIndex[h][1]=0)}},ke.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ke.prototype.setPrecisionModel=function(h){this._precisionModel=h},ke.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var h=arguments[0],d=0;d<this._result;d++)if(!this._intPt[d].equals2D(this._inputLines[h][0])&&!this._intPt[d].equals2D(this._inputLines[h][1]))return!0;return!1}},ke.prototype.getIntersection=function(h){return this._intPt[h]},ke.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ke.prototype.hasIntersection=function(){return this._result!==ke.NO_INTERSECTION},ke.prototype.getEdgeDistance=function(h,d){return ke.computeEdgeDistance(this._intPt[d],this._inputLines[h][0],this._inputLines[h][1])},ke.prototype.isCollinear=function(){return this._result===ke.COLLINEAR_INTERSECTION},ke.prototype.toString=function(){return it.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+it.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ke.prototype.getEndpoint=function(h,d){return this._inputLines[h][d]},ke.prototype.isIntersection=function(h){for(var d=0;d<this._result;d++)if(this._intPt[d].equals2D(h))return!0;return!1},ke.prototype.getIntersectionAlongSegment=function(h,d){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[h][d]]},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.computeEdgeDistance=function(h,d,m){var y=Math.abs(m.x-d.x),C=Math.abs(m.y-d.y),F=-1;if(h.equals(d))F=0;else if(h.equals(m))F=y>C?y:C;else{var N=Math.abs(h.x-d.x),q=Math.abs(h.y-d.y);0!==(F=y>C?N:q)||h.equals(d)||(F=Math.max(N,q))}return ie.isTrue(!(0===F&&!h.equals(d)),"Bad distance calculation"),F},ke.nonRobustComputeEdgeDistance=function(h,d,m){var y=h.x-d.x,C=h.y-d.y,F=Math.sqrt(y*y+C*C);return ie.isTrue(!(0===F&&!h.equals(d)),"Invalid distance calculation"),F},nt.DONT_INTERSECT.get=function(){return 0},nt.DO_INTERSECT.get=function(){return 1},nt.COLLINEAR.get=function(){return 2},nt.NO_INTERSECTION.get=function(){return 0},nt.POINT_INTERSECTION.get=function(){return 1},nt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ke,nt);var xt=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isInSegmentEnvelopes=function(m){var y=new en(this._inputLines[0][0],this._inputLines[0][1]),C=new en(this._inputLines[1][0],this._inputLines[1][1]);return y.contains(m)&&C.contains(m)},d.prototype.computeIntersection=function(){if(3!==arguments.length)return h.prototype.computeIntersection.apply(this,arguments);var m=arguments[0],y=arguments[1],C=arguments[2];if(this._isProper=!1,en.intersects(y,C,m)&&0===St.orientationIndex(y,C,m)&&0===St.orientationIndex(C,y,m))return this._isProper=!0,(m.equals(y)||m.equals(C))&&(this._isProper=!1),this._result=h.POINT_INTERSECTION,null;this._result=h.NO_INTERSECTION},d.prototype.normalizeToMinimum=function(m,y,C,F,N){N.x=this.smallestInAbsValue(m.x,y.x,C.x,F.x),N.y=this.smallestInAbsValue(m.y,y.y,C.y,F.y),m.x-=N.x,m.y-=N.y,y.x-=N.x,y.y-=N.y,C.x-=N.x,C.y-=N.y,F.x-=N.x,F.y-=N.y},d.prototype.safeHCoordinateIntersection=function(m,y,C,F){var N=null;try{N=Rn.intersection(m,y,C,F)}catch(q){if(!(q instanceof On))throw q;N=d.nearestEndpoint(m,y,C,F)}return N},d.prototype.intersection=function(m,y,C,F){var N=this.intersectionWithNormalization(m,y,C,F);return this.isInSegmentEnvelopes(N)||(N=new $(d.nearestEndpoint(m,y,C,F))),null!==this._precisionModel&&this._precisionModel.makePrecise(N),N},d.prototype.smallestInAbsValue=function(m,y,C,F){var N=m,q=Math.abs(N);return Math.abs(y)<q&&(N=y,q=Math.abs(y)),Math.abs(C)<q&&(N=C,q=Math.abs(C)),Math.abs(F)<q&&(N=F),N},d.prototype.checkDD=function(m,y,C,F,N){var q=$e.intersection(m,y,C,F),ye=this.isInSegmentEnvelopes(q);Ut.out.println("DD in env = "+ye+"  --------------------- "+q),N.distance(q)>1e-4&&Ut.out.println("Distance = "+N.distance(q))},d.prototype.intersectionWithNormalization=function(m,y,C,F){var N=new $(m),q=new $(y),ye=new $(C),je=new $(F),yt=new $;this.normalizeToEnvCentre(N,q,ye,je,yt);var vt=this.safeHCoordinateIntersection(N,q,ye,je);return vt.x+=yt.x,vt.y+=yt.y,vt},d.prototype.computeCollinearIntersection=function(m,y,C,F){var N=en.intersects(m,y,C),q=en.intersects(m,y,F),ye=en.intersects(C,F,m),je=en.intersects(C,F,y);return N&&q?(this._intPt[0]=C,this._intPt[1]=F,h.COLLINEAR_INTERSECTION):ye&&je?(this._intPt[0]=m,this._intPt[1]=y,h.COLLINEAR_INTERSECTION):N&&ye?(this._intPt[0]=C,this._intPt[1]=m,!C.equals(m)||q||je?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):N&&je?(this._intPt[0]=C,this._intPt[1]=y,!C.equals(y)||q||ye?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):q&&ye?(this._intPt[0]=F,this._intPt[1]=m,!F.equals(m)||N||je?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):q&&je?(this._intPt[0]=F,this._intPt[1]=y,!F.equals(y)||N||ye?h.COLLINEAR_INTERSECTION:h.POINT_INTERSECTION):h.NO_INTERSECTION},d.prototype.normalizeToEnvCentre=function(m,y,C,F,N){var q=m.x<y.x?m.x:y.x,ye=m.y<y.y?m.y:y.y,je=m.x>y.x?m.x:y.x,yt=m.y>y.y?m.y:y.y,vt=C.x<F.x?C.x:F.x,gn=C.y<F.y?C.y:F.y,En=C.x>F.x?C.x:F.x,Pn=C.y>F.y?C.y:F.y,Zr=((ye>gn?ye:gn)+(yt<Pn?yt:Pn))/2;N.x=((q>vt?q:vt)+(je<En?je:En))/2,N.y=Zr,m.x-=N.x,m.y-=N.y,y.x-=N.x,y.y-=N.y,C.x-=N.x,C.y-=N.y,F.x-=N.x,F.y-=N.y},d.prototype.computeIntersect=function(m,y,C,F){if(this._isProper=!1,!en.intersects(m,y,C,F))return h.NO_INTERSECTION;var N=St.orientationIndex(m,y,C),q=St.orientationIndex(m,y,F);if(N>0&&q>0||N<0&&q<0)return h.NO_INTERSECTION;var ye=St.orientationIndex(C,F,m),je=St.orientationIndex(C,F,y);return ye>0&&je>0||ye<0&&je<0?h.NO_INTERSECTION:0===N&&0===q&&0===ye&&0===je?this.computeCollinearIntersection(m,y,C,F):(0===N||0===q||0===ye||0===je?(this._isProper=!1,m.equals2D(C)||m.equals2D(F)?this._intPt[0]=m:y.equals2D(C)||y.equals2D(F)?this._intPt[0]=y:0===N?this._intPt[0]=new $(C):0===q?this._intPt[0]=new $(F):0===ye?this._intPt[0]=new $(m):0===je&&(this._intPt[0]=new $(y))):(this._isProper=!0,this._intPt[0]=this.intersection(m,y,C,F)),h.POINT_INTERSECTION)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.nearestEndpoint=function(m,y,C,F){var N=m,q=St.distancePointLine(m,C,F),ye=St.distancePointLine(y,C,F);return ye<q&&(q=ye,N=y),(ye=St.distancePointLine(C,m,y))<q&&(q=ye,N=C),(ye=St.distancePointLine(F,m,y))<q&&(q=ye,N=F),N},d}(ke),qt=function(){};qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.orientationIndex=function(h,d,m){return qt.signOfDet2x2(d.x-h.x,d.y-h.y,m.x-d.x,m.y-d.y)},qt.signOfDet2x2=function(h,d,m,y){var C=null,F=null,N=null;if(C=1,0===h||0===y)return 0===d||0===m?0:d>0?m>0?-C:C:m>0?C:-C;if(0===d||0===m)return y>0?h>0?C:-C:h>0?-C:C;if(d>0?y>0?d<=y||(C=-C,F=h,h=m,m=F,F=d,d=y,y=F):d<=-y?(C=-C,m=-m,y=-y):(F=h,h=-m,m=F,F=d,d=-y,y=F):y>0?-d<=y?(C=-C,h=-h,d=-d):(F=-h,h=m,m=F,F=-d,d=y,y=F):d>=y?(h=-h,d=-d,m=-m,y=-y):(C=-C,F=-h,h=-m,m=F,F=-d,d=-y,y=F),h>0){if(!(m>0&&h<=m))return C}else{if(m>0||!(h>=m))return-C;C=-C,h=-h,m=-m}for(;;){if((y-=(N=Math.floor(m/h))*d)<0)return-C;if(y>d)return C;if(h>(m-=N*h)+m){if(d<y+y)return C}else{if(d>y+y)return-C;m=h-m,y=d-y,C=-C}if(0===y)return 0===m?0:-C;if(0===m||(h-=(N=Math.floor(h/m))*m,(d-=N*y)<0))return C;if(d>y)return-C;if(m>h+h){if(y<d+d)return-C}else{if(y>d+d)return C;h=m-h,d=y-d,C=-C}if(0===d)return 0===h?0:C;if(0===h)return-C}};var tn=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};tn.prototype.countSegment=function(h,d){if(h.x<this._p.x&&d.x<this._p.x)return null;if(this._p.x===d.x&&this._p.y===d.y)return this._isPointOnSegment=!0,null;if(h.y===this._p.y&&d.y===this._p.y){var m=h.x,y=d.x;return m>y&&(m=d.x,y=h.x),this._p.x>=m&&this._p.x<=y&&(this._isPointOnSegment=!0),null}if(h.y>this._p.y&&d.y<=this._p.y||d.y>this._p.y&&h.y<=this._p.y){var F=h.y-this._p.y,q=d.y-this._p.y,ye=qt.signOfDet2x2(h.x-this._p.x,F,d.x-this._p.x,q);if(0===ye)return this._isPointOnSegment=!0,null;q<F&&(ye=-ye),ye>0&&this._crossingCount++}},tn.prototype.isPointInPolygon=function(){return this.getLocation()!==he.EXTERIOR},tn.prototype.getLocation=function(){return this._isPointOnSegment?he.BOUNDARY:this._crossingCount%2==1?he.INTERIOR:he.EXTERIOR},tn.prototype.isOnSegment=function(){return this._isPointOnSegment},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn},tn.locatePointInRing=function(){if(arguments[0]instanceof $&&bt(arguments[1],dt)){for(var d=arguments[1],m=new tn(arguments[0]),y=new $,C=new $,F=1;F<d.size();F++)if(d.getCoordinate(F,y),d.getCoordinate(F-1,C),m.countSegment(y,C),m.isOnSegment())return m.getLocation();return m.getLocation()}if(arguments[0]instanceof $&&arguments[1]instanceof Array){for(var q=arguments[1],ye=new tn(arguments[0]),je=1;je<q.length;je++)if(ye.countSegment(q[je],q[je-1]),ye.isOnSegment())return ye.getLocation();return ye.getLocation()}};var St=function(){},Ii={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};St.prototype.interfaces_=function(){return[]},St.prototype.getClass=function(){return St},St.orientationIndex=function(h,d,m){return $e.orientationIndex(h,d,m)},St.signedArea=function(){if(arguments[0]instanceof Array){var h=arguments[0];if(h.length<3)return 0;for(var d=0,m=h[0].x,y=1;y<h.length-1;y++)d+=(h[y].x-m)*(h[y-1].y-h[y+1].y);return d/2}if(bt(arguments[0],dt)){var N=arguments[0],q=N.size();if(q<3)return 0;var ye=new $,je=new $,yt=new $;N.getCoordinate(0,je),N.getCoordinate(1,yt);var vt=je.x;yt.x-=vt;for(var gn=0,En=1;En<q-1;En++)ye.y=je.y,je.x=yt.x,je.y=yt.y,N.getCoordinate(En+1,yt),yt.x-=vt,gn+=je.x*(ye.y-yt.y);return gn/2}},St.distanceLineLine=function(h,d,m,y){if(h.equals(d))return St.distancePointLine(h,m,y);if(m.equals(y))return St.distancePointLine(y,h,d);var C=!1;if(en.intersects(h,d,m,y)){var F=(d.x-h.x)*(y.y-m.y)-(d.y-h.y)*(y.x-m.x);if(0===F)C=!0;else{var q=((h.y-m.y)*(d.x-h.x)-(h.x-m.x)*(d.y-h.y))/F,ye=((h.y-m.y)*(y.x-m.x)-(h.x-m.x)*(y.y-m.y))/F;(ye<0||ye>1||q<0||q>1)&&(C=!0)}}else C=!0;return C?Le.min(St.distancePointLine(h,m,y),St.distancePointLine(d,m,y),St.distancePointLine(m,h,d),St.distancePointLine(y,h,d)):0},St.isPointInRing=function(h,d){return St.locatePointInRing(h,d)!==he.EXTERIOR},St.computeLength=function(h){var d=h.size();if(d<=1)return 0;var m=0,y=new $;h.getCoordinate(0,y);for(var C=y.x,F=y.y,N=1;N<d;N++){h.getCoordinate(N,y);var q=y.x,ye=y.y,je=q-C,yt=ye-F;m+=Math.sqrt(je*je+yt*yt),C=q,F=ye}return m},St.isCCW=function(h){var d=h.length-1;if(d<3)throw new Y("Ring has fewer than 4 points, so orientation cannot be determined");for(var m=h[0],y=0,C=1;C<=d;C++){var F=h[C];F.y>m.y&&(m=F,y=C)}var N=y;do{(N-=1)<0&&(N=d)}while(h[N].equals2D(m)&&N!==y);var q=y;do{q=(q+1)%d}while(h[q].equals2D(m)&&q!==y);var ye=h[N],je=h[q];if(ye.equals2D(m)||je.equals2D(m)||ye.equals2D(je))return!1;var yt=St.computeOrientation(ye,m,je);return 0===yt?ye.x>je.x:yt>0},St.locatePointInRing=function(h,d){return tn.locatePointInRing(h,d)},St.distancePointLinePerpendicular=function(h,d,m){var y=(m.x-d.x)*(m.x-d.x)+(m.y-d.y)*(m.y-d.y);return Math.abs(((d.y-h.y)*(m.x-d.x)-(d.x-h.x)*(m.y-d.y))/y)*Math.sqrt(y)},St.computeOrientation=function(h,d,m){return St.orientationIndex(h,d,m)},St.distancePointLine=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];if(0===d.length)throw new Y("Line array must contain at least one vertex");for(var m=h.distance(d[0]),y=0;y<d.length-1;y++){var C=St.distancePointLine(h,d[y],d[y+1]);C<m&&(m=C)}return m}if(3===arguments.length){var F=arguments[0],N=arguments[1],q=arguments[2];if(N.x===q.x&&N.y===q.y)return F.distance(N);var ye=(q.x-N.x)*(q.x-N.x)+(q.y-N.y)*(q.y-N.y),je=((F.x-N.x)*(q.x-N.x)+(F.y-N.y)*(q.y-N.y))/ye;return je<=0?F.distance(N):je>=1?F.distance(q):Math.abs(((N.y-F.y)*(q.x-N.x)-(N.x-F.x)*(q.y-N.y))/ye)*Math.sqrt(ye)}},St.isOnLine=function(h,d){for(var m=new xt,y=1;y<d.length;y++)if(m.computeIntersection(h,d[y-1],d[y]),m.hasIntersection())return!0;return!1},Ii.CLOCKWISE.get=function(){return-1},Ii.RIGHT.get=function(){return St.CLOCKWISE},Ii.COUNTERCLOCKWISE.get=function(){return 1},Ii.LEFT.get=function(){return St.COUNTERCLOCKWISE},Ii.COLLINEAR.get=function(){return 0},Ii.STRAIGHT.get=function(){return St.COLLINEAR},Object.defineProperties(St,Ii);var ji=function(){};ji.prototype.filter=function(h){},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji};var bn=function(){var h=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=h,this._SRID=h.getSRID()},Ni={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};bn.prototype.isGeometryCollection=function(){return this.getSortIndex()===bn.SORTINDEX_GEOMETRYCOLLECTION},bn.prototype.getFactory=function(){return this._factory},bn.prototype.getGeometryN=function(h){return this},bn.prototype.getArea=function(){return 0},bn.prototype.isRectangle=function(){return!1},bn.prototype.equals=function(){if(arguments[0]instanceof bn){var h=arguments[0];return null!==h&&this.equalsTopo(h)}if(arguments[0]instanceof Object){var d=arguments[0];return d instanceof bn&&this.equalsExact(d)}},bn.prototype.equalsExact=function(h){return this===h||this.equalsExact(h,0)},bn.prototype.geometryChanged=function(){this.apply(bn.geometryChangedFilter)},bn.prototype.geometryChangedAction=function(){this._envelope=null},bn.prototype.equalsNorm=function(h){return null!==h&&this.norm().equalsExact(h.norm())},bn.prototype.getLength=function(){return 0},bn.prototype.getNumGeometries=function(){return 1},bn.prototype.compareTo=function(){if(1===arguments.length){var h=arguments[0],d=h;return this.getSortIndex()!==d.getSortIndex()?this.getSortIndex()-d.getSortIndex():this.isEmpty()&&d.isEmpty()?0:this.isEmpty()?-1:d.isEmpty()?1:this.compareToSameClass(h)}if(2===arguments.length){var m=arguments[0],y=arguments[1];return this.getSortIndex()!==m.getSortIndex()?this.getSortIndex()-m.getSortIndex():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(m,y)}},bn.prototype.getUserData=function(){return this._userData},bn.prototype.getSRID=function(){return this._SRID},bn.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},bn.prototype.checkNotGeometryCollection=function(h){if(h.getSortIndex()===bn.SORTINDEX_GEOMETRYCOLLECTION)throw new Y("This method does not support GeometryCollection arguments")},bn.prototype.equal=function(h,d,m){return 0===m?h.equals(d):h.distance(d)<=m},bn.prototype.norm=function(){var h=this.copy();return h.normalize(),h},bn.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},bn.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new en(this._envelope)},bn.prototype.setSRID=function(h){this._SRID=h},bn.prototype.setUserData=function(h){this._userData=h},bn.prototype.compare=function(h,d){for(var m=h.iterator(),y=d.iterator();m.hasNext()&&y.hasNext();){var C=m.next(),F=y.next(),N=C.compareTo(F);if(0!==N)return N}return m.hasNext()?1:y.hasNext()?-1:0},bn.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},bn.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===bn.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===bn.SORTINDEX_MULTIPOINT||this.getSortIndex()===bn.SORTINDEX_MULTILINESTRING||this.getSortIndex()===bn.SORTINDEX_MULTIPOLYGON},bn.prototype.interfaces_=function(){return[oe,te,ee]},bn.prototype.getClass=function(){return bn},bn.hasNonEmptyElements=function(h){for(var d=0;d<h.length;d++)if(!h[d].isEmpty())return!0;return!1},bn.hasNullElements=function(h){for(var d=0;d<h.length;d++)if(null===h[d])return!0;return!1},Ni.serialVersionUID.get=function(){return 0x799ea46522854c00},Ni.SORTINDEX_POINT.get=function(){return 0},Ni.SORTINDEX_MULTIPOINT.get=function(){return 1},Ni.SORTINDEX_LINESTRING.get=function(){return 2},Ni.SORTINDEX_LINEARRING.get=function(){return 3},Ni.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ni.SORTINDEX_POLYGON.get=function(){return 5},Ni.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ni.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ni.geometryChangedFilter.get=function(){return Lr},Object.defineProperties(bn,Ni);var Lr=function(){};Lr.interfaces_=function(){return[ji]},Lr.filter=function(h){h.geometryChangedAction()};var yr=function(){};yr.prototype.filter=function(h){},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var Dr=function(){},oo={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Dr.prototype.isInBoundary=function(h){},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},oo.Mod2BoundaryNodeRule.get=function(){return Oa},oo.EndPointBoundaryNodeRule.get=function(){return oa},oo.MultiValentEndPointBoundaryNodeRule.get=function(){return qo},oo.MonoValentEndPointBoundaryNodeRule.get=function(){return Na},oo.MOD2_BOUNDARY_RULE.get=function(){return new Oa},oo.ENDPOINT_BOUNDARY_RULE.get=function(){return new oa},oo.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new qo},oo.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Na},oo.OGC_SFS_BOUNDARY_RULE.get=function(){return Dr.MOD2_BOUNDARY_RULE},Object.defineProperties(Dr,oo);var Oa=function(){};Oa.prototype.isInBoundary=function(h){return h%2==1},Oa.prototype.interfaces_=function(){return[Dr]},Oa.prototype.getClass=function(){return Oa};var oa=function(){};oa.prototype.isInBoundary=function(h){return h>0},oa.prototype.interfaces_=function(){return[Dr]},oa.prototype.getClass=function(){return oa};var qo=function(){};qo.prototype.isInBoundary=function(h){return h>1},qo.prototype.interfaces_=function(){return[Dr]},qo.prototype.getClass=function(){return qo};var Na=function(){};Na.prototype.isInBoundary=function(h){return 1===h},Na.prototype.interfaces_=function(){return[Dr]},Na.prototype.getClass=function(){return Na};var Hs=function(){};Hs.prototype.add=function(){},Hs.prototype.addAll=function(){},Hs.prototype.isEmpty=function(){},Hs.prototype.iterator=function(){},Hs.prototype.size=function(){},Hs.prototype.toArray=function(){},Hs.prototype.remove=function(){},(ve.prototype=new Error).name="IndexOutOfBoundsException";var uc=function(){};uc.prototype.hasNext=function(){},uc.prototype.next=function(){},uc.prototype.remove=function(){};var aa=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.get=function(){},d.prototype.set=function(){},d.prototype.isEmpty=function(){},d}(Hs);(Be.prototype=new Error).name="NoSuchElementException";var hn=function(h){function d(){h.call(this),this.array_=[],arguments[0]instanceof Hs&&this.addAll(arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.ensureCapacity=function(){},d.prototype.interfaces_=function(){return[h,Hs]},d.prototype.add=function(m){return 1===arguments.length?this.array_.push(m):this.array_.splice(arguments[0],arguments[1]),!0},d.prototype.clear=function(){this.array_=[]},d.prototype.addAll=function(m){for(var y=m.iterator();y.hasNext();)this.add(y.next());return!0},d.prototype.set=function(m,y){var C=this.array_[m];return this.array_[m]=y,C},d.prototype.iterator=function(){return new al(this)},d.prototype.get=function(m){if(m<0||m>=this.size())throw new ve;return this.array_[m]},d.prototype.isEmpty=function(){return 0===this.array_.length},d.prototype.size=function(){return this.array_.length},d.prototype.toArray=function(){for(var m=[],y=0,C=this.array_.length;y<C;y++)m.push(this.array_[y]);return m},d.prototype.remove=function(m){for(var y=!1,C=0,F=this.array_.length;C<F;C++)if(this.array_[C]===m){this.array_.splice(C,1),y=!0;break}return y},d}(aa),al=function(h){function d(m){h.call(this),this.arrayList_=m,this.position_=0}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Be;return this.arrayList_.get(this.position_++)},d.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},d.prototype.set=function(m){return this.arrayList_.set(this.position_-1,m)},d.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},d}(uc),Tc=function(h){function d(){if(h.call(this),0!==arguments.length)if(1===arguments.length){var y=arguments[0];this.ensureCapacity(y.length),this.add(y,!0)}else if(2===arguments.length){var C=arguments[0],F=arguments[1];this.ensureCapacity(C.length),this.add(C,F)}}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={coordArrayType:{configurable:!0}};return m.coordArrayType.get=function(){return new Array(0).fill(null)},d.prototype.getCoordinate=function(y){return this.get(y)},d.prototype.addAll=function(){if(2===arguments.length){for(var C=arguments[1],F=!1,N=arguments[0].iterator();N.hasNext();)this.add(N.next(),C),F=!0;return F}return h.prototype.addAll.apply(this,arguments)},d.prototype.clone=function(){for(var y=h.prototype.clone.call(this),C=0;C<this.size();C++)y.add(C,this.get(C).copy());return y},d.prototype.toCoordinateArray=function(){return this.toArray(d.coordArrayType)},d.prototype.add=function(){if(1===arguments.length)h.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof $&&"boolean"==typeof arguments[1]){var N=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(N))return null;h.prototype.add.call(this,N)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var je=arguments[0],yt=arguments[1];if(arguments[2])for(var vt=0;vt<je.length;vt++)this.add(je[vt],yt);else for(var gn=je.length-1;gn>=0;gn--)this.add(je[gn],yt);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof $){var En=arguments[0],Pn=arguments[1];if(!arguments[2]){var ri=this.size();if(ri>0&&(En>0&&this.get(En-1).equals2D(Pn)||En<ri&&this.get(En).equals2D(Pn)))return null}h.prototype.add.call(this,En,Pn)}}else if(4===arguments.length){var Zr=arguments[0],Zo=arguments[1],S1=arguments[2],Gl=arguments[3],Ql=1;S1>Gl&&(Ql=-1);for(var rf=S1;rf!==Gl;rf+=Ql)this.add(Zr[rf],Zo);return!0}},d.prototype.closeRing=function(){this.size()>0&&this.add(new $(this.get(0)),!1)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},Object.defineProperties(d,m),d}(hn),Vi=function(){},y2={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};y2.ForwardComparator.get=function(){return Bo},y2.BidirectionalComparator.get=function(){return kl},y2.coordArrayType.get=function(){return new Array(0).fill(null)},Vi.prototype.interfaces_=function(){return[]},Vi.prototype.getClass=function(){return Vi},Vi.isRing=function(h){return!(h.length<4||!h[0].equals2D(h[h.length-1]))},Vi.ptNotInList=function(h,d){for(var m=0;m<h.length;m++){var y=h[m];if(Vi.indexOf(y,d)<0)return y}return null},Vi.scroll=function(h,d){var m=Vi.indexOf(d,h);if(m<0)return null;var y=new Array(h.length).fill(null);Ut.arraycopy(h,m,y,0,h.length-m),Ut.arraycopy(h,0,y,h.length-m,m),Ut.arraycopy(y,0,h,0,h.length)},Vi.equals=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];if(h===d)return!0;if(null===h||null===d||h.length!==d.length)return!1;for(var m=0;m<h.length;m++)if(!h[m].equals(d[m]))return!1;return!0}if(3===arguments.length){var y=arguments[0],C=arguments[1],F=arguments[2];if(y===C)return!0;if(null===y||null===C||y.length!==C.length)return!1;for(var N=0;N<y.length;N++)if(0!==F.compare(y[N],C[N]))return!1;return!0}},Vi.intersection=function(h,d){for(var m=new Tc,y=0;y<h.length;y++)d.intersects(h[y])&&m.add(h[y],!0);return m.toCoordinateArray()},Vi.hasRepeatedPoints=function(h){for(var d=1;d<h.length;d++)if(h[d-1].equals(h[d]))return!0;return!1},Vi.removeRepeatedPoints=function(h){return Vi.hasRepeatedPoints(h)?new Tc(h,!1).toCoordinateArray():h},Vi.reverse=function(h){for(var d=h.length-1,m=Math.trunc(d/2),y=0;y<=m;y++){var C=h[y];h[y]=h[d-y],h[d-y]=C}},Vi.removeNull=function(h){for(var d=0,m=0;m<h.length;m++)null!==h[m]&&d++;var y=new Array(d).fill(null);if(0===d)return y;for(var C=0,F=0;F<h.length;F++)null!==h[F]&&(y[C++]=h[F]);return y},Vi.copyDeep=function(){if(1===arguments.length){for(var h=arguments[0],d=new Array(h.length).fill(null),m=0;m<h.length;m++)d[m]=new $(h[m]);return d}if(5===arguments.length)for(var y=arguments[0],C=arguments[1],F=arguments[2],N=arguments[3],q=arguments[4],ye=0;ye<q;ye++)F[N+ye]=new $(y[C+ye])},Vi.isEqualReversed=function(h,d){for(var m=0;m<h.length;m++)if(0!==h[m].compareTo(d[h.length-m-1]))return!1;return!0},Vi.envelope=function(h){for(var d=new en,m=0;m<h.length;m++)d.expandToInclude(h[m]);return d},Vi.toCoordinateArray=function(h){return h.toArray(Vi.coordArrayType)},Vi.atLeastNCoordinatesOrNothing=function(h,d){return d.length>=h?d:[]},Vi.indexOf=function(h,d){for(var m=0;m<d.length;m++)if(h.equals(d[m]))return m;return-1},Vi.increasingDirection=function(h){for(var d=0;d<Math.trunc(h.length/2);d++){var y=h[d].compareTo(h[h.length-1-d]);if(0!==y)return y}return 1},Vi.compare=function(h,d){for(var m=0;m<h.length&&m<d.length;){var y=h[m].compareTo(d[m]);if(0!==y)return y;m++}return m<d.length?-1:m<h.length?1:0},Vi.minCoordinate=function(h){for(var d=null,m=0;m<h.length;m++)(null===d||d.compareTo(h[m])>0)&&(d=h[m]);return d},Vi.extract=function(h,d,m){d=Le.clamp(d,0,h.length);var y=(m=Le.clamp(m,-1,h.length))-d+1;m<0&&(y=0),d>=h.length&&(y=0),m<d&&(y=0);var C=new Array(y).fill(null);if(0===y)return C;for(var F=0,N=d;N<=m;N++)C[F++]=h[N];return C},Object.defineProperties(Vi,y2);var Bo=function(){};Bo.prototype.compare=function(h,d){return Vi.compare(h,d)},Bo.prototype.interfaces_=function(){return[ce]},Bo.prototype.getClass=function(){return Bo};var kl=function(){};kl.prototype.compare=function(h,d){var m=h,y=d;if(m.length<y.length)return-1;if(m.length>y.length)return 1;if(0===m.length)return 0;var C=Vi.compare(m,y);return Vi.isEqualReversed(m,y)?0:C},kl.prototype.OLDcompare=function(h,d){var m=h,y=d;if(m.length<y.length)return-1;if(m.length>y.length)return 1;if(0===m.length)return 0;for(var C=Vi.increasingDirection(m),F=Vi.increasingDirection(y),N=C>0?0:m.length-1,q=F>0?0:m.length-1,ye=0;ye<m.length;ye++){var je=m[N].compareTo(y[q]);if(0!==je)return je;N+=C,q+=F}return 0},kl.prototype.interfaces_=function(){return[ce]},kl.prototype.getClass=function(){return kl};var O4=function(){};O4.prototype.get=function(){},O4.prototype.put=function(){},O4.prototype.size=function(){},O4.prototype.values=function(){},O4.prototype.entrySet=function(){};var OA=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d}(O4);(Ie.prototype=new Error).name="OperationNotSupported",(Te.prototype=new Hs).contains=function(){};var Dd=function(h){function d(){h.call(this),this.array_=[],arguments[0]instanceof Hs&&this.addAll(arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.contains=function(m){for(var y=0,C=this.array_.length;y<C;y++)if(this.array_[y]===m)return!0;return!1},d.prototype.add=function(m){return!this.contains(m)&&(this.array_.push(m),!0)},d.prototype.addAll=function(m){for(var y=m.iterator();y.hasNext();)this.add(y.next());return!0},d.prototype.remove=function(m){throw new Error},d.prototype.size=function(){return this.array_.length},d.prototype.isEmpty=function(){return 0===this.array_.length},d.prototype.toArray=function(){for(var m=[],y=0,C=this.array_.length;y<C;y++)m.push(this.array_[y]);return m},d.prototype.iterator=function(){return new Or(this)},d}(Te),Or=function(h){function d(m){h.call(this),this.hashSet_=m,this.position_=0}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Be;return this.hashSet_.array_[this.position_++]},d.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},d.prototype.remove=function(){throw new Ie},d}(uc),N2=0;(ht.prototype=new OA).get=function(h){for(var d=this.root_;null!==d;){var m=h.compareTo(d.key);if(m<0)d=d.left;else{if(!(m>0))return d.value;d=d.right}}return null},ht.prototype.put=function(h,d){if(null===this.root_)return this.root_={key:h,value:d,left:null,right:null,parent:null,color:N2,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var m,y,C=this.root_;do{if(m=C,(y=h.compareTo(C.key))<0)C=C.left;else{if(!(y>0)){var F=C.value;return C.value=d,F}C=C.right}}while(null!==C);var N={key:h,left:null,right:null,value:d,parent:m,color:N2,getValue:function(){return this.value},getKey:function(){return this.key}};return y<0?m.left=N:m.right=N,this.fixAfterInsertion(N),this.size_++,null},ht.prototype.fixAfterInsertion=function(h){for(h.color=1;null!=h&&h!==this.root_&&1===h.parent.color;)if(Ve(h)===ot(Ve(Ve(h)))){var d=Tt(Ve(Ve(h)));1===_e(d)?(Je(Ve(h),N2),Je(d,N2),Je(Ve(Ve(h)),1),h=Ve(Ve(h))):(h===Tt(Ve(h))&&(h=Ve(h),this.rotateLeft(h)),Je(Ve(h),N2),Je(Ve(Ve(h)),1),this.rotateRight(Ve(Ve(h))))}else{var m=ot(Ve(Ve(h)));1===_e(m)?(Je(Ve(h),N2),Je(m,N2),Je(Ve(Ve(h)),1),h=Ve(Ve(h))):(h===ot(Ve(h))&&(h=Ve(h),this.rotateRight(h)),Je(Ve(h),N2),Je(Ve(Ve(h)),1),this.rotateLeft(Ve(Ve(h))))}this.root_.color=N2},ht.prototype.values=function(){var h=new hn,d=this.getFirstEntry();if(null!==d)for(h.add(d.value);null!==(d=ht.successor(d));)h.add(d.value);return h},ht.prototype.entrySet=function(){var h=new Dd,d=this.getFirstEntry();if(null!==d)for(h.add(d);null!==(d=ht.successor(d));)h.add(d);return h},ht.prototype.rotateLeft=function(h){if(null!=h){var d=h.right;h.right=d.left,null!=d.left&&(d.left.parent=h),d.parent=h.parent,null===h.parent?this.root_=d:h.parent.left===h?h.parent.left=d:h.parent.right=d,d.left=h,h.parent=d}},ht.prototype.rotateRight=function(h){if(null!=h){var d=h.left;h.left=d.right,null!=d.right&&(d.right.parent=h),d.parent=h.parent,null===h.parent?this.root_=d:h.parent.right===h?h.parent.right=d:h.parent.left=d,d.right=h,h.parent=d}},ht.prototype.getFirstEntry=function(){var h=this.root_;if(null!=h)for(;null!=h.left;)h=h.left;return h},ht.successor=function(h){if(null===h)return null;if(null!==h.right){for(var d=h.right;null!==d.left;)d=d.left;return d}for(var m=h.parent,y=h;null!==m&&y===m.right;)y=m,m=m.parent;return m},ht.prototype.size=function(){return this.size_};var N4=function(){};N4.prototype.interfaces_=function(){return[]},N4.prototype.getClass=function(){return N4},et.prototype=new Te,(ct.prototype=new et).contains=function(h){for(var d=0,m=this.array_.length;d<m;d++)if(0===this.array_[d].compareTo(h))return!0;return!1},ct.prototype.add=function(h){if(this.contains(h))return!1;for(var d=0,m=this.array_.length;d<m;d++)if(1===this.array_[d].compareTo(h))return this.array_.splice(d,0,h),!0;return this.array_.push(h),!0},ct.prototype.addAll=function(h){for(var d=h.iterator();d.hasNext();)this.add(d.next());return!0},ct.prototype.remove=function(h){throw new Ie},ct.prototype.size=function(){return this.array_.length},ct.prototype.isEmpty=function(){return 0===this.array_.length},ct.prototype.toArray=function(){for(var h=[],d=0,m=this.array_.length;d<m;d++)h.push(this.array_[d]);return h},ct.prototype.iterator=function(){return new qa(this)};var qa=function(h){this.treeSet_=h,this.position_=0};qa.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Be;return this.treeSet_.array_[this.position_++]},qa.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},qa.prototype.remove=function(){throw new Ie};var x3=function(){};x3.sort=function(){var h,d,m,C=arguments[0];if(1===arguments.length)C.sort(function(N,q){return N.compareTo(q)});else if(2===arguments.length)m=arguments[1],C.sort(function(N,q){return m.compare(N,q)});else if(3===arguments.length){(d=C.slice(arguments[1],arguments[2])).sort();var F=C.slice(0,arguments[1]).concat(d,C.slice(arguments[2],C.length));for(C.splice(0,C.length),h=0;h<F.length;h++)C.push(F[h])}else if(4===arguments.length)for(d=C.slice(arguments[1],arguments[2]),m=arguments[3],d.sort(function(N,q){return m.compare(N,q)}),F=C.slice(0,arguments[1]).concat(d,C.slice(arguments[2],C.length)),C.splice(0,C.length),h=0;h<F.length;h++)C.push(F[h])},x3.asList=function(h){for(var d=new hn,m=0,y=h.length;m<y;m++)d.add(h[m]);return d};var Ri=function(){},v1={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};v1.P.get=function(){return 0},v1.L.get=function(){return 1},v1.A.get=function(){return 2},v1.FALSE.get=function(){return-1},v1.TRUE.get=function(){return-2},v1.DONTCARE.get=function(){return-3},v1.SYM_FALSE.get=function(){return"F"},v1.SYM_TRUE.get=function(){return"T"},v1.SYM_DONTCARE.get=function(){return"*"},v1.SYM_P.get=function(){return"0"},v1.SYM_L.get=function(){return"1"},v1.SYM_A.get=function(){return"2"},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.toDimensionSymbol=function(h){switch(h){case Ri.FALSE:return Ri.SYM_FALSE;case Ri.TRUE:return Ri.SYM_TRUE;case Ri.DONTCARE:return Ri.SYM_DONTCARE;case Ri.P:return Ri.SYM_P;case Ri.L:return Ri.SYM_L;case Ri.A:return Ri.SYM_A}throw new Y("Unknown dimension value: "+h)},Ri.toDimensionValue=function(h){switch(We.toUpperCase(h)){case Ri.SYM_FALSE:return Ri.FALSE;case Ri.SYM_TRUE:return Ri.TRUE;case Ri.SYM_DONTCARE:return Ri.DONTCARE;case Ri.SYM_P:return Ri.P;case Ri.SYM_L:return Ri.L;case Ri.SYM_A:return Ri.A}throw new Y("Unknown dimension symbol: "+h)},Object.defineProperties(Ri,v1);var Xa=function(){};Xa.prototype.filter=function(h){},Xa.prototype.interfaces_=function(){return[]},Xa.prototype.getClass=function(){return Xa};var V2=function(){};V2.prototype.filter=function(h,d){},V2.prototype.isDone=function(){},V2.prototype.isGeometryChanged=function(){},V2.prototype.interfaces_=function(){return[]},V2.prototype.getClass=function(){return V2};var H1=function(h){function d(y,C){if(h.call(this,C),this._geometries=y||[],h.hasNullElements(this._geometries))throw new Y("geometries must not contain null elements")}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){for(var y=new en,C=0;C<this._geometries.length;C++)y.expandToInclude(this._geometries[C].getEnvelopeInternal());return y},d.prototype.getGeometryN=function(y){return this._geometries[y]},d.prototype.getSortIndex=function(){return h.SORTINDEX_GEOMETRYCOLLECTION},d.prototype.getCoordinates=function(){for(var y=new Array(this.getNumPoints()).fill(null),C=-1,F=0;F<this._geometries.length;F++)for(var N=this._geometries[F].getCoordinates(),q=0;q<N.length;q++)y[++C]=N[q];return y},d.prototype.getArea=function(){for(var y=0,C=0;C<this._geometries.length;C++)y+=this._geometries[C].getArea();return y},d.prototype.equalsExact=function(){if(2===arguments.length){var y=arguments[0],C=arguments[1];if(!this.isEquivalentClass(y))return!1;var F=y;if(this._geometries.length!==F._geometries.length)return!1;for(var N=0;N<this._geometries.length;N++)if(!this._geometries[N].equalsExact(F._geometries[N],C))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var y=0;y<this._geometries.length;y++)this._geometries[y].normalize();x3.sort(this._geometries)},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},d.prototype.getBoundaryDimension=function(){for(var y=Ri.FALSE,C=0;C<this._geometries.length;C++)y=Math.max(y,this._geometries[C].getBoundaryDimension());return y},d.prototype.getDimension=function(){for(var y=Ri.FALSE,C=0;C<this._geometries.length;C++)y=Math.max(y,this._geometries[C].getDimension());return y},d.prototype.getLength=function(){for(var y=0,C=0;C<this._geometries.length;C++)y+=this._geometries[C].getLength();return y},d.prototype.getNumPoints=function(){for(var y=0,C=0;C<this._geometries.length;C++)y+=this._geometries[C].getNumPoints();return y},d.prototype.getNumGeometries=function(){return this._geometries.length},d.prototype.reverse=function(){for(var C=new Array(this._geometries.length).fill(null),F=0;F<this._geometries.length;F++)C[F]=this._geometries[F].reverse();return this.getFactory().createGeometryCollection(C)},d.prototype.compareToSameClass=function(){if(1===arguments.length){var y=arguments[0],C=new ct(x3.asList(this._geometries)),F=new ct(x3.asList(y._geometries));return this.compare(C,F)}if(2===arguments.length){for(var q=arguments[1],ye=arguments[0],je=this.getNumGeometries(),yt=ye.getNumGeometries(),vt=0;vt<je&&vt<yt;){var gn=this.getGeometryN(vt),En=ye.getGeometryN(vt),Pn=gn.compareToSameClass(En,q);if(0!==Pn)return Pn;vt++}return vt<je?1:vt<yt?-1:0}},d.prototype.apply=function(){if(bt(arguments[0],yr))for(var y=arguments[0],C=0;C<this._geometries.length;C++)this._geometries[C].apply(y);else if(bt(arguments[0],V2)){var F=arguments[0];if(0===this._geometries.length)return null;for(var N=0;N<this._geometries.length&&(this._geometries[N].apply(F),!F.isDone());N++);F.isGeometryChanged()&&this.geometryChanged()}else if(bt(arguments[0],Xa)){var q=arguments[0];q.filter(this);for(var ye=0;ye<this._geometries.length;ye++)this._geometries[ye].apply(q)}else if(bt(arguments[0],ji)){var je=arguments[0];je.filter(this);for(var yt=0;yt<this._geometries.length;yt++)this._geometries[yt].apply(je)}},d.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),ie.shouldNeverReachHere(),null},d.prototype.clone=function(){var y=h.prototype.clone.call(this);y._geometries=new Array(this._geometries.length).fill(null);for(var C=0;C<this._geometries.length;C++)y._geometries[C]=this._geometries[C].clone();return y},d.prototype.getGeometryType=function(){return"GeometryCollection"},d.prototype.copy=function(){for(var y=new Array(this._geometries.length).fill(null),C=0;C<y.length;C++)y[C]=this._geometries[C].copy();return new d(y,this._factory)},d.prototype.isEmpty=function(){for(var y=0;y<this._geometries.length;y++)if(!this._geometries[y].isEmpty())return!1;return!0},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(d,m),d}(bn),cu=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return bn.SORTINDEX_MULTILINESTRING},d.prototype.equalsExact=function(){if(2===arguments.length){var y=arguments[0],C=arguments[1];return!!this.isEquivalentClass(y)&&h.prototype.equalsExact.call(this,y,C)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?Ri.FALSE:0},d.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var y=0;y<this._geometries.length;y++)if(!this._geometries[y].isClosed())return!1;return!0},d.prototype.getDimension=function(){return 1},d.prototype.reverse=function(){for(var y=this._geometries.length,C=new Array(y).fill(null),F=0;F<this._geometries.length;F++)C[y-1-F]=this._geometries[F].reverse();return this.getFactory().createMultiLineString(C)},d.prototype.getBoundary=function(){return new z1(this).getBoundary()},d.prototype.getGeometryType=function(){return"MultiLineString"},d.prototype.copy=function(){for(var y=new Array(this._geometries.length).fill(null),C=0;C<y.length;C++)y[C]=this._geometries[C].copy();return new d(y,this._factory)},d.prototype.interfaces_=function(){return[N4]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(d,m),d}(H1),z1=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var h=arguments[0],d=Dr.MOD2_BOUNDARY_RULE;this._geom=h,this._geomFact=h.getFactory(),this._bnRule=d}else if(2===arguments.length){var m=arguments[0],y=arguments[1];this._geom=m,this._geomFact=m.getFactory(),this._bnRule=y}};z1.prototype.boundaryMultiLineString=function(h){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var d=this.computeBoundaryCoordinates(h);return 1===d.length?this._geomFact.createPoint(d[0]):this._geomFact.createMultiPointFromCoords(d)},z1.prototype.getBoundary=function(){return this._geom instanceof ko?this.boundaryLineString(this._geom):this._geom instanceof cu?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},z1.prototype.boundaryLineString=function(h){return this._geom.isEmpty()?this.getEmptyMultiPoint():h.isClosed()?this._bnRule.isInBoundary(2)?h.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([h.getStartPoint(),h.getEndPoint()])},z1.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},z1.prototype.computeBoundaryCoordinates=function(h){var d=new hn;this._endpointMap=new ht;for(var m=0;m<h.getNumGeometries();m++){var y=h.getGeometryN(m);0!==y.getNumPoints()&&(this.addEndpoint(y.getCoordinateN(0)),this.addEndpoint(y.getCoordinateN(y.getNumPoints()-1)))}for(var C=this._endpointMap.entrySet().iterator();C.hasNext();){var F=C.next(),N=F.getValue().count;this._bnRule.isInBoundary(N)&&d.add(F.getKey())}return Vi.toCoordinateArray(d)},z1.prototype.addEndpoint=function(h){var d=this._endpointMap.get(h);null===d&&(d=new Uh,this._endpointMap.put(h,d)),d.count++},z1.prototype.interfaces_=function(){return[]},z1.prototype.getClass=function(){return z1},z1.getBoundary=function(){return 1===arguments.length?new z1(arguments[0]).getBoundary():2===arguments.length?new z1(arguments[0],arguments[1]).getBoundary():void 0};var Uh=function(){this.count=null};Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh};var O1=function(){},x8={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};O1.prototype.interfaces_=function(){return[]},O1.prototype.getClass=function(){return O1},O1.chars=function(h,d){for(var m=new Array(d).fill(null),y=0;y<d;y++)m[y]=h;return String(m)},O1.getStackTrace=function(){if(1===arguments.length){var h=arguments[0],d=new function(){},m=new function(){}(d);return h.printStackTrace(m),d.toString()}if(2===arguments.length){for(var C=arguments[1],F="",N=new function(){}(new function(){}(O1.getStackTrace(arguments[0]))),q=0;q<C;q++)try{F+=N.readLine()+O1.NEWLINE}catch(ye){if(!(ye instanceof $t))throw ye;ie.shouldNeverReachHere()}return F}},O1.split=function(h,d){for(var m=d.length,y=new hn,C=""+h,F=C.indexOf(d);F>=0;){var N=C.substring(0,F);y.add(N),F=(C=C.substring(F+m)).indexOf(d)}C.length>0&&y.add(C);for(var q=new Array(y.size()).fill(null),ye=0;ye<q.length;ye++)q[ye]=y.get(ye);return q},O1.toString=function(){if(1===arguments.length)return O1.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},O1.spaces=function(h){return O1.chars(" ",h)},x8.NEWLINE.get=function(){return Ut.getProperty("line.separator")},x8.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(O1,x8);var Uo=function(){};Uo.prototype.interfaces_=function(){return[]},Uo.prototype.getClass=function(){return Uo},Uo.copyCoord=function(h,d,m,y){for(var C=Math.min(h.getDimension(),m.getDimension()),F=0;F<C;F++)m.setOrdinate(y,F,h.getOrdinate(d,F))},Uo.isRing=function(h){var d=h.size();return 0===d||!(d<=3)&&h.getOrdinate(0,dt.X)===h.getOrdinate(d-1,dt.X)&&h.getOrdinate(0,dt.Y)===h.getOrdinate(d-1,dt.Y)},Uo.isEqual=function(h,d){var m=h.size();if(m!==d.size())return!1;for(var y=Math.min(h.getDimension(),d.getDimension()),C=0;C<m;C++)for(var F=0;F<y;F++){var N=h.getOrdinate(C,F),q=d.getOrdinate(C,F);if(!(h.getOrdinate(C,F)===d.getOrdinate(C,F)||Z.isNaN(N)&&Z.isNaN(q)))return!1}return!0},Uo.extend=function(h,d,m){var y=h.create(m,d.getDimension()),C=d.size();if(Uo.copy(d,0,y,0,C),C>0)for(var F=C;F<m;F++)Uo.copy(d,C-1,y,F,1);return y},Uo.reverse=function(h){for(var d=h.size()-1,m=Math.trunc(d/2),y=0;y<=m;y++)Uo.swap(h,y,d-y)},Uo.swap=function(h,d,m){if(d===m)return null;for(var y=0;y<h.getDimension();y++){var C=h.getOrdinate(d,y);h.setOrdinate(d,y,h.getOrdinate(m,y)),h.setOrdinate(m,y,C)}},Uo.copy=function(h,d,m,y,C){for(var F=0;F<C;F++)Uo.copyCoord(h,d+F,m,y+F)},Uo.toString=function(){if(1===arguments.length){var h=arguments[0],d=h.size();if(0===d)return"()";var m=h.getDimension(),y=new Se;y.append("(");for(var C=0;C<d;C++){C>0&&y.append(" ");for(var F=0;F<m;F++)F>0&&y.append(","),y.append(O1.toString(h.getOrdinate(C,F)))}return y.append(")"),y.toString()}},Uo.ensureValidRing=function(h,d){var m=d.size();return 0===m?d:m<=3?Uo.createClosedRing(h,d,4):d.getOrdinate(0,dt.X)===d.getOrdinate(m-1,dt.X)&&d.getOrdinate(0,dt.Y)===d.getOrdinate(m-1,dt.Y)?d:Uo.createClosedRing(h,d,m+1)},Uo.createClosedRing=function(h,d,m){var y=h.create(m,d.getDimension()),C=d.size();Uo.copy(d,0,y,0,C);for(var F=C;F<m;F++)Uo.copy(d,0,y,F,1);return y};var ko=function(h){function d(y,C){h.call(this,C),this._points=null,this.init(y)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new en:this._points.expandEnvelope(new en)},d.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},d.prototype.getSortIndex=function(){return h.SORTINDEX_LINESTRING},d.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},d.prototype.equalsExact=function(){if(2===arguments.length){var y=arguments[0],C=arguments[1];if(!this.isEquivalentClass(y))return!1;var F=y;if(this._points.size()!==F._points.size())return!1;for(var N=0;N<this._points.size();N++)if(!this.equal(this._points.getCoordinate(N),F._points.getCoordinate(N),C))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var y=0;y<Math.trunc(this._points.size()/2);y++){var C=this._points.size()-1-y;if(!this._points.getCoordinate(y).equals(this._points.getCoordinate(C)))return this._points.getCoordinate(y).compareTo(this._points.getCoordinate(C))>0&&Uo.reverse(this._points),null}},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?Ri.FALSE:0},d.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},d.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},d.prototype.getDimension=function(){return 1},d.prototype.getLength=function(){return St.computeLength(this._points)},d.prototype.getNumPoints=function(){return this._points.size()},d.prototype.reverse=function(){var y=this._points.copy();return Uo.reverse(y),this.getFactory().createLineString(y)},d.prototype.compareToSameClass=function(){if(1===arguments.length){for(var y=arguments[0],C=0,F=0;C<this._points.size()&&F<y._points.size();){var N=this._points.getCoordinate(C).compareTo(y._points.getCoordinate(F));if(0!==N)return N;C++,F++}return C<this._points.size()?1:F<y._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},d.prototype.apply=function(){if(bt(arguments[0],yr))for(var y=arguments[0],C=0;C<this._points.size();C++)y.filter(this._points.getCoordinate(C));else if(bt(arguments[0],V2)){var F=arguments[0];if(0===this._points.size())return null;for(var N=0;N<this._points.size()&&(F.filter(this._points,N),!F.isDone());N++);F.isGeometryChanged()&&this.geometryChanged()}else(bt(arguments[0],Xa)||bt(arguments[0],ji))&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return new z1(this).getBoundary()},d.prototype.isEquivalentClass=function(y){return y instanceof d},d.prototype.clone=function(){var y=h.prototype.clone.call(this);return y._points=this._points.clone(),y},d.prototype.getCoordinateN=function(y){return this._points.getCoordinate(y)},d.prototype.getGeometryType=function(){return"LineString"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._points},d.prototype.isEmpty=function(){return 0===this._points.size()},d.prototype.init=function(y){if(null===y&&(y=this.getFactory().getCoordinateSequenceFactory().create([])),1===y.size())throw new Y("Invalid number of points in LineString (found "+y.size()+" - must be 0 or >= 2)");this._points=y},d.prototype.isCoordinate=function(y){for(var C=0;C<this._points.size();C++)if(this._points.getCoordinate(C).equals(y))return!0;return!1},d.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},d.prototype.getPointN=function(y){return this.getFactory().createPoint(this._points.getCoordinate(y))},d.prototype.interfaces_=function(){return[N4]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(d,m),d}(bn),ef=function(){};ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef};var Lc=function(h){function d(y,C){h.call(this,C),this._coordinates=y||null,this.init(this._coordinates)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new en;var y=new en;return y.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),y},d.prototype.getSortIndex=function(){return h.SORTINDEX_POINT},d.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},d.prototype.equalsExact=function(){if(2===arguments.length){var y=arguments[0],C=arguments[1];return!!this.isEquivalentClass(y)&&(!(!this.isEmpty()||!y.isEmpty())||this.isEmpty()===y.isEmpty()&&this.equal(y.getCoordinate(),this.getCoordinate(),C))}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){},d.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},d.prototype.getBoundaryDimension=function(){return Ri.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getNumPoints=function(){return this.isEmpty()?0:1},d.prototype.reverse=function(){return this.copy()},d.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},d.prototype.compareToSameClass=function(){if(1===arguments.length){var y=arguments[0];return this.getCoordinate().compareTo(y.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},d.prototype.apply=function(){if(bt(arguments[0],yr)){var y=arguments[0];if(this.isEmpty())return null;y.filter(this.getCoordinate())}else if(bt(arguments[0],V2)){var C=arguments[0];if(this.isEmpty())return null;C.filter(this._coordinates,0),C.isGeometryChanged()&&this.geometryChanged()}else(bt(arguments[0],Xa)||bt(arguments[0],ji))&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.clone=function(){var y=h.prototype.clone.call(this);return y._coordinates=this._coordinates.clone(),y},d.prototype.getGeometryType=function(){return"Point"},d.prototype.copy=function(){return new d(this._coordinates.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._coordinates},d.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},d.prototype.isEmpty=function(){return 0===this._coordinates.size()},d.prototype.init=function(y){null===y&&(y=this.getFactory().getCoordinateSequenceFactory().create([])),ie.isTrue(y.size()<=1),this._coordinates=y},d.prototype.isSimple=function(){return!0},d.prototype.interfaces_=function(){return[ef]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(d,m),d}(bn),U2=function(){};U2.prototype.interfaces_=function(){return[]},U2.prototype.getClass=function(){return U2};var ca=function(h){function d(y,C,F){if(h.call(this,F),this._shell=null,this._holes=null,null===y&&(y=this.getFactory().createLinearRing()),null===C&&(C=[]),h.hasNullElements(C))throw new Y("holes must not contain null elements");if(y.isEmpty()&&h.hasNonEmptyElements(C))throw new Y("shell is empty but holes are not");this._shell=y,this._holes=C}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},d.prototype.getSortIndex=function(){return h.SORTINDEX_POLYGON},d.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var y=new Array(this.getNumPoints()).fill(null),C=-1,F=this._shell.getCoordinates(),N=0;N<F.length;N++)y[++C]=F[N];for(var q=0;q<this._holes.length;q++)for(var ye=this._holes[q].getCoordinates(),je=0;je<ye.length;je++)y[++C]=ye[je];return y},d.prototype.getArea=function(){var y=0;y+=Math.abs(St.signedArea(this._shell.getCoordinateSequence()));for(var C=0;C<this._holes.length;C++)y-=Math.abs(St.signedArea(this._holes[C].getCoordinateSequence()));return y},d.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var y=this._shell.getCoordinateSequence(),C=this.getEnvelopeInternal(),F=0;F<5;F++){var N=y.getX(F);if(N!==C.getMinX()&&N!==C.getMaxX())return!1;var q=y.getY(F);if(q!==C.getMinY()&&q!==C.getMaxY())return!1}for(var ye=y.getX(0),je=y.getY(0),yt=1;yt<=4;yt++){var vt=y.getX(yt),gn=y.getY(yt);if(vt!==ye==(gn!==je))return!1;ye=vt,je=gn}return!0},d.prototype.equalsExact=function(){if(2===arguments.length){var y=arguments[0],C=arguments[1];if(!this.isEquivalentClass(y))return!1;var F=y;if(!this._shell.equalsExact(F._shell,C)||this._holes.length!==F._holes.length)return!1;for(var ye=0;ye<this._holes.length;ye++)if(!this._holes[ye].equalsExact(F._holes[ye],C))return!1;return!0}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var y=0;y<this._holes.length;y++)this.normalize(this._holes[y],!1);x3.sort(this._holes)}else if(2===arguments.length){var C=arguments[0],F=arguments[1];if(C.isEmpty())return null;var N=new Array(C.getCoordinates().length-1).fill(null);Ut.arraycopy(C.getCoordinates(),0,N,0,N.length);var q=Vi.minCoordinate(C.getCoordinates());Vi.scroll(N,q),Ut.arraycopy(N,0,C.getCoordinates(),0,N.length),C.getCoordinates()[N.length]=N[0],St.isCCW(C.getCoordinates())===F&&Vi.reverse(C.getCoordinates())}},d.prototype.getCoordinate=function(){return this._shell.getCoordinate()},d.prototype.getNumInteriorRing=function(){return this._holes.length},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.getLength=function(){var y=0;y+=this._shell.getLength();for(var C=0;C<this._holes.length;C++)y+=this._holes[C].getLength();return y},d.prototype.getNumPoints=function(){for(var y=this._shell.getNumPoints(),C=0;C<this._holes.length;C++)y+=this._holes[C].getNumPoints();return y},d.prototype.reverse=function(){var y=this.copy();y._shell=this._shell.copy().reverse(),y._holes=new Array(this._holes.length).fill(null);for(var C=0;C<this._holes.length;C++)y._holes[C]=this._holes[C].copy().reverse();return y},d.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},d.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var q=arguments[1],ye=arguments[0],vt=this._shell.compareToSameClass(ye._shell,q);if(0!==vt)return vt;for(var gn=this.getNumInteriorRing(),En=ye.getNumInteriorRing(),Pn=0;Pn<gn&&Pn<En;){var ri=this.getInteriorRingN(Pn),Zr=ye.getInteriorRingN(Pn),Zo=ri.compareToSameClass(Zr,q);if(0!==Zo)return Zo;Pn++}return Pn<gn?1:Pn<En?-1:0}},d.prototype.apply=function(y){if(bt(y,yr)){this._shell.apply(y);for(var C=0;C<this._holes.length;C++)this._holes[C].apply(y)}else if(bt(y,V2)){if(this._shell.apply(y),!y.isDone())for(var F=0;F<this._holes.length&&(this._holes[F].apply(y),!y.isDone());F++);y.isGeometryChanged()&&this.geometryChanged()}else if(bt(y,Xa))y.filter(this);else if(bt(y,ji)){y.filter(this),this._shell.apply(y);for(var N=0;N<this._holes.length;N++)this._holes[N].apply(y)}},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var y=new Array(this._holes.length+1).fill(null);y[0]=this._shell;for(var C=0;C<this._holes.length;C++)y[C+1]=this._holes[C];return y.length<=1?this.getFactory().createLinearRing(y[0].getCoordinateSequence()):this.getFactory().createMultiLineString(y)},d.prototype.clone=function(){var y=h.prototype.clone.call(this);y._shell=this._shell.clone(),y._holes=new Array(this._holes.length).fill(null);for(var C=0;C<this._holes.length;C++)y._holes[C]=this._holes[C].clone();return y},d.prototype.getGeometryType=function(){return"Polygon"},d.prototype.copy=function(){for(var y=this._shell.copy(),C=new Array(this._holes.length).fill(null),F=0;F<C.length;F++)C[F]=this._holes[F].copy();return new d(y,C,this._factory)},d.prototype.getExteriorRing=function(){return this._shell},d.prototype.isEmpty=function(){return this._shell.isEmpty()},d.prototype.getInteriorRingN=function(y){return this._holes[y]},d.prototype.interfaces_=function(){return[U2]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(d,m),d}(bn),C3=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return bn.SORTINDEX_MULTIPOINT},d.prototype.isValid=function(){return!0},d.prototype.equalsExact=function(){if(2===arguments.length){var y=arguments[0],C=arguments[1];return!!this.isEquivalentClass(y)&&h.prototype.equalsExact.call(this,y,C)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():h.prototype.getCoordinate.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return Ri.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.getGeometryType=function(){return"MultiPoint"},d.prototype.copy=function(){for(var y=new Array(this._geometries.length).fill(null),C=0;C<y.length;C++)y[C]=this._geometries[C].copy();return new d(y,this._factory)},d.prototype.interfaces_=function(){return[ef]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(d,m),d}(H1),cl=function(h){function d(y,C){y instanceof $&&C instanceof ir&&(y=C.getCoordinateSequenceFactory().create(y)),h.call(this,y,C),this.validateConstruction()}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return bn.SORTINDEX_LINEARRING},d.prototype.getBoundaryDimension=function(){return Ri.FALSE},d.prototype.isClosed=function(){return!!this.isEmpty()||h.prototype.isClosed.call(this)},d.prototype.reverse=function(){var y=this._points.copy();return Uo.reverse(y),this.getFactory().createLinearRing(y)},d.prototype.validateConstruction=function(){if(!this.isEmpty()&&!h.prototype.isClosed.call(this))throw new Y("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<d.MINIMUM_VALID_SIZE)throw new Y("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},d.prototype.getGeometryType=function(){return"LinearRing"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.MINIMUM_VALID_SIZE.get=function(){return 4},m.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(d,m),d}(ko),Zc=function(h){function d(){h.apply(this,arguments)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return bn.SORTINDEX_MULTIPOLYGON},d.prototype.equalsExact=function(){if(2===arguments.length){var y=arguments[0],C=arguments[1];return!!this.isEquivalentClass(y)&&h.prototype.equalsExact.call(this,y,C)}return h.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.reverse=function(){for(var C=new Array(this._geometries.length).fill(null),F=0;F<this._geometries.length;F++)C[F]=this._geometries[F].reverse();return this.getFactory().createMultiPolygon(C)},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var y=new hn,C=0;C<this._geometries.length;C++)for(var F=this._geometries[C].getBoundary(),N=0;N<F.getNumGeometries();N++)y.add(F.getGeometryN(N));var q=new Array(y.size()).fill(null);return this.getFactory().createMultiLineString(y.toArray(q))},d.prototype.getGeometryType=function(){return"MultiPolygon"},d.prototype.copy=function(){for(var y=new Array(this._geometries.length).fill(null),C=0;C<y.length;C++)y[C]=this._geometries[C].copy();return new d(y,this._factory)},d.prototype.interfaces_=function(){return[U2]},d.prototype.getClass=function(){return d},m.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(d,m),d}(H1),Es=function(h){this._factory=h||null,this._isUserDataCopied=!1},Jc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Es.prototype.setCopyUserData=function(h){this._isUserDataCopied=h},Es.prototype.edit=function(h,d){if(null===h)return null;var m=this.editInternal(h,d);return this._isUserDataCopied&&m.setUserData(h.getUserData()),m},Es.prototype.editInternal=function(h,d){return null===this._factory&&(this._factory=h.getFactory()),h instanceof H1?this.editGeometryCollection(h,d):h instanceof ca?this.editPolygon(h,d):h instanceof Lc||h instanceof ko?d.edit(h,this._factory):(ie.shouldNeverReachHere("Unsupported Geometry class: "+h.getClass().getName()),null)},Es.prototype.editGeometryCollection=function(h,d){for(var m=d.edit(h,this._factory),y=new hn,C=0;C<m.getNumGeometries();C++){var F=this.edit(m.getGeometryN(C),d);null===F||F.isEmpty()||y.add(F)}return m.getClass()===C3?this._factory.createMultiPoint(y.toArray([])):m.getClass()===cu?this._factory.createMultiLineString(y.toArray([])):m.getClass()===Zc?this._factory.createMultiPolygon(y.toArray([])):this._factory.createGeometryCollection(y.toArray([]))},Es.prototype.editPolygon=function(h,d){var m=d.edit(h,this._factory);if(null===m&&(m=this._factory.createPolygon(null)),m.isEmpty())return m;var y=this.edit(m.getExteriorRing(),d);if(null===y||y.isEmpty())return this._factory.createPolygon();for(var C=new hn,F=0;F<m.getNumInteriorRing();F++){var N=this.edit(m.getInteriorRingN(F),d);null===N||N.isEmpty()||C.add(N)}return this._factory.createPolygon(y,C.toArray([]))},Es.prototype.interfaces_=function(){return[]},Es.prototype.getClass=function(){return Es},Es.GeometryEditorOperation=function(){},Jc.NoOpGeometryOperation.get=function(){return lu},Jc.CoordinateOperation.get=function(){return Fl},Jc.CoordinateSequenceOperation.get=function(){return qs},Object.defineProperties(Es,Jc);var lu=function(){};lu.prototype.edit=function(h,d){return h},lu.prototype.interfaces_=function(){return[Es.GeometryEditorOperation]},lu.prototype.getClass=function(){return lu};var Fl=function(){};Fl.prototype.edit=function(h,d){var m=this.editCoordinates(h.getCoordinates(),h);return null===m?h:h instanceof cl?d.createLinearRing(m):h instanceof ko?d.createLineString(m):h instanceof Lc?m.length>0?d.createPoint(m[0]):d.createPoint():h},Fl.prototype.interfaces_=function(){return[Es.GeometryEditorOperation]},Fl.prototype.getClass=function(){return Fl};var qs=function(){};qs.prototype.edit=function(h,d){return h instanceof cl?d.createLinearRing(this.edit(h.getCoordinateSequence(),h)):h instanceof ko?d.createLineString(this.edit(h.getCoordinateSequence(),h)):h instanceof Lc?d.createPoint(this.edit(h.getCoordinateSequence(),h)):h},qs.prototype.interfaces_=function(){return[Es.GeometryEditorOperation]},qs.prototype.getClass=function(){return qs};var Fo=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var h=arguments[0];this._coordinates=new Array(h).fill(null);for(var d=0;d<h;d++)this._coordinates[d]=new $}else if(bt(arguments[0],dt)){var m=arguments[0];if(null===m)return this._coordinates=new Array(0).fill(null),null;this._dimension=m.getDimension(),this._coordinates=new Array(m.size()).fill(null);for(var y=0;y<this._coordinates.length;y++)this._coordinates[y]=m.getCoordinateCopy(y)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var C=arguments[0],F=arguments[1];this._coordinates=C,this._dimension=F,null===C&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var N=arguments[0],q=arguments[1];this._coordinates=new Array(N).fill(null),this._dimension=q;for(var ye=0;ye<N;ye++)this._coordinates[ye]=new $}},Eo={serialVersionUID:{configurable:!0}};Fo.prototype.setOrdinate=function(h,d,m){switch(d){case dt.X:this._coordinates[h].x=m;break;case dt.Y:this._coordinates[h].y=m;break;case dt.Z:this._coordinates[h].z=m;break;default:throw new Y("invalid ordinateIndex")}},Fo.prototype.size=function(){return this._coordinates.length},Fo.prototype.getOrdinate=function(h,d){switch(d){case dt.X:return this._coordinates[h].x;case dt.Y:return this._coordinates[h].y;case dt.Z:return this._coordinates[h].z}return Z.NaN},Fo.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var d=arguments[0],m=arguments[1];m.x=this._coordinates[d].x,m.y=this._coordinates[d].y,m.z=this._coordinates[d].z}},Fo.prototype.getCoordinateCopy=function(h){return new $(this._coordinates[h])},Fo.prototype.getDimension=function(){return this._dimension},Fo.prototype.getX=function(h){return this._coordinates[h].x},Fo.prototype.clone=function(){for(var h=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)h[d]=this._coordinates[d].clone();return new Fo(h,this._dimension)},Fo.prototype.expandEnvelope=function(h){for(var d=0;d<this._coordinates.length;d++)h.expandToInclude(this._coordinates[d]);return h},Fo.prototype.copy=function(){for(var h=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)h[d]=this._coordinates[d].copy();return new Fo(h,this._dimension)},Fo.prototype.toString=function(){if(this._coordinates.length>0){var h=new Se(17*this._coordinates.length);h.append("("),h.append(this._coordinates[0]);for(var d=1;d<this._coordinates.length;d++)h.append(", "),h.append(this._coordinates[d]);return h.append(")"),h.toString()}return"()"},Fo.prototype.getY=function(h){return this._coordinates[h].y},Fo.prototype.toCoordinateArray=function(){return this._coordinates},Fo.prototype.interfaces_=function(){return[dt,ee]},Fo.prototype.getClass=function(){return Fo},Eo.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Fo,Eo);var Dc=function(){},Gh={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Dc.prototype.readResolve=function(){return Dc.instance()},Dc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Fo(arguments[0]);if(bt(arguments[0],dt))return new Fo(arguments[0])}else if(2===arguments.length){var m=arguments[0],y=arguments[1];return y>3&&(y=3),y<2?new Fo(m):new Fo(m,y)}},Dc.prototype.interfaces_=function(){return[Oe,ee]},Dc.prototype.getClass=function(){return Dc},Dc.instance=function(){return Dc.instanceObject},Gh.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Gh.instanceObject.get=function(){return new Dc},Object.defineProperties(Dc,Gh);var Cr=function(h){function d(){h.call(this),this.map_=new Map}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.get=function(m){return this.map_.get(m)||null},d.prototype.put=function(m,y){return this.map_.set(m,y),y},d.prototype.values=function(){for(var m=new hn,y=this.map_.values(),C=y.next();!C.done;)m.add(C.value),C=y.next();return m},d.prototype.entrySet=function(){var m=new Dd;return this.map_.entries().forEach(function(y){return m.add(y)}),m},d.prototype.size=function(){return this.map_.size()},d}(O4),Dn=function h(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=h.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Pl){var d=arguments[0];this._modelType=d,d===h.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var m=arguments[0];this._modelType=h.FIXED,this.setScale(m)}else if(arguments[0]instanceof h){var y=arguments[0];this._modelType=y._modelType,this._scale=y._scale}},N1={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Dn.prototype.equals=function(h){return h instanceof Dn&&this._modelType===h._modelType&&this._scale===h._scale},Dn.prototype.compareTo=function(h){var d=h,m=this.getMaximumSignificantDigits(),y=d.getMaximumSignificantDigits();return new Re(m).compareTo(new Re(y))},Dn.prototype.getScale=function(){return this._scale},Dn.prototype.isFloating=function(){return this._modelType===Dn.FLOATING||this._modelType===Dn.FLOATING_SINGLE},Dn.prototype.getType=function(){return this._modelType},Dn.prototype.toString=function(){var h="UNKNOWN";return this._modelType===Dn.FLOATING?h="Floating":this._modelType===Dn.FLOATING_SINGLE?h="Floating-Single":this._modelType===Dn.FIXED&&(h="Fixed (Scale="+this.getScale()+")"),h},Dn.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var h=arguments[0];return Z.isNaN(h)||this._modelType===Dn.FLOATING_SINGLE?h:this._modelType===Dn.FIXED?Math.round(h*this._scale)/this._scale:h}if(arguments[0]instanceof $){var d=arguments[0];if(this._modelType===Dn.FLOATING)return null;d.x=this.makePrecise(d.x),d.y=this.makePrecise(d.y)}},Dn.prototype.getMaximumSignificantDigits=function(){var h=16;return this._modelType===Dn.FLOATING?h=16:this._modelType===Dn.FLOATING_SINGLE?h=6:this._modelType===Dn.FIXED&&(h=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),h},Dn.prototype.setScale=function(h){this._scale=Math.abs(h)},Dn.prototype.interfaces_=function(){return[ee,te]},Dn.prototype.getClass=function(){return Dn},Dn.mostPrecise=function(h,d){return h.compareTo(d)>=0?h:d},N1.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},N1.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Dn,N1);var Pl=function h(d){this._name=d||null,h.nameToTypeMap.put(d,this)},Jt={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Pl.prototype.readResolve=function(){return Pl.nameToTypeMap.get(this._name)},Pl.prototype.toString=function(){return this._name},Pl.prototype.interfaces_=function(){return[ee]},Pl.prototype.getClass=function(){return Pl},Jt.serialVersionUID.get=function(){return-552860263173159e4},Jt.nameToTypeMap.get=function(){return new Cr},Object.defineProperties(Pl,Jt),Dn.Type=Pl,Dn.FIXED=new Pl("FIXED"),Dn.FLOATING=new Pl("FLOATING"),Dn.FLOATING_SINGLE=new Pl("FLOATING SINGLE");var ir=function h(){this._precisionModel=new Dn,this._SRID=0,this._coordinateSequenceFactory=h.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?bt(arguments[0],Oe)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Dn&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},hr={serialVersionUID:{configurable:!0}};ir.prototype.toGeometry=function(h){return h.isNull()?this.createPoint(null):h.getMinX()===h.getMaxX()&&h.getMinY()===h.getMaxY()?this.createPoint(new $(h.getMinX(),h.getMinY())):h.getMinX()===h.getMaxX()||h.getMinY()===h.getMaxY()?this.createLineString([new $(h.getMinX(),h.getMinY()),new $(h.getMaxX(),h.getMaxY())]):this.createPolygon(this.createLinearRing([new $(h.getMinX(),h.getMinY()),new $(h.getMinX(),h.getMaxY()),new $(h.getMaxX(),h.getMaxY()),new $(h.getMaxX(),h.getMinY()),new $(h.getMinX(),h.getMinY())]),null)},ir.prototype.createLineString=function(h){return h?h instanceof Array?new ko(this.getCoordinateSequenceFactory().create(h),this):bt(h,dt)?new ko(h,this):void 0:new ko(this.getCoordinateSequenceFactory().create([]),this)},ir.prototype.createMultiLineString=function(){return 0===arguments.length?new cu(null,this):1===arguments.length?new cu(arguments[0],this):void 0},ir.prototype.buildGeometry=function(h){for(var d=null,m=!1,y=!1,C=h.iterator();C.hasNext();){var F=C.next(),N=F.getClass();null===d&&(d=N),N!==d&&(m=!0),F.isGeometryCollectionOrDerived()&&(y=!0)}if(null===d)return this.createGeometryCollection();if(m||y)return this.createGeometryCollection(ir.toGeometryArray(h));var q=h.iterator().next();if(h.size()>1){if(q instanceof ca)return this.createMultiPolygon(ir.toPolygonArray(h));if(q instanceof ko)return this.createMultiLineString(ir.toLineStringArray(h));if(q instanceof Lc)return this.createMultiPoint(ir.toPointArray(h));ie.shouldNeverReachHere("Unhandled class: "+q.getClass().getName())}return q},ir.prototype.createMultiPointFromCoords=function(h){return this.createMultiPoint(null!==h?this.getCoordinateSequenceFactory().create(h):null)},ir.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof $){var h=arguments[0];return this.createPoint(null!==h?this.getCoordinateSequenceFactory().create([h]):null)}if(bt(arguments[0],dt))return new Lc(arguments[0],this)}},ir.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ir.prototype.createPolygon=function(){if(0===arguments.length)return new ca(null,null,this);if(1===arguments.length){if(bt(arguments[0],dt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof cl)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new ca(arguments[0],arguments[1],this)},ir.prototype.getSRID=function(){return this._SRID},ir.prototype.createGeometryCollection=function(){return 0===arguments.length?new H1(null,this):1===arguments.length?new H1(arguments[0],this):void 0},ir.prototype.createGeometry=function(h){return new Es(this).edit(h,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},ir.prototype.getPrecisionModel=function(){return this._precisionModel},ir.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var h=arguments[0];return this.createLinearRing(null!==h?this.getCoordinateSequenceFactory().create(h):null)}if(bt(arguments[0],dt))return new cl(arguments[0],this)}},ir.prototype.createMultiPolygon=function(){return 0===arguments.length?new Zc(null,this):1===arguments.length?new Zc(arguments[0],this):void 0},ir.prototype.createMultiPoint=function(){if(0===arguments.length)return new C3(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new C3(arguments[0],this);if(arguments[0]instanceof Array){var d=arguments[0];return this.createMultiPoint(null!==d?this.getCoordinateSequenceFactory().create(d):null)}if(bt(arguments[0],dt)){var m=arguments[0];if(null===m)return this.createMultiPoint(new Array(0).fill(null));for(var y=new Array(m.size()).fill(null),C=0;C<m.size();C++){var F=this.getCoordinateSequenceFactory().create(1,m.getDimension());Uo.copy(m,C,F,0,1),y[C]=this.createPoint(F)}return this.createMultiPoint(y)}}},ir.prototype.interfaces_=function(){return[ee]},ir.prototype.getClass=function(){return ir},ir.toMultiPolygonArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},ir.toGeometryArray=function(h){if(null===h)return null;var d=new Array(h.size()).fill(null);return h.toArray(d)},ir.getDefaultCoordinateSequenceFactory=function(){return Dc.instance()},ir.toMultiLineStringArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},ir.toLineStringArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},ir.toMultiPointArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},ir.toLinearRingArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},ir.toPointArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},ir.toPolygonArray=function(h){var d=new Array(h.size()).fill(null);return h.toArray(d)},ir.createPointFromInternalCoord=function(h,d){return d.getPrecisionModel().makePrecise(h),d.getFactory().createPoint(h)},hr.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ir,hr);var Xs=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Id=function(h){this.geometryFactory=h||new ir};Id.prototype.read=function(h){var d,m=(d="string"==typeof h?JSON.parse(h):h).type;if(!Hl[m])throw new Error("Unknown GeoJSON type: "+d.type);return-1!==Xs.indexOf(m)?Hl[m].apply(this,[d.coordinates]):Hl[m].apply(this,"GeometryCollection"===m?[d.geometries]:[d])},Id.prototype.write=function(h){var d=h.getGeometryType();if(!M3[d])throw new Error("Geometry is not supported");return M3[d].apply(this,[h])};var Hl={Feature:function(h){var d={};for(var m in h)d[m]=h[m];if(h.geometry){if(!Hl[h.geometry.type])throw new Error("Unknown GeoJSON type: "+h.type);d.geometry=this.read(h.geometry)}return h.bbox&&(d.bbox=Hl.bbox.apply(this,[h.bbox])),d},FeatureCollection:function(h){var d={};if(h.features){d.features=[];for(var m=0;m<h.features.length;++m)d.features.push(this.read(h.features[m]))}return h.bbox&&(d.bbox=this.parse.bbox.apply(this,[h.bbox])),d},coordinates:function(h){for(var d=[],m=0;m<h.length;++m){var y=h[m];d.push(new $(y[0],y[1]))}return d},bbox:function(h){return this.geometryFactory.createLinearRing([new $(h[0],h[1]),new $(h[2],h[1]),new $(h[2],h[3]),new $(h[0],h[3]),new $(h[0],h[1])])},Point:function(h){var d=new $(h[0],h[1]);return this.geometryFactory.createPoint(d)},MultiPoint:function(h){for(var d=[],m=0;m<h.length;++m)d.push(Hl.Point.apply(this,[h[m]]));return this.geometryFactory.createMultiPoint(d)},LineString:function(h){var d=Hl.coordinates.apply(this,[h]);return this.geometryFactory.createLineString(d)},MultiLineString:function(h){for(var d=[],m=0;m<h.length;++m)d.push(Hl.LineString.apply(this,[h[m]]));return this.geometryFactory.createMultiLineString(d)},Polygon:function(h){for(var d=Hl.coordinates.apply(this,[h[0]]),m=this.geometryFactory.createLinearRing(d),y=[],C=1;C<h.length;++C){var N=Hl.coordinates.apply(this,[h[C]]),q=this.geometryFactory.createLinearRing(N);y.push(q)}return this.geometryFactory.createPolygon(m,y)},MultiPolygon:function(h){for(var d=[],m=0;m<h.length;++m)d.push(Hl.Polygon.apply(this,[h[m]]));return this.geometryFactory.createMultiPolygon(d)},GeometryCollection:function(h){for(var d=[],m=0;m<h.length;++m)d.push(this.read(h[m]));return this.geometryFactory.createGeometryCollection(d)}},M3={coordinate:function(h){return[h.x,h.y]},Point:function(h){return{type:"Point",coordinates:M3.coordinate.apply(this,[h.getCoordinate()])}},MultiPoint:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var C=M3.Point.apply(this,[h._geometries[m]]);d.push(C.coordinates)}return{type:"MultiPoint",coordinates:d}},LineString:function(h){for(var d=[],m=h.getCoordinates(),y=0;y<m.length;++y)d.push(M3.coordinate.apply(this,[m[y]]));return{type:"LineString",coordinates:d}},MultiLineString:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var C=M3.LineString.apply(this,[h._geometries[m]]);d.push(C.coordinates)}return{type:"MultiLineString",coordinates:d}},Polygon:function(h){var d=[],m=M3.LineString.apply(this,[h._shell]);d.push(m.coordinates);for(var y=0;y<h._holes.length;++y){var F=M3.LineString.apply(this,[h._holes[y]]);d.push(F.coordinates)}return{type:"Polygon",coordinates:d}},MultiPolygon:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var C=M3.Polygon.apply(this,[h._geometries[m]]);d.push(C.coordinates)}return{type:"MultiPolygon",coordinates:d}},GeometryCollection:function(h){for(var d=[],m=0;m<h._geometries.length;++m){var y=h._geometries[m],C=y.getGeometryType();d.push(M3[C].apply(this,[y]))}return{type:"GeometryCollection",geometries:d}}},uu=function(h){this.geometryFactory=h||new ir,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Id(this.geometryFactory)};uu.prototype.read=function(h){var d=this.parser.read(h);return this.precisionModel.getType()===Dn.FIXED&&this.reducePrecision(d),d},uu.prototype.reducePrecision=function(h){var d,m;if(h.coordinate)this.precisionModel.makePrecise(h.coordinate);else if(h.points)for(d=0,m=h.points.length;d<m;d++)this.precisionModel.makePrecise(h.points[d]);else if(h.geometries)for(d=0,m=h.geometries.length;d<m;d++)this.reducePrecision(h.geometries[d])};var w2=function(){this.parser=new Id(this.geometryFactory)};w2.prototype.write=function(h){return this.parser.write(h)};var pn=function(){},Rd={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn},pn.opposite=function(h){return h===pn.LEFT?pn.RIGHT:h===pn.RIGHT?pn.LEFT:h},Rd.ON.get=function(){return 0},Rd.LEFT.get=function(){return 1},Rd.RIGHT.get=function(){return 2},Object.defineProperties(pn,Rd),(Qe.prototype=new Error).name="EmptyStackException",(Ke.prototype=new aa).add=function(h){return this.array_.push(h),!0},Ke.prototype.get=function(h){if(h<0||h>=this.size())throw new Error;return this.array_[h]},Ke.prototype.push=function(h){return this.array_.push(h),h},Ke.prototype.pop=function(h){if(0===this.array_.length)throw new Qe;return this.array_.pop()},Ke.prototype.peek=function(){if(0===this.array_.length)throw new Qe;return this.array_[this.array_.length-1]},Ke.prototype.empty=function(){return 0===this.array_.length},Ke.prototype.isEmpty=function(){return this.empty()},Ke.prototype.search=function(h){return this.array_.indexOf(h)},Ke.prototype.size=function(){return this.array_.length},Ke.prototype.toArray=function(){for(var h=[],d=0,m=this.array_.length;d<m;d++)h.push(this.array_[d]);return h};var zl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};zl.prototype.getCoordinate=function(){return this._minCoord},zl.prototype.getRightmostSide=function(h,d){var m=this.getRightmostSideOfSegment(h,d);return m<0&&(m=this.getRightmostSideOfSegment(h,d-1)),m<0&&(this._minCoord=null,this.checkForRightmostCoordinate(h)),m},zl.prototype.findRightmostEdgeAtVertex=function(){var h=this._minDe.getEdge().getCoordinates();ie.isTrue(this._minIndex>0&&this._minIndex<h.length,"rightmost point expected to be interior vertex of edge");var d=h[this._minIndex-1],m=h[this._minIndex+1],y=St.computeOrientation(this._minCoord,m,d),C=!1;(d.y<this._minCoord.y&&m.y<this._minCoord.y&&y===St.COUNTERCLOCKWISE||d.y>this._minCoord.y&&m.y>this._minCoord.y&&y===St.CLOCKWISE)&&(C=!0),C&&(this._minIndex=this._minIndex-1)},zl.prototype.getRightmostSideOfSegment=function(h,d){var m=h.getEdge().getCoordinates();if(d<0||d+1>=m.length||m[d].y===m[d+1].y)return-1;var y=pn.LEFT;return m[d].y<m[d+1].y&&(y=pn.RIGHT),y},zl.prototype.getEdge=function(){return this._orientedDe},zl.prototype.checkForRightmostCoordinate=function(h){for(var d=h.getEdge().getCoordinates(),m=0;m<d.length-1;m++)(null===this._minCoord||d[m].x>this._minCoord.x)&&(this._minDe=h,this._minIndex=m,this._minCoord=d[m])},zl.prototype.findRightmostEdgeAtNode=function(){var h=this._minDe.getNode().getEdges();this._minDe=h.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},zl.prototype.findEdge=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next();m.isForward()&&this.checkForRightmostCoordinate(m)}ie.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===pn.LEFT&&(this._orientedDe=this._minDe.getSym())},zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl};var _1=function(h){function d(m,y){h.call(this,d.msgWithCoord(m,y)),this.pt=y?new $(y):null,this.name="TopologyException"}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getCoordinate=function(){return this.pt},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.msgWithCoord=function(m,y){return y?m:m+" [ "+y+" ]"},d}(fe),tf=function(){this.array_=[]};tf.prototype.addLast=function(h){this.array_.push(h)},tf.prototype.removeFirst=function(){return this.array_.shift()},tf.prototype.isEmpty=function(){return 0===this.array_.length};var ma=function(){this._finder=null,this._dirEdgeList=new hn,this._nodes=new hn,this._rightMostCoord=null,this._env=null,this._finder=new zl};ma.prototype.clearVisitedEdges=function(){for(var h=this._dirEdgeList.iterator();h.hasNext();)h.next().setVisited(!1)},ma.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},ma.prototype.computeNodeDepth=function(h){for(var d=null,m=h.getEdges().iterator();m.hasNext();){var y=m.next();if(y.isVisited()||y.getSym().isVisited()){d=y;break}}if(null===d)throw new _1("unable to find edge to compute depths at "+h.getCoordinate());h.getEdges().computeDepths(d);for(var C=h.getEdges().iterator();C.hasNext();){var F=C.next();F.setVisited(!0),this.copySymDepths(F)}},ma.prototype.computeDepth=function(h){this.clearVisitedEdges();var d=this._finder.getEdge();d.setEdgeDepths(pn.RIGHT,h),this.copySymDepths(d),this.computeDepths(d)},ma.prototype.create=function(h){this.addReachable(h),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},ma.prototype.findResultEdges=function(){for(var h=this._dirEdgeList.iterator();h.hasNext();){var d=h.next();d.getDepth(pn.RIGHT)>=1&&d.getDepth(pn.LEFT)<=0&&!d.isInteriorAreaEdge()&&d.setInResult(!0)}},ma.prototype.computeDepths=function(h){var d=new Dd,m=new tf,y=h.getNode();for(m.addLast(y),d.add(y),h.setVisited(!0);!m.isEmpty();){var C=m.removeFirst();d.add(C),this.computeNodeDepth(C);for(var F=C.getEdges().iterator();F.hasNext();){var N=F.next().getSym();if(!N.isVisited()){var q=N.getNode();d.contains(q)||(m.addLast(q),d.add(q))}}}},ma.prototype.compareTo=function(h){return this._rightMostCoord.x<h._rightMostCoord.x?-1:this._rightMostCoord.x>h._rightMostCoord.x?1:0},ma.prototype.getEnvelope=function(){if(null===this._env){for(var h=new en,d=this._dirEdgeList.iterator();d.hasNext();)for(var m=d.next().getEdge().getCoordinates(),y=0;y<m.length-1;y++)h.expandToInclude(m[y]);this._env=h}return this._env},ma.prototype.addReachable=function(h){var d=new Ke;for(d.add(h);!d.empty();){var m=d.pop();this.add(m,d)}},ma.prototype.copySymDepths=function(h){var d=h.getSym();d.setDepth(pn.LEFT,h.getDepth(pn.RIGHT)),d.setDepth(pn.RIGHT,h.getDepth(pn.LEFT))},ma.prototype.add=function(h,d){h.setVisited(!0),this._nodes.add(h);for(var m=h.getEdges().iterator();m.hasNext();){var y=m.next();this._dirEdgeList.add(y);var C=y.getSym().getNode();C.isVisited()||d.push(C)}},ma.prototype.getNodes=function(){return this._nodes},ma.prototype.getDirectedEdges=function(){return this._dirEdgeList},ma.prototype.interfaces_=function(){return[te]},ma.prototype.getClass=function(){return ma};var ao=function h(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var m=arguments[0];this.init(1),this.location[pn.ON]=m}else if(arguments[0]instanceof h){var y=arguments[0];if(this.init(y.location.length),null!==y)for(var C=0;C<this.location.length;C++)this.location[C]=y.location[C]}}else if(3===arguments.length){var F=arguments[0],N=arguments[1],q=arguments[2];this.init(3),this.location[pn.ON]=F,this.location[pn.LEFT]=N,this.location[pn.RIGHT]=q}};ao.prototype.setAllLocations=function(h){for(var d=0;d<this.location.length;d++)this.location[d]=h},ao.prototype.isNull=function(){for(var h=0;h<this.location.length;h++)if(this.location[h]!==he.NONE)return!1;return!0},ao.prototype.setAllLocationsIfNull=function(h){for(var d=0;d<this.location.length;d++)this.location[d]===he.NONE&&(this.location[d]=h)},ao.prototype.isLine=function(){return 1===this.location.length},ao.prototype.merge=function(h){if(h.location.length>this.location.length){var d=new Array(3).fill(null);d[pn.ON]=this.location[pn.ON],d[pn.LEFT]=he.NONE,d[pn.RIGHT]=he.NONE,this.location=d}for(var m=0;m<this.location.length;m++)this.location[m]===he.NONE&&m<h.location.length&&(this.location[m]=h.location[m])},ao.prototype.getLocations=function(){return this.location},ao.prototype.flip=function(){if(this.location.length<=1)return null;var h=this.location[pn.LEFT];this.location[pn.LEFT]=this.location[pn.RIGHT],this.location[pn.RIGHT]=h},ao.prototype.toString=function(){var h=new Se;return this.location.length>1&&h.append(he.toLocationSymbol(this.location[pn.LEFT])),h.append(he.toLocationSymbol(this.location[pn.ON])),this.location.length>1&&h.append(he.toLocationSymbol(this.location[pn.RIGHT])),h.toString()},ao.prototype.setLocations=function(h,d,m){this.location[pn.ON]=h,this.location[pn.LEFT]=d,this.location[pn.RIGHT]=m},ao.prototype.get=function(h){return h<this.location.length?this.location[h]:he.NONE},ao.prototype.isArea=function(){return this.location.length>1},ao.prototype.isAnyNull=function(){for(var h=0;h<this.location.length;h++)if(this.location[h]===he.NONE)return!0;return!1},ao.prototype.setLocation=function(){1===arguments.length?this.setLocation(pn.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},ao.prototype.init=function(h){this.location=new Array(h).fill(null),this.setAllLocations(he.NONE)},ao.prototype.isEqualOnSide=function(h,d){return this.location[d]===h.location[d]},ao.prototype.allPositionsEqual=function(h){for(var d=0;d<this.location.length;d++)if(this.location[d]!==h)return!1;return!0},ao.prototype.interfaces_=function(){return[]},ao.prototype.getClass=function(){return ao};var Ts=function h(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var d=arguments[0];this.elt[0]=new ao(d),this.elt[1]=new ao(d)}else if(arguments[0]instanceof h){var m=arguments[0];this.elt[0]=new ao(m.elt[0]),this.elt[1]=new ao(m.elt[1])}}else if(2===arguments.length){var y=arguments[0],C=arguments[1];this.elt[0]=new ao(he.NONE),this.elt[1]=new ao(he.NONE),this.elt[y].setLocation(C)}else if(3===arguments.length){var F=arguments[0],N=arguments[1],q=arguments[2];this.elt[0]=new ao(F,N,q),this.elt[1]=new ao(F,N,q)}else if(4===arguments.length){var ye=arguments[0],je=arguments[1],yt=arguments[2],vt=arguments[3];this.elt[0]=new ao(he.NONE,he.NONE,he.NONE),this.elt[1]=new ao(he.NONE,he.NONE,he.NONE),this.elt[ye].setLocations(je,yt,vt)}};Ts.prototype.getGeometryCount=function(){var h=0;return this.elt[0].isNull()||h++,this.elt[1].isNull()||h++,h},Ts.prototype.setAllLocations=function(h,d){this.elt[h].setAllLocations(d)},Ts.prototype.isNull=function(h){return this.elt[h].isNull()},Ts.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var h=arguments[0];this.setAllLocationsIfNull(0,h),this.setAllLocationsIfNull(1,h)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},Ts.prototype.isLine=function(h){return this.elt[h].isLine()},Ts.prototype.merge=function(h){for(var d=0;d<2;d++)null===this.elt[d]&&null!==h.elt[d]?this.elt[d]=new ao(h.elt[d]):this.elt[d].merge(h.elt[d])},Ts.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Ts.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(pn.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},Ts.prototype.toString=function(){var h=new Se;return null!==this.elt[0]&&(h.append("A:"),h.append(this.elt[0].toString())),null!==this.elt[1]&&(h.append(" B:"),h.append(this.elt[1].toString())),h.toString()},Ts.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},Ts.prototype.isAnyNull=function(h){return this.elt[h].isAnyNull()},Ts.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(pn.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},Ts.prototype.isEqualOnSide=function(h,d){return this.elt[0].isEqualOnSide(h.elt[0],d)&&this.elt[1].isEqualOnSide(h.elt[1],d)},Ts.prototype.allPositionsEqual=function(h,d){return this.elt[h].allPositionsEqual(d)},Ts.prototype.toLine=function(h){this.elt[h].isArea()&&(this.elt[h]=new ao(this.elt[h].location[0]))},Ts.prototype.interfaces_=function(){return[]},Ts.prototype.getClass=function(){return Ts},Ts.toLineLabel=function(h){for(var d=new Ts(he.NONE),m=0;m<2;m++)d.setLocation(m,h.getLocation(m));return d};var la=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new hn,this._pts=new hn,this._label=new Ts(he.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new hn,this._geometryFactory=null;var h=arguments[0];this._geometryFactory=arguments[1],this.computePoints(h),this.computeRing()};la.prototype.computeRing=function(){if(null!==this._ring)return null;for(var h=new Array(this._pts.size()).fill(null),d=0;d<this._pts.size();d++)h[d]=this._pts.get(d);this._ring=this._geometryFactory.createLinearRing(h),this._isHole=St.isCCW(this._ring.getCoordinates())},la.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},la.prototype.computePoints=function(h){this._startDe=h;var d=h,m=!0;do{if(null===d)throw new _1("Found null DirectedEdge");if(d.getEdgeRing()===this)throw new _1("Directed Edge visited twice during ring-building at "+d.getCoordinate());this._edges.add(d);var y=d.getLabel();ie.isTrue(y.isArea()),this.mergeLabel(y),this.addPoints(d.getEdge(),d.isForward(),m),m=!1,this.setEdgeRing(d,this),d=this.getNext(d)}while(d!==this._startDe)},la.prototype.getLinearRing=function(){return this._ring},la.prototype.getCoordinate=function(h){return this._pts.get(h)},la.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var h=this._startDe;do{var d=h.getNode().getEdges().getOutgoingDegree(this);d>this._maxNodeDegree&&(this._maxNodeDegree=d),h=this.getNext(h)}while(h!==this._startDe);this._maxNodeDegree*=2},la.prototype.addPoints=function(h,d,m){var y=h.getCoordinates();if(d){var C=1;m&&(C=0);for(var F=C;F<y.length;F++)this._pts.add(y[F])}else{var N=y.length-2;m&&(N=y.length-1);for(var q=N;q>=0;q--)this._pts.add(y[q])}},la.prototype.isHole=function(){return this._isHole},la.prototype.setInResult=function(){var h=this._startDe;do{h.getEdge().setInResult(!0),h=h.getNext()}while(h!==this._startDe)},la.prototype.containsPoint=function(h){var d=this.getLinearRing();if(!d.getEnvelopeInternal().contains(h)||!St.isPointInRing(h,d.getCoordinates()))return!1;for(var m=this._holes.iterator();m.hasNext();)if(m.next().containsPoint(h))return!1;return!0},la.prototype.addHole=function(h){this._holes.add(h)},la.prototype.isShell=function(){return null===this._shell},la.prototype.getLabel=function(){return this._label},la.prototype.getEdges=function(){return this._edges},la.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},la.prototype.getShell=function(){return this._shell},la.prototype.mergeLabel=function(){if(1===arguments.length){var h=arguments[0];this.mergeLabel(h,0),this.mergeLabel(h,1)}else if(2===arguments.length){var m=arguments[1],y=arguments[0].getLocation(m,pn.RIGHT);if(y===he.NONE)return null;if(this._label.getLocation(m)===he.NONE)return this._label.setLocation(m,y),null}},la.prototype.setShell=function(h){this._shell=h,null!==h&&h.addHole(this)},la.prototype.toPolygon=function(h){for(var d=new Array(this._holes.size()).fill(null),m=0;m<this._holes.size();m++)d[m]=this._holes.get(m).getLinearRing();return h.createPolygon(this.getLinearRing(),d)},la.prototype.interfaces_=function(){return[]},la.prototype.getClass=function(){return la};var Bd=function(h){function d(){h.call(this,arguments[0],arguments[1])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.setEdgeRing=function(m,y){m.setMinEdgeRing(y)},d.prototype.getNext=function(m){return m.getNextMin()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(la),NA=function(h){function d(){h.call(this,arguments[0],arguments[1])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.buildMinimalRings=function(){var m=new hn,y=this._startDe;do{if(null===y.getMinEdgeRing()){var C=new Bd(y,this._geometryFactory);m.add(C)}y=y.getNext()}while(y!==this._startDe);return m},d.prototype.setEdgeRing=function(m,y){m.setEdgeRing(y)},d.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var m=this._startDe;do{m.getNode().getEdges().linkMinimalDirectedEdges(this),m=m.getNext()}while(m!==this._startDe)},d.prototype.getNext=function(m){return m.getNext()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(la),b2=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};b2.prototype.setVisited=function(h){this._isVisited=h},b2.prototype.setInResult=function(h){this._isInResult=h},b2.prototype.isCovered=function(){return this._isCovered},b2.prototype.isCoveredSet=function(){return this._isCoveredSet},b2.prototype.setLabel=function(h){this._label=h},b2.prototype.getLabel=function(){return this._label},b2.prototype.setCovered=function(h){this._isCovered=h,this._isCoveredSet=!0},b2.prototype.updateIM=function(h){ie.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(h)},b2.prototype.isInResult=function(){return this._isInResult},b2.prototype.isVisited=function(){return this._isVisited},b2.prototype.interfaces_=function(){return[]},b2.prototype.getClass=function(){return b2};var Ic=function(h){function d(){h.call(this),this._coord=null,this._edges=null;var y=arguments[1];this._coord=arguments[0],this._edges=y,this._label=new Ts(0,he.NONE)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isIncidentEdgeInResult=function(){for(var m=this.getEdges().getEdges().iterator();m.hasNext();)if(m.next().getEdge().isInResult())return!0;return!1},d.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},d.prototype.getCoordinate=function(){return this._coord},d.prototype.print=function(m){m.println("node "+this._coord+" lbl: "+this._label)},d.prototype.computeIM=function(m){},d.prototype.computeMergedLocation=function(m,y){var C=he.NONE;if(C=this._label.getLocation(y),!m.isNull(y)){var F=m.getLocation(y);C!==he.BOUNDARY&&(C=F)}return C},d.prototype.setLabel=function(){if(2!==arguments.length)return h.prototype.setLabel.apply(this,arguments);var m=arguments[0],y=arguments[1];null===this._label?this._label=new Ts(m,y):this._label.setLocation(m,y)},d.prototype.getEdges=function(){return this._edges},d.prototype.mergeLabel=function(){if(arguments[0]instanceof d)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof Ts)for(var y=arguments[0],C=0;C<2;C++){var F=this.computeMergedLocation(y,C);this._label.getLocation(C)===he.NONE&&this._label.setLocation(C,F)}},d.prototype.add=function(m){this._edges.insert(m),m.setNode(this)},d.prototype.setLabelBoundary=function(m){if(null===this._label)return null;var y=he.NONE;null!==this._label&&(y=this._label.getLocation(m)),this._label.setLocation(m,y===he.BOUNDARY?he.INTERIOR:he.BOUNDARY)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(b2),wr=function(){this.nodeMap=new ht,this.nodeFact=null,this.nodeFact=arguments[0]};wr.prototype.find=function(h){return this.nodeMap.get(h)},wr.prototype.addNode=function(){if(arguments[0]instanceof $){var h=arguments[0],d=this.nodeMap.get(h);return null===d&&(d=this.nodeFact.createNode(h),this.nodeMap.put(h,d)),d}if(arguments[0]instanceof Ic){var m=arguments[0],y=this.nodeMap.get(m.getCoordinate());return null===y?(this.nodeMap.put(m.getCoordinate(),m),m):(y.mergeLabel(m),y)}},wr.prototype.print=function(h){for(var d=this.iterator();d.hasNext();)d.next().print(h)},wr.prototype.iterator=function(){return this.nodeMap.values().iterator()},wr.prototype.values=function(){return this.nodeMap.values()},wr.prototype.getBoundaryNodes=function(h){for(var d=new hn,m=this.iterator();m.hasNext();){var y=m.next();y.getLabel().getLocation(h)===he.BOUNDARY&&d.add(y)}return d},wr.prototype.add=function(h){var d=h.getCoordinate();this.addNode(d).add(h)},wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr};var Ws=function(){},kd={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ws.prototype.interfaces_=function(){return[]},Ws.prototype.getClass=function(){return Ws},Ws.isNorthern=function(h){return h===Ws.NE||h===Ws.NW},Ws.isOpposite=function(h,d){return h!==d&&(h-d+4)%4==2},Ws.commonHalfPlane=function(h,d){if(h===d)return h;if((h-d+4)%4==2)return-1;var m=h<d?h:d;return 0===m&&3===(h>d?h:d)?3:m},Ws.isInHalfPlane=function(h,d){return d===Ws.SE?h===Ws.SE||h===Ws.SW:h===d||h===d+1},Ws.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1];if(0===h&&0===d)throw new Y("Cannot compute the quadrant for point ( "+h+", "+d+" )");return h>=0?d>=0?Ws.NE:Ws.SE:d>=0?Ws.NW:Ws.SW}if(arguments[0]instanceof $&&arguments[1]instanceof $){var m=arguments[0],y=arguments[1];if(y.x===m.x&&y.y===m.y)throw new Y("Cannot compute the quadrant for two identical points "+m);return y.x>=m.x?y.y>=m.y?Ws.NE:Ws.SE:y.y>=m.y?Ws.NW:Ws.SW}},kd.NE.get=function(){return 0},kd.NW.get=function(){return 1},kd.SW.get=function(){return 2},kd.SE.get=function(){return 3},Object.defineProperties(Ws,kd);var Po=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var m=arguments[1],y=arguments[2];this._edge=arguments[0],this.init(m,y),this._label=null}else if(4===arguments.length){var F=arguments[1],N=arguments[2],q=arguments[3];this._edge=arguments[0],this.init(F,N),this._label=q}};Po.prototype.compareDirection=function(h){return this._dx===h._dx&&this._dy===h._dy?0:this._quadrant>h._quadrant?1:this._quadrant<h._quadrant?-1:St.computeOrientation(h._p0,h._p1,this._p1)},Po.prototype.getDy=function(){return this._dy},Po.prototype.getCoordinate=function(){return this._p0},Po.prototype.setNode=function(h){this._node=h},Po.prototype.print=function(h){var d=Math.atan2(this._dy,this._dx),m=this.getClass().getName(),y=m.lastIndexOf("."),C=m.substring(y+1);h.print("  "+C+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+d+"   "+this._label)},Po.prototype.compareTo=function(h){return this.compareDirection(h)},Po.prototype.getDirectedCoordinate=function(){return this._p1},Po.prototype.getDx=function(){return this._dx},Po.prototype.getLabel=function(){return this._label},Po.prototype.getEdge=function(){return this._edge},Po.prototype.getQuadrant=function(){return this._quadrant},Po.prototype.getNode=function(){return this._node},Po.prototype.toString=function(){var h=Math.atan2(this._dy,this._dx),d=this.getClass().getName(),m=d.lastIndexOf(".");return"  "+d.substring(m+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+h+"   "+this._label},Po.prototype.computeLabel=function(h){},Po.prototype.init=function(h,d){this._p0=h,this._p1=d,this._dx=d.x-h.x,this._dy=d.y-h.y,this._quadrant=Ws.quadrant(this._dx,this._dy),ie.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Po.prototype.interfaces_=function(){return[te]},Po.prototype.getClass=function(){return Po};var Rt=function(h){function d(){var m=arguments[0],y=arguments[1];if(h.call(this,m),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=y,y)this.init(m.getCoordinate(0),m.getCoordinate(1));else{var C=m.getNumPoints()-1;this.init(m.getCoordinate(C),m.getCoordinate(C-1))}this.computeDirectedLabel()}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getNextMin=function(){return this._nextMin},d.prototype.getDepth=function(m){return this._depth[m]},d.prototype.setVisited=function(m){this._isVisited=m},d.prototype.computeDirectedLabel=function(){this._label=new Ts(this._edge.getLabel()),this._isForward||this._label.flip()},d.prototype.getNext=function(){return this._next},d.prototype.setDepth=function(m,y){if(-999!==this._depth[m]&&this._depth[m]!==y)throw new _1("assigned depths do not match",this.getCoordinate());this._depth[m]=y},d.prototype.isInteriorAreaEdge=function(){for(var m=!0,y=0;y<2;y++)this._label.isArea(y)&&this._label.getLocation(y,pn.LEFT)===he.INTERIOR&&this._label.getLocation(y,pn.RIGHT)===he.INTERIOR||(m=!1);return m},d.prototype.setNextMin=function(m){this._nextMin=m},d.prototype.print=function(m){h.prototype.print.call(this,m),m.print(" "+this._depth[pn.LEFT]+"/"+this._depth[pn.RIGHT]),m.print(" ("+this.getDepthDelta()+")"),this._isInResult&&m.print(" inResult")},d.prototype.setMinEdgeRing=function(m){this._minEdgeRing=m},d.prototype.isLineEdge=function(){var m=this._label.isLine(0)||this._label.isLine(1),y=!this._label.isArea(0)||this._label.allPositionsEqual(0,he.EXTERIOR),C=!this._label.isArea(1)||this._label.allPositionsEqual(1,he.EXTERIOR);return m&&y&&C},d.prototype.setEdgeRing=function(m){this._edgeRing=m},d.prototype.getMinEdgeRing=function(){return this._minEdgeRing},d.prototype.getDepthDelta=function(){var m=this._edge.getDepthDelta();return this._isForward||(m=-m),m},d.prototype.setInResult=function(m){this._isInResult=m},d.prototype.getSym=function(){return this._sym},d.prototype.isForward=function(){return this._isForward},d.prototype.getEdge=function(){return this._edge},d.prototype.printEdge=function(m){this.print(m),m.print(" "),this._isForward?this._edge.print(m):this._edge.printReverse(m)},d.prototype.setSym=function(m){this._sym=m},d.prototype.setVisitedEdge=function(m){this.setVisited(m),this._sym.setVisited(m)},d.prototype.setEdgeDepths=function(m,y){var C=this.getEdge().getDepthDelta();this._isForward||(C=-C);var F=1;m===pn.LEFT&&(F=-1);var N=pn.opposite(m),q=y+C*F;this.setDepth(m,y),this.setDepth(N,q)},d.prototype.getEdgeRing=function(){return this._edgeRing},d.prototype.isInResult=function(){return this._isInResult},d.prototype.setNext=function(m){this._next=m},d.prototype.isVisited=function(){return this._isVisited},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.depthFactor=function(m,y){return m===he.EXTERIOR&&y===he.INTERIOR?1:m===he.INTERIOR&&y===he.EXTERIOR?-1:0},d}(Po),V4=function(){};V4.prototype.createNode=function(h){return new Ic(h,null)},V4.prototype.interfaces_=function(){return[]},V4.prototype.getClass=function(){return V4};var xn=function(){this._edges=new hn,this._nodes=null,this._edgeEndList=new hn,0===arguments.length?this._nodes=new wr(new V4):1===arguments.length&&(this._nodes=new wr(arguments[0]))};xn.prototype.printEdges=function(h){h.println("Edges:");for(var d=0;d<this._edges.size();d++){h.println("edge "+d+":");var m=this._edges.get(d);m.print(h),m.eiList.print(h)}},xn.prototype.find=function(h){return this._nodes.find(h)},xn.prototype.addNode=function(){return arguments[0]instanceof Ic||arguments[0]instanceof $?this._nodes.addNode(arguments[0]):void 0},xn.prototype.getNodeIterator=function(){return this._nodes.iterator()},xn.prototype.linkResultDirectedEdges=function(){for(var h=this._nodes.iterator();h.hasNext();)h.next().getEdges().linkResultDirectedEdges()},xn.prototype.debugPrintln=function(h){Ut.out.println(h)},xn.prototype.isBoundaryNode=function(h,d){var m=this._nodes.find(d);if(null===m)return!1;var y=m.getLabel();return null!==y&&y.getLocation(h)===he.BOUNDARY},xn.prototype.linkAllDirectedEdges=function(){for(var h=this._nodes.iterator();h.hasNext();)h.next().getEdges().linkAllDirectedEdges()},xn.prototype.matchInSameDirection=function(h,d,m,y){return!!h.equals(m)&&St.computeOrientation(h,d,y)===St.COLLINEAR&&Ws.quadrant(h,d)===Ws.quadrant(m,y)},xn.prototype.getEdgeEnds=function(){return this._edgeEndList},xn.prototype.debugPrint=function(h){Ut.out.print(h)},xn.prototype.getEdgeIterator=function(){return this._edges.iterator()},xn.prototype.findEdgeInSameDirection=function(h,d){for(var m=0;m<this._edges.size();m++){var y=this._edges.get(m),C=y.getCoordinates();if(this.matchInSameDirection(h,d,C[0],C[1])||this.matchInSameDirection(h,d,C[C.length-1],C[C.length-2]))return y}return null},xn.prototype.insertEdge=function(h){this._edges.add(h)},xn.prototype.findEdgeEnd=function(h){for(var d=this.getEdgeEnds().iterator();d.hasNext();){var m=d.next();if(m.getEdge()===h)return m}return null},xn.prototype.addEdges=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next();this._edges.add(m);var y=new Rt(m,!0),C=new Rt(m,!1);y.setSym(C),C.setSym(y),this.add(y),this.add(C)}},xn.prototype.add=function(h){this._nodes.add(h),this._edgeEndList.add(h)},xn.prototype.getNodes=function(){return this._nodes.values()},xn.prototype.findEdge=function(h,d){for(var m=0;m<this._edges.size();m++){var y=this._edges.get(m),C=y.getCoordinates();if(h.equals(C[0])&&d.equals(C[1]))return y}return null},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn},xn.linkResultDirectedEdges=function(h){for(var d=h.iterator();d.hasNext();)d.next().getEdges().linkResultDirectedEdges()};var y1=function(){this._geometryFactory=null,this._shellList=new hn,this._geometryFactory=arguments[0]};y1.prototype.sortShellsAndHoles=function(h,d,m){for(var y=h.iterator();y.hasNext();){var C=y.next();C.isHole()?m.add(C):d.add(C)}},y1.prototype.computePolygons=function(h){for(var d=new hn,m=h.iterator();m.hasNext();){var y=m.next().toPolygon(this._geometryFactory);d.add(y)}return d},y1.prototype.placeFreeHoles=function(h,d){for(var m=d.iterator();m.hasNext();){var y=m.next();if(null===y.getShell()){var C=this.findEdgeRingContaining(y,h);if(null===C)throw new _1("unable to assign hole to a shell",y.getCoordinate(0));y.setShell(C)}}},y1.prototype.buildMinimalEdgeRings=function(h,d,m){for(var y=new hn,C=h.iterator();C.hasNext();){var F=C.next();if(F.getMaxNodeDegree()>2){F.linkDirectedEdgesForMinimalEdgeRings();var N=F.buildMinimalRings(),q=this.findShell(N);null!==q?(this.placePolygonHoles(q,N),d.add(q)):m.addAll(N)}else y.add(F)}return y},y1.prototype.containsPoint=function(h){for(var d=this._shellList.iterator();d.hasNext();)if(d.next().containsPoint(h))return!0;return!1},y1.prototype.buildMaximalEdgeRings=function(h){for(var d=new hn,m=h.iterator();m.hasNext();){var y=m.next();if(y.isInResult()&&y.getLabel().isArea()&&null===y.getEdgeRing()){var C=new NA(y,this._geometryFactory);d.add(C),C.setInResult()}}return d},y1.prototype.placePolygonHoles=function(h,d){for(var m=d.iterator();m.hasNext();){var y=m.next();y.isHole()&&y.setShell(h)}},y1.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},y1.prototype.findEdgeRingContaining=function(h,d){for(var m=h.getLinearRing(),y=m.getEnvelopeInternal(),C=m.getCoordinateN(0),F=null,N=null,q=d.iterator();q.hasNext();){var ye=q.next(),je=ye.getLinearRing(),yt=je.getEnvelopeInternal();null!==F&&(N=F.getLinearRing().getEnvelopeInternal());var vt=!1;yt.contains(y)&&St.isPointInRing(C,je.getCoordinates())&&(vt=!0),vt&&(null===F||N.contains(yt))&&(F=ye)}return F},y1.prototype.findShell=function(h){for(var d=0,m=null,y=h.iterator();y.hasNext();){var C=y.next();C.isHole()||(m=C,d++)}return ie.isTrue(d<=1,"found two shells in MinimalEdgeRing list"),m},y1.prototype.add=function(){if(1===arguments.length){var h=arguments[0];this.add(h.getEdgeEnds(),h.getNodes())}else if(2===arguments.length){var d=arguments[0];xn.linkResultDirectedEdges(arguments[1]);var y=this.buildMaximalEdgeRings(d),C=new hn,F=this.buildMinimalEdgeRings(y,this._shellList,C);this.sortShellsAndHoles(F,this._shellList,C),this.placeFreeHoles(this._shellList,C)}},y1.prototype.interfaces_=function(){return[]},y1.prototype.getClass=function(){return y1};var Qh=function(){};Qh.prototype.getBounds=function(){},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh};var x2=function(){this._bounds=null,this._item=null;var d=arguments[1];this._bounds=arguments[0],this._item=d};x2.prototype.getItem=function(){return this._item},x2.prototype.getBounds=function(){return this._bounds},x2.prototype.interfaces_=function(){return[Qh,ee]},x2.prototype.getClass=function(){return x2};var Ol=function(){this._size=null,this._items=null,this._size=0,this._items=new hn,this._items.add(null)};Ol.prototype.poll=function(){if(this.isEmpty())return null;var h=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),h},Ol.prototype.size=function(){return this._size},Ol.prototype.reorder=function(h){for(var d=null,m=this._items.get(h);2*h<=this._size&&((d=2*h)!==this._size&&this._items.get(d+1).compareTo(this._items.get(d))<0&&d++,this._items.get(d).compareTo(m)<0);h=d)this._items.set(h,this._items.get(d));this._items.set(h,m)},Ol.prototype.clear=function(){this._size=0,this._items.clear()},Ol.prototype.isEmpty=function(){return 0===this._size},Ol.prototype.add=function(h){this._items.add(null),this._size+=1;var d=this._size;for(this._items.set(0,h);h.compareTo(this._items.get(Math.trunc(d/2)))<0;d/=2)this._items.set(d,this._items.get(Math.trunc(d/2)));this._items.set(d,h)},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol};var S3=function(){};S3.prototype.visitItem=function(h){},S3.prototype.interfaces_=function(){return[]},S3.prototype.getClass=function(){return S3};var hu=function(){};hu.prototype.insert=function(h,d){},hu.prototype.remove=function(h,d){},hu.prototype.query=function(){},hu.prototype.interfaces_=function(){return[]},hu.prototype.getClass=function(){return hu};var Go=function(){this._childBoundables=new hn,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},Fd={serialVersionUID:{configurable:!0}};Go.prototype.getLevel=function(){return this._level},Go.prototype.size=function(){return this._childBoundables.size()},Go.prototype.getChildBoundables=function(){return this._childBoundables},Go.prototype.addChildBoundable=function(h){ie.isTrue(null===this._bounds),this._childBoundables.add(h)},Go.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Go.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Go.prototype.interfaces_=function(){return[Qh,ee]},Go.prototype.getClass=function(){return Go},Fd.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Go,Fd);var mo=function(){};mo.reverseOrder=function(){return{compare:function(h,d){return d.compareTo(h)}}},mo.min=function(h){return mo.sort(h),h.get(0)},mo.sort=function(h,d){var m=h.toArray();d?x3.sort(m,d):x3.sort(m);for(var y=h.iterator(),C=0,F=m.length;C<F;C++)y.next(),y.set(m[C])},mo.singletonList=function(h){var d=new hn;return d.add(h),d};var ua=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var d=arguments[1],m=arguments[2];this._boundable1=arguments[0],this._boundable2=d,this._itemDistance=m,this._distance=this.distance()};ua.prototype.expandToQueue=function(h,d){var m=ua.isComposite(this._boundable1),y=ua.isComposite(this._boundable2);if(m&&y)return ua.area(this._boundable1)>ua.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,h,d),null):(this.expand(this._boundable2,this._boundable1,h,d),null);if(m)return this.expand(this._boundable1,this._boundable2,h,d),null;if(y)return this.expand(this._boundable2,this._boundable1,h,d),null;throw new Y("neither boundable is composite")},ua.prototype.isLeaves=function(){return!(ua.isComposite(this._boundable1)||ua.isComposite(this._boundable2))},ua.prototype.compareTo=function(h){return this._distance<h._distance?-1:this._distance>h._distance?1:0},ua.prototype.expand=function(h,d,m,y){for(var C=h.getChildBoundables().iterator();C.hasNext();){var F=C.next(),N=new ua(F,d,this._itemDistance);N.getDistance()<y&&m.add(N)}},ua.prototype.getBoundable=function(h){return 0===h?this._boundable1:this._boundable2},ua.prototype.getDistance=function(){return this._distance},ua.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},ua.prototype.interfaces_=function(){return[te]},ua.prototype.getClass=function(){return ua},ua.area=function(h){return h.getBounds().getArea()},ua.isComposite=function(h){return h instanceof Go};var Gn=function h(){if(this._root=null,this._built=!1,this._itemBoundables=new hn,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=h.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var m=arguments[0];ie.isTrue(m>1,"Node capacity must be greater than 1"),this._nodeCapacity=m}},Wh={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Gn.prototype.getNodeCapacity=function(){return this._nodeCapacity},Gn.prototype.lastNode=function(h){return h.get(h.size()-1)},Gn.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var h=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var m=d.next();m instanceof Go?h+=this.size(m):m instanceof x2&&(h+=1)}return h}},Gn.prototype.removeItem=function(h,d){for(var m=null,y=h.getChildBoundables().iterator();y.hasNext();){var C=y.next();C instanceof x2&&C.getItem()===d&&(m=C)}return null!==m&&(h.getChildBoundables().remove(m),!0)},Gn.prototype.itemsTree=function(){if(0===arguments.length){this.build();var h=this.itemsTree(this._root);return null===h?new hn:h}if(1===arguments.length){for(var d=arguments[0],m=new hn,y=d.getChildBoundables().iterator();y.hasNext();){var C=y.next();if(C instanceof Go){var F=this.itemsTree(C);null!==F&&m.add(F)}else C instanceof x2?m.add(C.getItem()):ie.shouldNeverReachHere()}return m.size()<=0?null:m}},Gn.prototype.insert=function(h,d){ie.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new x2(h,d))},Gn.prototype.boundablesAtLevel=function(){if(1===arguments.length){var h=arguments[0],d=new hn;return this.boundablesAtLevel(h,this._root,d),d}if(3===arguments.length){var m=arguments[0],y=arguments[1],C=arguments[2];if(ie.isTrue(m>-2),y.getLevel()===m)return C.add(y),null;for(var F=y.getChildBoundables().iterator();F.hasNext();){var N=F.next();N instanceof Go?this.boundablesAtLevel(m,N,C):(ie.isTrue(N instanceof x2),-1===m&&C.add(N))}return null}},Gn.prototype.query=function(){if(1===arguments.length){var h=arguments[0];this.build();var d=new hn;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),h)&&this.query(h,this._root,d),d}if(2===arguments.length){var m=arguments[0],y=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),m)&&this.query(m,this._root,y)}else if(3===arguments.length)if(bt(arguments[2],S3)&&arguments[0]instanceof Object&&arguments[1]instanceof Go)for(var C=arguments[0],N=arguments[2],q=arguments[1].getChildBoundables(),ye=0;ye<q.size();ye++){var je=q.get(ye);this.getIntersectsOp().intersects(je.getBounds(),C)&&(je instanceof Go?this.query(C,je,N):je instanceof x2?N.visitItem(je.getItem()):ie.shouldNeverReachHere())}else if(bt(arguments[2],aa)&&arguments[0]instanceof Object&&arguments[1]instanceof Go)for(var yt=arguments[0],gn=arguments[2],En=arguments[1].getChildBoundables(),Pn=0;Pn<En.size();Pn++){var ri=En.get(Pn);this.getIntersectsOp().intersects(ri.getBounds(),yt)&&(ri instanceof Go?this.query(yt,ri,gn):ri instanceof x2?gn.add(ri.getItem()):ie.shouldNeverReachHere())}},Gn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Gn.prototype.getRoot=function(){return this.build(),this._root},Gn.prototype.remove=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),h)&&this.remove(h,this._root,d)}if(3===arguments.length){var m=arguments[0],y=arguments[1],C=arguments[2],F=this.removeItem(y,C);if(F)return!0;for(var N=null,q=y.getChildBoundables().iterator();q.hasNext();){var ye=q.next();if(this.getIntersectsOp().intersects(ye.getBounds(),m)&&ye instanceof Go&&(F=this.remove(m,ye,C))){N=ye;break}}return null!==N&&N.getChildBoundables().isEmpty()&&y.getChildBoundables().remove(N),F}},Gn.prototype.createHigherLevels=function(h,d){ie.isTrue(!h.isEmpty());var m=this.createParentBoundables(h,d+1);return 1===m.size()?m.get(0):this.createHigherLevels(m,d+1)},Gn.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var h=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var m=d.next();if(m instanceof Go){var y=this.depth(m);y>h&&(h=y)}}return h+1}},Gn.prototype.createParentBoundables=function(h,d){ie.isTrue(!h.isEmpty());var m=new hn;m.add(this.createNode(d));var y=new hn(h);mo.sort(y,this.getComparator());for(var C=y.iterator();C.hasNext();){var F=C.next();this.lastNode(m).getChildBoundables().size()===this.getNodeCapacity()&&m.add(this.createNode(d)),this.lastNode(m).addChildBoundable(F)}return m},Gn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Gn.prototype.interfaces_=function(){return[ee]},Gn.prototype.getClass=function(){return Gn},Gn.compareDoubles=function(h,d){return h>d?1:h<d?-1:0},Wh.IntersectsOp.get=function(){return VA},Wh.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Wh.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Gn,Wh);var VA=function(){},hc=function(){};hc.prototype.distance=function(h,d){},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc};var C8=function(h){function d(y){h.call(this,y=y||d.DEFAULT_NODE_CAPACITY)}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return d.prototype.createParentBoundablesFromVerticalSlices=function(y,C){ie.isTrue(y.length>0);for(var F=new hn,N=0;N<y.length;N++)F.addAll(this.createParentBoundablesFromVerticalSlice(y[N],C));return F},d.prototype.createNode=function(y){return new Pd(y)},d.prototype.size=function(){return 0===arguments.length?h.prototype.size.call(this):h.prototype.size.apply(this,arguments)},d.prototype.insert=function(){if(2!==arguments.length)return h.prototype.insert.apply(this,arguments);var y=arguments[0],C=arguments[1];if(y.isNull())return null;h.prototype.insert.call(this,y,C)},d.prototype.getIntersectsOp=function(){return d.intersectsOp},d.prototype.verticalSlices=function(y,C){for(var F=Math.trunc(Math.ceil(y.size()/C)),N=new Array(C).fill(null),q=y.iterator(),ye=0;ye<C;ye++){N[ye]=new hn;for(var je=0;q.hasNext()&&je<F;){var yt=q.next();N[ye].add(yt),je++}}return N},d.prototype.query=function(){if(1===arguments.length)return h.prototype.query.call(this,arguments[0]);2===arguments.length?h.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(bt(arguments[2],S3)&&arguments[0]instanceof Object&&arguments[1]instanceof Go||bt(arguments[2],aa)&&arguments[0]instanceof Object&&arguments[1]instanceof Go)&&h.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},d.prototype.getComparator=function(){return d.yComparator},d.prototype.createParentBoundablesFromVerticalSlice=function(y,C){return h.prototype.createParentBoundables.call(this,y,C)},d.prototype.remove=function(){return 2===arguments.length?h.prototype.remove.call(this,arguments[0],arguments[1]):h.prototype.remove.apply(this,arguments)},d.prototype.depth=function(){return 0===arguments.length?h.prototype.depth.call(this):h.prototype.depth.apply(this,arguments)},d.prototype.createParentBoundables=function(y,C){ie.isTrue(!y.isEmpty());var F=Math.trunc(Math.ceil(y.size()/this.getNodeCapacity())),N=new hn(y);mo.sort(N,d.xComparator);var q=this.verticalSlices(N,Math.trunc(Math.ceil(Math.sqrt(F))));return this.createParentBoundablesFromVerticalSlices(q,C)},d.prototype.nearestNeighbour=function(){if(1===arguments.length){if(bt(arguments[0],hc)){var y=arguments[0],C=new ua(this.getRoot(),this.getRoot(),y);return this.nearestNeighbour(C)}if(arguments[0]instanceof ua)return this.nearestNeighbour(arguments[0],Z.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof d&&bt(arguments[1],hc)){var N=arguments[0],q=arguments[1],ye=new ua(this.getRoot(),N.getRoot(),q);return this.nearestNeighbour(ye)}if(arguments[0]instanceof ua&&"number"==typeof arguments[1]){var je=arguments[0],yt=arguments[1],vt=null,gn=new Ol;for(gn.add(je);!gn.isEmpty()&&yt>0;){var En=gn.poll(),Pn=En.getDistance();if(Pn>=yt)break;En.isLeaves()?(yt=Pn,vt=En):En.expandToQueue(gn,yt)}return[vt.getBoundable(0).getItem(),vt.getBoundable(1).getItem()]}}else if(3===arguments.length){var Zo=arguments[2],S1=new x2(arguments[0],arguments[1]),Gl=new ua(this.getRoot(),S1,Zo);return this.nearestNeighbour(Gl)[0]}},d.prototype.interfaces_=function(){return[hu,ee]},d.prototype.getClass=function(){return d},d.centreX=function(y){return d.avg(y.getMinX(),y.getMaxX())},d.avg=function(y,C){return(y+C)/2},d.centreY=function(y){return d.avg(y.getMinY(),y.getMaxY())},m.STRtreeNode.get=function(){return Pd},m.serialVersionUID.get=function(){return 0x39920f7d5f261e0},m.xComparator.get=function(){return{interfaces_:function(){return[ce]},compare:function(y,C){return h.compareDoubles(d.centreX(y.getBounds()),d.centreX(C.getBounds()))}}},m.yComparator.get=function(){return{interfaces_:function(){return[ce]},compare:function(y,C){return h.compareDoubles(d.centreY(y.getBounds()),d.centreY(C.getBounds()))}}},m.intersectsOp.get=function(){return{interfaces_:function(){return[h.IntersectsOp]},intersects:function(y,C){return y.intersects(C)}}},m.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(d,m),d}(Gn),Pd=function(h){function d(){h.call(this,arguments[0])}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.computeBounds=function(){for(var m=null,y=this.getChildBoundables().iterator();y.hasNext();){var C=y.next();null===m?m=new en(C.getBounds()):m.expandToInclude(C.getBounds())}return m},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Go),Ho=function(){};Ho.prototype.interfaces_=function(){return[]},Ho.prototype.getClass=function(){return Ho},Ho.relativeSign=function(h,d){return h<d?-1:h>d?1:0},Ho.compare=function(h,d,m){if(d.equals2D(m))return 0;var y=Ho.relativeSign(d.x,m.x),C=Ho.relativeSign(d.y,m.y);switch(h){case 0:return Ho.compareValue(y,C);case 1:return Ho.compareValue(C,y);case 2:return Ho.compareValue(C,-y);case 3:return Ho.compareValue(-y,C);case 4:return Ho.compareValue(-y,-C);case 5:return Ho.compareValue(-C,-y);case 6:return Ho.compareValue(-C,y);case 7:return Ho.compareValue(y,-C)}return ie.shouldNeverReachHere("invalid octant value"),0},Ho.compareValue=function(h,d){return h<0?-1:h>0?1:d<0?-1:d>0?1:0};var Ya=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var h=arguments[0],d=arguments[1],m=arguments[2],y=arguments[3];this._segString=h,this.coord=new $(d),this.segmentIndex=m,this._segmentOctant=y,this._isInterior=!d.equals2D(h.getCoordinate(m))};Ya.prototype.getCoordinate=function(){return this.coord},Ya.prototype.print=function(h){h.print(this.coord),h.print(" seg # = "+this.segmentIndex)},Ya.prototype.compareTo=function(h){var d=h;return this.segmentIndex<d.segmentIndex?-1:this.segmentIndex>d.segmentIndex?1:this.coord.equals2D(d.coord)?0:Ho.compare(this._segmentOctant,this.coord,d.coord)},Ya.prototype.isEndPoint=function(h){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===h},Ya.prototype.isInterior=function(){return this._isInterior},Ya.prototype.interfaces_=function(){return[te]},Ya.prototype.getClass=function(){return Ya};var fc=function(){this._nodeMap=new ht,this._edge=null,this._edge=arguments[0]};fc.prototype.getSplitCoordinates=function(){var h=new Tc;this.addEndpoints();for(var d=this.iterator(),m=d.next();d.hasNext();){var y=d.next();this.addEdgeCoordinates(m,y,h),m=y}return h.toCoordinateArray()},fc.prototype.addCollapsedNodes=function(){var h=new hn;this.findCollapsesFromInsertedNodes(h),this.findCollapsesFromExistingVertices(h);for(var d=h.iterator();d.hasNext();){var m=d.next().intValue();this.add(this._edge.getCoordinate(m),m)}},fc.prototype.print=function(h){h.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(h)},fc.prototype.findCollapsesFromExistingVertices=function(h){for(var d=0;d<this._edge.size()-2;d++){var m=this._edge.getCoordinate(d),y=this._edge.getCoordinate(d+2);m.equals2D(y)&&h.add(new Re(d+1))}},fc.prototype.addEdgeCoordinates=function(h,d,m){var y=this._edge.getCoordinate(d.segmentIndex),C=d.isInterior()||!d.coord.equals2D(y);m.add(new $(h.coord),!1);for(var F=h.segmentIndex+1;F<=d.segmentIndex;F++)m.add(this._edge.getCoordinate(F));C&&m.add(new $(d.coord))},fc.prototype.iterator=function(){return this._nodeMap.values().iterator()},fc.prototype.addSplitEdges=function(h){this.addEndpoints(),this.addCollapsedNodes();for(var d=this.iterator(),m=d.next();d.hasNext();){var y=d.next(),C=this.createSplitEdge(m,y);h.add(C),m=y}},fc.prototype.findCollapseIndex=function(h,d,m){if(!h.coord.equals2D(d.coord))return!1;var y=d.segmentIndex-h.segmentIndex;return d.isInterior()||y--,1===y&&(m[0]=h.segmentIndex+1,!0)},fc.prototype.findCollapsesFromInsertedNodes=function(h){for(var d=new Array(1).fill(null),m=this.iterator(),y=m.next();m.hasNext();){var C=m.next();this.findCollapseIndex(y,C,d)&&h.add(new Re(d[0])),y=C}},fc.prototype.getEdge=function(){return this._edge},fc.prototype.addEndpoints=function(){var h=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(h),h)},fc.prototype.createSplitEdge=function(h,d){var m=d.segmentIndex-h.segmentIndex+2,y=this._edge.getCoordinate(d.segmentIndex),C=d.isInterior()||!d.coord.equals2D(y);C||m--;var F=new Array(m).fill(null),N=0;F[N++]=new $(h.coord);for(var q=h.segmentIndex+1;q<=d.segmentIndex;q++)F[N++]=this._edge.getCoordinate(q);return C&&(F[N]=new $(d.coord)),new fa(F,this._edge.getData())},fc.prototype.add=function(h,d){var m=new Ya(this._edge,h,d,this._edge.getSegmentOctant(d)),y=this._nodeMap.get(m);return null!==y?(ie.isTrue(y.coord.equals2D(h),"Found equal nodes with different coordinates"),y):(this._nodeMap.put(m,m),m)},fc.prototype.checkSplitEdgesCorrectness=function(h){var d=this._edge.getCoordinates(),m=h.get(0).getCoordinate(0);if(!m.equals2D(d[0]))throw new fe("bad split edge start point at "+m);var y=h.get(h.size()-1).getCoordinates(),C=y[y.length-1];if(!C.equals2D(d[d.length-1]))throw new fe("bad split edge end point at "+C)},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var G2=function(){};G2.prototype.interfaces_=function(){return[]},G2.prototype.getClass=function(){return G2},G2.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var h=arguments[0],d=arguments[1];if(0===h&&0===d)throw new Y("Cannot compute the octant for point ( "+h+", "+d+" )");var m=Math.abs(h),y=Math.abs(d);return h>=0?d>=0?m>=y?0:1:m>=y?7:6:d>=0?m>=y?3:2:m>=y?4:5}if(arguments[0]instanceof $&&arguments[1]instanceof $){var C=arguments[0],F=arguments[1],N=F.x-C.x,q=F.y-C.y;if(0===N&&0===q)throw new Y("Cannot compute the octant for two identical points "+C);return G2.octant(N,q)}};var ha=function(){};ha.prototype.getCoordinates=function(){},ha.prototype.size=function(){},ha.prototype.getCoordinate=function(h){},ha.prototype.isClosed=function(){},ha.prototype.setData=function(h){},ha.prototype.getData=function(){},ha.prototype.interfaces_=function(){return[]},ha.prototype.getClass=function(){return ha};var zs=function(){};zs.prototype.addIntersection=function(h,d){},zs.prototype.interfaces_=function(){return[ha]},zs.prototype.getClass=function(){return zs};var fa=function(){this._nodeList=new fc(this),this._pts=null,this._data=null;var d=arguments[1];this._pts=arguments[0],this._data=d};fa.prototype.getCoordinates=function(){return this._pts},fa.prototype.size=function(){return this._pts.length},fa.prototype.getCoordinate=function(h){return this._pts[h]},fa.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fa.prototype.getSegmentOctant=function(h){return h===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(h),this.getCoordinate(h+1))},fa.prototype.setData=function(h){this._data=h},fa.prototype.safeOctant=function(h,d){return h.equals2D(d)?0:G2.octant(h,d)},fa.prototype.getData=function(){return this._data},fa.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var y=arguments[1],F=new $(arguments[0].getIntersection(arguments[3]));this.addIntersection(F,y)}},fa.prototype.toString=function(){return it.toLineString(new Fo(this._pts))},fa.prototype.getNodeList=function(){return this._nodeList},fa.prototype.addIntersectionNode=function(h,d){var m=d,y=m+1;return y<this._pts.length&&h.equals2D(this._pts[y])&&(m=y),this._nodeList.add(h,m)},fa.prototype.addIntersections=function(h,d,m){for(var y=0;y<h.getIntersectionNum();y++)this.addIntersection(h,d,m,y)},fa.prototype.interfaces_=function(){return[zs]},fa.prototype.getClass=function(){return fa},fa.getNodedSubstrings=function(){if(1===arguments.length){var h=arguments[0],d=new hn;return fa.getNodedSubstrings(h,d),d}if(2===arguments.length)for(var y=arguments[1],C=arguments[0].iterator();C.hasNext();)C.next().getNodeList().addSplitEdges(y)};var gi=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new $,this.p1=new $;else if(1===arguments.length){var h=arguments[0];this.p0=new $(h.p0),this.p1=new $(h.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var y=arguments[2],C=arguments[3];this.p0=new $(arguments[0],arguments[1]),this.p1=new $(y,C)}},U4={serialVersionUID:{configurable:!0}};gi.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gi.prototype.orientationIndex=function(){if(arguments[0]instanceof gi){var h=arguments[0],d=St.orientationIndex(this.p0,this.p1,h.p0),m=St.orientationIndex(this.p0,this.p1,h.p1);return d>=0&&m>=0||d<=0&&m<=0?Math.max(d,m):0}if(arguments[0]instanceof $)return St.orientationIndex(this.p0,this.p1,arguments[0])},gi.prototype.toGeometry=function(h){return h.createLineString([this.p0,this.p1])},gi.prototype.isVertical=function(){return this.p0.x===this.p1.x},gi.prototype.equals=function(h){if(!(h instanceof gi))return!1;var d=h;return this.p0.equals(d.p0)&&this.p1.equals(d.p1)},gi.prototype.intersection=function(h){var d=new xt;return d.computeIntersection(this.p0,this.p1,h.p0,h.p1),d.hasIntersection()?d.getIntersection(0):null},gi.prototype.project=function(){if(arguments[0]instanceof $){var h=arguments[0];if(h.equals(this.p0)||h.equals(this.p1))return new $(h);var d=this.projectionFactor(h),m=new $;return m.x=this.p0.x+d*(this.p1.x-this.p0.x),m.y=this.p0.y+d*(this.p1.y-this.p0.y),m}if(arguments[0]instanceof gi){var y=arguments[0],C=this.projectionFactor(y.p0),F=this.projectionFactor(y.p1);if(C>=1&&F>=1||C<=0&&F<=0)return null;var N=this.project(y.p0);C<0&&(N=this.p0),C>1&&(N=this.p1);var q=this.project(y.p1);return F<0&&(q=this.p0),F>1&&(q=this.p1),new gi(N,q)}},gi.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gi.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gi.prototype.getCoordinate=function(h){return 0===h?this.p0:this.p1},gi.prototype.distancePerpendicular=function(h){return St.distancePointLinePerpendicular(h,this.p0,this.p1)},gi.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gi.prototype.midPoint=function(){return gi.midPoint(this.p0,this.p1)},gi.prototype.projectionFactor=function(h){if(h.equals(this.p0))return 0;if(h.equals(this.p1))return 1;var d=this.p1.x-this.p0.x,m=this.p1.y-this.p0.y,y=d*d+m*m;return y<=0?Z.NaN:((h.x-this.p0.x)*d+(h.y-this.p0.y)*m)/y},gi.prototype.closestPoints=function(h){var d=this.intersection(h);if(null!==d)return[d,d];var m=new Array(2).fill(null),y=Z.MAX_VALUE,C=null,F=this.closestPoint(h.p0);y=F.distance(h.p0),m[0]=F,m[1]=h.p0;var N=this.closestPoint(h.p1);(C=N.distance(h.p1))<y&&(y=C,m[0]=N,m[1]=h.p1);var q=h.closestPoint(this.p0);(C=q.distance(this.p0))<y&&(y=C,m[0]=this.p0,m[1]=q);var ye=h.closestPoint(this.p1);return(C=ye.distance(this.p1))<y&&(y=C,m[0]=this.p1,m[1]=ye),m},gi.prototype.closestPoint=function(h){var d=this.projectionFactor(h);return d>0&&d<1?this.project(h):this.p0.distance(h)<this.p1.distance(h)?this.p0:this.p1},gi.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gi.prototype.getLength=function(){return this.p0.distance(this.p1)},gi.prototype.compareTo=function(h){var d=h,m=this.p0.compareTo(d.p0);return 0!==m?m:this.p1.compareTo(d.p1)},gi.prototype.reverse=function(){var h=this.p0;this.p0=this.p1,this.p1=h},gi.prototype.equalsTopo=function(h){return this.p0.equals(h.p0)&&(this.p1.equals(h.p1)||this.p0.equals(h.p1))&&this.p1.equals(h.p0)},gi.prototype.lineIntersection=function(h){try{return Rn.intersection(this.p0,this.p1,h.p0,h.p1)}catch(d){if(!(d instanceof On))throw d}return null},gi.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gi.prototype.pointAlongOffset=function(h,d){var m=this.p0.x+h*(this.p1.x-this.p0.x),y=this.p0.y+h*(this.p1.y-this.p0.y),C=this.p1.x-this.p0.x,F=this.p1.y-this.p0.y,N=Math.sqrt(C*C+F*F),q=0,ye=0;if(0!==d){if(N<=0)throw new Error("Cannot compute offset from zero-length line segment");q=d*C/N,ye=d*F/N}return new $(m-ye,y+q)},gi.prototype.setCoordinates=function(){if(1===arguments.length){var h=arguments[0];this.setCoordinates(h.p0,h.p1)}else if(2===arguments.length){var d=arguments[0],m=arguments[1];this.p0.x=d.x,this.p0.y=d.y,this.p1.x=m.x,this.p1.y=m.y}},gi.prototype.segmentFraction=function(h){var d=this.projectionFactor(h);return d<0?d=0:(d>1||Z.isNaN(d))&&(d=1),d},gi.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gi.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gi.prototype.distance=function(){if(arguments[0]instanceof gi){var h=arguments[0];return St.distanceLineLine(this.p0,this.p1,h.p0,h.p1)}if(arguments[0]instanceof $)return St.distancePointLine(arguments[0],this.p0,this.p1)},gi.prototype.pointAlong=function(h){var d=new $;return d.x=this.p0.x+h*(this.p1.x-this.p0.x),d.y=this.p0.y+h*(this.p1.y-this.p0.y),d},gi.prototype.hashCode=function(){var h=Z.doubleToLongBits(this.p0.x);h^=31*Z.doubleToLongBits(this.p0.y);var d=Math.trunc(h)^Math.trunc(h>>32),m=Z.doubleToLongBits(this.p1.x);return m^=31*Z.doubleToLongBits(this.p1.y),d^Math.trunc(m)^Math.trunc(m>>32)},gi.prototype.interfaces_=function(){return[te,ee]},gi.prototype.getClass=function(){return gi},gi.midPoint=function(h,d){return new $((h.x+d.x)/2,(h.y+d.y)/2)},U4.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gi,U4);var Yr=function(){this.tempEnv1=new en,this.tempEnv2=new en,this._overlapSeg1=new gi,this._overlapSeg2=new gi};Yr.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var m=arguments[2],y=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),m.getLineSegment(y,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr};var w1=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var d=arguments[1],m=arguments[2],y=arguments[3];this._pts=arguments[0],this._start=d,this._end=m,this._context=y};w1.prototype.getLineSegment=function(h,d){d.p0=this._pts[h],d.p1=this._pts[h+1]},w1.prototype.computeSelect=function(h,d,m,y){if(y.tempEnv1.init(this._pts[d],this._pts[m]),m-d==1)return y.select(this,d),null;if(!h.intersects(y.tempEnv1))return null;var N=Math.trunc((d+m)/2);d<N&&this.computeSelect(h,d,N,y),N<m&&this.computeSelect(h,N,m,y)},w1.prototype.getCoordinates=function(){for(var h=new Array(this._end-this._start+1).fill(null),d=0,m=this._start;m<=this._end;m++)h[d++]=this._pts[m];return h},w1.prototype.computeOverlaps=function(h,d){this.computeOverlapsInternal(this._start,this._end,h,h._start,h._end,d)},w1.prototype.setId=function(h){this._id=h},w1.prototype.select=function(h,d){this.computeSelect(h,this._start,this._end,d)},w1.prototype.getEnvelope=function(){return null===this._env&&(this._env=new en(this._pts[this._start],this._pts[this._end])),this._env},w1.prototype.getEndIndex=function(){return this._end},w1.prototype.getStartIndex=function(){return this._start},w1.prototype.getContext=function(){return this._context},w1.prototype.getId=function(){return this._id},w1.prototype.computeOverlapsInternal=function(h,d,m,y,C,F){var N=this._pts[h],q=this._pts[d],ye=m._pts[y],je=m._pts[C];if(d-h==1&&C-y==1)return F.overlap(this,h,m,y),null;if(F.tempEnv1.init(N,q),F.tempEnv2.init(ye,je),!F.tempEnv1.intersects(F.tempEnv2))return null;var yt=Math.trunc((h+d)/2),vt=Math.trunc((y+C)/2);h<yt&&(y<vt&&this.computeOverlapsInternal(h,yt,m,y,vt,F),vt<C&&this.computeOverlapsInternal(h,yt,m,vt,C,F)),yt<d&&(y<vt&&this.computeOverlapsInternal(yt,d,m,y,vt,F),vt<C&&this.computeOverlapsInternal(yt,d,m,vt,C,F))},w1.prototype.interfaces_=function(){return[]},w1.prototype.getClass=function(){return w1};var C2=function(){};C2.prototype.interfaces_=function(){return[]},C2.prototype.getClass=function(){return C2},C2.getChainStartIndices=function(h){var d=0,m=new hn;m.add(new Re(d));do{var y=C2.findChainEnd(h,d);m.add(new Re(y)),d=y}while(d<h.length-1);return C2.toIntArray(m)},C2.findChainEnd=function(h,d){for(var m=d;m<h.length-1&&h[m].equals2D(h[m+1]);)m++;if(m>=h.length-1)return h.length-1;for(var y=Ws.quadrant(h[m],h[m+1]),C=d+1;C<h.length&&(h[C-1].equals2D(h[C])||Ws.quadrant(h[C-1],h[C])===y);)C++;return C-1},C2.getChains=function(){if(1===arguments.length)return C2.getChains(arguments[0],null);if(2===arguments.length){for(var d=arguments[0],m=arguments[1],y=new hn,C=C2.getChainStartIndices(d),F=0;F<C.length-1;F++){var N=new w1(d,C[F],C[F+1],m);y.add(N)}return y}},C2.toIntArray=function(h){for(var d=new Array(h.size()).fill(null),m=0;m<d.length;m++)d[m]=h.get(m).intValue();return d};var E3=function(){};E3.prototype.computeNodes=function(h){},E3.prototype.getNodedSubstrings=function(){},E3.prototype.interfaces_=function(){return[]},E3.prototype.getClass=function(){return E3};var jh=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};jh.prototype.setSegmentIntersector=function(h){this._segInt=h},jh.prototype.interfaces_=function(){return[E3]},jh.prototype.getClass=function(){return jh};var Nl=function(h){function d(y){y?h.call(this,y):h.call(this),this._monoChains=new hn,this._index=new C8,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d;var m={SegmentOverlapAction:{configurable:!0}};return d.prototype.getMonotoneChains=function(){return this._monoChains},d.prototype.getNodedSubstrings=function(){return fa.getNodedSubstrings(this._nodedSegStrings)},d.prototype.getIndex=function(){return this._index},d.prototype.add=function(y){for(var C=C2.getChains(y.getCoordinates(),y).iterator();C.hasNext();){var F=C.next();F.setId(this._idCounter++),this._index.insert(F.getEnvelope(),F),this._monoChains.add(F)}},d.prototype.computeNodes=function(y){this._nodedSegStrings=y;for(var C=y.iterator();C.hasNext();)this.add(C.next());this.intersectChains()},d.prototype.intersectChains=function(){for(var y=new $h(this._segInt),C=this._monoChains.iterator();C.hasNext();)for(var F=C.next(),N=this._index.query(F.getEnvelope()).iterator();N.hasNext();){var q=N.next();if(q.getId()>F.getId()&&(F.computeOverlaps(q,y),this._nOverlaps++),this._segInt.isDone())return null}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},m.SegmentOverlapAction.get=function(){return $h},Object.defineProperties(d,m),d}(jh),$h=function(h){function d(){h.call(this),this._si=null,this._si=arguments[0]}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.overlap=function(){if(4!==arguments.length)return h.prototype.overlap.apply(this,arguments);var y=arguments[1],C=arguments[2],F=arguments[3],N=arguments[0].getContext(),q=C.getContext();this._si.processIntersections(N,y,q,F)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Yr),Nr=function h(){if(this._quadrantSegments=h.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=h.CAP_ROUND,this._joinStyle=h.JOIN_ROUND,this._mitreLimit=h.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=h.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var y=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(y)}else if(4===arguments.length){var F=arguments[1],N=arguments[2],q=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(F),this.setJoinStyle(N),this.setMitreLimit(q)}},Sn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Nr.prototype.getEndCapStyle=function(){return this._endCapStyle},Nr.prototype.isSingleSided=function(){return this._isSingleSided},Nr.prototype.setQuadrantSegments=function(h){this._quadrantSegments=h,0===this._quadrantSegments&&(this._joinStyle=Nr.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Nr.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),h<=0&&(this._quadrantSegments=1),this._joinStyle!==Nr.JOIN_ROUND&&(this._quadrantSegments=Nr.DEFAULT_QUADRANT_SEGMENTS)},Nr.prototype.getJoinStyle=function(){return this._joinStyle},Nr.prototype.setJoinStyle=function(h){this._joinStyle=h},Nr.prototype.setSimplifyFactor=function(h){this._simplifyFactor=h<0?0:h},Nr.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Nr.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Nr.prototype.setEndCapStyle=function(h){this._endCapStyle=h},Nr.prototype.getMitreLimit=function(){return this._mitreLimit},Nr.prototype.setMitreLimit=function(h){this._mitreLimit=h},Nr.prototype.setSingleSided=function(h){this._isSingleSided=h},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.bufferDistanceError=function(h){var d=Math.PI/2/h;return 1-Math.cos(d/2)},Sn.CAP_ROUND.get=function(){return 1},Sn.CAP_FLAT.get=function(){return 2},Sn.CAP_SQUARE.get=function(){return 3},Sn.JOIN_ROUND.get=function(){return 1},Sn.JOIN_MITRE.get=function(){return 2},Sn.JOIN_BEVEL.get=function(){return 3},Sn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Sn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Sn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Nr,Sn);var Ao=function(h){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=St.COUNTERCLOCKWISE,this._inputLine=h||null},Kh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Ao.prototype.isDeletable=function(h,d,m,y){var C=this._inputLine[h],F=this._inputLine[d],N=this._inputLine[m];return!!this.isConcave(C,F,N)&&!!this.isShallow(C,F,N,y)&&this.isShallowSampled(C,F,h,m,y)},Ao.prototype.deleteShallowConcavities=function(){for(var h=1,d=this.findNextNonDeletedIndex(h),m=this.findNextNonDeletedIndex(d),y=!1;m<this._inputLine.length;){var C=!1;this.isDeletable(h,d,m,this._distanceTol)&&(this._isDeleted[d]=Ao.DELETE,C=!0,y=!0),d=this.findNextNonDeletedIndex(h=C?m:d),m=this.findNextNonDeletedIndex(d)}return y},Ao.prototype.isShallowConcavity=function(h,d,m,y){return St.computeOrientation(h,d,m)===this._angleOrientation&&St.distancePointLine(d,h,m)<y},Ao.prototype.isShallowSampled=function(h,d,m,y,C){var F=Math.trunc((y-m)/Ao.NUM_PTS_TO_CHECK);F<=0&&(F=1);for(var N=m;N<y;N+=F)if(!this.isShallow(h,d,this._inputLine[N],C))return!1;return!0},Ao.prototype.isConcave=function(h,d,m){return St.computeOrientation(h,d,m)===this._angleOrientation},Ao.prototype.simplify=function(h){this._distanceTol=Math.abs(h),h<0&&(this._angleOrientation=St.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var d=!1;do{d=this.deleteShallowConcavities()}while(d);return this.collapseLine()},Ao.prototype.findNextNonDeletedIndex=function(h){for(var d=h+1;d<this._inputLine.length&&this._isDeleted[d]===Ao.DELETE;)d++;return d},Ao.prototype.isShallow=function(h,d,m,y){return St.distancePointLine(d,h,m)<y},Ao.prototype.collapseLine=function(){for(var h=new Tc,d=0;d<this._inputLine.length;d++)this._isDeleted[d]!==Ao.DELETE&&h.add(this._inputLine[d]);return h.toCoordinateArray()},Ao.prototype.interfaces_=function(){return[]},Ao.prototype.getClass=function(){return Ao},Ao.simplify=function(h,d){return new Ao(h).simplify(d)},Kh.INIT.get=function(){return 0},Kh.DELETE.get=function(){return 1},Kh.KEEP.get=function(){return 1},Kh.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Ao,Kh);var Rc=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new hn},hi={COORDINATE_ARRAY_TYPE:{configurable:!0}};Rc.prototype.getCoordinates=function(){return this._ptList.toArray(Rc.COORDINATE_ARRAY_TYPE)},Rc.prototype.setPrecisionModel=function(h){this._precisionModel=h},Rc.prototype.addPt=function(h){var d=new $(h);if(this._precisionModel.makePrecise(d),this.isRedundant(d))return null;this._ptList.add(d)},Rc.prototype.revere=function(){},Rc.prototype.addPts=function(h,d){if(d)for(var m=0;m<h.length;m++)this.addPt(h[m]);else for(var y=h.length-1;y>=0;y--)this.addPt(h[y])},Rc.prototype.isRedundant=function(h){if(this._ptList.size()<1)return!1;var d=this._ptList.get(this._ptList.size()-1);return h.distance(d)<this._minimimVertexDistance},Rc.prototype.toString=function(){return(new ir).createLineString(this.getCoordinates()).toString()},Rc.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var h=new $(this._ptList.get(0)),d=this._ptList.get(this._ptList.size()-1);if(h.equals(d))return null;this._ptList.add(h)},Rc.prototype.setMinimumVertexDistance=function(h){this._minimimVertexDistance=h},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc},hi.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Rc,hi);var br=function(){},e4={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};br.prototype.interfaces_=function(){return[]},br.prototype.getClass=function(){return br},br.toDegrees=function(h){return 180*h/Math.PI},br.normalize=function(h){for(;h>Math.PI;)h-=br.PI_TIMES_2;for(;h<=-Math.PI;)h+=br.PI_TIMES_2;return h},br.angle=function(){if(1===arguments.length){var h=arguments[0];return Math.atan2(h.y,h.x)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return Math.atan2(m.y-d.y,m.x-d.x)}},br.isAcute=function(h,d,m){return(h.x-d.x)*(m.x-d.x)+(h.y-d.y)*(m.y-d.y)>0},br.isObtuse=function(h,d,m){return(h.x-d.x)*(m.x-d.x)+(h.y-d.y)*(m.y-d.y)<0},br.interiorAngle=function(h,d,m){var y=br.angle(d,h),C=br.angle(d,m);return Math.abs(C-y)},br.normalizePositive=function(h){if(h<0){for(;h<0;)h+=br.PI_TIMES_2;h>=br.PI_TIMES_2&&(h=0)}else{for(;h>=br.PI_TIMES_2;)h-=br.PI_TIMES_2;h<0&&(h=0)}return h},br.angleBetween=function(h,d,m){var y=br.angle(d,h),C=br.angle(d,m);return br.diff(y,C)},br.diff=function(h,d){var m=null;return(m=h<d?d-h:h-d)>Math.PI&&(m=2*Math.PI-m),m},br.toRadians=function(h){return h*Math.PI/180},br.getTurn=function(h,d){var m=Math.sin(d-h);return m>0?br.COUNTERCLOCKWISE:m<0?br.CLOCKWISE:br.NONE},br.angleBetweenOriented=function(h,d,m){var y=br.angle(d,h),C=br.angle(d,m)-y;return C<=-Math.PI?C+br.PI_TIMES_2:C>Math.PI?C-br.PI_TIMES_2:C},e4.PI_TIMES_2.get=function(){return 2*Math.PI},e4.PI_OVER_2.get=function(){return Math.PI/2},e4.PI_OVER_4.get=function(){return Math.PI/4},e4.COUNTERCLOCKWISE.get=function(){return St.COUNTERCLOCKWISE},e4.CLOCKWISE.get=function(){return St.CLOCKWISE},e4.NONE.get=function(){return St.COLLINEAR},Object.defineProperties(br,e4);var gt=function h(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gi,this._seg1=new gi,this._offset0=new gi,this._offset1=new gi,this._side=0,this._hasNarrowConcaveAngle=!1;var m=arguments[1],y=arguments[2];this._precisionModel=arguments[0],this._bufParams=m,this._li=new xt,this._filletAngleQuantum=Math.PI/2/m.getQuadrantSegments(),m.getQuadrantSegments()>=8&&m.getJoinStyle()===Nr.JOIN_ROUND&&(this._closingSegLengthFactor=h.MAX_CLOSING_SEG_LEN_FACTOR),this.init(y)},b1={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};gt.prototype.addNextSegment=function(h,d){if(this._s0=this._s1,this._s1=this._s2,this._s2=h,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var m=St.computeOrientation(this._s0,this._s1,this._s2),y=m===St.CLOCKWISE&&this._side===pn.LEFT||m===St.COUNTERCLOCKWISE&&this._side===pn.RIGHT;0===m?this.addCollinear(d):y?this.addOutsideTurn(m,d):this.addInsideTurn(m,d)},gt.prototype.addLineEndCap=function(h,d){var m=new gi(h,d),y=new gi;this.computeOffsetSegment(m,pn.LEFT,this._distance,y);var C=new gi;this.computeOffsetSegment(m,pn.RIGHT,this._distance,C);var q=Math.atan2(d.y-h.y,d.x-h.x);switch(this._bufParams.getEndCapStyle()){case Nr.CAP_ROUND:this._segList.addPt(y.p1),this.addFilletArc(d,q+Math.PI/2,q-Math.PI/2,St.CLOCKWISE,this._distance),this._segList.addPt(C.p1);break;case Nr.CAP_FLAT:this._segList.addPt(y.p1),this._segList.addPt(C.p1);break;case Nr.CAP_SQUARE:var ye=new $;ye.x=Math.abs(this._distance)*Math.cos(q),ye.y=Math.abs(this._distance)*Math.sin(q);var je=new $(y.p1.x+ye.x,y.p1.y+ye.y),yt=new $(C.p1.x+ye.x,C.p1.y+ye.y);this._segList.addPt(je),this._segList.addPt(yt)}},gt.prototype.getCoordinates=function(){return this._segList.getCoordinates()},gt.prototype.addMitreJoin=function(h,d,m,y){var C=!0,F=null;try{F=Rn.intersection(d.p0,d.p1,m.p0,m.p1),(y<=0?1:F.distance(h)/Math.abs(y))>this._bufParams.getMitreLimit()&&(C=!1)}catch(N){if(!(N instanceof On))throw N;F=new $(0,0),C=!1}C?this._segList.addPt(F):this.addLimitedMitreJoin(d,m,y,this._bufParams.getMitreLimit())},gt.prototype.addFilletCorner=function(h,d,m,y,C){var q=Math.atan2(d.y-h.y,d.x-h.x),yt=Math.atan2(m.y-h.y,m.x-h.x);y===St.CLOCKWISE?q<=yt&&(q+=2*Math.PI):q>=yt&&(q-=2*Math.PI),this._segList.addPt(d),this.addFilletArc(h,q,yt,y,C),this._segList.addPt(m)},gt.prototype.addOutsideTurn=function(h,d){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*gt.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Nr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Nr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(d&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,h,this._distance),this._segList.addPt(this._offset1.p0))},gt.prototype.createSquare=function(h){this._segList.addPt(new $(h.x+this._distance,h.y+this._distance)),this._segList.addPt(new $(h.x+this._distance,h.y-this._distance)),this._segList.addPt(new $(h.x-this._distance,h.y-this._distance)),this._segList.addPt(new $(h.x-this._distance,h.y+this._distance)),this._segList.closeRing()},gt.prototype.addSegments=function(h,d){this._segList.addPts(h,d)},gt.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},gt.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},gt.prototype.initSideSegments=function(h,d,m){this._s1=h,this._s2=d,this._side=m,this._seg1.setCoordinates(h,d),this.computeOffsetSegment(this._seg1,m,this._distance,this._offset1)},gt.prototype.addLimitedMitreJoin=function(h,d,m,y){var C=this._seg0.p1,F=br.angle(C,this._seg0.p0),N=br.angleBetweenOriented(this._seg0.p0,C,this._seg1.p1)/2,q=br.normalize(F+N),ye=br.normalize(q+Math.PI),je=y*m,yt=m-je*Math.abs(Math.sin(N)),vt=C.x+je*Math.cos(ye),gn=C.y+je*Math.sin(ye),En=new $(vt,gn),Pn=new gi(C,En),ri=Pn.pointAlongOffset(1,yt),Zr=Pn.pointAlongOffset(1,-yt);this._side===pn.LEFT?(this._segList.addPt(ri),this._segList.addPt(Zr)):(this._segList.addPt(Zr),this._segList.addPt(ri))},gt.prototype.computeOffsetSegment=function(h,d,m,y){var C=d===pn.LEFT?1:-1,F=h.p1.x-h.p0.x,N=h.p1.y-h.p0.y,q=Math.sqrt(F*F+N*N),ye=C*m*F/q,je=C*m*N/q;y.p0.x=h.p0.x-je,y.p0.y=h.p0.y+ye,y.p1.x=h.p1.x-je,y.p1.y=h.p1.y+ye},gt.prototype.addFilletArc=function(h,d,m,y,C){var F=y===St.CLOCKWISE?-1:1,N=Math.abs(d-m),q=Math.trunc(N/this._filletAngleQuantum+.5);if(q<1)return null;for(var ye=N/q,je=0,yt=new $;je<N;){var vt=d+F*je;yt.x=h.x+C*Math.cos(vt),yt.y=h.y+C*Math.sin(vt),this._segList.addPt(yt),je+=ye}},gt.prototype.addInsideTurn=function(h,d){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*gt.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var m=new $((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(m);var y=new $((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(y)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},gt.prototype.createCircle=function(h){var d=new $(h.x+this._distance,h.y);this._segList.addPt(d),this.addFilletArc(h,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},gt.prototype.addBevelJoin=function(h,d){this._segList.addPt(h.p1),this._segList.addPt(d.p0)},gt.prototype.init=function(h){this._distance=h,this._maxCurveSegmentError=h*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Rc,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(h*gt.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},gt.prototype.addCollinear=function(h){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Nr.JOIN_BEVEL||this._bufParams.getJoinStyle()===Nr.JOIN_MITRE?(h&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,St.CLOCKWISE,this._distance))},gt.prototype.closeRing=function(){this._segList.closeRing()},gt.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},gt.prototype.interfaces_=function(){return[]},gt.prototype.getClass=function(){return gt},b1.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},b1.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},b1.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},b1.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(gt,b1);var fr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var d=arguments[1];this._precisionModel=arguments[0],this._bufParams=d};fr.prototype.getOffsetCurve=function(h,d){if(this._distance=d,0===d)return null;var m=d<0,y=Math.abs(d),C=this.getSegGen(y);h.length<=1?this.computePointCurve(h[0],C):this.computeOffsetCurve(h,m,C);var F=C.getCoordinates();return m&&Vi.reverse(F),F},fr.prototype.computeSingleSidedBufferCurve=function(h,d,m){var y=this.simplifyTolerance(this._distance);if(d){m.addSegments(h,!0);var C=Ao.simplify(h,-y),F=C.length-1;m.initSideSegments(C[F],C[F-1],pn.LEFT),m.addFirstSegment();for(var N=F-2;N>=0;N--)m.addNextSegment(C[N],!0)}else{m.addSegments(h,!1);var q=Ao.simplify(h,y),ye=q.length-1;m.initSideSegments(q[0],q[1],pn.LEFT),m.addFirstSegment();for(var je=2;je<=ye;je++)m.addNextSegment(q[je],!0)}m.addLastSegment(),m.closeRing()},fr.prototype.computeRingBufferCurve=function(h,d,m){var y=this.simplifyTolerance(this._distance);d===pn.RIGHT&&(y=-y);var C=Ao.simplify(h,y),F=C.length-1;m.initSideSegments(C[F-1],C[0],d);for(var N=1;N<=F;N++)m.addNextSegment(C[N],1!==N);m.closeRing()},fr.prototype.computeLineBufferCurve=function(h,d){var m=this.simplifyTolerance(this._distance),y=Ao.simplify(h,m),C=y.length-1;d.initSideSegments(y[0],y[1],pn.LEFT);for(var F=2;F<=C;F++)d.addNextSegment(y[F],!0);d.addLastSegment(),d.addLineEndCap(y[C-1],y[C]);var N=Ao.simplify(h,-m),q=N.length-1;d.initSideSegments(N[q],N[q-1],pn.LEFT);for(var ye=q-2;ye>=0;ye--)d.addNextSegment(N[ye],!0);d.addLastSegment(),d.addLineEndCap(N[1],N[0]),d.closeRing()},fr.prototype.computePointCurve=function(h,d){switch(this._bufParams.getEndCapStyle()){case Nr.CAP_ROUND:d.createCircle(h);break;case Nr.CAP_SQUARE:d.createSquare(h)}},fr.prototype.getLineCurve=function(h,d){if(this._distance=d,d<0&&!this._bufParams.isSingleSided()||0===d)return null;var m=Math.abs(d),y=this.getSegGen(m);return h.length<=1?this.computePointCurve(h[0],y):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(h,d<0,y):this.computeLineBufferCurve(h,y),y.getCoordinates()},fr.prototype.getBufferParameters=function(){return this._bufParams},fr.prototype.simplifyTolerance=function(h){return h*this._bufParams.getSimplifyFactor()},fr.prototype.getRingCurve=function(h,d,m){if(this._distance=m,h.length<=2)return this.getLineCurve(h,m);if(0===m)return fr.copyCoordinates(h);var y=this.getSegGen(m);return this.computeRingBufferCurve(h,d,y),y.getCoordinates()},fr.prototype.computeOffsetCurve=function(h,d,m){var y=this.simplifyTolerance(this._distance);if(d){var C=Ao.simplify(h,-y),F=C.length-1;m.initSideSegments(C[F],C[F-1],pn.LEFT),m.addFirstSegment();for(var N=F-2;N>=0;N--)m.addNextSegment(C[N],!0)}else{var q=Ao.simplify(h,y),ye=q.length-1;m.initSideSegments(q[0],q[1],pn.LEFT),m.addFirstSegment();for(var je=2;je<=ye;je++)m.addNextSegment(q[je],!0)}m.addLastSegment()},fr.prototype.getSegGen=function(h){return new gt(this._precisionModel,this._bufParams,h)},fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr},fr.copyCoordinates=function(h){for(var d=new Array(h.length).fill(null),m=0;m<d.length;m++)d[m]=new $(h[m]);return d};var Aa=function(){this._subgraphs=null,this._seg=new gi,this._cga=new St,this._subgraphs=arguments[0]},dc={DepthSegment:{configurable:!0}};Aa.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var h=arguments[0],d=new hn,m=this._subgraphs.iterator();m.hasNext();){var y=m.next(),C=y.getEnvelope();h.y<C.getMinY()||h.y>C.getMaxY()||this.findStabbedSegments(h,y.getDirectedEdges(),d)}return d}if(3===arguments.length)if(bt(arguments[2],aa)&&arguments[0]instanceof $&&arguments[1]instanceof Rt){for(var F=arguments[0],N=arguments[1],q=arguments[2],ye=N.getEdge().getCoordinates(),je=0;je<ye.length-1;je++)if(this._seg.p0=ye[je],this._seg.p1=ye[je+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<F.x||this._seg.isHorizontal()||F.y<this._seg.p0.y||F.y>this._seg.p1.y||St.computeOrientation(this._seg.p0,this._seg.p1,F)===St.RIGHT)){var yt=N.getDepth(pn.LEFT);this._seg.p0.equals(ye[je])||(yt=N.getDepth(pn.RIGHT));var vt=new M2(this._seg,yt);q.add(vt)}}else if(bt(arguments[2],aa)&&arguments[0]instanceof $&&bt(arguments[1],aa))for(var gn=arguments[0],Pn=arguments[2],ri=arguments[1].iterator();ri.hasNext();){var Zr=ri.next();Zr.isForward()&&this.findStabbedSegments(gn,Zr,Pn)}},Aa.prototype.getDepth=function(h){var d=this.findStabbedSegments(h);return 0===d.size()?0:mo.min(d)._leftDepth},Aa.prototype.interfaces_=function(){return[]},Aa.prototype.getClass=function(){return Aa},dc.DepthSegment.get=function(){return M2},Object.defineProperties(Aa,dc);var M2=function(){this._upwardSeg=null,this._leftDepth=null;var d=arguments[1];this._upwardSeg=new gi(arguments[0]),this._leftDepth=d};M2.prototype.compareTo=function(h){var d=h;if(this._upwardSeg.minX()>=d._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=d._upwardSeg.minX())return-1;var m=this._upwardSeg.orientationIndex(d._upwardSeg);return 0!==m||0!=(m=-1*d._upwardSeg.orientationIndex(this._upwardSeg))?m:this._upwardSeg.compareTo(d._upwardSeg)},M2.prototype.compareX=function(h,d){var m=h.p0.compareTo(d.p0);return 0!==m?m:h.p1.compareTo(d.p1)},M2.prototype.toString=function(){return this._upwardSeg.toString()},M2.prototype.interfaces_=function(){return[te]},M2.prototype.getClass=function(){return M2};var Hi=function(h,d,m){this.p0=h||null,this.p1=d||null,this.p2=m||null};Hi.prototype.area=function(){return Hi.area(this.p0,this.p1,this.p2)},Hi.prototype.signedArea=function(){return Hi.signedArea(this.p0,this.p1,this.p2)},Hi.prototype.interpolateZ=function(h){if(null===h)throw new Y("Supplied point is null.");return Hi.interpolateZ(h,this.p0,this.p1,this.p2)},Hi.prototype.longestSideLength=function(){return Hi.longestSideLength(this.p0,this.p1,this.p2)},Hi.prototype.isAcute=function(){return Hi.isAcute(this.p0,this.p1,this.p2)},Hi.prototype.circumcentre=function(){return Hi.circumcentre(this.p0,this.p1,this.p2)},Hi.prototype.area3D=function(){return Hi.area3D(this.p0,this.p1,this.p2)},Hi.prototype.centroid=function(){return Hi.centroid(this.p0,this.p1,this.p2)},Hi.prototype.inCentre=function(){return Hi.inCentre(this.p0,this.p1,this.p2)},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi},Hi.area=function(h,d,m){return Math.abs(((m.x-h.x)*(d.y-h.y)-(d.x-h.x)*(m.y-h.y))/2)},Hi.signedArea=function(h,d,m){return((m.x-h.x)*(d.y-h.y)-(d.x-h.x)*(m.y-h.y))/2},Hi.det=function(h,d,m,y){return h*y-d*m},Hi.interpolateZ=function(h,d,m,y){var C=d.x,F=d.y,N=m.x-C,q=y.x-C,ye=m.y-F,je=y.y-F,yt=N*je-q*ye,vt=h.x-C,gn=h.y-F;return d.z+(je*vt-q*gn)/yt*(m.z-d.z)+(-ye*vt+N*gn)/yt*(y.z-d.z)},Hi.longestSideLength=function(h,d,m){var y=h.distance(d),C=d.distance(m),F=m.distance(h),N=y;return C>N&&(N=C),F>N&&(N=F),N},Hi.isAcute=function(h,d,m){return!!br.isAcute(h,d,m)&&!!br.isAcute(d,m,h)&&!!br.isAcute(m,h,d)},Hi.circumcentre=function(h,d,m){var y=m.x,C=m.y,F=h.x-y,N=h.y-C,q=d.x-y,ye=d.y-C,je=2*Hi.det(F,N,q,ye),yt=Hi.det(N,F*F+N*N,ye,q*q+ye*ye),vt=Hi.det(F,F*F+N*N,q,q*q+ye*ye);return new $(y-yt/je,C+vt/je)},Hi.perpendicularBisector=function(h,d){var m=d.x-h.x,y=d.y-h.y,C=new Rn(h.x+m/2,h.y+y/2,1),F=new Rn(h.x-y+m/2,h.y+m+y/2,1);return new Rn(C,F)},Hi.angleBisector=function(h,d,m){var y=d.distance(h),C=y/(y+d.distance(m));return new $(h.x+C*(m.x-h.x),h.y+C*(m.y-h.y))},Hi.area3D=function(h,d,m){var y=d.x-h.x,C=d.y-h.y,F=d.z-h.z,N=m.x-h.x,q=m.y-h.y,ye=m.z-h.z,je=C*ye-F*q,yt=F*N-y*ye,vt=y*q-C*N;return Math.sqrt(je*je+yt*yt+vt*vt)/2},Hi.centroid=function(h,d,m){return new $((h.x+d.x+m.x)/3,(h.y+d.y+m.y)/3)},Hi.inCentre=function(h,d,m){var y=d.distance(m),C=h.distance(m),F=h.distance(d),N=y+C+F;return new $((y*h.x+C*d.x+F*m.x)/N,(y*h.y+C*d.y+F*m.y)/N)};var co=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new hn;var d=arguments[1],m=arguments[2];this._inputGeom=arguments[0],this._distance=d,this._curveBuilder=m};co.prototype.addPoint=function(h){if(this._distance<=0)return null;var d=h.getCoordinates(),m=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(m,he.EXTERIOR,he.INTERIOR)},co.prototype.addPolygon=function(h){var d=this._distance,m=pn.LEFT;this._distance<0&&(d=-this._distance,m=pn.RIGHT);var y=h.getExteriorRing(),C=Vi.removeRepeatedPoints(y.getCoordinates());if(this._distance<0&&this.isErodedCompletely(y,this._distance)||this._distance<=0&&C.length<3)return null;this.addPolygonRing(C,d,m,he.EXTERIOR,he.INTERIOR);for(var F=0;F<h.getNumInteriorRing();F++){var N=h.getInteriorRingN(F),q=Vi.removeRepeatedPoints(N.getCoordinates());this._distance>0&&this.isErodedCompletely(N,-this._distance)||this.addPolygonRing(q,d,pn.opposite(m),he.INTERIOR,he.EXTERIOR)}},co.prototype.isTriangleErodedCompletely=function(h,d){var m=new Hi(h[0],h[1],h[2]),y=m.inCentre();return St.distancePointLine(y,m.p0,m.p1)<Math.abs(d)},co.prototype.addLineString=function(h){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var d=Vi.removeRepeatedPoints(h.getCoordinates()),m=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(m,he.EXTERIOR,he.INTERIOR)},co.prototype.addCurve=function(h,d,m){if(null===h||h.length<2)return null;var y=new fa(h,new Ts(0,he.BOUNDARY,d,m));this._curveList.add(y)},co.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},co.prototype.addPolygonRing=function(h,d,m,y,C){if(0===d&&h.length<cl.MINIMUM_VALID_SIZE)return null;var F=y,N=C;h.length>=cl.MINIMUM_VALID_SIZE&&St.isCCW(h)&&(F=C,N=y,m=pn.opposite(m));var q=this._curveBuilder.getRingCurve(h,m,d);this.addCurve(q,F,N)},co.prototype.add=function(h){if(h.isEmpty())return null;h instanceof ca?this.addPolygon(h):h instanceof ko?this.addLineString(h):h instanceof Lc?this.addPoint(h):(h instanceof C3||h instanceof cu||h instanceof Zc||h instanceof H1)&&this.addCollection(h)},co.prototype.isErodedCompletely=function(h,d){var m=h.getCoordinates();if(m.length<4)return d<0;if(4===m.length)return this.isTriangleErodedCompletely(m,d);var y=h.getEnvelopeInternal(),C=Math.min(y.getHeight(),y.getWidth());return d<0&&2*Math.abs(d)>C},co.prototype.addCollection=function(h){for(var d=0;d<h.getNumGeometries();d++){var m=h.getGeometryN(d);this.add(m)}},co.prototype.interfaces_=function(){return[]},co.prototype.getClass=function(){return co};var fn=function(){};fn.prototype.locate=function(h){},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn};var Ui=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var h=arguments[0];this._parent=h,this._atStart=!0,this._index=0,this._max=h.getNumGeometries()};Ui.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ui.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Be;var h=this._parent.getGeometryN(this._index++);return h instanceof H1?(this._subcollectionIterator=new Ui(h),this._subcollectionIterator.next()):h},Ui.prototype.remove=function(){throw new Error(this.getClass().getName())},Ui.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Ui.prototype.interfaces_=function(){return[uc]},Ui.prototype.getClass=function(){return Ui},Ui.isAtomic=function(h){return!(h instanceof H1)};var Mr=function(){this._geom=null,this._geom=arguments[0]};Mr.prototype.locate=function(h){return Mr.locate(h,this._geom)},Mr.prototype.interfaces_=function(){return[fn]},Mr.prototype.getClass=function(){return Mr},Mr.isPointInRing=function(h,d){return!!d.getEnvelopeInternal().intersects(h)&&St.isPointInRing(h,d.getCoordinates())},Mr.containsPointInPolygon=function(h,d){if(d.isEmpty())return!1;var m=d.getExteriorRing();if(!Mr.isPointInRing(h,m))return!1;for(var y=0;y<d.getNumInteriorRing();y++){var C=d.getInteriorRingN(y);if(Mr.isPointInRing(h,C))return!1}return!0},Mr.containsPoint=function(h,d){if(d instanceof ca)return Mr.containsPointInPolygon(h,d);if(d instanceof H1)for(var m=new Ui(d);m.hasNext();){var y=m.next();if(y!==d&&Mr.containsPoint(h,y))return!0}return!1},Mr.locate=function(h,d){return d.isEmpty()?he.EXTERIOR:Mr.containsPoint(h,d)?he.INTERIOR:he.EXTERIOR};var js=function(){this._edgeMap=new ht,this._edgeList=null,this._ptInAreaLocation=[he.NONE,he.NONE]};js.prototype.getNextCW=function(h){this.getEdges();var d=this._edgeList.indexOf(h),m=d-1;return 0===d&&(m=this._edgeList.size()-1),this._edgeList.get(m)},js.prototype.propagateSideLabels=function(h){for(var d=he.NONE,m=this.iterator();m.hasNext();){var y=m.next().getLabel();y.isArea(h)&&y.getLocation(h,pn.LEFT)!==he.NONE&&(d=y.getLocation(h,pn.LEFT))}if(d===he.NONE)return null;for(var C=d,F=this.iterator();F.hasNext();){var N=F.next(),q=N.getLabel();if(q.getLocation(h,pn.ON)===he.NONE&&q.setLocation(h,pn.ON,C),q.isArea(h)){var ye=q.getLocation(h,pn.LEFT),je=q.getLocation(h,pn.RIGHT);if(je!==he.NONE){if(je!==C)throw new _1("side location conflict",N.getCoordinate());ye===he.NONE&&ie.shouldNeverReachHere("found single null side (at "+N.getCoordinate()+")"),C=ye}else ie.isTrue(q.getLocation(h,pn.LEFT)===he.NONE,"found single null side"),q.setLocation(h,pn.RIGHT,C),q.setLocation(h,pn.LEFT,C)}}},js.prototype.getCoordinate=function(){var h=this.iterator();return h.hasNext()?h.next().getCoordinate():null},js.prototype.print=function(h){Ut.out.println("EdgeEndStar:   "+this.getCoordinate());for(var d=this.iterator();d.hasNext();)d.next().print(h)},js.prototype.isAreaLabelsConsistent=function(h){return this.computeEdgeEndLabels(h.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},js.prototype.checkAreaLabelsConsistent=function(h){var d=this.getEdges();if(d.size()<=0)return!0;var m=d.size()-1,y=d.get(m).getLabel().getLocation(h,pn.LEFT);ie.isTrue(y!==he.NONE,"Found unlabelled area edge");for(var C=y,F=this.iterator();F.hasNext();){var N=F.next().getLabel();ie.isTrue(N.isArea(h),"Found non-area edge");var q=N.getLocation(h,pn.LEFT),ye=N.getLocation(h,pn.RIGHT);if(q===ye||ye!==C)return!1;C=q}return!0},js.prototype.findIndex=function(h){this.iterator();for(var d=0;d<this._edgeList.size();d++)if(this._edgeList.get(d)===h)return d;return-1},js.prototype.iterator=function(){return this.getEdges().iterator()},js.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new hn(this._edgeMap.values())),this._edgeList},js.prototype.getLocation=function(h,d,m){return this._ptInAreaLocation[h]===he.NONE&&(this._ptInAreaLocation[h]=Mr.locate(d,m[h].getGeometry())),this._ptInAreaLocation[h]},js.prototype.toString=function(){var h=new Se;h.append("EdgeEndStar:   "+this.getCoordinate()),h.append("\n");for(var d=this.iterator();d.hasNext();){var m=d.next();h.append(m),h.append("\n")}return h.toString()},js.prototype.computeEdgeEndLabels=function(h){for(var d=this.iterator();d.hasNext();)d.next().computeLabel(h)},js.prototype.computeLabelling=function(h){this.computeEdgeEndLabels(h[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var d=[!1,!1],m=this.iterator();m.hasNext();)for(var y=m.next().getLabel(),C=0;C<2;C++)y.isLine(C)&&y.getLocation(C)===he.BOUNDARY&&(d[C]=!0);for(var F=this.iterator();F.hasNext();)for(var N=F.next(),q=N.getLabel(),ye=0;ye<2;ye++)if(q.isAnyNull(ye)){var je=he.NONE;if(d[ye])je=he.EXTERIOR;else{var yt=N.getCoordinate();je=this.getLocation(ye,yt,h)}q.setAllLocationsIfNull(ye,je)}},js.prototype.getDegree=function(){return this._edgeMap.size()},js.prototype.insertEdgeEnd=function(h,d){this._edgeMap.put(h,d),this._edgeList=null},js.prototype.interfaces_=function(){return[]},js.prototype.getClass=function(){return js};var ll=function(h){function d(){h.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var m=null,y=null,C=this._SCANNING_FOR_INCOMING,F=0;F<this._resultAreaEdgeList.size();F++){var N=this._resultAreaEdgeList.get(F),q=N.getSym();if(N.getLabel().isArea())switch(null===m&&N.isInResult()&&(m=N),C){case this._SCANNING_FOR_INCOMING:if(!q.isInResult())continue;y=q,C=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!N.isInResult())continue;y.setNext(N),C=this._SCANNING_FOR_INCOMING}}if(C===this._LINKING_TO_OUTGOING){if(null===m)throw new _1("no outgoing dirEdge found",this.getCoordinate());ie.isTrue(m.isInResult(),"unable to link last incoming dirEdge"),y.setNext(m)}},d.prototype.insert=function(m){this.insertEdgeEnd(m,m)},d.prototype.getRightmostEdge=function(){var m=this.getEdges(),y=m.size();if(y<1)return null;var C=m.get(0);if(1===y)return C;var F=m.get(y-1),N=C.getQuadrant(),q=F.getQuadrant();return Ws.isNorthern(N)&&Ws.isNorthern(q)?C:Ws.isNorthern(N)||Ws.isNorthern(q)?0!==C.getDy()?C:0!==F.getDy()?F:(ie.shouldNeverReachHere("found two horizontal edges incident on node"),null):F},d.prototype.print=function(m){Ut.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var y=this.iterator();y.hasNext();){var C=y.next();m.print("out "),C.print(m),m.println(),m.print("in "),C.getSym().print(m),m.println()}},d.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new hn;for(var m=this.iterator();m.hasNext();){var y=m.next();(y.isInResult()||y.getSym().isInResult())&&this._resultAreaEdgeList.add(y)}return this._resultAreaEdgeList},d.prototype.updateLabelling=function(m){for(var y=this.iterator();y.hasNext();){var C=y.next().getLabel();C.setAllLocationsIfNull(0,m.getLocation(0)),C.setAllLocationsIfNull(1,m.getLocation(1))}},d.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var m=null,y=null,C=this._edgeList.size()-1;C>=0;C--){var F=this._edgeList.get(C),N=F.getSym();null===y&&(y=N),null!==m&&N.setNext(m),m=F}y.setNext(m)},d.prototype.computeDepths=function(){if(1===arguments.length){var m=arguments[0],y=this.findIndex(m),C=m.getDepth(pn.LEFT),F=m.getDepth(pn.RIGHT),N=this.computeDepths(y+1,this._edgeList.size(),C);if(this.computeDepths(0,y,N)!==F)throw new _1("depth mismatch at "+m.getCoordinate())}else if(3===arguments.length){for(var ye=arguments[1],je=arguments[2],yt=arguments[0];yt<ye;yt++){var vt=this._edgeList.get(yt);vt.setEdgeDepths(pn.RIGHT,je),je=vt.getDepth(pn.LEFT)}return je}},d.prototype.mergeSymLabels=function(){for(var m=this.iterator();m.hasNext();){var y=m.next();y.getLabel().merge(y.getSym().getLabel())}},d.prototype.linkMinimalDirectedEdges=function(m){for(var y=null,C=null,F=this._SCANNING_FOR_INCOMING,N=this._resultAreaEdgeList.size()-1;N>=0;N--){var q=this._resultAreaEdgeList.get(N),ye=q.getSym();switch(null===y&&q.getEdgeRing()===m&&(y=q),F){case this._SCANNING_FOR_INCOMING:if(ye.getEdgeRing()!==m)continue;C=ye,F=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(q.getEdgeRing()!==m)continue;C.setNextMin(q),F=this._SCANNING_FOR_INCOMING}}F===this._LINKING_TO_OUTGOING&&(ie.isTrue(null!==y,"found null for first outgoing dirEdge"),ie.isTrue(y.getEdgeRing()===m,"unable to link last incoming dirEdge"),C.setNextMin(y))},d.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var m=0,y=this.iterator();y.hasNext();)y.next().isInResult()&&m++;return m}if(1===arguments.length){for(var C=arguments[0],F=0,N=this.iterator();N.hasNext();)N.next().getEdgeRing()===C&&F++;return F}},d.prototype.getLabel=function(){return this._label},d.prototype.findCoveredLineEdges=function(){for(var m=he.NONE,y=this.iterator();y.hasNext();){var C=y.next(),F=C.getSym();if(!C.isLineEdge()){if(C.isInResult()){m=he.INTERIOR;break}if(F.isInResult()){m=he.EXTERIOR;break}}}if(m===he.NONE)return null;for(var N=m,q=this.iterator();q.hasNext();){var ye=q.next(),je=ye.getSym();ye.isLineEdge()?ye.getEdge().setCovered(N===he.INTERIOR):(ye.isInResult()&&(N=he.EXTERIOR),je.isInResult()&&(N=he.INTERIOR))}},d.prototype.computeLabelling=function(m){h.prototype.computeLabelling.call(this,m),this._label=new Ts(he.NONE);for(var y=this.iterator();y.hasNext();)for(var C=y.next().getEdge().getLabel(),F=0;F<2;F++){var N=C.getLocation(F);N!==he.INTERIOR&&N!==he.BOUNDARY||this._label.setLocation(F,he.INTERIOR)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(js),To=function(h){function d(){h.apply(this,arguments)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.createNode=function(m){return new Ic(m,new ll)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(V4),e2=function h(){this._pts=null,this._orientation=null;var d=arguments[0];this._pts=d,this._orientation=h.orientation(d)};e2.prototype.compareTo=function(h){return e2.compareOriented(this._pts,this._orientation,h._pts,h._orientation)},e2.prototype.interfaces_=function(){return[te]},e2.prototype.getClass=function(){return e2},e2.orientation=function(h){return 1===Vi.increasingDirection(h)},e2.compareOriented=function(h,d,m,y){for(var C=d?1:-1,F=y?1:-1,N=d?h.length:-1,q=y?m.length:-1,ye=d?0:h.length-1,je=y?0:m.length-1;;){var yt=h[ye].compareTo(m[je]);if(0!==yt)return yt;var vt=(ye+=C)===N,gn=(je+=F)===q;if(vt&&!gn)return-1;if(!vt&&gn)return 1;if(vt&&gn)return 0}};var xr=function(){this._edges=new hn,this._ocaMap=new ht};xr.prototype.print=function(h){h.print("MULTILINESTRING ( ");for(var d=0;d<this._edges.size();d++){var m=this._edges.get(d);d>0&&h.print(","),h.print("(");for(var y=m.getCoordinates(),C=0;C<y.length;C++)C>0&&h.print(","),h.print(y[C].x+" "+y[C].y);h.println(")")}h.print(")  ")},xr.prototype.addAll=function(h){for(var d=h.iterator();d.hasNext();)this.add(d.next())},xr.prototype.findEdgeIndex=function(h){for(var d=0;d<this._edges.size();d++)if(this._edges.get(d).equals(h))return d;return-1},xr.prototype.iterator=function(){return this._edges.iterator()},xr.prototype.getEdges=function(){return this._edges},xr.prototype.get=function(h){return this._edges.get(h)},xr.prototype.findEqualEdge=function(h){var d=new e2(h.getCoordinates());return this._ocaMap.get(d)},xr.prototype.add=function(h){this._edges.add(h);var d=new e2(h.getCoordinates());this._ocaMap.put(d,h)},xr.prototype.interfaces_=function(){return[]},xr.prototype.getClass=function(){return xr};var Ys=function(){};Ys.prototype.processIntersections=function(h,d,m,y){},Ys.prototype.isDone=function(){},Ys.prototype.interfaces_=function(){return[]},Ys.prototype.getClass=function(){return Ys};var Za=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};Za.prototype.isTrivialIntersection=function(h,d,m,y){if(h===m&&1===this._li.getIntersectionNum()){if(Za.isAdjacentSegments(d,y))return!0;if(h.isClosed()){var C=h.size()-1;if(0===d&&y===C||0===y&&d===C)return!0}}return!1},Za.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Za.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Za.prototype.getLineIntersector=function(){return this._li},Za.prototype.hasProperIntersection=function(){return this._hasProper},Za.prototype.processIntersections=function(h,d,m,y){if(h===m&&d===y)return null;this.numTests++;var C=h.getCoordinates()[d],F=h.getCoordinates()[d+1],N=m.getCoordinates()[y],q=m.getCoordinates()[y+1];this._li.computeIntersection(C,F,N,q),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(h,d,m,y)||(this._hasIntersection=!0,h.addIntersections(this._li,d,0),m.addIntersections(this._li,y,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Za.prototype.hasIntersection=function(){return this._hasIntersection},Za.prototype.isDone=function(){return!1},Za.prototype.hasInteriorIntersection=function(){return this._hasInterior},Za.prototype.interfaces_=function(){return[Ys]},Za.prototype.getClass=function(){return Za},Za.isAdjacentSegments=function(h,d){return 1===Math.abs(h-d)};var li=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var d=arguments[1],m=arguments[2];this.coord=new $(arguments[0]),this.segmentIndex=d,this.dist=m};li.prototype.getSegmentIndex=function(){return this.segmentIndex},li.prototype.getCoordinate=function(){return this.coord},li.prototype.print=function(h){h.print(this.coord),h.print(" seg # = "+this.segmentIndex),h.println(" dist = "+this.dist)},li.prototype.compareTo=function(h){return this.compare(h.segmentIndex,h.dist)},li.prototype.isEndPoint=function(h){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===h},li.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},li.prototype.getDistance=function(){return this.dist},li.prototype.compare=function(h,d){return this.segmentIndex<h?-1:this.segmentIndex>h?1:this.dist<d?-1:this.dist>d?1:0},li.prototype.interfaces_=function(){return[te]},li.prototype.getClass=function(){return li};var Bc=function(){this._nodeMap=new ht,this.edge=null,this.edge=arguments[0]};Bc.prototype.print=function(h){h.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(h)},Bc.prototype.iterator=function(){return this._nodeMap.values().iterator()},Bc.prototype.addSplitEdges=function(h){this.addEndpoints();for(var d=this.iterator(),m=d.next();d.hasNext();){var y=d.next(),C=this.createSplitEdge(m,y);h.add(C),m=y}},Bc.prototype.addEndpoints=function(){var h=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[h],h,0)},Bc.prototype.createSplitEdge=function(h,d){var m=d.segmentIndex-h.segmentIndex+2,C=d.dist>0||!d.coord.equals2D(this.edge.pts[d.segmentIndex]);C||m--;var F=new Array(m).fill(null),N=0;F[N++]=new $(h.coord);for(var q=h.segmentIndex+1;q<=d.segmentIndex;q++)F[N++]=this.edge.pts[q];return C&&(F[N]=d.coord),new fu(F,new Ts(this.edge._label))},Bc.prototype.add=function(h,d,m){var y=new li(h,d,m),C=this._nodeMap.get(y);return null!==C?C:(this._nodeMap.put(y,y),y)},Bc.prototype.isIntersection=function(h){for(var d=this.iterator();d.hasNext();)if(d.next().coord.equals(h))return!0;return!1},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc};var Ja=function(){};Ja.prototype.getChainStartIndices=function(h){var d=0,m=new hn;m.add(new Re(d));do{var y=this.findChainEnd(h,d);m.add(new Re(y)),d=y}while(d<h.length-1);return Ja.toIntArray(m)},Ja.prototype.findChainEnd=function(h,d){for(var m=Ws.quadrant(h[d],h[d+1]),y=d+1;y<h.length&&Ws.quadrant(h[y-1],h[y])===m;)y++;return y-1},Ja.prototype.interfaces_=function(){return[]},Ja.prototype.getClass=function(){return Ja},Ja.toIntArray=function(h){for(var d=new Array(h.size()).fill(null),m=0;m<d.length;m++)d[m]=h.get(m).intValue();return d};var kc=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new en,this.env2=new en;var h=arguments[0];this.e=h,this.pts=h.getCoordinates();var d=new Ja;this.startIndex=d.getChainStartIndices(this.pts)};kc.prototype.getCoordinates=function(){return this.pts},kc.prototype.getMaxX=function(h){var d=this.pts[this.startIndex[h]].x,m=this.pts[this.startIndex[h+1]].x;return d>m?d:m},kc.prototype.getMinX=function(h){var d=this.pts[this.startIndex[h]].x,m=this.pts[this.startIndex[h+1]].x;return d<m?d:m},kc.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var h=arguments[0],d=arguments[1],m=arguments[2];this.computeIntersectsForChain(this.startIndex[h],this.startIndex[h+1],d,d.startIndex[m],d.startIndex[m+1],arguments[3])}else if(6===arguments.length){var C=arguments[0],F=arguments[1],N=arguments[2],q=arguments[3],ye=arguments[4],je=arguments[5],yt=this.pts[C],vt=this.pts[F],gn=N.pts[q],En=N.pts[ye];if(F-C==1&&ye-q==1)return je.addIntersections(this.e,C,N.e,q),null;if(this.env1.init(yt,vt),this.env2.init(gn,En),!this.env1.intersects(this.env2))return null;var Pn=Math.trunc((C+F)/2),ri=Math.trunc((q+ye)/2);C<Pn&&(q<ri&&this.computeIntersectsForChain(C,Pn,N,q,ri,je),ri<ye&&this.computeIntersectsForChain(C,Pn,N,ri,ye,je)),Pn<F&&(q<ri&&this.computeIntersectsForChain(Pn,F,N,q,ri,je),ri<ye&&this.computeIntersectsForChain(Pn,F,N,ri,ye,je))}},kc.prototype.getStartIndexes=function(){return this.startIndex},kc.prototype.computeIntersects=function(h,d){for(var m=0;m<this.startIndex.length-1;m++)for(var y=0;y<h.startIndex.length-1;y++)this.computeIntersectsForChain(m,h,y,d)},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc};var $i=function h(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var d=0;d<2;d++)for(var m=0;m<3;m++)this._depth[d][m]=h.NULL_VALUE},V1={NULL_VALUE:{configurable:!0}};$i.prototype.getDepth=function(h,d){return this._depth[h][d]},$i.prototype.setDepth=function(h,d,m){this._depth[h][d]=m},$i.prototype.isNull=function(){if(0===arguments.length){for(var h=0;h<2;h++)for(var d=0;d<3;d++)if(this._depth[h][d]!==$i.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===$i.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===$i.NULL_VALUE:void 0},$i.prototype.normalize=function(){for(var h=0;h<2;h++)if(!this.isNull(h)){var d=this._depth[h][1];this._depth[h][2]<d&&(d=this._depth[h][2]),d<0&&(d=0);for(var m=1;m<3;m++){var y=0;this._depth[h][m]>d&&(y=1),this._depth[h][m]=y}}},$i.prototype.getDelta=function(h){return this._depth[h][pn.RIGHT]-this._depth[h][pn.LEFT]},$i.prototype.getLocation=function(h,d){return this._depth[h][d]<=0?he.EXTERIOR:he.INTERIOR},$i.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},$i.prototype.add=function(){if(1===arguments.length)for(var h=arguments[0],d=0;d<2;d++)for(var m=1;m<3;m++){var y=h.getLocation(d,m);y!==he.EXTERIOR&&y!==he.INTERIOR||(this.isNull(d,m)?this._depth[d][m]=$i.depthAtLocation(y):this._depth[d][m]+=$i.depthAtLocation(y))}else 3===arguments.length&&arguments[2]===he.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},$i.depthAtLocation=function(h){return h===he.EXTERIOR?0:h===he.INTERIOR?1:$i.NULL_VALUE},V1.NULL_VALUE.get=function(){return-1},Object.defineProperties($i,V1);var fu=function(h){function d(){if(h.call(this),this.pts=null,this._env=null,this.eiList=new Bc(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new $i,this._depthDelta=0,1===arguments.length)d.call(this,arguments[0],null);else if(2===arguments.length){var C=arguments[1];this.pts=arguments[0],this._label=C}}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.getDepth=function(){return this._depth},d.prototype.getCollapsedEdge=function(){var m=new Array(2).fill(null);return m[0]=this.pts[0],m[1]=this.pts[1],new d(m,Ts.toLineLabel(this._label))},d.prototype.isIsolated=function(){return this._isIsolated},d.prototype.getCoordinates=function(){return this.pts},d.prototype.setIsolated=function(m){this._isIsolated=m},d.prototype.setName=function(m){this._name=m},d.prototype.equals=function(m){if(!(m instanceof d))return!1;var y=m;if(this.pts.length!==y.pts.length)return!1;for(var C=!0,F=!0,N=this.pts.length,q=0;q<this.pts.length;q++)if(this.pts[q].equals2D(y.pts[q])||(C=!1),this.pts[q].equals2D(y.pts[--N])||(F=!1),!C&&!F)return!1;return!0},d.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},d.prototype.print=function(m){m.print("edge "+this._name+": "),m.print("LINESTRING (");for(var y=0;y<this.pts.length;y++)y>0&&m.print(","),m.print(this.pts[y].x+" "+this.pts[y].y);m.print(")  "+this._label+" "+this._depthDelta)},d.prototype.computeIM=function(m){d.updateIM(this._label,m)},d.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},d.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},d.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},d.prototype.getDepthDelta=function(){return this._depthDelta},d.prototype.getNumPoints=function(){return this.pts.length},d.prototype.printReverse=function(m){m.print("edge "+this._name+": ");for(var y=this.pts.length-1;y>=0;y--)m.print(this.pts[y]+" ");m.println("")},d.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new kc(this)),this._mce},d.prototype.getEnvelope=function(){if(null===this._env){this._env=new en;for(var m=0;m<this.pts.length;m++)this._env.expandToInclude(this.pts[m])}return this._env},d.prototype.addIntersection=function(m,y,C,F){var N=new $(m.getIntersection(F)),q=y,ye=m.getEdgeDistance(C,F),je=q+1;je<this.pts.length&&N.equals2D(this.pts[je])&&(q=je,ye=0),this.eiList.add(N,q,ye)},d.prototype.toString=function(){var m=new Se;m.append("edge "+this._name+": "),m.append("LINESTRING (");for(var y=0;y<this.pts.length;y++)y>0&&m.append(","),m.append(this.pts[y].x+" "+this.pts[y].y);return m.append(")  "+this._label+" "+this._depthDelta),m.toString()},d.prototype.isPointwiseEqual=function(m){if(this.pts.length!==m.pts.length)return!1;for(var y=0;y<this.pts.length;y++)if(!this.pts[y].equals2D(m.pts[y]))return!1;return!0},d.prototype.setDepthDelta=function(m){this._depthDelta=m},d.prototype.getEdgeIntersectionList=function(){return this.eiList},d.prototype.addIntersections=function(m,y,C){for(var F=0;F<m.getIntersectionNum();F++)this.addIntersection(m,y,C,F)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.updateIM=function(){if(2!==arguments.length)return h.prototype.updateIM.apply(this,arguments);var m=arguments[0],y=arguments[1];y.setAtLeastIfValid(m.getLocation(0,pn.ON),m.getLocation(1,pn.ON),1),m.isArea()&&(y.setAtLeastIfValid(m.getLocation(0,pn.LEFT),m.getLocation(1,pn.LEFT),2),y.setAtLeastIfValid(m.getLocation(0,pn.RIGHT),m.getLocation(1,pn.RIGHT),2))},d}(b2),da=function(h){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new xr,this._bufParams=h||null};da.prototype.setWorkingPrecisionModel=function(h){this._workingPrecisionModel=h},da.prototype.insertUniqueEdge=function(h){var d=this._edgeList.findEqualEdge(h);if(null!==d){var m=d.getLabel(),y=h.getLabel();d.isPointwiseEqual(h)||(y=new Ts(h.getLabel())).flip(),m.merge(y);var C=da.depthDelta(y),F=d.getDepthDelta()+C;d.setDepthDelta(F)}else this._edgeList.add(h),h.setDepthDelta(da.depthDelta(h.getLabel()))},da.prototype.buildSubgraphs=function(h,d){for(var m=new hn,y=h.iterator();y.hasNext();){var C=y.next(),F=C.getRightmostCoordinate(),N=new Aa(m).getDepth(F);C.computeDepth(N),C.findResultEdges(),m.add(C),d.add(C.getDirectedEdges(),C.getNodes())}},da.prototype.createSubgraphs=function(h){for(var d=new hn,m=h.getNodes().iterator();m.hasNext();){var y=m.next();if(!y.isVisited()){var C=new ma;C.create(y),d.add(C)}}return mo.sort(d,mo.reverseOrder()),d},da.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},da.prototype.getNoder=function(h){if(null!==this._workingNoder)return this._workingNoder;var d=new Nl,m=new xt;return m.setPrecisionModel(h),d.setSegmentIntersector(new Za(m)),d},da.prototype.buffer=function(h,d){var m=this._workingPrecisionModel;null===m&&(m=h.getPrecisionModel()),this._geomFact=h.getFactory();var y=new fr(m,this._bufParams),C=new co(h,d,y).getCurves();if(C.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(C,m),this._graph=new xn(new To),this._graph.addEdges(this._edgeList.getEdges());var F=this.createSubgraphs(this._graph),N=new y1(this._geomFact);this.buildSubgraphs(F,N);var q=N.getPolygons();return q.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(q)},da.prototype.computeNodedEdges=function(h,d){var m=this.getNoder(d);m.computeNodes(h);for(var y=m.getNodedSubstrings().iterator();y.hasNext();){var C=y.next(),F=C.getCoordinates();if(2!==F.length||!F[0].equals2D(F[1])){var N=C.getData(),q=new fu(C.getCoordinates(),new Ts(N));this.insertUniqueEdge(q)}}},da.prototype.setNoder=function(h){this._workingNoder=h},da.prototype.interfaces_=function(){return[]},da.prototype.getClass=function(){return da},da.depthDelta=function(h){var d=h.getLocation(0,pn.LEFT),m=h.getLocation(0,pn.RIGHT);return d===he.INTERIOR&&m===he.EXTERIOR?1:d===he.EXTERIOR&&m===he.INTERIOR?-1:0},da.convertSegStrings=function(h){for(var d=new ir,m=new hn;h.hasNext();){var y=h.next(),C=d.createLineString(y.getCoordinates());m.add(C)}return d.buildGeometry(m)};var e1=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var d=arguments[1];this._noder=arguments[0],this._scaleFactor=d,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var y=arguments[1],C=arguments[2],F=arguments[3];this._noder=arguments[0],this._scaleFactor=y,this._offsetX=C,this._offsetY=F,this._isScaled=!this.isIntegerPrecision()}};e1.prototype.rescale=function(){if(bt(arguments[0],Hs))for(var h=arguments[0].iterator();h.hasNext();){var d=h.next();this.rescale(d.getCoordinates())}else if(arguments[0]instanceof Array){for(var m=arguments[0],y=0;y<m.length;y++)m[y].x=m[y].x/this._scaleFactor+this._offsetX,m[y].y=m[y].y/this._scaleFactor+this._offsetY;2===m.length&&m[0].equals2D(m[1])&&Ut.out.println(m)}},e1.prototype.scale=function(){if(bt(arguments[0],Hs)){for(var h=arguments[0],d=new hn,m=h.iterator();m.hasNext();){var y=m.next();d.add(new fa(this.scale(y.getCoordinates()),y.getData()))}return d}if(arguments[0]instanceof Array){for(var C=arguments[0],F=new Array(C.length).fill(null),N=0;N<C.length;N++)F[N]=new $(Math.round((C[N].x-this._offsetX)*this._scaleFactor),Math.round((C[N].y-this._offsetY)*this._scaleFactor),C[N].z);return Vi.removeRepeatedPoints(F)}},e1.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},e1.prototype.getNodedSubstrings=function(){var h=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(h),h},e1.prototype.computeNodes=function(h){var d=h;this._isScaled&&(d=this.scale(h)),this._noder.computeNodes(d)},e1.prototype.interfaces_=function(){return[E3]},e1.prototype.getClass=function(){return e1};var t1=function(){this._li=new xt,this._segStrings=null,this._segStrings=arguments[0]},Hd={fact:{configurable:!0}};t1.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();){var d=h.next().getCoordinates();this.checkEndPtVertexIntersections(d[0],this._segStrings),this.checkEndPtVertexIntersections(d[d.length-1],this._segStrings)}else if(2===arguments.length)for(var m=arguments[0],y=arguments[1].iterator();y.hasNext();)for(var C=y.next().getCoordinates(),F=1;F<C.length-1;F++)if(C[F].equals(m))throw new fe("found endpt/interior pt intersection at index "+F+" :pt "+m)},t1.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();)for(var d=h.next(),m=this._segStrings.iterator();m.hasNext();){var y=m.next();this.checkInteriorIntersections(d,y)}else if(2===arguments.length)for(var C=arguments[0],F=arguments[1],N=C.getCoordinates(),q=F.getCoordinates(),ye=0;ye<N.length-1;ye++)for(var je=0;je<q.length-1;je++)this.checkInteriorIntersections(C,ye,F,je);else if(4===arguments.length){var yt=arguments[0],vt=arguments[1],gn=arguments[2],En=arguments[3];if(yt===gn&&vt===En)return null;var Pn=yt.getCoordinates()[vt],ri=yt.getCoordinates()[vt+1],Zr=gn.getCoordinates()[En],Zo=gn.getCoordinates()[En+1];if(this._li.computeIntersection(Pn,ri,Zr,Zo),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Pn,ri)||this.hasInteriorIntersection(this._li,Zr,Zo)))throw new fe("found non-noded intersection at "+Pn+"-"+ri+" and "+Zr+"-"+Zo)}},t1.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},t1.prototype.checkCollapses=function(){if(0===arguments.length)for(var h=this._segStrings.iterator();h.hasNext();){var d=h.next();this.checkCollapses(d)}else if(1===arguments.length)for(var m=arguments[0].getCoordinates(),y=0;y<m.length-2;y++)this.checkCollapse(m[y],m[y+1],m[y+2])},t1.prototype.hasInteriorIntersection=function(h,d,m){for(var y=0;y<h.getIntersectionNum();y++){var C=h.getIntersection(y);if(!C.equals(d)&&!C.equals(m))return!0}return!1},t1.prototype.checkCollapse=function(h,d,m){if(h.equals(m))throw new fe("found non-noded collapse at "+t1.fact.createLineString([h,d,m]))},t1.prototype.interfaces_=function(){return[]},t1.prototype.getClass=function(){return t1},Hd.fact.get=function(){return new ir},Object.defineProperties(t1,Hd);var vr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var h=arguments[0],d=arguments[1],m=arguments[2];if(this._originalPt=h,this._pt=h,this._scaleFactor=d,this._li=m,d<=0)throw new Y("Scale factor must be non-zero");1!==d&&(this._pt=new $(this.scale(h.x),this.scale(h.y)),this._p0Scaled=new $,this._p1Scaled=new $),this.initCorners(this._pt)},Q2={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};vr.prototype.intersectsScaled=function(h,d){var m=Math.min(h.x,d.x),y=Math.max(h.x,d.x),C=Math.min(h.y,d.y),F=Math.max(h.y,d.y),N=this._maxx<m||this._minx>y||this._maxy<C||this._miny>F;if(N)return!1;var q=this.intersectsToleranceSquare(h,d);return ie.isTrue(!(N&&q),"Found bad envelope test"),q},vr.prototype.initCorners=function(h){this._minx=h.x-.5,this._maxx=h.x+.5,this._miny=h.y-.5,this._maxy=h.y+.5,this._corner[0]=new $(this._maxx,this._maxy),this._corner[1]=new $(this._minx,this._maxy),this._corner[2]=new $(this._minx,this._miny),this._corner[3]=new $(this._maxx,this._miny)},vr.prototype.intersects=function(h,d){return 1===this._scaleFactor?this.intersectsScaled(h,d):(this.copyScaled(h,this._p0Scaled),this.copyScaled(d,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},vr.prototype.scale=function(h){return Math.round(h*this._scaleFactor)},vr.prototype.getCoordinate=function(){return this._originalPt},vr.prototype.copyScaled=function(h,d){d.x=this.scale(h.x),d.y=this.scale(h.y)},vr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var h=vr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new en(this._originalPt.x-h,this._originalPt.x+h,this._originalPt.y-h,this._originalPt.y+h)}return this._safeEnv},vr.prototype.intersectsPixelClosure=function(h,d){return this._li.computeIntersection(h,d,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(h,d,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},vr.prototype.intersectsToleranceSquare=function(h,d){var m=!1,y=!1;return this._li.computeIntersection(h,d,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(h,d,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(m=!0),this._li.computeIntersection(h,d,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(y=!0),this._li.computeIntersection(h,d,this._corner[3],this._corner[0]),this._li.isProper()||m&&y||h.equals(this._pt)||d.equals(this._pt)))))},vr.prototype.addSnappedNode=function(h,d){var m=h.getCoordinate(d),y=h.getCoordinate(d+1);return!!this.intersects(m,y)&&(h.addIntersection(this.getCoordinate(),d),!0)},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},Q2.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(vr,Q2);var ul=function(){this.tempEnv1=new en,this.selectedSegment=new gi};ul.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul};var Fc=function(){this._index=null,this._index=arguments[0]},Va={HotPixelSnapAction:{configurable:!0}};Fc.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var d=arguments[0],m=arguments[1],y=arguments[2],C=d.getSafeEnvelope(),F=new W2(d,m,y);return this._index.query(C,{interfaces_:function(){return[S3]},visitItem:function(N){N.select(C,F)}}),F.isNodeAdded()}},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc},Va.HotPixelSnapAction.get=function(){return W2},Object.defineProperties(Fc,Va);var W2=function(h){function d(){h.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var y=arguments[1],C=arguments[2];this._hotPixel=arguments[0],this._parentEdge=y,this._hotPixelVertexIndex=C}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.isNodeAdded=function(){return this._isNodeAdded},d.prototype.select=function(){if(2!==arguments.length)return h.prototype.select.apply(this,arguments);var y=arguments[1],C=arguments[0].getContext();if(null!==this._parentEdge&&C===this._parentEdge&&y===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(C,y)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(ul),Vl=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new hn};Vl.prototype.processIntersections=function(h,d,m,y){if(h===m&&d===y)return null;var C=h.getCoordinates()[d],F=h.getCoordinates()[d+1],N=m.getCoordinates()[y],q=m.getCoordinates()[y+1];if(this._li.computeIntersection(C,F,N,q),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var ye=0;ye<this._li.getIntersectionNum();ye++)this._interiorIntersections.add(this._li.getIntersection(ye));h.addIntersections(this._li,d,0),m.addIntersections(this._li,y,1)}},Vl.prototype.isDone=function(){return!1},Vl.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Vl.prototype.interfaces_=function(){return[Ys]},Vl.prototype.getClass=function(){return Vl};var U1=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var h=arguments[0];this._pm=h,this._li=new xt,this._li.setPrecisionModel(h),this._scaleFactor=h.getScale()};U1.prototype.checkCorrectness=function(h){var d=fa.getNodedSubstrings(h),m=new t1(d);try{m.checkValid()}catch(y){if(!(y instanceof on))throw y;y.printStackTrace()}},U1.prototype.getNodedSubstrings=function(){return fa.getNodedSubstrings(this._nodedSegStrings)},U1.prototype.snapRound=function(h,d){var m=this.findInteriorIntersections(h,d);this.computeIntersectionSnaps(m),this.computeVertexSnaps(h)},U1.prototype.findInteriorIntersections=function(h,d){var m=new Vl(d);return this._noder.setSegmentIntersector(m),this._noder.computeNodes(h),m.getInteriorIntersections()},U1.prototype.computeVertexSnaps=function(){if(bt(arguments[0],Hs))for(var h=arguments[0].iterator();h.hasNext();){var d=h.next();this.computeVertexSnaps(d)}else if(arguments[0]instanceof fa)for(var m=arguments[0],y=m.getCoordinates(),C=0;C<y.length;C++){var F=new vr(y[C],this._scaleFactor,this._li);this._pointSnapper.snap(F,m,C)&&m.addIntersection(y[C],C)}},U1.prototype.computeNodes=function(h){this._nodedSegStrings=h,this._noder=new Nl,this._pointSnapper=new Fc(this._noder.getIndex()),this.snapRound(h,this._li)},U1.prototype.computeIntersectionSnaps=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next(),y=new vr(m,this._scaleFactor,this._li);this._pointSnapper.snap(y)}},U1.prototype.interfaces_=function(){return[E3]},U1.prototype.getClass=function(){return U1};var Vr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Nr,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var m=arguments[1];this._argGeom=arguments[0],this._bufParams=m}},G4={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Vr.prototype.bufferFixedPrecision=function(h){var d=new e1(new U1(new Dn(1)),h.getScale()),m=new da(this._bufParams);m.setWorkingPrecisionModel(h),m.setNoder(d),this._resultGeometry=m.buffer(this._argGeom,this._distance)},Vr.prototype.bufferReducedPrecision=function(){var h=this;if(0===arguments.length){for(var d=Vr.MAX_PRECISION_DIGITS;d>=0;d--){try{h.bufferReducedPrecision(d)}catch(F){if(!(F instanceof _1))throw F;h._saveException=F}if(null!==h._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var y=Vr.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),C=new Dn(y);this.bufferFixedPrecision(C)}},Vr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var h=this._argGeom.getFactory().getPrecisionModel();h.getType()===Dn.FIXED?this.bufferFixedPrecision(h):this.bufferReducedPrecision()},Vr.prototype.setQuadrantSegments=function(h){this._bufParams.setQuadrantSegments(h)},Vr.prototype.bufferOriginalPrecision=function(){try{var h=new da(this._bufParams);this._resultGeometry=h.buffer(this._argGeom,this._distance)}catch(d){if(!(d instanceof fe))throw d;this._saveException=d}},Vr.prototype.getResultGeometry=function(h){return this._distance=h,this.computeGeometry(),this._resultGeometry},Vr.prototype.setEndCapStyle=function(h){this._bufParams.setEndCapStyle(h)},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.bufferOp=function(){if(2===arguments.length){var d=arguments[1];return new Vr(arguments[0]).getResultGeometry(d)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof bn&&"number"==typeof arguments[1]){var y=arguments[1],C=arguments[2],F=new Vr(arguments[0]);return F.setQuadrantSegments(C),F.getResultGeometry(y)}if(arguments[2]instanceof Nr&&arguments[0]instanceof bn&&"number"==typeof arguments[1]){var q=arguments[1];return new Vr(arguments[0],arguments[2]).getResultGeometry(q)}}else if(4===arguments.length){var yt=arguments[1],vt=arguments[2],gn=arguments[3],En=new Vr(arguments[0]);return En.setQuadrantSegments(vt),En.setEndCapStyle(gn),En.getResultGeometry(yt)}},Vr.precisionScaleFactor=function(h,d,m){var y=h.getEnvelopeInternal(),C=Le.max(Math.abs(y.getMaxX()),Math.abs(y.getMaxY()),Math.abs(y.getMinX()),Math.abs(y.getMinY()))+2*(d>0?d:0),F=m-Math.trunc(Math.log(C)/Math.log(10)+1);return Math.pow(10,F)},G4.CAP_ROUND.get=function(){return Nr.CAP_ROUND},G4.CAP_BUTT.get=function(){return Nr.CAP_FLAT},G4.CAP_FLAT.get=function(){return Nr.CAP_FLAT},G4.CAP_SQUARE.get=function(){return Nr.CAP_SQUARE},G4.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Vr,G4);var Zs=function(){this._pt=[new $,new $],this._distance=Z.NaN,this._isNull=!0};Zs.prototype.getCoordinates=function(){return this._pt},Zs.prototype.getCoordinate=function(h){return this._pt[h]},Zs.prototype.setMinimum=function(){if(1===arguments.length){var h=arguments[0];this.setMinimum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var y=d.distance(m);y<this._distance&&this.initialize(d,m,y)}},Zs.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var h=arguments[0],d=arguments[1];this._pt[0].setCoordinate(h),this._pt[1].setCoordinate(d),this._distance=h.distance(d),this._isNull=!1}else if(3===arguments.length){var y=arguments[1],C=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(y),this._distance=C,this._isNull=!1}},Zs.prototype.getDistance=function(){return this._distance},Zs.prototype.setMaximum=function(){if(1===arguments.length){var h=arguments[0];this.setMaximum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var y=d.distance(m);y>this._distance&&this.initialize(d,m,y)}},Zs.prototype.interfaces_=function(){return[]},Zs.prototype.getClass=function(){return Zs};var Xo=function(){};Xo.prototype.interfaces_=function(){return[]},Xo.prototype.getClass=function(){return Xo},Xo.computeDistance=function(){if(arguments[2]instanceof Zs&&arguments[0]instanceof ko&&arguments[1]instanceof $)for(var d=arguments[1],m=arguments[2],y=arguments[0].getCoordinates(),C=new gi,F=0;F<y.length-1;F++){C.setCoordinates(y[F],y[F+1]);var N=C.closestPoint(d);m.setMinimum(N,d)}else if(arguments[2]instanceof Zs&&arguments[0]instanceof ca&&arguments[1]instanceof $){var q=arguments[0],ye=arguments[1],je=arguments[2];Xo.computeDistance(q.getExteriorRing(),ye,je);for(var yt=0;yt<q.getNumInteriorRing();yt++)Xo.computeDistance(q.getInteriorRingN(yt),ye,je)}else if(arguments[2]instanceof Zs&&arguments[0]instanceof bn&&arguments[1]instanceof $){var vt=arguments[0],gn=arguments[1],En=arguments[2];if(vt instanceof ko)Xo.computeDistance(vt,gn,En);else if(vt instanceof ca)Xo.computeDistance(vt,gn,En);else if(vt instanceof H1)for(var Pn=vt,ri=0;ri<Pn.getNumGeometries();ri++){var Zr=Pn.getGeometryN(ri);Xo.computeDistance(Zr,gn,En)}else En.setMinimum(vt.getCoordinate(),gn)}else if(arguments[2]instanceof Zs&&arguments[0]instanceof gi&&arguments[1]instanceof $){var S1=arguments[1],Gl=arguments[2],Ql=arguments[0].closestPoint(S1);Gl.setMinimum(Ql,S1)}};var G1=function(h){this._maxPtDist=new Zs,this._inputGeom=h||null},qh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};G1.prototype.computeMaxMidpointDistance=function(h){var d=new Ia(this._inputGeom);h.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},G1.prototype.computeMaxVertexDistance=function(h){var d=new T3(this._inputGeom);h.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},G1.prototype.findDistance=function(h){return this.computeMaxVertexDistance(h),this.computeMaxMidpointDistance(h),this._maxPtDist.getDistance()},G1.prototype.getDistancePoints=function(){return this._maxPtDist},G1.prototype.interfaces_=function(){return[]},G1.prototype.getClass=function(){return G1},qh.MaxPointDistanceFilter.get=function(){return T3},qh.MaxMidpointDistanceFilter.get=function(){return Ia},Object.defineProperties(G1,qh);var T3=function(h){this._maxPtDist=new Zs,this._minPtDist=new Zs,this._geom=h||null};T3.prototype.filter=function(h){this._minPtDist.initialize(),Xo.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},T3.prototype.getMaxPointDistance=function(){return this._maxPtDist},T3.prototype.interfaces_=function(){return[yr]},T3.prototype.getClass=function(){return T3};var Ia=function(h){this._maxPtDist=new Zs,this._minPtDist=new Zs,this._geom=h||null};Ia.prototype.filter=function(h,d){if(0===d)return null;var m=h.getCoordinate(d-1),y=h.getCoordinate(d),C=new $((m.x+y.x)/2,(m.y+y.y)/2);this._minPtDist.initialize(),Xo.computeDistance(this._geom,C,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ia.prototype.isDone=function(){return!1},Ia.prototype.isGeometryChanged=function(){return!1},Ia.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ia.prototype.interfaces_=function(){return[V2]},Ia.prototype.getClass=function(){return Ia};var Ul=function(h){this._comps=h||null};Ul.prototype.filter=function(h){h instanceof ca&&this._comps.add(h)},Ul.prototype.interfaces_=function(){return[Xa]},Ul.prototype.getClass=function(){return Ul},Ul.getPolygons=function(){if(1===arguments.length)return Ul.getPolygons(arguments[0],new hn);if(2===arguments.length){var d=arguments[0],m=arguments[1];return d instanceof ca?m.add(d):d instanceof H1&&d.apply(new Ul(m)),m}};var x1=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var m=arguments[1];this._lines=arguments[0],this._isForcedToLineString=m}};x1.prototype.filter=function(h){if(this._isForcedToLineString&&h instanceof cl){var d=h.getFactory().createLineString(h.getCoordinateSequence());return this._lines.add(d),null}h instanceof ko&&this._lines.add(h)},x1.prototype.setForceToLineString=function(h){this._isForcedToLineString=h},x1.prototype.interfaces_=function(){return[ji]},x1.prototype.getClass=function(){return x1},x1.getGeometry=function(){if(1===arguments.length){var h=arguments[0];return h.getFactory().buildGeometry(x1.getLines(h))}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d.getFactory().buildGeometry(x1.getLines(d,m))}},x1.getLines=function(){if(1===arguments.length)return x1.getLines(arguments[0],!1);if(2===arguments.length){if(bt(arguments[0],Hs)&&bt(arguments[1],Hs)){for(var m=arguments[1],y=arguments[0].iterator();y.hasNext();){var C=y.next();x1.getLines(C,m)}return m}if(arguments[0]instanceof bn&&"boolean"==typeof arguments[1]){var F=arguments[0],N=arguments[1],q=new hn;return F.apply(new x1(q,N)),q}if(arguments[0]instanceof bn&&bt(arguments[1],Hs)){var ye=arguments[0],je=arguments[1];return ye instanceof ko?je.add(ye):ye.apply(new x1(je)),je}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&bt(arguments[0],Hs)&&bt(arguments[1],Hs)){for(var vt=arguments[1],gn=arguments[2],En=arguments[0].iterator();En.hasNext();){var Pn=En.next();x1.getLines(Pn,vt,gn)}return vt}if("boolean"==typeof arguments[2]&&arguments[0]instanceof bn&&bt(arguments[1],Hs)){var Zr=arguments[1];return arguments[0].apply(new x1(Zr,arguments[2])),Zr}}};var j2=function(){if(this._boundaryRule=Dr.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var h=arguments[0];if(null===h)throw new Y("Rule must be non-null");this._boundaryRule=h}};j2.prototype.locateInternal=function(){if(arguments[0]instanceof $&&arguments[1]instanceof ca){var h=arguments[0],d=arguments[1];if(d.isEmpty())return he.EXTERIOR;var m=d.getExteriorRing(),y=this.locateInPolygonRing(h,m);if(y===he.EXTERIOR)return he.EXTERIOR;if(y===he.BOUNDARY)return he.BOUNDARY;for(var C=0;C<d.getNumInteriorRing();C++){var F=d.getInteriorRingN(C),N=this.locateInPolygonRing(h,F);if(N===he.INTERIOR)return he.EXTERIOR;if(N===he.BOUNDARY)return he.BOUNDARY}return he.INTERIOR}if(arguments[0]instanceof $&&arguments[1]instanceof ko){var q=arguments[0],ye=arguments[1];if(!ye.getEnvelopeInternal().intersects(q))return he.EXTERIOR;var je=ye.getCoordinates();return ye.isClosed()||!q.equals(je[0])&&!q.equals(je[je.length-1])?St.isOnLine(q,je)?he.INTERIOR:he.EXTERIOR:he.BOUNDARY}if(arguments[0]instanceof $&&arguments[1]instanceof Lc){var yt=arguments[0];return arguments[1].getCoordinate().equals2D(yt)?he.INTERIOR:he.EXTERIOR}},j2.prototype.locateInPolygonRing=function(h,d){return d.getEnvelopeInternal().intersects(h)?St.locatePointInRing(h,d.getCoordinates()):he.EXTERIOR},j2.prototype.intersects=function(h,d){return this.locate(h,d)!==he.EXTERIOR},j2.prototype.updateLocationInfo=function(h){h===he.INTERIOR&&(this._isIn=!0),h===he.BOUNDARY&&this._numBoundaries++},j2.prototype.computeLocation=function(h,d){if(d instanceof Lc&&this.updateLocationInfo(this.locateInternal(h,d)),d instanceof ko)this.updateLocationInfo(this.locateInternal(h,d));else if(d instanceof ca)this.updateLocationInfo(this.locateInternal(h,d));else if(d instanceof cu)for(var m=d,y=0;y<m.getNumGeometries();y++){var C=m.getGeometryN(y);this.updateLocationInfo(this.locateInternal(h,C))}else if(d instanceof Zc)for(var F=d,N=0;N<F.getNumGeometries();N++){var q=F.getGeometryN(N);this.updateLocationInfo(this.locateInternal(h,q))}else if(d instanceof H1)for(var ye=new Ui(d);ye.hasNext();){var je=ye.next();je!==d&&this.computeLocation(h,je)}},j2.prototype.locate=function(h,d){return d.isEmpty()?he.EXTERIOR:d instanceof ko||d instanceof ca?this.locateInternal(h,d):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(h,d),this._boundaryRule.isInBoundary(this._numBoundaries)?he.BOUNDARY:this._numBoundaries>0||this._isIn?he.INTERIOR:he.EXTERIOR)},j2.prototype.interfaces_=function(){return[]},j2.prototype.getClass=function(){return j2};var Lo=function h(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)h.call(this,arguments[0],h.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var C=arguments[1],F=arguments[2];this._component=arguments[0],this._segIndex=C,this._pt=F}},ng={INSIDE_AREA:{configurable:!0}};Lo.prototype.isInsideArea=function(){return this._segIndex===Lo.INSIDE_AREA},Lo.prototype.getCoordinate=function(){return this._pt},Lo.prototype.getGeometryComponent=function(){return this._component},Lo.prototype.getSegmentIndex=function(){return this._segIndex},Lo.prototype.interfaces_=function(){return[]},Lo.prototype.getClass=function(){return Lo},ng.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Lo,ng);var t4=function(h){this._pts=h||null};t4.prototype.filter=function(h){h instanceof Lc&&this._pts.add(h)},t4.prototype.interfaces_=function(){return[Xa]},t4.prototype.getClass=function(){return t4},t4.getPoints=function(){if(1===arguments.length){var h=arguments[0];return h instanceof Lc?mo.singletonList(h):t4.getPoints(h,new hn)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d instanceof Lc?m.add(d):d instanceof H1&&d.apply(new t4(m)),m}};var Xh=function(){this._locations=null,this._locations=arguments[0]};Xh.prototype.filter=function(h){(h instanceof Lc||h instanceof ko||h instanceof ca)&&this._locations.add(new Lo(h,0,h.getCoordinate()))},Xh.prototype.interfaces_=function(){return[Xa]},Xh.prototype.getClass=function(){return Xh},Xh.getLocations=function(h){var d=new hn;return h.apply(new Xh(d)),d};var Ra=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new j2,this._minDistanceLocation=null,this._minDistance=Z.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var m=arguments[0],y=arguments[1],C=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=m,this._geom[1]=y,this._terminateDistance=C}};Ra.prototype.computeContainmentDistance=function(){if(0===arguments.length){var h=new Array(2).fill(null);if(this.computeContainmentDistance(0,h),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1],y=1-d,C=Ul.getPolygons(this._geom[d]);if(C.size()>0){var F=Xh.getLocations(this._geom[y]);if(this.computeContainmentDistance(F,C,m),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[y]=m[0],this._minDistanceLocation[d]=m[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&bt(arguments[0],aa)&&bt(arguments[1],aa)){for(var N=arguments[0],q=arguments[1],ye=arguments[2],je=0;je<N.size();je++)for(var yt=N.get(je),vt=0;vt<q.size();vt++)if(this.computeContainmentDistance(yt,q.get(vt),ye),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Lo&&arguments[1]instanceof ca){var gn=arguments[0],En=arguments[1],Pn=arguments[2],ri=gn.getCoordinate();if(he.EXTERIOR!==this._ptLocator.locate(ri,En))return this._minDistance=0,Pn[0]=gn,Pn[1]=new Lo(En,ri),null}},Ra.prototype.computeMinDistanceLinesPoints=function(h,d,m){for(var y=0;y<h.size();y++)for(var C=h.get(y),F=0;F<d.size();F++){var N=d.get(F);if(this.computeMinDistance(C,N,m),this._minDistance<=this._terminateDistance)return null}},Ra.prototype.computeFacetDistance=function(){var h=new Array(2).fill(null),d=x1.getLines(this._geom[0]),m=x1.getLines(this._geom[1]),y=t4.getPoints(this._geom[0]),C=t4.getPoints(this._geom[1]);return this.computeMinDistanceLines(d,m,h),this.updateMinDistance(h,!1),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistanceLinesPoints(d,C,h),this.updateMinDistance(h,!1),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistanceLinesPoints(m,y,h),this.updateMinDistance(h,!0),this._minDistance<=this._terminateDistance?null:(h[0]=null,h[1]=null,this.computeMinDistancePoints(y,C,h),void this.updateMinDistance(h,!1))))},Ra.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ra.prototype.updateMinDistance=function(h,d){if(null===h[0])return null;d?(this._minDistanceLocation[0]=h[1],this._minDistanceLocation[1]=h[0]):(this._minDistanceLocation[0]=h[0],this._minDistanceLocation[1]=h[1])},Ra.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ra.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof ko&&arguments[1]instanceof Lc){var h=arguments[0],d=arguments[1],m=arguments[2];if(h.getEnvelopeInternal().distance(d.getEnvelopeInternal())>this._minDistance)return null;for(var y=h.getCoordinates(),C=d.getCoordinate(),F=0;F<y.length-1;F++){var N=St.distancePointLine(C,y[F],y[F+1]);if(N<this._minDistance){this._minDistance=N;var q=new gi(y[F],y[F+1]).closestPoint(C);m[0]=new Lo(h,F,q),m[1]=new Lo(d,0,C)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof ko&&arguments[1]instanceof ko){var ye=arguments[0],je=arguments[1],yt=arguments[2];if(ye.getEnvelopeInternal().distance(je.getEnvelopeInternal())>this._minDistance)return null;for(var vt=ye.getCoordinates(),gn=je.getCoordinates(),En=0;En<vt.length-1;En++)for(var Pn=0;Pn<gn.length-1;Pn++){var ri=St.distanceLineLine(vt[En],vt[En+1],gn[Pn],gn[Pn+1]);if(ri<this._minDistance){this._minDistance=ri;var Zr=new gi(vt[En],vt[En+1]),Zo=new gi(gn[Pn],gn[Pn+1]),S1=Zr.closestPoints(Zo);yt[0]=new Lo(ye,En,S1[0]),yt[1]=new Lo(je,Pn,S1[1])}if(this._minDistance<=this._terminateDistance)return null}}},Ra.prototype.computeMinDistancePoints=function(h,d,m){for(var y=0;y<h.size();y++)for(var C=h.get(y),F=0;F<d.size();F++){var N=d.get(F),q=C.getCoordinate().distance(N.getCoordinate());if(q<this._minDistance&&(this._minDistance=q,m[0]=new Lo(C,0,C.getCoordinate()),m[1]=new Lo(N,0,N.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Ra.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Y("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ra.prototype.computeMinDistanceLines=function(h,d,m){for(var y=0;y<h.size();y++)for(var C=h.get(y),F=0;F<d.size();F++){var N=d.get(F);if(this.computeMinDistance(C,N,m),this._minDistance<=this._terminateDistance)return null}},Ra.prototype.interfaces_=function(){return[]},Ra.prototype.getClass=function(){return Ra},Ra.distance=function(h,d){return new Ra(h,d).distance()},Ra.isWithinDistance=function(h,d,m){return new Ra(h,d,m).distance()<=m},Ra.nearestPoints=function(h,d){return new Ra(h,d).nearestPoints()};var Q1=function(){this._pt=[new $,new $],this._distance=Z.NaN,this._isNull=!0};Q1.prototype.getCoordinates=function(){return this._pt},Q1.prototype.getCoordinate=function(h){return this._pt[h]},Q1.prototype.setMinimum=function(){if(1===arguments.length){var h=arguments[0];this.setMinimum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var y=d.distance(m);y<this._distance&&this.initialize(d,m,y)}},Q1.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var h=arguments[0],d=arguments[1];this._pt[0].setCoordinate(h),this._pt[1].setCoordinate(d),this._distance=h.distance(d),this._isNull=!1}else if(3===arguments.length){var y=arguments[1],C=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(y),this._distance=C,this._isNull=!1}},Q1.prototype.toString=function(){return it.toLineString(this._pt[0],this._pt[1])},Q1.prototype.getDistance=function(){return this._distance},Q1.prototype.setMaximum=function(){if(1===arguments.length){var h=arguments[0];this.setMaximum(h._pt[0],h._pt[1])}else if(2===arguments.length){var d=arguments[0],m=arguments[1];if(this._isNull)return this.initialize(d,m),null;var y=d.distance(m);y>this._distance&&this.initialize(d,m,y)}},Q1.prototype.interfaces_=function(){return[]},Q1.prototype.getClass=function(){return Q1};var hl=function(){};hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.computeDistance=function(){if(arguments[2]instanceof Q1&&arguments[0]instanceof ko&&arguments[1]instanceof $)for(var h=arguments[0],d=arguments[1],m=arguments[2],y=new gi,C=h.getCoordinates(),F=0;F<C.length-1;F++){y.setCoordinates(C[F],C[F+1]);var N=y.closestPoint(d);m.setMinimum(N,d)}else if(arguments[2]instanceof Q1&&arguments[0]instanceof ca&&arguments[1]instanceof $){var q=arguments[0],ye=arguments[1],je=arguments[2];hl.computeDistance(q.getExteriorRing(),ye,je);for(var yt=0;yt<q.getNumInteriorRing();yt++)hl.computeDistance(q.getInteriorRingN(yt),ye,je)}else if(arguments[2]instanceof Q1&&arguments[0]instanceof bn&&arguments[1]instanceof $){var vt=arguments[0],gn=arguments[1],En=arguments[2];if(vt instanceof ko)hl.computeDistance(vt,gn,En);else if(vt instanceof ca)hl.computeDistance(vt,gn,En);else if(vt instanceof H1)for(var Pn=vt,ri=0;ri<Pn.getNumGeometries();ri++){var Zr=Pn.getGeometryN(ri);hl.computeDistance(Zr,gn,En)}else En.setMinimum(vt.getCoordinate(),gn)}else if(arguments[2]instanceof Q1&&arguments[0]instanceof gi&&arguments[1]instanceof $){var S1=arguments[1],Gl=arguments[2],Ql=arguments[0].closestPoint(S1);Gl.setMinimum(Ql,S1)}};var S2=function(){this._g0=null,this._g1=null,this._ptDist=new Q1,this._densifyFrac=0;var d=arguments[1];this._g0=arguments[0],this._g1=d},M8={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};S2.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},S2.prototype.setDensifyFraction=function(h){if(h>1||h<=0)throw new Y("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=h},S2.prototype.compute=function(h,d){this.computeOrientedDistance(h,d,this._ptDist),this.computeOrientedDistance(d,h,this._ptDist)},S2.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},S2.prototype.computeOrientedDistance=function(h,d,m){var y=new Q4(d);if(h.apply(y),m.setMaximum(y.getMaxPointDistance()),this._densifyFrac>0){var C=new du(d,this._densifyFrac);h.apply(C),m.setMaximum(C.getMaxPointDistance())}},S2.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},S2.prototype.interfaces_=function(){return[]},S2.prototype.getClass=function(){return S2},S2.distance=function(){if(2===arguments.length)return new S2(arguments[0],arguments[1]).distance();if(3===arguments.length){var C=arguments[2],F=new S2(arguments[0],arguments[1]);return F.setDensifyFraction(C),F.distance()}},M8.MaxPointDistanceFilter.get=function(){return Q4},M8.MaxDensifiedByFractionDistanceFilter.get=function(){return du},Object.defineProperties(S2,M8);var Q4=function(){this._maxPtDist=new Q1,this._minPtDist=new Q1,this._euclideanDist=new hl,this._geom=null,this._geom=arguments[0]};Q4.prototype.filter=function(h){this._minPtDist.initialize(),hl.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Q4.prototype.getMaxPointDistance=function(){return this._maxPtDist},Q4.prototype.interfaces_=function(){return[yr]},Q4.prototype.getClass=function(){return Q4};var du=function(){this._maxPtDist=new Q1,this._minPtDist=new Q1,this._geom=null,this._numSubSegs=0;var d=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/d))};du.prototype.filter=function(h,d){if(0===d)return null;for(var m=h.getCoordinate(d-1),y=h.getCoordinate(d),C=(y.x-m.x)/this._numSubSegs,F=(y.y-m.y)/this._numSubSegs,N=0;N<this._numSubSegs;N++){var je=new $(m.x+N*C,m.y+N*F);this._minPtDist.initialize(),hl.computeDistance(this._geom,je,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},du.prototype.isDone=function(){return!1},du.prototype.isGeometryChanged=function(){return!1},du.prototype.getMaxPointDistance=function(){return this._maxPtDist},du.prototype.interfaces_=function(){return[V2]},du.prototype.getClass=function(){return du};var Pc=function(h,d,m){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=h||null,this._bufDistance=d||null,this._result=m||null},S8={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Pc.prototype.checkMaximumDistance=function(h,d,m){var y=new S2(d,h);if(y.setDensifyFraction(.25),this._maxDistanceFound=y.orientedDistance(),this._maxDistanceFound>m){this._isValid=!1;var C=y.getCoordinates();this._errorLocation=C[1],this._errorIndicator=h.getFactory().createLineString(C),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+it.toLineString(C[0],C[1])+")"}},Pc.prototype.isValid=function(){var h=Math.abs(this._bufDistance),d=Pc.MAX_DISTANCE_DIFF_FRAC*h;return this._minValidDistance=h-d,this._maxValidDistance=h+d,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Pc.VERBOSE&&Ut.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Pc.prototype.checkNegativeValid=function(){if(!(this._input instanceof ca||this._input instanceof Zc||this._input instanceof H1))return null;var h=this.getPolygonLines(this._input);if(this.checkMinimumDistance(h,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(h,this._result,this._maxValidDistance)},Pc.prototype.getErrorIndicator=function(){return this._errorIndicator},Pc.prototype.checkMinimumDistance=function(h,d,m){var y=new Ra(h,d,m);if(this._minDistanceFound=y.distance(),this._minDistanceFound<m){this._isValid=!1;var C=y.nearestPoints();this._errorLocation=y.nearestPoints()[1],this._errorIndicator=h.getFactory().createLineString(C),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+it.toLineString(C[0],C[1])+" )"}},Pc.prototype.checkPositiveValid=function(){var h=this._result.getBoundary();if(this.checkMinimumDistance(this._input,h,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,h,this._maxValidDistance)},Pc.prototype.getErrorLocation=function(){return this._errorLocation},Pc.prototype.getPolygonLines=function(h){for(var d=new hn,m=new x1(d),y=Ul.getPolygons(h).iterator();y.hasNext();)y.next().apply(m);return h.getFactory().buildGeometry(d)},Pc.prototype.getErrorMessage=function(){return this._errMsg},Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc},S8.VERBOSE.get=function(){return!1},S8.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Pc,S8);var n1=function(h,d,m){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=h||null,this._distance=d||null,this._result=m||null},ig={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};n1.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},n1.prototype.checkEnvelope=function(){if(this._distance<0)return null;var h=this._distance*n1.MAX_ENV_DIFF_FRAC;0===h&&(h=.001);var d=new en(this._input.getEnvelopeInternal());d.expandBy(this._distance);var m=new en(this._result.getEnvelopeInternal());m.expandBy(h),m.contains(d)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(m)),this.report("Envelope")},n1.prototype.checkDistance=function(){var h=new Pc(this._input,this._distance,this._result);h.isValid()||(this._isValid=!1,this._errorMsg=h.getErrorMessage(),this._errorLocation=h.getErrorLocation(),this._errorIndicator=h.getErrorIndicator()),this.report("Distance")},n1.prototype.checkArea=function(){var h=this._input.getArea(),d=this._result.getArea();this._distance>0&&h>d&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&h<d&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},n1.prototype.checkPolygonal=function(){this._result instanceof ca||this._result instanceof Zc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},n1.prototype.getErrorIndicator=function(){return this._errorIndicator},n1.prototype.getErrorLocation=function(){return this._errorLocation},n1.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},n1.prototype.report=function(h){if(!n1.VERBOSE)return null;Ut.out.println("Check "+h+": "+(this._isValid?"passed":"FAILED"))},n1.prototype.getErrorMessage=function(){return this._errorMsg},n1.prototype.interfaces_=function(){return[]},n1.prototype.getClass=function(){return n1},n1.isValidMsg=function(h,d,m){var y=new n1(h,d,m);return y.isValid()?null:y.getErrorMessage()},n1.isValid=function(h,d,m){return!!new n1(h,d,m).isValid()},ig.VERBOSE.get=function(){return!1},ig.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(n1,ig);var Hc=function(){this._pts=null,this._data=null;var d=arguments[1];this._pts=arguments[0],this._data=d};Hc.prototype.getCoordinates=function(){return this._pts},Hc.prototype.size=function(){return this._pts.length},Hc.prototype.getCoordinate=function(h){return this._pts[h]},Hc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Hc.prototype.getSegmentOctant=function(h){return h===this._pts.length-1?-1:G2.octant(this.getCoordinate(h),this.getCoordinate(h+1))},Hc.prototype.setData=function(h){this._data=h},Hc.prototype.getData=function(){return this._data},Hc.prototype.toString=function(){return it.toLineString(new Fo(this._pts))},Hc.prototype.interfaces_=function(){return[ha]},Hc.prototype.getClass=function(){return Hc};var va=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new hn,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};va.prototype.getInteriorIntersection=function(){return this._interiorIntersection},va.prototype.setCheckEndSegmentsOnly=function(h){this._isCheckEndSegmentsOnly=h},va.prototype.getIntersectionSegments=function(){return this._intSegments},va.prototype.count=function(){return this._intersectionCount},va.prototype.getIntersections=function(){return this._intersections},va.prototype.setFindAllIntersections=function(h){this._findAllIntersections=h},va.prototype.setKeepIntersections=function(h){this._keepIntersections=h},va.prototype.processIntersections=function(h,d,m,y){if(!this._findAllIntersections&&this.hasIntersection()||h===m&&d===y||this._isCheckEndSegmentsOnly&&!this.isEndSegment(h,d)&&!this.isEndSegment(m,y))return null;var C=h.getCoordinates()[d],F=h.getCoordinates()[d+1],N=m.getCoordinates()[y],q=m.getCoordinates()[y+1];this._li.computeIntersection(C,F,N,q),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=C,this._intSegments[1]=F,this._intSegments[2]=N,this._intSegments[3]=q,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},va.prototype.isEndSegment=function(h,d){return 0===d||d>=h.size()-2},va.prototype.hasIntersection=function(){return null!==this._interiorIntersection},va.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},va.prototype.interfaces_=function(){return[Ys]},va.prototype.getClass=function(){return va},va.createAllIntersectionsFinder=function(h){var d=new va(h);return d.setFindAllIntersections(!0),d},va.createAnyIntersectionFinder=function(h){return new va(h)},va.createIntersectionCounter=function(h){var d=new va(h);return d.setFindAllIntersections(!0),d.setKeepIntersections(!1),d};var fl=function(){this._li=new xt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};fl.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},fl.prototype.getIntersections=function(){return this._segInt.getIntersections()},fl.prototype.isValid=function(){return this.execute(),this._isValid},fl.prototype.setFindAllIntersections=function(h){this._findAllIntersections=h},fl.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new va(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var h=new Nl;if(h.setSegmentIntersector(this._segInt),h.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},fl.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new _1(this.getErrorMessage(),this._segInt.getInteriorIntersection())},fl.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var h=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+it.toLineString(h[0],h[1])+" and "+it.toLineString(h[2],h[3])},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.computeIntersections=function(h){var d=new fl(h);return d.setFindAllIntersections(!0),d.isValid(),d.getIntersections()};var pu=function h(){this._nv=null,this._nv=new fl(h.toSegmentStrings(arguments[0]))};pu.prototype.checkValid=function(){this._nv.checkValid()},pu.prototype.interfaces_=function(){return[]},pu.prototype.getClass=function(){return pu},pu.toSegmentStrings=function(h){for(var d=new hn,m=h.iterator();m.hasNext();){var y=m.next();d.add(new Hc(y.getCoordinates(),y))}return d},pu.checkValid=function(h){new pu(h).checkValid()};var Yh=function(h){this._mapOp=h};Yh.prototype.map=function(h){for(var d=new hn,m=0;m<h.getNumGeometries();m++){var y=this._mapOp.map(h.getGeometryN(m));y.isEmpty()||d.add(y)}return h.getFactory().createGeometryCollection(ir.toGeometryArray(d))},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh},Yh.map=function(h,d){return new Yh(d).map(h)};var C1=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new hn,this._resultLineList=new hn;var d=arguments[1],m=arguments[2];this._op=arguments[0],this._geometryFactory=d,this._ptLocator=m};C1.prototype.collectLines=function(h){for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var m=d.next();this.collectLineEdge(m,h,this._lineEdgesList),this.collectBoundaryTouchEdge(m,h,this._lineEdgesList)}},C1.prototype.labelIsolatedLine=function(h,d){var m=this._ptLocator.locate(h.getCoordinate(),this._op.getArgGeometry(d));h.getLabel().setLocation(d,m)},C1.prototype.build=function(h){return this.findCoveredLineEdges(),this.collectLines(h),this.buildLines(h),this._resultLineList},C1.prototype.collectLineEdge=function(h,d,m){var y=h.getLabel(),C=h.getEdge();h.isLineEdge()&&(h.isVisited()||!qi.isResultOfOp(y,d)||C.isCovered()||(m.add(C),h.setVisitedEdge(!0)))},C1.prototype.findCoveredLineEdges=function(){for(var h=this._op.getGraph().getNodes().iterator();h.hasNext();)h.next().getEdges().findCoveredLineEdges();for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var m=d.next(),y=m.getEdge();if(m.isLineEdge()&&!y.isCoveredSet()){var C=this._op.isCoveredByA(m.getCoordinate());y.setCovered(C)}}},C1.prototype.labelIsolatedLines=function(h){for(var d=h.iterator();d.hasNext();){var m=d.next(),y=m.getLabel();m.isIsolated()&&(y.isNull(0)?this.labelIsolatedLine(m,0):this.labelIsolatedLine(m,1))}},C1.prototype.buildLines=function(h){for(var d=this._lineEdgesList.iterator();d.hasNext();){var m=d.next(),y=this._geometryFactory.createLineString(m.getCoordinates());this._resultLineList.add(y),m.setInResult(!0)}},C1.prototype.collectBoundaryTouchEdge=function(h,d,m){var y=h.getLabel();return h.isLineEdge()||h.isVisited()||h.isInteriorAreaEdge()||h.getEdge().isInResult()?null:(ie.isTrue(!(h.isInResult()||h.getSym().isInResult())||!h.getEdge().isInResult()),void(qi.isResultOfOp(y,d)&&d===qi.INTERSECTION&&(m.add(h.getEdge()),h.setVisitedEdge(!0))))},C1.prototype.interfaces_=function(){return[]},C1.prototype.getClass=function(){return C1};var W4=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new hn;var d=arguments[1];this._op=arguments[0],this._geometryFactory=d};W4.prototype.filterCoveredNodeToPoint=function(h){var d=h.getCoordinate();if(!this._op.isCoveredByLA(d)){var m=this._geometryFactory.createPoint(d);this._resultPointList.add(m)}},W4.prototype.extractNonCoveredResultNodes=function(h){for(var d=this._op.getGraph().getNodes().iterator();d.hasNext();){var m=d.next();if(!(m.isInResult()||m.isIncidentEdgeInResult()||0!==m.getEdges().getDegree()&&h!==qi.INTERSECTION)){var y=m.getLabel();qi.isResultOfOp(y,h)&&this.filterCoveredNodeToPoint(m)}}},W4.prototype.build=function(h){return this.extractNonCoveredResultNodes(h),this._resultPointList},W4.prototype.interfaces_=function(){return[]},W4.prototype.getClass=function(){return W4};var Ir=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Ir.prototype.transformPoint=function(h,d){return this._factory.createPoint(this.transformCoordinates(h.getCoordinateSequence(),h))},Ir.prototype.transformPolygon=function(h,d){var m=!0,y=this.transformLinearRing(h.getExteriorRing(),h);null!==y&&y instanceof cl&&!y.isEmpty()||(m=!1);for(var C=new hn,F=0;F<h.getNumInteriorRing();F++){var N=this.transformLinearRing(h.getInteriorRingN(F),h);null===N||N.isEmpty()||(N instanceof cl||(m=!1),C.add(N))}if(m)return this._factory.createPolygon(y,C.toArray([]));var q=new hn;return null!==y&&q.add(y),q.addAll(C),this._factory.buildGeometry(q)},Ir.prototype.createCoordinateSequence=function(h){return this._factory.getCoordinateSequenceFactory().create(h)},Ir.prototype.getInputGeometry=function(){return this._inputGeom},Ir.prototype.transformMultiLineString=function(h,d){for(var m=new hn,y=0;y<h.getNumGeometries();y++){var C=this.transformLineString(h.getGeometryN(y),h);null!==C&&(C.isEmpty()||m.add(C))}return this._factory.buildGeometry(m)},Ir.prototype.transformCoordinates=function(h,d){return this.copy(h)},Ir.prototype.transformLineString=function(h,d){return this._factory.createLineString(this.transformCoordinates(h.getCoordinateSequence(),h))},Ir.prototype.transformMultiPoint=function(h,d){for(var m=new hn,y=0;y<h.getNumGeometries();y++){var C=this.transformPoint(h.getGeometryN(y),h);null!==C&&(C.isEmpty()||m.add(C))}return this._factory.buildGeometry(m)},Ir.prototype.transformMultiPolygon=function(h,d){for(var m=new hn,y=0;y<h.getNumGeometries();y++){var C=this.transformPolygon(h.getGeometryN(y),h);null!==C&&(C.isEmpty()||m.add(C))}return this._factory.buildGeometry(m)},Ir.prototype.copy=function(h){return h.copy()},Ir.prototype.transformGeometryCollection=function(h,d){for(var m=new hn,y=0;y<h.getNumGeometries();y++){var C=this.transform(h.getGeometryN(y));null!==C&&(this._pruneEmptyGeometry&&C.isEmpty()||m.add(C))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ir.toGeometryArray(m)):this._factory.buildGeometry(m)},Ir.prototype.transform=function(h){if(this._inputGeom=h,this._factory=h.getFactory(),h instanceof Lc)return this.transformPoint(h,null);if(h instanceof C3)return this.transformMultiPoint(h,null);if(h instanceof cl)return this.transformLinearRing(h,null);if(h instanceof ko)return this.transformLineString(h,null);if(h instanceof cu)return this.transformMultiLineString(h,null);if(h instanceof ca)return this.transformPolygon(h,null);if(h instanceof Zc)return this.transformMultiPolygon(h,null);if(h instanceof H1)return this.transformGeometryCollection(h,null);throw new Y("Unknown Geometry subtype: "+h.getClass().getName())},Ir.prototype.transformLinearRing=function(h,d){var m=this.transformCoordinates(h.getCoordinateSequence(),h);if(null===m)return this._factory.createLinearRing(null);var y=m.size();return y>0&&y<4&&!this._preserveType?this._factory.createLineString(m):this._factory.createLinearRing(m)},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir};var dl=function h(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gi,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof ko&&"number"==typeof arguments[1]){var m=arguments[1];h.call(this,arguments[0].getCoordinates(),m)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var y=arguments[0],C=arguments[1];this._srcPts=y,this._isClosed=h.isClosed(y),this._snapTolerance=C}};dl.prototype.snapVertices=function(h,d){for(var m=this._isClosed?h.size()-1:h.size(),y=0;y<m;y++){var C=h.get(y),F=this.findSnapForVertex(C,d);null!==F&&(h.set(y,new $(F)),0===y&&this._isClosed&&h.set(h.size()-1,new $(F)))}},dl.prototype.findSnapForVertex=function(h,d){for(var m=0;m<d.length;m++){if(h.equals2D(d[m]))return null;if(h.distance(d[m])<this._snapTolerance)return d[m]}return null},dl.prototype.snapTo=function(h){var d=new Tc(this._srcPts);return this.snapVertices(d,h),this.snapSegments(d,h),d.toCoordinateArray()},dl.prototype.snapSegments=function(h,d){if(0===d.length)return null;var m=d.length;d[0].equals2D(d[d.length-1])&&(m=d.length-1);for(var y=0;y<m;y++){var C=d[y],F=this.findSegmentIndexToSnap(C,h);F>=0&&h.add(F+1,new $(C),!1)}},dl.prototype.findSegmentIndexToSnap=function(h,d){for(var m=Z.MAX_VALUE,y=-1,C=0;C<d.size()-1;C++){if(this._seg.p0=d.get(C),this._seg.p1=d.get(C+1),this._seg.p0.equals2D(h)||this._seg.p1.equals2D(h)){if(this._allowSnappingToSourceVertices)continue;return-1}var F=this._seg.distance(h);F<this._snapTolerance&&F<m&&(m=F,y=C)}return y},dl.prototype.setAllowSnappingToSourceVertices=function(h){this._allowSnappingToSourceVertices=h},dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl},dl.isClosed=function(h){return!(h.length<=1)&&h[0].equals2D(h[h.length-1])};var Yo=function(h){this._srcGeom=h||null},rg={SNAP_PRECISION_FACTOR:{configurable:!0}};Yo.prototype.snapTo=function(h,d){var m=this.extractTargetCoordinates(h);return new gu(d,m).transform(this._srcGeom)},Yo.prototype.snapToSelf=function(h,d){var m=this.extractTargetCoordinates(this._srcGeom),y=new gu(h,m,!0).transform(this._srcGeom),C=y;return d&&bt(C,U2)&&(C=y.buffer(0)),C},Yo.prototype.computeSnapTolerance=function(h){return this.computeMinimumSegmentLength(h)/10},Yo.prototype.extractTargetCoordinates=function(h){for(var d=new ct,m=h.getCoordinates(),y=0;y<m.length;y++)d.add(m[y]);return d.toArray(new Array(0).fill(null))},Yo.prototype.computeMinimumSegmentLength=function(h){for(var d=Z.MAX_VALUE,m=0;m<h.length-1;m++){var y=h[m].distance(h[m+1]);y<d&&(d=y)}return d},Yo.prototype.interfaces_=function(){return[]},Yo.prototype.getClass=function(){return Yo},Yo.snap=function(h,d,m){var y=new Array(2).fill(null),C=new Yo(h);y[0]=C.snapTo(d,m);var F=new Yo(d);return y[1]=F.snapTo(y[0],m),y},Yo.computeOverlaySnapTolerance=function(){if(1===arguments.length){var h=arguments[0],d=Yo.computeSizeBasedSnapTolerance(h),m=h.getPrecisionModel();if(m.getType()===Dn.FIXED){var y=1/m.getScale()*2/1.415;y>d&&(d=y)}return d}if(2===arguments.length){var F=arguments[1];return Math.min(Yo.computeOverlaySnapTolerance(arguments[0]),Yo.computeOverlaySnapTolerance(F))}},Yo.computeSizeBasedSnapTolerance=function(h){var d=h.getEnvelopeInternal();return Math.min(d.getHeight(),d.getWidth())*Yo.SNAP_PRECISION_FACTOR},Yo.snapToSelf=function(h,d,m){return new Yo(h).snapToSelf(d,m)},rg.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Yo,rg);var gu=function(h){function d(m,y,C){h.call(this),this._snapTolerance=m||null,this._snapPts=y||null,this._isSelfSnap=void 0!==C&&C}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.snapLine=function(m,y){var C=new dl(m,this._snapTolerance);return C.setAllowSnappingToSourceVertices(this._isSelfSnap),C.snapTo(y)},d.prototype.transformCoordinates=function(m,y){var C=m.toCoordinateArray(),F=this.snapLine(C,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(F)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ir),M1=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};M1.prototype.getCommon=function(){return Z.longBitsToDouble(this._commonBits)},M1.prototype.add=function(h){var d=Z.doubleToLongBits(h);return this._isFirst?(this._commonBits=d,this._commonSignExp=M1.signExpBits(this._commonBits),this._isFirst=!1,null):M1.signExpBits(d)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=M1.numCommonMostSigMantissaBits(this._commonBits,d),void(this._commonBits=M1.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},M1.prototype.toString=function(){if(1===arguments.length){var h=arguments[0],d=Z.longBitsToDouble(h),m="0000000000000000000000000000000000000000000000000000000000000000"+Z.toBinaryString(h),y=m.substring(m.length-64);return y.substring(0,1)+"  "+y.substring(1,12)+"(exp) "+y.substring(12)+" [ "+d+" ]"}},M1.prototype.interfaces_=function(){return[]},M1.prototype.getClass=function(){return M1},M1.getBit=function(h,d){return 0!=(h&1<<d)?1:0},M1.signExpBits=function(h){return h>>52},M1.zeroLowerBits=function(h,d){return h&~((1<<d)-1)},M1.numCommonMostSigMantissaBits=function(h,d){for(var m=0,y=52;y>=0;y--){if(M1.getBit(h,y)!==M1.getBit(d,y))return m;m++}return 52};var mu=function(){this._commonCoord=null,this._ccFilter=new j4},n4={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};mu.prototype.addCommonBits=function(h){var d=new r1(this._commonCoord);h.apply(d),h.geometryChanged()},mu.prototype.removeCommonBits=function(h){if(0===this._commonCoord.x&&0===this._commonCoord.y)return h;var d=new $(this._commonCoord);d.x=-d.x,d.y=-d.y;var m=new r1(d);return h.apply(m),h.geometryChanged(),h},mu.prototype.getCommonCoordinate=function(){return this._commonCoord},mu.prototype.add=function(h){h.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},mu.prototype.interfaces_=function(){return[]},mu.prototype.getClass=function(){return mu},n4.CommonCoordinateFilter.get=function(){return j4},n4.Translater.get=function(){return r1},Object.defineProperties(mu,n4);var j4=function(){this._commonBitsX=new M1,this._commonBitsY=new M1};j4.prototype.filter=function(h){this._commonBitsX.add(h.x),this._commonBitsY.add(h.y)},j4.prototype.getCommonCoordinate=function(){return new $(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},j4.prototype.interfaces_=function(){return[yr]},j4.prototype.getClass=function(){return j4};var r1=function(){this.trans=null,this.trans=arguments[0]};r1.prototype.filter=function(h,d){var m=h.getOrdinate(d,0)+this.trans.x,y=h.getOrdinate(d,1)+this.trans.y;h.setOrdinate(d,0,m),h.setOrdinate(d,1,y)},r1.prototype.isDone=function(){return!1},r1.prototype.isGeometryChanged=function(){return!0},r1.prototype.interfaces_=function(){return[V2]},r1.prototype.getClass=function(){return r1};var _a=function(h,d){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=h,this._geom[1]=d,this.computeSnapTolerance()};_a.prototype.selfSnap=function(h){return new Yo(h).snapTo(h,this._snapTolerance)},_a.prototype.removeCommonBits=function(h){this._cbr=new mu,this._cbr.add(h[0]),this._cbr.add(h[1]);var d=new Array(2).fill(null);return d[0]=this._cbr.removeCommonBits(h[0].copy()),d[1]=this._cbr.removeCommonBits(h[1].copy()),d},_a.prototype.prepareResult=function(h){return this._cbr.addCommonBits(h),h},_a.prototype.getResultGeometry=function(h){var d=this.snap(this._geom),m=qi.overlayOp(d[0],d[1],h);return this.prepareResult(m)},_a.prototype.checkValid=function(h){h.isValid()||Ut.out.println("Snapped geometry is invalid")},_a.prototype.computeSnapTolerance=function(){this._snapTolerance=Yo.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},_a.prototype.snap=function(h){var d=this.removeCommonBits(h);return Yo.snap(d[0],d[1],this._snapTolerance)},_a.prototype.interfaces_=function(){return[]},_a.prototype.getClass=function(){return _a},_a.overlayOp=function(h,d,m){return new _a(h,d).getResultGeometry(m)},_a.union=function(h,d){return _a.overlayOp(h,d,qi.UNION)},_a.intersection=function(h,d){return _a.overlayOp(h,d,qi.INTERSECTION)},_a.symDifference=function(h,d){return _a.overlayOp(h,d,qi.SYMDIFFERENCE)},_a.difference=function(h,d){return _a.overlayOp(h,d,qi.DIFFERENCE)};var W1=function(h,d){this._geom=new Array(2).fill(null),this._geom[0]=h,this._geom[1]=d};W1.prototype.getResultGeometry=function(h){var d=null,m=!1,y=null;try{d=qi.overlayOp(this._geom[0],this._geom[1],h),m=!0}catch(C){if(!(C instanceof fe))throw C;y=C}if(!m)try{d=_a.overlayOp(this._geom[0],this._geom[1],h)}catch(C){throw C instanceof fe?y:C}return d},W1.prototype.interfaces_=function(){return[]},W1.prototype.getClass=function(){return W1},W1.overlayOp=function(h,d,m){return new W1(h,d).getResultGeometry(m)},W1.union=function(h,d){return W1.overlayOp(h,d,qi.UNION)},W1.intersection=function(h,d){return W1.overlayOp(h,d,qi.INTERSECTION)},W1.symDifference=function(h,d){return W1.overlayOp(h,d,qi.SYMDIFFERENCE)},W1.difference=function(h,d){return W1.overlayOp(h,d,qi.DIFFERENCE)};var L3=function(){this.mce=null,this.chainIndex=null;var d=arguments[1];this.mce=arguments[0],this.chainIndex=d};L3.prototype.computeIntersections=function(h,d){this.mce.computeIntersectsForChain(this.chainIndex,h.mce,h.chainIndex,d)},L3.prototype.interfaces_=function(){return[]},L3.prototype.getClass=function(){return L3};var zc=function h(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var d=arguments[0],m=arguments[1];this._eventType=h.DELETE,this._xValue=d,this._insertEvent=m}else if(3===arguments.length){var y=arguments[0],C=arguments[1],F=arguments[2];this._eventType=h.INSERT,this._label=y,this._xValue=C,this._obj=F}},sg={INSERT:{configurable:!0},DELETE:{configurable:!0}};zc.prototype.isDelete=function(){return this._eventType===zc.DELETE},zc.prototype.setDeleteEventIndex=function(h){this._deleteEventIndex=h},zc.prototype.getObject=function(){return this._obj},zc.prototype.compareTo=function(h){return this._xValue<h._xValue?-1:this._xValue>h._xValue?1:this._eventType<h._eventType?-1:this._eventType>h._eventType?1:0},zc.prototype.getInsertEvent=function(){return this._insertEvent},zc.prototype.isInsert=function(){return this._eventType===zc.INSERT},zc.prototype.isSameLabel=function(h){return null!==this._label&&this._label===h._label},zc.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},zc.prototype.interfaces_=function(){return[te]},zc.prototype.getClass=function(){return zc},sg.INSERT.get=function(){return 1},sg.DELETE.get=function(){return 2},Object.defineProperties(zc,sg);var ya=function(){};ya.prototype.interfaces_=function(){return[]},ya.prototype.getClass=function(){return ya};var s1=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var d=arguments[1],m=arguments[2];this._li=arguments[0],this._includeProper=d,this._recordIsolated=m};s1.prototype.isTrivialIntersection=function(h,d,m,y){if(h===m&&1===this._li.getIntersectionNum()){if(s1.isAdjacentSegments(d,y))return!0;if(h.isClosed()){var C=h.getNumPoints()-1;if(0===d&&y===C||0===y&&d===C)return!0}}return!1},s1.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},s1.prototype.setIsDoneIfProperInt=function(h){this._isDoneWhenProperInt=h},s1.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},s1.prototype.isBoundaryPointInternal=function(h,d){for(var m=d.iterator();m.hasNext();){var y=m.next().getCoordinate();if(h.isIntersection(y))return!0}return!1},s1.prototype.hasProperIntersection=function(){return this._hasProper},s1.prototype.hasIntersection=function(){return this._hasIntersection},s1.prototype.isDone=function(){return this._isDone},s1.prototype.isBoundaryPoint=function(h,d){return!(null===d||!this.isBoundaryPointInternal(h,d[0])&&!this.isBoundaryPointInternal(h,d[1]))},s1.prototype.setBoundaryNodes=function(h,d){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=h,this._bdyNodes[1]=d},s1.prototype.addIntersections=function(h,d,m,y){if(h===m&&d===y)return null;this.numTests++;var C=h.getCoordinates()[d],F=h.getCoordinates()[d+1],N=m.getCoordinates()[y],q=m.getCoordinates()[y+1];this._li.computeIntersection(C,F,N,q),this._li.hasIntersection()&&(this._recordIsolated&&(h.setIsolated(!1),m.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(h,d,m,y)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(h.addIntersections(this._li,d,0),m.addIntersections(this._li,y,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},s1.prototype.interfaces_=function(){return[]},s1.prototype.getClass=function(){return s1},s1.isAdjacentSegments=function(h,d){return 1===Math.abs(h-d)};var E8=function(h){function d(){h.call(this),this.events=new hn,this.nOverlaps=null}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.prepareEvents=function(){mo.sort(this.events);for(var m=0;m<this.events.size();m++){var y=this.events.get(m);y.isDelete()&&y.getInsertEvent().setDeleteEventIndex(m)}},d.prototype.computeIntersections=function(){if(1===arguments.length){var m=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var y=0;y<this.events.size();y++){var C=this.events.get(y);if(C.isInsert()&&this.processOverlaps(y,C.getDeleteEventIndex(),C,m),m.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof s1&&bt(arguments[0],aa)&&bt(arguments[1],aa)){var F=arguments[0],N=arguments[1],q=arguments[2];this.addEdges(F,F),this.addEdges(N,N),this.computeIntersections(q)}else if("boolean"==typeof arguments[2]&&bt(arguments[0],aa)&&arguments[1]instanceof s1){var ye=arguments[0],je=arguments[1];arguments[2]?this.addEdges(ye,null):this.addEdges(ye),this.computeIntersections(je)}},d.prototype.addEdge=function(m,y){for(var C=m.getMonotoneChainEdge(),F=C.getStartIndexes(),N=0;N<F.length-1;N++){var q=new L3(C,N),ye=new zc(y,C.getMinX(N),q);this.events.add(ye),this.events.add(new zc(C.getMaxX(N),ye))}},d.prototype.processOverlaps=function(m,y,C,F){for(var N=C.getObject(),q=m;q<y;q++){var ye=this.events.get(q);if(ye.isInsert()){var je=ye.getObject();C.isSameLabel(ye)||(N.computeIntersections(je,F),this.nOverlaps++)}}},d.prototype.addEdges=function(){if(1===arguments.length)for(var m=arguments[0].iterator();m.hasNext();){var y=m.next();this.addEdge(y,y)}else if(2===arguments.length)for(var F=arguments[1],N=arguments[0].iterator();N.hasNext();){var q=N.next();this.addEdge(q,F)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(ya),E2=function(){this._min=Z.POSITIVE_INFINITY,this._max=Z.NEGATIVE_INFINITY},$2={NodeComparator:{configurable:!0}};E2.prototype.getMin=function(){return this._min},E2.prototype.intersects=function(h,d){return!(this._min>d||this._max<h)},E2.prototype.getMax=function(){return this._max},E2.prototype.toString=function(){return it.toLineString(new $(this._min,0),new $(this._max,0))},E2.prototype.interfaces_=function(){return[]},E2.prototype.getClass=function(){return E2},$2.NodeComparator.get=function(){return nf},Object.defineProperties(E2,$2);var nf=function(){};nf.prototype.compare=function(h,d){var C=(h._min+h._max)/2,F=(d._min+d._max)/2;return C<F?-1:C>F?1:0},nf.prototype.interfaces_=function(){return[ce]},nf.prototype.getClass=function(){return nf};var T8=function(h){function d(){h.call(this),this._item=null;var y=arguments[1],C=arguments[2];this._min=arguments[0],this._max=y,this._item=C}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.query=function(m,y,C){if(!this.intersects(m,y))return null;C.visitItem(this._item)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(E2),Au=function(h){function d(){h.call(this),this._node1=null,this._node2=null;var y=arguments[1];this._node1=arguments[0],this._node2=y,this.buildExtent(this._node1,this._node2)}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.buildExtent=function(m,y){this._min=Math.min(m._min,y._min),this._max=Math.max(m._max,y._max)},d.prototype.query=function(m,y,C){if(!this.intersects(m,y))return null;null!==this._node1&&this._node1.query(m,y,C),null!==this._node2&&this._node2.query(m,y,C)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(E2),wa=function(){this._leaves=new hn,this._root=null,this._level=0};wa.prototype.buildTree=function(){mo.sort(this._leaves,new E2.NodeComparator);for(var h=this._leaves,d=null,m=new hn;;){if(this.buildLevel(h,m),1===m.size())return m.get(0);d=h,h=m,m=d}},wa.prototype.insert=function(h,d,m){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new T8(h,d,m))},wa.prototype.query=function(h,d,m){this.init(),this._root.query(h,d,m)},wa.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},wa.prototype.printNode=function(h){Ut.out.println(it.toLineString(new $(h._min,this._level),new $(h._max,this._level)))},wa.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},wa.prototype.buildLevel=function(h,d){this._level++,d.clear();for(var m=0;m<h.size();m+=2){var y=h.get(m);if(null===(m+1<h.size()?h.get(m):null))d.add(y);else{var C=new Au(h.get(m),h.get(m+1));d.add(C)}}},wa.prototype.interfaces_=function(){return[]},wa.prototype.getClass=function(){return wa};var Zh=function(){this._items=new hn};Zh.prototype.visitItem=function(h){this._items.add(h)},Zh.prototype.getItems=function(){return this._items},Zh.prototype.interfaces_=function(){return[S3]},Zh.prototype.getClass=function(){return Zh};var vu=function(){this._index=null;var h=arguments[0];if(!bt(h,U2))throw new Y("Argument must be Polygonal");this._index=new _u(h)},L8={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vu.prototype.locate=function(h){var d=new tn(h),m=new K2(d);return this._index.query(h.y,h.y,m),d.getLocation()},vu.prototype.interfaces_=function(){return[fn]},vu.prototype.getClass=function(){return vu},L8.SegmentVisitor.get=function(){return K2},L8.IntervalIndexedGeometry.get=function(){return _u},Object.defineProperties(vu,L8);var K2=function(){this._counter=null,this._counter=arguments[0]};K2.prototype.visitItem=function(h){var d=h;this._counter.countSegment(d.getCoordinate(0),d.getCoordinate(1))},K2.prototype.interfaces_=function(){return[S3]},K2.prototype.getClass=function(){return K2};var _u=function(){this._index=new wa,this.init(arguments[0])};_u.prototype.init=function(h){for(var d=x1.getLines(h).iterator();d.hasNext();){var m=d.next().getCoordinates();this.addLine(m)}},_u.prototype.addLine=function(h){for(var d=1;d<h.length;d++){var m=new gi(h[d-1],h[d]),y=Math.min(m.p0.y,m.p1.y),C=Math.max(m.p0.y,m.p1.y);this._index.insert(y,C,m)}},_u.prototype.query=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=new Zh;return this._index.query(h,d,m),m.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},_u.prototype.interfaces_=function(){return[]},_u.prototype.getClass=function(){return _u};var $4=function(h){function d(){if(h.call(this),this._parentGeom=null,this._lineEdgeMap=new Cr,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new j2,2===arguments.length){var y=arguments[1],C=Dr.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=y,this._boundaryNodeRule=C,null!==y&&this.add(y)}else if(3===arguments.length){var N=arguments[1],q=arguments[2];this._argIndex=arguments[0],this._parentGeom=N,this._boundaryNodeRule=q,null!==N&&this.add(N)}}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.insertBoundaryPoint=function(m,y){var C=this._nodes.addNode(y).getLabel(),F=1;C.getLocation(m,pn.ON)===he.BOUNDARY&&F++;var N=d.determineBoundary(this._boundaryNodeRule,F);C.setLocation(m,N)},d.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var F=arguments[1],N=arguments[2],q=new s1(arguments[0],!0,!1);return q.setIsDoneIfProperInt(N),this.createEdgeSetIntersector().computeIntersections(this._edges,q,F||!(this._parentGeom instanceof cl||this._parentGeom instanceof ca||this._parentGeom instanceof Zc)),this.addSelfIntersectionNodes(this._argIndex),q}},d.prototype.computeSplitEdges=function(m){for(var y=this._edges.iterator();y.hasNext();)y.next().eiList.addSplitEdges(m)},d.prototype.computeEdgeIntersections=function(m,y,C){var F=new s1(y,C,!0);return F.setBoundaryNodes(this.getBoundaryNodes(),m.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,m._edges,F),F},d.prototype.getGeometry=function(){return this._parentGeom},d.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},d.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},d.prototype.addPoint=function(){if(arguments[0]instanceof Lc){var m=arguments[0].getCoordinate();this.insertPoint(this._argIndex,m,he.INTERIOR)}else arguments[0]instanceof $&&this.insertPoint(this._argIndex,arguments[0],he.INTERIOR)},d.prototype.addPolygon=function(m){this.addPolygonRing(m.getExteriorRing(),he.EXTERIOR,he.INTERIOR);for(var y=0;y<m.getNumInteriorRing();y++){var C=m.getInteriorRingN(y);this.addPolygonRing(C,he.INTERIOR,he.EXTERIOR)}},d.prototype.addEdge=function(m){this.insertEdge(m);var y=m.getCoordinates();this.insertPoint(this._argIndex,y[0],he.BOUNDARY),this.insertPoint(this._argIndex,y[y.length-1],he.BOUNDARY)},d.prototype.addLineString=function(m){var y=Vi.removeRepeatedPoints(m.getCoordinates());if(y.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=y[0],null;var C=new fu(y,new Ts(this._argIndex,he.INTERIOR));this._lineEdgeMap.put(m,C),this.insertEdge(C),ie.isTrue(y.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,y[0]),this.insertBoundaryPoint(this._argIndex,y[y.length-1])},d.prototype.getInvalidPoint=function(){return this._invalidPoint},d.prototype.getBoundaryPoints=function(){for(var m=this.getBoundaryNodes(),y=new Array(m.size()).fill(null),C=0,F=m.iterator();F.hasNext();){var N=F.next();y[C++]=N.getCoordinate().copy()}return y},d.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},d.prototype.addSelfIntersectionNode=function(m,y,C){if(this.isBoundaryNode(m,y))return null;C===he.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(m,y):this.insertPoint(m,y,C)},d.prototype.addPolygonRing=function(m,y,C){if(m.isEmpty())return null;var F=Vi.removeRepeatedPoints(m.getCoordinates());if(F.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=F[0],null;var N=y,q=C;St.isCCW(F)&&(N=C,q=y);var ye=new fu(F,new Ts(this._argIndex,he.BOUNDARY,N,q));this._lineEdgeMap.put(m,ye),this.insertEdge(ye),this.insertPoint(this._argIndex,F[0],he.BOUNDARY)},d.prototype.insertPoint=function(m,y,C){var F=this._nodes.addNode(y),N=F.getLabel();null===N?F._label=new Ts(m,C):N.setLocation(m,C)},d.prototype.createEdgeSetIntersector=function(){return new E8},d.prototype.addSelfIntersectionNodes=function(m){for(var y=this._edges.iterator();y.hasNext();)for(var C=y.next(),F=C.getLabel().getLocation(m),N=C.eiList.iterator();N.hasNext();){var q=N.next();this.addSelfIntersectionNode(m,q.coord,F)}},d.prototype.add=function(){if(1!==arguments.length)return h.prototype.add.apply(this,arguments);var m=arguments[0];if(m.isEmpty())return null;if(m instanceof Zc&&(this._useBoundaryDeterminationRule=!1),m instanceof ca)this.addPolygon(m);else if(m instanceof ko)this.addLineString(m);else if(m instanceof Lc)this.addPoint(m);else if(m instanceof C3)this.addCollection(m);else if(m instanceof cu)this.addCollection(m);else if(m instanceof Zc)this.addCollection(m);else{if(!(m instanceof H1))throw new Error(m.getClass().getName());this.addCollection(m)}},d.prototype.addCollection=function(m){for(var y=0;y<m.getNumGeometries();y++){var C=m.getGeometryN(y);this.add(C)}},d.prototype.locate=function(m){return bt(this._parentGeom,U2)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vu(this._parentGeom)),this._areaPtLocator.locate(m)):this._ptLocator.locate(m,this._parentGeom)},d.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):h.prototype.findEdge.apply(this,arguments)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.determineBoundary=function(m,y){return m.isInBoundary(y)?he.BOUNDARY:he.INTERIOR},d}(xn),Ki=function(){if(this._li=new xt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var h=arguments[0];this.setComputationPrecision(h.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new $4(0,h)}else if(2===arguments.length){var d=arguments[0],m=arguments[1],y=Dr.OGC_SFS_BOUNDARY_RULE;d.getPrecisionModel().compareTo(m.getPrecisionModel())>=0?this.setComputationPrecision(d.getPrecisionModel()):this.setComputationPrecision(m.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new $4(0,d,y),this._arg[1]=new $4(1,m,y)}else if(3===arguments.length){var C=arguments[0],F=arguments[1],N=arguments[2];C.getPrecisionModel().compareTo(F.getPrecisionModel())>=0?this.setComputationPrecision(C.getPrecisionModel()):this.setComputationPrecision(F.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new $4(0,C,N),this._arg[1]=new $4(1,F,N)}};Ki.prototype.getArgGeometry=function(h){return this._arg[h].getGeometry()},Ki.prototype.setComputationPrecision=function(h){this._resultPrecisionModel=h,this._li.setPrecisionModel(this._resultPrecisionModel)},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki};var yu=function(){};yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.map=function(){if(arguments[0]instanceof bn&&bt(arguments[1],yu.MapOp)){for(var h=arguments[0],d=arguments[1],m=new hn,y=0;y<h.getNumGeometries();y++){var C=d.map(h.getGeometryN(y));null!==C&&m.add(C)}return h.getFactory().buildGeometry(m)}if(bt(arguments[0],Hs)&&bt(arguments[1],yu.MapOp)){for(var F=arguments[0],N=arguments[1],q=new hn,ye=F.iterator();ye.hasNext();){var je=ye.next(),yt=N.map(je);null!==yt&&q.add(yt)}return q}},yu.MapOp=function(){};var qi=function(h){function d(){var m=arguments[0];h.call(this,m,arguments[1]),this._ptLocator=new j2,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new xr,this._resultPolyList=new hn,this._resultLineList=new hn,this._resultPointList=new hn,this._graph=new xn(new To),this._geomFact=m.getFactory()}return h&&(d.__proto__=h),(d.prototype=Object.create(h&&h.prototype)).constructor=d,d.prototype.insertUniqueEdge=function(m){var y=this._edgeList.findEqualEdge(m);if(null!==y){var C=y.getLabel(),F=m.getLabel();y.isPointwiseEqual(m)||(F=new Ts(m.getLabel())).flip();var N=y.getDepth();N.isNull()&&N.add(C),N.add(F),C.merge(F)}else this._edgeList.add(m)},d.prototype.getGraph=function(){return this._graph},d.prototype.cancelDuplicateResultEdges=function(){for(var m=this._graph.getEdgeEnds().iterator();m.hasNext();){var y=m.next(),C=y.getSym();y.isInResult()&&C.isInResult()&&(y.setInResult(!1),C.setInResult(!1))}},d.prototype.isCoveredByLA=function(m){return!!this.isCovered(m,this._resultLineList)||!!this.isCovered(m,this._resultPolyList)},d.prototype.computeGeometry=function(m,y,C,F){var N=new hn;return N.addAll(m),N.addAll(y),N.addAll(C),N.isEmpty()?d.createEmptyResult(F,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(N)},d.prototype.mergeSymLabels=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();)m.next().getEdges().mergeSymLabels()},d.prototype.isCovered=function(m,y){for(var C=y.iterator();C.hasNext();){var F=C.next();if(this._ptLocator.locate(m,F)!==he.EXTERIOR)return!0}return!1},d.prototype.replaceCollapsedEdges=function(){for(var m=new hn,y=this._edgeList.iterator();y.hasNext();){var C=y.next();C.isCollapsed()&&(y.remove(),m.add(C.getCollapsedEdge()))}this._edgeList.addAll(m)},d.prototype.updateNodeLabelling=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();){var y=m.next(),C=y.getEdges().getLabel();y.getLabel().merge(C)}},d.prototype.getResultGeometry=function(m){return this.computeOverlay(m),this._resultGeom},d.prototype.insertUniqueEdges=function(m){for(var y=m.iterator();y.hasNext();){var C=y.next();this.insertUniqueEdge(C)}},d.prototype.computeOverlay=function(m){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var y=new hn;this._arg[0].computeSplitEdges(y),this._arg[1].computeSplitEdges(y),this.insertUniqueEdges(y),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),pu.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(m),this.cancelDuplicateResultEdges();var C=new y1(this._geomFact);C.add(this._graph),this._resultPolyList=C.getPolygons();var F=new C1(this,this._geomFact,this._ptLocator);this._resultLineList=F.build(m);var N=new W4(this,this._geomFact,this._ptLocator);this._resultPointList=N.build(m),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,m)},d.prototype.labelIncompleteNode=function(m,y){var C=this._ptLocator.locate(m.getCoordinate(),this._arg[y].getGeometry());m.getLabel().setLocation(y,C)},d.prototype.copyPoints=function(m){for(var y=this._arg[m].getNodeIterator();y.hasNext();){var C=y.next();this._graph.addNode(C.getCoordinate()).setLabel(m,C.getLabel().getLocation(m))}},d.prototype.findResultAreaEdges=function(m){for(var y=this._graph.getEdgeEnds().iterator();y.hasNext();){var C=y.next(),F=C.getLabel();F.isArea()&&!C.isInteriorAreaEdge()&&d.isResultOfOp(F.getLocation(0,pn.RIGHT),F.getLocation(1,pn.RIGHT),m)&&C.setInResult(!0)}},d.prototype.computeLabelsFromDepths=function(){for(var m=this._edgeList.iterator();m.hasNext();){var y=m.next(),C=y.getLabel(),F=y.getDepth();if(!F.isNull()){F.normalize();for(var N=0;N<2;N++)C.isNull(N)||!C.isArea()||F.isNull(N)||(0===F.getDelta(N)?C.toLine(N):(ie.isTrue(!F.isNull(N,pn.LEFT),"depth of LEFT side has not been initialized"),C.setLocation(N,pn.LEFT,F.getLocation(N,pn.LEFT)),ie.isTrue(!F.isNull(N,pn.RIGHT),"depth of RIGHT side has not been initialized"),C.setLocation(N,pn.RIGHT,F.getLocation(N,pn.RIGHT))))}}},d.prototype.computeLabelling=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();)m.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},d.prototype.labelIncompleteNodes=function(){for(var m=this._graph.getNodes().iterator();m.hasNext();){var y=m.next(),C=y.getLabel();y.isIsolated()&&(C.isNull(0)?this.labelIncompleteNode(y,0):this.labelIncompleteNode(y,1)),y.getEdges().updateLabelling(C)}},d.prototype.isCoveredByA=function(m){return!!this.isCovered(m,this._resultPolyList)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ki);qi.overlayOp=function(h,d,m){return new qi(h,d).getResultGeometry(m)},qi.intersection=function(h,d){if(h.isEmpty()||d.isEmpty())return qi.createEmptyResult(qi.INTERSECTION,h,d,h.getFactory());if(h.isGeometryCollection()){var m=d;return Yh.map(h,{interfaces_:function(){return[yu.MapOp]},map:function(y){return y.intersection(m)}})}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),W1.overlayOp(h,d,qi.INTERSECTION)},qi.symDifference=function(h,d){if(h.isEmpty()||d.isEmpty()){if(h.isEmpty()&&d.isEmpty())return qi.createEmptyResult(qi.SYMDIFFERENCE,h,d,h.getFactory());if(h.isEmpty())return d.copy();if(d.isEmpty())return h.copy()}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),W1.overlayOp(h,d,qi.SYMDIFFERENCE)},qi.resultDimension=function(h,d,m){var y=d.getDimension(),C=m.getDimension(),F=-1;switch(h){case qi.INTERSECTION:F=Math.min(y,C);break;case qi.UNION:F=Math.max(y,C);break;case qi.DIFFERENCE:F=y;break;case qi.SYMDIFFERENCE:F=Math.max(y,C)}return F},qi.createEmptyResult=function(h,d,m,y){var C=null;switch(qi.resultDimension(h,d,m)){case-1:C=y.createGeometryCollection(new Array(0).fill(null));break;case 0:C=y.createPoint();break;case 1:C=y.createLineString();break;case 2:C=y.createPolygon()}return C},qi.difference=function(h,d){return h.isEmpty()?qi.createEmptyResult(qi.DIFFERENCE,h,d,h.getFactory()):d.isEmpty()?h.copy():(h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),W1.overlayOp(h,d,qi.DIFFERENCE))},qi.isResultOfOp=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=h.getLocation(0),y=h.getLocation(1);return qi.isResultOfOp(m,y,d)}if(3===arguments.length){var C=arguments[0],F=arguments[1];switch(C===he.BOUNDARY&&(C=he.INTERIOR),F===he.BOUNDARY&&(F=he.INTERIOR),arguments[2]){case qi.INTERSECTION:return C===he.INTERIOR&&F===he.INTERIOR;case qi.UNION:return C===he.INTERIOR||F===he.INTERIOR;case qi.DIFFERENCE:return C===he.INTERIOR&&F!==he.INTERIOR;case qi.SYMDIFFERENCE:return C===he.INTERIOR&&F!==he.INTERIOR||C!==he.INTERIOR&&F===he.INTERIOR}return!1}},qi.INTERSECTION=1,qi.UNION=2,qi.DIFFERENCE=3,qi.SYMDIFFERENCE=4;var q2=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new j2,this._seg=new gi;var h=arguments[0],d=arguments[1];this._g=h,this._boundaryDistanceTolerance=d,this._linework=this.extractLinework(h)};q2.prototype.isWithinToleranceOfBoundary=function(h){for(var d=0;d<this._linework.getNumGeometries();d++)for(var m=this._linework.getGeometryN(d).getCoordinateSequence(),y=0;y<m.size()-1;y++)if(m.getCoordinate(y,this._seg.p0),m.getCoordinate(y+1,this._seg.p1),this._seg.distance(h)<=this._boundaryDistanceTolerance)return!0;return!1},q2.prototype.getLocation=function(h){return this.isWithinToleranceOfBoundary(h)?he.BOUNDARY:this._ptLocator.locate(h,this._g)},q2.prototype.extractLinework=function(h){var d=new Jh;h.apply(d);var m=d.getLinework(),y=ir.toLineStringArray(m);return h.getFactory().createMultiLineString(y)},q2.prototype.interfaces_=function(){return[]},q2.prototype.getClass=function(){return q2};var Jh=function(){this._linework=null,this._linework=new hn};Jh.prototype.getLinework=function(){return this._linework},Jh.prototype.filter=function(h){if(h instanceof ca){var d=h;this._linework.add(d.getExteriorRing());for(var m=0;m<d.getNumInteriorRing();m++)this._linework.add(d.getInteriorRingN(m))}},Jh.prototype.interfaces_=function(){return[Xa]},Jh.prototype.getClass=function(){return Jh};var r4=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};r4.prototype.extractPoints=function(h,d,m){for(var y=h.getCoordinates(),C=0;C<y.length-1;C++)this.computeOffsetPoints(y[C],y[C+1],d,m)},r4.prototype.setSidesToGenerate=function(h,d){this._doLeft=h,this._doRight=d},r4.prototype.getPoints=function(h){for(var d=new hn,m=x1.getLines(this._g).iterator();m.hasNext();){var y=m.next();this.extractPoints(y,h,d)}return d},r4.prototype.computeOffsetPoints=function(h,d,m,y){var C=d.x-h.x,F=d.y-h.y,N=Math.sqrt(C*C+F*F),q=m*C/N,ye=m*F/N,je=(d.x+h.x)/2,yt=(d.y+h.y)/2;if(this._doLeft){var vt=new $(je-ye,yt+q);y.add(vt)}if(this._doRight){var gn=new $(je+ye,yt-q);y.add(gn)}},r4.prototype.interfaces_=function(){return[]},r4.prototype.getClass=function(){return r4};var pc=function h(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=h.TOLERANCE,this._testCoords=new hn;var d=arguments[0],m=arguments[1],y=arguments[2];this._boundaryDistanceTolerance=h.computeBoundaryDistanceTolerance(d,m),this._geom=[d,m,y],this._locFinder=[new q2(this._geom[0],this._boundaryDistanceTolerance),new q2(this._geom[1],this._boundaryDistanceTolerance),new q2(this._geom[2],this._boundaryDistanceTolerance)]},og={TOLERANCE:{configurable:!0}};pc.prototype.reportResult=function(h,d,m){Ut.out.println("Overlay result invalid - A:"+he.toLocationSymbol(d[0])+" B:"+he.toLocationSymbol(d[1])+" expected:"+(m?"i":"e")+" actual:"+he.toLocationSymbol(d[2]))},pc.prototype.isValid=function(h){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(h)},pc.prototype.checkValid=function(){if(1===arguments.length){for(var h=arguments[0],d=0;d<this._testCoords.size();d++){var m=this._testCoords.get(d);if(!this.checkValid(h,m))return this._invalidLocation=m,!1}return!0}if(2===arguments.length){var y=arguments[0],C=arguments[1];return this._location[0]=this._locFinder[0].getLocation(C),this._location[1]=this._locFinder[1].getLocation(C),this._location[2]=this._locFinder[2].getLocation(C),!!pc.hasLocation(this._location,he.BOUNDARY)||this.isValidResult(y,this._location)}},pc.prototype.addTestPts=function(h){var d=new r4(h);this._testCoords.addAll(d.getPoints(5*this._boundaryDistanceTolerance))},pc.prototype.isValidResult=function(h,d){var m=qi.isResultOfOp(d[0],d[1],h),y=!(m^d[2]===he.INTERIOR);return y||this.reportResult(h,d,m),y},pc.prototype.getInvalidLocation=function(){return this._invalidLocation},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc},pc.hasLocation=function(h,d){for(var m=0;m<3;m++)if(h[m]===d)return!0;return!1},pc.computeBoundaryDistanceTolerance=function(h,d){return Math.min(Yo.computeSizeBasedSnapTolerance(h),Yo.computeSizeBasedSnapTolerance(d))},pc.isValid=function(h,d,m,y){return new pc(h,d,y).isValid(m)},og.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(pc,og);var t2=function h(d){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=h.extractFactory(d),this._inputGeoms=d};t2.prototype.extractElements=function(h,d){if(null===h)return null;for(var m=0;m<h.getNumGeometries();m++){var y=h.getGeometryN(m);this._skipEmpty&&y.isEmpty()||d.add(y)}},t2.prototype.combine=function(){for(var h=new hn,d=this._inputGeoms.iterator();d.hasNext();){var m=d.next();this.extractElements(m,h)}return 0===h.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(h)},t2.prototype.interfaces_=function(){return[]},t2.prototype.getClass=function(){return t2},t2.combine=function(){return 1===arguments.length?new t2(arguments[0]).combine():2===arguments.length?new t2(t2.createList(arguments[0],arguments[1])).combine():3===arguments.length?new t2(t2.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},t2.extractFactory=function(h){return h.isEmpty()?null:h.iterator().next().getFactory()},t2.createList=function(){if(2===arguments.length){var h=arguments[0],d=arguments[1],m=new hn;return m.add(h),m.add(d),m}if(3===arguments.length){var y=arguments[0],C=arguments[1],F=arguments[2],N=new hn;return N.add(y),N.add(C),N.add(F),N}};var Ht=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new hn)},Pr={STRTREE_NODE_CAPACITY:{configurable:!0}};Ht.prototype.reduceToGeometries=function(h){for(var d=new hn,m=h.iterator();m.hasNext();){var y=m.next(),C=null;bt(y,aa)?C=this.unionTree(y):y instanceof bn&&(C=y),d.add(C)}return d},Ht.prototype.extractByEnvelope=function(h,d,m){for(var y=new hn,C=0;C<d.getNumGeometries();C++){var F=d.getGeometryN(C);F.getEnvelopeInternal().intersects(h)?y.add(F):m.add(F)}return this._geomFactory.buildGeometry(y)},Ht.prototype.unionOptimized=function(h,d){var m=h.getEnvelopeInternal(),y=d.getEnvelopeInternal();if(!m.intersects(y))return t2.combine(h,d);if(h.getNumGeometries()<=1&&d.getNumGeometries()<=1)return this.unionActual(h,d);var C=m.intersection(y);return this.unionUsingEnvelopeIntersection(h,d,C)},Ht.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var h=new C8(Ht.STRTREE_NODE_CAPACITY),d=this._inputPolys.iterator();d.hasNext();){var m=d.next();h.insert(m.getEnvelopeInternal(),m)}this._inputPolys=null;var y=h.itemsTree();return this.unionTree(y)},Ht.prototype.binaryUnion=function(){if(1===arguments.length){var h=arguments[0];return this.binaryUnion(h,0,h.size())}if(3===arguments.length){var d=arguments[0],m=arguments[1],y=arguments[2];if(y-m<=1){var C=Ht.getGeometry(d,m);return this.unionSafe(C,null)}if(y-m==2)return this.unionSafe(Ht.getGeometry(d,m),Ht.getGeometry(d,m+1));var F=Math.trunc((y+m)/2),N=this.binaryUnion(d,m,F),q=this.binaryUnion(d,F,y);return this.unionSafe(N,q)}},Ht.prototype.repeatedUnion=function(h){for(var d=null,m=h.iterator();m.hasNext();){var y=m.next();d=null===d?y.copy():d.union(y)}return d},Ht.prototype.unionSafe=function(h,d){return null===h&&null===d?null:null===h?d.copy():null===d?h.copy():this.unionOptimized(h,d)},Ht.prototype.unionActual=function(h,d){return Ht.restrictToPolygons(h.union(d))},Ht.prototype.unionTree=function(h){var d=this.reduceToGeometries(h);return this.binaryUnion(d)},Ht.prototype.unionUsingEnvelopeIntersection=function(h,d,m){var y=new hn,C=this.extractByEnvelope(m,h,y),F=this.extractByEnvelope(m,d,y),N=this.unionActual(C,F);return y.add(N),t2.combine(y)},Ht.prototype.bufferUnion=function(){if(1===arguments.length){var h=arguments[0];return h.get(0).getFactory().buildGeometry(h).buffer(0)}if(2===arguments.length){var d=arguments[0],m=arguments[1];return d.getFactory().createGeometryCollection([d,m]).buffer(0)}},Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.restrictToPolygons=function(h){if(bt(h,U2))return h;var d=Ul.getPolygons(h);return 1===d.size()?d.get(0):h.getFactory().createMultiPolygon(ir.toPolygonArray(d))},Ht.getGeometry=function(h,d){return d>=h.size()?null:h.get(d)},Ht.union=function(h){return new Ht(h).union()},Pr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ht,Pr);var zn=function(){};zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn},zn.union=function(h,d){if(h.isEmpty()||d.isEmpty()){if(h.isEmpty()&&d.isEmpty())return qi.createEmptyResult(qi.UNION,h,d,h.getFactory());if(h.isEmpty())return d.copy();if(d.isEmpty())return h.copy()}return h.checkNotGeometryCollection(h),h.checkNotGeometryCollection(d),W1.overlayOp(h,d,qi.UNION)},ae.GeoJSONReader=uu,ae.GeoJSONWriter=w2,ae.OverlayOp=qi,ae.UnionOp=zn,ae.BufferOp=Vr,Object.defineProperty(ae,"__esModule",{value:!0})}(Ze)},5623:Et=>{function Ze(ae,ee){const ve=new RegExp(ee,"g"),Be=ae.match(ve);return Be?Be.length:0}Et.exports=Ze,Et.exports.default=Ze},4267:(Et,Ze,ae)=>{const ee=ae(394),ve=ae(5515),Be=ae(5623);function Ie(Te,_e,Ve){const Je=Ve&&Ve.debug||!1,ot=!(Ve&&!1===typeof Ve.nested),Tt=Ve&&Ve.startIndex||0;Je&&console.log("[xml-utils] starting findTagByName with",_e," and ",Ve);const ht=ee(Te,`<${_e}[ \n>/]`,Tt);if(Je&&console.log("[xml-utils] start:",ht),-1===ht)return;const et=Te.slice(ht+_e.length);let ct=ve(et,"^[^<]*[ /]>",0);const $t=-1!==ct&&"/"===et[ct-1];if(Je&&console.log("[xml-utils] selfClosing:",$t),!1===$t)if(ot){let Y=0,Z=1,xe=0;for(;-1!==(ct=ve(et,"[ /]"+_e+">",Y));){const te=et.substring(Y,ct+1);if(Z+=Be(te,"<"+_e+"[ \n\t>]"),xe+=Be(te,"</"+_e+">"),xe>=Z)break;Y=ct}}else ct=ve(et,"[ /]"+_e+">",0);const Qe=ht+_e.length+ct+1;if(Je&&console.log("[xml-utils] end:",Qe),-1===Qe)return;const Ke=Te.slice(ht,Qe);let j;return j=$t?null:Ke.slice(Ke.indexOf(">")+1,Ke.lastIndexOf("<")),{inner:j,outer:Ke,start:ht,end:Qe}}Et.exports=Ie,Et.exports.default=Ie},7257:(Et,Ze,ae)=>{const ee=ae(4267);function ve(Be,Ie,Te){const _e=[],Ve=Te&&Te.debug||!1,Je=!Te||"boolean"!=typeof Te.nested||Te.nested;let Tt,ot=Te&&Te.startIndex||0;for(;Tt=ee(Be,Ie,{debug:Ve,startIndex:ot});)ot=Je?Tt.start+1+Ie.length:Tt.end,_e.push(Tt);return Ve&&console.log("findTagsByName found",_e.length,"tags"),_e}Et.exports=ve,Et.exports.default=ve},4321:Et=>{function Ze(ae,ee,ve){const Be=ve&&ve.debug||!1;Be&&console.log("[xml-utils] getting "+ee+" in "+ae);const Ie="object"==typeof ae?ae.outer:ae,Te=Ie.slice(0,Ie.indexOf(">")+1),_e=['"',"'"];for(let Ve=0;Ve<_e.length;Ve++){const Je=_e[Ve],ot=ee+"\\="+Je+"([^"+Je+"]*)"+Je;Be&&console.log("[xml-utils] pattern:",ot);const ht=new RegExp(ot).exec(Te);if(Be&&console.log("[xml-utils] match:",ht),ht)return ht[1]}}Et.exports=Ze,Et.exports.default=Ze},5515:Et=>{function Ze(ae,ee,ve){const Ie=new RegExp(ee).exec(ae.slice(ve));return Ie?ve+Ie.index+Ie[0].length-1:-1}Et.exports=Ze,Et.exports.default=Ze},394:Et=>{function Ze(ae,ee,ve){const Ie=new RegExp(ee).exec(ae.slice(ve));return Ie?ve+Ie.index:-1}Et.exports=Ze,Et.exports.default=Ze},3752:()=>{},3640:()=>{},2630:()=>{},6945:(Et,Ze,ae)=>{"use strict";ae.d(Ze,{Ie:()=>Ve,It:()=>Ie,L:()=>ee,L5:()=>ot,P1:()=>ht,Qb:()=>Tt,pd:()=>Je,sf:()=>_e});const ee={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},ve={};for(const ct in ee)ee.hasOwnProperty(ct)&&(ve[ee[ct]]=parseInt(ct,10));const Ie=[ve.BitsPerSample,ve.ExtraSamples,ve.SampleFormat,ve.StripByteCounts,ve.StripOffsets,ve.StripRowCounts,ve.TileByteCounts,ve.TileOffsets,ve.SubIFDs],Te={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},_e={};for(const ct in Te)Te.hasOwnProperty(ct)&&(_e[Te[ct]]=parseInt(ct,10));const Ve={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},Je={Unspecified:0,Assocalpha:1,Unassalpha:2},ot={Version:0,AddCompression:1},Tt={None:0,Deflate:1},ht={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},et={};for(const ct in ht)ht.hasOwnProperty(ct)&&(et[ht[ct]]=parseInt(ct,10))},5861:(Et,Ze,ae)=>{"use strict";function ee(Be,Ie,Te,_e,Ve,Je,ot){try{var Tt=Be[Je](ot),ht=Tt.value}catch(et){return void Te(et)}Tt.done?Ie(ht):Promise.resolve(ht).then(_e,Ve)}function ve(Be){return function(){var Ie=this,Te=arguments;return new Promise(function(_e,Ve){var Je=Be.apply(Ie,Te);function ot(ht){ee(Je,_e,Ve,ot,Tt,"next",ht)}function Tt(ht){ee(Je,_e,Ve,ot,Tt,"throw",ht)}ot(void 0)})}}ae.d(Ze,{Z:()=>ve})}},Et=>{Et(Et.s=6534)}]);